(this["webpackJsonpambire-wallet"]=this["webpackJsonpambire-wallet"]||[]).push([[20],{1598:function(e,n,t){e.exports={deposit:"Deposit_deposit__MVFPl",panel:"Deposit_panel__3vfYo","text-input":"Deposit_text-input__3EdJJ",heading:"Deposit_heading__37Rps",title:"Deposit_title__FtpVm",subtitle:"Deposit_subtitle__28DJk",description:"Deposit_description__1u2D2",qrCode:"Deposit_qrCode__3gFm8",networks:"Deposit_networks__20Jgz",list:"Deposit_list__2V21e",network:"Deposit_network__3IP_d",icon:"Deposit_icon__2OVP1",name:"Deposit_name__3iAeA",logos:"Deposit_logos__1W5P7"}},1599:function(e,n,t){},1602:function(e,n,t){},1622:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return H}));var a=t(9),c=t(1598),i=t.n(c),r=t(3),s=t(47),o=t(86),d=t(738),l=t.n(d),u=t(225),m=(t(1599),t.p+"static/media/ramp.26a99e26.svg"),b=t.p+"static/media/paytrie.338f7c3b.svg",f=t.p+"static/media/transak.e01c0265.svg",j=t.p+"static/media/kriptomat.4c8e4fc1.svg",p=t.p+"static/media/guardarian.5b666fba.svg",v=t(2),h=t.n(v),O=t(7),g=t(15),x=t(12),y=t(1600),w=t(1601),k=t.n(w),T=function(e){var n=e.url,t=e.title,a=e.w,c=e.h,i=void 0!==window.screenLeft?window.screenLeft:window.screenX,r=void 0!==window.screenTop?window.screenTop:window.screenY,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,d=s/window.screen.availWidth,l=(s-a)/2/d+i,u=(o-c)/2/d+r,m=window.open(n,t,"\n\t\ttoolbar=no,scrollbars=no,resizable=no\n\t\twidth=".concat(a/d,", \n\t\theight=").concat(c/d,", \n\t\ttop=").concat(u,", \n\t\tleft=").concat(l,",\n\t\t"));window.focus&&m.focus()},C=t(94),N=t(45),S=t(36),A=(t(1602),[{label:"EUR",value:"EUR",icon:"https://changenow.io/images/sprite/currencies/eur.svg"},{label:"GBP",value:"GBP",icon:"https://changenow.io/images/sprite/currencies/gbp.svg"},{label:"USD",value:"USD",icon:"https://changenow.io/images/sprite/currencies/usd.svg"}]),E={ethereum:"ETH","binance-smart-chain":"BSC",polygon:"MATIC",fantom:"FTM",avalanche:"AVAX"},M={ethereum:"ETH","binance-smart-chain":"BNB",polygon:"MATIC",fantom:"FTM",avalanche:"AVAX"},_="0x"+"0".repeat(40),F=function(e){var n=e.relayerURL,t=e.selectedNetwork,c=e.initMode,i=e.tokens,s=e.walletAddress,o="".concat(n,"/guardarian/currencies/fiat"),d="".concat(n,"/guardarian/currencies/crypto"),l=A,u=Object(N.a)().addToast,m=Object(r.useState)(t),b=Object(a.a)(m,2),f=b[0],j=b[1],p=Object(r.useState)(""),v=Object(a.a)(p,2),h=v[0],O=v[1],g=Object(r.useState)(""),x=Object(a.a)(g,2),y=x[0],w=x[1],k=Object(r.useState)(c),T=Object(a.a)(k,2),S=T[0],F=T[1],L=Object(r.useState)("50"),U=Object(a.a)(L,2),D=U[0],B=U[1],I=Object(r.useState)({data:[]}),R=Object(a.a)(I,2),P=R[0],W=R[1],G=Object(r.useState)({data:[]}),H=Object(a.a)(G,2),V=H[0],q=H[1],J=Object(r.useState)(null),K=Object(a.a)(J,2),Y=K[0],z=K[1],$=Object(r.useState)({data:null,isLoading:!1}),X=Object(a.a)($,2),Q=X[0],Z=X[1],ee=Object(r.useMemo)((function(){var e,n;return"buy"===S?{data:(null===P||void 0===P||null===(e=P.data)||void 0===e?void 0:e.filter((function(e){return e.networks.find((function(e){return e.network===E[f]&&e.payment_methods.some((function(e){return e.withdrawal_enabled}))}))})).map((function(e){return{label:e.ticker,value:e.ticker,icon:e.logo_url}})).filter((function(e){return e.value})))||[],isLoading:null===P||void 0===P?void 0:P.isLoading}:"sell"===S?{data:(null===P||void 0===P||null===(n=P.data)||void 0===n?void 0:n.filter((function(e){return e.networks.find((function(e){return e.network===E[f]&&e.payment_methods.some((function(e){return e.deposit_enabled}))&&i.find((function(n){var t,a;return(null===n||void 0===n||null===(t=n.address)||void 0===t?void 0:t.toLowerCase())===(null===e||void 0===e||null===(a=e.token_contract)||void 0===a?void 0:a.toLowerCase())||(null===n||void 0===n?void 0:n.address)===_&&null===(null===e||void 0===e?void 0:e.token_contract)}))}))})).map((function(e){return{label:e.ticker,value:e.ticker,icon:e.logo_url}})).filter((function(e){return e.value})))||[],isLoading:P.isLoading}:void 0}),[S,P,f,i]),ne=Object(r.useMemo)((function(){var e;return"buy"===S?{data:(null===V||void 0===V||null===(e=V.data)||void 0===e?void 0:e.map((function(e){var n;return{label:e.ticker,value:e.ticker,icon:e.logo_url||"https://changenow.io/images/sprite/currencies/".concat(null===e||void 0===e||null===(n=e.ticker)||void 0===n?void 0:n.toLowerCase(),".svg")}})))||[],isLoading:null===V||void 0===V?void 0:V.isLoading}:"sell"===S?{data:l,isLoading:!1}:void 0}),[S,V,l]);Object(r.useEffect)((function(){"buy"===S?(B("50"),O(ne.data&&ne.data[0]?ne.data[0].value:null),w(M[f])):"sell"===S&&(B(""),O(ee.data&&ee.data[0]?ee.data[0].value:null),w(ne.data&&ne.data[0]?ne.data[0].value:null))}),[S,ne,ee,f]),Object(r.useEffect)((function(){q({data:null,isLoading:!0}),Object(C.c)(o).then((function(e){return q({data:e,isLoading:!1,error:{},message:""})})).catch((function(e){q({data:null,isLoading:!1,error:e,message:"Error while fetching fiat list"}),u("Error while fetching fiat list",{error:!0})}))}),[o,u]),Object(r.useEffect)((function(){W({data:null,isLoading:!0}),Object(C.c)(d).then((function(e){W({data:e,isLoading:!1,error:{},message:""})})).catch((function(e){W({data:null,isLoading:!1,error:e,message:"Error while fetching crypto list"}),u("Error while fetching crypto list",{error:!0})}))}),[f,d,u]);var te=Object(r.useCallback)((function(){var e="buy"===S?"".concat(h,"_").concat(y,"-").concat(E[f]):"sell"===S?"".concat(h,"-").concat(E[f],"_").concat(y):null;return e?"".concat(n,"/guardarian/market-info/").concat(e):null}),[S,h,y,f,n]);Object(r.useEffect)((function(){if(!f||!h||!y||!S)return z({data:null,isLoading:!1});z({data:null,isLoading:!0});var e=te(),n=!1;return Object(C.c)(e).then((function(e){var t=e.data;return!n&&z({data:t,isLoading:!1})})).catch((function(e){return!n&&(z({data:null,isLoading:!1,error:e,message:"Error while fetching market info"}),u("Error while fetching market info",{error:!0}))})),function(){n=!0}}),[f,S,h,y,u,te]);var ae=Object(r.useCallback)((function(){return"buy"===S?"".concat(n,"/guardarian/estimate/").concat(h,"/").concat(f,"/").concat(D,"/").concat(y,"/","true"):"".concat(n,"/guardarian/estimate/").concat(h,"/").concat(f,"/").concat(D,"/").concat(y,"/","false")}),[S,n,h,f,D,y]);return Object(r.useEffect)((function(){if(!f||!h||!y||!S||!D)return Z({data:null,isLoading:!1});Z({data:null,isLoading:!0});var e=ae(),n=!1;return Object(C.c)(e).then((function(e){var t=e.data;return!n&&Z({data:t,isLoading:!1})})).catch((function(e){return!n&&(Z({data:null,isLoading:!1,error:e,message:"Error while fetching estimate info"}),u("Error while fetching estimate info",{error:!0}))})),function(){n=!0}}),[f,S,h,y,D,u,ae]),{marketInfo:Y,estimateInfo:Q,cryptoList:ee,fiatList:ne,network:f,from:h,to:y,mode:S,amount:D,cryptoCurrencies:P,setNetwork:j,setFrom:O,setTo:w,setMode:F,setAmount:B,genTxnUrl:function(){return"buy"===S?"".concat(n,"/guardarian/transaction/").concat(h,"/null/").concat(D,"/").concat(y,"/").concat(t,"/").concat(s):"".concat(n,"/guardarian/transaction/").concat(h,"/").concat(t,"/").concat(D,"/").concat(y,"/null/null")},NETWORK_MAPPING:E,NATIVE_ADDRESS:_,DEFAULT_CRYPTO:M}},L=t(194),U=t.n(L),D=t(4),B=function(e){var n,t,c,i,d,l,u,m,b,f,j,p,v,h,O,g,x,y,w,k=e.relayerURL,A=e.walletAddress,E=e.selectedNetwork,M=e.portfolio,_=Object(S.f)().hideModal,L=Object(N.a)().addToast,B=F({relayerURL:k,selectedNetwork:E,initMode:"buy",tokens:M.tokens,walletAddress:A,addToast:L}),I=Object(r.useState)(!1),R=Object(a.a)(I,2),P=R[0],W=R[1],G=Object(r.useCallback)((function(){var e;if(M.tokens&&(null===B||void 0===B||null===(e=B.cryptoCurrencies)||void 0===e?void 0:e.data)&&"sell"===B.mode){var n,t,a,c=null===B||void 0===B||null===(n=B.cryptoCurrencies)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.find((function(e){return e.ticker===B.from}));return null===M||void 0===M||null===(a=M.tokens)||void 0===a?void 0:a.find((function(e){var n;return null===c||void 0===c||null===(n=c.networks)||void 0===n?void 0:n.find((function(n){var t,a;return(null===n||void 0===n||null===(t=n.token_contract)||void 0===t?void 0:t.toLowerCase())===(null===e||void 0===e||null===(a=e.address)||void 0===a?void 0:a.toLowerCase())||(null===n||void 0===n?void 0:n.network)===B.NETWORK_MAPPING[B.network]&&(null===e||void 0===e?void 0:e.address.toLowerCase())===B.NATIVE_ADDRESS&&null===(null===n||void 0===n?void 0:n.token_contract)}))}))}return{}}),[B,M.tokens]),H=Object(r.useMemo)((function(){var e,n,t,a=null===B||void 0===B||null===(e=B.marketInfo)||void 0===e?void 0:e.data;if((null===B||void 0===B||null===(n=B.marketInfo)||void 0===n?void 0:n.error)||(null===B||void 0===B||null===(t=B.estimateInfo)||void 0===t?void 0:t.error))return"Sorry! We couldn't estimate your order! Please try again later!";if(!a)return"";var c=parseFloat(B.amount),i=parseFloat(a.min),r=parseFloat(a.max);if("buy"===B.mode){if(c<i)return"Minimum amount is ".concat(a.min," ").concat(a.from);if(c>r)return"Maximum amount is ".concat(a.max," ").concat(a.from)}else if("sell"===B.mode){var s=G();if(c<i)return"Minimum amount is ".concat(a.min," ").concat(a.from);if(c>r)return"Maximum amount is ".concat(a.max," ").concat(a.from);if(s&&(null===B||void 0===B?void 0:B.from)&&c>s.balance)return"You do not have enough funds"}return""}),[B,G]),V=function(){B.setMode((function(e){return"buy"===e?"sell":"buy"})),B.setAmount(""),B.setFrom(""),B.setTo("buy"===B.mode?B.DEFAULT_CRYPTO[B.NETWORK_MAPPING[B.network]]:"")};var q=Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(o.e,{clear:!0,icon:Object(D.jsx)(s.B,{}),onClick:function(){return _()},children:"Close"}),Object(D.jsx)(o.e,{disabled:""!==H||(null===B||void 0===B||null===(n=B.marketInfo)||void 0===n?void 0:n.isLoading)||(null===B||void 0===B||null===(t=B.estimateInfo)||void 0===t?void 0:t.isLoading)||(null===B||void 0===B||null===(c=B.txn)||void 0===c?void 0:c.isLoading)||""===(null===B||void 0===B?void 0:B.amount)||P,onClick:function(){W(!0),Object(C.c)(B.genTxnUrl()).then((function(e){var n=e.data;W(!1),(null===n||void 0===n?void 0:n.redirect_url)&&T({url:U.a.format(null===n||void 0===n?void 0:n.redirect_url),title:"Guardarian Deposit",w:560,h:710})})).catch((function(e){L("Error while trying to send transaction",{error:!0}),W(!1)}))},children:"buy"===B.mode?"Buy":"Sell"})]});return Object(D.jsxs)(o.n,{id:"guardarian-modal",title:"Guardarian",buttons:q,children:[Object(D.jsxs)("div",{className:"buy-sell-btns-wrapper",children:[Object(D.jsx)("div",{className:"buy"===B.mode?"button active":"button",onClick:V,children:"Buy"}),Object(D.jsx)("div",{className:"sell"===B.mode?"button active":"button",onClick:V,children:"Sell"})]}),Object(D.jsxs)("div",{className:"input-currencies-wrapper",children:[Object(D.jsx)("div",{className:"amount",children:Object(D.jsx)(o.x,{value:B.amount,label:"You send",placeholder:"Input amount",onInput:function(e){B.setAmount(e)}})}),Object(D.jsx)("div",{className:"currency",children:"buy"===B.mode&&!(null===B||void 0===B||null===(i=B.fiatList)||void 0===i?void 0:i.isLoading)||"sell"===(null===B||void 0===B?void 0:B.mode)&&!(null===B||void 0===B||null===(d=B.cryptoList)||void 0===d?void 0:d.isLoading)?Object(D.jsx)(o.u,{searchable:!0,defaultValue:B.from,items:"buy"===B.mode?B.fiatList.data:B.cryptoList.data,onChange:function(e){return function(e){B.setFrom(e)}(e.value)}}):Object(D.jsxs)("div",{className:"loading-wrapper",children:[Object(D.jsx)(o.m,{})," "]})})]}),""!==H&&Object(D.jsx)("p",{style:{color:"red"},children:H}),Object(D.jsxs)("div",{className:"estimation-info-wrapper",children:[Object(D.jsx)("div",{className:"extra-fees",children:Object(D.jsx)(o.z,{label:"All the exchange fees are added into the rate. There are no extra costs.",children:"No extra fees"})}),Object(D.jsx)("div",{className:"estimation-rate",children:Object(D.jsxs)(o.z,{label:"This is expected rate. Guardarian guarantees to pick up the best possible rate on the moment of the exchange",children:["Estimation rate: "," ",!B.estimateInfo.isLoading&&(null===B||void 0===B||null===(l=B.estimateInfo)||void 0===l?void 0:l.data)&&""===H?Object(D.jsxs)(D.Fragment,{children:[1+(null===B||void 0===B||null===(u=B.estimateInfo)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.from_currency)," \u2248 ",null===B||void 0===B||null===(b=B.estimateInfo)||void 0===b||null===(f=b.data)||void 0===f?void 0:f.estimated_exchange_rate," ",null===B||void 0===B||null===(j=B.estimateInfo)||void 0===j||null===(p=j.data)||void 0===p?void 0:p.to_currency]}):Object(D.jsx)(D.Fragment,{})]})})]}),Object(D.jsxs)("div",{className:"input-currencies-wrapper",children:[Object(D.jsx)("div",{className:"amount",children:B.estimateInfo.isLoading?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("label",{children:"You get"}),Object(D.jsxs)("div",{className:"loading-wrapper",children:[Object(D.jsx)(o.m,{})," "]})]}):Object(D.jsx)(o.x,{value:(null===B||void 0===B||null===(v=B.estimateInfo)||void 0===v?void 0:v.data)?null===B||void 0===B||null===(h=B.estimateInfo)||void 0===h||null===(O=h.data)||void 0===O?void 0:O.value:"",disabled:!0,label:"You get"})}),Object(D.jsx)("div",{className:"currency",children:"buy"===(null===B||void 0===B?void 0:B.mode)&&!(null===B||void 0===B||null===(g=B.cryptoList)||void 0===g?void 0:g.isLoading)||"sell"===(null===B||void 0===B?void 0:B.mode)&&!(null===B||void 0===B||null===(x=B.fiatList)||void 0===x?void 0:x.isLoading)?Object(D.jsx)(o.u,{searchable:!0,defaultValue:null===B||void 0===B?void 0:B.to,items:"sell"===(null===B||void 0===B?void 0:B.mode)?null===B||void 0===B||null===(y=B.fiatList)||void 0===y?void 0:y.data:null===B||void 0===B||null===(w=B.cryptoList)||void 0===w?void 0:w.data,onChange:function(e){return function(e){B.setTo(e)}(e.value)}}):Object(D.jsxs)("div",{className:"loading-wrapper",children:[Object(D.jsx)(o.m,{})," "]})})]})]})},I=t(110),R=function(e){var n=e.walletAddress,t=e.selectedNetwork,c=e.relayerURL,i=e.portfolio,s=Object(r.useState)([]),o=Object(a.a)(s,2),d=o[0],l=o[1],u=Object(N.a)().addToast,m=Object(S.f)().showModal,b=function(){var e=Object(x.a)(h.a.mark((function e(){var a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l((function(e){return["PayTrie"].concat(Object(g.a)(e))})),a={ethereum:"USDC",polygon:"USDC-P","binance-smart-chain":"USDT-B"},(c=U.a.parse(I.b,!0)).search=null,c.query=Object(O.a)(Object(O.a)({},c.query),{},{addr:n,rightSideLabel:a[t]}),T({url:U.a.format(c),title:"Paytrie Deposit",w:450,h:700}),l((function(e){return e.filter((function(e){return"PayTrie"!==e}))}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(x.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l((function(e){return["Kriptomat"].concat(Object(g.a)(e))})),e.next=3,Object(C.c)("".concat(c,"/kriptomat/").concat(n,"/").concat(t));case 3:(a=e.sent).success&&a.data&&a.data.url?T({url:U.a.format(a.data.url),title:"Kriptomat Deposit",w:515,h:600}):u("Error: ".concat(a.data?a.data:"unexpected error"),{error:!0}),l((function(e){return e.filter((function(e){return"Kriptomat"!==e}))}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{openRampNetwork:function(){new y.a({hostAppName:"Ambire",hostLogoUrl:"https://www.ambire.com/ambire-logo.png",variant:"auto",swapAsset:{ethereum:"ERC20_*,ETH_*",polygon:"MATIC_ERC20_*,MATIC_*",avalanche:"AVAX_*","binance-smart-chain":"BSC_*,BSC_ERC20_*",gnosis:"XDAI_*"}[t],userAddress:n,hostApiKey:I.c}).show()},openPayTrie:b,openTransak:function(){var e=new k.a({apiKey:I.f,environment:I.g,networks:{avalanche:"avaxcchain","binance-smart-chain":"bsc",moonbeam:"mainnet"}[t]||t,defaultCryptoCurrency:{ethereum:"USDC",polygon:"USDC",arbitrum:"ETH",avalanche:"AVAX","binance-smart-chain":"BNB",moonriver:"MOVR",moonbeam:"GLMR",optimism:"USDC"}[t],disableWalletAddressForm:!0,walletAddress:n,themeColor:"282b33",email:"",redirectURL:"",hostURL:window.location.origin,widgetHeight:"calc(100% - 60px)",widgetWidth:"100%"});e.init(),e.on(e.ALL_EVENTS,(function(e){console.log(e)})),e.on(e.EVENTS.TRANSAK_ORDER_SUCCESSFUL,(function(n){console.log(n),e.close()}))},openKriptomat:f,openGuardarian:function(){l((function(e){return["Guardarian"].concat(Object(g.a)(e))})),m(Object(D.jsx)(B,{relayerURL:c,walletAddress:n,selectedNetwork:t,portfolio:i})),l((function(e){return e.filter((function(e){return"Guardarian"!==e}))}))},isLoading:d}};function P(e){var n=e.walletAddress,t=e.networkDetails,a=e.relayerURL,c=e.portfolio,i=R({walletAddress:n,selectedNetwork:t.id,relayerURL:a,portfolio:c}),r=i.openRampNetwork,s=i.openPayTrie,d=i.openTransak,l=i.openKriptomat,u=i.openGuardarian,v=i.isLoading,h=[{logo:p,name:"Guardarian",type:"Buy with Bank Transfer, Credit/Debit Card, Sell Crypto",fees:"from 2%",limits:"up to 15k EUR/monthly on and off ramp",currencies:"GBP, EUR, USD and many more",networks:["ethereum","polygon","binance-smart-chain","fantom"],onClick:function(){return u()}},{logo:j,name:"Kriptomat",type:"Credit Card",fees:"2.45%",limits:"up to 5000 EUR/day",currencies:"USD, EUR, GBP",networks:["ethereum","polygon","avalanche","binance-smart-chain"],onClick:function(){return l()}},{logo:m,name:"Ramp",type:"Bank Transfer, Credit/Debit Card, Apple Pay",fees:"0.49%-2.9%",limits:"10,000EUR/m",currencies:"USD, EUR, GBP",networks:["ethereum","polygon","avalanche","binance-smart-chain","gnosis"],onClick:function(){return r()}},{logo:b,name:"PayTrie",type:"Bank Transfer",fees:"1% (min. $2 CAD)",limits:"$2,000CAD/day",currencies:"CAD",networks:["ethereum","polygon","binance-smart-chain"],onClick:function(){return s()}},{logo:f,name:"Transak",type:"Credit/Debit card and Bank Transfer (methods availability depends on location)",fees:"from 0.5%",limits:"up to 15,000 EUR/day",currencies:"GBP, EUR, USD and many more",networks:["ethereum","polygon","avalanche","arbitrum","binance-smart-chain","moonriver","moonbeam","optimism"],onClick:function(){return d()}}],O=function(e){return e.includes(t.id)?null:"disabled"};return Object(D.jsxs)("div",{id:"providers",children:[h.map((function(e){var n=e.logo,t=e.name,a=e.type,c=e.fees,i=e.limits,r=e.currencies,s=e.networks,d=e.onClick;return Object(D.jsxs)("div",{className:"provider ".concat(O(s)),onClick:d,children:[Object(D.jsx)("div",{className:"logo",children:Object(D.jsx)("img",{src:n,alt:t})}),v.includes(t)?Object(D.jsxs)("div",{children:[" ",Object(D.jsx)(o.m,{})," "]}):Object(D.jsxs)("div",{className:"details",children:[Object(D.jsx)("div",{className:"type",children:a}),Object(D.jsxs)("div",{className:"fees",children:["Fees: ",c]}),Object(D.jsxs)("div",{className:"limits",children:["Limits: ",i]}),Object(D.jsxs)("div",{className:"currencies",children:["Currencies: ",r]})]})]},t)})),"ethereum"!==t.id?Object(D.jsxs)("div",{id:"network-warning",children:[Object(D.jsx)("b",{children:"NOTE:"})," Some deposit methods are unavailable on ",Object(D.jsx)("b",{children:t.name}),". Switch to Ethereum for the widest support."]}):null]})}var W=t(57),G=t(760);function H(e){var n=e.selectedAcc,t=e.selectedNetwork,c=e.accounts,d=e.addRequest,m=e.relayerURL,b=e.portfolio,f=e.useStorage,j=W.a.find((function(e){return e.id===t.id})),p=Object(r.useState)(""),v=Object(a.a)(p,2),h=v[0],O=v[1],g=Object(r.useCallback)((function(){l.a.toDataURL(n,{quality:1,margin:1},(function(e,n){if(e)return console.error(e);O(n)}))}),[n]);return Object(r.useEffect)((function(){return g()}),[g]),Object(D.jsxs)("section",{className:i.a.deposit,children:[Object(D.jsxs)(o.q,{className:i.a.panel,children:[Object(D.jsxs)("div",{className:i.a.heading,children:[Object(D.jsxs)("div",{className:i.a.title,children:[Object(D.jsx)(s.b,{size:35}),"Deposit Tokens"]}),Object(D.jsx)("div",{className:i.a.subtitle,children:"Direct Deposit"})]}),Object(D.jsxs)("div",{className:i.a.description,children:[Object(D.jsx)(u.a,{className:i.a.depositAddress,label:"Send ".concat(j.nativeAssetSymbol,", tokens or collectibles (NFTs) to this address:"),value:n,copy:!0}),Object(D.jsx)("img",{className:i.a.qrCode,alt:"QR Code",src:h})]}),Object(D.jsxs)("div",{className:i.a.networks,children:["Following networks supported on this address:",Object(D.jsx)("div",{className:i.a.list,children:W.a.filter((function(e){return!e.hide})).map((function(e){var n=e.id,t=e.icon,a=e.name;return Object(D.jsxs)("div",{className:i.a.network,children:[Object(D.jsx)("div",{className:i.a.icon,style:{backgroundImage:"url(".concat(t,")")}}),Object(D.jsx)("div",{className:i.a.name,children:a})]},n)}))})]}),Object(D.jsx)(G.a,{selectedNetwork:t,selectedAccount:n,accounts:c,addRequest:d,linkMargin:!0,relayerURL:m,portfolio:b,useStorage:f})]}),Object(D.jsxs)(o.q,{className:i.a.panel,children:[Object(D.jsxs)("div",{className:i.a.heading,children:[Object(D.jsxs)("div",{className:i.a.title,children:[Object(D.jsx)(s.a,{size:35}),"Fiat Currency"]}),Object(D.jsx)("div",{className:i.a.subtitle,children:"Credit Card & Bank Transfer"})]}),Object(D.jsx)("div",{className:i.a.description,children:"Deposit with credit card to your account directly using one of our partners"}),Object(D.jsx)(P,{walletAddress:n,networkDetails:j,relayerURL:m,portfolio:b})]})]})}},523:function(e,n,t){},760:function(e,n,t){"use strict";var a=t(9),c=(t(523),t(110)),i=t(94),r="0x0000000000000000000000000000000000000000",s=t(57);function o(e){var n,t=e.networkId,a=e.account;return(null===(n=s.a.find((function(e){return e.id===t})))||void 0===n?void 0:n.relayerlessOnly)?Promise.resolve([]):a?Object(i.c)("".concat(c.h,"/protocols/tokens/balances?addresses[]=").concat(a,"&network=").concat(t,"&api_key=").concat(c.j,"&newBalances=true&available_on_coingecko=true")).then((function(e){var n=a.toLowerCase();if(!e[n])return[];if(!e[n].products[0])return[];var s=e[n].products[0].assets.map((function(e){return{address:e.tokens[0].address,symbol:e.tokens[0].symbol,decimals:e.tokens[0].decimals}})),o="".concat(c.h,"/protocols/tokens/balances?addresses[]=").concat(a,"&network=").concat(t,"&api_key=").concat(c.j,"&customTokens=").concat(JSON.stringify(s),"&available_on_coingecko=true");return Object(i.c)(o).then((function(e){var t,a;return(null===(t=e[n])||void 0===t||null===(a=t.products[0])||void 0===a?void 0:a.assets).map((function(e){return{name:e.tokens[0].symbol,icon:e.tokens[0].tokenImageUrl,address:e.tokens[0].address.toLowerCase(),native:e.tokens[0].address===r,decimals:e.tokens[0].decimals,availableBalance:e.tokens[0].balanceRaw,balanceUSD:e.tokens[0].balanceUSD,rate:e.tokens[0].balanceUSD/e.tokens[0].balanceRaw}}))})).catch((function(e){throw Error("Could not get customToken assets from velcro")}))})).catch((function(e){throw Error("Could not get assets from velcro")})):Promise.resolve([])}var d=t(36),l=t(86),u=t(3),m=t(2),b=t.n(m),f=t(12),j=t(7),p=t(15),v=t(565),h=t.n(v),O=t(219),g=t(207),x=t(47),y=t(55),w=t(101),k=t(21),T=[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}],C=[{name:"holder",type:"address"},{name:"spender",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"},{name:"allowed",type:"bool"}],N=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],S=[{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],A=[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],E=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"}],M={1:[{address:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",name:"USD Coin",version:"2",domainType:N,permitType:T},{address:"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984",name:"Uniswap",domainType:A,permitType:T},{address:"0xde30da39c46104798bb5aa3fe8b9e0e1f348163f",name:"Gitcoin",domainType:A,permitType:T},{address:"0x6b175474e89094c44da98b954eedeac495271d0f",name:"Dai Stablecoin",version:"1",domainType:N,permitType:C},{address:"0x090185f2135308bad17527004364ebcc2d37e5f6",domainType:S,permitType:T},{address:"0x99d8a9c45b2eca8864373a26d1459e3dff1e17f3",domainType:S,permitType:T},{address:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9",name:"Aave Token",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"AdEx Loyalty",address:"0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c",version:"1",domainType:N,permitType:T},{name:"Aave Token",address:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9",version:"1",domainType:N,permitType:T},{name:"Ambire Wallet Staking Token",address:"0x47cd7e91c3cbaaf266369fe8518345fc4fc12935",version:"1",domainType:N,permitType:T},{name:"ConstitutionDAO",address:"0x7a58c0be72be218b41c608b7fe7c5bb630736c71",version:"1",domainType:N,permitType:T},{name:"Aragon Network Token",address:"0xa117000000f279d81a1d3cc75430faa017fa5a2e",version:"1",domainType:N,permitType:T},{name:"AdEx Staking Token",address:"0xb6456b57f03352be48bf101b46c1752a0813491a",version:"1",domainType:N,permitType:T},{name:"dYdX",address:"0x92d6c1e31e14520e676a687f0a93788b716beff5",version:"1",domainType:N,permitType:T},{name:"Ethereum Name Service",address:"0xc18360217d8f7ab5e7c516566761ea12ce7f9d72",version:"1",domainType:N,permitType:T},{name:"Olympus",address:"0x383518188c0c6d7730d91b2c03a03c837814a899",version:"1",domainType:N,permitType:T},{name:"1INCH Token",address:"0x111111111117dc0aa78b770fa6a738034120c302",version:"1",domainType:N,permitType:T},{name:"IceToken",address:"0xf16e81dce15b08f326220742020379b855b87df9",version:"1",domainType:N,permitType:T},{name:"Fei USD",address:"0x956f47f50a910163d8bf957cf5846d573e7f87ca",version:"1",domainType:N,permitType:T},{name:"LUSD Stablecoin",address:"0x5f98805a4e8be255a32880fdec7f6728c6568ba0",version:"1",domainType:N,permitType:T},{name:"Balancer",address:"0xba100000625a3754423978a60c9317c58a424e3d",version:"1",domainType:N,permitType:T},{name:"Aave interest bearing AAVE",address:"0xffc97d72e13e01096502cb8eb52dee56f74dad7b",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniBATWETH",address:"0xa1b0edf4460cc4d8bfaa18ed871bff15e5b57eb4",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniWBTCWETH",address:"0xc58f53a8adff2fb4eb16ed56635772075e2ee123",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniUSDCWETH",address:"0x391e86e2c002c70dee155eaceb88f7a3c38f5976",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing WETH",address:"0x030ba81f1c18d280636f32af80b9aad02cf0854e",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing DAI",address:"0x028171bca77440897b824ca71d1c56cac55b68a3",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniWBTCUSDC",address:"0x2365a4890ed8965e564b7e2d27c38ba67fec4c6f",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniCRVWETH",address:"0x0ea20e7ffb006d4cfe84df2f72d8c7bd89247db0",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniUNIWETH",address:"0x3d26dcd840fcc8e4b2193ace8a092e4a65832f9f",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing GUSD",address:"0xd37ee7e4f452c6638c96536e68090de8cbcdb583",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniMKRWETH",address:"0x370adc71f67f581158dc56f539df5f399128ddf9",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing CRV",address:"0x8dae6cb04688c62d939ed9b68d32bc62e49970b1",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market USDT",address:"0x17a79792fe6fe5c95dfe95fe3fcee3caf4fe4cb7",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniSNXWETH",address:"0x38e491a71291cd43e8de63b7253e482622184894",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing YFI",address:"0x5165d24277cd063f5ac44efd447b27025e888f37",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing SNX",address:"0x35f6b052c598d933d69a4eec4d04c73a191fe6c2",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market USDC",address:"0xd24946147829deaa935be2ad85a3291dbf109c80",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market DAI",address:"0x79be75ffc64dd58e66787e4eae470c8a1fd08ba4",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing USDT",address:"0x3ed3b47dd13ec9a98b44e6204a523e766b225811",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing RAI",address:"0xc9bc48c72154ef3e5425641a3c747242112a46af",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing BAL",address:"0x272f97b7a56a387ae942350bbc7df5700f8a4576",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing BAT",address:"0x05ec93c0365baaeabf7aeffb0972ea7ecdd39cf1",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing USDC",address:"0xbcca60bb61934080951369a648fb03df4f96263c",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market BptBALWETH",address:"0xd109b2a304587569c84308c55465cd9ff0317bfb",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing KNC",address:"0x39c6b3e42d6a679d7d776778fe880bc9487c2eda",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing MANA",address:"0xa685a61171bb30d4072b338c80cb7b2c865c873e",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing XSUSHI",address:"0xf256cc7847e919fac9b808cc216cac87ccf2f47a",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing TUSD",address:"0x101cc05f4a51c0319f570d5e146a8c625198e636",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing ENJ",address:"0xac6df26a590f08dcc95d5a4705ae8abbc88509ef",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"}],137:[{name:"Governance OHM",address:"0xd8ca34fd379d9ca3c6ee3b3905678320f5b45195",version:"1",domainType:N,permitType:T},{name:"Frax",address:"0x45c32fa6df82ead1e2ef74d17b76547eddfaff89",version:"1",domainType:N,permitType:T},{name:"Aave Matic Market WBTC",address:"0x5c2ed810328349100a66b82b78a1791b101c9d61",version:"1",domainType:N,permitType:T},{name:"Aave Matic Market WETH",address:"0x28424507fefb6f7f8e9d3860f56504e4e5f5f390",version:"1",domainType:N,permitType:T},{name:"Aave Matic Market USDC",address:"0x1a13f4ca1d028320a707d99520abfefca3998b7f",version:"1",domainType:N,permitType:T},{name:"Aave Matic Market AAVE",address:"0x1d2a0e5ec8e5bbdca5cb219e649b565d8e5c3360",version:"1",domainType:N,permitType:T},{name:"Synapse",address:"0xf8f9efc0db77d8881500bb06ff5d6abc3070e695",version:"1",domainType:N,permitType:T},{name:"Aave Matic Market WMATIC",address:"0x8df3aad3a84da6b69a4da8aec3ea40d9091b2ac4",version:"1",domainType:N,permitType:T},{name:"Aave Matic Market USDT",address:"0x60d55f02a771d515e077c9c2403a1ef324885cec",version:"1",domainType:N,permitType:T},{name:"Klima DAO",address:"0x4e78011ce80ee02d2c3e649fb657e45898257815",version:"1",domainType:N,permitType:T},{name:"Quickswap",address:"0xb5c064f955d8e7f38fe0460c556a72987494ee17",domainType:A,permitType:T},{name:"Route",address:"0x16eccfdbb4ee1a85a33f3a9b21175cd7ae753db4",domainType:A,permitType:T},{address:"0x8f3cf7ad23cd3cadbd9735aff958023239c6a063",name:"(PoS) Dai Stablecoin",version:"1",salt:"0x0000000000000000000000000000000000000000000000000000000000000089",domainType:E,permitType:C,nonceFunction:"getNonce"},{address:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",name:"USD Coin (PoS)",version:"1",salt:"0x0000000000000000000000000000000000000000000000000000000000000089",domainType:E,permitType:T}],56:[{name:"1INCH Token",address:"0x111111111117dc0aa78b770fa6a738034120c302",version:"1",domainType:N,permitType:T},{name:"Frax",address:"0x90c97f71e18723b0cf0dfa30ee176ab653e89f40",version:"1",domainType:N,permitType:T},{name:"JADE",address:"0x7ad7242a99f21aa543f9650a56d141c57e4f6081",version:"1",domainType:N,permitType:T},{name:"Templar Token",address:"0x19e6bfc1a6e4b042fb20531244d47e252445df01",version:"1",domainType:N,permitType:T}]},_=new k.Interface(["function nonces(address owner) external view returns (uint256)","function _nonces(address owner) external view returns (uint256)","function getNonce(address owner) external view returns (uint256)","function name() external view returns (string)","function symbol() external view returns (string)","function decimals() external view returns (uint)","function balanceOf(address) external view returns (uint)","function permit(address owner, address spender, uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s)","function permit(address holder, address spender, uint256 nonce, uint256 expiry, bool allowed, uint8 v, bytes32 r, bytes32 s)","function transferFrom(address from, address to, uint256 amount) view returns (bool)","function transfer(address to, uint256 amount) view returns (bool)","function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint)"]),F=t(76),L=t(624),U=t(4),D=function(e){var n=e.signerAccount,t=e.identityAccount,c=e.network,s=e.setIsSelectionConfirmed,d=e.setStep,m=e.portfolio,v=e.relayerURL,k=e.setModalButtons,T=e.hideModal,C=e.setSelectedTokensWithAllowance,N=e.setGasSpeed,S=e.setStepperSteps,A=e.hidden,E=Object(u.useState)([]),M=Object(a.a)(E,2),D=M[0],B=M[1],I=Object(u.useState)([]),R=Object(a.a)(I,2),P=R[0],W=R[1],G=Object(u.useState)(null),H=Object(a.a)(G,2),V=H[0],q=H[1],J=Object(u.useState)(!0),K=Object(a.a)(J,2),Y=K[0],z=K[1],$=Object(u.useState)([]),X=Object(a.a)($,2),Q=X[0],Z=X[1],ee=Object(u.useState)(null),ne=Object(a.a)(ee,2),te=ne[0],ae=ne[1],ce=Object(u.useState)(null),ie=Object(a.a)(ce,2),re=ie[0],se=ie[1],oe=Object(u.useState)("fast"),de=Object(a.a)(oe,2),le=de[0],ue=de[1],me=Object(u.useState)([]),be=Object(a.a)(me,2),fe=be[0],je=be[1],pe=Object(u.useState)(!1),ve=Object(a.a)(pe,2),he=ve[0],Oe=ve[1],ge=Object(u.useState)(!1),xe=Object(a.a)(ge,2),ye=xe[0],we=xe[1],ke=Object(u.useState)(""),Te=Object(a.a)(ke,2),Ce=Te[0],Ne=Te[1],Se=Object(u.useState)(""),Ae=Object(a.a)(Se,2),Ee=Ae[0],Me=Ae[1],_e=Object(u.useRef)(),Fe=Object(u.useRef)({}),Le=Object(u.useCallback)((function(e,n){var t=P.findIndex((function(n){return n.address===e}));if(-1!==t){var a=n(P[t]);W([].concat(Object(p.a)(P.slice(0,t)),[a],Object(p.a)(P.slice(t+1))))}}),[P]),Ue=Object(u.useCallback)((function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=D.sort((function(e,n){return e.name<n.name?-1:1})).findIndex((function(n){return n.address===e}));null===(n=Fe.current[a])||void 0===n||n.focus(),Le(e,(function(n){var a=Object(j.a)(Object(j.a)({},n),{},{selected:!n.selected});if(t){var c,i=null===(c=P.find((function(n){return n.address===e})))||void 0===c?void 0:c.humanAmount;if(t>i){var r,s=null===(r=D.find((function(n){return n.address===e})))||void 0===r?void 0:r.decimals;a.amount=new h.a(t).multipliedBy(Math.pow(10,s)).toFixed(0),a.humanAmount=t}}return a}))}),[D,Le,P]),De=Object(u.useCallback)((function(){var e=Object(F.a)(c.id);if(y.ethers.utils.isAddress(Ce)){if(D.find((function(e){return e.address.toLowerCase()===Ce.toLowerCase()})))return Ne(""),void Oe(!1);var i=new w.Contract(Ce,_,e),r=i.symbol().catch((function(){return Me("Could not get symbol of token "+Ce)})),s=i.decimals().catch((function(){return Me("Could not get decimals of token "+Ce)})),o=i.allowance(n,t).catch((function(){return Me("Could not get allowance for token "+Ce)})),d=i.balanceOf(n).catch((function(){return Me("Could not get balance for token "+Ce)}));we(!0),Me(null),Promise.all([r,s,o,d]).then((function(e){var n=Object(a.a)(e,4),t=n[0],c=n[1],i=n[2],r=n[3];we(!1),t&&c&&null!==i&&null!==r&&(Ne(""),Oe(!1),B((function(e){return[].concat(Object(p.a)(e),[{address:Ce,name:t,decimals:c.toNumber(),icon:null,rate:0,native:!1,availableBalance:r.toString(),balanceUSD:0}])})),W((function(e){return[].concat(Object(p.a)(e),[{address:Ce,selectedAmount:0,amount:r.toString(),humanAmount:new h.a(r.toString()).div(Math.pow(10,c.toString())).toFixed(),selected:r.gt(0)}])})),je((function(e){return[].concat(Object(p.a)(e),[{address:Ce,allowance:0}])})))})).catch((function(e){console.log("err getting custom token data",e),we(!1)}))}else Me("invalid custom token address")}),[c,Ce,n,t,Me,D]),Be=Object(u.useCallback)((function(e){var n,t=(null===(n=P.find((function(e){return e.address===r&&e.selected})))||void 0===n?void 0:n.amount)||0;return new h.a(re.gasFees[e].signerTransactionsCost).plus(t).lte(V.availableBalance||0)}),[P,re,V]),Ie=Object(u.useCallback)((function(e){return new h.a(V.availableBalance).minus(re.gasFees[e].signerTransactionsCost)}),[re,V]),Re=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.map((function(e){return Object(j.a)(Object(j.a)(Object(j.a)({},e),n.find((function(n){return n.address===e.address}))),t.find((function(n){return n.address===e.address})))}))},Pe=Object(u.useCallback)(Object(f.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Re(D,P,fe).filter((function(e){return e.selected}))).length){e.next=3;break}return e.abrupt("return");case 3:C(n.map((function(e){return Object(j.a)({},e)}))),s(!0),n.find((function(e){return e.address===r}))?d(1):d(2),N(le);case 7:case"end":return e.stop()}}),e)}))),[D,P,fe,C,s,d,N,le]);Object(u.useEffect)((function(){he&&_e.current.focus()}),[he]),Object(u.useEffect)((function(){q(D.find((function(e){return e.native})))}),[D]),Object(u.useEffect)((function(){z(!0),B([]),o({networkId:c.id,account:n}).then((function(e){B(e.map((function(e){return Object(j.a)({},e)}))),W(e.map((function(e){return{address:e.address,selectedAmount:0,amount:e.availableBalance,humanAmount:new h.a(e.availableBalance).div(Math.pow(10,e.decimals)).toFixed(),selected:!1}}))),z(!1)})).catch((function(e){console.error(e)}))}),[n,z,B,c]),Object(u.useEffect)((function(){if(te){var e=Re(D,P,fe),n=e.filter((function(e){return e.selected&&!e.native})).length,t=e.filter((function(e){return e.selected&&e.native})).length,a=n*(77e3+("arbitrum"===c.id?2e5:0))+25e3*t,i=te.gasFeeAssets.native/Math.pow(10,18),r={};L.a.forEach((function(e){var n=te.gasPrice[e]+(te.gasPrice.maxPriorityFeePerGas?1*te.gasPrice.maxPriorityFeePerGas[e]:0),t=a*n,c=t*i;r[e]={speed:e,signerTransactionsCost:t,signerTransactionsCostUSD:c,signerTransactionsConsumption:a}})),se({regularTransfersCount:n,nativeTransfersCount:t,gasFees:r})}}),[D,P,m,te,le,fe,c]),Object(u.useEffect)((function(){Object(i.c)("".concat(v,"/gasPrice/").concat(c.id)).then((function(e){ae(e.data)})).catch((function(e){console.log("fetch error",e)}))}),[v,c]),Object(u.useEffect)((function(){var e=D.map((function(e){var a=Object(F.a)(c.id),i=new w.Contract(e.address,_,a);return e.native?{address:e.address,allowance:0}:i.allowance(n,t).then((function(n){return{address:e.address,allowance:n.toString()}})).catch((function(e){console.log("err getting allowance",e)}))}));Promise.all(e).then((function(e){je(e)}))}),[t,c,D,n]),Object(u.useEffect)((function(){A||k(Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(l.e,{clear:!0,small:!0,icon:Object(U.jsx)(x.h,{}),onClick:T,children:"Close"}),P.filter((function(e){return e.selected})).length>0&&Be(le)?Object(U.jsxs)(l.e,{small:!0,icon:Object(U.jsx)(x.J,{}),className:"primary",onClick:function(){return Pe()},children:["Move ",P.filter((function(e){return e.selected})).length," assets"]}):Object(U.jsx)(l.e,{small:!0,icon:Object(U.jsx)(x.J,{}),className:"primary disabled",children:"Move assets"})]}))}),[P,le,k,T,Pe,A,Be]);var We=Object(u.useCallback)((function(e,n){return Le(n.address,(function(t){if(""===e)return Object(j.a)(Object(j.a)({},t),{},{humanAmount:0,amount:0});if(e.endsWith(".")&&2===e.split(".").length||2===e.split(".").length&&e.endsWith("0")&&new h.a(e).isEqualTo(t.humanAmount))return Object(j.a)(Object(j.a)({},t),{},{humanAmount:e});if(!isNaN(e)){var a=new h.a(e).toFixed(n.decimals);return 1===new h.a(a).multipliedBy(Math.pow(10,n.decimals)).comparedTo(n.availableBalance)&&(a=new h.a(n.availableBalance).dividedBy(Math.pow(10,n.decimals)).toFixed(n.decimals)),a=a.replace(/\.?0+$/g,""),Object(j.a)(Object(j.a)({},t),{},{humanAmount:a,amount:new h.a(a).multipliedBy(Math.pow(10,n.decimals)).toFixed(0)})}return t}))}),[Le]);return Object(u.useEffect)((function(){setTimeout((function(){var e;null===(e=Fe.current[0])||void 0===e||e.focus()}),250)}),[D]),Object(u.useEffect)((function(){var e=["Selection"],n=P.find((function(e){return e.address.toLowerCase()===r&&e.selected}));if(n&&e.push("Send ".concat(D.find((function(e){return e.address===n.address})).name)),P.find((function(e){return e.address.toLowerCase()!==r&&e.selected}))){var t=[];P.find((function(e){return e.selected&&e.address.toLowerCase()!==r}))&&t.push("Send"),e.push(t.join(" and ")+" tokens")}1===e.length&&e.push("Send tokens"),S(e)}),[D,P,S,c]),A?Object(U.jsx)(U.Fragment,{}):Object(U.jsx)("div",{children:Y?Object(U.jsxs)("div",{className:"content-center",children:[Object(U.jsx)("h3",{className:"mb-6",children:"Loading assets..."}),Object(U.jsx)(O.a,{})]}):Object(U.jsx)("div",{children:0===D.length?Object(U.jsx)("div",{children:"No assets to migrate have been found"}):Object(U.jsxs)("div",{children:[Object(U.jsx)("div",{className:"mb-4",children:"Please select the assets you would like to migrate from your signer wallet to your Ambire wallet"}),Re(D,P).sort((function(e,n){return e.name<n.name?-1:1})).map((function(e,n){return Object(U.jsxs)("div",{className:"migration-asset-row",children:[Object(U.jsx)("div",{className:"migration-asset-select".concat(e.selected?" checked":""),onClick:function(){return!1},children:Object(U.jsx)(l.g,{labelClassName:"checkbox-label",id:"check-".concat(e.address),label:Object(U.jsxs)("span",{className:"migration-asset-select-label",children:[Object(U.jsx)("span",{className:"migration-asset-select-icon",children:Q.includes(e.icon)||!e.icon?Object(U.jsx)(g.d,{size:18}):Object(U.jsx)("img",{src:e.icon,draggable:"false",alt:"Token Icon",onError:function(n){Z((function(n){return[].concat(Object(p.a)(n),[e.icon])}))}})}),Object(U.jsx)("span",{className:"migration-asset-select-name",children:e.name})]}),checked:e.selected,onChange:function(){return Ue(e.address)}})}),Object(U.jsxs)("div",{className:"migration-asset-usd",children:["$",(e.amount*e.rate).toFixed(2)]}),Object(U.jsx)("div",{className:"migration-asset-amount",children:Object(U.jsx)(l.x,{ref:function(e){return Fe.current[n]=e},className:"migrate-amount-input",value:e.humanAmount,onChange:function(n){return We(n,e)}})})]},n)})),Object(U.jsx)("div",{className:"custom-token-row mt-2",children:he?Object(U.jsx)("div",{children:ye?Object(U.jsxs)("div",{className:"custom-token-message-fetching",children:[Object(U.jsx)(l.m,{}),"Fetching custom token data..."]}):Object(U.jsxs)(U.Fragment,{children:[Ee&&Object(U.jsx)("div",{className:"error",children:Ee}),Object(U.jsx)("div",{children:Object(U.jsx)(l.x,{className:"custom-token-input",placeholder:"Enter custom token address",value:Ce,onChange:function(e){Ne(e)},ref:_e})}),Object(U.jsxs)("div",{className:"flex-row mt-2",children:[Object(U.jsx)(l.e,{small:!0,icon:Object(U.jsx)(x.e,{}),className:"buttonHollow danger align-right",onClick:function(){Oe(!1),Ne(""),Me(null)},children:"Cancel"}),Object(U.jsx)(l.e,{small:!0,icon:Object(U.jsx)(x.w,{}),className:"primary ms-4",onClick:function(){return De()},children:"Add"})]})]})}):Object(U.jsx)(l.e,{small:!0,icon:Object(U.jsx)(x.w,{}),className:"clear align-right",onClick:function(){return Oe(!0)},children:"Add custom token"})}),!Be(le)&&P.filter((function(e){return e.selected})).length>0&&Object(U.jsxs)("div",{className:"notification-hollow warning mt-3 mb-3",children:["Your Signer Wallet will not have enough fees to pay for the migration. Please transfer a maximum of ",Object(U.jsxs)("span",{className:"max-native-suggestion",onClick:function(){return We(new h.a(Ie(le)).dividedBy(Math.pow(10,V.decimals)).toFixed(6,h.a.ROUND_DOWN),V)},children:[new h.a(Ie(le)).dividedBy(Math.pow(10,V.decimals)).toFixed(6,h.a.ROUND_DOWN)," ",c.nativeAssetSymbol]})]}),re&&Object(U.jsxs)("div",{className:"gas-estimation-block mt-4",children:[Object(U.jsx)("div",{className:"gas-estimation-block-title",children:"Estimated gas fee"}),Object(U.jsx)("ul",{className:"gas-estimation-selector",children:Object.values(re.gasFees).map((function(e,n){return Object(U.jsx)("li",{className:e.speed===le?"selected":"",onClick:function(){return ue(e.speed)},children:e.speed},n)}))}),Object(U.jsx)("table",{className:"gas-estimation-details",children:Object(U.jsx)("tbody",{children:Object(U.jsxs)("tr",{children:[Object(U.jsxs)("td",{children:["Signer fee",(!!re.nativeTransfersCount||!!re.regularTransfersCount)&&Object(U.jsx)("span",{className:"migration-actions",children:Object(U.jsxs)("span",{children:[re.nativeTransfersCount+re.regularTransfersCount," transfers"]})})]}),Object(U.jsxs)("td",{className:"gas-estimation-details-amount",children:["$",re.gasFees[le].signerTransactionsCostUSD.toFixed(2)]})]})})})]})]})})})},B=t(528),I=t(209),R=t(218),P=function(e){e.addRequest;var n=e.identityAccount,t=e.signer,c=e.signerExtra,s=e.network,o=e.selectedTokensWithAllowance,d=e.setError,l=e.hideModal,m=e.setStep,v=e.setModalButtons,O=e.relayerURL,w=e.gasSpeed,k=e.hidden,T=Object(u.useState)([]),C=Object(a.a)(T,2),N=C[0],S=C[1],A=Object(u.useState)({}),E=Object(a.a)(A,2),M=E[0],F=E[1],L=Object(u.useState)({}),D=Object(a.a)(L,2),P=D[0],W=D[1],G=Object(u.useState)(!1),H=Object(a.a)(G,2),V=H[0],q=H[1],J=Object(u.useState)(null),K=Object(a.a)(J,2),Y=K[0],z=K[1],$=Object(u.useState)([]),X=Object(a.a)($,2),Q=X[0],Z=X[1],ee=Object(u.useState)(null),ne=Object(a.a)(ee,2),te=ne[0],ae=ne[1],ce=Object(u.useState)(null),ie=Object(a.a)(ce,2),re=ie[0],se=ie[1],oe=Object(u.useState)(null),de=Object(a.a)(oe,2),le=de[0],ue=de[1],me=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return e.filter((function(e){return e.address!==r})).map((function(e){var c=Object(j.a)(Object(j.a)({},e),{},{signing:null,signature:null,sent:!1,pending:!1,allowance:0});return n[e.address]&&(c.signing=n[e.address].signing,c.signature=n[e.address].signature),t[e.address]&&(c.sent=!0),a[e.address]&&(c.pending=!0),c}))},be=Object(u.useCallback)(Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===le||void 0===le?void 0:le.isConnected(t.address,s.chainId).then((function(e){return ae(e),!!e||(d(Object(U.jsxs)(U.Fragment,{children:["Please make sure your signer wallet is unlocked, and connected with ",Object(U.jsx)("b",{children:t.address})," to the correct chain: ",Object(U.jsx)("b",{children:s.id})]})),!1)})).catch((function(e){return d("Could not check signer connection status: "+e.error),!1})));case 1:case"end":return e.stop()}}),e)}))),[s,d,t,le]),fe=Object(u.useCallback)((function(){var e=0;return me(o,N,M,[]).forEach((function(n){n.sent&&e++})),e}),[o,N,M]),je=Object(u.useCallback)(function(){var e=Object(f.a)(b.a.mark((function e(a){var c,i,r,d,l=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=l.length>1&&void 0!==l[1]&&l[1],e.next=3,be();case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(i=o.find((function(e){return e.address===a}))){e.next=8;break}return e.abrupt("return");case 8:return r=_.encodeFunctionData("transfer",[n,new h.a(i.amount).toFixed(0)]),W((function(e){return e[a]=!0,Object(j.a)({},e)})),z(null),d=le.sendTransaction({from:t.address,to:a,data:r,gasLimit:8e4,gasPrice:re,chainId:s.chainId}).then(function(){var e=Object(f.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S((function(e){return e[a]=Object(j.a)(Object(j.a)({},e[a]),{},{signing:!0}),Object(j.a)({},e)})),!c){e.next=7;break}return e.next=4,n.wait();case 4:F((function(e){return e[a]=!0,Object(j.a)({},e)})),W((function(e){return e[a]=!1,Object(j.a)({},e)})),S((function(e){return e[a]=Object(j.a)(Object(j.a)({},e[a]),{},{signing:!1}),Object(j.a)({},e)}));case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return W((function(e){return e[a]=!1,Object(j.a)({},e)})),e.message.includes("underpriced")?z("Transaction fee underpriced"):z(e.message),q(!0),(!N[a]||N[a]&&!1!==N[a].signing)&&S((function(e){return e[a]=Object(j.a)(Object(j.a)({},e[a]),{},{signing:!1}),Object(j.a)({},e)})),!1})),e.abrupt("return",!!d);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[le,n,N,o,re,s,t,be]),pe=Object(u.useCallback)((function(){d(null),F([]),S([]),q(!1),m(0)}),[d,S,F,m]),ve=Object(u.useCallback)((function(){pe(),l()}),[pe,l]);return Object(u.useEffect)((function(){ue(Object(B.a)({signer:t,signerExtra:c,chainId:s.chainId}))}),[s,t,c]),Object(u.useEffect)((function(){be()}),[be]),Object(u.useEffect)((function(){var e="".concat(O,"/gasPrice/").concat(s.id);Object(i.c)(e).then((function(e){var n=e.data.gasPrice[w];e.data.gasPrice.maxPriorityFeePerGas&&(n+=e.data.gasPrice.maxPriorityFeePerGas[w]),se(n)})).catch((function(n){d(n.message+" "+e)}))}),[s,O,d,w]),Object(u.useEffect)((function(){if(te&&Object.values(M).length&&re){var e=me(o,N,M,[]).map((function(e){return{address:e.address,signed:e.signing}})).find((function(e){return null===e.signed}));e&&setTimeout((function(){je(e.address,!0)}),150)}}),[o,je,N,M,te,re]),Object(u.useEffect)((function(){if(o.length){var e={};o.forEach((function(n){e[n.address]=!1})),F(e)}}),[o,F]),Object(u.useEffect)((function(){V&&d("Every asset below needs to be sent to complete the migration"+(Y?" ("+Y+")":""))}),[V,d,Y]),Object(u.useEffect)((function(){fe()===o.length&&d(null)}),[fe,o,d]),Object(u.useEffect)((function(){k||v(Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(R.a,{className:"clear",icon:Object(U.jsx)(x.I,{}),onClick:function(){return pe()},children:"Back"}),fe()===me(o).length?Object(U.jsx)(R.a,{className:"primary",icon:Object(U.jsx)(x.J,{}),onClick:function(){return l()},children:"Close"}):Object(U.jsx)(R.a,{className:"primary disabled",icon:Object(U.jsx)(x.J,{}),children:"Complete"})]}))}),[pe,ve,fe,o,v,k,l]),k?Object(U.jsx)(U.Fragment,{}):Object(U.jsxs)("div",{children:[fe()<me(o).length?Object(U.jsx)("div",{className:"small-asset-notification mb-3 warning",children:"".concat(me(o).length-fe()," actions left to complete the migration")}):Object(U.jsx)("div",{className:"small-asset-notification mb-3 success",children:"Your tokens were migrated. You can close this window"}),me(o,N,M,P).map((function(e,n){return Object(U.jsxs)("div",{className:"migration-asset-row",children:[Object(U.jsx)("span",{className:"migration-asset-select-icon migration-asset-select-icon-permit",children:!e.icon||Q.includes(e.icon)?Object(U.jsx)(g.d,{size:18}):Object(U.jsx)("img",{src:e.icon,draggable:"false",alt:"Token Icon",onError:function(n){Z((function(n){return[].concat(Object(p.a)(n),[e.icon])}))}})}),Object(U.jsx)("div",{className:"migration-asset-name",children:e.name}),Object(U.jsxs)("div",{className:"migration-asset-amount",children:[new h.a(e.amount).div(Math.pow(10,e.decimals)).toFixed()," ",Object(U.jsxs)("span",{className:"migration-asset-amount-usd",children:["($",(e.amount*e.rate).toFixed(2),")"]})]}),Object(U.jsx)("div",{className:"separator"}),Object(U.jsx)("div",{children:e.allowance&&y.ethers.BigNumber.from(e.allowance).gte(e.amount)||e.sent?Object(U.jsxs)("div",{className:"migration-permitted",onClick:function(){return je(e.address)},children:[Object(U.jsx)(I.b,{})," Sent"]}):Object(U.jsx)(U.Fragment,{children:e.pending||e.signing?Object(U.jsxs)("div",{className:"migration-permitted warning",children:[Object(U.jsx)(I.d,{})," Sending..."]}):Object(U.jsx)(R.a,{className:"button-small secondary",onClick:function(){return je(e.address)},children:"Send"})})})]},n)}))]})},W=function(e){var n,t=e.identityAccount,c=e.signer,r=e.signerExtra,s=e.network,o=e.nativeTokenData,d=e.setSelectedTokensWithAllowance,m=e.selectedTokensWithAllowance,j=e.setError,v=e.setStep,O=e.hasERC20Tokens,y=e.hideModal,w=e.relayerURL,k=e.setModalButtons,T=e.setBeforeCloseModalHandler,C=e.gasSpeed,N=e.hidden,S=Object(u.useState)([]),A=Object(a.a)(S,2),E=A[0],M=A[1],_=Object(u.useState)(!1),F=Object(a.a)(_,2),L=F[0],D=F[1],I=Object(u.useState)(!1),R=Object(a.a)(I,2),P=R[0],W=R[1],G=Object(u.useState)("0"),H=Object(a.a)(G,2),V=H[0],q=H[1],J=Object(u.useState)(null),K=Object(a.a)(J,2),Y=K[0],z=K[1],$=Object(u.useState)("0"),X=Object(a.a)($,2),Q=X[0],Z=X[1],ee=Object(u.useState)("0"),ne=Object(a.a)(ee,2),te=ne[0],ae=ne[1],ce=Object(u.useState)(!1),ie=Object(a.a)(ce,2),re=ie[0],se=ie[1],oe=Object(u.useState)(null),de=Object(a.a)(oe,2),le=de[0],ue=de[1];try{n=Object(B.a)({signer:c,signerExtra:r,chainId:s.chainId})}catch(he){j("No Web3 wallet connected. Please connect a Web3 wallet and reload the page")}var me=Object(u.useCallback)((function(){v(0),d([])}),[d,v]),be=Object(u.useCallback)((function(){v(2)}),[v]),fe=function(e){return e.filter((function(e){return e.selected&&!e.permittable&&!e.native})).length},je=Object(u.useCallback)(Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return j(null),W(!0),O||T(null),e.next=7,n.isConnected(c.address,s.chainId).catch((function(e){j("Could not check signer connection status: "+e.error)}));case 7:e.sent?n.sendTransaction({from:c.address,to:t,gasLimit:25e3+("arbitrum"===s.id?2e5:0),gasPrice:le,value:"0x"+new h.a(V).toString(16),chainId:s.chainId}).then(function(){var e=Object(f.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.wait();case 2:return D(!0),W(!1),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return D(!1),W(!1),e&&e.message.includes("must provide an Ethereum address")?j("Make sure your wallet is unlocked and connected with ".concat(c.address,".")):j("Native asset migration failed: "+e.message),!1})):(j(Object(U.jsxs)(U.Fragment,{children:["Please make sure your signer wallet is unlocked, and connected with ",Object(U.jsx)("b",{children:c.address})," to the correct chain: ",Object(U.jsx)("b",{children:s.id})]})),W(!1));case 9:case"end":return e.stop()}}),e)}))),[n,j,O,s,T,c,t,V,le]),pe=Object(u.useCallback)((function(e){var n=new h.a(e).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals).replace(/\.?0+$/g,"");ae(n),q(e),se(!0)}),[o]);Object(u.useEffect)((function(){var e="".concat(w,"/gasPrice/").concat(s.id);Object(i.c)(e).then((function(e){var n=e.data.gasPrice[C];e.data.gasPrice.maxPriorityFeePerGas&&(n+=e.data.gasPrice.maxPriorityFeePerGas[C]);var t=25e3*n,a=fe(m)*n*77e3;Z(new h.a((t+a).toFixed(0)).toFixed(0));var c=new h.a(o.availableBalance).minus(t+a);z(c.gte(0)?c.toFixed(0):0),ue(n)})).catch((function(n){j(n.message+" "+e)}))}),[Z,z,o,s,w,j,C,m]);var ve=Object(u.useCallback)((function(e){if(se(!0),""===e)return ae(0),void q(0);if(e.endsWith(".")&&2===e.split(".").length||2===e.split(".").length&&e.endsWith("0"))ae(e);else if(!isNaN(e)){var n=new h.a(e).toFixed(o.decimals);1===new h.a(n).multipliedBy(Math.pow(10,o.decimals)).comparedTo(o.availableBalance)&&(n=new h.a(o.availableBalance).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals)),n=n.replace(/\.?0+$/g,""),ae(n),q(new h.a(n).multipliedBy(Math.pow(10,o.decimals)).toFixed(0))}}),[o]);return Object(u.useEffect)((function(){var e=new h.a(o.amount).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals).replace(/\.?0+$/g,"");ae(e),q(o.amount)}),[o]),Object(u.useEffect)((function(){if(!N){k(function(){var e=[];return L?O?e.push(Object(U.jsx)(l.e,{icon:Object(U.jsx)(x.J,{}),className:"primary full",onClick:function(){return be()},children:"Next"})):e.push(Object(U.jsx)(l.e,{icon:Object(U.jsx)(x.h,{}),className:"primary full",onClick:function(){return y()},children:"Close"})):n?(e.push(Object(U.jsx)(l.e,{icon:Object(U.jsx)(x.I,{}),className:"clear",onClick:function(){return me()},children:"Back"},"0")),P?e.push(Object(U.jsxs)(l.e,{icon:Object(U.jsx)(l.m,{}),className:"primary disabled",children:["Moving ",o.name,"..."]},"1")):e.push(Object(U.jsxs)(l.e,{icon:Object(U.jsx)(x.J,{}),className:"primary",onClick:function(){return je()},children:["Move ",o.name]},"1"))):e.push(Object(U.jsx)(l.e,{icon:Object(U.jsx)(x.h,{}),className:"clear full",onClick:function(){return y()},children:"Close"})),e}())}}),[L,O,k,y,P,me,je,be,n,o,N]),N?Object(U.jsx)(U.Fragment,{}):Object(U.jsx)("div",{children:n&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{className:"migration-native-title mb-4",children:[Object(U.jsx)("div",{className:"migration-native-asset-icon",children:E.includes(o.icon)?Object(U.jsx)(g.d,{size:64}):Object(U.jsx)("img",{src:o.icon,draggable:"false",alt:"Token Icon",onError:function(e){M((function(e){return[].concat(Object(p.a)(e),[o.icon])}))}})}),Object(U.jsxs)("div",{className:"migration-native-title-asset-name",children:["Migrate native asset ",Object(U.jsx)("b",{children:o.name})]})]}),L?Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)("div",{className:"small-asset-notification success",children:["Migration of your ",o.name," was successful"]})}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)("div",{className:"migration-native-row",children:[Object(U.jsx)("span",{className:"migration-native-row-key",children:"Current balance"}),Object(U.jsxs)("span",{className:"migration-native-selection",onClick:function(){return pe(o.availableBalance)},children:[new h.a(o.availableBalance).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name]})]}),Object(U.jsxs)("div",{className:"migration-native-row",children:[Object(U.jsx)("span",{className:"migration-native-row-key",children:"Amount to migrate"}),re||null!==Y&&V>Y?Object(U.jsx)(l.x,{className:"migrate-amount-input",value:te,onChange:ve}):Object(U.jsx)("div",{children:te})]}),null!==Y&&new h.a(V).gt(Y)&&Object(U.jsxs)("div",{className:"notification-hollow warning mt-4",children:[Object(U.jsxs)("div",{children:[fe(m)?"Signer transactions cost":"Current Transaction cost",": ~",new h.a(Q).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name,Object(U.jsxs)("span",{className:"migration-native-usd",children:[" ($",new h.a(Q).multipliedBy(o.rate).toFixed(2),")"]})]}),Object(U.jsx)("div",{className:"mt-3 mb-3",children:Y>0?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("span",{children:"You should migrate up to "}),Object(U.jsxs)("span",{className:"migration-native-selection",onClick:function(){return pe(Y)},children:[new h.a(Y).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name]}),Object(U.jsx)("span",{children:" because will you need funds to pay the transaction costs."})]}):Object(U.jsx)("span",{children:"You do not have enough funds to pay the transaction fee."})})]}),P&&O&&Object(U.jsx)("div",{className:"notification-hollow info mt-4",children:"Waiting for the transaction to be mined before continuing migration..."}),P&&!O&&Object(U.jsxs)("div",{className:"notification-hollow info mt-4",children:["The amount of ",o.name," will be updated in your wallet, once the transaction has been confirmed and mined. If you confirmed your transaction, you can already close this window"]})]})]})})},G=function(e){var n=e.addRequest,t=e.selectedAccount,c=e.accounts,i=e.network,r=e.hideModal,s=e.relayerURL,o=e.portfolio,d=e.setModalButtons,m=e.setModalSteps,b=e.setBeforeCloseModalHandler,f=Object(u.useState)([]),j=Object(a.a)(f,2),p=j[0],v=j[1],h=Object(u.useState)(null),O=Object(a.a)(h,2),g=O[0],y=O[1],w=Object(u.useState)(!1),k=Object(a.a)(w,2),T=k[0],C=k[1],N=Object(u.useState)(!1),S=Object(a.a)(N,2),A=S[0],E=S[1],_=Object(u.useState)(0),F=Object(a.a)(_,2),L=F[0],B=F[1],I=Object(u.useState)([]),R=Object(a.a)(I,2),G=R[0],H=R[1],V=Object(u.useState)(null),q=Object(a.a)(V,2),J=q[0],K=q[1],Y=Object(u.useState)(!1),z=Object(a.a)(Y,2),$=z[0],X=z[1],Q=Object(u.useState)(null),Z=Object(a.a)(Q,2),ee=Z[0],ne=Z[1],te=c.find((function(e){return e.id===t}));return Object(u.useEffect)((function(){0===L&&(K(null),v([]),y(null),C(!1),ne(null),b(null))}),[i,t,L,b]),Object(u.useEffect)((function(){A&&(E(!1),y(p.find((function(e){return e.native}))),C(!!p.find((function(e){return!e.native}))))}),[A,te,p,i,t]),Object(u.useEffect)((function(){var e=L;L>0&&!g&&(e-=1),m({steps:G.map((function(e){return{name:e}})),stepIndex:e})}),[g,m,L,G]),Object(u.useEffect)((function(){var e=function(){X(!0),d([Object(U.jsx)(l.e,{icon:Object(U.jsx)(x.I,{}),className:"clear buttonComponent",onClick:function(){return X(!1)},children:"Back"},"0"),Object(U.jsx)(l.e,{icon:Object(U.jsx)(x.h,{}),className:"danger buttonComponent",onClick:function(){return r()},children:"Close"},"1")])};L>0&&b((function(){return e}))}),[L,b,d,r,$]),Object(U.jsxs)("div",{children:[J&&Object(U.jsx)("div",{className:"mt-3 error",children:J}),Object(U.jsxs)("div",{id:"assets-migration",children:[$&&Object(U.jsx)("div",{className:"notification-hollow warning mt-4",children:"By closing this window, your progress will be lost. Are you sure you want to close this window?"}),0===L&&Object(U.jsx)(D,{hidden:$,signerAccount:te.signer.address,identityAccount:t,network:i,PERMITTABLE_COINS:M,setIsSelectionConfirmed:E,setStep:B,portfolio:o,relayerURL:s,setModalButtons:d,hideModal:r,setError:K,setSelectedTokensWithAllowance:v,setStepperSteps:H,setGasSpeed:ne}),1===L&&g&&Object(U.jsx)(W,{hidden:$,signer:te.signer,identityAccount:t,network:i,addRequest:n,signerExtra:te.signerExtra,setError:K,nativeTokenData:g,hideModal:r,setStep:B,relayerURL:s,hasERC20Tokens:T,setModalButtons:d,setSelectedTokensWithAllowance:v,selectedTokensWithAllowance:p,setBeforeCloseModalHandler:b,gasSpeed:ee}),2===L&&Object(U.jsx)(P,{hidden:$,signer:te.signer,identityAccount:t,network:i,addRequest:n,PERMITTABLE_COINS:M,signerExtra:te.signerExtra,setError:K,selectedTokensWithAllowance:p,hideModal:r,setStep:B,setModalButtons:d,gasSpeed:ee,relayerURL:s})]})]})},H=function(e){var n=e.addRequest,t=e.selectedAccount,c=e.selectedNetwork,i=e.accounts,r=e.relayerURL,s=e.portfolio,o=Object(d.f)(),m=o.hideModal,b=o.setBeforeCloseModalHandler,f=Object(u.useState)(null),j=Object(a.a)(f,2),p=j[0],v=j[1],h=Object(u.useState)({steps:[],stepIndex:0}),O=Object(a.a)(h,2),g=O[0],x=O[1];return Object(U.jsx)(l.n,{id:"asset-migration-modal",title:Object(U.jsxs)("div",{children:[Object(U.jsx)("span",{children:"Migrate Assets"}),Object(U.jsx)(l.w,{steps:g.steps,currentStep:g.stepIndex,noLabels:!1})]}),buttons:p,children:Object(U.jsx)(G,{addRequest:n,selectedAccount:t,network:c,accounts:i,hideModal:m,relayerURL:r,portfolio:s,setModalButtons:v,setModalSteps:x,setBeforeCloseModalHandler:b})})};n.a=function(e){var n,t,c=e.addRequest,i=e.selectedAccount,r=e.accounts,s=e.selectedNetwork,l=e.relayerURL,m=e.portfolio,b=e.closeable,f=void 0!==b&&b,j=e.linkMargin,p=void 0!==j&&j,v=e.useStorage,h=Object(u.useState)(!1),O=Object(a.a)(h,2),g=O[0],x=O[1],y=Object(u.useState)(!1),w=Object(a.a)(y,2),k=w[0],T=w[1],C=Object(d.f)().showModal,N=v({key:"migrationSeen",defaultValue:{}}),S=Object(a.a)(N,2),A=S[0],E=S[1],M=r.find((function(e){return e.id===i}));try{t=Object(B.a)({signer:M.signer,signerExtra:M.signerExtra,chainId:s.chainId})}catch(F){}var _=Object(u.useCallback)((function(){T(!0),E((function(e){return e[i+s.id]=!0,e}))}),[i,s,E]);Object(u.useEffect)((function(){var e=!1;x(!1);return function(n){var t=n.networkId,a=n.identityAccount,c=n.accounts.find((function(e){return e.id===a}));c.signer&&o({networkId:t,account:c.signer.address}).then((function(n){if(!e){var t=n.filter((function(e){return e.balanceUSD>.001}));x(!!t.length)}})).catch((function(e){console.error(e)}))}({identityAccount:i,networkId:s.id,accounts:r}),function(){return e=!0}}),[i,s,r]),Object(u.useEffect)((function(){T(f&&!!A[i+s.id])}),[f,i,s,A]);return(null===(n=t)||void 0===n?void 0:n.provider)||M.signerExtra&&["ledger","trezor","Lattice"].includes(M.signerExtra.type)?g&&!k&&Object(U.jsxs)("div",{className:"migration-banner",children:[Object(U.jsxs)("div",{className:"migration-banner-message",children:[Object(U.jsx)("div",{children:"We detected that your signer account has tokens that can be transferred to your Ambire account. We recommend doing this in order to maximize your $WALLET rewards."}),Object(U.jsx)("span",{className:"link"+(p?" link-margin":""),onClick:function(){C(Object(U.jsx)(H,{addRequest:c,selectedNetwork:s,selectedAccount:i,accounts:r,relayerURL:l,portfolio:m}))},children:"Click here to migrate those tokens"})]}),f&&Object(U.jsx)("div",{className:"migration-banner-close",children:Object(U.jsx)(I.g,{onClick:function(){return _()}})})]}):Object(U.jsx)(U.Fragment,{})}}}]);
//# sourceMappingURL=20.b3467c42.chunk.js.map