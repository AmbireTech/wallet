{"version":3,"sources":["components/SendTransaction/TitleBar/TitleBar.module.scss","components/SendTransaction/DetailsPanel/Options/AccountAndNetwork/AccountAndNetwork.module.scss","components/SendTransaction/DetailsPanel/Options/FeeSelector/WalletDiscountBanner/WalletDiscountBanner.module.scss","components/SendTransaction/DetailsPanel/Options/FeeSelector/FeeCurrencySelect/FeeCurrencySelect.module.scss","components/SendTransaction/DetailsPanel/Options/FeeSelector/FeesBreakdown/FeesBreakdown.module.scss","components/SendTransaction/DetailsPanel/Options/FeeSelector/SelectFeeType/FeeAmountSelectors/FeeAmountSelectors.module.scss","components/SendTransaction/DetailsPanel/Options/FeeSelector/SelectFeeType/SelectFeeType.module.scss","components/SendTransaction/DetailsPanel/Options/FeeSelector/FeeSelector.module.scss","components/SendTransaction/DetailsPanel/Options/Options.module.scss","components/SendTransaction/DetailsPanel/Replace/Replace.module.scss","components/SendTransaction/DetailsPanel/ActionsWrapper/Actions/Actions.module.scss","components/SendTransaction/DetailsPanel/ActionsWrapper/ActionsWrapper.module.scss","components/SendTransaction/TransactionPanel/TransactionPanel.module.scss","components/SendTransaction/SendTransaction.module.scss","components/SendTransaction/TitleBar/TitleBar.js","components/SendTransaction/DetailsPanel/Options/AccountAndNetwork/AccountAndNetwork.js","components/SendTransaction/DetailsPanel/Options/FeeSelector/WalletDiscountBanner/WalletDiscountBanner.js","resources/icons/edit.svg","components/SendTransaction/DetailsPanel/Options/FeeSelector/FeeCurrencySelect/FeeCurrencySelect.js","components/SendTransaction/DetailsPanel/Options/FeeSelector/FeesBreakdown/FeesBreakdown.js","components/SendTransaction/DetailsPanel/Options/FeeSelector/SelectFeeType/FeeAmountSelectors/FeeAmountSelectors.js","components/SendTransaction/DetailsPanel/Options/FeeSelector/SelectFeeType/SelectFeeType.js","components/SendTransaction/DetailsPanel/FailingTxn/FailingTxn.js","components/SendTransaction/DetailsPanel/Options/FeeSelector/FeeSelector.js","components/SendTransaction/DetailsPanel/Options/Options.js","components/SendTransaction/DetailsPanel/Replace/Replace.js","components/SendTransaction/noRelayer.js","components/SendTransaction/DetailsPanel/ActionsWrapper/Actions/Actions.js","components/SendTransaction/DetailsPanel/ActionsWrapper/ActionsWrapper.js","components/SendTransaction/DetailsPanel/DetailsPanel.js","components/SendTransaction/TransactionPanel/TransactionPanel.js","components/SendTransaction/SendTransaction.js","lib/icons.js","lib/formatters.js","lib/lattice.js","lib/ledgerWebHID.js","lib/getWallet.js","components/SendTransaction/helpers.js","../node_modules/adex-protocol-eth/js/index.js","../node_modules/adex-protocol-eth/js/Channel.js","../node_modules/adex-protocol-eth/js/Withdraw.js","../node_modules/adex-protocol-eth/js/MerkleTree.js","../node_modules/adex-protocol-eth/js/splitSig.js","../node_modules/adex-protocol-eth/js/UnbondCommitment.js","../node_modules/adex-protocol-eth/js/Permit.js","../node_modules/ambire-common/src/services/requestToBundleTxn/requestToBundleTxn.ts","resources/icons/chevron-left.svg","resources/icons/information.svg","components/common/TxnPreview/ExtendedSummaryItem/ExtendedSummaryItem.module.scss","components/common/TxnPreview/TxnPreview.module.scss","resources/icons/external-link.svg","components/common/TxnPreview/ExtendedSummaryItem/ExtendedSummaryItem.js","components/common/TxnPreview/TxnPreview.js"],"names":["module","exports","TitleBar","onDismiss","className","styles","wrapper","dismiss","onClick","backIcon","backLabel","label","infoIcon","AccountAndNetwork","account","accountAvatar","network","title","body","avatar","alt","src","address","id","name","icon","networkIconsById","getBalance","token","balance","decimals","priceInUSD","_rect","_path","WalletDiscountBanner","currenciesItems","tokens","estimation","onFeeCurrencyChange","feeSpeed","isGasTankEnabled","DISCOUNT_TOKENS_SYMBOLS","walletDiscountBlogpost","selectedFeeToken","symbol","includes","discount","walletDiscountTokens","filter","x","isTokenEligible","sort","a","b","parseInt","indexOf","length","discountToken","eligibleWalletToken","find","value","action","actionTxt","showSwap","cn","row","href","target","rel","mini","button","swapInfo","to","FeeCurrencySelect","disabled","feeInUSD","defaultValue","items","onChange","FeesBreakdown","baseFeeInFeeToken","savedGas","discountInUSD","getDiscountApplied","baseFeeInUSD","fee","feeSide","isNaN","formatFloatTokenAmount","gasLimit","warning","balanceInUSD","FeeAmountSelectors","setFeeSpeed","setCustomFee","setEditCustomFee","SPEEDS","nativeAssetSymbol","nativeRate","checkIsSelectorDisabled","speed","insufficientFee","map","isETH","getFeesData","customFee","feeInFeeToken","discountInFeeToken","discountInFeeInUSD","baseFeeInFeeUSD","showInUSD","feeSquare","selected","selectFeeSpeed","discountBadge","feeEstimation","_excluded","_extends","Object","assign","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgEdit","_ref","svgRef","titleId","props","xmlns","width","height","viewBox","ref","fill","d","transform","ForwardRef","SelectFeeType","setEstimation","useState","editCustomFee","prevEstimation","minFee","minFeeUSD","maxFee","maxFeeUSD","discountMin","discountMax","discountBaseMinInUSD","discountBaseMaxInUSD","baseMinFee","baseMaxFee","baseMinFeeUSD","baseMaxFeeUSD","isUnderpriced","parseFloat","isOverpriced","customFeeSelector","placeholder","inputMb","priceWarning","textOnly","FailingTxn","message","tooltip","type","text","iconNextToTitle","FeeSelector","signer","success","checkIfDAppIncompatible","msg","getErrHint","mapTxnErrMsg","feeInNative","remainingFeeTokenBalances","nativePrice","gasTankTokens","gasTank","nativeAssetPriceInUSD","item","price","toUpperCase","ethers","utils","parseUnits","toFixed","toString","localeCompare","tokenNetwork","rest","getTokenIcon","extra","sufficientSpeeds","alert","join","isGasTankAvailable","gasTankEnabled","gasTankDisabled","Options","signingStatus","relayerURL","bundle","canProceed","currentAccGasTankState","blockies","seed","toDataURL","finalBundle","isEnabled","Replace","isInt","mustReplaceNonce","rejectTxn","replaceInfo","info","buttons","clear","IdentityInterface","Interface","require","FactoryInterface","sendNoRelayer","wallet","provider","quickAccManager","Error","getCode","identity","then","code","data","encodeFunctionData","txns","getNonce","sign","identityFactoryAddr","bytecode","salt","signature","estimateGas","from","toNumber","hexlify","Math","floor","getTransactionCount","txn","gas","gasPrice","nonce","sendTransaction","signTransaction","signed","txId","hash","getNetwork","chainId","ERC20","getErrorMessage","e","Actions","setSigningStatus","isMounted","replaceTx","cancelSigning","onBroadcastedTxn","resolveMany","addToast","useToasts","passphrase","quickAccCredentials","setQuickAccCredentials","useEffect","prev","form","useRef","rejectButton","danger","approveTxn","inProgress","signerExtra","timeout","requestIds","approveTxnImplQuickAcc","approveTxnImpl","bundleResult","current","match","result","error","catch","console","getFinalBundle","getProvider","getWallet","submit","fetch","useCallback","Bundle","feeToken","addedGas","feeTxn","accountPresets","feeCollector","toHexAmount","nextFreeNonce","nextNonce","nextNonMinedNonce","extraGas","fToken","gasTankFee","assetId","canSkip2FA","confCodeRequired","fetchPost","recoveryMode","quickAcc","primaryKeyBackup","undefined","Promise","resolve","setTimeout","pwd","Wallet","fromEncryptedJson","JSON","parse","signatureTwo","signButtonLabel","isRecoveryMode","confirmationCodeInfo","confirmationCodeInfoTitle","confirmationCodeInfoMessage","quickAccSigningForm","onSubmit","preventDefault","code2faNotRequiredMsg","inputsContainer","password","required","minLength","style","visibility","textInput","pattern","autoComplete","maxLength","primaryGradient","confirm","checkValidity","ActionsWrapper","isDeployed","firstTransactionAlert","DetailsPanel","replaceByDefault","REJECT_MSG","panelClassName","setReplaceTx","pendingBundle","checked","TransactionPanel","listOfTransactions","frozen","isFirstFailing","firstFailing","min","Date","now","TxnPreview","minute","disableDismiss","disableDismissLabel","addressLabel","meta","SendTransaction","accounts","selectedAcc","requests","replacementBundle","gasTankState","eligibleRequests","useMemo","toLowerCase","makeBundle","SendTransactionWithBundle","currentBundle","unmounted","reestimate","estimate","replacing","minFeeInUSDPerGas","getNextNonce","estimateNoRelayer","relayerless","getDefaultFeeToken","log","intvl","setInterval","clearInterval","container","panelWrapper","panelWrapperTitle","panel","customIcons","zapperStorageTokenIcons","networkId","addr","net","amount","useGrouping","maximumFractionDigits","minimumFractionDigits","toLocaleString","max","err","crypto","HARDENED_OFFSET","getAddressesReqOpts","startPath","n","latticeInit","commKey","clientConfig","privKey","Client","latticeConnect","client","deviceId","reject","connect","isPaired","errConnect","latticePair","secret","pair","hasActiveWallet","errPair","latticeGetAddresses","getAddresses","res","errGetAddresses","latticeSignMessage","dataMsg","protocol","payload","signerPath","signOptsMsg","currency","signedTx","signedMsg","sig","r","s","v","errSignMessage","latticeSignMessage712","reqData","latticeSignTransaction","unsignedTxObj","txData","useEIP155","signOpts","serializedSigned","serialize","errSignTxn","ethUtil","HDNode","connectedDevices","PARENT_HD_PATH","getTransport","TransportWebHID","list","opened","open","request","ledgerGetAddresses","transport","getAccounts","close","parentKeyDerivationPath","getAddressInternal","o","statusCode","ledgerResponse","hdKey","publicKey","Buffer","chainCode","mainAddress","addressOfHDKey","initialDerivedKeyInfo","derivationPath","baseDerivationPath","calculateDerivedHDKeyInfos","appEth","AppEth","ledgerTimeout","timeoutHandle","race","getAddress","clearTimeout","ledgerSignTransaction","fromAddr","serializedUnsigned","accountsData","substr","rsvResponse","intV","ledgerSignMessage","signerAddress","signPersonalMessage","rsvReply","ledgerSignMessage712","domainSeparator","hashStructMessage","signEIP712HashedMessage","count","derivedKeys","fullDerivationPath","path","derive","derivedKey","push","derivedPublicKey","ethereumAddressUnprefixed","publicToAddress","addHexPrefix","wallets","opts","one","getWalletNew","TrezorConnect","manifest","email","appUrl","providerTrezor","TrezorSubprovider","trezorConnectClientApi","_initialDerivedKeyInfo","fromExtendedKey","xpub","getInitialDerivedKeyInfo","signMessage","signPersonalMessageAsync","params","signTransactionAsync","transaction","networks","broadcastProvider","isConnected","matchAddress","getAccountsAsync","addresses","_signTypedData","domain","types","_TypedDataEncoder","hashDomain","hashStruct","getPrimaryType","getPayload","_initialDerivedKeyInfoAsync","derivedKeyInfo","_findDerivedKeyInfoForAddress","_trezorConnectClientApi","ethereumSignTypedData","metamask_v4_compat","domain_separator_hash","message_hash","response","transportProtocol","LedgerSubprovider","ledgerEthereumClientFactoryAsync","ledgerEthereumBrowserClientFactoryAsync","wrapLatticeError","window","ethereum","providers","Web3Provider","signerObject","getSigner","matchChain","listAccounts","fn","arg","pow","getAddedGas","contractErrors","contractMsg","amnt","round","multiplier","getFeePaymentConsequences","discountMultiplier","totalMultiplier","isCrossChainNativeSelected","WALLET_TOKEN_SYMBOLS","toBundleTxn","Array","isArray","reduce","some","xWalletReq","xWallet","channelLib","withdrawalLib","MerkleTree","splitSig","unbondCommitmentlLib","Permit","bundleLib","abi","keccak256","ensure","Channel","args","leader","Address","follower","guardian","tokenAddr","Bytes32","freeze","arrayBuffer","rawEncode","hashHex","toSolidityTuple","hashToSign","contractAddr","balanceRoot","getSignableStateRoot","hashToSignHex","stateRoot","getResumeSignableMessage","challengeExpires","solidityPack","getResumeSignableMessageHex","channelId","getBalanceLeaf","acc","getSpenderBalanceLeaf","ChannelState","Challenged","Active","Withdraw","channel","balanceTreeAmount","Uint256","sigLeader","Bytes32Array","sigFollower","proof","combinedHash","first","second","sorted","concat","compare","getLayers","elements","layers","getNextLayer","layer","element","index","arr","_elements","every","isBuffer","buffers","buffer","findIndex","equals","l","root","getRoot","pairIndex","getPair","inputSig","startsWith","slice","substring","UnbondCommitment","owner","shares","unlocksAt","buf","defaultAbiCoder","toUtf8Bytes","PERMIT_TYPEHASH","getDomainSeparator","tokenAddress","encode","getApprovalDigest","approve","deadline","DOMAIN_SEPARATOR","spender","IdentityFactory","IdentityFactoryABI","deploySalt","_g","SvgChevronLeft","SvgInformation","SvgExternalLink","ExtendedSummaryItem","networkDetails","feeAssets","word","foundToken","explorerUrl","stopPropagation","ToolTip","externalLink","canShowLink","erc721","getNetworkSymbol","mined","disableExpand","useConstants","constants","tokenList","humanizerInfo","isExpanded","setExpanded","contractName","getName","extendedSummary","getTransactionSummary","extended","setKnownAddressNames","heading","summaryContainer","expandTxn","reversedChevron","summary","entry","isKnown","actionIcons","dismissTxn","advanced","formatUnits"],"mappings":"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","file":"static/js/12.59f11403.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"TitleBar_wrapper__2w8DH\",\"backIcon\":\"TitleBar_backIcon__j_2A2\",\"backLabel\":\"TitleBar_backLabel__1DO59\",\"infoIcon\":\"TitleBar_infoIcon__38Yek\",\"dismiss\":\"TitleBar_dismiss__2z-EJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"AccountAndNetwork_wrapper__3aj-M\",\"title\":\"AccountAndNetwork_title__2NoSD\",\"body\":\"AccountAndNetwork_body__2mdwv\",\"account\":\"AccountAndNetwork_account__1u7XK\",\"avatar\":\"AccountAndNetwork_avatar__3Yt_r\",\"address\":\"AccountAndNetwork_address__1-wDp\",\"network\":\"AccountAndNetwork_network__ioZDc\",\"icon\":\"AccountAndNetwork_icon__lNlFG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"WalletDiscountBanner_row__2nLSD\",\"wrapper\":\"WalletDiscountBanner_wrapper__XV-Yt\",\"button\":\"WalletDiscountBanner_button__3xeFC\",\"swapInfo\":\"WalletDiscountBanner_swapInfo__5ZMyv\",\"link\":\"WalletDiscountBanner_link__1oFEE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"FeeCurrencySelect_wrapper__F5GZw\",\"title\":\"FeeCurrencySelect_title__2vj2j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"FeesBreakdown_wrapper__k7Q6b\",\"fee\":\"FeesBreakdown_fee__3c40O\",\"discount\":\"FeesBreakdown_discount__1RQ12\",\"warning\":\"FeesBreakdown_warning__EffyY\",\"feeSide\":\"FeesBreakdown_feeSide__9-_of\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"FeeAmountSelectors_wrapper__3u34M\",\"feeSquare\":\"FeeAmountSelectors_feeSquare__2beGG\",\"speed\":\"FeeAmountSelectors_speed__-K-5T\",\"feeEstimation\":\"FeeAmountSelectors_feeEstimation__3Izgw\",\"disabled\":\"FeeAmountSelectors_disabled__3qYCV\",\"selected\":\"FeeAmountSelectors_selected__2ubAU\",\"discountBadge\":\"FeeAmountSelectors_discountBadge__2uFfK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"SelectFeeType_wrapper__2IT-9\",\"editCustomFee\":\"SelectFeeType_editCustomFee__1uaC9\",\"customFeeSelector\":\"SelectFeeType_customFeeSelector__27Rvv\",\"title\":\"SelectFeeType_title__1wczY\",\"inputMb\":\"SelectFeeType_inputMb__2JQHo\",\"priceWarning\":\"SelectFeeType_priceWarning__1chPx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"alert\":\"FeeSelector_alert__1Wvq2\",\"title\":\"FeeSelector_title__8YH1k\",\"gasTankEnabled\":\"FeeSelector_gasTankEnabled__bc5v-\",\"gasTankDisabled\":\"FeeSelector_gasTankDisabled__3RDvE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Options_wrapper__tbXAr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"replaceInfo\":\"Replace_replaceInfo__1dXV0\",\"info\":\"Replace_info__5I9UE\",\"warning\":\"Replace_warning__Dbox5\",\"wrapper\":\"Replace_wrapper__IQEpI\",\"buttons\":\"Replace_buttons__1HsFr\",\"button\":\"Replace_button__1nQja\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Actions_wrapper__3OH37\",\"confirmationCodeInfo\":\"Actions_confirmationCodeInfo__1A8Fz\",\"confirmationCodeInfoTitle\":\"Actions_confirmationCodeInfoTitle__3ErkK\",\"confirmationCodeInfoMessage\":\"Actions_confirmationCodeInfoMessage__14IwA\",\"quickAccSigningForm\":\"Actions_quickAccSigningForm__1gypN\",\"code2faNotRequiredMsg\":\"Actions_code2faNotRequiredMsg__IIvy3\",\"inputsContainer\":\"Actions_inputsContainer__hsI9X\",\"buttons\":\"Actions_buttons__1ma7U\",\"button\":\"Actions_button__3VCAt\",\"danger\":\"Actions_danger__4XEsE\",\"confirm\":\"Actions_confirm__33F5w\",\"loading\":\"Actions_loading__1Z5g4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"firstTransactionAlert\":\"ActionsWrapper_firstTransactionAlert__3SMEj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"TransactionPanel_wrapper__1IJFY\",\"listOfTransactions\":\"TransactionPanel_listOfTransactions__1pSJ0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"SendTransaction_wrapper__2lEPF\",\"container\":\"SendTransaction_container__2HvXZ\",\"panelWrapper\":\"SendTransaction_panelWrapper__1NFuO\",\"panelWrapperTitle\":\"SendTransaction_panelWrapperTitle__2iMOZ\",\"panel\":\"SendTransaction_panel__1rzkk\"};","import { ToolTip } from \"components/common\";\n\nimport { ReactComponent as ChevronLeftIcon } from \"resources/icons/chevron-left.svg\";\nimport { ReactComponent as InfoIcon } from \"resources/icons/information.svg\";\n\nimport styles from \"./TitleBar.module.scss\";\n\nconst TitleBar = ({ onDismiss }) => (\n  <div className={styles.wrapper}>\n    <div className={styles.dismiss} onClick={onDismiss}>\n      <div className={styles.backIcon}>\n        <ChevronLeftIcon />\n      </div>\n      <p className={styles.backLabel}>Back</p>\n      <ToolTip label=\"You can go back to the main dashboard and add more transactions to this bundle in order to sign & send them all at once.\">\n        <InfoIcon className={styles.infoIcon} />\n      </ToolTip>\n    </div>\n  </div>\n);\n\nexport default TitleBar;\n","import { networkIconsById } from 'consts/networks'\n\nimport styles from './AccountAndNetwork.module.scss'\n\nconst AccountAndNetwork = ({\n  account,\n  accountAvatar,\n  network\n}) => (\n  <div className={styles.wrapper}>\n    <h2 className={styles.title}>Signing With</h2>\n    <div className={styles.body}>\n      <div className={styles.account}>\n        <img\n          className={styles.avatar}\n          alt=\"avatar\"\n          src={accountAvatar}\n        />\n        <p className={styles.address}>{account.id}</p>\n      </div>\n      <p className={styles.network}>\n        on {network.name}\n        <img\n          className={styles.icon}\n          src={networkIconsById[network.id]}\n          alt={network.name}\n        />\n      </p>\n    </div>\n  </div>\n)\n\nexport default AccountAndNetwork","import cn from 'classnames'\n\nimport { isTokenEligible } from 'components/SendTransaction/helpers'\nimport { Button } from \"components/common\"\n\nimport { FaPercentage } from \"react-icons/fa\"\nimport { MdInfoOutline } from \"react-icons/md\"\nimport { NavLink } from 'react-router-dom'\n\nimport styles from './WalletDiscountBanner.module.scss'\n\nfunction getBalance(token) {\n  const { balance, decimals, priceInUSD } = token\n  return balance / decimals * priceInUSD\n}\n\nconst WalletDiscountBanner = ({ \n  currenciesItems, \n  tokens,\n  estimation, \n  onFeeCurrencyChange, \n  onDismiss, \n  feeSpeed, \n  isGasTankEnabled, \n  network, \n  DISCOUNT_TOKENS_SYMBOLS, \n  walletDiscountBlogpost \n}) => {\n  if (estimation.selectedFeeToken?.symbol\n    && (DISCOUNT_TOKENS_SYMBOLS.includes(estimation.selectedFeeToken?.symbol)\n      || estimation.selectedFeeToken.discount)\n  ) {\n    return null\n  }\n  const walletDiscountTokens = [...tokens]\n    .filter(x => DISCOUNT_TOKENS_SYMBOLS.includes(x.symbol) && x.discount && isTokenEligible(x, feeSpeed, estimation, isGasTankEnabled, network))\n    .sort((a, b) =>\n      b.discount - a.discount\n      || ((!parseInt(a.balance) || !parseInt(b.balance)) ? getBalance(b) - getBalance(a) : 0)\n      || DISCOUNT_TOKENS_SYMBOLS.indexOf(a.symbol) - DISCOUNT_TOKENS_SYMBOLS.indexOf(b.symbol)\n    )\n\n  if (!walletDiscountTokens.length) return null\n\n  const discountToken = walletDiscountTokens[0]\n\n  const { discount } = discountToken\n  const eligibleWalletToken = currenciesItems.find(x => x.value && (x.value === 'WALLET' || x.value === discountToken.address))\n  const action = !!eligibleWalletToken\n    ? () => onFeeCurrencyChange(eligibleWalletToken)\n    : null\n  //TODO: go to swap \n  const actionTxt = !!eligibleWalletToken ? `USE ${discountToken.symbol}` : `BUY ${discountToken.symbol}`\n  const showSwap = !action\n\n  return (\n    <div className={cn(styles.wrapper, styles.row)}>\n      <div className={styles.row}>\n        Get {discount * 100} <FaPercentage /> fees discount with &nbsp;<strong>$WALLET</strong> &nbsp;\n        <a\n          className={styles.row}\n          href={walletDiscountBlogpost}\n          target=\"_blank\"\n          rel=\"noreferrer noopener\">\n          <MdInfoOutline />\n        </a>\n      </div>\n      {!!action && <Button onClick={action} mini className={styles.button}>\n        {actionTxt}\n      </Button>}\n      {showSwap && <div className={styles.swapInfo}>\n        You can get $WALLET, just use the &nbsp;\n        <NavLink className='link' to={'/wallet/swap'} onClick={onDismiss}>\n          Swap\n        </NavLink> menu on the left!\n      </div>}\n    </div>\n  )\n}\n\nexport default WalletDiscountBanner","var _rect, _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgEdit(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Edit_icon\",\n    \"data-name\": \"Edit icon\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Boundary\",\n    width: 24,\n    height: 24,\n    fill: \"none\"\n  })), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_133\",\n    \"data-name\": \"Path 133\",\n    d: \"M2614,23.693a3,3,0,0,1-3-3v-13a3,3,0,0,1,3-3h4.5a1,1,0,0,1,0,2H2614a1,1,0,0,0-1,1v13a1,1,0,0,0,1,1h13a1,1,0,0,0,1-1v-4.5a1,1,0,1,1,2,0v4.5a3,3,0,0,1-3,3Zm3.3-6.226c-.781-.781-.041-5.322.739-6.1l7.779-7.778a2,2,0,0,1,2.829,0l2.474,2.475a2,2,0,0,1,0,2.828l-7.778,7.779c-.555.554-2.978,1.12-4.614,1.12A2.228,2.228,0,0,1,2617.3,17.466Zm2.258-4.793a7.892,7.892,0,0,0-.471,1.86,10.021,10.021,0,0,0-.117,1.247,10.083,10.083,0,0,0,1.221-.133,7.936,7.936,0,0,0,1.835-.493l4.357-4.356-2.476-2.475Zm5.764-5.765,2.475,2.476,1.909-1.91L2627.232,5Z\",\n    transform: \"translate(-2609 -1.692)\",\n    fill: \"#ebecff\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEdit);\nexport default __webpack_public_path__ + \"static/media/edit.c697315f.svg\";\nexport { ForwardRef as ReactComponent };","import { Select } from \"components/common\"\n\nimport styles from './FeeCurrencySelect.module.scss'\n\nconst FeeCurrencySelect = ({\n  estimation,\n  disabled,\n  currenciesItems,\n  onFeeCurrencyChange\n}) => {\n  \n  return estimation.feeInUSD ? ( \n  <div className={styles.wrapper}>\n    <p className={styles.title}>Fee Currency</p>\n    <Select\n      disabled={disabled}\n      defaultValue={estimation.selectedFeeToken?.address || estimation.selectedFeeToken?.symbol}\n      items={currenciesItems}\n      onChange={onFeeCurrencyChange}\n    />\n  </div>) : null\n}\n\nexport default FeeCurrencySelect","import cn from 'classnames'\n\nimport { formatFloatTokenAmount } from 'lib/formatters'\n\nimport { getDiscountApplied } from 'components/SendTransaction/helpers'\n\nimport { MdInfoOutline } from 'react-icons/md'\n\nimport styles from './FeesBreakdown.module.scss'\n\nconst FeesBreakdown = ({\n  discount,\n  estimation,\n  feeInUSD,\n  baseFeeInFeeToken,\n  savedGas,\n  isGasTankEnabled,\n  decimals,\n  walletDiscountBlogpost,\n  DISCOUNT_TOKENS_SYMBOLS\n}) => {\n\n  const discountInUSD = getDiscountApplied(feeInUSD, discount)\n  const baseFeeInUSD = feeInUSD + discountInUSD\n  \n  return (\n    <div className={styles.wrapper}>\n      {(<div className={styles.fee}>\n        <p className={styles.feeSide}>\n          Fee\n          {!!discount && <span className={styles.discount}>*</span>}\n          {!!(discount && DISCOUNT_TOKENS_SYMBOLS.includes(estimation.selectedFeeToken?.symbol)) && <a\n              className=\"address row discount-label\"\n              href={walletDiscountBlogpost}\n              target=\"_blank\"\n              rel=\"noreferrer\">\n              &nbsp;<MdInfoOutline />\n            </a>\n          }:\n          {\n            !isNaN(baseFeeInFeeToken) && ` ${formatFloatTokenAmount(baseFeeInFeeToken, true, decimals) + ' ' + estimation?.selectedFeeToken?.symbol}`\n          }\n        </p>\n        {\n          !isNaN(baseFeeInUSD) && <p className={styles.feeSide}>\n            ~$ {formatFloatTokenAmount(baseFeeInUSD, true, 4)}\n          </p>\n        }\n      </div>)}\n\n      {!!discount && (<div className={cn(styles.fee, styles.discount)}>\n        <p className={styles.feeSide}>\n          You save ({discount * 100}%):\n          {/* <div>\n            {discountInFeeToken + ' ' + estimation.selectedFeeToken.symbol}\n          </div> */}\n        </p>\n        <p className={styles.feeSide}>\n          ~$ {formatFloatTokenAmount(discountInUSD, true, 4)}\n        </p>\n      </div>)}\n\n      {!!discount && (<div className={cn(styles.fee, styles.discount)}>\n        <p className={styles.feeSide}>\n          You pay:\n        </p>\n        <p className={styles.feeSide}>\n          ~$ {formatFloatTokenAmount(feeInUSD, true, 4)}\n        </p>\n      </div>)}\n      {!isGasTankEnabled && !isNaN((feeInUSD / estimation.gasLimit) * savedGas) && \n          <div className={cn(styles.fee, styles.warning)}>\n            <p className={styles.feeSide}>\n              Enable Gas Tank to save:\n            </p>\n            <p className={styles.feeSide}>\n              $ {formatFloatTokenAmount(((feeInUSD / estimation.gasLimit) * savedGas), true, 4)}\n            </p>\n          </div>}\n      {!!isGasTankEnabled && (<>\n        <div className={cn(styles.fee, styles.discount)}>\n          <p className={styles.feeSide}>\n            Gas Tank fee token balance:\n          </p>\n          <p className={styles.feeSide}>\n            $ {formatFloatTokenAmount(estimation.selectedFeeToken.balanceInUSD, true, 4)}\n          </p>\n        </div>\n      {!isNaN((feeInUSD / estimation.gasLimit) * savedGas) && \n          <div className={cn(styles.fee, styles.discount)}>\n            <p className={styles.feeSide}>\n              Gas Tank saves you:\n            </p>\n            <p className={styles.feeSide}>\n              $ {formatFloatTokenAmount(((feeInUSD / estimation.gasLimit) * savedGas), true, 4)}\n            </p>\n          </div>}\n      </>)}\n    </div>\n  )\n}\n\nexport default FeesBreakdown","import cn from 'classnames'\n\nimport { formatFloatTokenAmount } from 'lib/formatters'\n\nimport {\n  isTokenEligible,\n  getFeesData,\n  getDiscountApplied,\n} from 'components/SendTransaction/helpers'\n\nimport { FaPercentage } from 'react-icons/fa'\n\nimport styles from './FeeAmountSelectors.module.scss'\n\nconst FeeAmountSelectors = ({\n  setFeeSpeed,\n  setCustomFee,\n  setEditCustomFee,\n  disabled,\n  estimation,\n  isGasTankEnabled,\n  network,\n  discount,\n  symbol,\n  SPEEDS,\n  nativeAssetSymbol,\n  feeSpeed,\n  decimals,\n  nativeRate\n}) => {\n\n  const selectFeeSpeed = speed => {\n    setFeeSpeed(speed)\n    setCustomFee(null)\n    setEditCustomFee(false)\n  }\n\n  const checkIsSelectorDisabled = speed => {\n    const insufficientFee = !isTokenEligible(estimation.selectedFeeToken, speed, estimation, isGasTankEnabled, network)\n    return disabled || insufficientFee\n  }\n    \n  return (\n    <div className={styles.wrapper}>\n      {\n        SPEEDS.map(speed => {\n          const isETH = symbol === 'ETH' && nativeAssetSymbol === 'ETH'\n          const {\n            feeInFeeToken,\n            feeInUSD,\n            // NOTE: get the estimation res data w/o custom fee for the speeds\n          } = getFeesData({ ...estimation.selectedFeeToken }, { ...estimation, customFee: null }, speed, isGasTankEnabled, network)\n          const discountInFeeToken = getDiscountApplied(feeInFeeToken, discount)\n          const discountInFeeInUSD = getDiscountApplied(feeInUSD, discount)\n\n          const baseFeeInFeeToken = feeInFeeToken + discountInFeeToken\n          const baseFeeInFeeUSD = feeInUSD ? feeInUSD + discountInFeeInUSD : null\n\n          const showInUSD = (nativeRate !== null) && baseFeeInFeeUSD\n\n          return (\n            <div\n              key={speed}\n              className={cn(styles.feeSquare, { [styles.selected]: !estimation.customFee && feeSpeed === speed, [styles.disabled]: checkIsSelectorDisabled(speed)})}\n              onClick={() => !checkIsSelectorDisabled(speed) && selectFeeSpeed(speed)}\n            >\n              {!!discount && <FaPercentage className={styles.discountBadge} />}\n              <h4 className={styles.speed}>{speed}</h4>\n              <p className={styles.feeEstimation}>\n                {(isETH ? ' ' : '')\n                  + (showInUSD ? `$${formatFloatTokenAmount(baseFeeInFeeUSD, true, 4)}` : formatFloatTokenAmount(baseFeeInFeeToken, true, decimals))\n                  + (!isETH && !showInUSD ? ` ${estimation.selectedFeeToken.symbol}` : '')\n                }\n              </p>\n              {!isETH && !showInUSD && <p className={cn(styles.feeEstimation, styles.symbol)}>\n                {estimation.selectedFeeToken.symbol}\n              </p>}\n            </div>\n          )\n        })\n      }    \n    </div>\n  )\n}\n\nexport default FeeAmountSelectors","import { useState } from 'react'\nimport cn from 'classnames'\n\nimport { formatFloatTokenAmount } from \"lib/formatters\"\n\nimport {\n  getFeesData\n} from 'components/SendTransaction/helpers'\nimport { Button, TextInput } from 'components/common'\nimport FeeAmountSelectors from './FeeAmountSelectors/FeeAmountSelectors'\n\nimport { ReactComponent as EditIcon } from 'resources/icons/edit.svg'\n\nimport styles from './SelectFeeType.module.scss'\n\nconst OVERPRICED_MULTIPLIER = 1.2\n\nconst SelectFeeType = ({\n  estimation,\n  setEstimation,\n  isGasTankEnabled,\n  network,\n  discount,\n  baseFeeInFeeToken,\n  getDiscountApplied,\n  SPEEDS,\n  symbol,\n  nativeRate,\n  disabled,\n  decimals,\n  feeSpeed,\n  setFeeSpeed,\n  nativeAssetSymbol\n}) => {\n  const [editCustomFee, setEditCustomFee] = useState(false)\n\n  const setCustomFee = value => setEstimation(prevEstimation => ({\n    ...prevEstimation,\n    customFee: value\n  }))\n\n  const {\n    feeInFeeToken: minFee,\n    feeInUSD: minFeeUSD,\n  } = getFeesData({ ...estimation.selectedFeeToken }, { ...estimation, customFee: null }, 'slow', isGasTankEnabled, network)\n\n  const {\n    feeInFeeToken: maxFee,\n    feeInUSD: maxFeeUSD,\n  } = getFeesData({ ...estimation.selectedFeeToken }, { ...estimation, customFee: null }, 'ape', isGasTankEnabled, network)\n\n  const discountMin = getDiscountApplied(minFee, discount)\n  const discountMax = getDiscountApplied(maxFee, discount)\n\n  const discountBaseMinInUSD = getDiscountApplied(minFeeUSD, discount)\n  const discountBaseMaxInUSD = getDiscountApplied(maxFeeUSD, discount)\n\n  // Fees with no discounts applied\n  const baseMinFee = minFee + discountMin\n  const baseMaxFee = (maxFee + discountMax) * OVERPRICED_MULTIPLIER\n  const baseMinFeeUSD = minFeeUSD + discountBaseMinInUSD\n  const baseMaxFeeUSD = (maxFeeUSD + discountBaseMaxInUSD) * OVERPRICED_MULTIPLIER\n\n  const isUnderpriced = !!estimation.customFee\n    && !isNaN(parseFloat(estimation.customFee))\n    && (baseFeeInFeeToken < baseMinFee)\n\n  const isOverpriced = !!estimation.customFee\n    && !isNaN(parseFloat(estimation.customFee))\n    && (baseFeeInFeeToken > baseMaxFee)\n\n  return (\n    <div className={styles.wrapper}>\n      <FeeAmountSelectors\n        setFeeSpeed={setFeeSpeed}\n        setCustomFee={setCustomFee}\n        setEditCustomFee={setEditCustomFee}\n        disabled={disabled}\n        estimation={estimation}\n        isGasTankEnabled={isGasTankEnabled}\n        network={network}\n        discount={discount}\n        symbol={symbol}\n        SPEEDS={SPEEDS}\n        nativeAssetSymbol={nativeAssetSymbol}\n        feeSpeed={feeSpeed}\n        decimals={decimals}\n        nativeRate={nativeRate}\n      />\n      {\n        !editCustomFee ?\n          <div className={styles.editCustomFee} onClick={() => setEditCustomFee(true)}>\n            <EditIcon />\n            Edit fee\n          </div>\n          :\n          <div className={styles.customFeeSelector}>\n            <h2 className={styles.title}>Custom Fee ({symbol})</h2>\n            <TextInput\n              placeholder='Enter amount'\n              className={cn({[styles.inputMb]: isOverpriced || isUnderpriced})}\n              onChange={value => setCustomFee(value)}\n              value={estimation.customFee}\n            />\n            {isUnderpriced &&\n              <div className={styles.priceWarning}>\n                <div>Custom Fee too low. You can try to \"sign and send\" the transaction but most probably it will fail.</div>\n                <div>Min estimated fee: &nbsp;\n                  {<Button\n                    textOnly\n                    onClick={() => setCustomFee(baseMinFee)}\n                  >\n                    {baseMinFee} {symbol}\n                  </Button>}\n                  {!isNaN(baseMinFeeUSD) &&\n                    <span>&nbsp; (~${formatFloatTokenAmount(baseMinFeeUSD, true, 4)}) </span>\n                  }\n                </div>\n              </div>\n            }\n            {isOverpriced &&\n              <div className={styles.priceWarning}>\n                <div>Custom Fee is higher than the APE speed. You will pay more than probably needed. Make sure you know what are you doing!</div>\n                <div>Recommended max fee: &nbsp;\n                  {<Button\n                    textOnly\n                    onClick={() => setCustomFee(baseMaxFee)}\n                  >\n                    {baseMaxFee} {symbol}\n                  </Button>}\n                  {!isNaN(baseMaxFeeUSD) &&\n                    <span>&nbsp; (~${formatFloatTokenAmount(baseMaxFeeUSD, true, 4)}) </span>\n                  }\n                </div>\n              </div>\n            }\n          </div>\n      }\n    </div>\n  )\n}\n\nexport default SelectFeeType","import { Alert, ToolTip } from \"components/common\"\n\nconst FailingTxn = ({ message, tooltip = '' }) => (\n  <ToolTip label={tooltip}>\n    <Alert\n      type=\"danger\"\n      title=\"Warning\"\n      text={message}\n      iconNextToTitle={true}\n    />\n  </ToolTip>\n)\n\nexport default FailingTxn","import { ethers } from 'ethers'\n\nimport {\n  isTokenEligible,\n  mapTxnErrMsg,\n  getErrHint,\n  getFeesData,\n  getDiscountApplied,\n  checkIfDAppIncompatible\n} from 'components/SendTransaction/helpers'\nimport { Loading, DAppIncompatibilityWarningMsg, Alert } from 'components/common'\n// Sections\nimport WalletDiscountBanner from './WalletDiscountBanner/WalletDiscountBanner'\nimport FeeCurrencySelect from './FeeCurrencySelect/FeeCurrencySelect'\nimport FeesBreakdown from './FeesBreakdown/FeesBreakdown'\nimport SelectFeeType from './SelectFeeType/SelectFeeType'\nimport FailingTxn from 'components/SendTransaction/DetailsPanel/FailingTxn/FailingTxn'\n\nimport { getTokenIcon } from 'lib/icons'\nimport { FaPercentage } from 'react-icons/fa'\n\nimport styles from './FeeSelector.module.scss'\n\nconst SPEEDS = ['slow', 'medium', 'fast', 'ape']\nconst walletDiscountBlogpost = 'https://blog.ambire.com/move-crypto-with-ambire-pay-gas-with-wallet-and-save-30-on-fees-35dca1002697'\n// NOTE: Order matters for for secondary fort after the one by discount\nconst DISCOUNT_TOKENS_SYMBOLS = ['xWALLET', 'WALLET-STAKING', 'WALLET']\n\nconst mapGasTankTokens = nativePrice => item => {\n  const nativeRate = item.address === '0x0000000000000000000000000000000000000000' ? null : nativePrice / item.price\n  return {\n    ...item,\n    symbol: item.symbol.toUpperCase(),\n    balance: ethers.utils.parseUnits(\n      item.balance.toFixed(item.decimals).toString(),\n      item.decimals\n    ).toString(),\n    nativeRate\n  }\n}\n\nexport function FeeSelector({ disabled, signer, estimation, network, setEstimation, feeSpeed, setFeeSpeed, onDismiss, isGasTankEnabled }) {\n\n  if (!estimation) return (<Loading />)\n  // Only check for insufficient fee in relayer mode (.feeInUSD is available)\n  // Otherwise we don't care whether the user has enough for fees, their signer wallet will take care of it\n  const insufficientFee = estimation && estimation.feeInUSD\n    && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation, isGasTankEnabled, network)\n  if (estimation && !estimation.success) return (!checkIfDAppIncompatible(estimation.message) ?\n    <FailingTxn\n      message={<>The current transaction batch cannot be sent because it will fail: {mapTxnErrMsg(estimation.message)}</>}\n      tooltip={getErrHint(estimation.message)}\n    /> : <DAppIncompatibilityWarningMsg \n            title={'Unable to send transaction'}\n            msg={getErrHint(estimation.message)}\n          />)\n\n  if (!estimation.feeInNative) return null\n  if (estimation && !estimation.feeInUSD && estimation.gasLimit < 40000) {\n    return (<div>\n      <b>WARNING:</b> Fee estimation unavailable when you're doing your first account transaction and you are not connected to a relayer. You will pay the fee from <b>{signer.address}</b>, make sure you have {network.nativeAssetSymbol} there.\n    </div>)\n  }\n  if (estimation && estimation.feeInUSD && !estimation.remainingFeeTokenBalances) {\n    return (<div className='balance-error'>Internal error: fee balances not available. This should never happen, please report this on help.ambire.com</div>)\n  }\n\n  const { nativeAssetSymbol } = network\n  const gasTankTokens = estimation.gasTank?.map(mapGasTankTokens(estimation.nativeAssetPriceInUSD))\n  const tokens = (isGasTankEnabled && gasTankTokens?.length)\n    ? gasTankTokens\n    // fallback to the native asset if fee tokens cannot be retrieved for wh  atever reason\n    : estimation.remainingFeeTokenBalances || [{ symbol: nativeAssetSymbol, decimals: 18, address: '0x0000000000000000000000000000000000000000' }]\n\n  const onFeeCurrencyChange = ({ value, label}) => {\n    const token = tokens.find(({ address, symbol }) => (address === value) && (symbol === label))\n    setEstimation({ ...estimation, selectedFeeToken: token })\n  }\n\n  const currenciesItems = tokens\n    // NOTE: filter by slowest and then will disable the higher fees speeds otherwise \n    // it will just hide the token from the select\n    .sort((a, b) =>\n    (isTokenEligible(b, SPEEDS[0], estimation, isGasTankEnabled, network) - isTokenEligible(a, SPEEDS[0], estimation, isGasTankEnabled, network))\n    || (DISCOUNT_TOKENS_SYMBOLS.indexOf(b.symbol) - DISCOUNT_TOKENS_SYMBOLS.indexOf(a.symbol))\n    || ((b.discount || 0) - (a.discount || 0))\n    || a?.symbol.toUpperCase().localeCompare(b?.symbol.toUpperCase())\n  )\n    .map(({ address, symbol, discount, network: tokenNetwork, icon, ...rest }) => ({\n      disabled: !isTokenEligible({address, symbol, discount, ...rest }, SPEEDS[0], estimation, isGasTankEnabled, network),\n      icon: icon || (address ? getTokenIcon(isGasTankEnabled ? tokenNetwork : network.id, address) : null),\n      label: symbol,\n      value: address || symbol,\n      ...(discount ? {\n        extra: <div className='discount'> - {discount * 100} <FaPercentage /> </div>\n      } : {})\n    }))\n\n  const { discount = 0, symbol, nativeRate = null, decimals } = estimation.selectedFeeToken || {}\n\n  if (insufficientFee) {\n    const sufficientSpeeds = SPEEDS.filter((speed, i) => isTokenEligible(estimation.selectedFeeToken, speed, estimation, isGasTankEnabled, network))\n    const highestSufficientSpeed = sufficientSpeeds[sufficientSpeeds.length - 1]\n    setFeeSpeed(highestSufficientSpeed)\n  }\n\n  const {\n    feeInFeeToken,\n    feeInUSD,\n    savedGas,\n  } = getFeesData(estimation.selectedFeeToken, estimation, feeSpeed, isGasTankEnabled, network)\n\n  const discountInFeeToken = getDiscountApplied(feeInFeeToken, discount)\n\n\n  // Fees with no discounts applied\n  const baseFeeInFeeToken = feeInFeeToken + discountInFeeToken\n\n\n  return (<>\n    {insufficientFee ? <Alert\n        className={styles.alert}\n        type=\"danger\"\n        title=\"Insufficient balance for the fee.\"\n        text={`Accepted tokens: ${(estimation.remainingFeeTokenBalances || []).map(x => x.symbol).join(', ')}\n          ${ isGasTankEnabled ? 'Disable your Gas Tank to use the default fee tokens.' : ''}\n        `}\n        iconNextToTitle={true}\n      /> : <FeeCurrencySelect \n        estimation={estimation}\n        disabled={disabled}\n        currenciesItems={currenciesItems}\n        onFeeCurrencyChange={onFeeCurrencyChange}\n      />\n    }\n\n    <WalletDiscountBanner \n      selectedFeeToken={estimation.selectedFeeToken}\n      currenciesItems={currenciesItems}\n      tokens={tokens}\n      estimation={estimation}\n      onFeeCurrencyChange={onFeeCurrencyChange}\n      onDismiss={onDismiss}\n      feeSpeed={feeSpeed}\n      isGasTankEnabled={isGasTankEnabled}\n      network={network}\n      DISCOUNT_TOKENS_SYMBOLS={DISCOUNT_TOKENS_SYMBOLS}\n      walletDiscountBlogpost={walletDiscountBlogpost}\n    />\n\n    <div className={styles.title}>\n      <span>Transaction Speed</span>\n      { network.isGasTankAvailable && \n        <span>Gas Tank: { isGasTankEnabled ? \n          (<span className={styles.gasTankEnabled}>Enabled</span>) : \n          (<span className={styles.gasTankDisabled}>Disabled</span>)}\n        </span> \n      }\n    </div>\n\n    <SelectFeeType \n      estimation={estimation}\n      setEstimation={setEstimation}\n      isGasTankEnabled={isGasTankEnabled}\n      network={network}\n      discount={discount}\n      baseFeeInFeeToken={baseFeeInFeeToken}\n      getDiscountApplied={getDiscountApplied}\n      SPEEDS={SPEEDS}\n      symbol={symbol}\n      nativeRate={nativeRate}\n      disabled={disabled}\n      decimals={decimals}\n      feeSpeed={feeSpeed}\n      setFeeSpeed={setFeeSpeed}\n      nativeAssetSymbol={nativeAssetSymbol}\n    />\n    \n    <FeesBreakdown\n      discount={discount}\n      estimation={estimation}\n      feeInUSD={feeInUSD}\n      baseFeeInFeeToken={baseFeeInFeeToken}\n      savedGas={savedGas}\n      isGasTankEnabled={isGasTankEnabled}\n      decimals={decimals}\n      walletDiscountBlogpost={walletDiscountBlogpost}\n      DISCOUNT_TOKENS_SYMBOLS={DISCOUNT_TOKENS_SYMBOLS}\n    />\n\n    {!estimation.feeInUSD ? <Alert\n        className={styles.alert}\n        type=\"warning\"\n        title=\"Warning\"\n        text={`\n          Paying fees in tokens other than ${nativeAssetSymbol} is unavailable because you are not connected to a relayer.\n          You will pay the fee from ${signer.address}\n        `}\n        iconNextToTitle={true}\n      /> : null}\n  </>)\n}","import * as blockies from 'blockies-ts'\n\nimport AccountAndNetwork from './AccountAndNetwork/AccountAndNetwork'\nimport { FeeSelector } from 'components/SendTransaction/DetailsPanel/Options/FeeSelector/FeeSelector'\n\nimport styles from './Options.module.scss'\n\nconst Options = ({\n  account,\n  network,\n  estimation,\n  signingStatus,\n  feeSpeed,\n  setFeeSpeed,\n  setEstimation,\n  onDismiss,\n  relayerURL,\n  bundle,\n  canProceed,\n  currentAccGasTankState\n}) => {\n  const accountAvatar = blockies.create({ seed: account.id }).toDataURL();\n\n  return (\n    <div className={styles.wrapper}>\n      <AccountAndNetwork\n        account={account}\n        accountAvatar={accountAvatar}\n        network={network}\n      />\n      {/* Only lock the fee selector when the bundle is locked too - to make sure that the fee really is set in stone (won't change on the next getFinalBundle()) */}\n      {canProceed && (\n        <FeeSelector\n          disabled={\n            signingStatus &&\n            signingStatus.finalBundle &&\n            !(estimation && !estimation.success)\n          }\n          signer={bundle.signer}\n          estimation={estimation}\n          setEstimation={setEstimation}\n          network={network}\n          feeSpeed={feeSpeed}\n          setFeeSpeed={setFeeSpeed}\n          onDismiss={onDismiss}\n          isGasTankEnabled={currentAccGasTankState.isEnabled && !!relayerURL}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default Options","import cn from 'classnames'\n\nimport { Button, Loading } from 'components/common'\n\nimport { MdInfo, MdOutlineClose, MdWarning } from 'react-icons/md'\n\nimport styles from './Replace.module.scss'\n\nconst Replace = ({\n  isInt,\n  mustReplaceNonce,\n  canProceed,\n  rejectTxn\n}) => {\n  // NOTE there's a case in which both \"This transaction will replace the current pending transaction\" and the checkbox will render - when we're doing a modify\n  // If we are replacing a txn, look at whether canProceed is true\n  return isInt(mustReplaceNonce) && (\n      <>\n        {\n          // We always warn the user if they're trying to replace a particular transaction\n          // This doesn't need to show when replacing is optional\n          (canProceed || canProceed === null) && (\n            <div className={cn(styles.replaceInfo, styles.warning)}>\n              <MdWarning />\n              <span>\n                This transaction bundle will replace the one that's\n                currently pending.\n              </span>\n            </div>\n          )\n        }\n  \n        {\n          // canProceed equals null means we don't have data yet\n          canProceed === null && (\n            <div>\n              <Loading />\n            </div>\n          )\n        }\n  \n        {canProceed === false && (\n          <div className={styles.wrapper}>\n            <div className={cn(styles.replaceInfo, styles.info)}>\n              <MdInfo />\n              <span>\n                The transaction you're trying to replace has already been\n                confirmed\n              </span>\n            </div>\n            <div className={styles.buttons}>\n              <Button\n                clear\n                icon={<MdOutlineClose />}\n                type=\"button\"\n                className={styles.button}\n                onClick={rejectTxn}\n              >\n                Close\n              </Button>\n            </div>\n          </div>\n        )}\n      </>\n  )\n}\n\nexport default Replace","import { Interface, hexlify } from 'ethers/lib/utils'\nconst IdentityInterface = new Interface(require('adex-protocol-eth/abi/Identity5.2'))\nconst FactoryInterface = new Interface(require('adex-protocol-eth/abi/IdentityFactory5.2'))\n\nexport async function sendNoRelayer ({ finalBundle, account, network, wallet, estimation, feeSpeed, provider }) {\n    const { signer } = finalBundle\n    // @TODO: in case we need deploying, run using deployAndCall pipeline with signed msgs\n    // @TODO: quickAccManager\n    if (signer.quickAccManager) throw new Error('quickAccManager not supported in relayerless mode yet')\n    // currently disabled quickAccManager cause 1) we don't have a means of getting the second sig 2) we still have to sign txes so it's inconvenient\n    // if (signer.quickAccManager) await finalBundle.sign(wallet)\n    //const [to, data] = signer.quickAccManager ? [signer.quickAccManager, QuickAccManagerInterface.encodeFunctionData('send', [finalBundle.identity, [signer.timelock, signer.one, signer.two], [false, finalBundle.signature, '0x']])] :\n\n    // NOTE: just adding values to gasLimit is bad because 1) they're hardcoded estimates\n    // and 2) the fee displayed in the UI does not reflect that\n    const isDeployed = await provider.getCode(finalBundle.identity).then(code => code !== '0x')\n    let gasLimit\n    let to, data\n    if (isDeployed) {\n      gasLimit = estimation.gasLimit + 20000\n      to = finalBundle.identity\n      data = IdentityInterface.encodeFunctionData('executeBySender', [finalBundle.txns])\n    } else {\n      await finalBundle.getNonce(provider)\n      // just some hardcoded value to make the signing pass\n      finalBundle.gasLimit = 400000\n      await finalBundle.sign(wallet)\n      to = account.identityFactoryAddr\n      data = FactoryInterface.encodeFunctionData('deployAndExecute', [account.bytecode, account.salt, finalBundle.txns, finalBundle.signature])\n      gasLimit = (await provider.estimateGas({ to, data, from: signer.address })).toNumber() + 20000\n    }\n\n    const txn = {\n      from: signer.address,\n      to, data,\n      gas: hexlify(gasLimit),\n      gasPrice: hexlify(Math.floor(estimation.feeInNative[feeSpeed] / estimation.gasLimit * 1e18)),\n      nonce: hexlify(await provider.getTransactionCount(signer.address))\n    }\n    try {\n      let txId\n      if (!wallet.sendTransaction) {\n        // HW wallets which only sign\n        const signed = await wallet.signTransaction(txn)\n        txId = (await provider.sendTransaction(signed)).hash\n      } else {\n        // web3 injectors which can't sign, but can sign+send\n        // they also don't like the gas arg they fully control the chain ID\n        if (wallet.provider) {\n          const { chainId } = await wallet.provider.getNetwork()\n          if (network.chainId !== chainId) throw new Error(`Connected to the wrong network: please switch to ${network.name}`)\n          txId = (await wallet.sendTransaction({ from: txn.from, to: txn.to, data: txn.data, gasPrice: txn.gasPrice, nonce: txn.nonce })).hash\n        } else { // implementation of sendTransaction in getWallet\n          txId = (await wallet.sendTransaction({ from: txn.from, to: txn.to, data: txn.data, gasPrice: txn.gasPrice, gas: txn.gas, nonce: txn.nonce, chainId: network.chainId })).hash\n        }\n\n      }\n      return { success: true, txId }\n    } catch(e) {\n      if (e.code === 'INSUFFICIENT_FUNDS') throw new Error(`Insufficient gas fees: you need to have ${network.nativeAssetSymbol} on ${signer.address}`)\n      throw e\n    }\n  }\n","import { useState, useRef, useEffect, useCallback } from 'react'\nimport { Wallet, ethers } from \"ethers\";\nimport { Interface } from 'ethers/lib/utils';\nimport accountPresets from \"ambire-common/src/constants/accountPresets\";\nimport { Bundle } from \"adex-protocol-eth/js\";\nimport cn from 'classnames'\n\nimport { getWallet } from \"lib/getWallet\";\nimport { fetchPost } from \"lib/fetch\";\nimport { getProvider } from \"lib/provider\";\n\nimport { useToasts } from 'hooks/toasts';\nimport { Button, Loading, TextInput } from 'components/common'\nimport { isTokenEligible } from 'components/SendTransaction/helpers'\nimport { sendNoRelayer } from \"components/SendTransaction/noRelayer\";\nimport { getFeesData, toHexAmount } from \"components/SendTransaction/helpers\";\n\nimport styles from './Actions.module.scss'\n\nconst ERC20 = new Interface(require(\"adex-protocol-eth/abi/ERC20\"));\n\nfunction getErrorMessage(e) {\n  if (e && e.message === \"NOT_TIME\") {\n    return \"Your 72 hour recovery waiting period still hasn't ended. You will be able to use your account after this lock period.\";\n  } else if (e && e.message === \"WRONG_ACC_OR_NO_PRIV\") {\n    return \"Unable to sign with this email/password account. Please contact support.\";\n    // NOTE: is INVALID_SIGNATURE even a real error?\n  } else if (e && e.message === \"INVALID_SIGNATURE\") {\n    return \"Invalid signature. This may happen if you used password/derivation path on your hardware wallet.\";\n  } else if (e && e.message === \"INSUFFICIENT_PRIVILEGE\") {\n    return \"Wrong signature. This may happen if you used password/derivation path on your hardware wallet.\";\n  } else {\n    return e.message || e;\n  }\n}\n\nconst Actions = ({ \n  signingStatus,\n  setSigningStatus,\n  account,\n  bundle,\n  isMounted,\n  onDismiss,\n  network,\n  relayerURL,\n  estimation,\n  feeSpeed,\n  isInt,\n  replaceTx,\n  cancelSigning,\n  rejectTxn,\n  isGasTankEnabled,\n  currentAccGasTankState,\n  onBroadcastedTxn,\n  resolveMany\n  }) => {\n  const { addToast } = useToasts()\n  const [quickAccCredentials, setQuickAccCredentials] = useState({ code: '', passphrase: '' })\n  // reset this every time the signing status changes\n  useEffect(() => !signingStatus && setQuickAccCredentials(prev => ({ ...prev, code: '' })), [signingStatus])\n\n  const form = useRef(null)\n\n  const rejectButton = rejectTxn && (\n    // WARNING: DO NOT remove type='button' here, it indicates that this button is not a submit button in the <form>\n    // if it is, pressing Enter will reject the transaction rather than submit it\n    <Button danger type='button' className={cn(styles.button, styles.danger)} onClick={rejectTxn}>Reject</Button>\n  )\n\n  const approveTxn = ({ quickAccCredentials }) => {\n    if (signingStatus && signingStatus.inProgress) return;\n    setSigningStatus(signingStatus || { inProgress: true });\n\n    if (account.signerExtra && account.signerExtra.type === \"ledger\") {\n      addToast(\"Please confirm this transaction on your Ledger device.\", {\n        timeout: 10000,\n      });\n    }\n\n    if (account.signerExtra && account.signerExtra.type === \"Lattice\") {\n      addToast(\"Please confirm this transaction on your Lattice device.\", {\n        timeout: 10000,\n      });\n    }\n\n    const requestIds = bundle.requestIds;\n    const approveTxnPromise = bundle.signer.quickAccManager\n      ? approveTxnImplQuickAcc({ quickAccCredentials })\n      : approveTxnImpl();\n    approveTxnPromise\n      .then((bundleResult) => {\n        // special case for approveTxnImplQuickAcc: when a user interaction prevents the operation from completing\n        if (!bundleResult) return;\n\n        // do not to call this after onDimiss, cause it might cause state to be changed post-unmount\n        if (isMounted.current) setSigningStatus(null);\n\n        // Inform everything that's waiting for the results (eg WalletConnect)\n        const skipResolve =\n          !bundleResult.success &&\n          bundleResult.message &&\n          bundleResult.message.match(/underpriced/i);\n        if (!skipResolve && requestIds)\n          resolveMany(requestIds, {\n            success: bundleResult.success,\n            result: bundleResult.txId,\n            message: bundleResult.message,\n          });\n\n        if (bundleResult.success) {\n          onBroadcastedTxn(bundleResult.txId);\n          onDismiss();\n        } else {\n          // to force replacementBundle to be null, so it's not filled from previous state change in App.js in useEffect\n          // basically close the modal if the txn was already mined\n          if (bundleResult.message.includes(\"was already mined\")) {\n            onDismiss();\n          }\n          addToast(`Transaction error: ${getErrorMessage(bundleResult)}`, {\n            error: true,\n          }); //'unspecified error'\n        }\n      })\n      .catch((e) => {\n        if (isMounted.current) setSigningStatus(null);\n        console.error(e);\n        if (e && e.message.includes(\"must provide an Ethereum address\")) {\n          addToast(\n            `Signing error: not connected with the correct address. Make sure you're connected with ${bundle.signer.address}.`,\n            { error: true }\n          );\n        } else if (e && e.message.includes(\"0x6b0c\")) {\n          // not sure if that's actually the case with this hellish error, but after unlocking the device it no longer appeared\n          // however, it stopped appearing after that even if the device is locked, so I'm not sure it's related...\n          addToast(\n            `Ledger: unknown error (0x6b0c): is your Ledger unlocked and in the Ethereum application?`,\n            { error: true }\n          );\n        } else {\n          addToast(`Signing error: ${getErrorMessage(e)}`, { error: true });\n        }\n      });\n  };\n\n  const approveTxnImpl = async () => {\n    if (!estimation) throw new Error(\"no estimation: should never happen\");\n\n    const finalBundle = getFinalBundle();\n    const provider = getProvider(network.id);\n    const signer = finalBundle.signer;\n\n    // a bit redundant cause we already called it at the beginning of approveTxn, but\n    // we need to freeze finalBundle in the UI in case signing takes a long time (currently only to freeze the fee selector)\n    setSigningStatus({ inProgress: true, finalBundle });\n\n    const wallet = getWallet({\n      signer,\n      signerExtra: account.signerExtra,\n      chainId: network.chainId,\n    });\n\n    if (relayerURL) {\n      // Temporary way of debugging the fee cost\n      // const initialLimit = finalBundle.gasLimit - getFeePaymentConsequences(estimation.selectedFeeToken, estimation).addedGas\n      // finalBundle.estimate({ relayerURL, fetch }).then(estimation => console.log('fee costs: ', estimation.gasLimit - initialLimit), estimation.selectedFeeToken).catch(console.error)\n      await finalBundle.sign(wallet);\n      return await finalBundle.submit({ relayerURL, fetch });\n    } else {\n      return await sendNoRelayer({\n        finalBundle,\n        account,\n        network,\n        wallet,\n        estimation,\n        feeSpeed,\n        provider,\n      });\n    }\n  };\n\n  const getFinalBundle = useCallback(() => {\n    if (!relayerURL) {\n      return new Bundle({\n        ...bundle,\n        gasLimit: estimation.gasLimit,\n      });\n    }\n\n    const feeToken = estimation.selectedFeeToken;\n\n    const {\n      feeInNative,\n      // feeInUSD, // don't need fee in USD for stables as it will work with feeInFeeToken\n      // Also it can be stable but not in USD\n      feeInFeeToken,\n      addedGas,\n    } = getFeesData(\n      feeToken,\n      estimation,\n      feeSpeed,\n      currentAccGasTankState.isEnabled,\n      network\n    );\n    const feeTxn =\n      feeToken.symbol === network.nativeAssetSymbol\n        ? // TODO: check native decimals\n          [accountPresets.feeCollector, toHexAmount(feeInNative, 18), \"0x\"]\n        : [\n            feeToken.address,\n            \"0x0\",\n            ERC20.encodeFunctionData(\"transfer\", [\n              accountPresets.feeCollector,\n              toHexAmount(feeInFeeToken, feeToken.decimals),\n            ]),\n          ];\n\n    const nextFreeNonce = estimation.nextNonce?.nonce;\n    const nextNonMinedNonce = estimation.nextNonce?.nextNonMinedNonce;\n    // If we've passed in a bundle, use it's nonce (when using a replacementBundle); else, depending on whether we want to replace the current pending bundle,\n    // either use the next non-mined nonce or the next free nonce\n    const nonce = isInt(bundle.nonce)\n      ? bundle.nonce\n      : replaceTx\n      ? nextNonMinedNonce\n      : nextFreeNonce;\n\n    if (!!currentAccGasTankState.isEnabled) {\n      let gasLimit;\n      if (bundle.txns.length > 1)\n        gasLimit = estimation.gasLimit + (bundle.extraGas || 0);\n      else gasLimit = estimation.gasLimit;\n\n      let value;\n      if (feeToken.address === \"0x0000000000000000000000000000000000000000\")\n        value = feeInNative;\n      else {\n        const fToken = estimation.remainingFeeTokenBalances.find(\n          (i) => i.id === feeToken.id\n        );\n        value = fToken && estimation.feeInNative[feeSpeed] * fToken.nativeRate;\n      }\n\n      return new Bundle({\n        ...bundle,\n        gasTankFee: {\n          assetId: feeToken.id,\n          value: ethers.utils\n            .parseUnits(value.toFixed(feeToken.decimals), feeToken.decimals)\n            .toString(),\n        },\n        txns: [...bundle.txns],\n        gasLimit,\n        nonce,\n      });\n    }\n\n    return new Bundle({\n      ...bundle,\n      txns: [...bundle.txns, feeTxn],\n      gasTankFee: null,\n      gasLimit: estimation.gasLimit + addedGas + (bundle.extraGas || 0),\n      nonce,\n    });\n  }, [\n    relayerURL,\n    estimation,\n    feeSpeed,\n    currentAccGasTankState.isEnabled,\n    network,\n    bundle,\n    replaceTx,\n    isInt,\n  ]);\n\n  const approveTxnImplQuickAcc = async ({ quickAccCredentials }) => {\n    if (!estimation) throw new Error(\"no estimation: should never happen\");\n    if (!relayerURL)\n      throw new Error(\n        \"Email/Password account signing without the relayer is not supported yet\"\n      );\n\n    const finalBundle =\n      (signingStatus && signingStatus.finalBundle) || getFinalBundle();\n    const signer = finalBundle.signer;\n\n    const canSkip2FA =\n      signingStatus && signingStatus.confCodeRequired === \"notRequired\";\n    const { signature, success, message, confCodeRequired } = await fetchPost(\n      `${relayerURL}/second-key/${bundle.identity}/${network.id}/sign`,\n      {\n        signer,\n        txns: finalBundle.txns,\n        nonce: finalBundle.nonce,\n        gasLimit: finalBundle.gasLimit,\n        ...(!canSkip2FA && {\n          code: quickAccCredentials && quickAccCredentials.code,\n        }),\n        // This can be a boolean but it can also contain the new signer/primaryKeyBackup, which instructs /second-key to update acc upon successful signature\n        recoveryMode: finalBundle.recoveryMode,\n        canSkip2FA: canSkip2FA,\n      }\n    );\n    if (!success) {\n      if (!message)\n        throw new Error(`Secondary key: no success but no error message`);\n      if (message.includes(\"invalid confirmation code\")) {\n        addToast(\"Unable to sign: wrong confirmation code\", { error: true });\n        return;\n      }\n      throw new Error(`Secondary key error: ${message}`);\n    }\n    if (confCodeRequired) {\n      setSigningStatus({ quickAcc: true, finalBundle, confCodeRequired });\n    } else {\n      if (!signature)\n        throw new Error(`QuickAcc internal error: there should be a signature`);\n      if (!account.primaryKeyBackup)\n        throw new Error(\n          `No key backup found: you need to import the account from JSON or login again.`\n        );\n      setSigningStatus({\n        quickAcc: true,\n        inProgress: true,\n        confCodeRequired: canSkip2FA ? \"notRequired\" : undefined,\n      });\n      if (!finalBundle.recoveryMode) {\n        // Make sure we let React re-render without blocking (decrypting and signing will block)\n        await new Promise((resolve) => setTimeout(resolve, 0));\n        const pwd = quickAccCredentials.passphrase || alert(\"Enter password\");\n        const wallet = await Wallet.fromEncryptedJson(\n          JSON.parse(account.primaryKeyBackup),\n          pwd\n        );\n        await finalBundle.sign(wallet);\n      } else {\n        // set both .signature and .signatureTwo to the same value: the secondary signature\n        // this will trigger a timelocked txn\n        finalBundle.signature = signature;\n      }\n      finalBundle.signatureTwo = signature;\n      return await finalBundle.submit({ relayerURL, fetch });\n    }\n  };\n\n  const insufficientFee = estimation && estimation.feeInUSD\n    && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation, isGasTankEnabled, network)\n  const willFail = (estimation && !estimation.success) || insufficientFee\n  if (willFail) {\n    return (<div className={styles.buttons}>\n      {rejectButton}\n    </div>)\n  }\n\n  const signButtonLabel = signingStatus && signingStatus.inProgress ?\n    <><Loading/>Signing...</>\n    : 'Sign and Send'\n\n  const isRecoveryMode = signingStatus && signingStatus.finalBundle && signingStatus.finalBundle.recoveryMode\n  if (signingStatus && signingStatus.quickAcc) {\n    return (<div className={styles.wrapper}>\n      {\n        signingStatus.confCodeRequired ?\n          <div className={styles.confirmationCodeInfo}>\n            <div className={styles.confirmationCodeInfoTitle}>Confirmation</div>\n            <div className={styles.confirmationCodeInfoMessage}>\n              {signingStatus.confCodeRequired === 'otp' ? <p>Please enter your OTP code and your password.</p> : null}\n              {signingStatus.confCodeRequired === 'email' ?\n                (isRecoveryMode\n                  ? <p>A confirmation code was sent to your email. Please enter it to initiate the recovery.</p>\n                  : <p>A confirmation code was sent to your email. Please enter it along with your password.</p>)\n                      : null\n\t      }\n            </div>\n          </div>\n          :\n          null\n      }\n  \n      <form ref={form} className={styles.quickAccSigningForm} onSubmit={e => { e.preventDefault() }}>\n        {signingStatus.confCodeRequired === 'notRequired' &&\n          <p className={styles.code2faNotRequiredMsg}>You already sent 3 or more transactions to this address, confirmation code is not needed.</p>\n        }\n        <div className={styles.inputsContainer}>\n          <TextInput\n            password\n            required\n            minLength={3}\n            placeholder='Password'\n            value={quickAccCredentials.passphrase}\n            style={isRecoveryMode ? { visibility: 'hidden' } : {} }\n            disabled={isRecoveryMode}\n            onChange={value => setQuickAccCredentials({ ...quickAccCredentials, passphrase: value })}\n            className={styles.textInput}\n          ></TextInput>\n          {/* Changing the autoComplete prop to a random string seems to disable it in more cases */}\n          {signingStatus.confCodeRequired !== 'notRequired' &&\n            <TextInput\n              pattern='[0-9]+'\n              title='Confirmation code should be 6 digits'\n              autoComplete='nope'\n              required minLength={6} maxLength={6}\n              placeholder={signingStatus.confCodeRequired === 'otp' ? 'Authenticator OTP code' : 'Confirmation code'}\n              value={quickAccCredentials.code}\n              onChange={value => setQuickAccCredentials({ ...quickAccCredentials, code: value })}\n              className={styles.textInput}\n            ></TextInput>\n          }\n        </div>\n        <div className={styles.buttons}>\n          <Button\n            danger\n            disabled={signingStatus && signingStatus.inProgress}\n            type='button'\n            className={cn(styles.button, styles.danger)}\n            onClick={cancelSigning}\n          >\n            Cancel\n          </Button>\n          <Button\n            primaryGradient\n            className={cn(styles.button, styles.confirm)}\n            onClick={() => {\n              if (!form.current.checkValidity()) return\n              approveTxn({ quickAccCredentials })\n            }}\n          >\n            { signingStatus && signingStatus.inProgress ? <Loading/> : 'Confirm'}\n          </Button>\n        </div>\n      </form>\n    </div>)\n  }\n\n  return (<div className={styles.buttons}>\n      {rejectButton}\n      <Button primaryGradient className={cn(styles.button, styles.confirm)} disabled={!estimation || signingStatus} onClick={approveTxn}>\n        {signButtonLabel}\n      </Button>\n  </div>)\n}\n\nexport default Actions","import { Alert } from 'components/common';\nimport FailingTxn from \"components/SendTransaction/DetailsPanel/FailingTxn/FailingTxn\";\nimport Actions from \"./Actions/Actions\";\n\nimport styles from './ActionsWrapper.module.scss'\n\nconst ActionsWrapper = ({\n  signingStatus,\n  setSigningStatus,\n  account,\n  bundle,\n  isMounted,\n  onDismiss,\n  network,\n  relayerURL,\n  estimation,\n  feeSpeed,\n  isInt,\n  replaceTx,\n  rejectTxn,\n  currentAccGasTankState,\n  onBroadcastedTxn,\n  resolveMany,\n  canProceed\n}) => {\n\n  return canProceed && (\n    <div>\n      {estimation &&\n      estimation.success &&\n      estimation.isDeployed === false &&\n      bundle.gasLimit ? (\n      <Alert\n        className={styles.firstTransactionAlert}\n        type=\"info\"\n        title=\"Note\"\n        text={`\n          Because this is your first Ambire transaction, this fee is \n          ${((60000 / bundle.gasLimit) * 100).toFixed()}% higher than usual\n          because we have to deploy your smart wallet. Subsequent\n          transactions will be cheaper\n        `}\n        iconNextToTitle={true}\n      />\n      ) : null}\n\n      {bundle.signer.quickAccManager && !relayerURL ? (\n        <FailingTxn message=\"Signing transactions with an email/password account without being connected to the relayer is unsupported.\" />\n      ) : (\n        <div>\n          <Actions\n            estimation={estimation}\n            rejectTxn={rejectTxn}\n            cancelSigning={() => setSigningStatus(null)}\n            signingStatus={signingStatus}\n            setSigningStatus={setSigningStatus}\n            feeSpeed={feeSpeed}\n            isGasTankEnabled={\n              currentAccGasTankState.isEnabled && !!relayerURL\n            }\n            network={network}\n            account={account}\n            bundle={bundle}\n            isMounted={isMounted}\n            onDismiss={onDismiss}\n            relayerURL={relayerURL}\n            isInt={isInt}\n            replaceTx={replaceTx}\n            currentAccGasTankState={currentAccGasTankState}\n            onBroadcastedTxn={onBroadcastedTxn}\n            resolveMany={resolveMany}\n          />\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default ActionsWrapper","import { useState } from \"react\";\nimport cn from \"classnames\";\n\nimport { Checkbox, Panel } from \"components/common\";\nimport Options from \"./Options/Options\";\nimport Replace from \"./Replace/Replace\";\nimport ActionsWrapper from \"./ActionsWrapper/ActionsWrapper\";\n\nconst DetailsPanel = ({\n  estimation,\n  setEstimation,\n  network,\n  bundle,\n  relayerURL,\n  feeSpeed,\n  setFeeSpeed,\n  account,\n  signingStatus,\n  isInt,\n  setSigningStatus,\n  resolveMany,\n  onDismiss,\n  mustReplaceNonce,\n  replaceByDefault,\n  isMounted,\n  currentAccGasTankState,\n  REJECT_MSG,\n  onBroadcastedTxn,\n  panelClassName,\n}) => {\n  const [replaceTx, setReplaceTx] = useState(!!replaceByDefault);\n\n  // The final bundle is used when signing + sending it\n  // the bundle before that is used for estimating\n\n  const rejectTxn = () => {\n    onDismiss();\n    bundle.requestIds &&\n      resolveMany(bundle.requestIds, { message: REJECT_MSG });\n  };\n\n  // `mustReplaceNonce` is set on speedup/cancel, to prevent the user from broadcasting the txn if the same nonce has been mined\n  const canProceed = isInt(mustReplaceNonce)\n    ? isInt(estimation?.nextNonce?.nextNonMinedNonce)\n      ? mustReplaceNonce >= estimation?.nextNonce?.nextNonMinedNonce\n      : null // null = waiting to get nonce data from relayer\n    : true;\n\n  return (\n    <Panel className={cn(panelClassName)}>\n      <Options\n        account={account}\n        network={network}\n        estimation={estimation}\n        signingStatus={signingStatus}\n        feeSpeed={feeSpeed}\n        setFeeSpeed={setFeeSpeed}\n        setEstimation={setEstimation}\n        onDismiss={onDismiss}\n        relayerURL={relayerURL}\n        bundle={bundle}\n        canProceed={canProceed}\n        currentAccGasTankState={currentAccGasTankState}\n      />\n      <Replace\n        isInt={isInt}\n        mustReplaceNonce={mustReplaceNonce}\n        canProceed={canProceed}\n        rejectTxn={rejectTxn}\n      />\n\n      {\n        // If there's `bundle.nonce` set, it means we're cancelling or speeding up, so this shouldn't even be visible\n        // We also don't show this in any case in which we're forced to replace a particular transaction (mustReplaceNonce)\n        !isInt(bundle.nonce) &&\n          !isInt(mustReplaceNonce) &&\n          !!estimation?.nextNonce?.pendingBundle && (\n            <div>\n              <Checkbox\n                label=\"Replace currently pending transaction\"\n                checked={replaceTx}\n                onChange={({ target }) => setReplaceTx(target.checked)}\n              />\n            </div>\n          )\n      }\n\n      <ActionsWrapper\n        signingStatus={signingStatus}\n        setSigningStatus={setSigningStatus}\n        account={account}\n        bundle={bundle}\n        isMounted={isMounted}\n        onDismiss={onDismiss}\n        network={network}\n        relayerURL={relayerURL}\n        estimation={estimation}\n        feeSpeed={feeSpeed}\n        isInt={isInt}\n        replaceTx={replaceTx}\n        rejectTxn={rejectTxn}\n        currentAccGasTankState={currentAccGasTankState}\n        onBroadcastedTxn={onBroadcastedTxn}\n        resolveMany={resolveMany}\n        canProceed={canProceed}\n      />\n    </Panel>\n  );\n};\n\nexport default DetailsPanel;\n","import cn from \"classnames\";\n\nimport { Panel, Alert } from \"components/common\";\nimport TxnPreview from \"components/common/TxnPreview/TxnPreview\";\n\nimport styles from \"./TransactionPanel.module.scss\";\n\nconst TransactionPanel = ({\n  bundle,\n  estimation,\n  REJECT_MSG,\n  resolveMany,\n  signingStatus,\n  panelClassName\n}) => {\n  return (\n    <Panel className={cn(panelClassName, styles.wrapper)}>\n      <div\n        className={cn(styles.listOfTransactions, {\n          [styles.frozen]: !bundle.requestIds,\n        })}\n      >\n        {bundle.txns.map((txn, i) => {\n          const isFirstFailing =\n            estimation &&\n            !estimation.success &&\n            estimation.firstFailing === i;\n          // we need to re-render twice per minute cause of DEX deadlines\n          const min = Math.floor(Date.now() / 30000);\n          return (\n            <TxnPreview\n              key={[...txn, i].join(\":\")}\n              // pasing an unused property to make it update\n              minute={min}\n              onDismiss={\n                bundle.requestIds &&\n                (() =>\n                  resolveMany([bundle.requestIds[i]], {\n                    message: REJECT_MSG,\n                  }))\n              }\n              txn={txn}\n              network={bundle.network}\n              account={bundle.identity}\n              isFirstFailing={isFirstFailing}\n              disableDismiss={!!signingStatus}\n              disableDismissLabel={\n                \"Cannot modify transaction bundle while a signing procedure is pending\"\n              }\n              addressLabel={!!bundle.meta && bundle.meta.addressLabel}\n            />\n          );\n        })}\n      </div>\n\n      {bundle.requestIds && <Alert\n        title=\"Degen tip\"\n        type=\"info\"\n        text=\"\n          You can sign multiple transactions at once. Add more\n          transactions to this batch by interacting with a connected\n          dApp right now. Alternatively, you may click 'Back' to add\n          more transactions.\n        \"\n        iconNextToTitle={true}\n      />}\n    </Panel>\n  );\n};\n\nexport default TransactionPanel;\n","import { useEffect, useState, useMemo, useRef } from 'react'\nimport { ethers } from 'ethers'\n\nimport { getProvider } from 'lib/provider'\n\nimport { useToasts } from 'hooks/toasts'\nimport {\n  getDefaultFeeToken,\n  isTokenEligible, makeBundle\n } from './helpers'\nimport TitleBar from './TitleBar/TitleBar'\nimport DetailsPanel from './DetailsPanel/DetailsPanel'\nimport TransactionPanel from './TransactionPanel/TransactionPanel'\n\nimport styles from './SendTransaction.module.scss'\n\n\nconst DEFAULT_SPEED = 'fast'\nconst REESTIMATE_INTERVAL = 15000\n\nconst REJECT_MSG = 'Ambire user rejected the request'\n\n\nconst isInt = x => !isNaN(x) && x !== null\n\nexport default function SendTransaction({ relayerURL, accounts, network, selectedAcc, requests, resolveMany, replacementBundle, replaceByDefault, mustReplaceNonce, onBroadcastedTxn, onDismiss, gasTankState }) {\n  // NOTE: this can be refactored at a top level to only pass the selected account (full object)\n  // keeping it that way right now (selectedAcc, accounts) cause maybe we'll need the others at some point?\n  const account = accounts.find(x => x.id === selectedAcc)\n\n  // Also filtered in App.js, but better safe than sorry here\n  const eligibleRequests = useMemo(() => requests\n    .filter(({ type, chainId, account, txn }) =>\n      type === 'eth_sendTransaction'\n      && chainId === network.chainId\n      && account === selectedAcc\n      && txn && (!txn.from || txn.from.toLowerCase() === selectedAcc.toLowerCase())\n    // we only need to update on change of IDs\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    ), [requests.map(x => x.id).join(','), network.chainId, selectedAcc])\n  const bundle = useMemo(\n    () => replacementBundle || makeBundle(account, network.id, eligibleRequests),\n    [replacementBundle, network.id, account, eligibleRequests]\n  )\n\n  if (!account || !bundle.txns.length) return (<div className={styles.wrapper}>\n    <h3 className={styles.error}>SendTransactions: No account or no requests: should never happen.</h3>\n  </div>)\n  return (<SendTransactionWithBundle\n    relayerURL={relayerURL}\n    bundle={bundle}\n    replaceByDefault={replaceByDefault}\n    mustReplaceNonce={mustReplaceNonce}\n    network={network}\n    account={account}\n    resolveMany={resolveMany}\n    onBroadcastedTxn={onBroadcastedTxn}\n    onDismiss={onDismiss}\n    gasTankState={gasTankState}\n  />)\n}\n\nfunction SendTransactionWithBundle({ bundle, replaceByDefault, mustReplaceNonce, network, account, resolveMany, relayerURL, onBroadcastedTxn, onDismiss, gasTankState }) {\n  const currentAccGasTankState = network.isGasTankAvailable ? \n    gasTankState.find(i => i.account === account.id) : \n    { account: account.id, isEnabled: false }\n  const [estimation, setEstimation] = useState(null)\n  const [signingStatus, setSigningStatus] = useState(false)\n  const [feeSpeed, setFeeSpeed] = useState(DEFAULT_SPEED)\n  const { addToast } = useToasts()\n\n  // Safety check: make sure our input parameters make sense\n  if (isInt(mustReplaceNonce) && !(replaceByDefault || isInt(bundle.nonce))) {\n    console.error('ERROR: SendTransactionWithBundle: mustReplaceNonce is set but we are not using replacementBundle or replaceByDefault')\n    console.error('ERROR: SendTransactionWithBundle: This is a huge logical error as mustReplaceNonce is intended to be used only when we want to replace a txn')\n  }\n\n  // Keep track of unmounted: we need this to not try to modify state after async actions if the component is unmounted\n  const isMounted = useRef(false)\n  useEffect(() => {\n    isMounted.current = true\n    return () => { isMounted.current = false }\n  })\n\n  // Reset the estimation when there are no txns in the bundle\n  useEffect(() => {\n    if (!bundle.txns.length) return\n    setEstimation(null)\n  }, [bundle, setEstimation])\n\n  // Estimate the bundle & reestimate periodically\n  const currentBundle = useRef(null)\n  currentBundle.current = bundle\n  useEffect(() => {    // eslint-disable-next-line react-hooks/exhaustive-deps\n    // We don't need to reestimate the fee when a signing process is in progress\n    if (signingStatus) return\n    // nor when there are no txns in the bundle, if this is even possible\n    if (!bundle.txns.length) return\n\n    // track whether the effect has been unmounted\n    let unmounted = false\n\n    // Note: currently, there's no point of getting the nonce if the bundle already has a nonce\n    // We may want to change this if we make a check if the currently replaced txn was already mined\n    const reestimate = () => (relayerURL\n        ? bundle.estimate({ relayerURL, fetch, replacing: !!bundle.minFeeInUSDPerGas, getNextNonce: true, gasTank: currentAccGasTankState.isEnabled })\n        : bundle.estimateNoRelayer({ provider: getProvider(network.id) })\n    )\n      .then((estimation) => {\n        if (unmounted || bundle !== currentBundle.current) return\n        estimation.relayerless = !relayerURL\n        const gasTankTokens = estimation.gasTank?.map(item => { \n          return { \n            ...item,\n            symbol: item.symbol.toUpperCase(), \n            balance: ethers.utils.parseUnits(item.balance.toFixed(item.decimals).toString(), item.decimals).toString(),\n            nativeRate: item.address === '0x0000000000000000000000000000000000000000' ? null : estimation.nativeAssetPriceInUSD / item.price\n          }\n        })\n        if (currentAccGasTankState.isEnabled) estimation.remainingFeeTokenBalances = gasTankTokens\n        estimation.selectedFeeToken = getDefaultFeeToken(estimation.remainingFeeTokenBalances, network, feeSpeed, estimation, currentAccGasTankState.isEnabled, network)\n        setEstimation(prevEstimation => {\n          if (prevEstimation && prevEstimation.customFee) return prevEstimation\n          if (estimation.remainingFeeTokenBalances) {\n            // If there's no eligible token, set it to the first one cause it looks more user friendly (it's the preferred one, usually a stablecoin)\n            estimation.selectedFeeToken = (\n                prevEstimation\n                && isTokenEligible(prevEstimation.selectedFeeToken, feeSpeed, estimation, currentAccGasTankState.isEnabled, network)\n                && prevEstimation.selectedFeeToken\n              )\n              || getDefaultFeeToken(estimation.remainingFeeTokenBalances, network, feeSpeed, estimation, currentAccGasTankState.isEnabled, network)\n          }\n          return estimation\n        })\n      })\n      .catch(e => {\n        if (unmounted) return\n        console.log('estimation error', e)\n        addToast(`Estimation error: ${e.message || e}`, { error: true })\n      })\n\n    reestimate()\n    const intvl = setInterval(reestimate, REESTIMATE_INTERVAL)\n\n    return () => {\n      unmounted = true\n      clearInterval(intvl)\n    }\n  }, [bundle, setEstimation, feeSpeed, addToast, network, relayerURL, signingStatus, currentAccGasTankState.isEnabled ])\n\n\n  return (\n    <div className={styles.wrapper}>\n      <TitleBar \n        onDismiss={onDismiss}\n      />\n      <div className={styles.container}>\n        <div className={styles.panelWrapper}>\n          <h2 className={styles.panelWrapperTitle}>{ bundle.txns.length } Transaction{ bundle.txns.length > 1 ? 's' : '' } Waiting</h2>\n          <TransactionPanel\n            bundle={bundle}\n            estimation={estimation}\n            REJECT_MSG={REJECT_MSG}\n            resolveMany={resolveMany}\n            signingStatus={signingStatus}\n            panelClassName={styles.panel}\n          />\n        </div>\n        <div className={styles.panelWrapper}>\n          <h2 className={styles.panelWrapperTitle}>Estimation</h2>\n          <DetailsPanel \n            estimation={estimation}\n            setEstimation={setEstimation}\n            network={network}\n            bundle={bundle}\n            relayerURL={relayerURL}\n            feeSpeed={feeSpeed}\n            setFeeSpeed={setFeeSpeed}\n            account={account}\n            signingStatus={signingStatus}\n            setSigningStatus={setSigningStatus}\n            isInt={isInt}\n            resolveMany={resolveMany}\n            onDismiss={onDismiss}\n            mustReplaceNonce={mustReplaceNonce}\n            replaceByDefault={replaceByDefault}\n            isMounted={isMounted}\n            currentAccGasTankState={currentAccGasTankState}\n            REJECT_MSG={REJECT_MSG}\n            onBroadcastedTxn={onBroadcastedTxn}\n            panelClassName={styles.panel}\n          />\n        </div>\n      </div>\n    </div>\n  )\n}\n","const customIcons = {\n    '0xb468a1e5596cfbcdf561f21a10490d99b4bb7b68': 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg/220px-Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg', // TEST Polygon ELMO token,\n    '0x88800092ff476844f74dc2fc427974bbee2794ae': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/ambire_logo_white_bg_250x250.png', // Ambire Wallet Token\n    '0x47cd7e91c3cbaaf266369fe8518345fc4fc12935': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png', //xWallet\n    '0xb6456b57f03352be48bf101b46c1752a0813491a': 'https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/vaporwave-adex-2.png', // ADX-STAKING\n    '0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c': 'https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/ADX-loyalty%40256x256.png', // ADX-LOYALTY\n    '0xec3b10ce9cabab5dbf49f946a623e294963fbb4e': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png', // Polygons test xWallet\n    '0xe9415e904143e42007865e6864f7f632bd054a08': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/Ambire_logo_250x250.png', // Polygons test Wallet\n    '0xade00c28244d5ce17d72e40330b1c318cd12b7c3': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/official-logos/Ambire-AdEx/Ambire_AdEx_Symbol_color_white_bg.png' //ADX-TOKEN\n}\n\nconst zapperStorageTokenIcons = 'https://storage.googleapis.com/zapper-fi-assets/tokens'\n\nexport function getTokenIcon(networkId = '', address = '') {\n    const addr = address.toLowerCase()\n    const net = networkId.toLowerCase()\n    return customIcons[addr] || `${zapperStorageTokenIcons}/${net}/${addr}.png`\n}\n","export function formatFloatTokenAmount(amount, useGrouping = true, maximumFractionDigits = 18) {\n    if (isNaN(amount) || isNaN(parseFloat(amount)) || !(typeof amount === 'number' || typeof amount === 'string')) return amount\n\n    try {\n        const minimumFractionDigits = Math.min(2, maximumFractionDigits || 0)\n        return ((typeof amount === 'number') ? amount : parseFloat(amount))\n            .toLocaleString(undefined,\n                {\n                    useGrouping,\n                    maximumFractionDigits: Math.max(minimumFractionDigits, maximumFractionDigits),\n                    minimumFractionDigits\n                })\n    } catch (err) {\n        console.error(err)\n        return amount\n    }\n}\n\n// Round a floating point number to a specific decimal places, i.e. 1.156 => 1.16\nexport function roundFloatingNumber(number, places = 2) {\n  const decimals = Math.pow(10, places)\n\n  return Math.round((number + Number.EPSILON) * decimals) / decimals\n}\n","import { Client } from 'gridplus-sdk'\nimport { ethers } from 'ethers'\nimport { serialize } from '@ethersproject/transactions'\n\nconst crypto = require('crypto')\nconst HARDENED_OFFSET = 0x80000000\n\nconst getAddressesReqOpts = {\n    startPath: [\n        HARDENED_OFFSET + 44,\n        HARDENED_OFFSET + 60,\n        HARDENED_OFFSET,\n        0,\n        0,\n    ],\n    n: 10,\n}\n\nconst latticeInit = commKey => {\n    const clientConfig = {\n        name: 'Ambire Wallet',\n        crypto: crypto,\n        privKey: commKey,\n    }\n\n    return new Client(clientConfig)\n}\n\nconst latticeConnect = async(client, deviceId) => {\n    return await new Promise((resolve, reject) => {\n        client.connect(deviceId, (err, isPaired) => {\n            if (err) {\n                reject(`Lattice connect: ${err} Or check if the DeviceID is correct.`)\n                return\n            }\n            \n            resolve({ isPaired: !!isPaired, errConnect: false })\n        })\n    }).catch(err => {\n        console.error(err)\n        return { isPaired: false, errConnect: err }\n    })\n}\n\nconst latticePair = async(client, secret) => {\n    return await new Promise((resolve, reject) => {\n        client.pair(secret, (err, hasActiveWallet) => {\n            if (err) {\n                reject(`Lattice connect: ${err}`)\n                return\n            }\n            \n            resolve({ hasActiveWallet, errPair: false })\n        })\n    }).catch(err => {\n        console.error(err)\n        return { hasActiveWallet: false, errPair: err }\n    })\n}\n\nconst latticeGetAddresses = async client => {\n    return await new Promise((resolve, reject) => {\n        client.getAddresses(getAddressesReqOpts, (err, res) => {\n            if (err) {\n                reject(`Lattice get addresses: ${err}`)\n                return\n            }\n\n            if (!res) throw new Error('Lattice could not get the addresses.')\n\n            resolve({res, errGetAddresses: false })\n        })\n    }).catch(err => {\n        console.error(err)\n        return { res: null, errGetAddresses: err }\n    })\n}\n\nconst latticeSignMessage = async(client, hash) => {\n    const dataMsg = {\n        protocol: 'signPersonal',\n        payload: ethers.utils.hexlify(hash),\n        signerPath: [HARDENED_OFFSET+44, HARDENED_OFFSET+60, HARDENED_OFFSET, 0, 0],\n    }\n\n    const signOptsMsg = {\n        currency: 'ETH_MSG',\n        data: dataMsg,\n    }\n\n    \n    return await new Promise((resolve, reject) => {\n        client.sign(signOptsMsg, (err, signedTx) => {\n            if (err) {\n                reject(err)\n                return\n            }\n\n            if (!signedTx) throw new Error('Lattice could not sign the message.')\n            \n            resolve({ signedMsg: '0x' + signedTx.sig.r + signedTx.sig.s + signedTx.sig.v[0].toString(16), errSignMessage: false })  \n        })\n    }).catch(err => {\n        console.error(err)\n        return { signedMsg: null, errSignMessage: err }\n    })\n}\n\nconst latticeSignMessage712 = async(client, message) => {\n    const reqData = {\n        currency: 'ETH_MSG',\n        data: {\n          signerPath: [HARDENED_OFFSET+44, HARDENED_OFFSET+60, HARDENED_OFFSET, 0, 0],\n          protocol: 'eip712', // You must use this string to specify this protocol\n          payload: message\n        }\n      }\n\n    return await new Promise((resolve, reject) => {\n        client.sign(reqData, (err, signedTx) => {\n            if (err) {\n                reject(err)\n                return\n            }\n\n            if (!signedTx) throw new Error('Lattice could not sign the message.')\n            \n            resolve({ signedMsg: '0x' + signedTx.sig.r + signedTx.sig.s + signedTx.sig.v[0].toString(16), errSignMessage: false })  \n        })\n    }).catch(err => {\n        console.error(err)\n        return { signedMsg: null, errSignMessage: err }\n    })\n}\n\nconst latticeSignTransaction = async(client, txn, chainId) => {\n    const { to, data, gas, gasPrice, nonce, value = 0 } = txn\n    const unsignedTxObj = {\n        ...txn,\n        gasLimit: txn.gasLimit || txn.gas,\n        chainId\n    }\n    delete unsignedTxObj.from\n    delete unsignedTxObj.gas\n\n    const txData = {\n        nonce,\n        gasLimit: gas || txn.gasLimit,\n        gasPrice,\n        to,\n        value,\n        data: data || '',\n        // -- m/44'/60'/0'/0/0\n        signerPath: [HARDENED_OFFSET+44, HARDENED_OFFSET+60, HARDENED_OFFSET, 0, 0],\n        chainId,\n        useEIP155: true,\n    }\n\n    const signOpts = {\n        currency: 'ETH',\n        data: txData,\n    }\n\n    \n    return await new Promise((resolve, reject) => {\n        client.sign(signOpts, (err, signedTx) => {\n            if (err) {\n                reject(err)\n                return\n            }\n\n            if (!signedTx) throw new Error('Lattice could not sign the message.')\n            \n            delete unsignedTxObj.v\n            const serializedSigned = serialize(unsignedTxObj, {\n                r: '0x' + signedTx.sig.r,\n                s: '0x' + signedTx.sig.s,\n                v: signedTx.sig.v[0].toString(16)\n            })\n            \n            resolve({ serializedSigned, errSignTxn: false })\n        })\n    }).catch(err => {\n        console.error(err)\n        return { serializedSigned: null, errSignTxn: err }\n    })\n}\n\nexport { \n    latticeInit,\n    latticeConnect,\n    latticePair,\n    latticeGetAddresses,\n    latticeSignMessage,\n    latticeSignMessage712,\n    latticeSignTransaction\n }\n","import TransportWebHID from '@ledgerhq/hw-transport-webhid'\nimport AppEth from '@ledgerhq/hw-app-eth'\nimport { serialize } from '@ethersproject/transactions'\n\nconst EIP_155_CONSTANT = 35\n\nconst ethUtil = require('ethereumjs-util')\nconst HDNode = require('hdkey')\n\nlet connectedDevices = null\n\nexport const PARENT_HD_PATH = \"44'/60'/0'/0\"\n\nasync function getTransport() {\n  connectedDevices = await TransportWebHID.list()\n  if (connectedDevices.length) {\n    if (connectedDevices[0].opened) {\n      return new TransportWebHID(connectedDevices[0])\n    } else { // when transport is still not closed and time between 2 requests is short\n      return TransportWebHID.open(connectedDevices[0])\n    }\n  } else {\n    try {\n      return await TransportWebHID.request()\n    } catch (e) {\n      if (e.message.includes('reading \\'open\\'')) {\n        throw new Error('ledger WebHID request denied')\n      }\n      throw new Error('Could not request WebHID ledger: ' + e.message)\n    }\n  }\n}\n\nexport async function ledgerGetAddresses() {\n  const transport = await getTransport()\n  const accounts = await getAccounts(transport)\n  transport.close()\n\n  return accounts.map(a => a.address)\n}\n\nasync function getAccounts(transport) {\n  const parentKeyDerivationPath = `m/${PARENT_HD_PATH}`\n  let ledgerResponse\n  ledgerResponse = await getAddressInternal(transport, parentKeyDerivationPath).then(o => o).catch(err => {\n    if (err.statusCode === 25871 || err.statusCode === 27404) {\n      throw Error('Please make sure your ledger is unlocked and running the Ethereum app. ' + err.message)\n    } else {\n      throw Error('Could not get address from ledger : ' + err)\n    }\n  })\n\n  const hdKey = new HDNode()\n  hdKey.publicKey = Buffer.from(ledgerResponse.publicKey, 'hex')\n  hdKey.chainCode = Buffer.from(ledgerResponse.chainCode, 'hex')\n  const mainAddress = addressOfHDKey(hdKey)\n\n  const initialDerivedKeyInfo = {\n    hdKey,\n    address: mainAddress,\n    derivationPath: parentKeyDerivationPath,\n    baseDerivationPath: PARENT_HD_PATH,\n  }\n\n  // currently we can't get addrs to match with what appears in MM/Ledger live so only one is derived\n  return calculateDerivedHDKeyInfos(initialDerivedKeyInfo, 1)\n}\n\n\nasync function getAddressInternal(transport, parentKeyDerivationPath) {\n  let timeoutHandle\n  const appEth = new AppEth(transport)\n\n  const ledgerTimeout = new Promise((resolve, reject) => {\n    timeoutHandle = setTimeout(() => {\n      return reject(new Error('Device took too long to respond...'))\n    }, 10000)\n  })\n\n  return Promise.race([\n    appEth.getAddress(parentKeyDerivationPath, false, true),\n    ledgerTimeout\n  ]).then((res) => {\n    clearTimeout(timeoutHandle)\n    return res\n  })\n}\n\nexport async function ledgerSignTransaction(txn, chainId) {\n  const transport = await getTransport()\n\n  const fromAddr = txn.from\n\n  const unsignedTxObj = {\n    ...txn,\n    gasLimit: txn.gasLimit || txn.gas,\n    chainId: chainId\n  }\n  delete unsignedTxObj.from\n  delete unsignedTxObj.gas\n\n  let serializedUnsigned = serialize(unsignedTxObj)\n  const accountsData = await getAccounts(transport)\n\n  //Managing only 1 addr for now\n  const address = accountsData[0].address\n\n  let serializedSigned\n  if (address.toLowerCase() === fromAddr.toLowerCase()) {\n    let rsvResponse\n    try {\n      rsvResponse = await new AppEth(transport).signTransaction(accountsData[0].derivationPath, serializedUnsigned.substr(2))\n    } catch (e) {\n      throw new Error('Could not sign transaction ' + e)\n    }\n\n    const intV = parseInt(rsvResponse.v, 16)\n    const signedChainId = Math.floor((intV - EIP_155_CONSTANT) / 2)\n\n    if (signedChainId !== chainId) {\n      throw new Error('Invalid returned V 0x' + rsvResponse.v)\n    }\n\n    delete unsignedTxObj.v\n    serializedSigned = serialize(unsignedTxObj, {\n      r: '0x' + rsvResponse.r,\n      s: '0x' + rsvResponse.s,\n      v: intV\n    })\n  } else {\n    throw new Error('Incorrect address. Are you using the correct account/ledger?')\n  }\n\n  transport.close()\n\n  return serializedSigned\n}\n\nexport async function ledgerSignMessage(hash, signerAddress) {\n  const transport = await getTransport()\n\n  const accountsData = await getAccounts(transport)\n\n  //TODO for multiple accs?\n  const account = accountsData[0]\n\n  let signedMsg\n  if (account.address.toLowerCase() === signerAddress.toLowerCase()) {\n    try {\n      const rsvReply = await new AppEth(transport).signPersonalMessage(account.derivationPath, hash.substr(2))\n      signedMsg = '0x' + rsvReply.r + rsvReply.s + rsvReply.v.toString(16)\n    } catch (e) {\n      throw new Error('Signature denied ' + e.message)\n    }\n  } else {\n    throw new Error('Incorrect address. Are you using the correct account/ledger?')\n  }\n  transport.close()\n  return signedMsg\n}\n\nexport async function ledgerSignMessage712(domainSeparator, hashStructMessage, signerAddress) {\n  const transport = await getTransport()\n\n  const accountsData = await getAccounts(transport)\n\n  //TODO for multiple accs?\n  const account = accountsData[0]\n\n  let signedMsg\n  if (account.address.toLowerCase() === signerAddress.toLowerCase()) {\n    try {\n      const rsvReply = await new AppEth(transport).signEIP712HashedMessage(account.derivationPath, domainSeparator, hashStructMessage)\n      signedMsg = '0x' + rsvReply.r + rsvReply.s + rsvReply.v.toString(16)\n    } catch (e) {\n      throw new Error('Signature denied ' + e.message)\n    }\n  } else {\n    throw new Error('Incorrect address. Are you using the correct account/ledger?')\n  }\n  transport.close()\n  return signedMsg\n}\n\nfunction calculateDerivedHDKeyInfos(initialDerivedKeyInfo, count) {\n  const derivedKeys = []\n  for (let i = 0; i < count; i++) {\n\n    const fullDerivationPath = `m/${initialDerivedKeyInfo.baseDerivationPath}/${i}`\n    const path = `m/${i}`\n    const hdKey = initialDerivedKeyInfo.hdKey.derive(path)\n    const address = addressOfHDKey(hdKey)\n    const derivedKey = {\n      address,\n      hdKey,\n      baseDerivationPath: initialDerivedKeyInfo.baseDerivationPath,\n      derivationPath: fullDerivationPath,\n    }\n\n    derivedKeys.push(derivedKey)\n  }\n  return derivedKeys\n}\n\nexport function addressOfHDKey(hdKey) {\n  const shouldSanitizePublicKey = true\n  const derivedPublicKey = hdKey.publicKey\n  const ethereumAddressUnprefixed = ethUtil\n    .publicToAddress(derivedPublicKey, shouldSanitizePublicKey)\n    .toString('hex')\n  return ethUtil.addHexPrefix(ethereumAddressUnprefixed).toLowerCase()\n}\n","import { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport TrezorConnect from '@trezor/connect-web'\nimport { ethers } from 'ethers'\nimport HDNode from 'hdkey'\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerSignMessage, ledgerSignTransaction, ledgerSignMessage712, ledgerGetAddresses } from './ledgerWebHID'\nimport { \n  latticeInit, \n  latticeConnect, \n  latticeSignMessage, \n  latticeSignTransaction, \n  latticeGetAddresses, \n  latticeSignMessage712\n } from 'lib/lattice'\nimport { _TypedDataEncoder } from 'ethers/lib/utils'\nimport { getProvider } from 'lib/provider'\nimport networks from 'consts/networks'\n\nlet wallets = {}\n\n// opts\n// passphrase: string\n// noCache: boolean\nexport function getWallet({ signer, signerExtra, chainId }, opts = {}) {\n  const id = `${signer.address || signer.one}${chainId}`\n  if (wallets[id]) return wallets[id]\n  return wallets[id] = getWalletNew({ signer, signerExtra, chainId }, opts)\n}\n\nfunction getWalletNew({ chainId, signer, signerExtra }, opts) {\n  if (signerExtra && signerExtra.type === 'trezor') {\n    TrezorConnect.manifest({\n      email: 'contactus@ambire.com',\n      appUrl: 'https://wallet.ambire.com'\n    })\n    const providerTrezor = new TrezorSubprovider({\n      trezorConnectClientApi: TrezorConnect,\n      networkId: chainId\n    })\n    providerTrezor._initialDerivedKeyInfo = getInitialDerivedKeyInfo(signerExtra)\n    // for Trezor/ledger, alternatively we can shim using https://www.npmjs.com/package/web3-provider-engine and then wrap in Web3Provider\n    return {\n      signMessage: hash => providerTrezor.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n      signTransaction: params => providerTrezor.signTransactionAsync({ ...params, from: signer.address }),\n      sendTransaction: async (transaction) => {\n        const network = networks.find(n => n.chainId === transaction.chainId)\n        if (!network) throw Error('no network found for chainId : ' + transaction.chainId)\n        const broadcastProvider = await getProvider(network.id)\n        if (!broadcastProvider) throw Error('no provider found for network : ' + network.id)\n\n        transaction.nonce = ethers.utils.hexlify(await broadcastProvider.getTransactionCount(transaction.from))\n        const gas = ethers.utils.hexlify(transaction.gas || transaction.gasLimit)\n        transaction.gasPrice = ethers.utils.hexlify(transaction.gasPrice)\n        \n        transaction = {\n          ...transaction,\n          gas // trezor params requires gas prop\n          // no chainId prop but chainId already known by providerTrezor\n        }\n        \n        const signedTx = await providerTrezor.signTransactionAsync(transaction)\n        \n        return broadcastProvider.sendTransaction(signedTx)\n      },\n      isConnected: async (matchAddress) => { // chain is provided to trezor. Not necessary to check network\n        const addresses = await providerTrezor.getAccountsAsync(100)\n        return addresses.map(i => i.toLowerCase()).includes(matchAddress.toLowerCase())\n      },\n      _signTypedData: async (domain, types, value) => {\n        \n        const domainSeparator = _TypedDataEncoder.hashDomain(domain)\n        const hashStructMessage = _TypedDataEncoder.hashStruct(_TypedDataEncoder.getPrimaryType(types), types, value)\n        const data = _TypedDataEncoder.getPayload(domain, types, value)\n        const initialDerivedKeyInfo = await providerTrezor._initialDerivedKeyInfoAsync()\n        const derivedKeyInfo = providerTrezor._findDerivedKeyInfoForAddress(initialDerivedKeyInfo, signer.address)\n        const path = derivedKeyInfo.derivationPath\n\n        const response = await providerTrezor._trezorConnectClientApi.ethereumSignTypedData({\n          path,\n          data,\n          metamask_v4_compat: true,\n          domain_separator_hash: domainSeparator,\n          message_hash: hashStructMessage\n        })\n\n        if (response.success) {\n          return `${response.payload.signature}`;\n        } else {\n            throw new Error(response.payload.error);\n        }\n      }\n    }\n  } else if (signerExtra && signerExtra.type === 'ledger') {\n    if (signerExtra.transportProtocol === 'webHID') {\n      return {\n        signMessage: hash => ledgerSignMessage(ethers.utils.hexlify(hash), signer.address),\n        signTransaction: params => ledgerSignTransaction(params, chainId),\n        sendTransaction: async (transaction) => {\n          const network = networks.find(n => n.chainId === transaction.chainId)\n          if (!network) throw Error('no network found for chainId : ' + transaction.chainId)\n          const provider = await getProvider(network.id)\n          if (!provider) throw Error('no provider found for network : ' + network.id)\n\n          transaction.nonce = ethers.utils.hexlify(await provider.getTransactionCount(transaction.from))\n\n          const signedTx = await ledgerSignTransaction(transaction, transaction.chainId)\n\n          return provider.sendTransaction(signedTx)\n        },\n        isConnected: async (matchAddress) => { // chain is provided to ledger. Not necessary to check network\n          const addresses = await ledgerGetAddresses()\n          if (addresses && addresses[0]) {\n            if (matchAddress) {\n              return !!addresses.find(a => a.toLowerCase() === matchAddress.toLowerCase())\n            }\n            return true\n          }\n          return false\n        },\n        _signTypedData: (domain, types, value) => {\n          const domainSeparator = _TypedDataEncoder.hashDomain(domain)\n          const hashStructMessage = _TypedDataEncoder.hashStruct(_TypedDataEncoder.getPrimaryType(types), types, value)\n          return ledgerSignMessage712(domainSeparator, hashStructMessage, signer.address)\n        }\n      }\n    } else {\n      const provider = new LedgerSubprovider({\n        networkId: chainId,\n        ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n        baseDerivationPath: signerExtra.info.baseDerivationPath\n      })\n      return {\n        signMessage: hash => provider.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n        signTransaction: params => provider.signTransactionAsync({ ...params, from: signer.address }),\n        sendTransaction: async () => {\n          throw Error('Please use a chrome based browser to use Ledger')\n        },\n        isConnected: async (matchAddress) => { // chain is provided to ledger. Not necessary to check network\n          const addresses = await provider.getAccountsAsync(1)\n          return addresses.map(i => i.toLowerCase()).includes(matchAddress.toLowerCase())\n        },\n        _signTypedData: (domain, types, value) => {\n          throw Error('Please, use a chrome based browser to use 721 Typed signatures')\n        }\n      }\n    }\n  } else if (signerExtra && signerExtra.type === 'Lattice') {\n    return {\n      signMessage: async hash => {\n        return await wrapLatticeError(async hash => {\n          const { commKey, deviceId } = signerExtra\n          const client = latticeInit(commKey)\n          const {isPaired, errConnect } = await latticeConnect(client, deviceId)\n\n          if (errConnect) throw new Error(errConnect.message || errConnect)\n\n          if (!isPaired) {\n            // Canceling the visualization of the secret code on the device's screen.\n            client.pair('')\n            throw new Error('The Lattice device is not paired! Please re-add your account!')\n          }\n\n          const { signedMsg, errSignMessage } = await latticeSignMessage(client, hash)\n          if (errSignMessage) throw new Error(errSignMessage)\n\n          return signedMsg\n        }, [hash])\n      },\n      signTransaction: async params => {\n        return await wrapLatticeError( async params => {\n          const { commKey, deviceId } = signerExtra\n          const client = latticeInit(commKey)\n          const {isPaired, errConnect } = await latticeConnect(client, deviceId)\n\n          if (errConnect) throw new Error(errConnect.message || errConnect)\n\n          if (!isPaired) {\n            // Canceling the visualization of the secret code on the device's screen.\n            client.pair('')\n            throw new Error('The Lattice device is not paired! Please re-add your account!')\n          }\n\n          const { serializedSigned, errSignTxn } = await latticeSignTransaction(client, params, chainId)\n          if (errSignTxn) throw new Error(errSignTxn)\n\n          return serializedSigned\n        }, [params])\n      },\n      sendTransaction: async transaction => { \n        return await wrapLatticeError(async (transaction) => {\n          const network = networks.find(n => n.chainId === transaction.chainId)\n          if (!network) throw Error('no network found for chainId : ' + transaction.chainId)\n          const broadcastProvider = await getProvider(network.id)\n          if (!broadcastProvider) throw Error('no provider found for network : ' + network.id)\n          transaction.nonce = ethers.utils.hexlify(await broadcastProvider.getTransactionCount(transaction.from))\n          const { commKey, deviceId } = signerExtra\n          const client = latticeInit(commKey)\n          const { isPaired, errConnect } = await latticeConnect(client, deviceId)\n\n          if (errConnect) throw new Error(errConnect.message || errConnect)\n\n          if (!isPaired) {\n            // Canceling the visualization of the secret code on the device's screen.\n            client.pair('')\n            throw new Error('The Lattice device is not paired! Please re-add your account!')\n          }\n\n          const { serializedSigned, errSignTxn } = await latticeSignTransaction(client, transaction, chainId)\n          if (errSignTxn) throw new Error(errSignTxn)\n\n          return broadcastProvider.sendTransaction(serializedSigned)\n        }, [transaction])\n      },\n      isConnected: async matchAddress => { \n        return await wrapLatticeError(async (matchAddress) => {\n          let addresses = null\n\n          const { commKey, deviceId } = signerExtra\n          const client = latticeInit(commKey)\n          const { isPaired, errConnect } = await latticeConnect(client, deviceId)\n\n          if (errConnect) throw new Error(errConnect.message || errConnect)\n\n          if (!isPaired) {\n            // Canceling the visualization of the secret code on the device's screen.\n            client.pair('')\n            throw new Error('The Lattice device is not paired! Please re-add your account!')\n          }\n\n          const { res, errGetAddresses } = await latticeGetAddresses(client)\n          if (errGetAddresses) { \n            throw new Error(`Lattice: ${errGetAddresses}`, { error: true })\n          }\n\n          addresses = res\n          return addresses.map(i => i.toLowerCase()).includes(matchAddress.toLowerCase())\n        }, [matchAddress])\n    },\n    _signTypedData: async (domain, types, value) => {\n      return await wrapLatticeError(async (domain, types, value) => {\n        const payload = _TypedDataEncoder.getPayload(domain, types, value)\n        const { commKey, deviceId } = signerExtra\n        const client = latticeInit(commKey)\n        const {isPaired, errConnect } = await latticeConnect(client, deviceId)\n\n        if (errConnect) throw new Error(errConnect.message || errConnect)\n\n        if (!isPaired) {\n          // Canceling the visualization of the secret code on the device's screen.\n          client.pair('')\n          throw new Error('The Lattice device is not paired! Please re-add your account!')\n        }\n\n        const { signedMsg, errSignMessage } = await latticeSignMessage712(client, payload)\n        if (errSignMessage) throw new Error(errSignMessage)\n\n        return signedMsg\n      }, [domain, types, value])\n    }\n  }\n  } else if (signer.address) {\n    if (!window.ethereum) throw new Error('No web3 support detected in your browser: if you created this account through MetaMask, please install it.')\n    // NOTE: for metamask, use `const provider = new ethers.providers.Web3Provider(window.ethereum)`\n    // 'any' is explained here: https://github.com/ethers-io/ethers.js/issues/1107\n    const provider = new ethers.providers.Web3Provider(window.ethereum, 'any')\n\n    const signerObject = provider.getSigner(signer.address)\n\n    signerObject.isConnected = async (matchAddress, matchChain) => {\n      const accounts = await provider.listAccounts()\n\n      let match = true\n      if (!!(accounts.length)) {\n        if (matchAddress) {\n          match = !!accounts.find(a => a.toLowerCase() === matchAddress.toLowerCase())\n        }\n        if (matchChain) {\n          const { chainId } = await provider.getNetwork()\n          match = match && chainId === matchChain\n        }\n      } else {\n        match = false\n      }\n      return match\n    }\n\n    return signerObject\n  } else if (signer.one) {\n    throw new Error('getWallet not applicable for QuickAccounts: use primaryKeyBackup with the passphrase and /second-sig')\n  } else {\n    throw new Error('unknown signer type')\n  }\n}\n\nfunction getInitialDerivedKeyInfo(signerExtra) {\n  return {\n    hdKey: HDNode.fromExtendedKey(signerExtra.info.hdKey.xpub),\n    derivationPath: signerExtra.info.derivationPath,\n    baseDerivationPath: signerExtra.info.baseDerivationPath\n  }\n}\n\nasync function wrapLatticeError(fn, arg) {\n  return await fn.apply(this, arg)\n   .catch(e => {\n     throw new Error(`Lattice: ${e.message}`)\n    })\n}\n","import { Bundle } from 'adex-protocol-eth/js'\nimport { toBundleTxn } from 'ambire-common/src/services/requestToBundleTxn'\n// It costs around 19k to send a token, if that token was interacted with before in the same transaction,\n// because of SLOAD costs - they depend on whether a slot has been read\n// however, it costs 30k if the token has not been interacted with\n// we may decrease it a bit and lean on the relayer failsafe values (cfg.gasAddedOnEstimate) later on\nconst ADDED_GAS_TOKEN = 30000\nconst ADDED_GAS_NATIVE = 12000\n\nexport function isTokenEligible(token, speed, estimation, isGasTankEnabled, network) {\n  if (estimation?.relayerless && token?.address === '0x0000000000000000000000000000000000000000') return true\n  if (!token) return false\n  const { feeInFeeToken } = getFeesData(token, estimation, speed, isGasTankEnabled, network)\n  const balanceInFeeToken = (parseInt(token.balance) / Math.pow(10, token.decimals))\n  return balanceInFeeToken > feeInFeeToken\n}\n\nexport function getAddedGas(token) {\n  return !token?.address || token?.address === '0x0000000000000000000000000000000000000000'\n    ? ADDED_GAS_NATIVE\n    : ADDED_GAS_TOKEN\n}\n\n// can't think of a less funny name for that\nexport function getFeePaymentConsequences(token, estimation, isGasTankEnabled) {\n  // Relayerless mode\n  if (!estimation?.feeInUSD || !token) return { multiplier: 1, addedGas: 0 }\n  // Relayer mode\n  const addedGas = getAddedGas(token)\n  // If Gas Tank enabled\n  if (!!isGasTankEnabled) return { addedGas: 0, multiplier: 1 }\n\n  return {\n    // otherwise we get very long floating point numbers with trailing .999999\n    multiplier: parseFloat(((estimation.gasLimit + addedGas) / estimation.gasLimit).toFixed(4)),\n    addedGas\n  }\n}\n\nconst contractErrors = ['caller is a contract', 'caller is another contract', 'contract not allowed', 'contract not supported', 'No contractz allowed', 'o contracts', /*no */'contracts allowed', /* c or C*/'ontract is not allowed', 'aller must be user', 'aller must be a user', 'ontract call not allowed']\n\nexport function mapTxnErrMsg(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Swap expired'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Swap will suffer slippage higher than your requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'Your signer address is not authorized.'\n  if (contractErrors.find(contractMsg => msg.includes(contractMsg))) return 'This dApp does not support smart wallets.'\n  return msg\n}\n\nexport function getErrHint(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Try performing the swap again'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Try performing the swap again or increase your slippage requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'If you set a new signer for this account, try re-adding the account.'\n  if (contractErrors.find(contractMsg => msg.includes(contractMsg))) {\n    return 'WARNING! We detected that this dApp intentionally blocks smart contract calls. This is a highly disruptive practice, as it breaks support for all smart wallets (Ambire, Gnosis Safe and others). We recommend you report this to the dApp ASAP and ask them to fix it.'\n    // return 'This dApp does not support smart wallets or purposefully excludes them. Contact the dApp developers to tell them to implement smart wallets by not blocking contract interactions and/or implementing EIP1271.'\n  }\n  return 'Sending this transaction batch would have resulted in an error, so we prevented it.'\n}\n\nexport function checkIfDAppIncompatible(msg) {\n  return contractErrors.find(contractMsg => msg.includes(contractMsg))\n}\n\nexport function toHexAmount(amnt, decimals) {\n  return '0x' + Math.round(amnt * Math.pow(10, decimals)).toString(16)\n}\n\nexport function getDiscountApplied(amnt, discount = 0) {\n  if (!discount) return 0\n  if (!amnt) return 0\n  if (discount === 1) return amnt\n  return amnt / (1 - discount) * discount\n}\n\n// Returns feeToken data with all multipliers applied\nexport function getFeesData(feeToken, estimation, speed, isGasTankEnabled, network) {\n  const { addedGas, multiplier } = getFeePaymentConsequences(feeToken, estimation, isGasTankEnabled)\n  const savedGas = getAddedGas(feeToken)\n  const discountMultiplier = 1 - (feeToken?.discount || 0)\n  const totalMultiplier = multiplier * discountMultiplier\n  const nativeRate = feeToken?.nativeRate || 1\n  const isCrossChainNativeSelected = isGasTankEnabled && feeToken.address === '0x0000000000000000000000000000000000000000' && (network.id !== feeToken.network)\n  const feeInNative = estimation.customFee\n    ? ((estimation.customFee * discountMultiplier) / nativeRate)\n    : !isCrossChainNativeSelected ? \n        estimation.feeInNative[speed] * totalMultiplier : \n        (((estimation.feeInNative[speed] * totalMultiplier) / nativeRate) * estimation.nativeAssetPriceInUSD) / feeToken.price\n  const feeInUSD = !isNaN(estimation.nativeAssetPriceInUSD) ? \n    !isCrossChainNativeSelected ? \n      feeInNative * estimation.nativeAssetPriceInUSD : \n      feeInNative * feeToken.price : \n    undefined\n  const feeInFeeToken = feeInNative * nativeRate\n\n  return {\n    feeInNative,\n    feeInUSD,\n    feeInFeeToken,\n    addedGas, // use it bundle data\n    savedGas,\n  }\n}\n\nexport const getDefaultFeeToken = (remainingFeeTokenBalances, network, feeSpeed, estimation, currentAccGasTankState) => {\n  const WALLET_TOKEN_SYMBOLS = ['xWALLET', 'WALLET']\n\n  if(!remainingFeeTokenBalances?.length) {\n    return { symbol: network.nativeAssetSymbol, decimals: 18, address: '0x0000000000000000000000000000000000000000' }\n  }\n\n  return remainingFeeTokenBalances\n  .sort((a, b) =>\n    (WALLET_TOKEN_SYMBOLS.indexOf(b?.symbol) - WALLET_TOKEN_SYMBOLS.indexOf(a?.symbol))\n    || ((b?.discount || 0) - (a?.discount || 0))\n    || a?.symbol.toUpperCase().localeCompare(b?.symbol.toUpperCase())\n  )\n  .find(token => isTokenEligible(token, feeSpeed, estimation, currentAccGasTankState, network))\n  || remainingFeeTokenBalances[0]\n}\n\nexport function makeBundle(account, networkId, requests) {\n  const bundle = new Bundle({\n    network: networkId,\n    identity: account.id,\n    // checking txn isArray because sometimes we receive txn in array from walletconnect. Also we use Array.isArray because txn object can have prop 0\n    txns: requests.map(({ txn }) => toBundleTxn(Array.isArray(txn) ? txn[0] : txn, account.id)),\n    signer: account.signer\n  })\n  bundle.extraGas = requests.map(x => x.extraGas || 0).reduce((a, b) => a + b, 0)\n  bundle.requestIds = requests.map(x => x.id)\n\n  // Attach bundle's meta\n  if (requests.some(item => item.meta)) {\n    bundle.meta = {}\n\n    if (requests.some(item => item.meta?.addressLabel)) {\n      bundle.meta.addressLabel = requests.map(x => !!x.meta?.addressLabel ? x.meta.addressLabel : { addressLabel: '', address: ''})\n    }\n\n    const xWalletReq = requests.find(x => x.meta?.xWallet)\n    if (xWalletReq) {\n      bundle.meta.xWallet = xWalletReq.meta.xWallet\n    }\n  }\n\n  return bundle\n}","// Needed for OUTPACE\nconst channelLib = require('./Channel')\nconst withdrawalLib = require('./Withdraw')\nconst MerkleTree = require('./MerkleTree')\nconst splitSig = require('./splitSig')\n\n// Other utilities\nconst unbondCommitmentlLib = require('./UnbondCommitment')\nconst Permit = require('./Permit')\n\n// Identity and QuickAccManager\nconst bundleLib = require('./Bundle')\n\nmodule.exports = {\n\t...channelLib,\n\t...withdrawalLib,\n\t...unbondCommitmentlLib,\n\t...Permit,\n\t...bundleLib,\n\tMerkleTree,\n\tsplitSig\n}\n","const abi = require('ethereumjs-abi')\nconst keccak256 = require('js-sha3').keccak256\nconst ensure = require('./ensureTypes')\n\nconst ChannelState = {\n\t// hex representation of solidity type(uint256).max\n\tChallenged: '115792089237316195423570985008687907853269984665640564039457584007913129639935',\n\tActive: '0'\n}\n\nfunction Channel(args) {\n\tthis.leader = ensure.Address(args.leader)\n\tthis.follower = ensure.Address(args.follower)\n\tthis.guardian = ensure.Address(args.guardian)\n\tthis.tokenAddr = ensure.Address(args.tokenAddr)\n\tthis.nonce = ensure.Bytes32(args.nonce)\n\n\tObject.freeze(this)\n\n\treturn this\n}\n\nChannel.prototype.hash = function() {\n\treturn Buffer.from(\n\t\tkeccak256.arrayBuffer(\n\t\t\tabi.rawEncode(\n\t\t\t\t['address', 'address', 'address', 'address', 'bytes32'],\n\t\t\t\t[this.leader, this.follower, this.guardian, this.tokenAddr, this.nonce]\n\t\t\t)\n\t\t)\n\t)\n}\n\nChannel.prototype.hashHex = function() {\n\treturn `0x${this.hash().toString('hex')}`\n}\n\nChannel.prototype.toSolidityTuple = function() {\n\treturn [this.leader, this.follower, this.guardian, this.tokenAddr, this.nonce]\n}\n\nChannel.prototype.hashToSign = function(contractAddr, balanceRoot) {\n\t// contains the channel hash (channelId), so that it's not replayable\n\treturn Channel.getSignableStateRoot(contractAddr, this.hashHex(), balanceRoot)\n}\n\nChannel.prototype.hashToSignHex = function(contractAddr, stateRoot) {\n\treturn `0x${this.hashToSign(contractAddr, stateRoot).toString('hex')}`\n}\n\nChannel.prototype.getResumeSignableMessage = function(challengeExpires) {\n\treturn Buffer.from(\n\t\tkeccak256.arrayBuffer(\n\t\t\tabi.solidityPack(\n\t\t\t\t['string', 'bytes32', 'uint256'],\n\t\t\t\t['resume', this.hashHex(), challengeExpires]\n\t\t\t)\n\t\t)\n\t)\n}\n\nChannel.prototype.getResumeSignableMessageHex = function(challengeExpires) {\n\treturn `0x${this.getResumeSignableMessage(challengeExpires).toString('hex')}`\n}\n\n// This returns the same as .hashToSign, .hashToSignHex, but it takes the channelId rather than (the whole channel + contract addr)\nChannel.getSignableStateRoot = function(contractAddr, channelId, balanceRoot) {\n\treturn Buffer.from(\n\t\tkeccak256.arrayBuffer(\n\t\t\tabi.rawEncode(['address', 'bytes32', 'bytes32'], [contractAddr, channelId, balanceRoot])\n\t\t)\n\t)\n}\n\nChannel.getBalanceLeaf = function(acc, amnt) {\n\treturn Buffer.from(keccak256.arrayBuffer(abi.rawEncode(['address', 'uint256'], [acc, amnt])))\n}\n\nChannel.getSpenderBalanceLeaf = function(acc, amnt) {\n\treturn Buffer.from(\n\t\tkeccak256.arrayBuffer(abi.rawEncode(['address', 'string', 'uint256'], [acc, 'spender', amnt]))\n\t)\n}\n\nmodule.exports = { Channel, ChannelState }\n","const ensure = require('./ensureTypes')\n\nfunction Withdraw(args) {\n\tthis.channel = args.channel\n\tthis.balanceTreeAmount = ensure.Uint256(args.balanceTreeAmount)\n\tthis.stateRoot = ensure.Bytes32(args.stateRoot)\n\tthis.sigLeader = ensure.Bytes32Array(args.sigLeader, 3)\n\tthis.sigFollower = ensure.Bytes32Array(args.sigFollower, 3)\n\tthis.proof = ensure.Bytes32Array(args.proof, -1)\n\n\tObject.freeze(this)\n\n\treturn this\n}\n\nWithdraw.prototype.toSolidityTuple = function() {\n\t// etherjs doesn't seem to want BN.js instances; hex is the lowest common denominator for web3/ethers\n\treturn [\n\t\tthis.channel.toSolidityTuple(),\n\t\t`0x${this.balanceTreeAmount.toString(16)}`,\n\t\tthis.stateRoot,\n\t\tthis.sigLeader,\n\t\tthis.sigFollower,\n\t\tthis.proof\n\t]\n}\n\nmodule.exports = { Withdraw }\n","// from https://github.com/ConnextProject/connext-client/blob/master/src/helpers/MerkleTree.js\nconst Buffer = require('buffer').Buffer\nconst keccak256 = require('js-sha3').keccak256\n\nfunction combinedHash(first, second) {\n\tif (!second) {\n\t\treturn first\n\t}\n\tif (!first) {\n\t\treturn second\n\t}\n\tconst sorted = Buffer.concat([first, second].sort(Buffer.compare))\n\n\treturn Buffer.from(keccak256.arrayBuffer(sorted))\n}\n\nfunction deduplicate(buffers) {\n\t// NOTE: performance?\n\treturn buffers.filter((buffer, i) => {\n\t\treturn buffers.findIndex(e => e.equals(buffer)) === i\n\t})\n}\n\nfunction getPair(index, layer) {\n\tconst pairIndex = index % 2 ? index - 1 : index + 1\n\tif (pairIndex < layer.length) {\n\t\treturn layer[pairIndex]\n\t}\n\treturn null\n}\n\nfunction getLayers(elements) {\n\tif (elements.length === 0) {\n\t\treturn [[Buffer.from('')]]\n\t}\n\tconst layers = []\n\tlayers.push(elements)\n\twhile (layers[layers.length - 1].length > 1) {\n\t\tlayers.push(getNextLayer(layers[layers.length - 1]))\n\t}\n\treturn layers\n}\n\nfunction getNextLayer(elements) {\n\treturn elements.reduce((layer, element, index, arr) => {\n\t\tif (index % 2 === 0) {\n\t\t\tlayer.push(combinedHash(element, arr[index + 1]))\n\t\t}\n\t\treturn layer\n\t}, [])\n}\n\nclass MerkleTree {\n\tconstructor(_elements) {\n\t\tif (!_elements.every(b => b.length === 32 && Buffer.isBuffer(b))) {\n\t\t\tthrow new Error('elements must be 32 byte buffers')\n\t\t}\n\t\tconst e = { elements: deduplicate(_elements) }\n\t\tObject.assign(this, e)\n\t\tthis.elements.sort(Buffer.compare)\n\n\t\tconst l = { layers: getLayers(this.elements) }\n\t\tObject.assign(this, l)\n\t}\n\n\tgetRoot() {\n\t\tif (!this.root) {\n\t\t\tconst r = { root: this.layers[this.layers.length - 1][0] }\n\t\t\tObject.assign(this, r)\n\t\t}\n\t\treturn this.root\n\t}\n\n\tverify(proof, element) {\n\t\treturn this.getRoot().equals(proof.reduce((hash, pair) => combinedHash(hash, pair), element))\n\t}\n\n\tproof(element) {\n\t\tlet index = this.elements.findIndex(e => e.equals(element))\n\n\t\tif (index === -1) {\n\t\t\tthrow new Error('element not found in merkle tree')\n\t\t}\n\n\t\treturn this.layers.reduce((proof, layer) => {\n\t\t\tconst pair = getPair(index, layer)\n\t\t\tif (pair) {\n\t\t\t\tproof.push(pair)\n\t\t\t}\n\t\t\tindex = Math.floor(index / 2)\n\t\t\treturn proof\n\t\t}, [])\n\t}\n}\nmodule.exports = MerkleTree\n","function splitSig(inputSig) {\n\tconst sig = inputSig.startsWith('0x') ? inputSig.slice(2) : inputSig\n\tconst r = `0x${sig.substring(0, 64)}`\n\tconst s = `0x${sig.substring(64, 128)}`\n\tlet v = parseInt(sig.substring(128, 130), 16)\n\tif (v < 27) v += 27\n\t// 02 mode is GETH\n\tconst pack = `${'0x02'}${v.toString(\n\t\t16\n\t)}000000000000000000000000000000000000000000000000000000000000`\n\treturn [pack, r, s]\n}\n\nmodule.exports = splitSig\n","const abi = require('ethereumjs-abi')\nconst keccak256 = require('js-sha3').keccak256\nconst ensure = require('./ensureTypes')\n\nfunction UnbondCommitment(args) {\n\tthis.owner = ensure.Address(args.owner)\n\tthis.shares = ensure.Uint256(args.shares)\n\tthis.unlocksAt = ensure.Uint256(args.unlocksAt)\n\n\tObject.freeze(this)\n\treturn this\n}\n\nUnbondCommitment.prototype.hash = function() {\n\tconst buf = abi.rawEncode(\n\t\t['address', 'uint256', 'uint256'],\n\t\t[this.owner, this.shares, this.unlocksAt]\n\t)\n\treturn Buffer.from(keccak256.arrayBuffer(buf))\n}\n\nUnbondCommitment.prototype.hashHex = function() {\n\treturn `0x${this.hash().toString('hex')}`\n}\n\nmodule.exports = { UnbondCommitment }\n","const { keccak256, defaultAbiCoder, toUtf8Bytes, solidityPack } = require('ethers').utils\n\nconst PERMIT_TYPEHASH = keccak256(\n\ttoUtf8Bytes('Permit(address owner,address spender,uint256 value,uint256 nonce,uint256 deadline)')\n)\n\nfunction getDomainSeparator(name, tokenAddress, chainId) {\n\treturn keccak256(\n\t\tdefaultAbiCoder.encode(\n\t\t\t['bytes32', 'bytes32', 'bytes32', 'uint256', 'address'],\n\t\t\t[\n\t\t\t\tkeccak256(\n\t\t\t\t\ttoUtf8Bytes(\n\t\t\t\t\t\t'EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)'\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tkeccak256(toUtf8Bytes(name)),\n\t\t\t\tkeccak256(toUtf8Bytes('1')),\n\t\t\t\tchainId,\n\t\t\t\ttokenAddress\n\t\t\t]\n\t\t)\n\t)\n}\n\nfunction getApprovalDigest(token, approve, nonce, deadline) {\n\tconst DOMAIN_SEPARATOR = getDomainSeparator(token.name, token.address, token.chainId)\n\n\treturn keccak256(\n\t\tsolidityPack(\n\t\t\t['bytes1', 'bytes1', 'bytes32', 'bytes32'],\n\t\t\t[\n\t\t\t\t'0x19',\n\t\t\t\t'0x01',\n\t\t\t\tDOMAIN_SEPARATOR,\n\t\t\t\tkeccak256(\n\t\t\t\t\tdefaultAbiCoder.encode(\n\t\t\t\t\t\t['bytes32', 'address', 'address', 'uint256', 'uint256', 'uint256'],\n\t\t\t\t\t\t[PERMIT_TYPEHASH, approve.owner, approve.spender, approve.value, nonce, deadline]\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t]\n\t\t)\n\t)\n}\n\nmodule.exports = { getDomainSeparator, getApprovalDigest }\n","// @ts-ignore adex-protocol-eth package doesn't have any types written\nimport IdentityFactoryABI from 'adex-protocol-eth/abi/IdentityFactory'\nimport { Interface } from 'ethers/lib/utils'\n\nimport accountPresets from '../../constants/accountPresets'\n\nconst IdentityFactory = new Interface(IdentityFactoryABI)\n\n// Pass deploySalt (eg `id('IsAmbireIdentity')`) to deploy contracts at the same address across chains\nexport function toBundleTxn(\n  { to, value, data, deploySalt }: { to: string; value: string; data: string; deploySalt: string },\n  from: string\n) {\n  // Transactions with no `to` are interpreted by the Ethereum network as CREATE (contract deployment) if they come from an EOA\n  // however, our accounts are not EOAs, so we will just call the factory with a user-specific nonce, that's also identifiable (0x6942)\n  if (to === '0x' || !to) {\n    const salt =\n      deploySalt || `0x69420000000000${Date.now().toString(16).slice(1, 9)}00${from.slice(2)}`\n    return [\n      accountPresets.identityFactoryAddr,\n      value,\n      IdentityFactory.encodeFunctionData('deploy', [data, salt])\n    ]\n  }\n  return [to, value || '0x0', data || '0x']\n}\n","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgChevronLeft(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 7.414,\n    height: 12.001,\n    viewBox: \"0 0 7.414 12.001\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"left-arrow_icon\",\n    \"data-name\": \"left-arrow icon\",\n    transform: \"translate(141.414 -227) rotate(90)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_7\",\n    \"data-name\": \"Path 7\",\n    d: \"M1983,10.413h0l-.707-.707-5-5a1,1,0,0,1,1.414-1.414L1980,4.586l3,3,1.262-1.262L1986,4.586l1.293-1.292a1,1,0,0,1,1.414,1.414L1987.414,6h0l-1.739,1.738-1.968,1.969-.022.022-.685.685Z\",\n    transform: \"translate(-1750 131)\",\n    fill: \"#ebecff\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgChevronLeft);\nexport default __webpack_public_path__ + \"static/media/chevron-left.adab1904.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgInformation(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Information_icon\",\n    \"data-name\": \"Information icon\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"100%\",\n    height: \"100%\",\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Group_29\",\n    \"data-name\": \"Group 29\",\n    transform: \"translate(78 849) rotate(180)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Boundary\",\n    width: 24,\n    height: 24,\n    transform: \"translate(54 825)\",\n    fill: \"none\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Shape\",\n    d: \"M1987,23a10,10,0,1,1,10-10A10.012,10.012,0,0,1,1987,23Zm0-8a1,1,0,1,0,1,1A1,1,0,0,0,1987,15Zm0-8a1,1,0,0,0-1,1v5a1,1,0,1,0,2,0V8A1,1,0,0,0,1987,7Z\",\n    transform: \"translate(-1921 824)\",\n    fill: \"#ebecff\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgInformation);\nexport default __webpack_public_path__ + \"static/media/information.254b0bf9.svg\";\nexport { ForwardRef as ReactComponent };","// extracted by mini-css-extract-plugin\nmodule.exports = {\"action\":\"ExtendedSummaryItem_action__1D6f0\",\"unknown\":\"ExtendedSummaryItem_unknown__2rIqC\",\"cancel\":\"ExtendedSummaryItem_cancel__2gQOq\",\"word\":\"ExtendedSummaryItem_word__W9UcN\",\"token\":\"ExtendedSummaryItem_token__1oq-Q\",\"address\":\"ExtendedSummaryItem_address__2IuhQ\",\"network\":\"ExtendedSummaryItem_network__33ccG\",\"erc721\":\"ExtendedSummaryItem_erc721__3BdZr\",\"icon\":\"ExtendedSummaryItem_icon__ToEaG\",\"externalLink\":\"ExtendedSummaryItem_externalLink__4MQcr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"TxnPreview_wrapper__Jdnv1\",\"heading\":\"TxnPreview_heading__3Ilmt\",\"icon\":\"TxnPreview_icon__2QvFb\",\"info\":\"TxnPreview_info__qy3y_\",\"summaryContainer\":\"TxnPreview_summaryContainer__3jnDE\",\"expandTxn\":\"TxnPreview_expandTxn__2yATF\",\"reversedChevron\":\"TxnPreview_reversedChevron__R9jMN\",\"summary\":\"TxnPreview_summary__3N-JS\",\"warning\":\"TxnPreview_warning__2ZmXu\",\"actionIcons\":\"TxnPreview_actionIcons__2-LYp\",\"dismissTxn\":\"TxnPreview_dismissTxn__20m1D\",\"disabled\":\"TxnPreview_disabled__3dEOv\",\"advanced\":\"TxnPreview_advanced__1iOKF\"};","var _rect, _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgExternalLink(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Open_icon\",\n    \"data-name\": \"Open icon\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 40,\n    height: 40,\n    viewBox: \"0 0 40 40\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Boundary\",\n    width: 40,\n    height: 40,\n    fill: \"none\"\n  })), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_134\",\n    \"data-name\": \"Path 134\",\n    d: \"M2614.313,23.985A3.317,3.317,0,0,1,2611,20.671V6.314A3.318,3.318,0,0,1,2614.313,3h4.97a1.1,1.1,0,0,1,0,2.209h-4.97a1.107,1.107,0,0,0-1.1,1.1V20.671a1.106,1.106,0,0,0,1.1,1.1h14.359a1.1,1.1,0,0,0,1.1-1.1V15.7a1.1,1.1,0,1,1,2.208,0v4.969a3.317,3.317,0,0,1-3.313,3.314Zm3.085-6.4a1.1,1.1,0,0,1,0-1.562l10.816-10.815h-3.961a1.1,1.1,0,1,1,0-2.209h6.627a1.1,1.1,0,0,1,1.1,1.1v6.627a1.1,1.1,0,1,1-2.208,0V6.771l-10.815,10.815a1.1,1.1,0,0,1-1.562,0Z\",\n    transform: \"translate(-2601.252 7)\",\n    fill: \"#ebecff\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgExternalLink);\nexport default __webpack_public_path__ + \"static/media/external-link.a5802413.svg\";\nexport { ForwardRef as ReactComponent };","import cn from 'classnames'\n\nimport { formatFloatTokenAmount } from 'lib/formatters'\nimport ToolTip from 'components/common/ToolTip/ToolTip'\n\nimport { ReactComponent as ExternalLinkIcon } from 'resources/icons/external-link.svg'\nimport { getTokenIcon } from 'lib/icons'\n\nimport styles from './ExtendedSummaryItem.module.scss'\n\nconst ExtendedSummaryItem = ({ item, i, networkDetails, feeAssets }) => {\n  if (item.length === 1) return item\n\n  if (i === 0) return <div className={cn(styles.action, styles[item.toLowerCase()])}>{item}</div>\n\n  if (!item.type) return <div className={styles.word}>{item}</div>\n  if (item.type === 'token') {\n    const foundToken =\n      feeAssets &&\n      feeAssets.find(\n        (i) => i.address === item.address && (!item.symbol || i.symbol.toLowerCase() === item.symbol.toLowerCase())\n      )\n    return (\n      <div className={styles.token}>\n        {item.amount > 0 ? <span>{formatFloatTokenAmount(item.amount, true, item.decimals)}</span> : null}\n        {item.decimals !== null && item.symbol ? (\n          <>\n            {item.address ? (\n              <img\n                className={styles.icon}\n                alt=\"\"\n                src={foundToken ? foundToken.icon : getTokenIcon(networkDetails.id, item.address)}\n              />\n            ) : null}\n            {item.symbol}\n          </>\n        ) : (item.amount > 0) ? (\n          'units of unknown token'\n        ) : null}\n      </div>\n    )\n  }\n\n  if (item.type === 'address')\n    return (\n      <a\n        className={styles.address}\n        href={item.address ? `${networkDetails.explorerUrl}/address/${item.address}` : null}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <ToolTip disabled={!item.address} label={item.address}>\n          {item.name ? item.name : item.address}\n          {item.address ? <ExternalLinkIcon className={styles.externalLink} /> : null}\n        </ToolTip>\n      </a>\n    )\n\n  if (item.type === 'network')\n    return (\n      <div className={styles.network}>\n        {item.icon ? <img\n          className={styles.icon}\n          alt=\"\"\n          src={item.icon}\n        /> : null}\n        {item.name}\n      </div>\n    )\n\n  if (item.type === 'erc721') {\n    const canShowLink = item.network && item.address && item.id\n    return (\n      <a\n        className={styles.erc721}\n        href={canShowLink ? `#/wallet/nft/${item.network}/${item.address}/${item.id}` : null}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {item.name}\n        {canShowLink ? <ExternalLinkIcon /> : null}\n      </a>\n    )\n  }\n\n  return null\n}\n\nexport default ExtendedSummaryItem\n","import cn from 'classnames'\nimport { useState, useEffect  } from 'react'\nimport { formatUnits } from 'ethers/lib/utils'\n\nimport networks from 'consts/networks'\nimport { setKnownAddressNames } from 'lib/humanReadableTransactions'\nimport { getName, getTransactionSummary, isKnown } from 'lib/humanReadableTransactions'\n\nimport useConstants from 'hooks/useConstants'\nimport { ToolTip } from 'components/common'\nimport ExtendedSummaryItem from './ExtendedSummaryItem/ExtendedSummaryItem'\n\nimport { ReactComponent as ChevronDownIcon } from 'resources/icons/chevron-down.svg'\nimport { ReactComponent as CloseIcon } from 'resources/icons/close.svg'\n\nimport styles from './TxnPreview.module.scss'\n\nfunction getNetworkSymbol(networkId) {\n  const network = networks.find(x => x.id === networkId)\n  return network ? network.nativeAssetSymbol : 'UNKNW'\n}\n\nexport default function TxnPreview ({ txn, onDismiss, network, account, isFirstFailing, mined, disableExpand, disableDismiss, disableDismissLabel, addressLabel = null, feeAssets }) {\n  const { constants: { tokenList, humanizerInfo } } = useConstants()\n  const [isExpanded, setExpanded] = useState(false)\n  const contractName = getName(humanizerInfo, txn[0])\n\n  const networkDetails = networks.find(({ id }) => id === network)\n  const extendedSummary = getTransactionSummary(humanizerInfo, tokenList, txn, network, account, { mined, extended: true })\n\n  useEffect(() => !!addressLabel && setKnownAddressNames(addressLabel), [addressLabel])\n  \n  return (\n    <div className={cn(styles.wrapper, {[styles.firstFailing]: isFirstFailing})}>\n        <div className={styles.heading}>\n          <div className={styles.info} onClick={() => !disableExpand && setExpanded(e => !e)}>\n            <div className={styles.summaryContainer}>\n              {!disableExpand && (<div className={cn(styles.expandTxn, {[styles.reversedChevron]: isExpanded})}>\n                <ChevronDownIcon className={styles.icon} />\n              </div>)}\n              <div className={styles.summary}>\n                {extendedSummary.map(entry => { // If entry is extended summary parse it\n                  if(Array.isArray(entry)) {\n                    return entry.map((item, i) => (\n                      <ExtendedSummaryItem \n                        key={`item-${i}`}\n                        item={item}\n                        i={i}\n                        networkDetails={networkDetails}\n                        feeAssets={feeAssets}\n                      />\n                    ))\n                  }\n                    else return entry\n                })}\n              </div>\n            </div>\n            {isFirstFailing && (<p className={styles.warning}>This is the first failing transaction.</p>)}\n              {!isFirstFailing && !mined && !isKnown(humanizerInfo, txn, account) && (<p className={styles.warning}>Warning: interacting with an unknown contract or address.</p>)}\n          </div>\n          <div className={styles.actionIcons}>\n            {onDismiss ? (\n              <ToolTip disabled={!disableDismiss || !disableDismissLabel} label={disableDismissLabel}>\n                <div \n                  className={cn(styles.dismissTxn, {[styles.disabled]: disableDismiss})} \n                  onClick={e => { e.stopPropagation(); !disableDismiss && onDismiss.apply(this, e) }}\n                >\n                  <CloseIcon className={styles.icon} />\n                </div>\n              </ToolTip>\n            ) : null}\n          </div>\n        </div>\n        {\n          isExpanded ? (<div className={styles.advanced}>\n            <p>Interacting with (<i>to</i>): {txn[0]}{contractName ? ` (${contractName})` : ''}</p>\n            <p>Value to be sent (<i>value</i>): {formatUnits(txn[1] || '0x0', 18)} {getNetworkSymbol(network)}</p>\n            <p>Data: {txn[2]}</p>\n          </div>) : null\n        }\n    </div>\n  )\n}\n"],"sourceRoot":""}