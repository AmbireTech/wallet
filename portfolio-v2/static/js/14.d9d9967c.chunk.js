(this["webpackJsonpambire-wallet"]=this["webpackJsonpambire-wallet"]||[]).push([[14],{1323:function(e,t,r){(function(t){var n=r(362),a=r(623),c=r(88).keccak256;function i(e){if(e.length<1)throw new Error("evmPush: no data");if(e.length>32)throw new Error("evmPush: data too long");var r=e.length+95,n=t.alloc(1);return n.writeUInt8(r,0),t.concat([n,e])}function s(e,r,n,s,o){var u=a.rawEncode([r,s],[n,e]),l=c(u);return t.concat([i("string"===typeof o?t.from(o.slice(2),"hex"):o),i(t.from(l,"hex")),t.from("55","hex")])}e.exports={evmPush:i,sstoreCode:s,getProxyDeployBytecode:function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{privSlot:0},c=a.privSlot,o=void 0===c?0:c;if(r.length>3)throw new Error("getProxyDeployBytecode: max 3 privLevels");var u=t.concat(r.map((function(e){var r=n(e,2),a=r[0],c=r[1];return!0!==c?s(o,"address",a,"bytes32",c):s(o,"address",a,"bool",t.from("01","hex"))}))),l=t.from("3d602d80","hex"),d=u.length+l.length+6;if(d>256)throw new Error("getProxyDeployBytecode: internal: offset>256");var f=t.concat([u,l,i(t.from([d]))]),p=t.from(e.slice(2).replace(/^(00)+/,""),"hex");if(p>20)throw new Error("invalid address");return"0x".concat(f.toString("hex"),"3d3981f3363d3d373d3d3d363d").concat(i(p).toString("hex"),"5af43d82803e903d91602b57fd5bf3")},getStorageSlotsFromArtifact:function(e){var t=e.ast.nodes.find((function(e){var t=e.name;return"ContractDefinition"===e.nodeType&&"Identity"===t}));assert.ok(t,"Identity contract definition not found");var r=t.nodes.filter((function(e){return"VariableDeclaration"===e.nodeType&&!e.constant&&e.stateVariable})).findIndex((function(e){return"privileges"===e.name}));return assert.notEqual(r,-1,"privSlot was not found"),{privSlot:r}}}}).call(this,r(25).Buffer)},1519:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0);function a(e){return Object(n.a)({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M6 2.984V2h-.09c-.313 0-.616.062-.909.185a2.33 2.33 0 0 0-.775.53 2.23 2.23 0 0 0-.493.753v.001a3.542 3.542 0 0 0-.198.83v.002a6.08 6.08 0 0 0-.024.863c.012.29.018.58.018.869 0 .203-.04.393-.117.572v.001a1.504 1.504 0 0 1-.765.787 1.376 1.376 0 0 1-.558.115H2v.984h.09c.195 0 .38.04.556.121l.001.001c.178.078.329.184.455.318l.002.002c.13.13.233.285.307.465l.001.002c.078.18.117.368.117.566 0 .29-.006.58-.018.869-.012.296-.004.585.024.87v.001c.033.283.099.558.197.824v.001c.106.273.271.524.494.753.223.23.482.407.775.53.293.123.596.185.91.185H6v-.984h-.09c-.2 0-.387-.038-.563-.115a1.613 1.613 0 0 1-.457-.32 1.659 1.659 0 0 1-.309-.467c-.074-.18-.11-.37-.11-.573 0-.228.003-.453.011-.672.008-.228.008-.45 0-.665a4.639 4.639 0 0 0-.055-.64 2.682 2.682 0 0 0-.168-.609A2.284 2.284 0 0 0 3.522 8a2.284 2.284 0 0 0 .738-.955c.08-.192.135-.393.168-.602.033-.21.051-.423.055-.64.008-.22.008-.442 0-.666-.008-.224-.012-.45-.012-.678a1.47 1.47 0 0 1 .877-1.354 1.33 1.33 0 0 1 .563-.121H6zm4 10.032V14h.09c.313 0 .616-.062.909-.185.293-.123.552-.3.775-.53.223-.23.388-.48.493-.753v-.001c.1-.266.165-.543.198-.83v-.002c.028-.28.036-.567.024-.863-.012-.29-.018-.58-.018-.869 0-.203.04-.393.117-.572v-.001a1.502 1.502 0 0 1 .765-.787 1.38 1.38 0 0 1 .558-.115H14v-.984h-.09c-.196 0-.381-.04-.557-.121l-.001-.001a1.376 1.376 0 0 1-.455-.318l-.002-.002a1.415 1.415 0 0 1-.307-.465v-.002a1.405 1.405 0 0 1-.118-.566c0-.29.006-.58.018-.869a6.174 6.174 0 0 0-.024-.87v-.001a3.537 3.537 0 0 0-.197-.824v-.001a2.23 2.23 0 0 0-.494-.753 2.331 2.331 0 0 0-.775-.53 2.325 2.325 0 0 0-.91-.185H10v.984h.09c.2 0 .387.038.562.115.174.082.326.188.457.32.127.134.23.29.309.467.074.18.11.37.11.573 0 .228-.003.452-.011.672-.008.228-.008.45 0 .665.004.222.022.435.055.64.033.214.089.416.168.609a2.285 2.285 0 0 0 .738.955 2.285 2.285 0 0 0-.738.955 2.689 2.689 0 0 0-.168.602c-.033.21-.051.423-.055.64a9.15 9.15 0 0 0 0 .666c.008.224.012.45.012.678a1.471 1.471 0 0 1-.877 1.354 1.33 1.33 0 0 1-.563.121H10z"}}]})(e)}},1614:function(e,t,r){"use strict";r.r(t),function(e){r.d(t,"default",(function(){return L}));var n=r(5),a=r(2),c=r.n(a),i=r(12),s=r(8),o=(r(958),r(3)),u=r(70),l=r(728),d=r(692),f=r.n(d),p=r(653),b=r(664),g=r(684),h=r(13),v=r(103),m=r(156),j=r(1323),y=r(64),O=r(81),x=r(45),w=r(768),k=r(33),A=r(80),S=r(624),C=r(158),D=r(1519),P=r(818),E=r(779),F=r(780),I=r(4);function L(t){var r=t.relayerURL,a=t.onAddAccount,d=t.utmTracking,L=t.pluginData,N=Object(o.useState)(null),T=Object(s.a)(N,2),z=T[0],M=T[1],_=Object(o.useState)(""),B=Object(s.a)(_,2),K=B[0],R=B[1],q=Object(o.useState)(""),U=Object(s.a)(q,2),W=U[0],J=U[1],H=Object(o.useState)(!1),G=Object(s.a)(H,2),V=G[0],$=G[1],Y=Object(x.a)().addToast,Q=Object(k.f)().showModal,Z=function(){var e=Object(i.a)(c.a.mark((function e(t){var r,n=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(n.length>1&&void 0!==n[1])||n[1],$(r),e.prev=2,e.next=5,t();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0),J("Unexpected error: ".concat(e.t0.message||e.t0));case 11:$(!1);case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(""),e.prev=1,e.next=4,t();case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),$(!1),J("Unexpected error: ".concat(e.t0.message||e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var t=Object(i.a)(c.a.mark((function t(i){var s,o,u,l,f,p,b,g,x,w,k,A,S,C,D,P,E,F,I;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return R(""),t.next=3,new Promise((function(e){return setTimeout(e,0)}));case 3:return s=Object(h.id)(i.email+":"+Date.now()+":"+Math.random()+":"+("object"===typeof performance&&performance.now())),o=v.Wallet.createRandom({extraEntropy:s}),u=v.Wallet.createRandom({extraEntropy:s}).mnemonic.phrase.split(" ").slice(0,6).join(" ")+" "+i.email,t.next=8,Object(y.d)("".concat(r,"/second-key"),{secondKeySecret:u});case 8:if((l=t.sent).address){t.next=11;break}throw new Error("second-key returned no address, error: ".concat(l.message||l));case 11:return f=O.a.salt,p=O.a.baseIdentityAddr,b=O.a.identityFactoryAddr,g=O.a.quickAccManager,x=O.a.quickAccTimelock,w=[x,o.address,l.address],k={quickAccManager:g,timelock:w[0],one:w[1],two:w[2]},A=new h.AbiCoder,S=Object(h.keccak256)(A.encode(["tuple(uint, address, address)"],[w])),C=[[g,S]],D=Object(j.getProxyDeployBytecode)(p,C,{privSlot:0}),P=Object(h.getAddress)("0x"+Object(m.generateAddress2)(e.from(b.slice(2),"hex"),e.from(f.slice(2),"hex"),e.from(D.slice(2),"hex")).toString("hex")),t.t0=JSON,t.next=22,o.encrypt(i.passphrase,O.a.encryptionOpts);case 22:return t.t1=t.sent,E=t.t0.stringify.call(t.t0,t.t1),F=d.getLatestUtmData(),t.next=27,Object(y.d)("".concat(r,"/identity/").concat(P),Object(n.a)({email:i.email,primaryKeyBackup:i.backupOptout?void 0:E,secondKeySecret:u,salt:f,identityFactoryAddr:b,baseIdentityAddr:p,privileges:C,quickAccSigner:k},F.length&&{utm:F}));case 27:if((I=t.sent).success&&d.resetUtm(),"EMAIL_ALREADY_USED"!==I.message){t.next=32;break}return R("An account with this email already exists"),t.abrupt("return");case 32:if(I.success){t.next=36;break}return console.log(I),R("Unexpected sign up error: ".concat(I.message||"unknown")),t.abrupt("return");case 36:a({id:P,email:i.email,primaryKeyBackup:E,salt:f,identityFactoryAddr:b,baseIdentityAddr:p,bytecode:D,signer:k,cloudBackupOptout:!!i.backupOptout,backupOptout:!!i.backupOptout,emailConfRequired:!0},{select:!0,isNew:!0});case 37:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),te=Object(o.useCallback)(function(){var t=Object(i.a)(c.a.mark((function t(a,i){var s,o,u,l,f,p,b,g;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=[[Object(h.getAddress)(a),Object(h.hexZeroPad)("0x01",32)]],o=O.a.salt,u=O.a.baseIdentityAddr,l=O.a.identityFactoryAddr,f=Object(j.getProxyDeployBytecode)(u,s,{privSlot:0}),p=Object(h.getAddress)("0x"+Object(m.generateAddress2)(e.from(l.slice(2),"hex"),e.from(o.slice(2),"hex"),e.from(f.slice(2),"hex")).toString("hex")),b=d.getLatestUtmData(),!r){t.next=12;break}return t.next=8,Object(y.d)("".concat(r,"/identity/").concat(p),Object(n.a)({salt:o,identityFactoryAddr:l,baseIdentityAddr:u,privileges:s,signerType:i},b.length&&{utm:b}));case 8:if((g=t.sent).success&&d.resetUtm(),g.success||g.message&&g.message.includes("already exists")){t.next=12;break}throw g;case 12:return t.abrupt("return",{id:p,salt:o,identityFactoryAddr:l,baseIdentityAddr:u,bytecode:f,signer:{address:Object(h.getAddress)(a)}});case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),[r,d]);function re(){return ne.apply(this,arguments)}function ne(){return(ne=Object(i.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof window.ethereum){e.next=2;break}throw new Error("MetaMask not available");case 2:return t=window.ethereum,e.next=5,t.request({method:"eth_requestAccounts"});case 5:if((r=e.sent).length){e.next=8;break}throw new Error("No accounts connected");case 8:if(1!==r.length){e.next=10;break}return e.abrupt("return",ve(r[0],{type:"Web3"}));case 10:M({addresses:r,signerName:"Web3"});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ae=Object(o.useCallback)(function(){var e=Object(i.a)(c.a.mark((function e(t,n){var a,i,s,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)("".concat(r,"/identity/").concat(t)).then((function(e){return e.json()}));case 2:if(a=e.sent,i=a.salt,s=a.identityFactoryAddr,o=a.baseIdentityAddr,u=a.bytecode,i&&s&&o&&u){e.next=9;break}throw new Error("Incomplete data from relayer for ".concat(t));case 9:return e.abrupt("return",{id:t,salt:i,identityFactoryAddr:s,baseIdentityAddr:o,bytecode:u,signer:{address:n}});case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[r]),ce=Object(o.useCallback)(function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,Promise.all(t.map(function(){var e=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)("".concat(r,"/identity/any/by-owner/").concat(t,"?includeFormerlyOwned=true"));case 2:return a=e.sent,e.t0=Object,e.next=6,a.json();case 6:e.t1=e.sent,e.t0.entries.call(e.t0,e.t1).forEach((function(e){var r=Object(s.a)(e,2),a=r[0];r[1];return n[a]=Object(h.getAddress)(t)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.next=5,Promise.all(Object.entries(n).map((function(e){var t=Object(s.a)(e,2),r=t[0],n=t[1];return ae(r,n)})));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ae,r]),ie=function(e){var t=e.addresses,r=e.deviceId,n=e.commKey,a=e.isPaired;M({addresses:t,signerName:"Lattice",signerExtra:{type:"Lattice",deviceId:r,commKey:n,isPaired:a}})};function se(){return oe.apply(this,arguments)}function oe(){return(oe=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(Object(I.jsx)(F.a,{addresses:ie}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return le.apply(this,arguments)}function le(){return(le=Object(i.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new p.TrezorSubprovider({trezorConnectClientApi:f.a}),e.next=3,t.getAccountsAsync(50);case 3:r=e.sent,M({addresses:r,signerName:"Trezor",signerExtra:{type:"trezor",info:JSON.parse(JSON.stringify(t._initialDerivedKeyInfo))}});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return fe.apply(this,arguments)}function fe(){return(fe=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(C.a)()){e.next=5;break}return e.next=3,pe();case 3:e.next=7;break;case 5:return e.next=7,ge();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return be.apply(this,arguments)}function be(){return(be=Object(i.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new b.LedgerSubprovider({networkId:0,ledgerEthereumClientFactoryAsync:g.ledgerEthereumBrowserClientFactoryAsync,baseDerivationPath:S.a}),e.next=3,t.getAccountsAsync(50);case 3:return r=e.sent,e.next=6,t._initialDerivedKeyInfoAsync().then((function(e){return{type:"ledger",info:JSON.parse(JSON.stringify(e))}}));case 6:n=e.sent,M({addresses:r,signerName:"Ledger",signerExtra:n});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return he.apply(this,arguments)}function he(){return(he=Object(i.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.prev=1,e.next=4,Object(S.b)();case 4:r=e.sent,n={type:"ledger",transportProtocol:"webHID"},1===r.length?ve(r[0],n):M({addresses:r,signerName:"Ledger",signerExtra:n}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),t=e.t0.statusCode&&"InvalidChannel"===e.t0.id?"Invalid channel":e.t0.statusCode&&25873===e.t0.statusCode?"Please make sure your ledger is connected and the ethereum app is open":e.t0.message;case 13:t&&J("Ledger error: ".concat(t.message||t));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var ve=Object(o.useCallback)(function(){var e=Object(i.a)(c.a.mark((function e(t,i){var s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e,t){return a(Object(n.a)(Object(n.a)({},e),{},{signerExtra:i}),t)},r){e.next=8;break}return e.t0=s,e.next=5,te(t,i.type);case 5:return e.t1=e.sent,e.t2={select:!0},e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 8:return e.next=10,ce([t]);case 10:if((o=e.sent).length){e.next=20;break}return e.t3=s,e.next=15,te(t,i.type);case 15:e.t4=e.sent,e.t5={select:!0,isNew:!0},(0,e.t3)(e.t4,e.t5),e.next=22;break;case 20:Y("Found ".concat(o.length," existing accounts with signer ").concat(t),{timeout:15e3}),o.forEach((function(e,t){return s(e,{select:0===t})}));case 22:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[Y,te,ce,a,r]),me=Object(o.useCallback)((function(e){X((function(){return ve(e.address,z.signerExtra)})),M(null)}),[ve,z]),je=Object(o.useCallback)((function(){return M(null)}),[]);Object(o.useEffect)((function(){z&&Q(Object(I.jsx)(w.a,{signersToChoose:z.addresses,onSignerAddressClicked:me,description:"Signer address is the ".concat(z.signerName," address you will use to sign transactions on Ambire Wallet.\n                    \u0410 new account will be created using this signer if you don\u2019t have one."),isCloseBtnShown:!0,onCloseBtnClicked:je}))}),[je,me,Q,z]);var ye=Object(o.useCallback)((function(e,t){var r=new FileReader;if(t.length&&Y("".concat(t[0].file.path," - ").concat((t[0].file.size/1024).toFixed(2)," KB. ").concat(t[0].errors[0].message),{error:!0}),e.length){var n=e[0];r.readAsText(n,"UTF-8"),r.onload=function(e){var t=e.target.result,r=JSON.parse(t),n=Object(E.b)(r);n.success?a(r,{select:!0}):Y(n.message,{error:!0})}}}),[Y,a]),Oe=Object(P.a)({onDrop:ye,noClick:!0,noKeyboard:!0,accept:"application/json",maxFiles:1,validator:E.a}),xe=Oe.getInputProps,we=Oe.open,ke=Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("button",{onClick:function(){return Z(ue,"hwwallet")},children:[Object(I.jsx)("div",{className:"icon",style:{backgroundImage:"url(./resources/trezor.png)"}}),"Trezor"]}),Object(I.jsxs)("button",{onClick:function(){return Z(de,"hwwallet")},children:[Object(I.jsx)("div",{className:"icon",style:{backgroundImage:"url(./resources/ledger.png)"}}),"Ledger"]}),Object(I.jsxs)("button",{onClick:function(){return Z(se,"hwwallet")},children:[Object(I.jsx)("div",{className:"icon",style:{backgroundImage:"url(./resources/grid-plus.png)"}}),"Grid+ Lattice1"]}),Object(I.jsxs)("button",{onClick:function(){return X(re)},children:[Object(I.jsx)("div",{className:"icon",style:{backgroundImage:"url(./resources/metamask.png)"}}),"Metamask / Browser"]}),Object(I.jsxs)("button",{onClick:function(){return X(we)},children:[Object(I.jsx)("div",{className:"icon",children:Object(I.jsx)(D.a,{size:25})}),"Import from JSON"]}),Object(I.jsx)("input",Object(n.a)({},xe()))]});return r?Object(I.jsxs)("div",{className:"loginSignupWrapper",children:[Object(I.jsx)("div",Object(n.a)({id:"logo"},L?{style:{backgroundImage:"url(".concat(L.iconUrl,")")}}:{})),L&&Object(I.jsxs)("div",{id:"plugin-info",children:[Object(I.jsx)("div",{className:"name",children:L.name}),Object(I.jsx)("div",{children:L.description})]}),Object(I.jsxs)("section",{id:"addAccount",children:[Object(I.jsxs)("div",{id:"loginEmail",children:[Object(I.jsx)("h3",{children:"Create a new account"}),Object(I.jsx)(l.a,{inProgress:"email"===V,onAccRequest:function(e){return Z((function(){return ee(e)}),"email")},action:"SIGNUP"}),K?Object(I.jsx)("p",{className:"error",children:K}):Object(I.jsx)(I.Fragment,{})]}),Object(I.jsxs)("div",{id:"loginSeparator",children:[Object(I.jsx)("div",{className:"verticalLine"}),Object(I.jsx)("span",{children:"or"}),Object(I.jsx)("div",{className:"verticalLine"})]}),Object(I.jsxs)("div",{id:"loginOthers",children:[Object(I.jsx)("h3",{children:"Add an account"}),"hwwallet"!==V?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(u.b,{to:"/email-login",children:Object(I.jsxs)("button",{children:[Object(I.jsx)("div",{className:"icon",style:{backgroundImage:"url(./resources/envelope.png)"}}),"Email login"]})}),ke,W?Object(I.jsx)("p",{className:"error",children:W}):Object(I.jsx)(I.Fragment,{})]}):Object(I.jsx)("div",{className:"accountLoader",children:Object(I.jsx)(A.m,{})})]})]})]}):Object(I.jsxs)("div",{className:"loginSignupWrapper",children:[Object(I.jsx)("div",{id:"logo"}),Object(I.jsx)("section",{id:"addAccount",children:Object(I.jsxs)("div",{id:"loginOthers",children:[Object(I.jsx)("h3",{children:"Add an account"}),ke,Object(I.jsx)("h3",{children:"NOTE: You can enable email/password login by connecting to a relayer."}),W?Object(I.jsx)("p",{className:"error",style:{maxWidth:"800px"},children:W}):Object(I.jsx)(I.Fragment,{})]})})]})}f.a.manifest({email:"contactus@ambire.com",appUrl:"https://wallet.ambire.com"})}.call(this,r(25).Buffer)},617:function(e,t,r){"use strict";r.d(t,"c",(function(){return p})),r.d(t,"a",(function(){return b})),r.d(t,"d",(function(){return g})),r.d(t,"b",(function(){return h})),r.d(t,"e",(function(){return v})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return j}));var n=r(5),a=r(2),c=r.n(a),i=r(12),s=r(628),o=r(49),u=r(620),l=r(615),d=2147483648,f={startPath:[2147483692,2147483708,d,0,0],n:10},p=function(e){var t={name:"Ambire Wallet",crypto:l,privKey:e};return new s.Client(t)},b=function(){var e=Object(i.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){t.connect(r,(function(t,r){t?n("Lattice connect: ".concat(t," Or check if the DeviceID is correct.")):e({isPaired:!!r,errConnect:!1})}))})).catch((function(e){return console.error(e),{isPaired:!1,errConnect:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=Object(i.a)(c.a.mark((function e(t,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){t.pair(r,(function(t,r){t?n("Lattice connect: ".concat(t)):e({hasActiveWallet:r,errPair:!1})}))})).catch((function(e){return console.error(e),{hasActiveWallet:!1,errPair:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){t.getAddresses(f,(function(t,n){if(t)r("Lattice get addresses: ".concat(t));else{if(!n)throw new Error("Lattice could not get the addresses.");e({res:n,errGetAddresses:!1})}}))})).catch((function(e){return console.error(e),{res:null,errGetAddresses:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(c.a.mark((function e(t,r){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={protocol:"signPersonal",payload:o.ethers.utils.hexlify(r),signerPath:[2147483692,2147483708,d,0,0]},a={currency:"ETH_MSG",data:n},e.next=4,new Promise((function(e,r){t.sign(a,(function(t,n){if(t)r(t);else{if(!n)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+n.sig.r+n.sig.s+n.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),m=function(){var e=Object(i.a)(c.a.mark((function e(t,r){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={currency:"ETH_MSG",data:{signerPath:[2147483692,2147483708,d,0,0],protocol:"eip712",payload:r}},e.next=3,new Promise((function(e,r){t.sign(n,(function(t,n){if(t)r(t);else{if(!n)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+n.sig.r+n.sig.s+n.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(c.a.mark((function e(t,r,a){var i,s,o,l,f,p,b,g,h,v;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.to,s=r.data,o=r.gas,l=r.gasPrice,f=r.nonce,p=r.value,b=void 0===p?0:p,delete(g=Object(n.a)(Object(n.a)({},r),{},{gasLimit:r.gasLimit||r.gas,chainId:a})).from,delete g.gas,h={nonce:f,gasLimit:o||r.gasLimit,gasPrice:l,to:i,value:b,data:s||"",signerPath:[2147483692,2147483708,d,0,0],chainId:a,useEIP155:!0},v={currency:"ETH",data:h},e.next=8,new Promise((function(e,r){t.sign(v,(function(t,n){if(t)r(t);else{if(!n)throw new Error("Lattice could not sign the message.");delete g.v;var a=Object(u.a)(g,{r:"0x"+n.sig.r,s:"0x"+n.sig.s,v:n.sig.v[0].toString(16)});e({serializedSigned:a,errSignTxn:!1})}}))})).catch((function(e){return console.error(e),{serializedSigned:null,errSignTxn:e}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},624:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return h})),r.d(t,"e",(function(){return x})),r.d(t,"c",(function(){return k})),r.d(t,"d",(function(){return S}));var n=r(5),a=r(2),c=r.n(a),i=r(12),s=r(690),o=r(691),u=r(620),l=r(156),d=r(609),f=null,p="44'/60'/0'/0";function b(){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.list();case 2:if(!(f=e.sent).length){e.next=11;break}if(!f[0].opened){e.next=8;break}return e.abrupt("return",new s.a(f[0]));case 8:return e.abrupt("return",s.a.open(f[0]));case 9:e.next=22;break;case 11:return e.prev=11,e.next=14,s.a.request();case 14:return e.abrupt("return",e.sent);case 17:if(e.prev=17,e.t0=e.catch(11),!e.t0.message.includes("reading 'open'")){e.next=21;break}throw new Error("ledger WebHID request denied");case 21:throw new Error("Could not request WebHID ledger: "+e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}function h(){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return t=e.sent,e.next=5,m(t);case 5:return r=e.sent,t.close(),e.abrupt("return",r.map((function(e){return e.address})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return j.apply(this,arguments)}function j(){return(j=Object(i.a)(c.a.mark((function t(r){var n,a,i,s,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="m/".concat(p),t.next=3,y(r,n).then((function(e){return e})).catch((function(e){throw 25871===e.statusCode||27404===e.statusCode?Error("Please make sure your ledger is unlocked and running the Ethereum app. "+e.message):Error("Could not get address from ledger : "+e)}));case 3:return a=t.sent,(i=new d).publicKey=e.from(a.publicKey,"hex"),i.chainCode=e.from(a.chainCode,"hex"),s=P(i),o={hdKey:i,address:s,derivationPath:n,baseDerivationPath:p},t.abrupt("return",D(o,1));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(e,t){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(c.a.mark((function e(t,r){var n,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new o.a(t),i=new Promise((function(e,t){n=setTimeout((function(){return t(new Error("Device took too long to respond..."))}),1e4)})),e.abrupt("return",Promise.race([a.getAddress(r,!1,!0),i]).then((function(e){return clearTimeout(n),e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return w.apply(this,arguments)}function w(){return(w=Object(i.a)(c.a.mark((function e(t,r){var a,i,s,l,d,f,p,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return a=e.sent,i=t.from,delete(s=Object(n.a)(Object(n.a)({},t),{},{gasLimit:t.gasLimit||t.gas,chainId:r})).from,delete s.gas,l=Object(u.a)(s),e.next=10,m(a);case 10:if(d=e.sent,d[0].address.toLowerCase()!==i.toLowerCase()){e.next=30;break}return e.prev=13,e.next=16,new o.a(a).signTransaction(d[0].derivationPath,l.substr(2));case 16:p=e.sent,e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(13),new Error("Could not sign transaction "+e.t0);case 22:if(g=parseInt(p.v,16),Math.floor((g-35)/2)===r){e.next=26;break}throw new Error("Invalid returned V 0x"+p.v);case 26:delete s.v,f=Object(u.a)(s,{r:"0x"+p.r,s:"0x"+p.s,v:g}),e.next=31;break;case 30:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 31:return a.close(),e.abrupt("return",f);case 33:case"end":return e.stop()}}),e,null,[[13,19]])})))).apply(this,arguments)}function k(e,t){return A.apply(this,arguments)}function A(){return(A=Object(i.a)(c.a.mark((function e(t,r){var n,a,i,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return n=e.sent,e.next=5,m(n);case 5:if(a=e.sent,(i=a[0]).address.toLowerCase()!==r.toLowerCase()){e.next=20;break}return e.prev=8,e.next=11,new o.a(n).signPersonalMessage(i.derivationPath,t.substr(2));case 11:u=e.sent,s="0x"+u.r+u.s+u.v.toString(16),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(8),new Error("Signature denied "+e.t0.message);case 18:e.next=21;break;case 20:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 21:return n.close(),e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}function S(e,t,r){return C.apply(this,arguments)}function C(){return(C=Object(i.a)(c.a.mark((function e(t,r,n){var a,i,s,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return a=e.sent,e.next=5,m(a);case 5:if(i=e.sent,(s=i[0]).address.toLowerCase()!==n.toLowerCase()){e.next=20;break}return e.prev=8,e.next=11,new o.a(a).signEIP712HashedMessage(s.derivationPath,t,r);case 11:l=e.sent,u="0x"+l.r+l.s+l.v.toString(16),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(8),new Error("Signature denied "+e.t0.message);case 18:e.next=21;break;case 20:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 21:return a.close(),e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}function D(e,t){for(var r=[],n=0;n<t;n++){var a="m/".concat(e.baseDerivationPath,"/").concat(n),c="m/".concat(n),i=e.hdKey.derive(c),s={address:P(i),hdKey:i,baseDerivationPath:e.baseDerivationPath,derivationPath:a};r.push(s)}return r}function P(e){var t=e.publicKey,r=l.publicToAddress(t,!0).toString("hex");return l.addHexPrefix(r).toLowerCase()}}).call(this,r(25).Buffer)},666:function(e,t){},673:function(e,t){},674:function(e,t){},675:function(e,t){},676:function(e,t){},677:function(e,t){},679:function(e,t){},680:function(e,t){},681:function(e,t){},683:function(e,t){},685:function(e,t){},688:function(e,t){},728:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(5),a=r(8),c=r(3),i=r(81),s=r(80),o=r(4);function u(e){var t=e.action,r=void 0===t?"LOGIN":t,u=e.onAccRequest,l=e.inProgress,d=Object(c.useRef)(null),f=Object(c.useState)({email:"",passphrase:"",passphraseConfirm:"",action:r}),p=Object(a.a)(f,2),b=p[0],g=p[1],h=function(e){var t=Object(n.a)(Object(n.a)({},b),e);g(t);var r="SIGNUP"===t.action&&t.passphrase!==t.passphraseConfirm;d.current&&d.current.setCustomValidity(r?"Passwords must match":"")},v="SIGNUP"===b.action,m=Math.ceil(i.a.quickAccTimelock/86400),j="In case you forget your password or lose your backup, you will have to wait ".concat(m," days and pay the recovery fee to restore access to your account."),y=b.backupOptout?Object(o.jsx)(s.g,{label:j,required:!0}):Object(o.jsx)(o.Fragment,{}),O=function(e){var t=e.href,r=e.children;return Object(o.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",onClick:function(e){return e.stopPropagation()},children:r})},x=v?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("input",{type:"password",required:!0,minLength:8,placeholder:"Password",value:b.passphrase,onChange:function(e){return h({passphrase:e.target.value})}}),Object(o.jsx)("input",{ref:d,required:!0,minLength:8,type:"password",placeholder:"Confirm password",value:b.passphraseConfirm,onChange:function(e){return h({passphraseConfirm:e.target.value})}}),Object(o.jsx)(s.g,{label:Object(o.jsxs)(o.Fragment,{children:["I agree to the ",Object(o.jsx)(O,{href:"https://www.ambire.com/Ambire%20ToS%20and%20PP%20(26%20November%202021).pdf",children:"Terms of Service and Privacy policy"}),"."]}),required:!0}),Object(o.jsx)(s.g,{label:Object(o.jsxs)(o.Fragment,{children:["Backup on ",Object(o.jsx)(O,{href:"https://help.ambire.com/hc/en-us/articles/4410892186002-What-is-Ambire-Cloud-",children:"Ambire Cloud"}),"."]}),checked:!b.backupOptout,onChange:function(e){return h({backupOptout:!e.target.checked})}}),y]}):Object(o.jsx)(o.Fragment,{});return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u({action:b.action,accType:"QUICK",email:b.email,passphrase:b.passphrase,backupOptout:b.backupOptout})},children:[Object(o.jsx)("input",{type:"email",required:!0,placeholder:"Email",value:b.email,onChange:function(e){return h({email:e.target.value})}}),v?Object(o.jsx)(o.Fragment,{}):Object(o.jsx)("input",{type:"password",style:{display:"none"}}),x,Object(o.jsx)("input",{type:"submit",disabled:l,value:v?l?"Signing up...":"Sign up":l?"Logging in...":"Log in"})]})}},768:function(e,t,r){"use strict";var n=r(8),a=(r(769),r(3)),c=r(33),i=r(80),s=r(627),o=r(37),u=r(4);t.a=function(e){var t,r=e.signersToChoose,l=e.onSignerAddressClicked,d=e.selectedNetwork,f=void 0===d?{explorerUrl:"https://etherscan.io"}:d,p=e.description,b=void 0===p?"":p,g=e.isCloseBtnShown,h=void 0===g||g,v=e.onCloseBtnClicked,m=Object(c.f)().hideModal,j=Object(a.useState)(0),y=Object(n.a)(j,2),O=y[0],x=y[1],w=[];t=5,w=r.reduce((function(e,r,n){var a=Math.floor(n/t);return(e[a]||(e[a]=[])).push(r),e}),[]);var k=function(e){return e.slice(0,5)+"..."+e.slice(e.length-4,e.length)},A=0===O,S=O===w.length-1;return Object(u.jsxs)(i.n,{id:"select-signer-modal",title:"Select a signer account",isCloseBtnShown:h,onClose:v,children:[Object(u.jsx)("div",{className:"intro",children:b}),Object(u.jsxs)("div",{className:"loginSignupWrapper chooseSigners",children:[Object(u.jsx)("ul",{id:"signersToChoose",children:r?w[O].map((function(e,t){return Object(u.jsxs)("li",{className:t%2?"":" odd-rows-bg",onClick:function(){return function(e,t){l({address:e,index:t}),m()}(e,5*O+t)},children:[Object(u.jsx)("span",{className:"index-row",children:5*O+t+1}),Object(u.jsx)("span",{children:k(e)}),Object(u.jsx)("a",{href:f.explorerUrl+"/address/"+e,target:"_blank",rel:"noreferrer",onClick:function(e){return e.stopPropagation()},children:Object(u.jsx)(s.c,{size:25})})]},e)})):null}),Object(u.jsxs)("div",{className:"pages",children:[O+1,"/",w.length]}),Object(u.jsxs)("div",{className:"buttons",children:[Object(u.jsx)(i.e,{disabled:A,icon:Object(u.jsx)(o.w,{}),small:!0,clear:!0,type:"button",onClick:function(){0!==O&&x((function(e){return e-1}))},children:"Previous page"}),Object(u.jsx)(i.e,{disabled:S,iconAfter:Object(u.jsx)(o.x,{}),small:!0,clear:!0,type:"button",onClick:function(){O!==w.length-1&&x((function(e){return e+1}))},children:"Next page"})]})]})]})}},769:function(e,t,r){},778:function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),n=e.name||"",a=(e.type||"").toLowerCase(),c=a.replace(/\/.*$/,"");return r.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?n.toLowerCase().endsWith(t):t.endsWith("/*")?c===t.replace(/\/.*$/,""):a===t}))}return!0}},779:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return d}));var n=r(13),a=/^([0-9]+\.?[0-9]*)$/,c=["salt","identityFactoryAddr","baseIdentityAddr","bytecode","signer"],i=function(e){if(!e||!l(e))return{success:!1,message:"The imported file does not contain needed account data."};if(!e.id||!s(e.id))return{success:!1,message:"Failed to import JSON file: invalid id"};if(!e.signer||!s(e.signer.address||e.signer.quickAccManager))return{success:!1,message:"JSON file: invalid signer address"};if(e.signer.quickAccManager){if(!e.signer.timelock||!o(e.signer.timelock))return{success:!1,message:"Failed to import JSON file: invalid signer timelock"};if(!e.signer.one||!s(e.signer.one))return{success:!1,message:"Failed to import JSON file: invalid signer one"};if(!e.signer.two||!s(e.signer.two))return{success:!1,message:"Failed to import JSON file: invalid signer two"}}return e.salt&&u(e.salt)?e.identityFactoryAddr&&s(e.identityFactoryAddr)?e.baseIdentityAddr&&s(e.baseIdentityAddr)?{success:!0}:{success:!1,message:"JSON file: invalid base Identity Address"}:{success:!1,message:"JSON file: invalid identity Factory Address"}:{success:!1,message:"JSON file: invalid salt"}},s=function(e){try{return Object(n.getAddress)(e)===e}catch(t){return!1}},o=function(e){return a.test(e)&&6===e.toString().length},u=function(e){return 32===Object(n.hexDataLength)(e)},l=function(e){return c.every((function(t){return Object.keys(e).includes(t)}))},d=function(e){return e.size>3072?{code:"file-size-too-large",message:"The file size is larger than ".concat(3..toFixed(2)," KB.")}:null}},780:function(e,t,r){"use strict";var n=r(2),a=r.n(n),c=r(12),i=r(8),s=(r(781),r(80)),o=r(3),u=r(45),l=r(617),d=r(615),f=r.n(d),p=r(4),b=f.a.randomBytes(32).toString("hex");t.a=function(e){var t=e.addresses,r=Object(u.a)().addToast,n=Object(o.useState)(!1),d=Object(i.a)(n,2),f=d[0],g=d[1],h=Object(o.useState)(""),v=Object(i.a)(h,2),m=v[0],j=v[1],y=Object(o.useState)(!1),O=Object(i.a)(y,2),x=O[0],w=O[1],k=Object(o.useState)(null),A=Object(i.a)(k,2),S=A[0],C=A[1],D=Object(o.useRef)(null);Object(o.useEffect)((function(){x&&D.current.focus()}),[x]);var P=Object(l.c)(b),E=function(){var e=Object(c.a)(a.a.mark((function e(){var n,c,i,s,o,u,d,f,p,h,v,j,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g((function(e){return!e})),e.next=3,Object(l.a)(P,m);case 3:if(n=e.sent,c=n.isPaired,!(i=n.errConnect)){e.next=10;break}return g((function(e){return!e})),r("Lattice: ".concat(i," Or check if the Device ID is correct."),{error:!0}),e.abrupt("return");case 10:if(c){e.next=41;break}return w((function(e){return!e})),e.next=14,new Promise((function(e,t){C((function(){return e}))}));case 14:if(""===(s=e.sent)){e.next=39;break}return w((function(e){return!e})),e.next=19,Object(l.d)(P,s);case 19:if(o=e.sent,u=o.hasActiveWallet,!(d=o.errPair)){e.next=26;break}return g((function(e){return!e})),r(d,{error:!0}),e.abrupt("return");case 26:if(u){e.next=29;break}return r("Lattice has no active wallet!"),e.abrupt("return");case 29:return e.next=31,Object(l.b)(P);case 31:if(f=e.sent,p=f.res,!(h=f.errGetAddresses)){e.next=38;break}return g((function(e){return!e})),r(h,{error:!0}),e.abrupt("return");case 38:p&&(t({addresses:p,deviceId:m,commKey:b,isPaired:!0}),g(!1));case 39:e.next=51;break;case 41:return e.next=43,Object(l.b)(P);case 43:if(v=e.sent,j=v.res,!(y=v.errGetAddresses)){e.next=50;break}return g(!1),r("Lattice: ".concat(y),{error:!0}),e.abrupt("return");case 50:j&&(t({addresses:j,deviceId:m,commKey:b,isPaired:!0}),g(!1));case 51:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(s.n,{title:"Connect to Lattice Device",children:Object(p.jsx)("div",{id:"grid-plus",children:Object(p.jsxs)("div",{children:[Object(p.jsxs)("p",{children:["The device ID is listed on your Lattice under"," ",Object(p.jsx)("strong",{children:"Settings"}),"."]}),Object(p.jsx)("h4",{children:"Device ID"}),Object(p.jsx)(s.w,{disabled:x,placeholder:"Enter the device ID",onInput:function(e){var t;6===(t=e).length&&j(t)}}),x&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h4",{children:"Secret"}),Object(p.jsx)(s.w,{ref:D,placeholder:"Enter secret",style:{textTransform:"uppercase"},onInput:function(e){return function(e){var t=e.toUpperCase();8===t.length&&S(t)}(e)}})]}),f&&!x?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h3",{children:"It may takes a while."}),Object(p.jsx)("h3",{children:"Please wait..."})]}):Object(p.jsx)(p.Fragment,{}),Object(p.jsx)("div",{className:"buttons",children:f?Object(p.jsx)(s.e,{disabled:!0,children:Object(p.jsx)(s.m,{})}):Object(p.jsx)(s.e,{onClick:E,children:"Connect to Wallet"})})]})})})}},781:function(e,t,r){},818:function(e,t,r){"use strict";r.d(t,"a",(function(){return ce}));var n=r(3),a=r.n(n),c=r(50),i=r.n(c),s=r(616),o=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function u(e,t){var r=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var r=t.split(".").pop().toLowerCase(),n=o.get(r);n&&Object.defineProperty(e,"type",{value:n,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof r.path){var n=e.webkitRelativePath;Object.defineProperty(r,"path",{value:"string"===typeof t?t:"string"===typeof n&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}var l=[".DS_Store","Thumbs.db"];function d(e){return(null!==e.target&&e.target.files?b(e.target.files):[]).map((function(e){return u(e)}))}function f(e,t){return Object(s.__awaiter)(this,void 0,void 0,(function(){var r;return Object(s.__generator)(this,(function(n){switch(n.label){case 0:return e.items?(r=b(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,r]:[4,Promise.all(r.map(g))]):[3,2];case 1:return[2,p(h(n.sent()))];case 2:return[2,p(b(e.files).map((function(e){return u(e)})))]}}))}))}function p(e){return e.filter((function(e){return-1===l.indexOf(e.name)}))}function b(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n)}return t}function g(e){if("function"!==typeof e.webkitGetAsEntry)return v(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?j(t):v(e)}function h(e){return e.reduce((function(e,t){return Object(s.__spread)(e,Array.isArray(t)?h(t):[t])}),[])}function v(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var r=u(t);return Promise.resolve(r)}function m(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(t){return[2,e.isDirectory?j(e):y(e)]}))}))}function j(e){var t=e.createReader();return new Promise((function(e,r){var n=[];!function a(){var c=this;t.readEntries((function(t){return Object(s.__awaiter)(c,void 0,void 0,(function(){var c,i,o;return Object(s.__generator)(this,(function(s){switch(s.label){case 0:if(t.length)return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,Promise.all(n)];case 2:return c=s.sent(),e(c),[3,4];case 3:return i=s.sent(),r(i),[3,4];case 4:return[3,6];case 5:o=Promise.all(t.map(m)),n.push(o),a(),s.label=6;case 6:return[2]}}))}))}),(function(e){r(e)}))}()}))}function y(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(t){return[2,new Promise((function(t,r){e.file((function(r){var n=u(r,e.fullPath);t(n)}),(function(e){r(e)}))}))]}))}))}var O=r(778),x=r.n(O);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,c=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(c.push(n.value),!t||c.length!==t);i=!0);}catch(o){s=!0,a=o}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A="file-invalid-type",S="file-too-large",C="file-too-small",D="too-many-files",P=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:A,message:"File type must be ".concat(t)}},E=function(e){return{code:S,message:"File is larger than ".concat(e," bytes")}},F=function(e){return{code:C,message:"File is smaller than ".concat(e," bytes")}},I={code:D,message:"Too many files"};function L(e,t){var r="application/x-moz-file"===e.type||x()(e,t);return[r,r?null:P(t)]}function N(e,t,r){if(T(e.size))if(T(t)&&T(r)){if(e.size>r)return[!1,E(r)];if(e.size<t)return[!1,F(t)]}else{if(T(t)&&e.size<t)return[!1,F(t)];if(T(r)&&e.size>r)return[!1,E(r)]}return[!0,null]}function T(e){return void 0!==e&&null!==e}function z(e){var t=e.files,r=e.accept,n=e.minSize,a=e.maxSize,c=e.multiple,i=e.maxFiles;return!(!c&&t.length>1||c&&i>=1&&t.length>i)&&t.every((function(e){var t=w(L(e,r),1)[0],c=w(N(e,n,a),1)[0];return t&&c}))}function M(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function _(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function B(e){e.preventDefault()}function K(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function R(e){return-1!==e.indexOf("Edge/")}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return K(e)||R(e)}function U(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return t.some((function(t){return!M(e)&&t&&t.apply(void 0,[e].concat(n)),M(e)}))}}var W=["children"],J=["open"],H=["refKey","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],G=["refKey","onChange","onClick"];function V(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,c=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(c.push(n.value),!t||c.length!==t);i=!0);}catch(o){s=!0,a=o}finally{try{i||null==r.return||r.return()}finally{if(s)throw a}}return c}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"===typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var re=Object(n.forwardRef)((function(e,t){var r=e.children,c=ce(te(e,W)),i=c.open,s=te(c,J);return Object(n.useImperativeHandle)(t,(function(){return{open:i}}),[i]),a.a.createElement(n.Fragment,null,r(X(X({},s),{},{open:i})))}));re.displayName="Dropzone";var ne={disabled:!1,getFilesFromEvent:function(e){return Object(s.__awaiter)(this,void 0,void 0,(function(){return Object(s.__generator)(this,(function(t){return[2,(r=e,r.dataTransfer&&e.dataTransfer?f(e.dataTransfer,e.type):d(e))];var r}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null};re.defaultProps=ne,re.propTypes={children:i.a.func,accept:i.a.oneOfType([i.a.string,i.a.arrayOf(i.a.string)]),multiple:i.a.bool,preventDropOnDocument:i.a.bool,noClick:i.a.bool,noKeyboard:i.a.bool,noDrag:i.a.bool,noDragEventsBubbling:i.a.bool,minSize:i.a.number,maxSize:i.a.number,maxFiles:i.a.number,disabled:i.a.bool,getFilesFromEvent:i.a.func,onFileDialogCancel:i.a.func,onDragEnter:i.a.func,onDragLeave:i.a.func,onDragOver:i.a.func,onDrop:i.a.func,onDropAccepted:i.a.func,onDropRejected:i.a.func,validator:i.a.func};var ae={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=X(X({},ne),e),r=t.accept,a=t.disabled,c=t.getFilesFromEvent,i=t.maxSize,s=t.minSize,o=t.multiple,u=t.maxFiles,l=t.onDragEnter,d=t.onDragLeave,f=t.onDragOver,p=t.onDrop,b=t.onDropAccepted,g=t.onDropRejected,h=t.onFileDialogCancel,v=t.preventDropOnDocument,m=t.noClick,j=t.noKeyboard,y=t.noDrag,O=t.noDragEventsBubbling,x=t.validator,w=Object(n.useRef)(null),k=Object(n.useRef)(null),A=Object(n.useReducer)(ie,ae),S=$(A,2),C=S[0],D=S[1],P=C.isFocused,E=C.isFileDialogActive,F=C.draggedFiles,T=Object(n.useCallback)((function(){k.current&&(D({type:"openDialog"}),k.current.value=null,k.current.click())}),[D]),K=function(){E&&setTimeout((function(){k.current&&(k.current.files.length||(D({type:"closeDialog"}),"function"===typeof h&&h()))}),300)};Object(n.useEffect)((function(){return window.addEventListener("focus",K,!1),function(){window.removeEventListener("focus",K,!1)}}),[k,E,h]);var R=Object(n.useCallback)((function(e){w.current&&w.current.isEqualNode(e.target)&&(32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),T()))}),[w,k]),W=Object(n.useCallback)((function(){D({type:"focus"})}),[]),J=Object(n.useCallback)((function(){D({type:"blur"})}),[]),Y=Object(n.useCallback)((function(){m||(q()?setTimeout(T,0):T())}),[k,m]),Q=Object(n.useRef)([]),Z=function(e){w.current&&w.current.contains(e.target)||(e.preventDefault(),Q.current=[])};Object(n.useEffect)((function(){return v&&(document.addEventListener("dragover",B,!1),document.addEventListener("drop",Z,!1)),function(){v&&(document.removeEventListener("dragover",B),document.removeEventListener("drop",Z))}}),[w,v]);var re=Object(n.useCallback)((function(e){e.preventDefault(),e.persist(),fe(e),Q.current=[].concat(V(Q.current),[e.target]),_(e)&&Promise.resolve(c(e)).then((function(t){M(e)&&!O||(D({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),l&&l(e))}))}),[c,l,O]),ce=Object(n.useCallback)((function(e){e.preventDefault(),e.persist(),fe(e);var t=_(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(r){}return t&&f&&f(e),!1}),[f,O]),se=Object(n.useCallback)((function(e){e.preventDefault(),e.persist(),fe(e);var t=Q.current.filter((function(e){return w.current&&w.current.contains(e)})),r=t.indexOf(e.target);-1!==r&&t.splice(r,1),Q.current=t,t.length>0||(D({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),_(e)&&d&&d(e))}),[w,d,O]),oe=Object(n.useCallback)((function(e){e.preventDefault(),e.persist(),fe(e),Q.current=[],_(e)&&Promise.resolve(c(e)).then((function(t){if(!M(e)||O){var n=[],a=[];t.forEach((function(e){var t=$(L(e,r),2),c=t[0],o=t[1],u=$(N(e,s,i),2),l=u[0],d=u[1],f=x?x(e):null;if(c&&l&&!f)n.push(e);else{var p=[o,d];f&&(p=p.concat(f)),a.push({file:e,errors:p.filter((function(e){return e}))})}})),(!o&&n.length>1||o&&u>=1&&n.length>u)&&(n.forEach((function(e){a.push({file:e,errors:[I]})})),n.splice(0)),D({acceptedFiles:n,fileRejections:a,type:"setFiles"}),p&&p(n,a,e),a.length>0&&g&&g(a,e),n.length>0&&b&&b(n,e)}})),D({type:"reset"})}),[o,r,s,i,u,c,p,b,g,O,x]),ue=function(e){return a?null:e},le=function(e){return j?null:ue(e)},de=function(e){return y?null:ue(e)},fe=function(e){O&&e.stopPropagation()},pe=Object(n.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,r=void 0===t?"ref":t,n=e.onKeyDown,c=e.onFocus,i=e.onBlur,s=e.onClick,o=e.onDragEnter,u=e.onDragOver,l=e.onDragLeave,d=e.onDrop,f=te(e,H);return X(X(ee({onKeyDown:le(U(n,R)),onFocus:le(U(c,W)),onBlur:le(U(i,J)),onClick:ue(U(s,Y)),onDragEnter:de(U(o,re)),onDragOver:de(U(u,ce)),onDragLeave:de(U(l,se)),onDrop:de(U(d,oe))},r,w),a||j?{}:{tabIndex:0}),f)}}),[w,R,W,J,Y,re,ce,se,oe,j,y,a]),be=Object(n.useCallback)((function(e){e.stopPropagation()}),[]),ge=Object(n.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,a=e.onChange,c=e.onClick,i=te(e,G),s=ee({accept:r,multiple:o,type:"file",style:{display:"none"},onChange:ue(U(a,oe)),onClick:ue(U(c,be)),autoComplete:"off",tabIndex:-1},n,k);return X(X({},s),i)}}),[k,r,o,oe,a]),he=F.length,ve=he>0&&z({files:F,accept:r,minSize:s,maxSize:i,multiple:o,maxFiles:u}),me=he>0&&!ve;return X(X({},C),{},{isDragAccept:ve,isDragReject:me,isFocused:P&&!a,getRootProps:pe,getInputProps:ge,rootRef:w,inputRef:k,open:ue(T)})}function ie(e,t){switch(t.type){case"focus":return X(X({},e),{},{isFocused:!0});case"blur":return X(X({},e),{},{isFocused:!1});case"openDialog":return X(X({},e),{},{isFileDialogActive:!0});case"closeDialog":return X(X({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var r=t.isDragActive,n=t.draggedFiles;return X(X({},e),{},{draggedFiles:n,isDragActive:r});case"setFiles":return X(X({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return X({},ae);default:return e}}},958:function(e,t,r){}}]);
//# sourceMappingURL=14.d9d9967c.chunk.js.map