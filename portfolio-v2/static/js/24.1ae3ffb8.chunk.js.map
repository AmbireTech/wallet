{"version":3,"sources":["resources/aave.svg","components/Wallet/Earn/Card/Card.js","components/Wallet/Earn/Cards/AAVECard/v2Tokens.js","components/Wallet/Earn/Cards/AAVECard/defaultTokens.js","components/Modals/EarnDetailsModal/EarnDetailsModal.js","components/Wallet/Earn/Cards/AAVECard/AAVECard.js","resources/yearn.svg","components/Wallet/Earn/Cards/YearnTesseractCard/useYearn.js","resources/tesseract.svg","components/Wallet/Earn/Cards/YearnTesseractCard/useTesseract.js","components/Wallet/Earn/Cards/YearnTesseractCard/YearnTesseractCard.js","resources/logo.png","hooks/useAmbireEarnDetails.js","components/Modals/AmbireEarnDetailsModal/AmbireEarnDetailsModal.js","components/Wallet/Earn/Cards/AmbireTokensCard/AmbireTokensCard.js","components/Wallet/Earn/Earn.js","lib/icons.js"],"names":["segments","value","Card","loading","unavailable","tokensItems","icon","details","customInfo","onTokenSelect","onValidate","moreDetails","isDepositsDisabled","useState","segment","setSegment","tokens","setTokens","token","setToken","amount","setAmount","disabled","setDisabled","showModal","useModals","currentToken","find","isAmountTooBig","parseFloat","utils","formatUnits","balanceRaw","decimals","buttonDisabled","getEquToken","useCallback","address","type","sortedTokenItems","useMemo","sort","a","b","balance","getMaxAmount","useEffect","filter","length","availableAmount","symbol","amountLabel","className","title","src","alt","searchable","label","defaultValue","items","onChange","map","small","onInput","button","onButtonClick","onClick","clear","v2Tokens","ethereum","baseTokenSymbol","baseTokenAddress","polygon","avalanche","EarnDetailsModal","description","hideModal","buttons","id","AAVELendingPool","Interface","AAVELendingPoolAbi","RAY","lendingPoolAddress","AAVECard","networkId","tokensData","account","addRequest","addToast","useToasts","currentNetwork","useRef","isLoading","setLoading","setUnavailable","setTokensItems","setDetails","apr","networkDetails","networks","defaultTokens","network","t","name","img","getTokenIcon","getToken","addRequestTxn","txn","extraGas","dateAdded","Date","valueOf","chainId","tokenAddress","validate","functionData","bigNumberHexAmount","ethers","parseUnits","toString","toHexString","approveToken","now","to","data","encodeFunctionData","e","console","error","message","loadTokensAPR","uniqueTokenAddresses","lendingPoolContract","Promise","all","getReserveData","catch","Error","aprs","Object","fromEntries","addr","i","liquidityRate","toFixed","loadPool","providerAddress","AAVELendingPoolProviders","provider","getProvider","lendingPoolProviderContract","Contract","getLendingPool","getReservesList","reserves","reservesAddresses","reserve","toLowerCase","supportedATokens","supportedTokens","withdrawTokens","includes","depositTokens","allTokens","Set","tokensAPR","arp","tokenImageUrl","current","invokeLoadPool","AAVE_ICON","v2VaultsAddresses","fantom","customVaultMetadata","displayName","displayIcon","useYearn","vaults","setVaults","getTokenFromPortfolio","toTokensItems","vault","yToken","apy","loadVaults","yearn","Yearn","get","v2Vaults","metadata","vaultAddress","net_apy","selectedToken","depositTokenItems","withdrawTokenItems","YEARN_ICON","POLYGON_SCAN_IMAGES","VAULTS","useTesseract","tToken","portfolioToken","fetchVaultAPY","ticker","fetch","response","json","status","result","tesseractVaultContract","TesseractVaultABI","tokenContract","ERC20ABI","v","href","target","rel","TESSERACT_ICON","BATCHER_ADDRESS","BATCHER_INTERFACE","AmbireBatcherABI","ERC20_INTERFACE","VaultInterface","YEARN_TESSERACT_VAULT_ABI","TESSERACT_DETAILS","YEARN_DETAILS","YearnTesseractCard","accountId","tesseract","item","parsedAmount","slice","indexOf","Number","bigNumberAmount","transferTx","batchCallTxn","allowance","lt","constants","MaxUint256","push","load","ZERO","BigNumber","from","ZERO_ADDR","PRECISION","POOL_SHARES_TOKEN_DECIMALS_MUL","STAKING_POOL_EVENT_TYPES","ethProvider","useAmbireEarnDetails","addresses","tokenLabel","getAdexToStakingTransfersLogs","useConstants","WALLET_ADDR","stakingTokenAddress","setIsLoading","getStats","xWalletContract","stakingPoolAbi","walletContract","tokenAbi","fromBlockHardcoded","shareValue","totalSupply","balanceOf","lockedShares","getLogs","fromBlock","filters","Transfer","LogLeave","LogWithdraw","LogRageLeave","sharesTotalSupply","balanceShares","allEnterWalletTransferLogs","leaveLogs","withdrawLogs","rageLeaveLogs","sharesTokensTransfersInLogs","sharesTokensTransfersOutLogs","userShare","isZero","mul","div","toNumber","adexToStakingTransfersLogs","enterWalletTokensByTxHash","concat","reduce","byHash","log","transactionHash","sharesTokensTransfersIn","interface","parseLog","args","blockNumber","shares","sharesTokensTransfersOut","x","txns","event","shareTokensEnterMintByHash","shareTokensTransfersInByTxHash","sharesTokensTransfersInFromExternal","values","userEnters","sharesMintEvent","adexTokenTransfersLog","parsedWalletLog","walletAmount","userWithdraws","unlocksAt","maxTokens","receivedTokens","userRageLeaves","parsedLog","withdrawTx","unbondingCommitmentWorth","walletValue","canWithdraw","userLeaves","leavesPendingToUnlock","leavesReadyToWithdraw","leavesPendingToUnlockTotalMax","add","leavesPendingToUnlockTotalWallet","leavesReadyToWithdrawTotalMax","leavesReadyToWithdrawTotalWallet","leavePendingToUnlockOrReadyToWithdraw","latestLog","remainingTime","Math","min","MAX_SAFE_INTEGER","allLeaveLogs","allWithdrawLogs","allRageLeaveLogs","allEnterSharesTokensTransfersInLogs","allEnters","walletTokenTransfersLog","allWithdraws","allRageLeaves","allLeaves","allLogs","withWalletAmount","events","forEach","transferLog","bestShareValue","totalSharesOutTransfers","totalSharesOutTransfersWalletValue","totalSharesInTransfers","totalSharesInTransfersWalletValue","depositsWalletTotal","rageLeavesWithdrawnWalletTotal","rageLeavesReceivedWalletTotal","withdrawsWalletTotal","totalLockedSharesCheck","eq","balanceSharesAvailable","sub","currentBalanceWalletAvailable","currentBalanceWallet","currentBalanceSharesWalletValue","hasInsufficentBalanceForUnbondCommitments","insufficientSharesAmoutForCurrentUnbonds","currentBalanceWalletAtCurrentShareValue","totalInTokenValue","totalOutTokenValue","totalRewards","hasActiveUnbondCommitments","stakings","stakingEvent","getBlock","timestamp","withTimestamp","stats","loaded","userDataLoaded","poolShare","allTimeRewards","totalDeposit","totalWithdraws","pendingToUnlock","readyToWithdraw","getData","AmbireEarnDetailsModal","msToDaysHours","ADX_TOKEN_ADDRESS","ADX_STAKING_TOKEN_ADDRESS","ADX_STAKING_POOL_INTERFACE","AdexStakingPool","ADDR_ADX_SUPPLY_CONTROLLER","WALLET_TOKEN_ADDRESS","WALLET_STAKING_ADDRESS","ADX_LABEL","WALLET_LABEL","WALLET_STAKING_POOL_INTERFACE","WalletStakingPoolABI","secondsInYear","ms","day","days","floor","hours","attachMetaIfNeeded","req","rewardsData","meta","rewards","walletTokenUsdPrice","walletUsdPrice","xWallet","APY","xWALLETAPY","AmbireTokensCard","setCustomInfo","stakingTokenContract","setStakingTokenContract","setShareValue","stakingTokenBalanceRaw","SetStakingTokenBalanceRaw","leaveLog","setLeaveLog","lockedRemainingTime","setLockedRemainingTime","stakingPoolInterface","setAddresses","setSelectedToken","adxCurrentAPY","setAdxCurrentAPY","isUnbondModalVisible","setIsUnbondModalVisible","isUnstakeConfirmed","setIsUnstakeConfirmed","validateData","setValidateData","getLockDays","request","xWALLETAPYPercentage","walletToken","xWalletToken","adexToken","adexStakingToken","y","onWithdraw","isAdxTokenSelected","unbondToolTipLabelMdg","apyTooltipMsg","_tokenAddress","isMaxAmount","handleUnstake","xWalletAmount","walletABI","supplyController","supplyControllerABI","incentivePerSecond","poolTotalStaked","currentAPY","init","UnbondModal","isVisible","text","AMBIRE_ICON","Earn","portfolio","selectedNetwork","selectedAcc","isCurrNetworkBalanceLoading","customIcons","zapperStorageTokenIcons","net"],"mappings":"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","file":"static/js/24.1ae3ffb8.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/aave.58aec338.svg\";","import './Card.scss'\n\nimport { Select, Segments, NumberInput, Button, Loading } from 'components/common'\nimport { useEffect, useState, useMemo, useCallback } from 'react'\nimport { BsArrowDownSquare, BsArrowUpSquare } from 'react-icons/bs'\nimport { utils } from 'ethers'\nimport { useModals } from 'hooks'\nimport { MdOutlineInfo } from 'react-icons/md'\n\nconst segments = [{ value: 'Deposit' }, { value: 'Withdraw' }]\n\nconst Card = ({ loading, unavailable, tokensItems, icon, details, customInfo, onTokenSelect, onValidate, moreDetails, isDepositsDisabled = false }) => {\n    const [segment, setSegment] = useState(segments[0].value)\n    const [tokens, setTokens] = useState([])\n    const [token, setToken] = useState()\n    const [amount, setAmount] = useState(0)\n    const [disabled, setDisabled] = useState(true)\n    const { showModal } = useModals()\n    \n    const currentToken = tokens.find(({ value }) => value === token)\n    const isAmountTooBig = parseFloat(amount) > (currentToken && 'balanceRaw' in currentToken ? parseFloat(utils.formatUnits(currentToken.balanceRaw, currentToken.decimals)) : 0)\n\n    const buttonDisabled = disabled || amount === '' || parseFloat(amount) <= 0 || isAmountTooBig || (segment === segments[0].value && isDepositsDisabled) \n\n    // Sort tokens items by balance\n    const getEquToken = useCallback(token => tokensItems.find((({ address, type }) => address === token.address && (token.type === 'deposit' ? type === 'withdraw' : type === 'deposit'))), [tokensItems])\n    const sortedTokenItems = useMemo(() => [...tokensItems].sort((a, b) => (b?.balance + getEquToken(b)?.balance) - (a?.balance + getEquToken(a)?.balance)), [tokensItems, getEquToken])\n\n    const getMaxAmount = () => {\n        if (!currentToken) return 0;\n        const { balanceRaw, decimals } = currentToken\n        return utils.formatUnits(balanceRaw, decimals)\n    }\n\n    const setMaxAmount = () => setAmount(getMaxAmount(amount))\n\n    const isMaxAmount = () => {\n        return amount === getMaxAmount()\n    }\n\n    useEffect(() => {\n        if (segment === segments[0].value) setTokens(sortedTokenItems.filter(({ type }) => type === 'deposit'))\n        if (segment === segments[1].value) setTokens(sortedTokenItems.filter(({ type }) => type === 'withdraw'))\n    }, [segment, sortedTokenItems])\n\n    useEffect(() => setAmount(0), [token, segment])\n\n    useEffect(() => {\n        onTokenSelect(token)\n        setDisabled(!token || !tokens.length)\n    }, [token, onTokenSelect, tokens.length])\n\n    const availableAmount = !disabled ? `${getMaxAmount()} ${currentToken?.symbol}` : '0'\n\n    const amountLabel = <div className=\"amount-label\">Available Amount: <span title={availableAmount}>{availableAmount}</span></div>\n\n    const showMoreDetails = () => {\n        if (!!moreDetails) showModal(moreDetails)\n    }\n\n    return (\n        <div className=\"card\">\n            <div className=\"title\">\n                <img src={icon} alt=\"Icon\" />\n            </div>\n            {\n                loading ?\n                    <Loading/>\n                    :\n                    unavailable ?\n                        <div className=\"unavailable\">\n                            Unavailable on this Network\n                        </div>\n                        :\n                        <div className=\"content\">\n                            <Select\n                                searchable\n                                disabled={disabled}\n                                label=\"Choose Token\"\n                                defaultValue={token}\n                                items={tokens}\n                                onChange={({ value }) => setToken(value)}\n                            />\n                            {\n                                !disabled ?\n                                   (details.length > 1) ? \n                                        (<ul className=\"details\">\n                                            {\n                                                details.map(([type, value]) => (\n                                                    <li key={type}><b>{type}</b> {value}</li>\n                                                ))\n                                            }\n                                        </ul>) \n                                        :\n                                        <>{details[0]}</>\n                                :\n                                <div className=\"details-placeholder\">\n                                    <div/>\n                                    <div/>\n                                    <div/>\n                                </div>\n                            }\n                            <Segments small defaultValue={segment} segments={segments} onChange={(value) => setSegment(value)} />\n                            {\n                                customInfo ? \n                                    <div className=\"info\">\n                                        { customInfo }\n                                    </div>\n                                    :\n                                    <>\n                                        <NumberInput\n                                            disabled={!currentToken?.balance}\n                                            // The component does not take these props\n                                            // min=\"0\" \n                                            // max={currentToken?.balance}\n                                            value={amount}\n                                            label={amountLabel}\n                                            onInput={(value) => setAmount(value)}\n                                            button=\"MAX\"\n                                            onButtonClick={setMaxAmount}\n                                        />\n                                        <div className=\"separator\"></div>\n                                        <Button \n                                            disabled={buttonDisabled}\n                                            icon={segment === segments[0].value ? <BsArrowDownSquare/> : <BsArrowUpSquare/>}\n                                            onClick={() => onValidate(segment, token, amount, isMaxAmount())}\n                                        >\n                                                { segment }\n                                        </Button>\n                                    </>\n                            }\n                            <div className=\"separator\"></div>\n                            {!!moreDetails && \n                                <Button \n                                    clear\n                                    icon={ <MdOutlineInfo/> }\n                                    onClick={() => showMoreDetails()}\n                                >\n                                    See more details\n                                </Button>\n                            }\n                        </div>\n            }\n        </div>\n    )\n}\n\nexport default Card\n","const v2Tokens = {\n  ethereum: [\n    {\n      address:\"0x3Ed3B47Dd13EC9a98b44e6204A523E766B225811\",\n      symbol:\"aUSDT\",\n      baseTokenSymbol:\"USDT\",\n      baseTokenAddress:\"0xdAC17F958D2ee523a2206206994597C13D831ec7\"\n    },\n    {\n      address:\"0x9ff58f4fFB29fA2266Ab25e75e2A8b3503311656\",\n      symbol:\"aWBTC\",\n      baseTokenSymbol:\"WBTC\",\n      baseTokenAddress:\"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599\"\n    },\n    {\n      address:\"0x030bA81f1c18d280636F32af80b9AAd02Cf0854e\",\n      symbol:\"aWETH\",\n      baseTokenSymbol:\"WETH\",\n      baseTokenAddress:\"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2\"\n    },\n    {\n      address:\"0x5165d24277cD063F5ac44Efd447B27025e888f37\",\n      symbol:\"aYFI\",\n      baseTokenSymbol:\"YFI\",\n      baseTokenAddress:\"0x0bc529c00C6401aEF6D220BE8C6Ea1667F6Ad93e\"\n    },\n    {\n      address:\"0xDf7FF54aAcAcbFf42dfe29DD6144A69b629f8C9e\",\n      symbol:\"aZRX\",\n      baseTokenSymbol:\"ZRX\",\n      baseTokenAddress:\"0xE41d2489571d322189246DaFA5ebDe1F4699F498\"\n    },\n    {\n      address:\"0xB9D7CB55f463405CDfBe4E90a6D2Df01C2B92BF1\",\n      symbol:\"aUNI\",\n      baseTokenSymbol:\"UNI\",\n      baseTokenAddress:\"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984\"\n    },\n    {\n      address:\"0xFFC97d72E13E01096502Cb8Eb52dEe56f74DAD7B\",\n      symbol:\"aAAVE\",\n      baseTokenSymbol:\"AAVE\",\n      baseTokenAddress:\"0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9\"\n    },\n    {\n      address:\"0x05Ec93c0365baAeAbF7AefFb0972ea7ECdD39CF1\",\n      symbol:\"aBAT\",\n      baseTokenSymbol:\"BAT\",\n      baseTokenAddress:\"0x0D8775F648430679A709E98d2b0Cb6250d2887EF\"\n    },\n    {\n      address:\"0xA361718326c15715591c299427c62086F69923D9\",\n      symbol:\"aBUSD\",\n      baseTokenSymbol:\"BUSD\",\n      baseTokenAddress:\"0x4Fabb145d64652a948d72533023f6E7A623C7C53\"\n    },\n    {\n      address:\"0x028171bCA77440897B824Ca71D1c56caC55b68A3\",\n      symbol:\"aDAI\",\n      baseTokenSymbol:\"DAI\",\n      baseTokenAddress:\"0x6B175474E89094C44Da98b954EedeAC495271d0F\"\n    },\n    {\n      address:\"0xaC6Df26a590F08dcC95D5a4705ae8abbc88509Ef\",\n      symbol:\"aENJ\",\n      baseTokenSymbol:\"ENJ\",\n      baseTokenAddress:\"0xF629cBd94d3791C9250152BD8dfBDF380E2a3B9c\"\n    },\n    {\n      address:\"0x39C6b3e42d6A679d7D776778Fe880BC9487C2EDA\",\n      symbol:\"aKNC\",\n      baseTokenSymbol:\"KNC\",\n      baseTokenAddress:\"0xdd974D5C2e2928deA5F71b9825b8b646686BD200\"\n    },\n    {\n      address:\"0xa06bC25B5805d5F8d82847D191Cb4Af5A3e873E0\",\n      symbol:\"aLINK\",\n      baseTokenSymbol:\"LINK\",\n      baseTokenAddress:\"0x514910771AF9Ca656af840dff83E8264EcF986CA\"\n    },\n    {\n      address:\"0xa685a61171bb30d4072B338c80Cb7b2c865c873E\",\n      symbol:\"aMANA\",\n      baseTokenSymbol:\"MANA\",\n      baseTokenAddress:\"0x0F5D2fB29fb7d3CFeE444a200298f468908cC942\"\n    },\n    {\n      address:\"0xc713e5E149D5D0715DcD1c156a020976e7E56B88\",\n      symbol:\"aMKR\",\n      baseTokenSymbol:\"MKR\",\n      baseTokenAddress:\"0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2\"\n    },\n    {\n      address:\"0xCC12AbE4ff81c9378D670De1b57F8e0Dd228D77a\",\n      symbol:\"aREN\",\n      baseTokenSymbol:\"REN\",\n      baseTokenAddress:\"0x408e41876cCCDC0F92210600ef50372656052a38\"\n    },\n    {\n      address:\"0x35f6B052C598d933D69A4EEC4D04c73A191fE6c2\",\n      symbol:\"aSNX\",\n      baseTokenSymbol:\"SNX\",\n      baseTokenAddress:\"0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F\"\n    },\n    {\n      address:\"0x6C5024Cd4F8A59110119C56f8933403A539555EB\",\n      symbol:\"aSUSD\",\n      baseTokenSymbol:\"sUSD\",\n      baseTokenAddress:\"0x57Ab1ec28D129707052df4dF418D58a2D46d5f51\"\n    },\n    {\n      address:\"0x101cc05f4A51C0319f570d5E146a8C625198e636\",\n      symbol:\"aTUSD\",\n      baseTokenSymbol:\"TUSD\",\n      baseTokenAddress:\"0x0000000000085d4780B73119b644AE5ecd22b376\"\n    },\n    {\n      address:\"0xBcca60bB61934080951369a648Fb03DF4F96263C\",\n      symbol:\"aUSDC\",\n      baseTokenSymbol:\"USDC\",\n      baseTokenAddress:\"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48\"\n    },\n    {\n      address:\"0x8dAE6Cb04688C62d939ed9B68d32Bc62e49970b1\",\n      symbol:\"aCRV\",\n      baseTokenSymbol:\"CRV\",\n      baseTokenAddress:\"0xD533a949740bb3306d119CC777fa900bA034cd52\"\n    },\n    {\n      address:\"0xD37EE7e4f452C6638c96536e68090De8cBcdb583\",\n      symbol:\"aGUSD\",\n      baseTokenSymbol:\"GUSD\",\n      baseTokenAddress:\"0x056Fd409E1d7A124BD7017459dFEa2F387b6d5Cd\"\n    },\n    {\n      address:\"0x272F97b7a56a387aE942350bBC7Df5700f8a4576\",\n      symbol:\"aBAL\",\n      baseTokenSymbol:\"BAL\",\n      baseTokenAddress:\"0xba100000625a3754423978a60c9317c58a424e3D\"\n    },\n    {\n      address:\"0xF256CC7847E919FAc9B808cC216cAc87CCF2f47a\",\n      symbol:\"aXSUSHI\",\n      baseTokenSymbol:\"xSUSHI\",\n      baseTokenAddress:\"0x8798249c2E607446EfB7Ad49eC89dD1865Ff4272\"\n    },\n    {\n      address:\"0x514cd6756CCBe28772d4Cb81bC3156BA9d1744aa\",\n      symbol:\"aRENFIL\",\n      baseTokenSymbol:\"renFIL\",\n      baseTokenAddress:\"0xD5147bc8e386d91Cc5DBE72099DAC6C9b99276F5\"\n    },\n    {\n      address:\"0xc9BC48c72154ef3e5425641a3c747242112a46AF\",\n      symbol:\"aRAI\",\n      baseTokenSymbol:\"RAI\",\n      baseTokenAddress:\"0x03ab458634910AaD20eF5f1C8ee96F1D6ac54919\"\n    },\n    {\n      address:\"0x1E6bb68Acec8fefBD87D192bE09bb274170a0548\",\n      symbol:\"aAMPL\",\n      baseTokenSymbol:\"AMPL\",\n      baseTokenAddress:\"0xD46bA6D942050d489DBd938a2C909A5d5039A161\"\n    },\n    {\n      address:\"0x2e8F4bdbE3d47d7d7DE490437AeA9915D930F1A3\",\n      symbol:\"aUSDP\",\n      baseTokenSymbol:\"USDP\",\n      baseTokenAddress:\"0x8E870D67F660D95d5be530380D0eC0bd388289E1\"\n    },\n    {\n      address:\"0x6F634c6135D2EBD550000ac92F494F9CB8183dAe\",\n      symbol:\"aDPI\",\n      baseTokenSymbol:\"DPI\",\n      baseTokenAddress:\"0x1494CA1F11D487c2bBe4543E90080AeBa4BA3C2b\"\n    },\n    {\n      address:\"0xd4937682df3C8aEF4FE912A96A74121C0829E664\",\n      symbol:\"aFRAX\",\n      baseTokenSymbol:\"FRAX\",\n      baseTokenAddress:\"0x853d955aCEf822Db058eb8505911ED77F175b99e\"\n    },\n    {\n      address:\"0x683923dB55Fead99A79Fa01A27EeC3cB19679cC3\",\n      symbol:\"aFEI\",\n      baseTokenSymbol:\"FEI\",\n      baseTokenAddress:\"0x956F47F50A910163D8BF957Cf5846D573E7f87CA\"\n    }\n  ],\n  polygon: [\n    {\n      address:\"0x27F8D03b3a2196956ED754baDc28D73be8830A6e\",\n      symbol:\"amDAI\",\n      baseTokenSymbol:\"DAI\",\n      baseTokenAddress:\"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063\"\n    },\n    {\n      address:\"0x1a13F4Ca1d028320A707D99520AbFefca3998b7F\",\n      symbol:\"amUSDC\",\n      baseTokenSymbol:\"USDC\",\n      baseTokenAddress:\"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174\"\n    },\n    {\n      address:\"0x60D55F02A771d515e077c9C2403a1ef324885CeC\",\n      symbol:\"amUSDT\",\n      baseTokenSymbol:\"USDT\",\n      baseTokenAddress:\"0xc2132D05D31c914a87C6611C10748AEb04B58e8F\"\n    },\n    {\n      address:\"0x5c2ed810328349100A66B82b78a1791B101C9D61\",\n      symbol:\"amWBTC\",\n      baseTokenSymbol:\"WBTC\",\n      baseTokenAddress:\"0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6\"\n    },\n    {\n      address:\"0x28424507fefb6f7f8E9D3860F56504E4e5f5f390\",\n      symbol:\"amWETH\",\n      baseTokenSymbol:\"WETH\",\n      baseTokenAddress:\"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619\"\n    },\n    {\n      address:\"0x8dF3aad3a84da6b69A4DA8aeC3eA40d9091B2Ac4\",\n      symbol:\"amWMATIC\",\n      baseTokenSymbol:\"WMATIC\",\n      baseTokenAddress:\"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270\"\n    },\n    {\n      address:\"0x1d2a0E5EC8E5bBDCA5CB219e649B565d8e5c3360\",\n      symbol:\"amAAVE\",\n      baseTokenSymbol:\"AAVE\",\n      baseTokenAddress:\"0xD6DF932A45C0f255f85145f286eA0b292B21C90B\"\n    }\n  ],\n  avalanche: [\n    {\n      address: '0x53f7c5869a859F0AeC3D334ee8B4Cf01E3492f21',\n      symbol: 'avWETH',\n      baseTokenAddress: '0x49D5c2BdFfac6CE2BFdB6640F4F80f226bc10bAB',\n      baseTokenSymbol: 'WETH.e'\n    },\n    {\n      address: '0x47AFa96Cdc9fAb46904A55a6ad4bf6660B53c38a',\n      symbol: 'avDAI',\n      baseTokenAddress: '0xd586E7F844cEa2F87f50152665BCbc2C279D8d70',\n      baseTokenSymbol: 'DAI.e'\n    },\n    {\n      address: '0xc7198437980c041c805A1EDcbA50c1Ce5db95118',\n      symbol: 'avUSDT',\n      baseTokenAddress: '0x532E6537FEA298397212F09A61e03311686f548e',\n      baseTokenSymbol: 'USDT.e'\n    },\n    {\n      address: '0x46A51127C3ce23fb7AB1DE06226147F446e4a857',\n      symbol: 'avUSDC',\n      baseTokenAddress: '0xA7D7079b0FEaD91F3e65f86E8915Cb59c1a4C664',\n      baseTokenSymbol: 'USDC.e'\n    },\n    {\n      address: '0xD45B7c061016102f9FA220502908f2c0f1add1D7',\n      symbol: 'avAAVE',\n      baseTokenAddress: '0x63a72806098Bd3D9520cC43356dD78afe5D386D9',\n      baseTokenSymbol: 'AAVE.e'\n    },\n    {\n      address: '0x686bEF2417b6Dc32C50a3cBfbCC3bb60E1e9a15D',\n      symbol: 'avWBTC',\n      baseTokenAddress: '0x50b7545627a5162F82A992c33b87aDc75187B218',\n      baseTokenSymbol: 'WBTC.e'\n    },\n    {\n      address: '0xDFE521292EcE2A4f44242efBcD66Bc594CA9714B',\n      symbol: 'avWAVAX',\n      baseTokenAddress: '0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7',\n      baseTokenSymbol: 'WAVAX.e'\n    }\n    \n  ]\n}\n\nexport default v2Tokens","import { getTokenIcon } from 'lib/icons'\nimport v2Tokens from './v2Tokens'\n\nlet tokens = {\n    ethereum: v2Tokens.ethereum,\n    polygon: v2Tokens.polygon,\n    avalanche: v2Tokens.avalanche,\n    'binance-smart-chain': []\n}\n\nconst getDefaultTokensItems = network => {\n    if (!tokens[network]) return []\n    return [\n        ...tokens[network].map(t => ({\n            address: t.baseTokenAddress,\n            baseTokenAddress: t.baseTokenAddress,\n            symbol: t.baseTokenSymbol,\n            name: t.baseTokenSymbol,\n            img: getTokenIcon(network, t.baseTokenAddress),\n            balance: 0,\n            balanceRaw: '0',\n            type: 'deposit'\n        })) || [],\n        ...tokens[network].map(t => ({\n            address: t.address,\n            baseTokenAddress: t.baseTokenAddress,\n            symbol: t.symbol,\n            name: t.symbol,\n            img: getTokenIcon(network, t.baseTokenAddress),\n            balance: 0,\n            balanceRaw: '0',\n            type: 'withdraw'\n        })) || []\n    ]\n}\n\nexport { getDefaultTokensItems }\n","import './EarnDetailsModal.scss'\n\nimport { MdClose } from 'react-icons/md'\nimport { useModals } from 'hooks'\nimport { Modal, Button } from 'components/common'\n\nconst EarnDetailsModal = ({ title = 'Details', description = '' }) => {\n    const { hideModal } = useModals()\n    const buttons = (<Button clear small icon={<MdClose />} onClick={hideModal}>Close</Button>)\n   \n    return (\n        <Modal id=\"wallet-more-details-modal\" title={title} buttons={buttons}>\n            <p>{description}</p>\n        </Modal>\n    )\n}\n\nexport default EarnDetailsModal\n","import { ethers } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { useToasts } from 'hooks/toasts'\nimport AAVELendingPoolAbi from 'ambire-common/src/constants/abis/AAVELendingPoolAbi'\nimport AAVELendingPoolProviders from 'ambire-common/src/constants/AAVELendingPoolProviders'\nimport networks from 'consts/networks'\nimport { getProvider } from 'lib/provider'\nimport { ToolTip } from \"components/common\"\nimport AAVE_ICON from 'resources/aave.svg'\nimport Card from 'components/Wallet/Earn/Card/Card'\nimport { getDefaultTokensItems } from './defaultTokens'\nimport approveToken from 'ambire-common/src/services/approveToken'\nimport EarnDetailsModal from 'components/Modals/EarnDetailsModal/EarnDetailsModal'\nimport { MdInfo } from \"react-icons/md\"\n\nconst AAVELendingPool = new Interface(AAVELendingPoolAbi)\nconst RAY = 10**27\nlet lendingPoolAddress = null\n\nconst AAVECard = ({ networkId, tokens: tokensData, account, addRequest }) => {\n    const [tokens] = useState(tokensData)\n    const { addToast } = useToasts()\n\n    const currentNetwork = useRef()\n    const [isLoading, setLoading] = useState(true)\n    const [unavailable, setUnavailable] = useState(false)\n    const [tokensItems, setTokensItems] = useState([])\n    const [details, setDetails] = useState([])\n\n    const onTokenSelect = useCallback(async (value) => {\n        const token = tokensItems.find(({ address }) => address === value)\n        if (token) {\n            setDetails([\n                [\n                    <>\n                        <ToolTip label=\"Annual Percentage Rate\">\n                            <div>APR&nbsp;<MdInfo/></div>\n                        </ToolTip>\n                    </>,\n                    `${token.apr}%`\n                ],\n                ['Lock', 'No Lock'],\n                ['Type', 'Variable Rate'],\n            ])\n        }\n    }, [tokensItems])\n\n    const networkDetails = networks.find(({ id }) => id === networkId)\n    const defaultTokens = useMemo(() => getDefaultTokensItems(networkDetails.id), [networkDetails.id])\n    const getToken = (type, address) => tokensItems.filter(token => token.type === type).find(token => token.address === address)\n    const addRequestTxn = (id, txn, extraGas = 0) => addRequest({ id, dateAdded: new Date().valueOf(), type: 'eth_sendTransaction', chainId: networkDetails.chainId, account, txn, extraGas })\n\n    const onValidate = async (type, tokenAddress, amount) => {\n        const validate = async (type, functionData) => {\n            const token = getToken(type, tokenAddress)\n            const bigNumberHexAmount = ethers.utils.parseUnits(amount.toString(), token.decimals).toHexString()\n            if (type === 'deposit') await approveToken('Aave Pool', networkDetails.id, account, lendingPoolAddress, tokenAddress, addRequestTxn, addToast)\n\n            try {\n                addRequestTxn(`aave_pool_${type}_${Date.now()}`, {\n                    to: lendingPoolAddress,\n                    value: '0x0',\n                    data: AAVELendingPool.encodeFunctionData(type, [tokenAddress, bigNumberHexAmount, ...functionData])\n                }, 60000)\n            } catch(e) {\n                console.error(e)\n                addToast(`Aave ${type} Error: ${e.message || e}`, { error: true })\n            }\n        }\n        if (type === 'Deposit') {\n            validate('deposit', [account, 0])\n        }\n        else if (type === 'Withdraw') {\n            validate('withdraw', [account])\n        }\n    }\n\n    const loadTokensAPR = useCallback(async(uniqueTokenAddresses, lendingPoolContract) => {\n        const aprs = await Promise.all(uniqueTokenAddresses.map(address => lendingPoolContract.getReserveData(address).catch(e => { throw Error(e) })))\n        return Object.fromEntries(uniqueTokenAddresses.map((addr, i) => {\n            const { liquidityRate } = aprs[i]\n            const apr = ((liquidityRate / RAY) * 100).toFixed(2)\n            return ([addr, apr])\n        }))\n    }, [])\n \n    const loadPool = useCallback(async () => {\n        const providerAddress = AAVELendingPoolProviders[networkDetails.id]\n        if (!providerAddress) {\n            setLoading(false)\n            setUnavailable(true)\n            return\n        }\n\n        try {\n            const provider = getProvider(networkDetails.id)\n            const lendingPoolProviderContract = new ethers.Contract(providerAddress, AAVELendingPool, provider)\n            lendingPoolAddress = await lendingPoolProviderContract.getLendingPool()\n\n            const lendingPoolContract = new ethers.Contract(lendingPoolAddress, AAVELendingPool, provider)\n            const reserves = await lendingPoolContract.getReservesList()\n            const reservesAddresses = reserves.map(reserve => reserve.toLowerCase())\n\n            const supportedATokens = defaultTokens.filter(t => t.type === 'withdraw').map(t => t.address.toLowerCase())\n\n            const supportedTokens = defaultTokens.filter(t => t.type === 'deposit').map(t => t.address.toLowerCase())\n\n            const withdrawTokens = tokens.filter(({ address }) => supportedATokens.includes(address.toLowerCase())).map(token => ({\n                ...token,\n                address: defaultTokens.find(t => t.type === 'withdraw' && t.address.toLowerCase() === token.address.toLowerCase())?.baseTokenAddress,\n                type: 'withdraw'\n            })).filter(token => token).sort((a, b) => b.balance - a.balance)\n\n            const depositTokens = tokens.filter(({ address }) => supportedTokens.includes(address.toLowerCase())).filter(t => reservesAddresses.includes(t.address)).map(token => ({\n                ...token,\n                type: 'deposit'\n            })).filter(token => token).sort((a, b) => b.balance - a.balance)\n\n            const allTokens = [\n                ...withdrawTokens,\n                ...depositTokens,\n                ...defaultTokens.filter(({ type, address }) => type === 'deposit' && !depositTokens.map(({ address }) => address.toLowerCase()).includes(address.toLowerCase())),\n                ...defaultTokens.filter(({ type, baseTokenAddress }) => type === 'withdraw' && !withdrawTokens.map(({ address }) => address.toLowerCase()).includes(baseTokenAddress.toLowerCase()))\n            ]\n\n            const uniqueTokenAddresses = [...new Set(allTokens.map(({ address }) => address))]\n\n\n            const tokensAPR = await loadTokensAPR(uniqueTokenAddresses, lendingPoolContract)\n            const tokensItems = allTokens.map(token => {\n                const arp = tokensAPR[token.address] === '0.00' && tokensAPR[token.baseTokenAddress]\n                ? tokensAPR[token.baseTokenAddress]\n                : tokensAPR[token.address]\n                return {\n                    ...token,\n                    apr: arp,\n                    icon: token.img || token.tokenImageUrl,\n                    label: `${token.symbol} (${arp}% APR)`,\n                    value: token.address\n                }\n            })\n            // Prevent race conditions\n            if (currentNetwork.current !== networkDetails.id) return\n\n            setTokensItems(tokensItems)\n            setLoading(false)\n            setUnavailable(false)\n        } catch(e) {\n            console.error(e);\n            addToast(`Aave load pool error: ${e.message || e}`, { error: true })\n        }\n    }, [networkDetails.id, defaultTokens, tokens, loadTokensAPR, addToast])\n\n    useEffect(() => {\n        const invokeLoadPool = async() => await loadPool()\n        invokeLoadPool()\n\n        return () => {\n            setTokensItems([])\n            setLoading(false)\n            setUnavailable(false)\n        }\n    }, [loadPool, unavailable])\n    useEffect(() => {\n        currentNetwork.current = networkId\n        setLoading(true)\n    }, [networkId])\n\n    return (\n        <Card\n            loading={isLoading}\n            unavailable={unavailable}\n            icon={AAVE_ICON} details={details}\n            tokensItems={tokensItems}\n            onTokenSelect={onTokenSelect}\n            onValidate={onValidate}\n            moreDetails={<EarnDetailsModal\n                title={'What is Aave'}\n                description={'Aave is an open source and non-custodial DeFi protocol for earning interest on deposits and borrowing assets. Depositors provide liquidity to the market to earn a passive income, while borrowers are able to borrow in an overcollateralized (perpetually) or undercollateralized (one-block liquidity) fashion.'}/>}\n            />\n    )\n}\n\nexport default AAVECard","export default __webpack_public_path__ + \"static/media/yearn.ac5ab573.svg\";","import { useCallback, useEffect, useState } from 'react'\nimport { Yearn } from '@yfi/sdk'\nimport { MdInfo } from \"react-icons/md\"\nimport { ToolTip } from \"components/common\"\n\nimport YEARN_ICON from 'resources/yearn.svg'\n\nconst v2VaultsAddresses = { ethereum: [\n    '0xdA816459F1AB5631232FE5e97a05BBBb94970c95',\n    '0xa354F35829Ae975e850e23e9615b11Da1B3dC4DE',\n    '0xdb25cA703181E7484a155DD612b06f57E12Be5F0',\n    '0xA696a63cc78DfFa1a63E9E50587C197387FF6C7E',\n    '0x7Da96a3891Add058AdA2E826306D812C638D87a7',\n    '0xB8C3B7A2A618C552C23B1E4701109a9E756Bab67',\n    '0xe11ba472F74869176652C35D30dB89854b5ae84D',\n    '0xa258C4606Ca8206D8aA700cE2143D7db854D168c',\n    '0xFBEB78a723b8087fD2ea7Ef1afEc93d35E8Bed42',\n    '0x6d765CbE5bC922694afE112C140b8878b9FB0390',\n    '0xFD0877d9095789cAF24c98F7CCe092fa8E120775',\n    '0xd9788f3931Ede4D5018184E198699dC6d66C1915',\n], fantom: [\n    '0x0DEC85e74A92c52b7F708c4B10207D9560CEFaf0',\n    '0x695A4a6e5888934828Cb97A3a7ADbfc71A70922D',\n    '0x935601c5694f23491921c14aA235c65c2ea2c4DE',\n    '0x28F2fB6730d5dbeFc4FF9eB375Bbf33BcB36e774',\n    '0x8b8b4018F1d1e28217A1c7432E729e58e1828D59',\n    '0x2C850cceD00ce2b14AA9D658b7Cad5dF659493Db',\n    '0xDf262B43bea0ACd0dD5832cf2422e0c9b2C539dc',\n    '0x637eC617c86D24E421328e6CAEa1d92114892439',\n    '0xdC9D3bB76Df8bE1e9Ca68C7BF32293a86C829D81',\n    '0xd025b85db175EF1b175Af223BD37f330dB277786',\n    '0xEF0210eB96c7EB36AF8ed1c20306462764935607',\n    '0x27a5ce447f4E581aE69061E90521da4B5b298818',\n    '0x42639b59cf9db5339C1C5cfB5738D0ba4F828F94',\n    '0x148c05caf1Bb09B5670f00D511718f733C54bC4c',\n    '0x3B9bc1f596844Ca8a30A7710Aac7155968Db7d13',\n    '0x83a5Af7540E919dE74cf2D6d5F40e47f11D3E8d1',\n    '0x0A0b23D9786963DE69CB2447dC125c49929419d8',\n    '0x8A807b5742587024783Df3Ed2F149725C197b5eE',\n    '0xD0D1f041F93c0fF1091457618E529610C67A76de',\n    '0x24BC86a808D45f0AAd8008bd3ac2D9356007e833',\n    '0x357ca46da26E1EefC195287ce9D838A6D5023ef3',\n    '0xfF8bb7261E4D51678cB403092Ae219bbEC52aa51',\n    '0xF137D22d7B23eeB1950B3e19d1f578c053ed9715',\n    '0x7ff6fe5bDa1b26fa46880dF8AF844326DAd50d13',\n    '0x0446acaB3e0242fCf33Aa526f1c95a88068d5042',\n    '0x6EEb47BBcDf0059E5F1D6Ee844Ba793D5401bF18',\n    '0xCe2Fc0bDc18BD6a4d9A725791A3DEe33F3a23BB7',\n    '0x9DF9418837281faC4C4c1166f55D35F2799A9107',\n    '0xd817A100AB8A29fE3DBd925c2EB489D67F758DA9',\n    '0x0ed5C4effED69B39C86a8D806462d709Fb96A9E4',\n    '0xD3c19eB022CAC706c898D60d756bf1535d605e1d',\n    '0x35B51a621d78609dE7Cf25BC4e0682c7DEA38799',\n    '0x1b48641D8251c3E84ecbe3f2bD76B3701401906D',\n    '0x36A1E9dF5EfdAB9694de5bFe25A9ACc23F66BCB7',\n    '0xf2d323621785A066E64282d2B407eAc79cC04966',\n    '0x1e0F7D116ffB998EeC879B96698222D1Ee8d87CB',\n    '0xde39F0148496D42cd4e16563463fA5C6504CaA00',\n    '0x0fBbf9848D969776a5Eb842EdAfAf29ef4467698',\n    '0xA36c91E38bf24E9F2df358E47D4134a8894C6a4c',\n    '0xCbCaF8cB8cbeAFA927ECEE0c5C56560F83E9B7D9',\n    '0xcF3b91D83cD5FE15269E6461098fDa7d69138570'\t\n] }\n\nconst customVaultMetadata = {\n    '0xa258C4606Ca8206D8aA700cE2143D7db854D168c': {\n        displayName: 'WETH',\n        displayIcon: 'https://etherscan.io/token/images/weth_28.png'\n    }\n}\n\nconst useYearn = ({ tokens, networkDetails, provider, currentNetwork }) => {\n    const [tokensItems, setTokensItems] = useState([])\n    const [details, setDetails] = useState([])\n    const [vaults, setVaults] = useState([])\n\n    const getTokenFromPortfolio = useCallback(tokenAddress => tokens.find(({ address }) => address.toLowerCase() === tokenAddress.toLowerCase()) || {}, [tokens])\n\n    const toTokensItems = useCallback((type, vaults) => {\n        return vaults.map(vault => {\n            let token \n            if (type === 'deposit') {\n               token = vault.token\n            } else {\n                token = vault.yToken\n            }\n            const { apy } = vault\n            const { address, symbol, decimals } = token\n            const { balance, balanceRaw } = getTokenFromPortfolio(address)\n            return {\n                ...vault,\n                type,\n                label: `${symbol} (${apy}% APY)`,\n                symbol,\n                decimals,\n                tokenAddress: address,\n                balance: balance || 0,\n                balanceRaw: balanceRaw || '0',\n            }\n        })\n    }, [getTokenFromPortfolio])\n\n    const loadVaults = useCallback(async () => {\n        const yearn = new Yearn(networkDetails.chainId, { provider })\n\n        const v2Vaults = await yearn.vaults.get(v2VaultsAddresses[networkDetails.id])\n        const vaults = v2Vaults.map(({ address, metadata, symbol, token, decimals }) => {\n            const { apy, displayName, displayIcon} = {\n                ...metadata,\n                ...customVaultMetadata[address] || {}\n            }\n            const formattedAPY = (apy?.net_apy * 100).toFixed(2) || 0\n\n            return {\n                vaultAddress: address,\n                apy: formattedAPY,\n                icon: displayIcon,\n                value: address,\n                token: {\n                    address: token,\n                    symbol: displayName,\n                    decimals\n                },\n                yToken: {\n                    address,\n                    symbol,\n                    decimals\n                }\n            }\n        })\n\n\n\n        // Prevent race conditions\n        if (currentNetwork.current !== networkDetails.id) return\n        setVaults(vaults)\n    }, [provider, networkDetails, currentNetwork])\n\n    const onTokenSelect = useCallback(address => {\n        const selectedToken = tokensItems.find(t => t.tokenAddress === address)\n        if (selectedToken) setDetails([\n            [\n                <>\n                    <ToolTip label=\"Annual Percentage Yield\">\n                        <div>APY&nbsp;<MdInfo/></div>\n                    </ToolTip>\n                </>,\n             `${selectedToken.apy}%`],\n            ['Lock', 'No Lock'],\n            ['Type', 'Variable Rate'],\n        ])\n    }, [tokensItems])\n\n    useEffect(() => {\n        const depositTokenItems = toTokensItems('deposit', vaults)\n        const withdrawTokenItems = toTokensItems('withdraw', vaults)\n        \n        setTokensItems([\n            ...depositTokenItems,\n            ...withdrawTokenItems\n        ])\n        \n        return () => setTokensItems([])\n    }, [vaults, toTokensItems])\n\n    return {\n        icon: YEARN_ICON,\n        loadVaults,\n        tokensItems,\n        details,\n        onTokenSelect\n    }\n}\n\nexport default useYearn\n","export default __webpack_public_path__ + \"static/media/tesseract.3da02a6d.svg\";","import { useCallback, useEffect, useState } from 'react'\nimport { Contract } from 'ethers'\nimport ERC20ABI from 'adex-protocol-eth/abi/ERC20.json'\nimport TesseractVaultABI from 'ambire-common/src/constants/abis/YearnTesseractVaultABI'\nimport { useToasts } from 'hooks/toasts'\n// import { MdInfo } from \"react-icons/md\"\n// import { ToolTip } from \"components/common\"\n\nimport TESSERACT_ICON from 'resources/tesseract.svg'\n\nconst POLYGON_SCAN_IMAGES = 'https://polygonscan.com/token/images'\nconst VAULTS = [\n    ['tvUSDC', '0x57bDbb788d0F39aEAbe66774436c19196653C3F2', `${POLYGON_SCAN_IMAGES}/centre-usdc_32.png`],\n    ['tvDAI', '0x4c8C6379b7cd039C892ab179846CD30a1A52b125', `${POLYGON_SCAN_IMAGES}/mcdDai_32.png`],\n    ['tvWBTC', '0x6962785c731e812073948a1f5E181cf83274D7c6', `${POLYGON_SCAN_IMAGES}/wBTC_32.png`],\n    ['tvWETH', '0x3d44F03a04b08863cc8825384f834dfb97466b9B', `${POLYGON_SCAN_IMAGES}/wETH_32.png`],\n    ['tvWMATIC', '0xE11678341625cD88Bb25544e39B2c62CeDcC83f1', `${POLYGON_SCAN_IMAGES}/wMatic_32.png`],\n]\n\nconst TESR_API_ENDPOINT = 'https://prom.tesr.finance/api/v1'\n\nconst useTesseract = ({ tokens, provider, networkId, currentNetwork }) => {\n    const { addToast } = useToasts()\n\n    const [vaults, setVaults] = useState([])\n    const [tokensItems, setTokensItems] = useState([])\n    const [details, setDetails] = useState([])\n\n    const toTokensItems = useCallback((type, vaults) => {\n        return vaults.map(({ vaultAddress, token, tToken, icon, apy }) => {\n            const { address, symbol, decimals } = type === 'deposit' ? token : tToken\n            const portfolioToken = tokens.find(t => t.address.toLowerCase() === address.toLowerCase())\n            return {\n                type,\n                vaultAddress,\n                tokenAddress: address,\n                symbol,\n                decimals,\n                icon,\n                apy,\n                label: `${symbol} (${apy}% APY)`,\n                value: vaultAddress,\n                balance: portfolioToken ? portfolioToken.balance : 0,\n                balanceRaw: portfolioToken ? portfolioToken.balanceRaw : '0',\n            }\n        })\n    }, [tokens])\n\n    const fetchVaultAPY = useCallback(async ticker => {\n        try {\n            const response = await fetch(`${TESR_API_ENDPOINT}/query?query=deriv(price{network=\"matic\",ticker=\"${ticker}\",version=\"0.4.3.1\"}[10d])*60*60*24*365`)\n            const { data, status } = await response.json()\n            if (!data || status !== 'success' || !data.result.length) return 0\n            return (data.result[0]?.value[1] * 100).toFixed(2)\n        } catch(e) {\n            console.error(e)\n            addToast(`Failed to fetch ${ticker} Vault APY`, { error: true })\n        }\n    }, [addToast])\n\n    const loadVaults = useCallback(async () => {\n        const vaults = (await Promise.all(VAULTS.map(async ([ticker, address, icon]) => {\n            try {\n                const tesseractVaultContract = new Contract(address, TesseractVaultABI, provider)\n                const tokenAddress = await tesseractVaultContract.token()\n                \n                const tokenContract = new Contract(tokenAddress, ERC20ABI, provider)\n                const [symbol, decimals] = await Promise.all([\n                    await tokenContract.symbol(),\n                    await tokenContract.decimals()\n                ])\n\n                const apy = await fetchVaultAPY(ticker)\n\n                return {\n                    vaultAddress: address,\n                    token: {\n                        address: tokenAddress,\n                        decimals,\n                        symbol,\n                    },\n                    tToken: {\n                        address,\n                        decimals,\n                        symbol: `tv${symbol}`,\n                    },\n                    icon,\n                    apy\n                }\n            } catch(e) {\n                console.error(e);\n                addToast('Fetch Tesseract Vaults: ' + e.message || e, { error: true })\n                return null\n            }\n        }))).filter(v => v)\n\n        if (networkId !== currentNetwork.current) return\n        setVaults(vaults);\n    }, [networkId, currentNetwork, fetchVaultAPY, provider, addToast])\n\n    const onTokenSelect = useCallback(address => {\n        const selectedToken = tokensItems.find(t => t.tokenAddress === address)\n        if (selectedToken) setDetails([\n            <div className='warning-msg'>\n                Tesseract is closing. You will still be able to withdraw your funds indefinitely, but there will be no more earning strategies.&nbsp;\n                <a \n                    href='https://medium.com/@tesseract_fi/the-omega-of-tesseract-finance-36d6a75d7310' \n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\">\n                    Learn more.\n               </a>\n            </div>\n        ])\n    }, [tokensItems])\n\n    useEffect(() => {\n        const depositTokenItems = toTokensItems('deposit', vaults)\n        const withdrawTokenItems = toTokensItems('withdraw', vaults)\n\n        setTokensItems([\n            ...depositTokenItems,\n            ...withdrawTokenItems\n        ])\n        \n        return () => setTokensItems([])\n    }, [vaults, toTokensItems])\n\n    return {\n        icon: TESSERACT_ICON,\n        loadVaults,\n        tokensItems,\n        details,\n        onTokenSelect\n    }\n}\n\nexport default useTesseract","import Card from 'components/Wallet/Earn/Card/Card'\n\nimport { useEffect, useState, useMemo, useRef } from 'react'\nimport { Interface, parseUnits } from 'ethers/lib/utils'\nimport networks from 'consts/networks'\nimport YEARN_TESSERACT_VAULT_ABI from 'ambire-common/src/constants/abis/YearnTesseractVaultABI'\nimport useYearn from './useYearn'\nimport useTesseract from './useTesseract'\nimport { useToasts } from 'hooks/toasts'\nimport { getProvider } from 'lib/provider'\nimport AmbireBatcherABI from 'ambire-common/src/constants/abis/AmbireBatcherABI.json'\nimport ERC20ABI from 'adex-protocol-eth/abi/ERC20.json'\nimport { constants, Contract } from 'ethers'\nimport EarnDetailsModal from 'components/Modals/EarnDetailsModal/EarnDetailsModal'\n\nconst BATCHER_ADDRESS = '0x460fad03099f67391d84c9cc0ea7aa2457969cea'\nconst BATCHER_INTERFACE = new Interface(AmbireBatcherABI)\nconst ERC20_INTERFACE = new Interface(ERC20ABI)\nconst VaultInterface = new Interface(YEARN_TESSERACT_VAULT_ABI)\nconst TESSERACT_DETAILS = {\n    title: 'What is Tesseract Finance',\n    description: 'Tesseract Finance is a DeFi yield farming protocol that brings yearn.finance to selected EVM compatible chains. Tesseract Finance enables lending and borrowing opportunities on the Polygon network.'\n}\n\nconst YEARN_DETAILS = {\n    title: 'What is Yearn.finance',\n    description: 'Yearn.finance is a suite of products in DeFi that provides yield generation, lending aggregation, and more on the blockchain. The protocol is maintained by various independent developers and is governed by YFI holders.'\n}\n\nconst YearnTesseractCard = ({ networkId, accountId, tokens, addRequest }) => {\n    const { addToast } = useToasts()\n\n    const currentNetwork = useRef()\n    const [loading, setLoading] = useState([])\n\n    const unavailable = !(networkId === 'ethereum' || networkId === 'polygon' || networkId === 'fantom')\n    const name = networkId === 'ethereum' ? 'Yearn' : 'Tesseract'\n    const networkDetails = networks.find(({ id }) => id === networkId)\n    const addRequestTxn = (id, txn, extraGas = 0) => addRequest({ id, dateAdded: new Date().valueOf(), type: 'eth_sendTransaction', chainId: networkDetails.chainId, account: accountId, txn, extraGas })\n    const provider = useMemo(() => getProvider(networkDetails.id), [networkDetails.id])\n    const isDepositsDisabled = (networkId === 'polygon') ? true : false\n\n    const yearn = useYearn({\n        tokens,\n        provider,\n        networkDetails,\n        currentNetwork\n    })\n\n    const tesseract = useTesseract({\n        tokens,\n        provider,\n        networkId,\n        currentNetwork\n    })\n\n    const {\n        icon,\n        loadVaults,\n        tokensItems,\n        details,\n        onTokenSelect\n    } = useMemo(() => networkId === 'polygon' ? tesseract : yearn, [networkId, yearn, tesseract])\n\n    const moreDetails = {\n        title: networkId === 'polygon' ? TESSERACT_DETAILS.title : YEARN_DETAILS.title,\n        description: networkId === 'polygon' ? TESSERACT_DETAILS.description : YEARN_DETAILS.description\n    }\n\n    const onValidate = async (type, value, amount) => {\n        const item = tokensItems.find(t => t.type === type.toLowerCase() && t.value === value)\n        if (!item) return\n\n        const { tokenAddress, vaultAddress, decimals } = item\n        const parsedAmount = amount.slice(0, amount.indexOf('.') + Number(decimals) + 1);\n        const bigNumberAmount = parseUnits(parsedAmount, decimals)\n\n        // Transfer funds to batcher\n        let transferTx = {\n            to: tokenAddress,\n            value: '0x0',\n            data: ERC20_INTERFACE.encodeFunctionData('transfer', [BATCHER_ADDRESS, bigNumberAmount.toHexString()]),\n        }\n\n        if (Number(tokenAddress) === 0) {\n            transferTx = {\n                to: BATCHER_ADDRESS,\n                value: bigNumberAmount.toHexString(),\n                data: '0x'\n            }\n        }\n\n        addRequestTxn(`batcher_call_transfer_funds_${Date.now()}`, transferTx)\n\n        if (type === 'Deposit') {\n            try {\n                // Build approve and deposit tx for batcher\n                let batchCallTxn = []\n\n                const provider = getProvider(networkId)\n                const tokenContract = new Contract(tokenAddress, ERC20_INTERFACE, provider)\n                const allowance = await tokenContract.allowance(BATCHER_ADDRESS, vaultAddress)\n\n                if (allowance.lt(constants.MaxUint256)) {\n                    batchCallTxn.push({\n                        to: tokenAddress,\n                        value: '0x0',\n                        data: ERC20_INTERFACE.encodeFunctionData('approve', [vaultAddress, constants.MaxUint256])\n                    })\n                }\n\n                batchCallTxn.push({\n                    to: vaultAddress,\n                    value: '0x0',\n                    data: VaultInterface.encodeFunctionData('deposit', [bigNumberAmount.toHexString(), accountId])\n                })\n            \n                addRequestTxn(`batcher_call_vault_deposit_${Date.now()}`, {\n                    to: BATCHER_ADDRESS,\n                    value: '0x0',\n                    data: BATCHER_INTERFACE.encodeFunctionData('batchCall', [batchCallTxn])\n                })\n            } catch(e) {\n                console.error(e)\n                addToast(`${name} Deposit Error: ${e.message || e}`, { error: true })\n            }\n        } else if (type === 'Withdraw') {\n            try {\n                const batchCallTxn = [{\n                    to: vaultAddress,\n                    value: '0x0',\n                    data: VaultInterface.encodeFunctionData('withdraw', [bigNumberAmount.toHexString(), accountId])\n                }]\n\n                addRequestTxn(`batcher_call_vault_withdraw_${Date.now()}`, {\n                    to: BATCHER_ADDRESS,\n                    value: '0x0',\n                    data: BATCHER_INTERFACE.encodeFunctionData('batchCall', [batchCallTxn])\n                })\n            } catch(e) {\n                console.error(e)\n                addToast(`${name} Withdraw Error: ${e.message || e}`, { error: true })\n            }\n        }\n    }\n\n    useEffect(() => {\n        if (unavailable) {\n\t\tsetLoading(false)\n\t\treturn\n\t}\n        async function load() {\n            await loadVaults()\n            setLoading(false)\n        }\n        load()\n    }, [unavailable, loadVaults])\n\n    useEffect(() => {\n        currentNetwork.current = networkId\n        if (!unavailable) setLoading(true)\n    }, [networkId, unavailable])\n\n    return (\n        <Card\n            isDepositsDisabled={isDepositsDisabled}\n            loading={loading}\n            icon={icon}\n            unavailable={unavailable}\n            tokensItems={tokensItems}\n            details={details}\n            onTokenSelect={onTokenSelect}\n            onValidate={onValidate}\n            moreDetails={<EarnDetailsModal \n                title={moreDetails.title}\n                description={moreDetails.description}\n            />}\n        />\n    )\n}\n\nexport default YearnTesseractCard\n","export default __webpack_public_path__ + \"static/media/logo.ab51d124.png\";","import { getProvider } from 'lib/provider'\nimport { BigNumber, utils, Contract } from 'ethers'\nimport { useEffect, useState, useCallback } from 'react'\nimport useConstants from './useConstants'\n\nconst ZERO = BigNumber.from(0)\nconst ZERO_ADDR = '0x0000000000000000000000000000000000000000'\nconst PRECISION = 1_000_000_000_000\nconst POOL_SHARES_TOKEN_DECIMALS_MUL = '1000000000000000000'\nconst STAKING_POOL_EVENT_TYPES = {\n    enter: 'enter',\n    leave: 'leave',\n    burn: 'burn',\n    withdraw: 'withdraw',\n    rageLeave: 'rageLeave',\n    shareTokensTransferIn: 'shareTokensTransferIn',\n    shareTokensTransferOut: 'shareTokensTransferOut',\n}\n\nconst ethProvider = getProvider('ethereum')\n\nconst useAmbireEarnDetails = ({accountId, addresses, tokenLabel}) => {\n    const { getAdexToStakingTransfersLogs } = useConstants()\n    const WALLET_ADDR = addresses.stakingTokenAddress\n    const [details, setDetails] = useState({})\n    const [isLoading, setIsLoading] = useState(true)\n\n    const getStats = useCallback(async (addresses, tokenLabel) => {\n        const xWalletContract = new Contract(addresses.stakingTokenAddress, addresses.stakingPoolAbi, ethProvider)\n        const walletContract = new Contract(addresses.tokenAddress, addresses.tokenAbi, ethProvider)\n        const fromBlock = 0\n        const fromBlockHardcoded = (tokenLabel === 'ADX') ? 0xe64fe2 : 0\n        const [\n            shareValue,\n            sharesTotalSupply,\n            balanceShares,\n            lockedShares,\n            allEnterWalletTransferLogs, // If ADX selected, 0xe64fe2 last block from prefetched data\n            leaveLogs,\n            withdrawLogs,\n            rageLeaveLogs,\n            sharesTokensTransfersInLogs,\n            sharesTokensTransfersOutLogs,\n        ] = await Promise.all([\n            xWalletContract.shareValue(),\n            xWalletContract.totalSupply(),\n            xWalletContract.balanceOf(accountId),\n            xWalletContract.lockedShares(accountId),\n            ethProvider.getLogs({\n                fromBlock: fromBlockHardcoded,\n                ...walletContract.filters.Transfer(null, WALLET_ADDR, null),\n            }),\n            ethProvider.getLogs({\n                fromBlock,\n                ...xWalletContract.filters.LogLeave(accountId, null, null, null),\n            }),\n            ethProvider.getLogs({\n                fromBlock,\n                ...xWalletContract.filters.LogWithdraw(\n                    accountId,\n                    null,\n                    null,\n                    null,\n                    null\n                ),\n            }),\n            ethProvider.getLogs({\n                fromBlock,\n                ...xWalletContract.filters.LogRageLeave(\n                    accountId,\n                    null,\n                    null,\n                    null\n                ),\n            }),\n            ethProvider.getLogs({\n                fromBlock,\n                ...xWalletContract.filters.Transfer(null, accountId, null),\n            }),\n            ethProvider.getLogs({\n                fromBlock,\n                ...xWalletContract.filters.Transfer(accountId, null, null),\n            }),\n        ])\n       \n        const userShare = sharesTotalSupply.isZero()\n            ? ZERO\n            : balanceShares.mul(PRECISION).div(sharesTotalSupply).toNumber() /\n              PRECISION\n\n        const adexToStakingTransfersLogs = await getAdexToStakingTransfersLogs();\n        const enterWalletTokensByTxHash = ((tokenLabel === 'ADX' && adexToStakingTransfersLogs) ? adexToStakingTransfersLogs.result : [])\n            .concat(allEnterWalletTransferLogs)\n            .reduce((byHash, log) => {\n                    byHash[log.transactionHash] = log\n                    return byHash\n                }, {}\n            )\n\n        const sharesTokensTransfersIn = sharesTokensTransfersInLogs.map(log => {\n            const parsedLog = xWalletContract.interface.parseLog(log)\n\n            const {\n                from, // [0]\n                amount, // [2]\n            } = parsedLog.args\n\n            return {\n                transactionHash: log.transactionHash,\n                blockNumber: log.blockNumber,\n                shares: amount,\n                type:\n                    from === ZERO_ADDR\n                        ? STAKING_POOL_EVENT_TYPES.enter\n                        : STAKING_POOL_EVENT_TYPES.shareTokensTransferIn,\n                from,\n            }\n        })\n\n        // Only out txns as we have logs for RageLEave and Withdraw and they only burns shares\n        // TODO: detect innerBurn transactions to ZERO_ADDR (burned by the user itself)\n        const sharesTokensTransfersOut = sharesTokensTransfersOutLogs\n            .map(log => {\n                const parsedLog = xWalletContract.interface.parseLog(log)\n\n                const {\n                    to, // [1]\n                    amount, // [2]\n                } = parsedLog.args\n\n                return {\n                    transactionHash: log.transactionHash,\n                    blockNumber: log.blockNumber,\n                    shares: amount,\n                    type: STAKING_POOL_EVENT_TYPES.shareTokensTransferOut,\n                    to,\n                }\n            })\n            .filter(x => x.to !== ZERO_ADDR)\n\n        const { shareTokensEnterMintByHash, shareTokensTransfersInByTxHash } =\n            sharesTokensTransfersIn.reduce(\n                (txns, event) => {\n                    if (event.type === STAKING_POOL_EVENT_TYPES.enter) {\n                        txns.shareTokensEnterMintByHash[event.transactionHash] =\n                            event\n                    }\n\n                    if (\n                        event.type ===\n                        STAKING_POOL_EVENT_TYPES.shareTokensTransferIn\n                    ) {\n                        txns.shareTokensTransfersInByTxHash[\n                            event.transactionHash\n                        ] = event\n                    }\n\n                    return txns\n                },\n                {\n                    shareTokensEnterMintByHash: {},\n                    shareTokensTransfersInByTxHash: {},\n                }\n            )\n\n        const sharesTokensTransfersInFromExternal = Object.values(\n            shareTokensTransfersInByTxHash\n        )\n\n        const userEnters = Object.values(shareTokensEnterMintByHash)\n            .map(sharesMintEvent => {\n                const adexTokenTransfersLog =\n                    enterWalletTokensByTxHash[sharesMintEvent.transactionHash]\n\n                if (adexTokenTransfersLog) {\n                    const parsedWalletLog = walletContract.interface.parseLog(\n                        adexTokenTransfersLog\n                    )\n\n                    return {\n                        transactionHash: sharesMintEvent.transactionHash,\n                        type: STAKING_POOL_EVENT_TYPES.enter,\n                        shares: sharesMintEvent.shares,\n                        walletAmount: tokenLabel === 'ADX' ? parsedWalletLog.args.value : parsedWalletLog.args.amount, // [2]\n                        from: parsedWalletLog.args.from,\n                        blockNumber: sharesMintEvent.blockNumber,\n                    }\n                } else {\n                    return null\n                }\n            })\n            .filter(x => !!x)\n\n        const userWithdraws = withdrawLogs.map(log => {\n            const parsedWithdrawLog = xWalletContract.interface.parseLog(log)\n            const { shares, unlocksAt, maxTokens, receivedTokens } =\n                parsedWithdrawLog.args\n\n            return {\n                transactionHash: log.transactionHash,\n                type: STAKING_POOL_EVENT_TYPES.withdraw,\n                shares, //[1]\n                unlocksAt, //[2]\n                maxTokens, //[3]\n                receivedTokens, //[4]\n                blockNumber: log.blockNumber,\n            }\n        })\n\n        const userRageLeaves = rageLeaveLogs.map(log => {\n            const parsedRageLeaveLog = xWalletContract.interface.parseLog(log)\n\n            const { shares, maxTokens, receivedTokens } =\n                parsedRageLeaveLog.args\n\n            return {\n                transactionHash: log.transactionHash,\n                type: STAKING_POOL_EVENT_TYPES.rageLeave,\n                shares, //[1]\n                maxTokens, //[2]\n                receivedTokens,\n                walletAmount: receivedTokens, //[3]\n                blockNumber: log.blockNumber,\n            }\n        })\n\n        const now = new Date() / 1000\n\n        const userLeaves = await Promise.all(\n            leaveLogs.map(async log => {\n                const parsedLog = xWalletContract.interface.parseLog(log)\n\n                const { shares, unlocksAt, maxTokens } = parsedLog.args\n\n                const withdrawTx = userWithdraws.find(\n                    event =>\n                        event.unlocksAt.toString() === unlocksAt.toString() &&\n                        event.shares.toString() === shares.toString() &&\n                        event.maxTokens.toString() === maxTokens.toString()\n                )\n\n                const walletValue = sharesTotalSupply.isZero()\n                    ? ZERO // maxTokens\n                    : await xWalletContract.unbondingCommitmentWorth(\n                          accountId,\n                          shares,\n                          unlocksAt\n                      )\n\n                return {\n                    transactionHash: log.transactionHash,\n                    type: STAKING_POOL_EVENT_TYPES.leave,\n                    shares, // [1]\n                    unlocksAt, //[2]\n                    maxTokens, // [3]\n                    walletValue,\n                    canWithdraw: unlocksAt < now && !withdrawTx,\n                    blockNumber: log.blockNumber,\n                    withdrawTx,\n                }\n            })\n        )\n        \n        const leavesPendingToUnlock = [...userLeaves].filter(\n            event => event.unlocksAt > now\n        )\n\n        const leavesReadyToWithdraw = [...userLeaves].filter(\n            event => event.unlocksAt < now && !event.withdrawTx\n        )\n\n        const leavesPendingToUnlockTotalMax = leavesPendingToUnlock.reduce(\n            (a, b) => a.add(b.maxTokens),\n            ZERO\n        )\n\n        const leavesPendingToUnlockTotalWallet = leavesPendingToUnlock.reduce(\n            (a, b) => a.add(b.walletValue),\n            ZERO\n        )\n\n        const leavesReadyToWithdrawTotalMax = leavesReadyToWithdraw.reduce(\n            (a, b) => a.add(b.maxTokens),\n            ZERO\n        )\n\n        const leavesReadyToWithdrawTotalWallet = leavesReadyToWithdraw.reduce(\n            (a, b) => a.add(b.walletValue),\n            ZERO\n        )\n\n        let leavePendingToUnlockOrReadyToWithdraw = null \n        if (leavesReadyToWithdraw.length) leavePendingToUnlockOrReadyToWithdraw = leavesReadyToWithdraw[0]\n        else if (leavesPendingToUnlock.length) leavePendingToUnlockOrReadyToWithdraw = leavesPendingToUnlock[0]\n        const [latestLog] = leaveLogs.sort((a, b) => b.blockNumber - a.blockNumber)\n        let remainingTime\n        if (leavePendingToUnlockOrReadyToWithdraw && latestLog) {\n            const { unlocksAt } = leavePendingToUnlockOrReadyToWithdraw\n            remainingTime = (unlocksAt.toString() * 1000) - Date.now()\n            if (remainingTime <= 0) remainingTime = 0\n        } else {\n            remainingTime = null\n        }\n\n        if (\n            sharesTokensTransfersOut.length ||\n            sharesTokensTransfersInFromExternal.length\n        ) {\n            const fromBlock = Math.min(\n                sharesTokensTransfersOut[0]\n                    ? sharesTokensTransfersOut[0].blockNumber\n                    : Number.MAX_SAFE_INTEGER,\n                sharesTokensTransfersInFromExternal[0]\n                    ? sharesTokensTransfersInFromExternal[0].blockNumber\n                    : Number.MAX_SAFE_INTEGER\n            )\n\n            const [\n                allLeaveLogs,\n                allWithdrawLogs,\n                allRageLeaveLogs,\n                allEnterSharesTokensTransfersInLogs,\n            ] = await Promise.all([\n                ethProvider.getLogs({\n                    fromBlock,\n                    ...xWalletContract.filters.LogLeave(null, null, null, null),\n                }),\n                ethProvider.getLogs({\n                    fromBlock,\n                    ...xWalletContract.filters.LogWithdraw(\n                        null,\n                        null,\n                        null,\n                        null,\n                        null\n                    ),\n                }),\n                ethProvider.getLogs({\n                    fromBlock,\n                    ...xWalletContract.filters.LogRageLeave(\n                        null,\n                        null,\n                        null,\n                        null\n                    ),\n                }),\n                ethProvider.getLogs({\n                    fromBlock,\n                    ...xWalletContract.filters.Transfer(ZERO_ADDR, null, null),\n                }),\n            ])\n\n            const allEnters = allEnterSharesTokensTransfersInLogs\n                .map(sharesMintEvent => {\n                    const walletTokenTransfersLog =\n                        enterWalletTokensByTxHash[\n                            sharesMintEvent.transactionHash\n                        ]\n\n                    if (walletTokenTransfersLog) {\n                        const parsedLog = walletContract.interface.parseLog(\n                            walletTokenTransfersLog\n                        )\n                        const amount = tokenLabel === 'ADX' ? parsedLog.args.value : parsedLog.args.amount \n                        const { amount: shares } =\n                            xWalletContract.interface.parseLog(\n                                sharesMintEvent\n                            ).args\n\n                        return {\n                            blockNumber: sharesMintEvent.blockNumber,\n                            shareValue: shares.isZero()\n                                ? ZERO\n                                : amount\n                                      .mul(POOL_SHARES_TOKEN_DECIMALS_MUL)\n                                      .div(shares),\n                        }\n                    } else {\n                        return null\n                    }\n                })\n                .filter(x => !!x)\n\n            const allWithdraws = allWithdrawLogs.map(log => {\n                const parsedWithdrawLog =\n                    xWalletContract.interface.parseLog(log)\n                const { shares, maxTokens } = parsedWithdrawLog.args\n\n                return {\n                    blockNumber: log.blockNumber,\n                    shareValue: maxTokens\n                        .mul(POOL_SHARES_TOKEN_DECIMALS_MUL)\n                        .div(shares),\n                }\n            })\n\n            const allRageLeaves = allRageLeaveLogs.map(log => {\n                const parsedRageLeaveLog =\n                    xWalletContract.interface.parseLog(log)\n\n                const { shares, maxTokens } = parsedRageLeaveLog.args\n\n                return {\n                    shareValue: maxTokens\n                        .mul(POOL_SHARES_TOKEN_DECIMALS_MUL)\n                        .div(shares),\n                    blockNumber: log.blockNumber,\n                }\n            })\n\n            const allLeaves = allLeaveLogs.map(log => {\n                const parsedLog = xWalletContract.interface.parseLog(log)\n                const { shares, maxTokens } = parsedLog.args\n                return {\n                    blockNumber: log.blockNumber,\n                    shareValue: maxTokens\n                        .mul(POOL_SHARES_TOKEN_DECIMALS_MUL)\n                        .div(shares),\n                }\n            })\n\n            const allLogs = allEnters\n                .concat(allWithdraws)\n                .concat(allLeaves)\n                .concat(allRageLeaves)\n                .sort((a, b) => a.blockNumber - b.blockNumber)\n\n            const withWalletAmount = events =>\n                events.forEach((transferLog, i) => {\n                    const nextLog =\n                        allLogs.find(\n                            log => log.blockNumber >= transferLog.blockNumber\n                        ) || {}\n\n                    const bestShareValue = nextLog.shareValue || shareValue\n\n                    // approximate share value\n                    events[i].shareValue = bestShareValue\n                    events[i].walletAmount = transferLog.shares\n                        .mul(bestShareValue)\n                        .div(POOL_SHARES_TOKEN_DECIMALS_MUL)\n                })\n\n            withWalletAmount(sharesTokensTransfersOut)\n            withWalletAmount(sharesTokensTransfersInFromExternal)\n        }\n\n        const totalSharesOutTransfers = sharesTokensTransfersOut.reduce(\n            (a, b) => a.add(b.shares),\n            ZERO\n        )\n\n        const totalSharesOutTransfersWalletValue =\n            sharesTokensTransfersOut.reduce(\n                (a, b) => a.add(b.walletAmount),\n                ZERO\n            )\n\n        const totalSharesInTransfers = sharesTokensTransfersInFromExternal.reduce(\n            (a, b) => a.add(b.shares),\n            ZERO\n        )\n\n        const totalSharesInTransfersWalletValue =\n            sharesTokensTransfersInFromExternal.reduce(\n                (a, b) => a.add(b.walletAmount),\n                ZERO\n            )\n\n        const depositsWalletTotal = userEnters.reduce(\n            (a, b) => a.add(b.walletAmount),\n            ZERO\n        )\n\n        // Incl received + distributed to other staker. Used for calc reward because the were actually earned\n        const rageLeavesWithdrawnWalletTotal = userRageLeaves.reduce(\n            (a, b) => a.add(b.maxTokens),\n            ZERO\n        )\n\n        const rageLeavesReceivedWalletTotal = userRageLeaves.reduce(\n            (a, b) => a.add(b.receivedTokens),\n            ZERO\n        )\n\n        const withdrawsWalletTotal = userWithdraws.reduce(\n            (a, b) => a.add(b.receivedTokens),\n            ZERO\n        )\n\n        const totalLockedSharesCheck = [...userLeaves]\n            .filter(x => !x.withdrawTx)\n            .reduce((a, b) => a.add(b.shares), ZERO)\n\n        if (!totalLockedSharesCheck.eq(lockedShares)) {\n            console.error(\n                'locked shares different than check sum, user balance can be incorrect',\n                'lockedShares:',\n                lockedShares.toString(),\n                'totalLockedSharesCheck:',\n                totalLockedSharesCheck.toString()\n            )\n        }\n\n        const balanceSharesAvailable = balanceShares.sub(lockedShares).lt(ZERO)\n            ? ZERO \n            : balanceShares.sub(lockedShares)\n\n        const currentBalanceWalletAvailable = balanceSharesAvailable\n            .mul(shareValue)\n            .div(POOL_SHARES_TOKEN_DECIMALS_MUL)\n\n        // NOTE: used to calc actual balance in Wallet + rewards\n        const currentBalanceWallet = balanceShares\n            .mul(shareValue)\n            .div(POOL_SHARES_TOKEN_DECIMALS_MUL)\n\n        const currentBalanceSharesWalletValue = balanceShares\n            .mul(shareValue)\n            .div(POOL_SHARES_TOKEN_DECIMALS_MUL)\n\n        const hasInsufficentBalanceForUnbondCommitments = balanceShares.lt(\n            lockedShares\n        ) \n        const insufficientSharesAmoutForCurrentUnbonds =\n            hasInsufficentBalanceForUnbondCommitments\n                ? lockedShares.sub(balanceShares)\n                : ZERO\n\n        // NOTE: Used for rage leave because shareValue is can be different than in unbondCommitments\n        const currentBalanceWalletAtCurrentShareValue =\n            currentBalanceWalletAvailable\n        \n        // Enter, transfers in\n\t    const totalInTokenValue = depositsWalletTotal.add(totalSharesInTransfersWalletValue)\n        \n        // Withdraws, Transfers out, rage leaves\n        const totalOutTokenValue = withdrawsWalletTotal\n            .add(totalSharesOutTransfersWalletValue)\n            .add(rageLeavesWithdrawnWalletTotal)\n\n        const totalRewards = currentBalanceWallet\n            .add(totalOutTokenValue)\n            .sub(totalInTokenValue)\n\n\n        const hasActiveUnbondCommitments = !![...userLeaves].filter(\n            x => !x.withdrawTx\n        ).length\n\n        const stakings = userEnters\n            .concat(userLeaves)\n            .concat(userWithdraws)\n            .concat(userRageLeaves)\n            .concat(sharesTokensTransfersInFromExternal)\n            .concat(sharesTokensTransfersOut)\n            .sort((a, b) => a.blockNumber - b.blockNumber)\n\n        const withTimestamp = await Promise.all(\n            stakings.map(async stakingEvent => {\n                const { timestamp } = await ethProvider.getBlock(\n                    stakingEvent.blockNumber\n                )\n                return {\n                    ...stakingEvent,\n                    timestamp: timestamp * 1000,\n                }\n            })\n        )\n\n        const stats = {\n            // ...poolData,\n            balanceShares,\n            balanceSharesAvailable,\n            currentBalanceWallet,\n            currentBalanceWalletAvailable,\n            currentBalanceWalletAtCurrentShareValue,\n            currentBalanceSharesWalletValue,\n            hasInsufficentBalanceForUnbondCommitments,\n            insufficientSharesAmoutForCurrentUnbonds,\n            totalRewards,\n            totalSharesOutTransfersWalletValue,\n            totalSharesInTransfersWalletValue,\n            stakings: withTimestamp,\n            userLeaves,\n            depositsWalletTotal,\n            withdrawsWalletTotal,\n            leavesPendingToUnlockTotalMax,\n            leavesReadyToWithdrawTotalMax,\n            leavesPendingToUnlockTotalWallet,\n            leavesReadyToWithdrawTotalWallet,\n            hasActiveUnbondCommitments,\n            loaded: true,\n            userDataLoaded: true,\n            userShare,\n            remainingTime,\n            totalSharesOutTransfers,\n            totalSharesInTransfers,\n            rageLeavesReceivedWalletTotal,\n            rageLeavesWithdrawnWalletTotal,\n            totalInTokenValue,\n            totalOutTokenValue\n        }\n\n        return {\n            currentBalanceWalletAtCurrentShareValue: utils.formatUnits(\n                stats.currentBalanceWalletAtCurrentShareValue.toString(),\n                18\n            ),\n            balance: utils.formatUnits(\n                stats.currentBalanceWallet.toString(),\n                18\n            ),\n            poolShare: stats.userShare,\n            allTimeRewards: utils.formatUnits(\n                stats.totalRewards.toString(),\n                18\n            ),\n            totalDeposit: utils.formatUnits(\n                stats.depositsWalletTotal.toString(),\n                18\n            ),\n            totalWithdraws: utils.formatUnits(\n                stats.withdrawsWalletTotal.toString(),\n                18\n            ),\n            pendingToUnlock: utils.formatUnits(\n                stats.leavesPendingToUnlockTotalWallet.toString(),\n                18\n            ),\n            readyToWithdraw: utils.formatUnits(\n                stats.leavesReadyToWithdrawTotalWallet.toString(),\n                18\n            ),\n            totalInTokenValue: utils.formatUnits(\n                stats.totalInTokenValue.toString(),\n                18\n            ),\n            totalOutTokenValue: utils.formatUnits(\n                stats.totalOutTokenValue.toString(),\n                18\n            ),\n            rageLeavesReceivedWalletTotal: utils.formatUnits(\n                stats.rageLeavesReceivedWalletTotal.toString(),\n                18\n            ),\n            rageLeavesWithdrawnWalletTotal: utils.formatUnits(\n                stats.rageLeavesWithdrawnWalletTotal.toString(),\n                18\n            ),\n            totalSharesInTransfersWalletValue: utils.formatUnits(\n                stats.totalSharesInTransfersWalletValue.toString(),\n                18\n            ),\n            totalSharesOutTransfersWalletValue: utils.formatUnits(\n                stats.totalSharesOutTransfersWalletValue.toString(),\n                18\n            ),\n            remainingTime: stats.remainingTime,\n        }\n    }, [WALLET_ADDR, accountId, getAdexToStakingTransfersLogs])\n\n    useEffect(() => {\n        const getData = async (addresses, tokenLabel) => {\n            setIsLoading(true)\n            try {\n                const data = await getStats(addresses, tokenLabel)\n                setDetails(data)\n                setIsLoading(false)\n            } catch(e) {\n                console.error(e)\n                setIsLoading(false)\n            }\n        }\n        if (!accountId) return\n        getData(addresses, tokenLabel)\n    }, [accountId, addresses, getStats, setDetails, setIsLoading, tokenLabel])\n\n    return { details, isLoading } || {}\n}\n\nexport default useAmbireEarnDetails\n","import './AmbireEarnDetailsModal.scss'\n\nimport { MdClose } from 'react-icons/md'\nimport { useModals } from 'hooks'\nimport { Modal, Button } from 'components/common'\nimport { ToolTip } from 'components/common' \nimport useAmbireEarnDetails from 'hooks/useAmbireEarnDetails'\nimport { Loading } from 'components/common'\n\nconst AmbireEarnDetailsModal = ({ title = 'Details', apy, accountId, msToDaysHours, addresses, tokenLabel }) => {\n    const { hideModal } = useModals()\n    const { details, isLoading } = useAmbireEarnDetails({ accountId, addresses, tokenLabel })\n\n    const { \n        poolShare, \n        allTimeRewards, \n        totalDeposit, \n        totalWithdraws, \n        pendingToUnlock, \n        readyToWithdraw, \n        totalOutTokenValue,\n        totalInTokenValue,\n        rageLeavesReceivedWalletTotal,\n        rageLeavesWithdrawnWalletTotal,\n        totalSharesInTransfersWalletValue,\n        totalSharesOutTransfersWalletValue,\n        remainingTime, \n        currentBalanceWalletAtCurrentShareValue\n    } = details\n    const buttons = (<Button clear small icon={<MdClose />} onClick={hideModal}>Close</Button>)\n   \n    return (\n        <Modal id=\"wallet-more-details-modal\" title={title} buttons={buttons}>\n           {!isLoading ? (\n                <div className=\"table\">\n                    <div className=\"wrapper\">\n                        <div>Annual Percentage Yield (APY)</div><div>{apy}</div>\n                    </div>\n                    <div className=\"wrapper odd-rows-bg\">\n                        <div>Current Available Balance</div>\n                        <ToolTip label=\"* Warning: The pool share value may include your pending to unlock tokens.\">\n                            <div>{parseFloat(currentBalanceWalletAtCurrentShareValue).toFixed(4)} {tokenLabel} (Pool share*: {(poolShare * 100).toFixed(2)}%)</div>\n                        </ToolTip>\n                    </div>\n                    <div className=\"wrapper\">\n                        <div>All time rewards</div><div>{parseFloat(allTimeRewards).toFixed(4)} {tokenLabel}</div>\n                    </div>\n                    <div className=\"wrapper odd-rows-bg\">\n                        <div>Total deposit</div>\n                        <ToolTip label={`Deposits: ${parseFloat(totalDeposit).toFixed(4)} ${tokenLabel} \n                                        \\nTransfers in: ${parseFloat(totalSharesInTransfersWalletValue).toFixed(4)} ${tokenLabel}`}>\n                            <div>{parseFloat(totalInTokenValue).toFixed(4)} {tokenLabel}</div>\n                        </ToolTip>\n                    </div>\n                    <div className=\"wrapper\">\n                        <div>Total withdraws</div>\n                        <ToolTip label={`Withdrawals: ${parseFloat(totalWithdraws).toFixed(4)} ${tokenLabel}\n                                    \\nTransfers out: ${parseFloat(totalSharesOutTransfersWalletValue).toFixed(4)} ${tokenLabel} \n                                    \\nRage leaves: \n                                    \\nReceived ${parseFloat(rageLeavesReceivedWalletTotal).toFixed(4)} ${tokenLabel} \n                                    \\nWithdrawn ${parseFloat(rageLeavesWithdrawnWalletTotal).toFixed(4)} ${tokenLabel}`}>\n                            <div>{parseFloat(totalOutTokenValue).toFixed(4)} {tokenLabel}</div>\n                        </ToolTip>\n                    </div>\n                    <div className=\"wrapper odd-rows-bg\">\n                        <div>Total pending to unlock</div>\n                        <div>\n                            {remainingTime > 0 \n                                ? `${msToDaysHours(remainingTime)} until ${parseFloat(pendingToUnlock).toFixed(4)} ${tokenLabel} becomes available for withdraw.` \n                                : 'No pending unlocks'}\n                        </div>\n                    </div>\n                    <div className=\"wrapper\">\n                        <div>Ready to withdraw</div>\n                        <div>\n                            {parseFloat(readyToWithdraw) > 0 \n                            ? `${parseFloat(readyToWithdraw).toFixed(4)} ${tokenLabel}`\n                            : 'No amount for withdrawing'}\n                        </div>\n                    </div>\n                </div>\n            ) : <div className='loading-wrapper'><Loading/></div>}\n        </Modal>\n    )\n}\n\nexport default AmbireEarnDetailsModal\n","import { useState, useCallback, useMemo, useEffect } from \"react\"\nimport Card from 'components/Wallet/Earn/Card/Card'\n\nimport AMBIRE_ICON from 'resources/logo.png'\nimport { MdInfo } from \"react-icons/md\"\nimport { ToolTip, Button } from \"components/common\"\nimport { BigNumber, constants, Contract, utils } from \"ethers\"\nimport WalletStakingPoolABI from 'ambire-common/src/constants/abis/WalletStakingPoolABI.json'\nimport AdexStakingPool from 'ambire-common/src/constants/AdexStakingPool.json'\nimport supplyControllerABI from 'ambire-common/src/constants/ADXSupplyController.json'\nimport { Interface, parseUnits, formatUnits } from \"ethers/lib/utils\"\nimport { getProvider } from 'lib/provider'\nimport ERC20ABI from 'adex-protocol-eth/abi/ERC20.json'\nimport networks from 'consts/networks'\nimport AmbireEarnDetailsModal from 'components/Modals/AmbireEarnDetailsModal/AmbireEarnDetailsModal'\nimport { getTokenIcon } from 'lib/icons'\nimport { BsArrowUpSquare } from \"react-icons/bs\"\nimport walletABI from 'ambire-common/src/constants/abis/walletTokenABI.json'\nimport UnbondModal from \"components/Modals/WalletTokenModal/UnbondModal/UnbondModal\"\n\nconst ADX_TOKEN_ADDRESS = '0xade00c28244d5ce17d72e40330b1c318cd12b7c3'\nconst ADX_STAKING_TOKEN_ADDRESS = '0xb6456b57f03352be48bf101b46c1752a0813491a'\nconst ADX_STAKING_POOL_INTERFACE = new Interface(AdexStakingPool)\nconst ADDR_ADX_SUPPLY_CONTROLLER = '0x515629338229dd5f8cea3f4f3cc8185ba21fa30b'\n\nconst WALLET_TOKEN_ADDRESS = '0x88800092ff476844f74dc2fc427974bbee2794ae'\nconst WALLET_STAKING_ADDRESS = '0x47cd7e91c3cbaaf266369fe8518345fc4fc12935'\nconst ADX_LABEL = 'ADX'\nconst WALLET_LABEL = 'WALLET'\n\nconst WALLET_LOCK_PERIOD_IN_DAYS = 30\nconst ADEX_LOCK_PERIOD_IN_DAYS = 20\n\n// polygon tests\n// const WALLET_TOKEN_ADDRESS = '0xe9415e904143e42007865e6864f7f632bd054a08'\n// const WALLET_STAKING_ADDRESS = '0xec3b10ce9cabab5dbf49f946a623e294963fbb4e'\n\nconst WALLET_STAKING_POOL_INTERFACE = new Interface(WalletStakingPoolABI)\nconst ERC20_INTERFACE = new Interface(ERC20ABI)\nconst ZERO = BigNumber.from(0)\n\nconst secondsInYear = 60 * 60 * 24 * 365\nconst PRECISION = 1_000_000_000_000\n\nconst msToDaysHours = ms => {\n    const day = 24 * 60 * 60 * 1000\n    const days = Math.floor(ms / day)\n    const hours = Math.floor((ms % day) / (60 * 60 * 1000))\n    return days < 1 ? `${hours} hours` : `${days} days`\n}\n\nconst attachMetaIfNeeded = (req, shareValue, rewardsData) => {\n    let meta\n    const shouldAttachMeta = [WALLET_TOKEN_ADDRESS, WALLET_STAKING_ADDRESS].includes(req.txn.to.toLowerCase())\n    if (shouldAttachMeta) {\n        const { walletUsdPrice: walletTokenUsdPrice, xWALLETAPY: APY } = rewardsData.rewards\n        meta = { xWallet: { APY, shareValue, walletTokenUsdPrice } }\n    }\n    return !meta ? req : { ...req, meta: { ...req.meta && req.meta, ...meta }}\n}\n\nconst AmbireTokensCard = ({ networkId, accountId, tokens, rewardsData, addRequest }) => {\n    const [loading, setLoading] = useState(true)\n    const [details, setDetails] = useState([])\n    const [customInfo, setCustomInfo] = useState(null)\n    const [stakingTokenContract, setStakingTokenContract] = useState(null)\n    const [shareValue, setShareValue] = useState(ZERO)\n    const [stakingTokenBalanceRaw, SetStakingTokenBalanceRaw] = useState(null)\n    const [leaveLog, setLeaveLog] = useState(null)\n    const [lockedRemainingTime, setLockedRemainingTime] = useState(0)\n    const [addresses, setAddresses] = useState({\n        tokenAddress: '',\n        stakingTokenAddress: '',\n        stakingPoolInterface: '',\n        stakingPoolAbi: '',\n        tokenAbi: ''\n    })\n    const [selectedToken, setSelectedToken] = useState({ label: ''})\n    const [adxCurrentAPY, setAdxCurrentAPY] = useState(null)\n    const [isUnbondModalVisible, setIsUnbondModalVisible] = useState(false)\n    const [isUnstakeConfirmed, setIsUnstakeConfirmed] = useState(false)\n    const [validateData, setValidateData] = useState(null)\n\n    const getLockDays = useCallback(() => {\n        if (selectedToken.label === 'WALLET') return WALLET_LOCK_PERIOD_IN_DAYS\n        else return ADEX_LOCK_PERIOD_IN_DAYS\n    }, [selectedToken.label])\n    \n    const unavailable = networkId !== 'ethereum'\n    const networkDetails = networks.find(({ id }) => id === networkId)\n    const addRequestTxn = useCallback((id, txn, extraGas = 0) => { \n        const request = attachMetaIfNeeded(\n                { id, dateAdded: new Date().valueOf(), type: 'eth_sendTransaction', chainId: networkDetails.chainId, account: accountId, txn, extraGas },\n                shareValue,\n                rewardsData\n            )\n\n        addRequest(request)\n    }, [networkDetails.chainId, accountId, shareValue, rewardsData, addRequest])\n\n    const { xWALLETAPYPercentage } = rewardsData.rewards;\n\n    const walletToken = useMemo(() => tokens.find(({ address }) => address === WALLET_TOKEN_ADDRESS), [tokens])\n    const xWalletToken = useMemo(() => tokens.find(({ address }) => address === WALLET_STAKING_ADDRESS), [tokens])\n    const adexToken = useMemo(() => tokens.find(({address}) => address === ADX_TOKEN_ADDRESS), [tokens])\n    const adexStakingToken = useMemo(() => tokens.find(({address}) => address === ADX_STAKING_TOKEN_ADDRESS), [tokens])\n\n    const balanceRaw = useMemo(() => stakingTokenBalanceRaw ? (BigNumber.from(stakingTokenBalanceRaw).mul(shareValue)).div(BigNumber.from((1e18).toString())).toString() : 0,\n    [stakingTokenBalanceRaw, shareValue])\n\n    const depositTokenItems = useMemo(() => [\n        {\n            type: 'deposit',\n            icon: getTokenIcon(networkId, WALLET_TOKEN_ADDRESS),\n            label: WALLET_LABEL,\n            value: WALLET_TOKEN_ADDRESS,\n            symbol: WALLET_LABEL,\n            balance: (walletToken?.balanceRaw && walletToken?.decimals) ? formatUnits(walletToken?.balanceRaw, walletToken?.decimals) : 0,\n            balanceRaw: walletToken?.balanceRaw || 0,\n        },\n        {\n            type: 'deposit',\n            icon: getTokenIcon(networkId, ADX_TOKEN_ADDRESS),\n            label: ADX_LABEL,\n            value: ADX_TOKEN_ADDRESS,\n            symbol: ADX_LABEL,\n            balance: (adexToken?.balanceRaw && adexToken?.decimals) ? formatUnits(adexToken?.balanceRaw, adexToken?.decimals) : 0,\n            balanceRaw: adexToken?.balanceRaw || 0,\n        },\n    ], [adexToken?.balanceRaw, adexToken?.decimals, networkId, walletToken?.balanceRaw, walletToken?.decimals])\n\n    const withdrawTokenItems = useMemo(() => [   \n        {\n            type: 'withdraw',\n            icon: getTokenIcon(networkId, WALLET_TOKEN_ADDRESS),\n            label: WALLET_LABEL,\n            value: WALLET_STAKING_ADDRESS,\n            symbol: WALLET_LABEL,\n            balance: formatUnits(balanceRaw, xWalletToken?.decimals),\n            balanceRaw,\n        },\n        {\n            type: 'withdraw',\n            icon: getTokenIcon(networkId, ADX_TOKEN_ADDRESS),\n            label: ADX_LABEL,\n            value: ADX_STAKING_TOKEN_ADDRESS,\n            symbol: ADX_LABEL,\n            balance: formatUnits(balanceRaw, adexStakingToken?.decimals),\n            balanceRaw,\n        },\n    ], [adexStakingToken?.decimals, balanceRaw, networkId, xWalletToken?.decimals])\n    \n    const tokensItems = useMemo(() => [\n        ...depositTokenItems.sort((x,y) => x.value === addresses.tokenAddress ? -1 : y.value === addresses.tokenAddress ? 1 : 0),\n        ...withdrawTokenItems.sort((x,y) => x.value === addresses.stakingTokenAddress ? -1 : y.value === addresses.stakingTokenAddress ? 1 : 0)\n    ], [addresses.stakingTokenAddress, addresses.tokenAddress, depositTokenItems, withdrawTokenItems])\n\n    const onWithdraw = useCallback(() => {\n        const { shares, unlocksAt } = leaveLog\n        addRequestTxn(`withdraw_staking_pool_${Date.now()}`, {\n            to: addresses.stakingTokenAddress,\n            value: '0x0',\n            data: addresses.stakingPoolInterface.encodeFunctionData('withdraw', [shares.toHexString(), unlocksAt.toHexString(), false])\n        })\n    }, [addresses, leaveLog, addRequestTxn])\n\n    const isAdxTokenSelected = useCallback(() => {\n        return selectedToken.label === ADX_LABEL\n    }, [selectedToken.label])\n\n    const onTokenSelect = useCallback(tokenAddress => {\n        setCustomInfo(null)\n\n        const token = tokensItems.find(({ value }) => value === tokenAddress)\n\n        setSelectedToken({label: token?.label}) \n        if (token && token.type === 'withdraw' && leaveLog && (parseFloat(leaveLog.walletValue) > 0)) {\n            const unbondToolTipLabelMdg = `* Because of funds that are pending withdrawal, you are not able to unstake more ${selectedToken.label} tokens until the unbond period is over.`\n            \n            setCustomInfo(\n                <>\n                    <div className=\"info-message\">\n                        <ToolTip label={unbondToolTipLabelMdg}>\n                            <span><b>{ msToDaysHours(lockedRemainingTime) }</b> until { parseFloat(leaveLog.walletValue).toFixed(4) } {selectedToken.label} becomes available for withdraw.&nbsp;<MdInfo/></span>\n                        </ToolTip>\n                    </div>\n                    <Button \n                        disabled={lockedRemainingTime > 0}\n                        icon={<BsArrowUpSquare/>}\n                        onClick={() => onWithdraw()}\n                    >\n                        Withdraw    \n                    </Button>\n                </>\n            )\n        }\n        const apyTooltipMsg = `Annual Percentage Yield${selectedToken.label === 'WALLET' ? `: IN ADDITION to what you earn in ${selectedToken.label}s` : ''}`\n        setDetails([\n            [\n                <>\n                    <ToolTip label={apyTooltipMsg}>\n                        <div>APY&nbsp;<MdInfo/></div>\n                    </ToolTip>\n                </>,\n                isAdxTokenSelected() ? adxCurrentAPY ? `${adxCurrentAPY.toFixed(2)}%` : '...' : rewardsData.isLoading ? `...` : xWALLETAPYPercentage\n            ],\n            ['Lock', `${getLockDays()} day unbond period`],\n            ['Type', 'Variable Rate'],\n        ])\n    }, [getLockDays, adxCurrentAPY, isAdxTokenSelected, leaveLog, lockedRemainingTime, onWithdraw, rewardsData.isLoading, selectedToken.label, tokensItems, xWALLETAPYPercentage])\n\n    // NOTE: tokenAddress is unused because we have two tokens in this card, and we set everything in addresses\n    const onValidate = async (type, _tokenAddress, amount, isMaxAmount) => {\n        const bigNumberAmount = parseUnits(amount, 18)\n\n        if (type === 'Deposit') {\n            const allowance = await stakingTokenContract.allowance(accountId, addresses.stakingTokenAddress)\n\n            if (allowance.lt(constants.MaxUint256)) {\n                addRequestTxn(`approve_staking_pool_${Date.now()}`, {\n                    to: addresses.tokenAddress,\n                    value: '0x0',\n                    data: ERC20_INTERFACE.encodeFunctionData('approve', [addresses.stakingTokenAddress, constants.MaxUint256])\n                })\n            }\n\n            addRequestTxn(`enter_staking_pool_${Date.now()}`, {\n                to: addresses.stakingTokenAddress,\n                value: '0x0',\n                data: addresses.stakingPoolInterface.encodeFunctionData('enter', [bigNumberAmount.toHexString()])\n            })\n        }\n\n        if (type === 'Withdraw') {\n            setIsUnbondModalVisible(true)\n            setValidateData({bigNumberAmount, type, _tokenAddress, amount, isMaxAmount})\n        }\n    }\n\n    const handleUnstake = useCallback(async ({bigNumberAmount, isMaxAmount}) => {\n        let xWalletAmount\n        // In case of withdrawing the max amount of xWallet tokens, get the latest balance of xWallet.\n        // Otherwise, `stakingTokenBalanceRaw` may be outdated.\n        if (isMaxAmount) {\n            xWalletAmount = await stakingTokenContract.balanceOf(accountId)\n        } else {\n            xWalletAmount = bigNumberAmount.mul(BigNumber.from((1e18).toString())).div(shareValue)\n        }\n\n        addRequestTxn(`leave_staking_pool_${Date.now()}`, {\n            to: addresses.stakingTokenAddress,\n            value: '0x0',\n            data: addresses.stakingPoolInterface.encodeFunctionData('leave', [xWalletAmount.toHexString(), false])\n        })\n    }, [accountId, addRequestTxn, addresses, shareValue, stakingTokenContract])\n\n    useEffect(() => {\n        if (isUnstakeConfirmed && validateData != null) {\n            handleUnstake(validateData)\n            setIsUnbondModalVisible(false)\n            setIsUnstakeConfirmed(false)\n            setValidateData(null)\n        }\n    }, [isUnstakeConfirmed, handleUnstake, validateData])\n\n    useEffect(() => {\n        async function init() {\n            try {\n                // Prevent init if the card is unavailable for current network\n                if (networkId !== 'ethereum') return\n\n                const provider = getProvider(networkId)\n                \n                const tokenAddress = isAdxTokenSelected() ? ADX_TOKEN_ADDRESS : WALLET_TOKEN_ADDRESS\n                const stakingTokenAddress = isAdxTokenSelected() ? ADX_STAKING_TOKEN_ADDRESS : WALLET_STAKING_ADDRESS\n                const stakingPoolInterface = isAdxTokenSelected() ? ADX_STAKING_POOL_INTERFACE : WALLET_STAKING_POOL_INTERFACE\n                const stakingPoolAbi = isAdxTokenSelected() ? AdexStakingPool : WalletStakingPoolABI\n                const tokenAbi = isAdxTokenSelected() ? ERC20ABI : walletABI\n                const stakingTokenContract = new Contract(stakingTokenAddress, stakingPoolInterface, provider)\n                const tokenContract = new Contract(tokenAddress, tokenAbi, provider)\n                const supplyController = new Contract(\n                    ADDR_ADX_SUPPLY_CONTROLLER,\n                    supplyControllerABI,\n                    provider\n                )\n                setStakingTokenContract(stakingTokenContract)\n                \n                setAddresses({\n                    tokenAddress,\n                    stakingTokenAddress,\n                    stakingPoolInterface,\n                    stakingPoolAbi,\n                    tokenAbi\n                })\n                \n                const [shareValue, sharesTotalSupply, stakingTokenBalanceRaw] = await Promise.all([\n                    stakingTokenContract.shareValue(),\n                    stakingTokenContract.totalSupply(),\n                    stakingTokenContract.balanceOf(accountId),\n                ])\n\n                if (isAdxTokenSelected()) {\n                    const [incentivePerSecond, poolTotalStaked] = await Promise.all([\n                        supplyController.incentivePerSecond(ADX_STAKING_TOKEN_ADDRESS),\n                        tokenContract.balanceOf(stakingTokenAddress),\n                    ])\n                    \n                    const currentAPY = incentivePerSecond\n                        .mul(PRECISION)\n                        .mul(secondsInYear)\n                        .div(poolTotalStaked)\n                        .toNumber() / PRECISION\n                    \n                    setAdxCurrentAPY(currentAPY * 100)\n                }\n\n                setShareValue(shareValue)\n                SetStakingTokenBalanceRaw(stakingTokenBalanceRaw)\n\n                const [leaveLogs, withdrawLogs] = await Promise.all([\n                    provider.getLogs({\n                        fromBlock: 0,\n                        ...stakingTokenContract.filters.LogLeave(accountId, null, null, null)\n                    }),\n                    provider.getLogs({\n                        fromBlock: 0,\n                        ...stakingTokenContract.filters.LogWithdraw(\n                            accountId,\n                            null,\n                            null,\n                            null,\n                            null\n                        ),\n                    })\n                ])\n\n                const userWithdraws = withdrawLogs.map(log => {\n                    const parsedWithdrawLog = stakingTokenContract.interface.parseLog(log)\n                    const { shares, unlocksAt, maxTokens, receivedTokens } =\n                        parsedWithdrawLog.args\n        \n                    return {\n                        transactionHash: log.transactionHash,\n                        type: 'withdraw',\n                        shares,\n                        unlocksAt, \n                        maxTokens, \n                        receivedTokens,\n                        blockNumber: log.blockNumber,\n                    }\n                })\n                \n                const now = new Date() / 1000\n                const userLeaves = await Promise.all(\n                    leaveLogs.map(async log => {\n                        const parsedLog = stakingTokenContract.interface.parseLog(log)\n                        const { maxTokens, shares, unlocksAt } = parsedLog.args\n\n                        const withdrawTx = userWithdraws.find(\n                            event =>\n                                event.unlocksAt.toString() === unlocksAt.toString() &&\n                                event.shares.toString() === shares.toString() &&\n                                event.maxTokens.toString() === maxTokens.toString()\n                        )\n\n                        const walletValue = sharesTotalSupply.isZero()\n                        ? ZERO\n                        : await stakingTokenContract.unbondingCommitmentWorth(\n                            accountId,\n                            shares,\n                            unlocksAt\n                        )\n\n                        return {\n                            transactionHash: log.transactionHash,\n                            type: 'leave',\n                            maxTokens,\n                            shares,\n                            unlocksAt,\n                            blockNumber: log.blockNumber,\n                            walletValue,\n                            withdrawTx\n                        }\n                    })\n                )\n                const leavesPendingToUnlock = [...userLeaves].filter(\n                    event => event.unlocksAt > now\n                )\n        \n                const leavesReadyToWithdraw = [...userLeaves].filter(\n                    event => event.unlocksAt < now && !event.withdrawTx\n                )\n\n                let leavePendingToUnlockOrReadyToWithdraw = null \n                if (leavesReadyToWithdraw.length) leavePendingToUnlockOrReadyToWithdraw = leavesReadyToWithdraw[0]\n                else if (leavesPendingToUnlock.length) leavePendingToUnlockOrReadyToWithdraw = leavesPendingToUnlock[0]\n                \n                if (leavePendingToUnlockOrReadyToWithdraw) {\n                    const {\n                        maxTokens, \n                        shares, \n                        unlocksAt, \n                        walletValue } = leavePendingToUnlockOrReadyToWithdraw\n                \n                    setLeaveLog({\n                        tokens: maxTokens,\n                        shares,\n                        unlocksAt,\n                        walletValue: utils.formatUnits(walletValue.toString(), 18)\n                    })\n                \n                    let remainingTime = leaveLog ? ((leaveLog.unlocksAt.toString() * 1000) - Date.now()) : null\n                    if (remainingTime <= 0) remainingTime = 0\n                    setLockedRemainingTime(remainingTime)    \n                } else {\n                    setLeaveLog(null)\n                }\n            } catch(e) {\n                console.error(e)\n            }\n        }\n        init()\n        return () => {\n            setShareValue(ZERO)\n        }\n    }, [networkId, accountId, selectedToken.label, isAdxTokenSelected, leaveLog])\n\n    useEffect(() => setLoading(false), [])\n\n    return (\n        <>\n            <UnbondModal \n                isVisible={isUnbondModalVisible} \n                hideModal={() => setIsUnbondModalVisible(false)} \n                text={`There is a ${getLockDays()}-day lockup period for the tokens you are requesting to unbond. You will not be earning staking rewards on these tokens during these ${getLockDays()} days!`}\n                onClick={() => setIsUnstakeConfirmed(true)}\n            />\n            <Card\n                loading={loading || (!stakingTokenBalanceRaw && !unavailable)}\n                icon={AMBIRE_ICON}\n                unavailable={unavailable}\n                tokensItems={tokensItems}\n                details={details}\n                customInfo={customInfo}\n                onTokenSelect={onTokenSelect}\n                onValidate={onValidate}\n                moreDetails={!unavailable && <AmbireEarnDetailsModal \n                    apy={isAdxTokenSelected()? adxCurrentAPY ? `${adxCurrentAPY.toFixed(2)}%` : '...' : xWALLETAPYPercentage}\n                    accountId={accountId}\n                    msToDaysHours={msToDaysHours}\n                    addresses={addresses}\n                    tokenLabel={selectedToken.label}\n                />}\n            />\n        </>\n    )\n}\n\nexport default AmbireTokensCard\n","import './Earn.scss'\nimport AAVECard from './Cards/AAVECard/AAVECard'\nimport YearnTesseractCard from './Cards/YearnTesseractCard/YearnTesseractCard'\nimport { Loading } from 'components/common'\nimport AmbireTokensCard from './Cards/AmbireTokensCard/AmbireTokensCard'\n\nconst Earn = ({ portfolio, selectedNetwork, rewardsData, selectedAcc, addRequest }) => {\n    return (\n        <div id=\"earn\">\n            {\n                portfolio.isCurrNetworkBalanceLoading ?\n                    <Loading/>\n                    :\n                    <div className=\"cards\">\n                        <AmbireTokensCard\n                            networkId={selectedNetwork.id}\n                            accountId={selectedAcc}\n                            tokens={portfolio.tokens}\n                            rewardsData={rewardsData}\n                            addRequest={addRequest}\n                        />\n                        <AAVECard networkId={selectedNetwork.id} tokens={portfolio.tokens} account={selectedAcc} addRequest={addRequest}/>\n                        <YearnTesseractCard\n                            networkId={selectedNetwork.id}\n                            accountId={selectedAcc}\n                            tokens={portfolio.tokens}\n                            addRequest={addRequest}\n                        />\n                    </div>\n            }\n        </div>\n    )\n}\n\nexport default Earn","const customIcons = {\n    '0xb468a1e5596cfbcdf561f21a10490d99b4bb7b68': 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg/220px-Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg', // TEST Polygon ELMO token,\n    '0x88800092ff476844f74dc2fc427974bbee2794ae': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/ambire_logo_white_bg_250x250.png', // Ambire Wallet Token\n    '0x47cd7e91c3cbaaf266369fe8518345fc4fc12935': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png', //xWallet\n    '0xb6456b57f03352be48bf101b46c1752a0813491a': 'https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/vaporwave-adex-2.png', // ADX-STAKING\n    '0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c': 'https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/ADX-loyalty%40256x256.png', // ADX-LOYALTY\n    '0xec3b10ce9cabab5dbf49f946a623e294963fbb4e': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png', // Polygons test xWallet\n    '0xe9415e904143e42007865e6864f7f632bd054a08': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/Ambire_logo_250x250.png', // Polygons test Wallet\n    '0xade00c28244d5ce17d72e40330b1c318cd12b7c3': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/official-logos/Ambire-AdEx/Ambire_AdEx_Symbol_color_white_bg.png' //ADX-TOKEN\n}\n\nconst zapperStorageTokenIcons = 'https://storage.googleapis.com/zapper-fi-assets/tokens'\n\nexport function getTokenIcon(networkId = '', address = '') {\n    const addr = address.toLowerCase()\n    const net = networkId.toLowerCase()\n    return customIcons[addr] || `${zapperStorageTokenIcons}/${net}/${addr}.png`\n}\n"],"sourceRoot":""}