(this["webpackJsonpambire-wallet"]=this["webpackJsonpambire-wallet"]||[]).push([[12],{1565:function(e,t,n){e.exports={wrapper:"Balances_wrapper__2sLCW",greenHighlight:"Balances_greenHighlight__maVl4",purpleHighlight:"Balances_purpleHighlight__2rG4V",otherBalances:"Balances_otherBalances__ZYIVD",bottomOverflow:"Balances_bottomOverflow__38VnT",icon:"Balances_icon__pRVmv",iconSvg:"Balances_iconSvg__Zo2dB",noOtherBalancesWrapper:"Balances_noOtherBalancesWrapper__3fQU7",noOtherBalances:"Balances_noOtherBalances__2jmij"}},1566:function(e,t,n){e.exports={purpleHighlight:"BalanceItem_purpleHighlight__2YZFz",balanceContainer:"BalanceItem_balanceContainer__2UsxP",network:"BalanceItem_network__1bu1c"}},1567:function(e,t,n){e.exports={wrapper:"Protocols_wrapper__1XkX0",category:"Protocols_category__k1Yy-",title:"Protocols_title__1RwU2",sortHolder:"Protocols_sortHolder__3N77T",sortButtons:"Protocols_sortButtons__3Qzo5",wrapperBtns:"Protocols_wrapperBtns__Hrh_j",list:"Protocols_list__35znc",token:"Protocols_token__Ks0gq",dragHandle:"Protocols_dragHandle__2nYh4",separator:"Protocols_separator__pgQE6",icon:"Protocols_icon__2_cVe",name:"Protocols_name__35KBt",balance:"Protocols_balance__C3VRc",currency:"Protocols_currency__3e0ke",symbol:"Protocols_symbol__NfT-R",balanceAwaiting:"Protocols_balanceAwaiting__2td9E",balancePending:"Protocols_balancePending__1dlB8",dollar:"Protocols_dollar__2i6RV",actions:"Protocols_actions__WBh39",value:"Protocols_value__12pQf"}},1568:function(e,t,n){e.exports={wrapper:"ProtocolsPlaceholder_wrapper__1sEGA",placeholderOverlay:"ProtocolsPlaceholder_placeholderOverlay__3IANd",category:"ProtocolsPlaceholder_category__3JU3r",title:"ProtocolsPlaceholder_title__32h5t",sortHolder:"ProtocolsPlaceholder_sortHolder__3QmfW",sortButtons:"ProtocolsPlaceholder_sortButtons__3mKDr",wrapperBtns:"ProtocolsPlaceholder_wrapperBtns__MObeB",list:"ProtocolsPlaceholder_list__34PAv",token:"ProtocolsPlaceholder_token__xDihk",dragHandle:"ProtocolsPlaceholder_dragHandle__2TE4r",separator:"ProtocolsPlaceholder_separator__2gfeR",icon:"ProtocolsPlaceholder_icon__2VHj8",name:"ProtocolsPlaceholder_name___ZgC3",balance:"ProtocolsPlaceholder_balance__-Uf3b",currency:"ProtocolsPlaceholder_currency__2xY1s",symbol:"ProtocolsPlaceholder_symbol__3Eu8-",dollar:"ProtocolsPlaceholder_dollar__2VAeU",actions:"ProtocolsPlaceholder_actions__21EEX",addToken:"ProtocolsPlaceholder_addToken__1hEAl",value:"ProtocolsPlaceholder_value__2vgPT"}},1569:function(e,t,n){},1570:function(e,t,n){},1571:function(e,t,n){e.exports={wrapper:"Collectibles_wrapper__2JlNE",greenHighlight:"Collectibles_greenHighlight__2NuzE",purpleHighlight:"Collectibles_purpleHighlight__1rNwl",wrapperBtns:"Collectibles_wrapperBtns__3B_oh",paginationControls:"Collectibles_paginationControls__20eCX",paginationCurrent:"Collectibles_paginationCurrent__jMbgR",collectiblesWrapper:"Collectibles_collectiblesWrapper__27igk",collectible:"Collectibles_collectible__1hyJR",artwork:"Collectibles_artwork__2kJ5N",info:"Collectibles_info__oEi21",collection:"Collectibles_collection__3TGG0",collectionIcon:"Collectibles_collectionIcon__30Dr7",collectionName:"Collectibles_collectionName__2Q2JV",details:"Collectibles_details__28ZTT",name:"Collectibles_name__3pXhh",value:"Collectibles_value__2fX1e",collectibles:"Collectibles_collectibles__2fnQ_",panelHeading:"Collectibles_panelHeading__RwKAo",title:"Collectibles_title__2tnJQ"}},1572:function(e,t,n){e.exports={wrapper:"CollectiblesPlaceholder_wrapper__1Buhm",paginationControls:"CollectiblesPlaceholder_paginationControls__261Pt",paginationCurrent:"CollectiblesPlaceholder_paginationCurrent__3PLO1",collectiblesWrapper:"CollectiblesPlaceholder_collectiblesWrapper__37MM5",collectible:"CollectiblesPlaceholder_collectible__2KT0P",artwork:"CollectiblesPlaceholder_artwork__2-02K",info:"CollectiblesPlaceholder_info__2KmoR",collection:"CollectiblesPlaceholder_collection__sRc1D",collectionIcon:"CollectiblesPlaceholder_collectionIcon__bRdo-",collectionName:"CollectiblesPlaceholder_collectionName__2TsuG",details:"CollectiblesPlaceholder_details__3XMQs",name:"CollectiblesPlaceholder_name__30lD6",value:"CollectiblesPlaceholder_value__3YfwE",collectibles:"CollectiblesPlaceholder_collectibles__1BxGd",panelHeading:"CollectiblesPlaceholder_panelHeading__2P9S_",title:"CollectiblesPlaceholder_title__wP_EJ",placeholderText:"CollectiblesPlaceholder_placeholderText__2AV4T",placeholderOverlay:"CollectiblesPlaceholder_placeholderOverlay__wJEP-",collectiblesPlaceholder:"CollectiblesPlaceholder_collectiblesPlaceholder__2m7_x"}},1573:function(e,t,n){},1574:function(e,t,n){e.exports={notice:"Promotions_notice__2HNSv",minimized:"Promotions_minimized__3uLsV","close-btn":"Promotions_close-btn__2TV9R",title:"Promotions_title__34cvl",link:"Promotions_link__3yDFa",timer:"Promotions_timer__3moX1",emoji:"Promotions_emoji__9wxOk"}},1575:function(e,t,n){},1576:function(e,t,n){e.exports={wrapper:"OutdatedBalancesMsg_wrapper__1_-E3",shadow:"OutdatedBalancesMsg_shadow__2pNzn",alertWrapper:"OutdatedBalancesMsg_alertWrapper__22CpX",alert:"OutdatedBalancesMsg_alert__11jj3",body:"OutdatedBalancesMsg_body__1bzXa",title:"OutdatedBalancesMsg_title__162P7",text:"OutdatedBalancesMsg_text__1mwPI",link:"OutdatedBalancesMsg_link__5s-45",close:"OutdatedBalancesMsg_close__1Shnh"}},1577:function(e,t,n){e.exports={wrapper:"Dashboard_wrapper__9cB3R",panel:"Dashboard_panel__3A6_U",panelTitle:"Dashboard_panelTitle__1Hprs",topPanels:"Dashboard_topPanels__14BCf",overview:"Dashboard_overview__2YDvh",footer:"Dashboard_footer__27Wc8",missingTokenNotice:"Dashboard_missingTokenNotice__1Ortw",powered:"Dashboard_powered__3Iria",chart:"Dashboard_chart__1lo9p"}},1634:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return De}));var r,a,c=n(8),s=n(2),i=n(35),o=n(87),l=n(1565),u=n.n(l),d=n(38),f=["title","titleId"];function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function p(e,t){var n=e.title,c=e.titleId,i=h(e,f);return s.createElement("svg",b({id:"Gas_tank_icon","data-name":"Gas tank icon",xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 32 32",ref:t,"aria-labelledby":c},i),n?s.createElement("title",{id:c},n):null,r||(r=s.createElement("rect",{id:"Boundary",width:32,height:32,transform:"translate(0 32) rotate(-90)",fill:"none"})),a||(a=s.createElement("g",{id:"Group_136","data-name":"Group 136",transform:"translate(7.838 6.968)"},s.createElement("path",{id:"Path_3","data-name":"Path 3",d:"M.817,18.064A.817.817,0,0,1,0,17.247v-.524a.817.817,0,0,1,.817-.817H10.849a.817.817,0,0,1,.817.817v.524a.817.817,0,0,1-.817.817Zm.091-3.083V1.135a1.13,1.13,0,0,1,.333-.8A1.13,1.13,0,0,1,2.042,0H9.669a1.133,1.133,0,0,1,1.045.693,1.131,1.131,0,0,1,.089.441c-.023,8.543.052,9.31,0,13.846Zm2.1-11.935V6.269a.546.546,0,0,0,.545.545H8.045a.546.546,0,0,0,.545-.545V3.046A.546.546,0,0,0,8.045,2.5H3.553A.546.546,0,0,0,3.008,3.046Z",fill:"#ae60ff"}),s.createElement("path",{id:"Path_167","data-name":"Path 167",d:"M7.212,10.924h.307a1.7,1.7,0,0,1,1.2.5,1.68,1.68,0,0,1,.5,1.2v1.7A.894.894,0,0,0,11,14.311V10.446h-.966a.4.4,0,0,1-.4-.4V5.994a.406.406,0,0,1,.23-.365l2.486-1.163v-.9l-2.5-1.285a.4.4,0,0,1,.367-.716l2.718,1.4a.4.4,0,0,1,.218.356v6.729a.4.4,0,0,1-.4.4H11.9v3.865a1.776,1.776,0,0,1-.523,1.262,1.789,1.789,0,0,1-2.911-.567,1.8,1.8,0,0,1-.137-.562h0V12.712a.9.9,0,0,0-.894-.894H7.212Z",transform:"translate(3.592 -0.744)",fill:"#ae60ff"}))))}var m=s.forwardRef(p),j=(n.p,n(59)),g=n(1566),v=n.n(g),O=n(5),x=function(e){var t=e.onClick,n=e.icon,r=e.name,a=e.value,c=e.decimalValue;return Object(O.jsxs)("div",{className:v.a.balanceContainer,onClick:t,children:[Object(O.jsxs)("label",{className:v.a.network,children:[n,Object(O.jsx)("div",{className:v.a.name,children:r})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)("span",{className:v.a.purpleHighlight,children:"$"}),a,".",c]})]})},y=n(301),w=function(e){var t=e.portfolio,n=e.selectedNetwork,r=e.setNetwork,a=e.hidePrivateValue,l=e.relayerURL,f=e.selectedAccount,b=(e.match,Object(s.useRef)()),h=Object(i.useHistory)(),p=function(e){return j.a.find((function(t){return t.id===e}))},g=t.otherBalances.filter((function(e){var t=e.network,r=e.total;return t!==n.id&&r.full>0})),v=t.balancesByNetworksLoading,w=l?"".concat(l,"/gas-tank/").concat(f,"/getBalance"):null,k=Object(d.j)({url:w}),_=k.data,T=k.isLoading,N=_&&_.length&&_.map((function(e){return e.balanceInUSD})).reduce((function(e,t){return e+t}),0),C=N?Number(N.toString()).toFixed(2).split("."):[0,0],P=Object(c.a)(C,2),S=P[0],A={label:"Gas Tank",total:{full:N||0,decimals:P[1],truncated:S}},E=Object(s.useCallback)((function(){if(!v&&g){var e=b.current;if(!e)return;var t=e.scrollHeight-e.clientHeight;if(!(e.scrollHeight>e.clientHeight)||t<=e.scrollTop)return void e.classList.remove(u.a.bottomOverflow);e.classList.toggle(u.a.bottomOverflow,!0)}}),[g,v]);return Object(s.useEffect)((function(){E()}),[v,g,E]),Object(O.jsx)("div",{className:u.a.wrapper,children:t.isCurrNetworkBalanceLoading&&v?Object(O.jsx)(o.n,{}):Object(O.jsx)("div",{className:u.a.otherBalances,ref:b,onScroll:E,children:g.length>0?Object(O.jsxs)(O.Fragment,{children:[g.filter((function(e){var t=e.network;return p(t)})).map((function(e,t){var n=e.network,c=e.total;return Object(O.jsx)(x,{onClick:function(){return r(n)},name:p(n).name,value:a(c.truncated),decimalValue:a(c.decimals),icon:Object(O.jsx)("div",{className:u.a.icon,style:{backgroundImage:"url(".concat(p(n).icon,")")}})},n)})),A&&A.total.full>0&&!T&&Object(O.jsx)(x,{onClick:function(){return h.push("/wallet/gas-tank")},name:A.label,value:a(A.total.truncated),decimalValue:a(A.total.decimals),icon:Object(O.jsx)("div",{className:u.a.iconSvg,children:Object(O.jsx)(m,{})})})]}):Object(O.jsx)("div",{className:u.a.noOtherBalancesWrapper,children:Object(O.jsxs)("div",{className:u.a.noOtherBalances,children:[Object(O.jsx)(y.a,{}),Object(O.jsx)("label",{children:"You don't have any tokens on the other networks."})]})})})})},k=n(16),_=n(9),T=n(4),N=n(1567),C=n.n(N),P=n(534),S=n(217),A=n(71),E=n(50),M=n(233),B=n(1568),I=n.n(B),D=function(e){var t=e.onClickAddToken,n=e.onClickShowToken,r=Object(d.e)({key:"hiddenTokens"}),a=0;return r&&null!==r[0]&&(a=r[0].length),Object(O.jsxs)("div",{className:I.a.wrapper,children:[Object(O.jsxs)("div",{className:I.a.placeholderOverlay,children:[Object(O.jsx)("label",{children:"Welcome! You don't have any funds on this account."}),Object(O.jsx)(A.c,{to:"/wallet/deposit",children:Object(O.jsx)(o.e,{small:!0,icon:Object(O.jsx)(M.a,{}),children:"Deposit"})}),Object(O.jsxs)("div",{className:I.a.addToken,children:[Object(O.jsx)("label",{children:"You have a token that's not displayed?"}),Object(O.jsx)(o.e,{mini:!0,clear:!0,icon:Object(O.jsx)(E.s,{}),onClick:t,children:"Click here to add it"}),a>0&&Object(O.jsxs)("label",{style:{cursor:"pointer"},onClick:n,children:["There are also ",a," hidden tokens. Click to configure"]})]})]}),Object(O.jsxs)("div",{className:I.a.category,children:[Object(O.jsx)("div",{className:I.a.title,children:"Tokens"}),Object(O.jsx)("div",{className:I.a.list,children:[{icon:"https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0xade00c28244d5ce17d72e40330b1c318cd12b7c3.png",symbol:"ADX",balance:170027.26,balanceUSD:138880.64},{icon:"https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x0000000000000000000000000000000000000000.png",symbol:"ETH",balance:61.77,balanceUSD:283170.08},{icon:"https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x2260fac5e5542a773aa44fbcfedf7c193bc2c599.png",symbol:"WBTC",balance:.03,balanceUSD:2227.24}].map((function(e){var t=e.icon,n=e.symbol,r=e.balance,a=e.balanceUSD;return Object(O.jsxs)("div",{className:I.a.token,children:[Object(O.jsx)("div",{className:I.a.icon,children:Object(O.jsx)("img",{src:t,alt:"Token Icon"})}),Object(O.jsx)("div",{className:I.a.name,children:n}),Object(O.jsx)("div",{className:I.a.separator}),Object(O.jsxs)("div",{className:I.a.balance,children:[Object(O.jsxs)("div",{className:I.a.currency,children:[r," ",Object(O.jsx)("span",{className:I.a.symbol,children:n})]}),Object(O.jsxs)("div",{className:I.a.dollar,children:[Object(O.jsx)("span",{className:I.a.symbol,children:"$"})," ",a]})]})]},n)}))})]})]})},L=n(3),R=n.n(L),F=n(13),U=(n(1569),n(103)),H=n(17),W=n(523),z=n(102),V=n(48),G=n(99),K=n(511),q=new H.Interface(W),Y=function(e){var t=e.network,n=e.account,r=e.portfolio,a=Object(V.a)().addToast,i=Object(d.f)().hideModal,l=r.extraTokens,u=r.onAddExtraToken,f=r.onRemoveExtraToken,b=Object(s.useState)(!1),h=Object(c.a)(b,2),p=h[0],m=h[1],j=Object(s.useState)(null),g=Object(c.a)(j,2),v=g[0],x=g[1],y=Object(s.useState)(!1),w=Object(c.a)(y,2),k=w[0],_=w[1],T=!v||!(v.symbol&&v.decimals),N=function(){var e=Object(F.a)(R.a.mark((function e(r){var s,i,o,l,u,d,f,b,h;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(null),Object(z.b)(r)){e.next=3;break}return e.abrupt("return");case 3:return m(!0),_(!1),e.prev=5,s=Object(G.a)(t.id),i=new U.Contract(r,q,s),e.next=10,Promise.all([i.balanceOf(n),i.name(),i.symbol(),i.decimals()]);case 10:o=e.sent,l=Object(c.a)(o,4),u=l[0],d=l[1],f=l[2],b=l[3],h=Object(H.formatUnits)(u,b),x({account:n,address:r.toLowerCase(),network:t.id,balance:h,balanceRaw:u.toString(),tokenImageUrl:Object(K.a)(t.id,r),name:d,symbol:f,decimals:b}),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(5),console.error(e.t0),a("Failed to load token info",{error:!0}),_(!0);case 25:m(!1);case 26:case"end":return e.stop()}}),e,null,[[5,20]])})));return function(t){return e.apply(this,arguments)}}(),C=Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(o.e,{clear:!0,icon:Object(O.jsx)(E.y,{}),onClick:function(){return i()},children:"Close"}),Object(O.jsx)(o.e,{icon:Object(O.jsx)(E.s,{}),disabled:T,onClick:function(){u(v),i()},children:"Add"})]}),P="binance-smart-chain"===t.id?"a BEP20":"ethereum"===t.id?"an ERC20":"a valid";return Object(O.jsxs)(o.o,{id:"add-token-modal",title:"Add Token",buttons:C,children:[Object(O.jsx)(o.z,{label:"Token Address",placeholder:"0x...",onInput:function(e){return N(e)}}),k?Object(O.jsxs)("div",{className:"validation-error",children:["The address you entered does not appear to correspond to ",P," token on ",t.name,"."]}):null,p?Object(O.jsx)(o.n,{}):!k&&v?Object(O.jsxs)("div",{className:"token-details",children:[Object(O.jsxs)("div",{className:"info",children:[Object(O.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(v.icon,")")}}),Object(O.jsxs)("div",{className:"name",children:[v.name," ",Object(O.jsxs)("span",{children:["(",v.symbol,") ",v.network.toUpperCase()]})]})]}),Object(O.jsxs)("div",{className:"balance",children:["Balance: ",Object(O.jsx)("span",{children:v.balance})," ",Object(O.jsx)("b",{children:v.symbol})]})]}):null,Object(O.jsx)("div",{className:"extra-tokens-list",children:l.map((function(e){var t=e.address,n=e.name,r=e.symbol,a=e.tokenImageUrl,c=e.network;return Object(O.jsxs)("div",{className:"extra-token",children:[Object(O.jsxs)("div",{className:"info",children:[Object(O.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(a,")")}}),Object(O.jsxs)("div",{className:"name",children:[n," ",Object(O.jsxs)("span",{children:["(",r,") ",c.toUpperCase()]})]})]}),Object(O.jsx)("div",{className:"actions",children:Object(O.jsx)(o.e,{mini:!0,clear:!0,onClick:function(){return function(e){f(e),i()}(t)},children:Object(O.jsx)(E.G,{})})})]},t)}))})]})},J=(n(1570),function(e){var t=e.token,n=e.button;return Object(O.jsxs)("div",{className:"extra-token",children:[Object(O.jsxs)("div",{className:"info",children:[Object(O.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(t.tokenImageUrl,")")}}),Object(O.jsx)("div",{className:"name",children:Object(O.jsxs)("span",{children:[t.symbol," (",t.network.toUpperCase(),")"]})})]}),n]},t.address)}),X=function(e){var t=e.portfolio,n=e.account,r=e.network,a=e.userSorting,c=e.sortType,i=e.setIsHideTokenModalOpen,l=Object(d.f)(),u=l.hideModal,f=l.setOnClose,b=t.hiddenTokens,h=t.onAddHiddenToken,p=t.onRemoveHiddenToken,m=t.tokens,j=Object(s.useMemo)((function(){var e=m.concat(b).sort((function(e,t){var s,i,o;if("custom"===c&&(null===(s=a.tokens)||void 0===s||null===(i=s.items)||void 0===i||null===(o=i["".concat(n,"-").concat(r.chainId)])||void 0===o?void 0:o.length))return a.tokens.items["".concat(n,"-").concat(r.chainId)].indexOf(e.address)-a.tokens.items["".concat(n,"-").concat(r.chainId)].indexOf(t.address);var l=t.balanceUSD-e.balanceUSD;return 0===l?e.symbol.localeCompare(t.symbol):l}));return Object(k.a)(new Map(e.map((function(e){return[e.address,e]}))).values())}),[m,b,a,c,n,r.chainId]);return Object(s.useEffect)((function(){f({close:function(){return i(!1)}})}),[f,i]),Object(O.jsxs)(o.o,{id:"hide-token-modal",title:"Hide Token",isCloseBtnShown:!1,children:[Object(O.jsx)("div",{className:"extra-tokens-list",children:j.map((function(e){return Object(O.jsx)(J,{token:e,button:e.isHidden?Object(O.jsx)(E.N,{className:"extra-token-icon",color:"#f98689",onClick:function(){return function(e){return p(e.address)}(e)}}):Object(O.jsx)(E.L,{className:"extra-token-icon",color:"#27e8a7",onClick:function(){return function(e){return h(e)}(e)}})},e.address)}))}),Object(O.jsx)("div",{className:"modalBottom",children:Object(O.jsx)(o.e,{clear:!0,icon:Object(O.jsx)(E.y,{}),onClick:function(){i(!1),u()},className:"buttonComponent",children:"Close"})})]})},Z=n(526),$=function(e){var t,n=e.portfolio,r=e.network,a=e.account,i=e.hidePrivateValue,l=e.userSorting,u=e.setUserSorting,f=Object(d.f)().showModal,b=Object(s.useState)([]),h=Object(c.a)(b,2),p=h[0],m=h[1],j=Object(s.useState)(!1),g=Object(c.a)(j,2),v=g[0],x=g[1],y=n.isCurrNetworkBalanceLoading,w=n.tokens,N=(null===(t=l.tokens)||void 0===t?void 0:t.sortType)||"decreasing",M=Object(d.c)(),B=Object(d.d)("address",(function(e){u((function(t){var n;return Object(T.a)(Object(T.a)({},t),{},{tokens:{sortType:"custom",items:Object(T.a)(Object(T.a)({},null===(n=t.tokens)||void 0===n?void 0:n.items),{},Object(_.a)({},"".concat(a,"-").concat(r.chainId),e))}})}))})),I=B.dragStart,L=B.dragEnter,R=B.target,F=B.handle,U=B.dragTarget,H=B.drop,W=w.sort((function(e,t){var n,c,s;if("custom"===N&&(null===(n=l.tokens)||void 0===n||null===(c=n.items)||void 0===c||null===(s=c["".concat(a,"-").concat(r.chainId)])||void 0===s?void 0:s.length))return l.tokens.items["".concat(a,"-").concat(r.chainId)].indexOf(e.address)-l.tokens.items["".concat(a,"-").concat(r.chainId)].indexOf(t.address);var i=t.balanceUSD-e.balanceUSD;return 0===i?e.symbol.localeCompare(t.symbol):i})),z=!y&&!w.length,V=Object(s.useCallback)((function(){return f(Object(O.jsx)(Y,{network:r,account:a,portfolio:n}))}),[a,r,n,f]),G=Object(s.useCallback)((function(){return x(!0)}),[]);return Object(s.useEffect)((function(){v&&f(Object(O.jsx)(X,{portfolio:n,account:a,userSorting:l,sortType:N,network:r,setIsHideTokenModalOpen:x}))}),[n,v,f,a,r,N,l]),Object(O.jsxs)("div",{className:C.a.wrapper,children:[z?Object(O.jsx)(D,{onClickAddToken:V,onClickShowToken:G}):null,Object(O.jsx)(O.Fragment,{children:y?Object(O.jsx)(o.n,{}):!z&&W.length?Object(O.jsxs)("div",{className:C.a.category,children:[Object(O.jsxs)("div",{className:C.a.title,children:[Object(O.jsxs)("div",{className:C.a.sortHolder,children:["Tokens",W.length>1&&!M&&Object(O.jsxs)("div",{className:C.a.sortButtons,children:[Object(O.jsx)(o.B,{label:"Sorted tokens by drag and drop",children:Object(O.jsx)(E.i,{color:"custom"===N?"#80ffdb":"",cursor:"pointer",onClick:function(){return u((function(e){return Object(T.a)(Object(T.a)({},e),{},{tokens:Object(T.a)(Object(T.a)({},e.tokens),{},{sortType:"custom"})})}))}})}),Object(O.jsx)(o.B,{label:"Sorted tokens by DESC balance",children:Object(O.jsx)(E.I,{color:"decreasing"===N?"#80ffdb":"",cursor:"pointer",onClick:function(){return u((function(e){return Object(T.a)(Object(T.a)({},e),{},{tokens:Object(T.a)(Object(T.a)({},e.tokens),{},{sortType:"decreasing"})})}))}})})]})]}),Object(O.jsxs)("div",{className:C.a.wrapperBtns,children:[Object(O.jsx)(o.e,{mini:!0,clear:!0,icon:Object(O.jsx)(E.N,{}),onClick:function(){return G()},children:"Hide Token"}),Object(O.jsx)(o.e,{mini:!0,clear:!0,icon:Object(O.jsx)(E.s,{}),onClick:function(){return V()},children:"Add Token"})]})]}),Object(O.jsx)("div",{className:C.a.list,children:W.map((function(e,t){var n=e.address,r=e.symbol,a=e.tokenImageUrl,c=e.balance,s=e.balanceUSD,l=e.network,u=e.decimals,d=e.pending,f=e.unconfirmed,b=e.latest,h=e.price;return function(e,t,n,r,a,c){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,d=arguments.length>9?arguments[9]:void 0,f=arguments.length>10?arguments[10]:void 0,b=arguments.length>11?arguments[11]:void 0,h=arguments.length>12?arguments[12]:void 0,j=arguments.length>13?arguments[13]:void 0,g=arguments.length>14?arguments[14]:void 0,v=p.includes(t)||!t?Object(K.a)(l,c):t,x=j?j.balance:h||b?0:r;return Object(O.jsxs)("div",{className:C.a.token,draggable:"tokens"===d&&f>1&&"custom"===N&&!M,onDragStart:function(t){F.current===R.current||F.current.contains(R.current)?I(t,e):t.preventDefault()},onMouseDown:function(t){return U(t,e)},onDragEnter:function(t){return L(t,e)},onDragEnd:function(){return H(W)},onDragOver:function(e){return e.preventDefault()},children:[f>1&&"custom"===N&&!M&&Object(O.jsx)(E.i,{size:20,className:C.a.dragHandle,onClick:function(t){return I(t,e)},id:"".concat(e,"-handle")}),Object(O.jsx)("div",{className:C.a.icon,children:p.includes(v)?Object(O.jsx)(P.c,{size:20}):Object(O.jsx)("img",{src:v,draggable:"false",alt:"Token Icon",onError:function(){return m((function(e){return[].concat(Object(k.a)(e),[v])}))}})}),Object(O.jsx)("div",{className:C.a.name,children:n}),Object(O.jsx)("div",{className:C.a.separator}),Object(O.jsxs)("div",{className:C.a.balance,children:[Object(O.jsxs)("div",{className:C.a.currency,children:[Object(O.jsx)("span",{className:C.a.value,children:i(Object(Z.a)(x,!0,u))}),h&&Object(O.jsxs)("span",{className:C.a.balanceAwaiting,children:[" awaiting signature ",i(Object(Z.a)(h.balance,!0,u))," "]}),b&&Object(O.jsxs)("span",{className:C.a.balancePending,children:[" pending ",i(b.balance.toFixed(2))," "]}),Object(O.jsx)("span",{className:C.a.symbol,children:n})]}),Object(O.jsxs)("div",{className:C.a.dollar,children:[Object(O.jsxs)("span",{className:C.a.symbol,children:["$"," "]}),g?i((j?j.balanceUSD:a).toFixed(2)):"-"]})]}),s?Object(O.jsx)("div",{className:C.a.actions,children:Object(O.jsx)(A.c,{to:"/wallet/transfer/".concat(c),children:Object(O.jsx)(o.e,{small:!0,icon:Object(O.jsx)(S.h,{}),children:"Send"})})}):null]},"token-".concat(c,"-").concat(e))}(t,a,r,c,s,n,!0,l,u,"tokens",W.length,d,f,b,h)}))})]},"category-tokens"):null})]})},Q=n(1571),ee=n.n(Q),te=n(1572),ne=n.n(te),re=function(e){var t=e.isPrivateMode,n=e.collectiblesLength;return Object(O.jsxs)("div",{className:ne.a.wrapper,children:[Object(O.jsx)("div",{className:ne.a.placeholderText,children:t&&n?"You can't see collectibles in private mode":"You don't have any collectibles (NFTs) yet"}),Object(O.jsx)("div",{className:ne.a.placeholderOverlay}),Object(O.jsx)("div",{className:ne.a.collectibles,children:Object(O.jsx)("div",{className:ne.a.collectiblesWrapper,children:[{collectionName:"Party Bone",collectionImg:"https://lh3.googleusercontent.com/ZNc-hDBHOxgioSltBcDvh5hBfWEj623dETJj2nrEC0cLbjuULbo4Ign7OnLDX9qf2XaALrkXsZCRylRqPPHqQgzJOabJg4TRq3MDhA=s2500",name:"Party Bone #7865",image:"https://lh3.googleusercontent.com/uznp2aNVNPEhVk4MhLG2Zn-JC2sVaF6PsUcpF_CpyQkgekmv4hh4zbyebsoLFLvkY8PSV6D-TR5OaMp15RhG9zQsYd_AvDCo9SEVF4Q",price:32.16},{collectionName:"Pudgy Penguins",collectionImg:"https://lh3.googleusercontent.com/L9PJp0pOXCscKsTpD1_6zoALxdjG5gIKHLykS_Wk5J_yk590drEqRhM1ElTEZCaWeTjFj2isfxFw2tcFKcbCPlu6-Eu5bUuxsL-x=s2500",name:"Pudgy Penguin #8675",image:"https://lh3.googleusercontent.com/J6gQQRnzsMLAOhYiN9qIhogxr2MKn17zfGf6nQFKr3WCZ34thm6H0w9izvnJysxJclsyr8c3yo0hshOaLU73aS-IgTm-CooJb1cw1S0",price:5675},{collectionName:"Art Blocks Factory",collectionImg:"https://lh3.googleusercontent.com/sr7Y19-bJwsQsxX6n8Pj5tIaNKdUEotNlfhBsYw8McKpIsYARglTORaNlGhDZ2PrH-tO1vU6tFbpamiWwIImbidhVSh4aoIh4d310Og=s2500",name:"Transitions #4267",image:"https://lh3.googleusercontent.com/9MzvH_PSYMvlJE8Cfm5d308ltY5fZx-dooEcQizKgtKZ8g05RvJvd_5LAbqVHIzaoZbM-HOBgNSV8RKvEe_1thkLcQtE4NMMx8Kp5g",price:263.46},{collectionName:"Sad Frogs District",collectionImg:"https://lh3.googleusercontent.com/3U8N73XLrQOQPhJBAMNi7IPR1y3GGJ2zxmyUlit4IHCJURmKFPWClgatjbYfyz9drMk6-XSQTjSFqn7tKL0ZNoRbgvUu8OdLVREA=s2500",name:"1882",image:"https://lh3.googleusercontent.com/3uwrfkdhHSfWm171BOjJHp3768tbLP9TeyTh2BnvgF6S1nIRI489SFq6EGjI9AISRUeyXXufEjB34Wj0bif_vl-y5h6GesEoJaaZcJg",price:1563.59},{collectionName:"GLUEWAVE",collectionImg:"https://lh3.googleusercontent.com/LheZMF6AyTLPpfwABwAGZqoC0gTWrDlYloDdT2VX2u_GZRZnP-ZpDC90huElm3RXE-eU1d1YluQi8G1uVdeDdysUNLZWJte4jXk3zeY=s2500",name:"000105040307070704",image:"https://lh3.googleusercontent.com/eP_F_6aa_BXuKfYq1w2aiS6UW3bp4-gByFoeKLMXYuWAkU6Xiyi7mkm31aoewCZ_eG9RAuhas8jxFwXTxAWuxq1E3ZxYg97cLUUE",price:7107.27}].map((function(e){var t=e.collectionName,n=e.collectionImg,r=e.name,a=e.image,c=e.price;return Object(O.jsxs)("div",{className:ne.a.collectible,children:[Object(O.jsx)("div",{className:ne.a.artwork,style:{backgroundImage:"url(".concat(a,")")}}),Object(O.jsxs)("div",{className:ne.a.info,children:[Object(O.jsxs)("div",{className:ne.a.collection,children:[Object(O.jsx)("div",{className:ne.a.collectionIcon,style:{backgroundImage:"url(".concat(n,")")}}),t]}),Object(O.jsxs)("div",{className:ne.a.details,children:[Object(O.jsx)("div",{className:ne.a.name,children:r}),Object(O.jsxs)("div",{className:ne.a.value,children:[Object(O.jsx)("span",{className:"purple-highlight",children:"$"})," ",c]})]})]})]},r)}))})})]})},ae=(n(1573),function(e){var t=e.token,n=e.button,r=e.handleUri,a=e.asset;return Object(O.jsxs)("div",{className:"extra-token",children:[Object(O.jsxs)("div",{className:"info",children:[Object(O.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(r(a.data.image),")")}}),Object(O.jsx)("div",{className:"name",children:Object(O.jsx)("span",{children:a.data.name})})]}),n]},t.address)}),ce=function(e){var t=e.portfolio,n=e.setIsHideTokenModalOpen,r=e.handleUri,a=Object(d.f)(),c=a.hideModal,i=a.setOnClose,l=t.hiddenCollectibles,u=t.onAddHiddenCollectible,f=t.onRemoveHiddenCollectible,b=t.collectibles,h=Object(s.useMemo)((function(){var e=b.concat(l);return Object(k.a)(new Map(e.map((function(e){return[e.address,e]}))).values())}),[b,l]);return Object(s.useEffect)((function(){i({close:function(){return n(!1)}})}),[i,n]),Object(O.jsxs)(o.o,{id:"hide-collectible-modal",title:"Hide Collectible",children:[Object(O.jsx)("div",{className:"extra-tokens-list",children:h.map((function(e){return(e.assets||[]).map((function(t){return Object(O.jsx)(ae,{token:e,asset:t,button:t.isHidden?Object(O.jsx)(E.N,{className:"extra-token-icon",color:"#f98689",onClick:function(){return function(e,t){return f(e.address,t)}(e,t.tokenId)}}):Object(O.jsx)(E.L,{className:"extra-token-icon",color:"#36c979",onClick:function(){return function(e,t){return u(e,t)}(e,t.tokenId)}}),handleUri:r},e.address)}))}))}),Object(O.jsx)("div",{className:"modalBottom",children:Object(O.jsx)(o.e,{clear:!0,icon:Object(O.jsx)(E.y,{}),onClick:function(){n(!1),c()},children:"Close"})})]})},se=n(739),ie=n(187),oe=function(e){var t=e.selectedNetwork,n=e.portfolio,r=e.isPrivateMode,a=Object(se.useParams)(),i=Object(se.useHistory)(),l=Object(d.f)().showModal,u=Object(s.useState)(!1),f=Object(c.a)(u,2),b=f[0],h=f[1],p=Math.ceil(n.collectibles.length/15),m=Object(s.useMemo)((function(){return Math.min(Math.max(Number(a.page),1),p)||1}),[a.page,p]),j=Object(s.useState)(m),g=Object(c.a)(j,2),v=g[0],x=g[1],y=n.collectibles.slice(15*(v-1),15*v),w=Object(O.jsxs)("div",{className:ee.a.paginationControls,children:[Object(O.jsx)("div",{className:ee.a.paginationTitle,children:"Page"}),Object(O.jsx)(o.e,{clear:!0,mini:!0,onClick:function(){return v>1&&x((function(e){return e-1}))},children:Object(O.jsx)(ie.a,{})}),Object(O.jsxs)("div",{className:ee.a.paginationCurrent,children:[v," ",Object(O.jsxs)("span",{children:["/ ",p]})]}),Object(O.jsx)(o.e,{clear:!0,mini:!0,onClick:function(){return v<p&&x((function(e){return e+1}))},children:Object(O.jsx)(ie.b,{})})]});Object(s.useEffect)((function(){return i.replace("/wallet/dashboard/collectibles/".concat(v))}),[v,i]),Object(s.useEffect)((function(){return x(m)}),[m]);var k=function(e){return e?"data:image"===(e=e.startsWith("data:application/json")?e.replace("data:application/json;utf8,",""):e).split("/")[0]?e:e.startsWith("ipfs://")?e.replace(/ipfs:\/\/ipfs\/|ipfs:\/\//g,"https://ipfs.io/ipfs/"):e.split("/")[2].endsWith("mypinata.cloud")?"https://ipfs.io/ipfs/"+e.split("/").slice(4).join("/"):e:""},_=Object(s.useCallback)((function(){return h(!0)}),[]);return Object(s.useEffect)((function(){b&&l(Object(O.jsx)(ce,{portfolio:n,setIsHideTokenModalOpen:h,handleUri:k}))}),[n,b,l]),n.loading?Object(O.jsx)(o.n,{}):!n.collectibles.length||r?Object(O.jsx)(re,{isPrivateMode:r,collectiblesLength:n.collectibles.length}):Object(O.jsxs)("div",{className:ee.a.wrapper,children:[Object(O.jsx)("div",{className:ee.a.wrapperBtns,children:Object(O.jsx)(o.e,{mini:!0,clear:!0,icon:Object(O.jsx)(E.N,{}),onClick:function(){return _()},children:"Hide Collectible"})}),Object(O.jsx)("div",{className:ee.a.collectiblesWrapper,children:y.map((function(e){e.network;var n=e.address,r=e.collectionName,a=e.assets,c=e.balanceUSD;return(a||[]).map((function(e){var a=e.tokenId,s=e.data;return Object(O.jsx)("div",{className:ee.a.collectible,children:Object(O.jsxs)(A.c,{to:"/wallet/nft/".concat(t.id,"/").concat(n,"/").concat(a),children:[Object(O.jsx)("div",{className:ee.a.artwork,style:{backgroundImage:"url(".concat(k(s.image),")")}}),Object(O.jsxs)("div",{className:ee.a.info,children:[Object(O.jsxs)("div",{className:ee.a.collection,children:[Object(O.jsx)("div",{className:ee.a.collectionIcon,style:{backgroundImage:"url(".concat(k(s.image),")")}}),Object(O.jsx)("span",{className:ee.a.collectionName,children:r})]}),Object(O.jsxs)("div",{className:ee.a.details,children:[Object(O.jsx)("div",{className:ee.a.name,children:s.name}),Object(O.jsxs)("div",{className:ee.a.value,children:[Object(O.jsx)("span",{className:ee.a.purpleHighlight,children:"$"})," ",c.toFixed(2)]})]})]})]})},a)}))}))}),w]})},le=n(112),ue=n(1574),de=n.n(ue),fe=(n(1575),n(740));function be(e){return e<10?"0".concat(e):"".concat(e)}function he(e){var t=e.endDateTime,n=e.label,r=Object(s.useState)(null),a=Object(c.a)(r,2),i=a[0],o=a[1];return Object(s.useLayoutEffect)((function(){if(t){var e=setInterval((function(){var n=new Date(t).getTime()-(new Date).getTime();o(function(e){return e<0?{days:"00",hours:"00",minutes:"00",seconds:"00"}:{days:be(Math.floor(e/864e5)),hours:be(Math.floor(e/36e5%24)),minutes:be(Math.floor(e/1e3/60%60)),seconds:be(Math.floor(e/1e3%60))}}(n)),n<0&&(clearInterval(e),e=null)}),1e3);return function(){clearInterval(e),e=null}}o(null)}),[t]),i?Object(O.jsxs)("div",{children:[n&&Object(O.jsx)("span",{children:n}),Object(O.jsxs)("div",{className:"final-countdown",children:[Object(O.jsx)(fe.b,{className:"timer-icon"}),Object(O.jsxs)("div",{className:"unit-box",children:[Object(O.jsx)("div",{className:"value",children:i.days}),Object(O.jsx)("div",{className:"unit",children:"days"})]}),Object(O.jsx)("div",{className:"value",children:":"}),Object(O.jsxs)("div",{className:"unit-box",children:[Object(O.jsx)("div",{className:"value",children:i.hours}),Object(O.jsx)("div",{className:"unit",children:"hours"})]}),Object(O.jsx)("div",{className:"value",children:":"}),Object(O.jsxs)("div",{className:"unit-box",children:[Object(O.jsx)("div",{className:"value",children:i.minutes}),Object(O.jsx)("div",{className:"unit",children:"minutes"})]}),Object(O.jsx)("div",{className:"value",children:":"}),Object(O.jsxs)("div",{className:"unit-box",children:[Object(O.jsx)("div",{className:"value",children:i.seconds}),Object(O.jsx)("div",{className:"unit",children:"seconds"})]})]})]}):null}var pe=n(221),me=["emojies","color","background"];function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.period,r=e.text,a=e.title,s=e.resources,i=void 0===s?{}:s,o=e.togglePromo,l=e.minimized;if(!r)return null;var u=new RegExp(/\${{(\w+)}}/,"gi"),d=r.split(u),f=i.emojies,b=i.color,h=i.background,p=Object(le.a)(i,me),m=Object.entries(p).reduce((function(e,t){var n=Object(c.a)(t,2),r=n[0],a=n[1],s=(a=void 0===a?{}:a).label,i=a.href,o=Object(O.jsx)("a",{className:"link",href:i,target:"_blank",rel:"noreferrer noopener",children:s},r);return e[r]=o,e}),{}),j=Object.entries(Object(T.a)({},f)).reduce((function(e,t){var n=Object(c.a)(t,2),r=n[0],a=n[1],s=(a=void 0===a?{}:a).text,i=a.size,o=Object(O.jsx)("span",{className:de.a.emoji,style:{fontSize:i},children:s},r);return e[r]=o,e}),{});return Object(O.jsxs)("div",{className:"".concat(de.a.notice," ").concat(l?de.a.minimized:""),style:Object(T.a)(Object(T.a)({},h?{backgroundColor:h}:{}),b?{color:b}:{}),children:[!l&&Object(O.jsxs)("div",{children:[a&&Object(O.jsx)("div",{className:de.a.title,children:a}),Object(O.jsx)("div",{children:d.map((function(e){return m[e]||j[e]||e}))}),(null===n||void 0===n?void 0:n.to)&&(null===n||void 0===n?void 0:n.timer)&&Object(O.jsx)("div",{className:de.a.timer,children:Object(O.jsx)(he,{endDateTime:n.to})})]}),t?l?Object(O.jsx)(E.C,{className:de.a.closeBtn,onClick:function(){return o(t)}}):Object(O.jsx)("div",{children:Object(O.jsx)(S.g,{className:de.a.closeBtn,onClick:function(){return o(t)}})}):null]})}function ge(e){var t=e.rewardsData.rewards.promo,n=Object(pe.a)({key:"closedPromos",defaultValue:[]}),r=Object(c.a)(n,2),a=r[0],i=r[1],o=Object(s.useCallback)((function(e){var t=Object(k.a)(a),n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e),i(t)}),[a,i]);return t?Object(O.jsx)(je,Object(T.a)(Object(T.a)({},t),{},{togglePromo:o,minimized:a.includes(t.id)})):null}var ve=n(765),Oe=n(742);var xe,ye,we=n(1576),ke=n.n(we),_e=["title","titleId"];function Te(){return Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Te.apply(this,arguments)}function Ne(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ce(e,t){var n=e.title,r=e.titleId,a=Ne(e,_e);return s.createElement("svg",Te({id:"Alert_icon_2","data-name":"Alert icon 2",xmlns:"http://www.w3.org/2000/svg",width:34,height:30.6,viewBox:"0 0 34 30.6",ref:t,"aria-labelledby":r},a),n?s.createElement("title",{id:r},n):null,xe||(xe=s.createElement("path",{id:"Path_60","data-name":"Path 60",d:"M14.512,7.194a6.185,6.185,0,0,1,10.612,0l10.91,18.838a5.885,5.885,0,0,1-5.306,8.754H8.909A5.885,5.885,0,0,1,3.6,26.032Z",transform:"translate(-2.819 -4.187)",fill:"#ffbc00"})),ye||(ye=s.createElement("path",{id:"Path_59","data-name":"Path 59",d:"M-3969.3,23.583a1.7,1.7,0,0,1-1.7-1.689,1.7,1.7,0,0,1,1.7-1.689,1.7,1.7,0,0,1,1.7,1.689A1.7,1.7,0,0,1-3969.3,23.583Zm0-6.758a1.7,1.7,0,0,1-1.7-1.689V6.689A1.7,1.7,0,0,1-3969.3,5a1.7,1.7,0,0,1,1.7,1.689v8.447A1.7,1.7,0,0,1-3969.3,16.825Z",transform:"translate(3986.298 3.093)",fill:"#fff"})))}var Pe=s.forwardRef(Ce),Se=(n.p,function(e){var t=e.selectedAccount,n=e.selectedNetwork;return Object(O.jsxs)("div",{className:ke.a.wrapper,children:[Object(O.jsx)("div",{className:ke.a.alertWrapper,children:Object(O.jsxs)("div",{className:ke.a.alert,children:[Object(O.jsx)(Pe,{}),Object(O.jsxs)("div",{className:ke.a.body,children:[Object(O.jsx)("h4",{className:ke.a.title,children:"Dashboard balances could appear incomplete or outdated."}),Object(O.jsxs)("p",{className:ke.a.text,children:["We are currently experiencing technical difficulties with our third party services, so what you see on the dashboard may be incomplete or outdated. You can check"," ",Object(O.jsx)("a",{href:n.explorerUrl+"/address/"+t,target:"_blank",rel:"noreferrer",className:ke.a.link,children:n.explorerUrl.split("/")[2]})," ","to see your current balances. However, you can use Ambire normally with any connected dApp."]})]})]})}),Object(O.jsx)("div",{className:ke.a.shadow})]})}),Ae=n(32),Ee=n.n(Ae),Me=n(1577),Be=n.n(Me),Ie=[{value:"tokens"},{value:"collectibles"}];function De(e){var t=e.portfolio,n=e.selectedNetwork,r=e.selectedAccount,a=e.setNetwork,l=e.privateMode,u=e.rewardsData,f=e.userSorting,b=e.setUserSorting,h=e.accounts,p=e.addRequest,m=e.relayerURL,j=e.useStorage,g=e.match,v=e.showSendTxns,x=Object(i.useHistory)(),y=Object(i.useParams)(),k=y.tabId,_=y.page,N=void 0===_?1:_,C=Object(s.useMemo)((function(){return t.balance}),[t.balance]),P=Object(s.useMemo)((function(){return t.tokens}),[t.tokens]),S=Object(s.useState)([]),A=Object(c.a)(S,2),E=A[0],M=A[1],B=Object(s.useState)(k||Ie[0].value),I=Object(c.a)(B,2),D=I[0],L=I[1],R=h.find((function(e){return e.id.toLowerCase()===r.toLowerCase()})),F=function(e,t,n){var r=Object(s.useState)((function(){return Date.now()})),a=Object(c.a)(r,2),i=a[0],o=a[1],l=Object(s.useState)(null),u=Object(c.a)(l,2),f=u[0],b=u[1],h=Object(s.useState)(null),p=Object(c.a)(h,2),m=p[0],j=p[1],g=Object(s.useState)(null),v=Object(c.a)(g,2),O=v[0],x=v[1],y=Object(s.useState)(null),w=Object(c.a)(y,2),k=w[0],_=w[1];Object(s.useEffect)((function(){Date.now()-i>3e4&&o(Date.now());var e=setTimeout((function(){return o(Date.now())}),3e4);return function(){return clearTimeout(e)}}),[i,t,n]);var N=e?"".concat(e,"/identity/").concat(t.id,"/").concat(n.id,"/privileges?cacheBreak=").concat(i):null,C=Object(d.j)({url:N}),P=C.data,S=C.errMsg,A=C.isLoading;return Object(s.useEffect)((function(){var e=P?P.privileges:{},r=P&&P.recoveryLock,a=e[t.signer.quickAccManager]&&(r&&r.status&&!A||e&&t.signer.quickAccManager&&t.signer.preRecovery&&function(e){var t=new H.AbiCoder,n=e.timelock,r=e.one,a=e.two;return Object(H.keccak256)(t.encode(["tuple(uint, address, address)"],[[n,r,a]]))}(t.signer)!==e[t.signer.quickAccManager]);b({hasPendingReset:a,errMsg:S,recoveryLock:r}),A?x(!k&&A):m===(null===t||void 0===t?void 0:t.id)+n.id?(_(!0),x(!1)):(j((null===t||void 0===t?void 0:t.id)+n.id),_(!1))}),[P,S,A,t,m,n.id,k]),Object(T.a)({data:P,isPasswordRecoveryCheckLoading:O},f)}(m,R,n),U=F.hasPendingReset,W=F.recoveryLock,z=F.isPasswordRecoveryCheckLoading,V=t.cache||!1;return Object(s.useEffect)((function(){if(!D||D===Ie[0].value)return x.replace("/wallet/dashboard");x.replace("/wallet/dashboard/".concat(D).concat(D===Ie[1].value?"/".concat(N):""))}),[D,x,N]),Object(s.useLayoutEffect)((function(){var e,n,r=P.map((function(e){var t=e.label,n=e.symbol,r=e.balanceUSD;return{label:t||n,value:Number((r/C.total.full*100).toFixed(2)),balanceUSD:r}})).filter((function(e){return e.value>0}));(null===t||void 0===t||null===(e=t.balance)||void 0===e||null===(n=e.total)||void 0===n?void 0:n.full)&&r?M({empty:!1,data:null===r||void 0===r?void 0:r.sort((function(e,t){return t.value-e.value}))}):M({empty:!0,data:[{label:"You don't have any tokens",balanceUSD:1,value:0}],tokensLength:null===P||void 0===P?void 0:P.length})}),[C,P]),Object(O.jsxs)("section",{className:Be.a.wrapper,children:[V&&Object(O.jsx)(Se,{selectedNetwork:n,selectedAccount:r}),Object(O.jsx)(ge,{rewardsData:u}),Object(O.jsx)(ve.a,{selectedNetwork:n,selectedAccount:r,accounts:h,addRequest:p,closeable:!0,relayerURL:m,portfolio:t,useStorage:j}),U&&!z&&Object(O.jsx)(Oe.a,{recoveryLock:W,showSendTxns:v,selectedAccount:R,selectedNetwork:n}),Object(O.jsxs)("div",{className:Be.a.overview,children:[Object(O.jsx)(o.s,{className:Ee()(Be.a.chart,Be.a.panel,Be.a.topPanels),children:t.isCurrNetworkBalanceLoading?Object(O.jsx)(o.n,{}):l.hidePrivateContent(Object(O.jsx)(o.f,{selectedNetwork:n,data:E,size:200,className:Be.a.chart,hidePrivateValue:l.hidePrivateValue,portfolio:t}))}),Object(O.jsx)(o.s,{className:Ee()(Be.a.balance,Be.a.panel,Be.a.topPanels),titleClassName:Be.a.panelTitle,title:"You also have",children:Object(O.jsx)(w,{portfolio:t,selectedNetwork:n,setNetwork:a,hidePrivateValue:l.hidePrivateValue,relayerURL:m,selectedAccount:r,match:g})})]}),Object(O.jsxs)(o.s,{title:Object(O.jsxs)(O.Fragment,{children:["Assets ",Object(O.jsx)(o.v,{small:!0,defaultValue:D,segments:Ie,onChange:L})]}),children:[D===Ie[0].value?Object(O.jsx)($,{portfolio:t,network:n,account:r,hidePrivateValue:l.hidePrivateValue,userSorting:f,setUserSorting:b}):Object(O.jsx)(oe,{portfolio:t,isPrivateMode:l.isPrivateMode,selectedNetwork:n}),Object(O.jsx)("div",{className:Be.a.footer,children:Object(O.jsxs)("span",{className:Be.a.missingTokenNotice,children:["If you don't see a specific token that you own, please check the ",Object(O.jsx)("a",{href:"".concat(n.explorerUrl,"/address/").concat(r),target:"_blank",rel:"noreferrer",children:"Block Explorer"})]})})]})]})}},188:function(e,t,n){"use strict";n.r(t);t.default=function(e,t){}},511:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r={"0xb468a1e5596cfbcdf561f21a10490d99b4bb7b68":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg/220px-Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg","0x88800092ff476844f74dc2fc427974bbee2794ae":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/ambire_logo_white_bg_250x250.png","0x47cd7e91c3cbaaf266369fe8518345fc4fc12935":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png","0xb6456b57f03352be48bf101b46c1752a0813491a":"https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/vaporwave-adex-2.png","0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c":"https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/ADX-loyalty%40256x256.png","0xec3b10ce9cabab5dbf49f946a623e294963fbb4e":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png","0xe9415e904143e42007865e6864f7f632bd054a08":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/Ambire_logo_250x250.png","0xade00c28244d5ce17d72e40330b1c318cd12b7c3":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/official-logos/Ambire-AdEx/Ambire_AdEx_Symbol_color_white_bg.png"},a="https://storage.googleapis.com/zapper-fi-assets/tokens";function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.toLowerCase(),c=e.toLowerCase();return r[n]||"".concat(a,"/").concat(c,"/").concat(n,".png")}},523:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},525:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return v}));var r=n(4),a=n(3),c=n.n(a),s=n(13),i=n(545),o=n(57),l=n(527),u=n(528),d=2147483648,f={startPath:[2147483692,2147483708,d,0,0],n:10},b=function(e){var t={name:"Ambire Wallet",crypto:u,privKey:e};return new i.Client(t)},h=function(){var e=Object(s.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){t.connect(n,(function(t,n){t?r("Lattice connect: ".concat(t," Or check if the DeviceID is correct.")):e({isPaired:!!n,errConnect:!1})}))})).catch((function(e){return console.error(e),{isPaired:!1,errConnect:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(s.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){t.pair(n,(function(t,n){t?r("Lattice connect: ".concat(t)):e({hasActiveWallet:n,errPair:!1})}))})).catch((function(e){return console.error(e),{hasActiveWallet:!1,errPair:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){t.getAddresses(f,(function(t,r){if(t)n("Lattice get addresses: ".concat(t));else{if(!r)throw new Error("Lattice could not get the addresses.");e({res:r,errGetAddresses:!1})}}))})).catch((function(e){return console.error(e),{res:null,errGetAddresses:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={protocol:"signPersonal",payload:o.ethers.utils.hexlify(n),signerPath:[2147483692,2147483708,d,0,0]},a={currency:"ETH_MSG",data:r},e.next=4,new Promise((function(e,n){t.sign(a,(function(t,r){if(t)n(t);else{if(!r)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+r.sig.r+r.sig.s+r.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={currency:"ETH_MSG",data:{signerPath:[2147483692,2147483708,d,0,0],protocol:"eip712",payload:n}},e.next=3,new Promise((function(e,n){t.sign(r,(function(t,r){if(t)n(t);else{if(!r)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+r.sig.r+r.sig.s+r.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(c.a.mark((function e(t,n,a){var s,i,o,u,f,b,h,p,m,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.to,i=n.data,o=n.gas,u=n.gasPrice,f=n.nonce,b=n.value,h=void 0===b?0:b,delete(p=Object(r.a)(Object(r.a)({},n),{},{gasLimit:n.gasLimit||n.gas,chainId:a})).from,delete p.gas,m={nonce:f,gasLimit:o||n.gasLimit,gasPrice:u,to:s,value:h,data:i||"",signerPath:[2147483692,2147483708,d,0,0],chainId:a,useEIP155:!0},j={currency:"ETH",data:m},e.next=8,new Promise((function(e,n){t.sign(j,(function(t,r){if(t)n(t);else{if(!r)throw new Error("Lattice could not sign the message.");delete p.v;var a=Object(l.a)(p,{r:"0x"+r.sig.r,s:"0x"+r.sig.s,v:r.sig.v[0].toString(16)});e({serializedSigned:a,errSignTxn:!1})}}))})).catch((function(e){return console.error(e),{serializedSigned:null,errSignTxn:e}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},526:function(e,t,n){"use strict";function r(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18;if(isNaN(e)||isNaN(parseFloat(e))||"number"!==typeof e&&"string"!==typeof e)return e;try{var r=Math.min(2,n||0);return("number"===typeof e?e:parseFloat(e)).toLocaleString(void 0,{useGrouping:t,maximumFractionDigits:Math.max(r,n),minimumFractionDigits:r})}catch(a){return console.error(a),e}}n.d(t,"a",(function(){return r}))},530:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return y})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return T}));var r=n(4),a=n(3),c=n.n(a),s=n(13),i=n(603),o=n(606),l=n(527),u=n(152),d=n(520),f=null,b="44'/60'/0'/0";function h(){return p.apply(this,arguments)}function p(){return(p=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.list();case 2:if(!(f=e.sent).length){e.next=11;break}if(!f[0].opened){e.next=8;break}return e.abrupt("return",new i.a(f[0]));case 8:return e.abrupt("return",i.a.open(f[0]));case 9:e.next=22;break;case 11:return e.prev=11,e.next=14,i.a.request();case 14:return e.abrupt("return",e.sent);case 17:if(e.prev=17,e.t0=e.catch(11),!e.t0.message.includes("reading 'open'")){e.next=21;break}throw new Error("ledger WebHID request denied");case 21:throw new Error("Could not request WebHID ledger: "+e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}function m(){return j.apply(this,arguments)}function j(){return(j=Object(s.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return t=e.sent,e.next=5,g(t);case 5:return n=e.sent,t.close(),e.abrupt("return",n.map((function(e){return e.address})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(c.a.mark((function t(n){var r,a,s,i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="m/".concat(b),t.next=3,O(n,r).then((function(e){return e})).catch((function(e){throw 25871===e.statusCode||27404===e.statusCode?Error("Please make sure your ledger is unlocked and running the Ethereum app. "+e.message):Error("Could not get address from ledger : "+e)}));case 3:return a=t.sent,(s=new d).publicKey=e.from(a.publicKey,"hex"),s.chainCode=e.from(a.chainCode,"hex"),i=P(s),o={hdKey:s,address:i,derivationPath:r,baseDerivationPath:b},t.abrupt("return",C(o,1));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(e,t){return x.apply(this,arguments)}function x(){return(x=Object(s.a)(c.a.mark((function e(t,n){var r,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new o.a(t),s=new Promise((function(e,t){r=setTimeout((function(){return t(new Error("Device took too long to respond..."))}),1e4)})),e.abrupt("return",Promise.race([a.getAddress(n,!1,!0),s]).then((function(e){return clearTimeout(r),e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return w.apply(this,arguments)}function w(){return(w=Object(s.a)(c.a.mark((function e(t,n){var a,s,i,u,d,f,b,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return a=e.sent,s=t.from,delete(i=Object(r.a)(Object(r.a)({},t),{},{gasLimit:t.gasLimit||t.gas,chainId:n})).from,delete i.gas,u=Object(l.a)(i),e.next=10,g(a);case 10:if(d=e.sent,d[0].address.toLowerCase()!==s.toLowerCase()){e.next=30;break}return e.prev=13,e.next=16,new o.a(a).signTransaction(d[0].derivationPath,u.substr(2));case 16:b=e.sent,e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(13),new Error("Could not sign transaction "+e.t0);case 22:if(p=parseInt(b.v,16),Math.floor((p-35)/2)===n){e.next=26;break}throw new Error("Invalid returned V 0x"+b.v);case 26:delete i.v,f=Object(l.a)(i,{r:"0x"+b.r,s:"0x"+b.s,v:p}),e.next=31;break;case 30:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 31:return a.close(),e.abrupt("return",f);case 33:case"end":return e.stop()}}),e,null,[[13,19]])})))).apply(this,arguments)}function k(e,t){return _.apply(this,arguments)}function _(){return(_=Object(s.a)(c.a.mark((function e(t,n){var r,a,s,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return r=e.sent,e.next=5,g(r);case 5:if(a=e.sent,(s=a[0]).address.toLowerCase()!==n.toLowerCase()){e.next=20;break}return e.prev=8,e.next=11,new o.a(r).signPersonalMessage(s.derivationPath,t.substr(2));case 11:l=e.sent,i="0x"+l.r+l.s+l.v.toString(16),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(8),new Error("Signature denied "+e.t0.message);case 18:e.next=21;break;case 20:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 21:return r.close(),e.abrupt("return",i);case 23:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}function T(e,t,n){return N.apply(this,arguments)}function N(){return(N=Object(s.a)(c.a.mark((function e(t,n,r){var a,s,i,l,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return a=e.sent,e.next=5,g(a);case 5:if(s=e.sent,(i=s[0]).address.toLowerCase()!==r.toLowerCase()){e.next=20;break}return e.prev=8,e.next=11,new o.a(a).signEIP712HashedMessage(i.derivationPath,t,n);case 11:u=e.sent,l="0x"+u.r+u.s+u.v.toString(16),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(8),new Error("Signature denied "+e.t0.message);case 18:e.next=21;break;case 20:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 21:return a.close(),e.abrupt("return",l);case 23:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}function C(e,t){for(var n=[],r=0;r<t;r++){var a="m/".concat(e.baseDerivationPath,"/").concat(r),c="m/".concat(r),s=e.hdKey.derive(c),i={address:P(s),hdKey:s,baseDerivationPath:e.baseDerivationPath,derivationPath:a};n.push(i)}return n}function P(e){var t=e.publicKey,n=u.publicToAddress(t,!0).toString("hex");return u.addHexPrefix(n).toLowerCase()}}).call(this,n(29).Buffer)},535:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(3),a=n.n(r),c=n(13),s=n(4),i=n(552),o=n(610),l=n.n(o),u=n(57),d=n(520),f=n.n(d),b=n(562),h=n(597),p=n(530),m=n(525),j=n(17),g=n(99),v=n(59),O={};function x(e){var t=e.signer,n=e.signerExtra,r=e.chainId,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c="".concat(t.address||t.one).concat(r);return O[c]?O[c]:O[c]=y({signer:t,signerExtra:n,chainId:r},a)}function y(e,t){var n=e.chainId,r=e.signer,o=e.signerExtra;if(o&&"trezor"===o.type){l.a.manifest({email:"contactus@ambire.com",appUrl:"https://wallet.ambire.com"});var d=new i.TrezorSubprovider({trezorConnectClientApi:l.a,networkId:n});return d._initialDerivedKeyInfo=function(e){return{hdKey:f.a.fromExtendedKey(e.info.hdKey.xpub),derivationPath:e.info.derivationPath,baseDerivationPath:e.info.baseDerivationPath}}(o),{signMessage:function(e){return d.signPersonalMessageAsync(u.ethers.utils.hexlify(e),r.address)},signTransaction:function(e){return d.signTransactionAsync(Object(s.a)(Object(s.a)({},e),{},{from:r.address}))},sendTransaction:function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v.a.find((function(e){return e.chainId===t.chainId}))){e.next=3;break}throw Error("no network found for chainId : "+t.chainId);case 3:return e.next=5,Object(g.a)(n.id);case 5:if(r=e.sent){e.next=8;break}throw Error("no provider found for network : "+n.id);case 8:return e.t0=u.ethers.utils,e.next=11,r.getTransactionCount(t.from);case 11:return e.t1=e.sent,t.nonce=e.t0.hexlify.call(e.t0,e.t1),c=u.ethers.utils.hexlify(t.gas||t.gasLimit),t.gasPrice=u.ethers.utils.hexlify(t.gasPrice),t=Object(s.a)(Object(s.a)({},t),{},{gas:c}),e.next=18,d.signTransactionAsync(t);case 18:return i=e.sent,e.abrupt("return",r.sendTransaction(i));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getAccountsAsync(100);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return e.toLowerCase()})).includes(t.toLowerCase()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_signTypedData:function(){var e=Object(c.a)(a.a.mark((function e(t,n,c){var s,i,o,l,u,f,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=j._TypedDataEncoder.hashDomain(t),i=j._TypedDataEncoder.hashStruct(j._TypedDataEncoder.getPrimaryType(n),n,c),o=j._TypedDataEncoder.getPayload(t,n,c),e.next=5,d._initialDerivedKeyInfoAsync();case 5:return l=e.sent,u=d._findDerivedKeyInfoForAddress(l,r.address),f=u.derivationPath,e.next=10,d._trezorConnectClientApi.ethereumSignTypedData({path:f,data:o,metamask_v4_compat:!0,domain_separator_hash:s,message_hash:i});case 10:if(!(b=e.sent).success){e.next=15;break}return e.abrupt("return","".concat(b.payload.signature));case 15:throw new Error(b.payload.error);case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}}if(o&&"ledger"===o.type){if("webHID"===o.transportProtocol)return{signMessage:function(e){return Object(p.c)(u.ethers.utils.hexlify(e),r.address)},signTransaction:function(e){return Object(p.e)(e,n)},sendTransaction:function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v.a.find((function(e){return e.chainId===t.chainId}))){e.next=3;break}throw Error("no network found for chainId : "+t.chainId);case 3:return e.next=5,Object(g.a)(n.id);case 5:if(r=e.sent){e.next=8;break}throw Error("no provider found for network : "+n.id);case 8:return e.t0=u.ethers.utils,e.next=11,r.getTransactionCount(t.from);case 11:return e.t1=e.sent,t.nonce=e.t0.hexlify.call(e.t0,e.t1),e.next=15,Object(p.e)(t,t.chainId);case 15:return c=e.sent,e.abrupt("return",r.sendTransaction(c));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)();case 2:if(!(n=e.sent)||!n[0]){e.next=7;break}if(!t){e.next=6;break}return e.abrupt("return",!!n.find((function(e){return e.toLowerCase()===t.toLowerCase()})));case 6:return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_signTypedData:function(e,t,n){var a=j._TypedDataEncoder.hashDomain(e),c=j._TypedDataEncoder.hashStruct(j._TypedDataEncoder.getPrimaryType(t),t,n);return Object(p.d)(a,c,r.address)}};var O=new b.LedgerSubprovider({networkId:n,ledgerEthereumClientFactoryAsync:h.ledgerEthereumBrowserClientFactoryAsync,baseDerivationPath:o.info.baseDerivationPath});return{signMessage:function(e){return O.signPersonalMessageAsync(u.ethers.utils.hexlify(e),r.address)},signTransaction:function(e){return O.signTransactionAsync(Object(s.a)(Object(s.a)({},e),{},{from:r.address}))},sendTransaction:function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("Please use a chrome based browser to use Ledger");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getAccountsAsync(1);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return e.toLowerCase()})).includes(t.toLowerCase()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_signTypedData:function(e,t,n){throw Error("Please, use a chrome based browser to use 721 Typed signatures")}}}if(o&&"Lattice"===o.type)return{signMessage:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,s,i,l,u,d,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.commKey,r=o.deviceId,c=Object(m.c)(n),e.next=4,Object(m.a)(c,r);case 4:if(s=e.sent,i=s.isPaired,!(l=s.errConnect)){e.next=9;break}throw new Error(l.message||l);case 9:if(i){e.next=12;break}throw c.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 12:return e.next=14,Object(m.e)(c,t);case 14:if(u=e.sent,d=u.signedMsg,!(f=u.errSignMessage)){e.next=19;break}throw new Error(f);case 19:return e.abrupt("return",d);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signTransaction:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(c.a)(a.a.mark((function e(t){var r,c,s,i,l,u,d,f,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.commKey,c=o.deviceId,s=Object(m.c)(r),e.next=4,Object(m.a)(s,c);case 4:if(i=e.sent,l=i.isPaired,!(u=i.errConnect)){e.next=9;break}throw new Error(u.message||u);case 9:if(l){e.next=12;break}throw s.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 12:return e.next=14,Object(m.g)(s,t,n);case 14:if(d=e.sent,f=d.serializedSigned,!(b=d.errSignTxn)){e.next=19;break}throw new Error(b);case 19:return e.abrupt("return",f);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendTransaction:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(c.a)(a.a.mark((function e(t){var r,c,s,i,l,d,f,b,h,p,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=v.a.find((function(e){return e.chainId===t.chainId}))){e.next=3;break}throw Error("no network found for chainId : "+t.chainId);case 3:return e.next=5,Object(g.a)(r.id);case 5:if(c=e.sent){e.next=8;break}throw Error("no provider found for network : "+r.id);case 8:return e.t0=u.ethers.utils,e.next=11,c.getTransactionCount(t.from);case 11:return e.t1=e.sent,t.nonce=e.t0.hexlify.call(e.t0,e.t1),s=o.commKey,i=o.deviceId,l=Object(m.c)(s),e.next=17,Object(m.a)(l,i);case 17:if(d=e.sent,f=d.isPaired,!(b=d.errConnect)){e.next=22;break}throw new Error(b.message||b);case 22:if(f){e.next=25;break}throw l.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 25:return e.next=27,Object(m.g)(l,t,n);case 27:if(h=e.sent,p=h.serializedSigned,!(j=h.errSignTxn)){e.next=32;break}throw new Error(j);case 32:return e.abrupt("return",c.sendTransaction(p));case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,s,i,l,u,d,f,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,r=o.commKey,c=o.deviceId,s=Object(m.c)(r),e.next=5,Object(m.a)(s,c);case 5:if(i=e.sent,l=i.isPaired,!(u=i.errConnect)){e.next=10;break}throw new Error(u.message||u);case 10:if(l){e.next=13;break}throw s.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 13:return e.next=15,Object(m.b)(s);case 15:if(d=e.sent,f=d.res,!(b=d.errGetAddresses)){e.next=20;break}throw new Error("Lattice: ".concat(b),{error:!0});case 20:return n=f,e.abrupt("return",n.map((function(e){return e.toLowerCase()})).includes(t.toLowerCase()));case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_signTypedData:function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var c,s,i,l,u,d,f,b,h,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=j._TypedDataEncoder.getPayload(t,n,r),s=o.commKey,i=o.deviceId,l=Object(m.c)(s),e.next=5,Object(m.a)(l,i);case 5:if(u=e.sent,d=u.isPaired,!(f=u.errConnect)){e.next=10;break}throw new Error(f.message||f);case 10:if(d){e.next=13;break}throw l.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 13:return e.next=15,Object(m.f)(l,c);case 15:if(b=e.sent,h=b.signedMsg,!(p=b.errSignMessage)){e.next=20;break}throw new Error(p);case 20:return e.abrupt("return",h);case 21:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[t,n,r]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()};if(r.address){if(!window.ethereum)throw new Error("No web3 support detected in your browser: if you created this account through MetaMask, please install it.");var x=new u.ethers.providers.Web3Provider(window.ethereum,"any"),y=x.getSigner(r.address);return y.isConnected=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.listAccounts();case 2:if(r=e.sent,c=!0,!r.length){e.next=14;break}if(t&&(c=!!r.find((function(e){return e.toLowerCase()===t.toLowerCase()}))),!n){e.next=12;break}return e.next=9,x.getNetwork();case 9:s=e.sent,i=s.chainId,c=c&&i===n;case 12:e.next=15;break;case 14:c=!1;case 15:return e.abrupt("return",c);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y}throw r.one?new Error("getWallet not applicable for QuickAccounts: use primaryKeyBackup with the passphrase and /second-sig"):new Error("unknown signer type")}function w(e,t){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.apply(this,n).catch((function(e){throw new Error("Lattice: ".concat(e.message))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},536:function(e,t,n){},567:function(e,t,n){var r=n(533),a=n(568),c=n(569),s=n(570),i=n(571),o=n(572),l=n(573),u=n(574);e.exports=r(r(r(r(r(r({},a),c),o),l),u),{},{MerkleTree:s,splitSig:i})},568:function(e,t,n){(function(t){var r=n(544),a=n(96).keccak256,c=n(510);function s(e){return this.leader=c.Address(e.leader),this.follower=c.Address(e.follower),this.guardian=c.Address(e.guardian),this.tokenAddr=c.Address(e.tokenAddr),this.nonce=c.Bytes32(e.nonce),Object.freeze(this),this}s.prototype.hash=function(){return t.from(a.arrayBuffer(r.rawEncode(["address","address","address","address","bytes32"],[this.leader,this.follower,this.guardian,this.tokenAddr,this.nonce])))},s.prototype.hashHex=function(){return"0x".concat(this.hash().toString("hex"))},s.prototype.toSolidityTuple=function(){return[this.leader,this.follower,this.guardian,this.tokenAddr,this.nonce]},s.prototype.hashToSign=function(e,t){return s.getSignableStateRoot(e,this.hashHex(),t)},s.prototype.hashToSignHex=function(e,t){return"0x".concat(this.hashToSign(e,t).toString("hex"))},s.prototype.getResumeSignableMessage=function(e){return t.from(a.arrayBuffer(r.solidityPack(["string","bytes32","uint256"],["resume",this.hashHex(),e])))},s.prototype.getResumeSignableMessageHex=function(e){return"0x".concat(this.getResumeSignableMessage(e).toString("hex"))},s.getSignableStateRoot=function(e,n,c){return t.from(a.arrayBuffer(r.rawEncode(["address","bytes32","bytes32"],[e,n,c])))},s.getBalanceLeaf=function(e,n){return t.from(a.arrayBuffer(r.rawEncode(["address","uint256"],[e,n])))},s.getSpenderBalanceLeaf=function(e,n){return t.from(a.arrayBuffer(r.rawEncode(["address","string","uint256"],[e,"spender",n])))},e.exports={Channel:s,ChannelState:{Challenged:"115792089237316195423570985008687907853269984665640564039457584007913129639935",Active:"0"}}}).call(this,n(29).Buffer)},569:function(e,t,n){var r=n(510);function a(e){return this.channel=e.channel,this.balanceTreeAmount=r.Uint256(e.balanceTreeAmount),this.stateRoot=r.Bytes32(e.stateRoot),this.sigLeader=r.Bytes32Array(e.sigLeader,3),this.sigFollower=r.Bytes32Array(e.sigFollower,3),this.proof=r.Bytes32Array(e.proof,-1),Object.freeze(this),this}a.prototype.toSolidityTuple=function(){return[this.channel.toSolidityTuple(),"0x".concat(this.balanceTreeAmount.toString(16)),this.stateRoot,this.sigLeader,this.sigFollower,this.proof]},e.exports={Withdraw:a}},570:function(e,t,n){var r=n(86),a=n(133),c=n(29).Buffer,s=n(96).keccak256;function i(e,t){if(!t)return e;if(!e)return t;var n=c.concat([e,t].sort(c.compare));return c.from(s.arrayBuffer(n))}function o(e){if(0===e.length)return[[c.from("")]];var t=[];for(t.push(e);t[t.length-1].length>1;)t.push(l(t[t.length-1]));return t}function l(e){return e.reduce((function(e,t,n,r){return n%2===0&&e.push(i(t,r[n+1])),e}),[])}var u=function(){"use strict";function e(t){if(r(this,e),!t.every((function(e){return 32===e.length&&c.isBuffer(e)})))throw new Error("elements must be 32 byte buffers");var n,a={elements:(n=t,n.filter((function(e,t){return n.findIndex((function(t){return t.equals(e)}))===t})))};Object.assign(this,a),this.elements.sort(c.compare);var s={layers:o(this.elements)};Object.assign(this,s)}return a(e,[{key:"getRoot",value:function(){if(!this.root){var e={root:this.layers[this.layers.length-1][0]};Object.assign(this,e)}return this.root}},{key:"verify",value:function(e,t){return this.getRoot().equals(e.reduce((function(e,t){return i(e,t)}),t))}},{key:"proof",value:function(e){var t=this.elements.findIndex((function(t){return t.equals(e)}));if(-1===t)throw new Error("element not found in merkle tree");return this.layers.reduce((function(e,n){var r=function(e,t){var n=e%2?e-1:e+1;return n<t.length?t[n]:null}(t,n);return r&&e.push(r),t=Math.floor(t/2),e}),[])}}]),e}();e.exports=u},571:function(e,t){e.exports=function(e){var t=e.startsWith("0x")?e.slice(2):e,n="0x".concat(t.substring(0,64)),r="0x".concat(t.substring(64,128)),a=parseInt(t.substring(128,130),16);return a<27&&(a+=27),["0x02".concat(a.toString(16),"000000000000000000000000000000000000000000000000000000000000"),n,r]}},572:function(e,t,n){(function(t){var r=n(544),a=n(96).keccak256,c=n(510);function s(e){return this.owner=c.Address(e.owner),this.shares=c.Uint256(e.shares),this.unlocksAt=c.Uint256(e.unlocksAt),Object.freeze(this),this}s.prototype.hash=function(){var e=r.rawEncode(["address","uint256","uint256"],[this.owner,this.shares,this.unlocksAt]);return t.from(a.arrayBuffer(e))},s.prototype.hashHex=function(){return"0x".concat(this.hash().toString("hex"))},e.exports={UnbondCommitment:s}}).call(this,n(29).Buffer)},573:function(e,t,n){var r=n(57).utils,a=r.keccak256,c=r.defaultAbiCoder,s=r.toUtf8Bytes,i=r.solidityPack,o=a(s("Permit(address owner,address spender,uint256 value,uint256 nonce,uint256 deadline)"));function l(e,t,n){return a(c.encode(["bytes32","bytes32","bytes32","uint256","address"],[a(s("EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)")),a(s(e)),a(s("1")),n,t]))}e.exports={getDomainSeparator:l,getApprovalDigest:function(e,t,n,r){var s=l(e.name,e.address,e.chainId);return a(i(["bytes1","bytes1","bytes32","bytes32"],["0x19","0x01",s,a(c.encode(["bytes32","address","address","uint256","uint256","uint256"],[o,t.owner,t.spender,t.value,n,r]))]))}}},575:function(e,t,n){var r;!function(a){"use strict";var c,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,l="[BigNumber Error] ",u=l+"Number primitive has more than 15 significant digits: ",d=1e14,f=14,b=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7,m=1e9;function j(e){var t=0|e;return e>0||e===t?t:t-1}function g(e){for(var t,n,r=1,a=e.length,c=e[0]+"";r<a;){for(t=e[r++]+"",n=f-t.length;n--;t="0"+t);c+=t}for(a=c.length;48===c.charCodeAt(--a););return c.slice(0,a+1||1)}function v(e,t){var n,r,a=e.c,c=t.c,s=e.s,i=t.s,o=e.e,l=t.e;if(!s||!i)return null;if(n=a&&!a[0],r=c&&!c[0],n||r)return n?r?0:-i:s;if(s!=i)return s;if(n=s<0,r=o==l,!a||!c)return r?0:!a^n?1:-1;if(!r)return o>l^n?1:-1;for(i=(o=a.length)<(l=c.length)?o:l,s=0;s<i;s++)if(a[s]!=c[s])return a[s]>c[s]^n?1:-1;return o==l?0:o>l^n?1:-1}function O(e,t,n,r){if(e<t||e>n||e!==(e<0?i(e):o(e)))throw Error(l+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+e)}function x(e){return"[object Array]"==Object.prototype.toString.call(e)}function y(e){var t=e.c.length-1;return j(e.e/f)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function k(e,t,n){var r,a;if(t<0){for(a=n+".";++t;a+=n);e=a+e}else if(++t>(r=e.length)){for(a=n,t-=r;--t;a+=n);e+=a}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}c=function e(t){var n,r,a,c=L.prototype={constructor:L,toString:null,valueOf:null},_=new L(1),T=20,N=4,C=-7,P=21,S=-1e7,A=1e7,E=!1,M=1,B=0,I={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"\xa0",fractionGroupSize:0},D="0123456789abcdefghijklmnopqrstuvwxyz";function L(e,t){var n,c,i,l,d,h,p,m,j=this;if(!(j instanceof L))return new L(e,t);if(null==t){if(e instanceof L)return j.s=e.s,j.e=e.e,void(j.c=(e=e.c)?e.slice():e);if((h="number"==typeof e)&&0*e==0){if(j.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,d=e;d>=10;d/=10,l++);return j.e=l,void(j.c=[e])}m=e+""}else{if(!s.test(m=e+""))return a(j,m,h);j.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(l=m.indexOf("."))>-1&&(m=m.replace(".","")),(d=m.search(/e/i))>0?(l<0&&(l=d),l+=+m.slice(d+1),m=m.substring(0,d)):l<0&&(l=m.length)}else{if(O(t,2,D.length,"Base"),m=e+"",10==t)return H(j=new L(e instanceof L?e:m),T+j.e+1,N);if(h="number"==typeof e){if(0*e!=0)return a(j,m,h,t);if(j.s=1/e<0?(m=m.slice(1),-1):1,L.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(u+e);h=!1}else j.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(n=D.slice(0,t),l=d=0,p=m.length;d<p;d++)if(n.indexOf(c=m.charAt(d))<0){if("."==c){if(d>l){l=p;continue}}else if(!i&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){i=!0,d=-1,l=0;continue}return a(j,e+"",h,t)}(l=(m=r(m,t,10,j.s)).indexOf("."))>-1?m=m.replace(".",""):l=m.length}for(d=0;48===m.charCodeAt(d);d++);for(p=m.length;48===m.charCodeAt(--p););if(m=m.slice(d,++p)){if(p-=d,h&&L.DEBUG&&p>15&&(e>b||e!==o(e)))throw Error(u+j.s*e);if((l=l-d-1)>A)j.c=j.e=null;else if(l<S)j.c=[j.e=0];else{if(j.e=l,j.c=[],d=(l+1)%f,l<0&&(d+=f),d<p){for(d&&j.c.push(+m.slice(0,d)),p-=f;d<p;)j.c.push(+m.slice(d,d+=f));m=m.slice(d),d=f-m.length}else d-=p;for(;d--;m+="0");j.c.push(+m)}}else j.c=[j.e=0]}function R(e,t,n,r){var a,c,s,i,o;if(null==n?n=N:O(n,0,8),!e.c)return e.toString();if(a=e.c[0],s=e.e,null==t)o=g(e.c),o=1==r||2==r&&s<=C?w(o,s):k(o,s,"0");else if(c=(e=H(new L(e),t,n)).e,i=(o=g(e.c)).length,1==r||2==r&&(t<=c||c<=C)){for(;i<t;o+="0",i++);o=w(o,c)}else if(t-=s,o=k(o,c,"0"),c+1>i){if(--t>0)for(o+=".";t--;o+="0");}else if((t+=c-i)>0)for(c+1==i&&(o+=".");t--;o+="0");return e.s<0&&a?"-"+o:o}function F(e,t){var n,r,a=0;for(x(e[0])&&(e=e[0]),n=new L(e[0]);++a<e.length;){if(!(r=new L(e[a])).s){n=r;break}t.call(n,r)&&(n=r)}return n}function U(e,t,n){for(var r=1,a=t.length;!t[--a];t.pop());for(a=t[0];a>=10;a/=10,r++);return(n=r+n*f-1)>A?e.c=e.e=null:n<S?e.c=[e.e=0]:(e.e=n,e.c=t),e}function H(e,t,n,r){var a,c,s,l,u,b,p,m=e.c,j=h;if(m){e:{for(a=1,l=m[0];l>=10;l/=10,a++);if((c=t-a)<0)c+=f,s=t,p=(u=m[b=0])/j[a-s-1]%10|0;else if((b=i((c+1)/f))>=m.length){if(!r)break e;for(;m.length<=b;m.push(0));u=p=0,a=1,s=(c%=f)-f+1}else{for(u=l=m[b],a=1;l>=10;l/=10,a++);p=(s=(c%=f)-f+a)<0?0:u/j[a-s-1]%10|0}if(r=r||t<0||null!=m[b+1]||(s<0?u:u%j[a-s-1]),r=n<4?(p||r)&&(0==n||n==(e.s<0?3:2)):p>5||5==p&&(4==n||r||6==n&&(c>0?s>0?u/j[a-s]:0:m[b-1])%10&1||n==(e.s<0?8:7)),t<1||!m[0])return m.length=0,r?(t-=e.e+1,m[0]=j[(f-t%f)%f],e.e=-t||0):m[0]=e.e=0,e;if(0==c?(m.length=b,l=1,b--):(m.length=b+1,l=j[f-c],m[b]=s>0?o(u/j[a-s]%j[s])*l:0),r)for(;;){if(0==b){for(c=1,s=m[0];s>=10;s/=10,c++);for(s=m[0]+=l,l=1;s>=10;s/=10,l++);c!=l&&(e.e++,m[0]==d&&(m[0]=1));break}if(m[b]+=l,m[b]!=d)break;m[b--]=0,l=1}for(c=m.length;0===m[--c];m.pop());}e.e>A?e.c=e.e=null:e.e<S&&(e.c=[e.e=0])}return e}return L.clone=e,L.ROUND_UP=0,L.ROUND_DOWN=1,L.ROUND_CEIL=2,L.ROUND_FLOOR=3,L.ROUND_HALF_UP=4,L.ROUND_HALF_DOWN=5,L.ROUND_HALF_EVEN=6,L.ROUND_HALF_CEIL=7,L.ROUND_HALF_FLOOR=8,L.EUCLID=9,L.config=L.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(l+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(O(n=e[t],0,m,t),T=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(O(n=e[t],0,8,t),N=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&(x(n=e[t])?(O(n[0],-m,0,t),O(n[1],0,m,t),C=n[0],P=n[1]):(O(n,-m,m,t),C=-(P=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if(x(n=e[t]))O(n[0],-m,-1,t),O(n[1],1,m,t),S=n[0],A=n[1];else{if(O(n,-m,m,t),!n)throw Error(l+t+" cannot be zero: "+n);S=-(A=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(l+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw E=!n,Error(l+"crypto unavailable");E=n}else E=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(O(n=e[t],0,9,t),M=n),e.hasOwnProperty(t="POW_PRECISION")&&(O(n=e[t],0,m,t),B=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(l+t+" not an object: "+n);I=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.$|\.|(.).*\1/.test(n))throw Error(l+t+" invalid: "+n);D=n}}return{DECIMAL_PLACES:T,ROUNDING_MODE:N,EXPONENTIAL_AT:[C,P],RANGE:[S,A],CRYPTO:E,MODULO_MODE:M,POW_PRECISION:B,FORMAT:I,ALPHABET:D}},L.isBigNumber=function(e){return e instanceof L||e&&!0===e._isBigNumber||!1},L.maximum=L.max=function(){return F(arguments,c.lt)},L.minimum=L.min=function(){return F(arguments,c.gt)},L.random=function(){var e=9007199254740992,t=Math.random()*e&2097151?function(){return o(Math.random()*e)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var n,r,a,c,s,u=0,d=[],b=new L(_);if(null==e?e=T:O(e,0,m),c=i(e/f),E)if(crypto.getRandomValues){for(n=crypto.getRandomValues(new Uint32Array(c*=2));u<c;)(s=131072*n[u]+(n[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),n[u]=r[0],n[u+1]=r[1]):(d.push(s%1e14),u+=2);u=c/2}else{if(!crypto.randomBytes)throw E=!1,Error(l+"crypto unavailable");for(n=crypto.randomBytes(c*=7);u<c;)(s=281474976710656*(31&n[u])+1099511627776*n[u+1]+4294967296*n[u+2]+16777216*n[u+3]+(n[u+4]<<16)+(n[u+5]<<8)+n[u+6])>=9e15?crypto.randomBytes(7).copy(n,u):(d.push(s%1e14),u+=7);u=c/7}if(!E)for(;u<c;)(s=t())<9e15&&(d[u++]=s%1e14);for(c=d[--u],e%=f,c&&e&&(s=h[f-e],d[u]=o(c/s)*s);0===d[u];d.pop(),u--);if(u<0)d=[a=0];else{for(a=-1;0===d[0];d.splice(0,1),a-=f);for(u=1,s=d[0];s>=10;s/=10,u++);u<f&&(a-=f-u)}return b.e=a,b.c=d,b}}(),r=function(){var e="0123456789";function t(e,t,n,r){for(var a,c,s=[0],i=0,o=e.length;i<o;){for(c=s.length;c--;s[c]*=t);for(s[0]+=r.indexOf(e.charAt(i++)),a=0;a<s.length;a++)s[a]>n-1&&(null==s[a+1]&&(s[a+1]=0),s[a+1]+=s[a]/n|0,s[a]%=n)}return s.reverse()}return function(r,a,c,s,i){var o,l,u,d,f,b,h,p,m=r.indexOf("."),j=T,v=N;for(m>=0&&(d=B,B=0,r=r.replace(".",""),b=(p=new L(a)).pow(r.length-m),B=d,p.c=t(k(g(b.c),b.e,"0"),10,c,e),p.e=p.c.length),u=d=(h=t(r,a,c,i?(o=D,e):(o=e,D))).length;0==h[--d];h.pop());if(!h[0])return o.charAt(0);if(m<0?--u:(b.c=h,b.e=u,b.s=s,h=(b=n(b,p,j,v,c)).c,f=b.r,u=b.e),m=h[l=u+j+1],d=c/2,f=f||l<0||null!=h[l+1],f=v<4?(null!=m||f)&&(0==v||v==(b.s<0?3:2)):m>d||m==d&&(4==v||f||6==v&&1&h[l-1]||v==(b.s<0?8:7)),l<1||!h[0])r=f?k(o.charAt(1),-j,o.charAt(0)):o.charAt(0);else{if(h.length=l,f)for(--c;++h[--l]>c;)h[l]=0,l||(++u,h=[1].concat(h));for(d=h.length;!h[--d];);for(m=0,r="";m<=d;r+=o.charAt(h[m++]));r=k(r,u,o.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,a,c,s,i=0,o=e.length,l=t%p,u=t/p|0;for(e=e.slice();o--;)i=((a=l*(c=e[o]%p)+(r=u*c+(s=e[o]/p|0)*l)%p*p+i)/n|0)+(r/p|0)+u*s,e[o]=a%n;return i&&(e=[i].concat(e)),e}function t(e,t,n,r){var a,c;if(n!=r)c=n>r?1:-1;else for(a=c=0;a<n;a++)if(e[a]!=t[a]){c=e[a]>t[a]?1:-1;break}return c}function n(e,t,n,r){for(var a=0;n--;)e[n]-=a,a=e[n]<t[n]?1:0,e[n]=a*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,a,c,s,i){var l,u,b,h,p,m,g,v,O,x,y,w,k,_,T,N,C,P=r.s==a.s?1:-1,S=r.c,A=a.c;if(!S||!S[0]||!A||!A[0])return new L(r.s&&a.s&&(S?!A||S[0]!=A[0]:A)?S&&0==S[0]||!A?0*P:P/0:NaN);for(O=(v=new L(P)).c=[],P=c+(u=r.e-a.e)+1,i||(i=d,u=j(r.e/f)-j(a.e/f),P=P/f|0),b=0;A[b]==(S[b]||0);b++);if(A[b]>(S[b]||0)&&u--,P<0)O.push(1),h=!0;else{for(_=S.length,N=A.length,b=0,P+=2,(p=o(i/(A[0]+1)))>1&&(A=e(A,p,i),S=e(S,p,i),N=A.length,_=S.length),k=N,y=(x=S.slice(0,N)).length;y<N;x[y++]=0);C=A.slice(),C=[0].concat(C),T=A[0],A[1]>=i/2&&T++;do{if(p=0,(l=t(A,x,N,y))<0){if(w=x[0],N!=y&&(w=w*i+(x[1]||0)),(p=o(w/T))>1)for(p>=i&&(p=i-1),g=(m=e(A,p,i)).length,y=x.length;1==t(m,x,g,y);)p--,n(m,N<g?C:A,g,i),g=m.length,l=1;else 0==p&&(l=p=1),g=(m=A.slice()).length;if(g<y&&(m=[0].concat(m)),n(x,m,y,i),y=x.length,-1==l)for(;t(A,x,N,y)<1;)p++,n(x,N<y?C:A,y,i),y=x.length}else 0===l&&(p++,x=[0]);O[b++]=p,x[0]?x[y++]=S[k]||0:(x=[S[k]],y=1)}while((k++<_||null!=x[0])&&P--);h=null!=x[0],O[0]||O.splice(0,1)}if(i==d){for(b=1,P=O[0];P>=10;P/=10,b++);H(v,c+(v.e=b+u*f-1)+1,s,h)}else v.e=u,v.r=+h;return v}}(),a=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,n=/^\.([^.]+)$/,r=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(c,s,i,o){var u,d=i?s:s.replace(a,"");if(r.test(d))c.s=isNaN(d)?null:d<0?-1:1,c.c=c.e=null;else{if(!i&&(d=d.replace(e,(function(e,t,n){return u="x"==(n=n.toLowerCase())?16:"b"==n?2:8,o&&o!=u?e:t})),o&&(u=o,d=d.replace(t,"$1").replace(n,"0.$1")),s!=d))return new L(d,u);if(L.DEBUG)throw Error(l+"Not a"+(o?" base "+o:"")+" number: "+s);c.c=c.e=c.s=null}}}(),c.absoluteValue=c.abs=function(){var e=new L(this);return e.s<0&&(e.s=1),e},c.comparedTo=function(e,t){return v(this,new L(e,t))},c.decimalPlaces=c.dp=function(e,t){var n,r,a,c=this;if(null!=e)return O(e,0,m),null==t?t=N:O(t,0,8),H(new L(c),e+c.e+1,t);if(!(n=c.c))return null;if(r=((a=n.length-1)-j(this.e/f))*f,a=n[a])for(;a%10==0;a/=10,r--);return r<0&&(r=0),r},c.dividedBy=c.div=function(e,t){return n(this,new L(e,t),T,N)},c.dividedToIntegerBy=c.idiv=function(e,t){return n(this,new L(e,t),0,1)},c.exponentiatedBy=c.pow=function(e,t){var n,r,a,c,s,u,d,b=this;if((e=new L(e)).c&&!e.isInteger())throw Error(l+"Exponent not an integer: "+e);if(null!=t&&(t=new L(t)),c=e.e>14,!b.c||!b.c[0]||1==b.c[0]&&!b.e&&1==b.c.length||!e.c||!e.c[0])return d=new L(Math.pow(+b.valueOf(),c?2-y(e):+e)),t?d.mod(t):d;if(s=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new L(NaN);(r=!s&&b.isInteger()&&t.isInteger())&&(b=b.mod(t))}else{if(e.e>9&&(b.e>0||b.e<-1||(0==b.e?b.c[0]>1||c&&b.c[1]>=24e7:b.c[0]<8e13||c&&b.c[0]<=9999975e7)))return a=b.s<0&&y(e)?-0:0,b.e>-1&&(a=1/a),new L(s?1/a:a);B&&(a=i(B/f+2))}for(c?(n=new L(.5),u=y(e)):u=e%2,s&&(e.s=1),d=new L(_);;){if(u){if(!(d=d.times(b)).c)break;a?d.c.length>a&&(d.c.length=a):r&&(d=d.mod(t))}if(c){if(H(e=e.times(n),e.e+1,1),!e.c[0])break;c=e.e>14,u=y(e)}else{if(!(e=o(e/2)))break;u=e%2}b=b.times(b),a?b.c&&b.c.length>a&&(b.c.length=a):r&&(b=b.mod(t))}return r?d:(s&&(d=_.div(d)),t?d.mod(t):a?H(d,B,N,undefined):d)},c.integerValue=function(e){var t=new L(this);return null==e?e=N:O(e,0,8),H(t,t.e+1,e)},c.isEqualTo=c.eq=function(e,t){return 0===v(this,new L(e,t))},c.isFinite=function(){return!!this.c},c.isGreaterThan=c.gt=function(e,t){return v(this,new L(e,t))>0},c.isGreaterThanOrEqualTo=c.gte=function(e,t){return 1===(t=v(this,new L(e,t)))||0===t},c.isInteger=function(){return!!this.c&&j(this.e/f)>this.c.length-2},c.isLessThan=c.lt=function(e,t){return v(this,new L(e,t))<0},c.isLessThanOrEqualTo=c.lte=function(e,t){return-1===(t=v(this,new L(e,t)))||0===t},c.isNaN=function(){return!this.s},c.isNegative=function(){return this.s<0},c.isPositive=function(){return this.s>0},c.isZero=function(){return!!this.c&&0==this.c[0]},c.minus=function(e,t){var n,r,a,c,s=this,i=s.s;if(t=(e=new L(e,t)).s,!i||!t)return new L(NaN);if(i!=t)return e.s=-t,s.plus(e);var o=s.e/f,l=e.e/f,u=s.c,b=e.c;if(!o||!l){if(!u||!b)return u?(e.s=-t,e):new L(b?s:NaN);if(!u[0]||!b[0])return b[0]?(e.s=-t,e):new L(u[0]?s:3==N?-0:0)}if(o=j(o),l=j(l),u=u.slice(),i=o-l){for((c=i<0)?(i=-i,a=u):(l=o,a=b),a.reverse(),t=i;t--;a.push(0));a.reverse()}else for(r=(c=(i=u.length)<(t=b.length))?i:t,i=t=0;t<r;t++)if(u[t]!=b[t]){c=u[t]<b[t];break}if(c&&(a=u,u=b,b=a,e.s=-e.s),(t=(r=b.length)-(n=u.length))>0)for(;t--;u[n++]=0);for(t=d-1;r>i;){if(u[--r]<b[r]){for(n=r;n&&!u[--n];u[n]=t);--u[n],u[r]+=d}u[r]-=b[r]}for(;0==u[0];u.splice(0,1),--l);return u[0]?U(e,u,l):(e.s=3==N?-1:1,e.c=[e.e=0],e)},c.modulo=c.mod=function(e,t){var r,a,c=this;return e=new L(e,t),!c.c||!e.s||e.c&&!e.c[0]?new L(NaN):!e.c||c.c&&!c.c[0]?new L(c):(9==M?(a=e.s,e.s=1,r=n(c,e,0,3),e.s=a,r.s*=a):r=n(c,e,0,M),(e=c.minus(r.times(e))).c[0]||1!=M||(e.s=c.s),e)},c.multipliedBy=c.times=function(e,t){var n,r,a,c,s,i,o,l,u,b,h,m,g,v,O,x=this,y=x.c,w=(e=new L(e,t)).c;if(!y||!w||!y[0]||!w[0])return!x.s||!e.s||y&&!y[0]&&!w||w&&!w[0]&&!y?e.c=e.e=e.s=null:(e.s*=x.s,y&&w?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=j(x.e/f)+j(e.e/f),e.s*=x.s,(o=y.length)<(b=w.length)&&(g=y,y=w,w=g,a=o,o=b,b=a),a=o+b,g=[];a--;g.push(0));for(v=d,O=p,a=b;--a>=0;){for(n=0,h=w[a]%O,m=w[a]/O|0,c=a+(s=o);c>a;)n=((l=h*(l=y[--s]%O)+(i=m*l+(u=y[s]/O|0)*h)%O*O+g[c]+n)/v|0)+(i/O|0)+m*u,g[c--]=l%v;g[c]=n}return n?++r:g.splice(0,1),U(e,g,r)},c.negated=function(){var e=new L(this);return e.s=-e.s||null,e},c.plus=function(e,t){var n,r=this,a=r.s;if(t=(e=new L(e,t)).s,!a||!t)return new L(NaN);if(a!=t)return e.s=-t,r.minus(e);var c=r.e/f,s=e.e/f,i=r.c,o=e.c;if(!c||!s){if(!i||!o)return new L(a/0);if(!i[0]||!o[0])return o[0]?e:new L(i[0]?r:0*a)}if(c=j(c),s=j(s),i=i.slice(),a=c-s){for(a>0?(s=c,n=o):(a=-a,n=i),n.reverse();a--;n.push(0));n.reverse()}for((a=i.length)-(t=o.length)<0&&(n=o,o=i,i=n,t=a),a=0;t;)a=(i[--t]=i[t]+o[t]+a)/d|0,i[t]=d===i[t]?0:i[t]%d;return a&&(i=[a].concat(i),++s),U(e,i,s)},c.precision=c.sd=function(e,t){var n,r,a,c=this;if(null!=e&&e!==!!e)return O(e,1,m),null==t?t=N:O(t,0,8),H(new L(c),e,t);if(!(n=c.c))return null;if(r=(a=n.length-1)*f+1,a=n[a]){for(;a%10==0;a/=10,r--);for(a=n[0];a>=10;a/=10,r++);}return e&&c.e+1>r&&(r=c.e+1),r},c.shiftedBy=function(e){return O(e,-9007199254740991,b),this.times("1e"+e)},c.squareRoot=c.sqrt=function(){var e,t,r,a,c,s=this,i=s.c,o=s.s,l=s.e,u=T+4,d=new L("0.5");if(1!==o||!i||!i[0])return new L(!o||o<0&&(!i||i[0])?NaN:i?s:1/0);if(0==(o=Math.sqrt(+s))||o==1/0?(((t=g(i)).length+l)%2==0&&(t+="0"),o=Math.sqrt(t),l=j((l+1)/2)-(l<0||l%2),r=new L(t=o==1/0?"1e"+l:(t=o.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new L(o+""),r.c[0])for((o=(l=r.e)+u)<3&&(o=0);;)if(c=r,r=d.times(c.plus(n(s,c,u,1))),g(c.c).slice(0,o)===(t=g(r.c)).slice(0,o)){if(r.e<l&&--o,"9999"!=(t=t.slice(o-3,o+1))&&(a||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(H(r,r.e+T+2,1),e=!r.times(r).eq(s));break}if(!a&&(H(c,c.e+T+2,0),c.times(c).eq(s))){r=c;break}u+=4,o+=4,a=1}return H(r,r.e+T+1,N,e)},c.toExponential=function(e,t){return null!=e&&(O(e,0,m),e++),R(this,e,t,1)},c.toFixed=function(e,t){return null!=e&&(O(e,0,m),e=e+this.e+1),R(this,e,t)},c.toFormat=function(e,t){var n=this.toFixed(e,t);if(this.c){var r,a=n.split("."),c=+I.groupSize,s=+I.secondaryGroupSize,i=I.groupSeparator,o=a[0],l=a[1],u=this.s<0,d=u?o.slice(1):o,f=d.length;if(s&&(r=c,c=s,s=r,f-=r),c>0&&f>0){for(r=f%c||c,o=d.substr(0,r);r<f;r+=c)o+=i+d.substr(r,c);s>0&&(o+=i+d.slice(r)),u&&(o="-"+o)}n=l?o+I.decimalSeparator+((s=+I.fractionGroupSize)?l.replace(new RegExp("\\d{"+s+"}\\B","g"),"$&"+I.fractionGroupSeparator):l):o}return n},c.toFraction=function(e){var t,r,a,c,s,i,o,u,d,b,p,m,j=this,v=j.c;if(null!=e&&(!(u=new L(e)).isInteger()&&(u.c||1!==u.s)||u.lt(_)))throw Error(l+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+e);if(!v)return j.toString();for(r=new L(_),b=a=new L(_),c=d=new L(_),m=g(v),i=r.e=m.length-j.e-1,r.c[0]=h[(o=i%f)<0?f+o:o],e=!e||u.comparedTo(r)>0?i>0?r:b:u,o=A,A=1/0,u=new L(m),d.c[0]=0;p=n(u,r,0,1),1!=(s=a.plus(p.times(c))).comparedTo(e);)a=c,c=s,b=d.plus(p.times(s=b)),d=s,r=u.minus(p.times(s=r)),u=s;return s=n(e.minus(a),c,0,1),d=d.plus(s.times(b)),a=a.plus(s.times(c)),d.s=b.s=j.s,t=n(b,c,i*=2,N).minus(j).abs().comparedTo(n(d,a,i,N).minus(j).abs())<1?[b.toString(),c.toString()]:[d.toString(),a.toString()],A=o,t},c.toNumber=function(){return+this},c.toPrecision=function(e,t){return null!=e&&O(e,1,m),R(this,e,t,2)},c.toString=function(e){var t,n=this,a=n.s,c=n.e;return null===c?a?(t="Infinity",a<0&&(t="-"+t)):t="NaN":(t=g(n.c),null==e?t=c<=C||c>=P?w(t,c):k(t,c,"0"):(O(e,2,D.length,"Base"),t=r(k(t,c,"0"),10,e,a,!0)),a<0&&n.c[0]&&(t="-"+t)),t},c.valueOf=c.toJSON=function(){var e,t=this,n=t.e;return null===n?t.toString():(e=g(t.c),e=n<=C||n>=P?w(e,n):k(e,n,"0"),t.s<0?"-"+e:e)},c._isBigNumber=!0,null!=t&&L.set(t),L}(),c.default=c.BigNumber=c,void 0===(r=function(){return c}.call(t,n,t,e))||(e.exports=r)}()},580:function(e,t){},581:function(e,t){},582:function(e,t){},583:function(e,t){},586:function(e,t){},587:function(e,t){},588:function(e,t){},594:function(e,t){},595:function(e,t){},599:function(e,t){},601:function(e,t){},602:function(e,t){},626:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=["slow","medium","fast","ape"]},660:function(e,t,n){"use strict";var r=n(567),a=n(17),c=n(88),s=new a.Interface(n(218)),i=c.a.quickAccManager;t.a=function(e,t,n,c){var o=new a.AbiCoder,l=c.signer,u=l.timelock,d=l.one,f=l.two,b=Object(a.keccak256)(o.encode(["tuple(uint, address, address)"],[[u,d,f]]));return new r.Bundle({identity:e,network:t,signer:n,txns:[[e,"0x00",s.encodeFunctionData("setAddrPrivilege",[i,b])]],recoveryMode:c})}},739:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(35),c=r(n(2)),s=n(55);n(89),n(188);var i=r(n(61));function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){e.prototype=Object.create(t.prototype),u(e.prototype.constructor=e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}var f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=s.createBrowserHistory(t.props),t}return l(t,e),t.prototype.render=function(){return c.createElement(a.Router,{history:this.history,children:this.props.children})},t}(c.Component),b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=s.createHashHistory(t.props),t}return l(t,e),t.prototype.render=function(){return c.createElement(a.Router,{history:this.history,children:this.props.children})},t}(c.Component),h=function(e,t){return"function"==typeof e?e(t):e},p=function(e,t){return"string"==typeof e?s.createLocation(e,null,null,t):e},m=function(e){return e},j=c.forwardRef;void 0===j&&(j=m);var g=j((function(e,t){var n=e.innerRef,r=e.navigate,a=e.onClick,s=d(e,["innerRef","navigate","onClick"]),i=s.target,l=o({},s,{onClick:function(t){try{a&&a(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||i&&"_self"!==i||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),r())}});return l.ref=m!==j&&t||n,c.createElement("a",l)})),v=j((function(e,t){var n=e.component,r=void 0===n?g:n,l=e.replace,u=e.to,f=e.innerRef,b=d(e,["component","replace","to","innerRef"]);return c.createElement(a.__RouterContext.Consumer,null,(function(e){e||i(!1);var n=e.history,a=p(h(u,e.location),e.location),d=a?n.createHref(a):"",g=o({},b,{href:d,navigate:function(){var t=h(u,e.location),r=s.createPath(e.location)===s.createPath(p(t));(l||r?n.replace:n.push)(t)}});return m!==j?g.ref=t||f:g.innerRef=f,c.createElement(r,g)}))})),O=function(e){return e},x=c.forwardRef;void 0===x&&(x=O);var y=x((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,s=e.activeClassName,l=void 0===s?"active":s,u=e.activeStyle,f=e.className,b=e.exact,m=e.isActive,j=e.location,g=e.sensitive,y=e.strict,w=e.style,k=e.to,_=e.innerRef,T=d(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return c.createElement(a.__RouterContext.Consumer,null,(function(e){e||i(!1);var n=j||e.location,s=p(h(k,n),n),d=s.pathname,N=d&&d.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),C=N?a.matchPath(n.pathname,{path:N,exact:b,sensitive:g,strict:y}):null,P=!!(m?m(C,n):C),S="function"==typeof f?f(P):f,A="function"==typeof w?w(P):w;P&&(S=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(S,l),A=o({},A,u));var E=o({"aria-current":P&&r||null,className:S,style:A,to:s},T);return O!==x?E.ref=t||_:E.innerRef=_,c.createElement(v,E)}))}));Object.defineProperty(t,"MemoryRouter",{enumerable:!0,get:function(){return a.MemoryRouter}}),Object.defineProperty(t,"Prompt",{enumerable:!0,get:function(){return a.Prompt}}),Object.defineProperty(t,"Redirect",{enumerable:!0,get:function(){return a.Redirect}}),Object.defineProperty(t,"Route",{enumerable:!0,get:function(){return a.Route}}),Object.defineProperty(t,"Router",{enumerable:!0,get:function(){return a.Router}}),Object.defineProperty(t,"StaticRouter",{enumerable:!0,get:function(){return a.StaticRouter}}),Object.defineProperty(t,"Switch",{enumerable:!0,get:function(){return a.Switch}}),Object.defineProperty(t,"generatePath",{enumerable:!0,get:function(){return a.generatePath}}),Object.defineProperty(t,"matchPath",{enumerable:!0,get:function(){return a.matchPath}}),Object.defineProperty(t,"useHistory",{enumerable:!0,get:function(){return a.useHistory}}),Object.defineProperty(t,"useLocation",{enumerable:!0,get:function(){return a.useLocation}}),Object.defineProperty(t,"useParams",{enumerable:!0,get:function(){return a.useParams}}),Object.defineProperty(t,"useRouteMatch",{enumerable:!0,get:function(){return a.useRouteMatch}}),Object.defineProperty(t,"withRouter",{enumerable:!0,get:function(){return a.withRouter}}),t.BrowserRouter=f,t.HashRouter=b,t.Link=v,t.NavLink=y},740:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(0);function a(e){return Object(r.a)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{fillRule:"nonzero",d:"M16 13l6.964 4.062-2.973.85 2.125 3.681-1.732 1-2.125-3.68-2.223 2.15L16 13zm-2-7h2v2h5a1 1 0 0 1 1 1v4h-2v-3H10v10h4v2H9a1 1 0 0 1-1-1v-5H6v-2h2V9a1 1 0 0 1 1-1h5V6zM4 14v2H2v-2h2zm0-4v2H2v-2h2zm0-4v2H2V6h2zm0-4v2H2V2h2zm4 0v2H6V2h2zm4 0v2h-2V2h2zm4 0v2h-2V2h2z"}}]}]})(e)}function c(e){return Object(r.a)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6.382 5.968A8.962 8.962 0 0 1 12 4c2.125 0 4.078.736 5.618 1.968l1.453-1.453 1.414 1.414-1.453 1.453a9 9 0 1 1-14.064 0L3.515 5.93l1.414-1.414 1.453 1.453zM12 20a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm1-8h3l-5 6.5V14H8l5-6.505V12zM8 1h8v2H8V1z"}}]}]})(e)}},741:function(e,t,n){},742:function(e,t,n){"use strict";var r=n(3),a=n.n(r),c=n(13),s=n(217),i=n(151),o=n(660),l=n(5);t.a=function(e){var t=e.recoveryLock,n=e.showSendTxns,r=e.selectedAccount,u=e.selectedNetwork,d=t&&"requestedButNotInitiated"!==t.status,f=function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:t=Object(o.a)(r.id,u.id,r.signer.preRecovery,{signer:r.signer,primaryKeyBackup:r.primaryKeyBackup}),n(t,!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=t?t.status:"requestedButNotInitiated",h=function(e){return e>86400?"".concat(Math.ceil(e/86400)," days"):"".concat(Math.ceil(e/1440)," hours")},p=d?"ready"===b?"success":"warning":"warning action";return Object(l.jsxs)("div",{className:"notification-banner notification-hollow ".concat(p),onClick:function(){return f()},children:["ready"===b?Object(l.jsx)(i.b,{}):Object(l.jsx)(s.c,{}),"requestedButNotInitiated"===b?Object(l.jsxs)(l.Fragment,{children:["Password reset requested but not initiated for ",u.name,". Click here to initiate it."]}):"initiationTxnPending"===b?Object(l.jsxs)(l.Fragment,{children:["Initiation transaction is currently pending. Once mined, you will need to wait ",h(t.timelock)," for the reset to be done on ",u.name,"."]}):"waitingTimelock"===b?Object(l.jsxs)(l.Fragment,{children:["Password reset on ",u.name," is currently pending. ",h(t.remaining)," remaining."]}):"ready"===b?Object(l.jsxs)(l.Fragment,{children:["Password reset on ",u.name," is now complete! You can start signing transactions with your new password!"]}):"failed"===b?Object(l.jsx)(l.Fragment,{children:"Something went wrong while resetting your password. Please contact support at help.ambire.com"}):null]})}},765:function(e,t,n){"use strict";var r=n(8),a=(n(536),n(113)),c=n(72),s="0x0000000000000000000000000000000000000000",i=n(59);function o(e){var t,n=e.networkId,r=e.account;return(null===(t=i.a.find((function(e){return e.id===n})))||void 0===t?void 0:t.relayerlessOnly)?Promise.resolve([]):r?Object(c.c)("".concat(a.i,"/balance/").concat(r,"/").concat(n,"?provider=covalent&newBalances=true&available_on_coingecko=true")).then((function(e){var t,i;if(!e.data)return[];if(!(null===(t=e.data)||void 0===t?void 0:t.tokens))return[];var o=(null===(i=e.data)||void 0===i?void 0:i.tokens).map((function(e){return{address:e.address,symbol:e.symbol,decimals:e.decimals}})),l="".concat(a.i,"/balance/").concat(r,"/").concat(n,"?customTokens=").concat(JSON.stringify(o),"&available_on_coingecko=true");return Object(c.c)(l).then((function(e){var t;return(null===(t=e.data)||void 0===t?void 0:t.tokens).map((function(e){return{name:e.symbol,icon:e.tokenImageUrl,address:e.address.toLowerCase(),native:e.address===s,decimals:e.decimals,availableBalance:e.balanceRaw,balanceUSD:e.balanceUSD,rate:e.balanceUSD/e.balanceRaw}}))})).catch((function(e){throw Error("Could not get customToken assets from velcro")}))})).catch((function(e){throw Error("Could not get assets from velcro")})):Promise.resolve([])}n(741);var l=n(38),u=n(87),d=n(2),f=n(3),b=n.n(f),h=n(13),p=n(4),m=n(16),j=n(575),g=n.n(j),v=n(227),O=n(534),x=n(50),y=n(57),w=n(103),k=n(17),_=[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}],T=[{name:"holder",type:"address"},{name:"spender",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"},{name:"allowed",type:"bool"}],N=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],C=[{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],P=[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],S=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"}],A={1:[{address:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",name:"USD Coin",version:"2",domainType:N,permitType:_},{address:"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984",name:"Uniswap",domainType:P,permitType:_},{address:"0xde30da39c46104798bb5aa3fe8b9e0e1f348163f",name:"Gitcoin",domainType:P,permitType:_},{address:"0x6b175474e89094c44da98b954eedeac495271d0f",name:"Dai Stablecoin",version:"1",domainType:N,permitType:T},{address:"0x090185f2135308bad17527004364ebcc2d37e5f6",domainType:C,permitType:_},{address:"0x99d8a9c45b2eca8864373a26d1459e3dff1e17f3",domainType:C,permitType:_},{address:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9",name:"Aave Token",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"AdEx Loyalty",address:"0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c",version:"1",domainType:N,permitType:_},{name:"Aave Token",address:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9",version:"1",domainType:N,permitType:_},{name:"Ambire Wallet Staking Token",address:"0x47cd7e91c3cbaaf266369fe8518345fc4fc12935",version:"1",domainType:N,permitType:_},{name:"ConstitutionDAO",address:"0x7a58c0be72be218b41c608b7fe7c5bb630736c71",version:"1",domainType:N,permitType:_},{name:"Aragon Network Token",address:"0xa117000000f279d81a1d3cc75430faa017fa5a2e",version:"1",domainType:N,permitType:_},{name:"AdEx Staking Token",address:"0xb6456b57f03352be48bf101b46c1752a0813491a",version:"1",domainType:N,permitType:_},{name:"dYdX",address:"0x92d6c1e31e14520e676a687f0a93788b716beff5",version:"1",domainType:N,permitType:_},{name:"Ethereum Name Service",address:"0xc18360217d8f7ab5e7c516566761ea12ce7f9d72",version:"1",domainType:N,permitType:_},{name:"Olympus",address:"0x383518188c0c6d7730d91b2c03a03c837814a899",version:"1",domainType:N,permitType:_},{name:"1INCH Token",address:"0x111111111117dc0aa78b770fa6a738034120c302",version:"1",domainType:N,permitType:_},{name:"IceToken",address:"0xf16e81dce15b08f326220742020379b855b87df9",version:"1",domainType:N,permitType:_},{name:"Fei USD",address:"0x956f47f50a910163d8bf957cf5846d573e7f87ca",version:"1",domainType:N,permitType:_},{name:"LUSD Stablecoin",address:"0x5f98805a4e8be255a32880fdec7f6728c6568ba0",version:"1",domainType:N,permitType:_},{name:"Balancer",address:"0xba100000625a3754423978a60c9317c58a424e3d",version:"1",domainType:N,permitType:_},{name:"Aave interest bearing AAVE",address:"0xffc97d72e13e01096502cb8eb52dee56f74dad7b",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave AMM Market UniBATWETH",address:"0xa1b0edf4460cc4d8bfaa18ed871bff15e5b57eb4",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave AMM Market UniWBTCWETH",address:"0xc58f53a8adff2fb4eb16ed56635772075e2ee123",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave AMM Market UniUSDCWETH",address:"0x391e86e2c002c70dee155eaceb88f7a3c38f5976",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing WETH",address:"0x030ba81f1c18d280636f32af80b9aad02cf0854e",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing DAI",address:"0x028171bca77440897b824ca71d1c56cac55b68a3",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave AMM Market UniWBTCUSDC",address:"0x2365a4890ed8965e564b7e2d27c38ba67fec4c6f",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave AMM Market UniCRVWETH",address:"0x0ea20e7ffb006d4cfe84df2f72d8c7bd89247db0",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave AMM Market UniUNIWETH",address:"0x3d26dcd840fcc8e4b2193ace8a092e4a65832f9f",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing GUSD",address:"0xd37ee7e4f452c6638c96536e68090de8cbcdb583",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave AMM Market UniMKRWETH",address:"0x370adc71f67f581158dc56f539df5f399128ddf9",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing CRV",address:"0x8dae6cb04688c62d939ed9b68d32bc62e49970b1",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave AMM Market USDT",address:"0x17a79792fe6fe5c95dfe95fe3fcee3caf4fe4cb7",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave AMM Market UniSNXWETH",address:"0x38e491a71291cd43e8de63b7253e482622184894",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing YFI",address:"0x5165d24277cd063f5ac44efd447b27025e888f37",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing SNX",address:"0x35f6b052c598d933d69a4eec4d04c73a191fe6c2",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave AMM Market USDC",address:"0xd24946147829deaa935be2ad85a3291dbf109c80",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave AMM Market DAI",address:"0x79be75ffc64dd58e66787e4eae470c8a1fd08ba4",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing USDT",address:"0x3ed3b47dd13ec9a98b44e6204a523e766b225811",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing RAI",address:"0xc9bc48c72154ef3e5425641a3c747242112a46af",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing BAL",address:"0x272f97b7a56a387ae942350bbc7df5700f8a4576",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing BAT",address:"0x05ec93c0365baaeabf7aeffb0972ea7ecdd39cf1",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing USDC",address:"0xbcca60bb61934080951369a648fb03df4f96263c",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave AMM Market BptBALWETH",address:"0xd109b2a304587569c84308c55465cd9ff0317bfb",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing KNC",address:"0x39c6b3e42d6a679d7d776778fe880bc9487c2eda",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing MANA",address:"0xa685a61171bb30d4072b338c80cb7b2c865c873e",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing XSUSHI",address:"0xf256cc7847e919fac9b808cc216cac87ccf2f47a",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing TUSD",address:"0x101cc05f4a51c0319f570d5e146a8c625198e636",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"},{name:"Aave interest bearing ENJ",address:"0xac6df26a590f08dcc95d5a4705ae8abbc88509ef",version:"1",domainType:N,permitType:_,nonceFunction:"_nonces"}],137:[{name:"Governance OHM",address:"0xd8ca34fd379d9ca3c6ee3b3905678320f5b45195",version:"1",domainType:N,permitType:_},{name:"Frax",address:"0x45c32fa6df82ead1e2ef74d17b76547eddfaff89",version:"1",domainType:N,permitType:_},{name:"Aave Matic Market WBTC",address:"0x5c2ed810328349100a66b82b78a1791b101c9d61",version:"1",domainType:N,permitType:_},{name:"Aave Matic Market WETH",address:"0x28424507fefb6f7f8e9d3860f56504e4e5f5f390",version:"1",domainType:N,permitType:_},{name:"Aave Matic Market USDC",address:"0x1a13f4ca1d028320a707d99520abfefca3998b7f",version:"1",domainType:N,permitType:_},{name:"Aave Matic Market AAVE",address:"0x1d2a0e5ec8e5bbdca5cb219e649b565d8e5c3360",version:"1",domainType:N,permitType:_},{name:"Synapse",address:"0xf8f9efc0db77d8881500bb06ff5d6abc3070e695",version:"1",domainType:N,permitType:_},{name:"Aave Matic Market WMATIC",address:"0x8df3aad3a84da6b69a4da8aec3ea40d9091b2ac4",version:"1",domainType:N,permitType:_},{name:"Aave Matic Market USDT",address:"0x60d55f02a771d515e077c9c2403a1ef324885cec",version:"1",domainType:N,permitType:_},{name:"Klima DAO",address:"0x4e78011ce80ee02d2c3e649fb657e45898257815",version:"1",domainType:N,permitType:_},{name:"Quickswap",address:"0xb5c064f955d8e7f38fe0460c556a72987494ee17",domainType:P,permitType:_},{name:"Route",address:"0x16eccfdbb4ee1a85a33f3a9b21175cd7ae753db4",domainType:P,permitType:_},{address:"0x8f3cf7ad23cd3cadbd9735aff958023239c6a063",name:"(PoS) Dai Stablecoin",version:"1",salt:"0x0000000000000000000000000000000000000000000000000000000000000089",domainType:S,permitType:T,nonceFunction:"getNonce"},{address:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",name:"USD Coin (PoS)",version:"1",salt:"0x0000000000000000000000000000000000000000000000000000000000000089",domainType:S,permitType:_}],56:[{name:"1INCH Token",address:"0x111111111117dc0aa78b770fa6a738034120c302",version:"1",domainType:N,permitType:_},{name:"Frax",address:"0x90c97f71e18723b0cf0dfa30ee176ab653e89f40",version:"1",domainType:N,permitType:_},{name:"JADE",address:"0x7ad7242a99f21aa543f9650a56d141c57e4f6081",version:"1",domainType:N,permitType:_},{name:"Templar Token",address:"0x19e6bfc1a6e4b042fb20531244d47e252445df01",version:"1",domainType:N,permitType:_}]},E=new k.Interface(["function nonces(address owner) external view returns (uint256)","function _nonces(address owner) external view returns (uint256)","function getNonce(address owner) external view returns (uint256)","function name() external view returns (string)","function symbol() external view returns (string)","function decimals() external view returns (uint)","function balanceOf(address) external view returns (uint)","function permit(address owner, address spender, uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s)","function permit(address holder, address spender, uint256 nonce, uint256 expiry, bool allowed, uint8 v, bytes32 r, bytes32 s)","function transferFrom(address from, address to, uint256 amount) view returns (bool)","function transfer(address to, uint256 amount) view returns (bool)","function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint)"]),M=n(99),B=n(626),I=n(5),D=function(e){var t=e.signerAccount,n=e.identityAccount,a=e.network,i=e.setIsSelectionConfirmed,l=e.setStep,f=e.portfolio,j=e.relayerURL,k=e.setModalButtons,_=e.hideModal,T=e.setSelectedTokensWithAllowance,N=e.setGasSpeed,C=e.setStepperSteps,P=e.hidden,S=Object(d.useState)([]),A=Object(r.a)(S,2),D=A[0],L=A[1],R=Object(d.useState)([]),F=Object(r.a)(R,2),U=F[0],H=F[1],W=Object(d.useState)(null),z=Object(r.a)(W,2),V=z[0],G=z[1],K=Object(d.useState)(!0),q=Object(r.a)(K,2),Y=q[0],J=q[1],X=Object(d.useState)([]),Z=Object(r.a)(X,2),$=Z[0],Q=Z[1],ee=Object(d.useState)(null),te=Object(r.a)(ee,2),ne=te[0],re=te[1],ae=Object(d.useState)(null),ce=Object(r.a)(ae,2),se=ce[0],ie=ce[1],oe=Object(d.useState)("fast"),le=Object(r.a)(oe,2),ue=le[0],de=le[1],fe=Object(d.useState)([]),be=Object(r.a)(fe,2),he=be[0],pe=be[1],me=Object(d.useState)(!1),je=Object(r.a)(me,2),ge=je[0],ve=je[1],Oe=Object(d.useState)(!1),xe=Object(r.a)(Oe,2),ye=xe[0],we=xe[1],ke=Object(d.useState)(""),_e=Object(r.a)(ke,2),Te=_e[0],Ne=_e[1],Ce=Object(d.useState)(""),Pe=Object(r.a)(Ce,2),Se=Pe[0],Ae=Pe[1],Ee=Object(d.useRef)(),Me=Object(d.useRef)({}),Be=Object(d.useCallback)((function(e,t){var n=U.findIndex((function(t){return t.address===e}));if(-1!==n){var r=t(U[n]);H([].concat(Object(m.a)(U.slice(0,n)),[r],Object(m.a)(U.slice(n+1))))}}),[U]),Ie=Object(d.useCallback)((function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=D.sort((function(e,t){return e.name<t.name?-1:1})).findIndex((function(t){return t.address===e}));null===(t=Me.current[r])||void 0===t||t.focus(),Be(e,(function(t){var r=Object(p.a)(Object(p.a)({},t),{},{selected:!t.selected});if(n){var a,c=null===(a=U.find((function(t){return t.address===e})))||void 0===a?void 0:a.humanAmount;if(n>c){var s,i=null===(s=D.find((function(t){return t.address===e})))||void 0===s?void 0:s.decimals;r.amount=new g.a(n).multipliedBy(Math.pow(10,i)).toFixed(0),r.humanAmount=n}}return r}))}),[D,Be,U]),De=Object(d.useCallback)((function(){var e=Object(M.a)(a.id);if(y.ethers.utils.isAddress(Te)){if(D.find((function(e){return e.address.toLowerCase()===Te.toLowerCase()})))return Ne(""),void ve(!1);var c=new w.Contract(Te,E,e),s=c.symbol().catch((function(){return Ae("Could not get symbol of token "+Te)})),i=c.decimals().catch((function(){return Ae("Could not get decimals of token "+Te)})),o=c.allowance(t,n).catch((function(){return Ae("Could not get allowance for token "+Te)})),l=c.balanceOf(t).catch((function(){return Ae("Could not get balance for token "+Te)}));we(!0),Ae(null),Promise.all([s,i,o,l]).then((function(e){var t=Object(r.a)(e,4),n=t[0],a=t[1],c=t[2],s=t[3];we(!1),n&&a&&null!==c&&null!==s&&(Ne(""),ve(!1),L((function(e){return[].concat(Object(m.a)(e),[{address:Te,name:n,decimals:a.toNumber(),icon:null,rate:0,native:!1,availableBalance:s.toString(),balanceUSD:0}])})),H((function(e){return[].concat(Object(m.a)(e),[{address:Te,selectedAmount:0,amount:s.toString(),humanAmount:new g.a(s.toString()).div(Math.pow(10,a.toString())).toFixed(),selected:s.gt(0)}])})),pe((function(e){return[].concat(Object(m.a)(e),[{address:Te,allowance:0}])})))})).catch((function(e){console.log("err getting custom token data",e),we(!1)}))}else Ae("invalid custom token address")}),[a,Te,t,n,Ae,D]),Le=Object(d.useCallback)((function(e){var t;if(!se)return!1;var n=(null===(t=U.find((function(e){return e.address===s&&e.selected})))||void 0===t?void 0:t.amount)||0;return new g.a(se.gasFees[e].signerTransactionsCost).plus(n).lte(V.availableBalance||0)}),[U,se,V]),Re=Object(d.useCallback)((function(e){return new g.a(V.availableBalance).minus(se.gasFees[e].signerTransactionsCost)}),[se,V]),Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.map((function(e){return Object(p.a)(Object(p.a)(Object(p.a)({},e),t.find((function(t){return t.address===e.address}))),n.find((function(t){return t.address===e.address})))}))},Ue=Object(d.useCallback)(Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=Fe(D,U,he).filter((function(e){return e.selected}))).length){e.next=3;break}return e.abrupt("return");case 3:T(t.map((function(e){return Object(p.a)({},e)}))),i(!0),t.find((function(e){return e.address===s}))?l(1):l(2),N(ue);case 7:case"end":return e.stop()}}),e)}))),[D,U,he,T,i,l,N,ue]);Object(d.useEffect)((function(){ge&&Ee.current.focus()}),[ge]),Object(d.useEffect)((function(){G(D.find((function(e){return e.native})))}),[D]),Object(d.useEffect)((function(){J(!0),L([]),o({networkId:a.id,account:t}).then((function(e){L(e.map((function(e){return Object(p.a)({},e)}))),H(e.map((function(e){return{address:e.address,selectedAmount:0,amount:e.availableBalance,humanAmount:new g.a(e.availableBalance).div(Math.pow(10,e.decimals)).toFixed(),selected:!1}}))),J(!1)})).catch((function(e){console.error(e)}))}),[t,J,L,a]),Object(d.useEffect)((function(){if(ne){var e=Fe(D,U,he),t=e.filter((function(e){return e.selected&&!e.native})).length,n=e.filter((function(e){return e.selected&&e.native})).length,r=t*(77e3+("arbitrum"===a.id?2e5:0))+25e3*n,c=ne.gasFeeAssets.native/Math.pow(10,18),s={};B.a.forEach((function(e){var t=ne.gasPrice[e]+(ne.gasPrice.maxPriorityFeePerGas?1*ne.gasPrice.maxPriorityFeePerGas[e]:0),n=r*t,a=n*c;s[e]={speed:e,signerTransactionsCost:n,signerTransactionsCostUSD:a,signerTransactionsConsumption:r}})),ie({regularTransfersCount:t,nativeTransfersCount:n,gasFees:s})}}),[D,U,f,ne,ue,he,a]),Object(d.useEffect)((function(){Object(c.c)("".concat(j,"/gasPrice/").concat(a.id)).then((function(e){re(e.data)})).catch((function(e){console.log("fetch error",e)}))}),[j,a]),Object(d.useEffect)((function(){var e=D.map((function(e){var r=Object(M.a)(a.id),c=new w.Contract(e.address,E,r);return e.native?{address:e.address,allowance:0}:c.allowance(t,n).then((function(t){return{address:e.address,allowance:t.toString()}})).catch((function(e){console.log("err getting allowance",e)}))}));Promise.all(e).then((function(e){pe(e)}))}),[n,a,D,t]),Object(d.useEffect)((function(){P||k(Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(u.e,{clear:!0,small:!0,icon:Object(I.jsx)(x.f,{}),onClick:_,children:"Close"}),U.filter((function(e){return e.selected})).length>0&&Le(ue)?Object(I.jsxs)(u.e,{small:!0,icon:Object(I.jsx)(x.E,{}),className:"primary",onClick:function(){return Ue()},children:["Move ",U.filter((function(e){return e.selected})).length," assets"]}):Object(I.jsx)(u.e,{small:!0,icon:Object(I.jsx)(x.E,{}),className:"primary disabled",children:"Move assets"})]}))}),[U,ue,k,_,Ue,P,Le]);var He=Object(d.useCallback)((function(e,t){return Be(t.address,(function(n){if(""===e)return Object(p.a)(Object(p.a)({},n),{},{humanAmount:0,amount:0});if(e.endsWith(".")&&2===e.split(".").length||2===e.split(".").length&&e.endsWith("0")&&new g.a(e).isEqualTo(n.humanAmount))return Object(p.a)(Object(p.a)({},n),{},{humanAmount:e});if(!isNaN(e)){var r=new g.a(e).toFixed(t.decimals);return 1===new g.a(r).multipliedBy(Math.pow(10,t.decimals)).comparedTo(t.availableBalance)&&(r=new g.a(t.availableBalance).dividedBy(Math.pow(10,t.decimals)).toFixed(t.decimals)),r=r.replace(/\.?0+$/g,""),Object(p.a)(Object(p.a)({},n),{},{humanAmount:r,amount:new g.a(r).multipliedBy(Math.pow(10,t.decimals)).toFixed(0)})}return n}))}),[Be]);return Object(d.useEffect)((function(){setTimeout((function(){var e;null===(e=Me.current[0])||void 0===e||e.focus()}),250)}),[D]),Object(d.useEffect)((function(){var e=["Selection"],t=U.find((function(e){return e.address.toLowerCase()===s&&e.selected}));if(t&&e.push("Send ".concat(D.find((function(e){return e.address===t.address})).name)),U.find((function(e){return e.address.toLowerCase()!==s&&e.selected}))){var n=[];U.find((function(e){return e.selected&&e.address.toLowerCase()!==s}))&&n.push("Send"),e.push(n.join(" and ")+" tokens")}1===e.length&&e.push("Send tokens"),C(e)}),[D,U,C,a]),P?Object(I.jsx)(I.Fragment,{}):Object(I.jsx)("div",{children:Y?Object(I.jsxs)("div",{className:"content-center",children:[Object(I.jsx)("h3",{className:"mb-6",children:"Loading assets..."}),Object(I.jsx)(v.a,{})]}):Object(I.jsx)("div",{children:0===D.length?Object(I.jsx)("div",{children:"No assets to migrate have been found"}):Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"mb-4",children:"Please select the assets you would like to migrate from your signer wallet to your Ambire wallet"}),Fe(D,U).sort((function(e,t){return e.name<t.name?-1:1})).map((function(e,t){return Object(I.jsxs)("div",{className:"migration-asset-row",children:[Object(I.jsx)("div",{className:"migration-asset-select".concat(e.selected?" checked":""),onClick:function(){return!1},children:Object(I.jsx)(u.g,{labelClassName:"checkbox-label",id:"check-".concat(e.address),label:Object(I.jsxs)("span",{className:"migration-asset-select-label",children:[Object(I.jsx)("span",{className:"migration-asset-select-icon",children:$.includes(e.icon)||!e.icon?Object(I.jsx)(O.c,{size:18}):Object(I.jsx)("img",{src:e.icon,draggable:"false",alt:"Token Icon",onError:function(t){Q((function(t){return[].concat(Object(m.a)(t),[e.icon])}))}})}),Object(I.jsx)("span",{className:"migration-asset-select-name",children:e.name})]}),checked:e.selected,onChange:function(){return Ie(e.address)}})}),Object(I.jsxs)("div",{className:"migration-asset-usd",children:["$",(e.amount*e.rate).toFixed(2)]}),Object(I.jsx)("div",{className:"migration-asset-amount",children:Object(I.jsx)(u.z,{ref:function(e){return Me.current[t]=e},className:"migrate-amount-input",value:e.humanAmount,onChange:function(t){return He(t,e)}})})]},t)})),Object(I.jsx)("div",{className:"custom-token-row mt-2",children:ge?Object(I.jsx)("div",{children:ye?Object(I.jsxs)("div",{className:"custom-token-message-fetching",children:[Object(I.jsx)(u.n,{}),"Fetching custom token data..."]}):Object(I.jsxs)(I.Fragment,{children:[Se&&Object(I.jsx)("div",{className:"error",children:Se}),Object(I.jsx)("div",{children:Object(I.jsx)(u.z,{className:"custom-token-input",placeholder:"Enter custom token address",value:Te,onChange:function(e){Ne(e)},ref:Ee})}),Object(I.jsxs)("div",{className:"flex-row mt-2",children:[Object(I.jsx)(u.e,{small:!0,icon:Object(I.jsx)(x.c,{}),className:"buttonHollow danger align-right",onClick:function(){ve(!1),Ne(""),Ae(null)},children:"Cancel"}),Object(I.jsx)(u.e,{small:!0,icon:Object(I.jsx)(x.t,{}),className:"primary ms-4",onClick:function(){return De()},children:"Add"})]})]})}):Object(I.jsx)(u.e,{small:!0,icon:Object(I.jsx)(x.t,{}),className:"clear align-right",onClick:function(){return ve(!0)},children:"Add custom token"})}),!Le(ue)&&U.filter((function(e){return e.selected})).length>0&&Object(I.jsxs)("div",{className:"notification-hollow warning mt-3 mb-3",children:["Your Signer Wallet will not have enough fees to pay for the migration. Please transfer a maximum of ",Object(I.jsxs)("span",{className:"max-native-suggestion",onClick:function(){return He(new g.a(Re(ue)).dividedBy(Math.pow(10,V.decimals)).toFixed(6,g.a.ROUND_DOWN),V)},children:[new g.a(Re(ue)).dividedBy(Math.pow(10,V.decimals)).toFixed(6,g.a.ROUND_DOWN)," ",a.nativeAssetSymbol]})]}),se&&Object(I.jsxs)("div",{className:"gas-estimation-block mt-4",children:[Object(I.jsx)("div",{className:"gas-estimation-block-title",children:"Estimated gas fee"}),Object(I.jsx)("ul",{className:"gas-estimation-selector",children:Object.values(se.gasFees).map((function(e,t){return Object(I.jsx)("li",{className:e.speed===ue?"selected":"",onClick:function(){return de(e.speed)},children:e.speed},t)}))}),Object(I.jsx)("table",{className:"gas-estimation-details",children:Object(I.jsx)("tbody",{children:Object(I.jsxs)("tr",{children:[Object(I.jsxs)("td",{children:["Signer fee",(!!se.nativeTransfersCount||!!se.regularTransfersCount)&&Object(I.jsx)("span",{className:"migration-actions",children:Object(I.jsxs)("span",{children:[se.nativeTransfersCount+se.regularTransfersCount," transfers"]})})]}),Object(I.jsxs)("td",{className:"gas-estimation-details-amount",children:["$",se.gasFees[ue].signerTransactionsCostUSD.toFixed(2)]})]})})})]})]})})})},L=n(535),R=n(151),F=n(226),U=function(e){e.addRequest;var t=e.identityAccount,n=e.signer,a=e.signerExtra,i=e.network,o=e.selectedTokensWithAllowance,l=e.setError,u=e.hideModal,f=e.setStep,j=e.setModalButtons,v=e.relayerURL,w=e.gasSpeed,k=e.hidden,_=Object(d.useState)([]),T=Object(r.a)(_,2),N=T[0],C=T[1],P=Object(d.useState)({}),S=Object(r.a)(P,2),A=S[0],M=S[1],B=Object(d.useState)({}),D=Object(r.a)(B,2),U=D[0],H=D[1],W=Object(d.useState)(!1),z=Object(r.a)(W,2),V=z[0],G=z[1],K=Object(d.useState)(null),q=Object(r.a)(K,2),Y=q[0],J=q[1],X=Object(d.useState)([]),Z=Object(r.a)(X,2),$=Z[0],Q=Z[1],ee=Object(d.useState)(null),te=Object(r.a)(ee,2),ne=te[0],re=te[1],ae=Object(d.useState)(null),ce=Object(r.a)(ae,2),se=ce[0],ie=ce[1],oe=Object(d.useState)(null),le=Object(r.a)(oe,2),ue=le[0],de=le[1],fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return e.filter((function(e){return e.address!==s})).map((function(e){var a=Object(p.a)(Object(p.a)({},e),{},{signing:null,signature:null,sent:!1,pending:!1,allowance:0});return t[e.address]&&(a.signing=t[e.address].signing,a.signature=t[e.address].signature),n[e.address]&&(a.sent=!0),r[e.address]&&(a.pending=!0),a}))},be=Object(d.useCallback)(Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===ue||void 0===ue?void 0:ue.isConnected(n.address,i.chainId).then((function(e){return re(e),!!e||(l(Object(I.jsxs)(I.Fragment,{children:["Please make sure your signer wallet is unlocked, and connected with ",Object(I.jsx)("b",{children:n.address})," to the correct chain: ",Object(I.jsx)("b",{children:i.id})]})),!1)})).catch((function(e){return l("Could not check signer connection status: "+e.error),!1})));case 1:case"end":return e.stop()}}),e)}))),[i,l,n,ue]),he=Object(d.useCallback)((function(){var e=0;return fe(o,N,A,[]).forEach((function(t){t.sent&&e++})),e}),[o,N,A]),pe=Object(d.useCallback)(function(){var e=Object(h.a)(b.a.mark((function e(r){var a,c,s,l,u=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]&&u[1],e.next=3,be();case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(c=o.find((function(e){return e.address===r}))){e.next=8;break}return e.abrupt("return");case 8:return s=E.encodeFunctionData("transfer",[t,new g.a(c.amount).toFixed(0)]),H((function(e){return e[r]=!0,Object(p.a)({},e)})),J(null),l=ue.sendTransaction({from:n.address,to:r,data:s,gasLimit:8e4,gasPrice:se,chainId:i.chainId}).then(function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C((function(e){return e[r]=Object(p.a)(Object(p.a)({},e[r]),{},{signing:!0}),Object(p.a)({},e)})),!a){e.next=7;break}return e.next=4,t.wait();case 4:M((function(e){return e[r]=!0,Object(p.a)({},e)})),H((function(e){return e[r]=!1,Object(p.a)({},e)})),C((function(e){return e[r]=Object(p.a)(Object(p.a)({},e[r]),{},{signing:!1}),Object(p.a)({},e)}));case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return H((function(e){return e[r]=!1,Object(p.a)({},e)})),e.message.includes("underpriced")?J("Transaction fee underpriced"):J(e.message),G(!0),(!N[r]||N[r]&&!1!==N[r].signing)&&C((function(e){return e[r]=Object(p.a)(Object(p.a)({},e[r]),{},{signing:!1}),Object(p.a)({},e)})),!1})),e.abrupt("return",!!l);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ue,t,N,o,se,i,n,be]),me=Object(d.useCallback)((function(){l(null),M([]),C([]),G(!1),f(0)}),[l,C,M,f]),je=Object(d.useCallback)((function(){me(),u()}),[me,u]);return Object(d.useEffect)((function(){de(Object(L.a)({signer:n,signerExtra:a,chainId:i.chainId}))}),[i,n,a]),Object(d.useEffect)((function(){be()}),[be]),Object(d.useEffect)((function(){var e="".concat(v,"/gasPrice/").concat(i.id);Object(c.c)(e).then((function(e){var t=e.data.gasPrice[w];e.data.gasPrice.maxPriorityFeePerGas&&(t+=e.data.gasPrice.maxPriorityFeePerGas[w]),ie(t)})).catch((function(t){l(t.message+" "+e)}))}),[i,v,l,w]),Object(d.useEffect)((function(){if(ne&&Object.values(A).length&&se){var e=fe(o,N,A,[]).map((function(e){return{address:e.address,signed:e.signing}})).find((function(e){return null===e.signed}));e&&setTimeout((function(){pe(e.address,!0)}),150)}}),[o,pe,N,A,ne,se]),Object(d.useEffect)((function(){if(o.length){var e={};o.forEach((function(t){e[t.address]=!1})),M(e)}}),[o,M]),Object(d.useEffect)((function(){V&&l("Every asset below needs to be sent to complete the migration"+(Y?" ("+Y+")":""))}),[V,l,Y]),Object(d.useEffect)((function(){he()===o.length&&l(null)}),[he,o,l]),Object(d.useEffect)((function(){k||j(Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(F.a,{className:"clear",icon:Object(I.jsx)(x.D,{}),onClick:function(){return me()},children:"Back"}),he()===fe(o).length?Object(I.jsx)(F.a,{className:"primary",icon:Object(I.jsx)(x.E,{}),onClick:function(){return u()},children:"Close"}):Object(I.jsx)(F.a,{className:"primary disabled",icon:Object(I.jsx)(x.E,{}),children:"Complete"})]}))}),[me,je,he,o,j,k,u]),k?Object(I.jsx)(I.Fragment,{}):Object(I.jsxs)("div",{children:[he()<fe(o).length?Object(I.jsx)("div",{className:"notification-hollow mb-3 warning",children:"".concat(fe(o).length-he()," actions left to complete the migration")}):Object(I.jsx)("div",{className:"notification-hollow mb-3 success",children:"Your tokens were migrated. You can close this window"}),fe(o,N,A,U).map((function(e,t){return Object(I.jsxs)("div",{className:"migration-asset-row",children:[Object(I.jsx)("span",{className:"migration-asset-select-icon migration-asset-select-icon-permit",children:!e.icon||$.includes(e.icon)?Object(I.jsx)(O.c,{size:18}):Object(I.jsx)("img",{src:e.icon,draggable:"false",alt:"Token Icon",onError:function(t){Q((function(t){return[].concat(Object(m.a)(t),[e.icon])}))}})}),Object(I.jsx)("div",{className:"migration-asset-name",children:e.name}),Object(I.jsxs)("div",{className:"migration-asset-amount",children:[new g.a(e.amount).div(Math.pow(10,e.decimals)).toFixed()," ",Object(I.jsxs)("span",{className:"migration-asset-amount-usd",children:["($",(e.amount*e.rate).toFixed(2),")"]})]}),Object(I.jsx)("div",{className:"separator"}),Object(I.jsx)("div",{children:e.allowance&&y.ethers.BigNumber.from(e.allowance).gte(e.amount)||e.sent?Object(I.jsxs)("div",{className:"migration-permitted",onClick:function(){return pe(e.address)},children:[Object(I.jsx)(R.b,{})," Sent"]}):Object(I.jsx)(I.Fragment,{children:e.pending||e.signing?Object(I.jsxs)("div",{className:"migration-permitted warning",children:[Object(I.jsx)(R.f,{})," Sending..."]}):Object(I.jsx)(F.a,{className:"button-small secondary",onClick:function(){return pe(e.address)},children:"Send"})})})]},t)}))]})},H=function(e){var t,n=e.identityAccount,a=e.signer,s=e.signerExtra,i=e.network,o=e.nativeTokenData,l=e.setSelectedTokensWithAllowance,f=e.selectedTokensWithAllowance,p=e.setError,j=e.setStep,v=e.hasERC20Tokens,y=e.hideModal,w=e.relayerURL,k=e.setModalButtons,_=e.setBeforeCloseModalHandler,T=e.gasSpeed,N=e.hidden,C=Object(d.useState)([]),P=Object(r.a)(C,2),S=P[0],A=P[1],E=Object(d.useState)(!1),M=Object(r.a)(E,2),B=M[0],D=M[1],R=Object(d.useState)(!1),F=Object(r.a)(R,2),U=F[0],H=F[1],W=Object(d.useState)("0"),z=Object(r.a)(W,2),V=z[0],G=z[1],K=Object(d.useState)(null),q=Object(r.a)(K,2),Y=q[0],J=q[1],X=Object(d.useState)("0"),Z=Object(r.a)(X,2),$=Z[0],Q=Z[1],ee=Object(d.useState)("0"),te=Object(r.a)(ee,2),ne=te[0],re=te[1],ae=Object(d.useState)(!1),ce=Object(r.a)(ae,2),se=ce[0],ie=ce[1],oe=Object(d.useState)(null),le=Object(r.a)(oe,2),ue=le[0],de=le[1];try{t=Object(L.a)({signer:a,signerExtra:s,chainId:i.chainId})}catch(ge){p("No Web3 wallet connected. Please connect a Web3 wallet and reload the page")}var fe=Object(d.useCallback)((function(){j(0),l([])}),[l,j]),be=Object(d.useCallback)((function(){j(2)}),[j]),he=function(e){return e.filter((function(e){return e.selected&&!e.permittable&&!e.native})).length},pe=Object(d.useCallback)(Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return p(null),H(!0),v||_(null),e.next=7,t.isConnected(a.address,i.chainId).catch((function(e){p("Could not check signer connection status: "+e.error)}));case 7:e.sent?t.sendTransaction({from:a.address,to:n,gasLimit:25e3+("arbitrum"===i.id?2e5:0),gasPrice:ue,value:"0x"+new g.a(V).toString(16),chainId:i.chainId}).then(function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wait();case 2:return D(!0),H(!1),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return D(!1),H(!1),e&&e.message.includes("must provide an Ethereum address")?p("Make sure your wallet is unlocked and connected with ".concat(a.address,".")):p("Native asset migration failed: "+e.message),!1})):(p(Object(I.jsxs)(I.Fragment,{children:["Please make sure your signer wallet is unlocked, and connected with ",Object(I.jsx)("b",{children:a.address})," to the correct chain: ",Object(I.jsx)("b",{children:i.id})]})),H(!1));case 9:case"end":return e.stop()}}),e)}))),[t,p,v,i,_,a,n,V,ue]),me=Object(d.useCallback)((function(e){var t=new g.a(e).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals).replace(/\.?0+$/g,"");re(t),G(e),ie(!0)}),[o]);Object(d.useEffect)((function(){var e="".concat(w,"/gasPrice/").concat(i.id);Object(c.c)(e).then((function(e){var t=e.data.gasPrice[T];e.data.gasPrice.maxPriorityFeePerGas&&(t+=e.data.gasPrice.maxPriorityFeePerGas[T]);var n=25e3*t,r=he(f)*t*77e3;Q(new g.a((n+r).toFixed(0)).toFixed(0));var a=new g.a(o.availableBalance).minus(n+r);J(a.gte(0)?a.toFixed(0):0),de(t)})).catch((function(t){p(t.message+" "+e)}))}),[Q,J,o,i,w,p,T,f]);var je=Object(d.useCallback)((function(e){if(ie(!0),""===e)return re(0),void G(0);if(e.endsWith(".")&&2===e.split(".").length||2===e.split(".").length&&e.endsWith("0"))re(e);else if(!isNaN(e)){var t=new g.a(e).toFixed(o.decimals);1===new g.a(t).multipliedBy(Math.pow(10,o.decimals)).comparedTo(o.availableBalance)&&(t=new g.a(o.availableBalance).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals)),t=t.replace(/\.?0+$/g,""),re(t),G(new g.a(t).multipliedBy(Math.pow(10,o.decimals)).toFixed(0))}}),[o]);return Object(d.useEffect)((function(){var e=new g.a(o.amount).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals).replace(/\.?0+$/g,"");re(e),G(o.amount)}),[o]),Object(d.useEffect)((function(){if(!N){k(function(){var e=[];return B?v?e.push(Object(I.jsx)(u.e,{icon:Object(I.jsx)(x.E,{}),className:"primary full",onClick:function(){return be()},children:"Next"})):e.push(Object(I.jsx)(u.e,{icon:Object(I.jsx)(x.f,{}),className:"primary full",onClick:function(){return y()},children:"Close"})):t?(e.push(Object(I.jsx)(u.e,{icon:Object(I.jsx)(x.D,{}),className:"clear",onClick:function(){return fe()},children:"Back"},"0")),U?e.push(Object(I.jsxs)(u.e,{icon:Object(I.jsx)(u.n,{}),className:"primary disabled",children:["Moving ",o.name,"..."]},"1")):e.push(Object(I.jsxs)(u.e,{icon:Object(I.jsx)(x.E,{}),className:"primary",onClick:function(){return pe()},children:["Move ",o.name]},"1"))):e.push(Object(I.jsx)(u.e,{icon:Object(I.jsx)(x.f,{}),className:"clear full",onClick:function(){return y()},children:"Close"})),e}())}}),[B,v,k,y,U,fe,pe,be,t,o,N]),N?Object(I.jsx)(I.Fragment,{}):Object(I.jsx)("div",{children:t&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"migration-native-title mb-4",children:[Object(I.jsx)("div",{className:"migration-native-asset-icon",children:S.includes(o.icon)?Object(I.jsx)(O.c,{size:64}):Object(I.jsx)("img",{src:o.icon,draggable:"false",alt:"Token Icon",onError:function(e){A((function(e){return[].concat(Object(m.a)(e),[o.icon])}))}})}),Object(I.jsxs)("div",{className:"migration-native-title-asset-name",children:["Migrate native asset ",Object(I.jsx)("b",{children:o.name})]})]}),B?Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("div",{className:"small-asset-notification success",children:["Migration of your ",o.name," was successful"]})}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"migration-native-row",children:[Object(I.jsx)("span",{className:"migration-native-row-key",children:"Current balance"}),Object(I.jsxs)("span",{className:"migration-native-selection",onClick:function(){return me(o.availableBalance)},children:[new g.a(o.availableBalance).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name]})]}),Object(I.jsxs)("div",{className:"migration-native-row",children:[Object(I.jsx)("span",{className:"migration-native-row-key",children:"Amount to migrate"}),se||null!==Y&&V>Y?Object(I.jsx)(u.z,{className:"migrate-amount-input",value:ne,onChange:je}):Object(I.jsx)("div",{children:ne})]}),null!==Y&&new g.a(V).gt(Y)&&Object(I.jsxs)("div",{className:"notification-hollow warning mt-4",children:[Object(I.jsxs)("div",{children:[he(f)?"Signer transactions cost":"Current Transaction cost",": ~",new g.a($).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name,Object(I.jsxs)("span",{className:"migration-native-usd",children:[" ($",new g.a($).multipliedBy(o.rate).toFixed(2),")"]})]}),Object(I.jsx)("div",{className:"mt-3 mb-3",children:Y>0?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("span",{children:"You should migrate up to "}),Object(I.jsxs)("span",{className:"migration-native-selection",onClick:function(){return me(Y)},children:[new g.a(Y).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name]}),Object(I.jsx)("span",{children:" because will you need funds to pay the transaction costs."})]}):Object(I.jsx)("span",{children:"You do not have enough funds to pay the transaction fee."})})]}),U&&v&&Object(I.jsx)("div",{className:"notification-hollow info mt-4",children:"Waiting for the transaction to be mined before continuing migration..."}),U&&!v&&Object(I.jsxs)("div",{className:"notification-hollow info mt-4",children:["The amount of ",o.name," will be updated in your wallet, once the transaction has been confirmed and mined. If you confirmed your transaction, you can already close this window"]})]})]})})},W=function(e){var t=e.addRequest,n=e.selectedAccount,a=e.accounts,c=e.network,s=e.hideModal,i=e.relayerURL,o=e.portfolio,l=e.setModalButtons,f=e.setModalSteps,b=e.setBeforeCloseModalHandler,h=Object(d.useState)([]),p=Object(r.a)(h,2),m=p[0],j=p[1],g=Object(d.useState)(null),v=Object(r.a)(g,2),O=v[0],y=v[1],w=Object(d.useState)(!1),k=Object(r.a)(w,2),_=k[0],T=k[1],N=Object(d.useState)(!1),C=Object(r.a)(N,2),P=C[0],S=C[1],E=Object(d.useState)(0),M=Object(r.a)(E,2),B=M[0],L=M[1],R=Object(d.useState)([]),F=Object(r.a)(R,2),W=F[0],z=F[1],V=Object(d.useState)(null),G=Object(r.a)(V,2),K=G[0],q=G[1],Y=Object(d.useState)(!1),J=Object(r.a)(Y,2),X=J[0],Z=J[1],$=Object(d.useState)(null),Q=Object(r.a)($,2),ee=Q[0],te=Q[1],ne=a.find((function(e){return e.id===n}));return Object(d.useEffect)((function(){0===B&&(q(null),j([]),y(null),T(!1),te(null),b(null))}),[c,n,B,b]),Object(d.useEffect)((function(){P&&(S(!1),y(m.find((function(e){return e.native}))),T(!!m.find((function(e){return!e.native}))))}),[P,ne,m,c,n]),Object(d.useEffect)((function(){var e=B;B>0&&!O&&(e-=1),f({steps:W.map((function(e){return{name:e}})),stepIndex:e})}),[O,f,B,W]),Object(d.useEffect)((function(){var e=function(){Z(!0),l([Object(I.jsx)(u.e,{icon:Object(I.jsx)(x.D,{}),className:"clear buttonComponent",onClick:function(){return Z(!1)},children:"Back"},"0"),Object(I.jsx)(u.e,{icon:Object(I.jsx)(x.f,{}),className:"danger buttonComponent",onClick:function(){return s()},children:"Close"},"1")])};B>0&&b((function(){return e}))}),[B,b,l,s,X]),Object(I.jsxs)("div",{children:[K&&Object(I.jsx)("div",{className:"mt-3 error",children:K}),Object(I.jsxs)("div",{id:"assets-migration",children:[X&&Object(I.jsx)("div",{className:"notification-hollow warning mt-4",children:"By closing this window, your progress will be lost. Are you sure you want to close this window?"}),0===B&&Object(I.jsx)(D,{hidden:X,signerAccount:ne.signer.address,identityAccount:n,network:c,PERMITTABLE_COINS:A,setIsSelectionConfirmed:S,setStep:L,portfolio:o,relayerURL:i,setModalButtons:l,hideModal:s,setError:q,setSelectedTokensWithAllowance:j,setStepperSteps:z,setGasSpeed:te}),1===B&&O&&Object(I.jsx)(H,{hidden:X,signer:ne.signer,identityAccount:n,network:c,addRequest:t,signerExtra:ne.signerExtra,setError:q,nativeTokenData:O,hideModal:s,setStep:L,relayerURL:i,hasERC20Tokens:_,setModalButtons:l,setSelectedTokensWithAllowance:j,selectedTokensWithAllowance:m,setBeforeCloseModalHandler:b,gasSpeed:ee}),2===B&&Object(I.jsx)(U,{hidden:X,signer:ne.signer,identityAccount:n,network:c,addRequest:t,PERMITTABLE_COINS:A,signerExtra:ne.signerExtra,setError:q,selectedTokensWithAllowance:m,hideModal:s,setStep:L,setModalButtons:l,gasSpeed:ee,relayerURL:i})]})]})},z=function(e){var t=e.addRequest,n=e.selectedAccount,a=e.selectedNetwork,c=e.accounts,s=e.relayerURL,i=e.portfolio,o=Object(l.f)(),f=o.hideModal,b=o.setBeforeCloseModalHandler,h=Object(d.useState)(null),p=Object(r.a)(h,2),m=p[0],j=p[1],g=Object(d.useState)({steps:[],stepIndex:0}),v=Object(r.a)(g,2),O=v[0],x=v[1];return Object(I.jsx)(u.o,{id:"asset-migration-modal",title:Object(I.jsxs)("div",{children:[Object(I.jsx)("span",{children:"Migrate Assets"}),Object(I.jsx)(u.y,{steps:O.steps,currentStep:O.stepIndex,noLabels:!1})]}),buttons:m,children:Object(I.jsx)(W,{addRequest:t,selectedAccount:n,network:a,accounts:c,hideModal:f,relayerURL:s,portfolio:i,setModalButtons:j,setModalSteps:x,setBeforeCloseModalHandler:b})})};t.a=function(e){var t,n,a=e.addRequest,c=e.selectedAccount,s=e.accounts,i=e.selectedNetwork,u=e.relayerURL,f=e.portfolio,b=e.closeable,h=void 0!==b&&b,p=e.linkMargin,m=void 0!==p&&p,j=e.useStorage,g=Object(d.useState)(!1),v=Object(r.a)(g,2),O=v[0],x=v[1],y=Object(d.useState)(!1),w=Object(r.a)(y,2),k=w[0],_=w[1],T=Object(l.f)().showModal,N=j({key:"migrationSeen",defaultValue:{}}),C=Object(r.a)(N,2),P=C[0],S=C[1],A=s.find((function(e){return e.id===c}));try{n=Object(L.a)({signer:A.signer,signerExtra:A.signerExtra,chainId:i.chainId})}catch(M){}var E=Object(d.useCallback)((function(){_(!0),S((function(e){return e[c+i.id]=!0,e}))}),[c,i,S]);Object(d.useEffect)((function(){var e=!1;x(!1);return function(t){var n=t.networkId,r=t.identityAccount,a=t.accounts.find((function(e){return e.id===r}));a.signer&&o({networkId:n,account:a.signer.address}).then((function(t){if(!e){var n=t.filter((function(e){return e.balanceUSD>.001}));x(!!n.length)}})).catch((function(e){console.error(e)}))}({identityAccount:c,networkId:i.id,accounts:s}),function(){return e=!0}}),[c,i,s]),Object(d.useEffect)((function(){_(h&&!!P[c+i.id])}),[h,c,i,P]);return(null===(t=n)||void 0===t?void 0:t.provider)||A.signerExtra&&["ledger","trezor","Lattice"].includes(A.signerExtra.type)?O&&!k&&Object(I.jsxs)("div",{className:"migration-banner",children:[Object(I.jsxs)("div",{className:"migration-banner-message",children:[Object(I.jsx)("div",{children:"We detected that your signer account has tokens that can be transferred to your Ambire account. We recommend doing this in order to maximize your $WALLET rewards."}),Object(I.jsx)("span",{className:"link"+(m?" link-margin":""),onClick:function(){T(Object(I.jsx)(z,{addRequest:a,selectedNetwork:i,selectedAccount:c,accounts:s,relayerURL:u,portfolio:f}))},children:"Click here to migrate those tokens"})]}),h&&Object(I.jsx)("div",{className:"migration-banner-close",children:Object(I.jsx)(R.j,{onClick:function(){return E()}})})]}):Object(I.jsx)(I.Fragment,{})}}}]);
//# sourceMappingURL=12.af04a00e.chunk.js.map