{"version":3,"sources":["components/Wallet/Transfer/Transfer.module.scss","components/Wallet/Transfer/Addresses/Addresses.module.scss","components/Modals/AddAddressModal/AddAddressModal.js","components/Wallet/Transfer/Addresses/Addresses.js","components/Wallet/Transfer/Transfer.js","lib/icons.js","lib/formatters.js","lib/validations/formValidations.js","../node_modules/ambire-common/src/helpers/sendTxnHelpers/sendTxnHelpers.ts","../node_modules/ambire-common/src/services/isFeeCollectorTxn/isFeeCollectorTxn.ts","../node_modules/ambire-common/src/hooks/useGasTankData/index.ts","../node_modules/ambire-common/src/hooks/useGasTankData/useGasTankData.ts"],"names":["module","exports","AddAddressModal","title","inputs","selectedNetwork","onClose","hideModal","useModals","useState","isDisabled","setDisabled","uDAddress","setUDAddress","ensAddress","setEnsAddress","timer","useRef","inputsFields","useMemo","map","input","ref","createRef","getUDomain","value","a","resolveUDomain","unstoppableDomainsChain","onInput","current","clearTimeout","validateForm","isFound","find","item","inputType","domain","uDAddr","ensAddr","resolveENSDomain","isFormValid","validate","isUDField","every","v","setTimeout","catch","console","error","buttons","clear","small","icon","onClick","disabled","values","push","type","id","label","placeholder","className","Addresses","addresses","addAddress","removeAddress","onSelectAddress","showModal","modalInputs","isValidAddress","addAddressModal","name","address","styles","wrapper","AddressList","noAccounts","separator","ERC20","Interface","require","unsupportedSWPlatforms","withRouter","history","portfolio","selectedAcc","addRequest","addressBook","relayerURL","isKnownAddress","feeAssetsRes","useGasTankData","network","useRelayerData","feeAssetsPerNetwork","length","filter","disableGasTankDeposit","tokenAddressOrSymbol","useParams","addToast","useToasts","state","useLocation","gasTankDetails","tokenAddress","tokens","symbol","asset","setAsset","amount","setAmount","bigNumberHexAmount","setBigNumberHexAmount","accountPresets","feeCollector","setAddress","addressConfirmed","setAddressConfirmed","sWAddressConfirmed","setSWAddressConfirmed","newAddress","setNewAddress","success","messages","validationFormMgs","setValidationFormMgs","feeBaseTokenWarning","setFeeBaseTokenWarning","assetsItems","isTopUp","some","i","toLowerCase","img","tokenImageUrl","fallbackIcon","getTokenIcon","selectedAsset","maxAmount","maxAmountFormatted","balanceRaw","decimals","balance","ethers","utils","formatUnits","formatFloatTokenAmount","showSWAddressWarning","Number","networks","includes","onAmountChange","bigNumberAmount","parseUnits","toHexString","useEffect","gasFeeToken","ft","baseToken","feeBaseToken","toUpperCase","replace","pathname","isValidSendTransferAmount","validateSendTransferAmount","startsWith","indexOf","isValidRecipientAddress","validateSendTransferAddress","message","UDAddress","bip44Item","getBip44Items","isUDAddress","selectedAddress","isEnsAddress","amountLabel","style","justifyContent","panel","isCurrNetworkBalanceLoading","form","searchable","defaultValue","items","sort","b","onChange","gasTankConvertMsg","precision","button","onButtonClick","size","gasTankMsg","recipientField","info","recipientInput","inputContainerClass","textInputContainer","cn","ensLogo","ensLogoActive","udomainsLogo","udomainsLogoActive","x","dropdown","onAddNewAddress","binanceAddressWarning","join","href","target","rel","checked","primaryGradient","recipientAddress","txn","to","data","encodeFunctionData","req","Date","now","chainId","account","meta","addressLabel","e","customIcons","zapperStorageTokenIcons","networkId","addr","net","useGrouping","maximumFractionDigits","isNaN","parseFloat","minimumFractionDigits","Math","min","toLocaleString","undefined","max","err","validateAddress","validateAddAuthSignerAddress","isValidAddr","isKnownTokenOrContract","parsedAmount","slice","gt","validateSendNftAddress","metadata","owner","getAddedGas","token","ERC20AbiInterface","ERC20ABI","TRANSFER_SIGHASH","getSighash","getFunction","format","isFeeCollectorTxn","res","decodeFunctionData","BigNumber","from","_value","getTxnTransferInfo","_to","cacheBreak","useCacheBreak","urlGetBalance","urlGetFeeAssets","urlGetTransactions","url","balancesRes","isLoading","executedTxnsRes","gasTankBalances","balanceInUSD","reduce","gasTankTxns","txns","gasTankFee","executedTxns","gasTankFilledTxns","transactions","depositTxns","forEach","txId","submittedAt","identity","rest","filteredTxns","txnCall","fillTxn","getGasTankFilledTxns","availableFeeAssets","balanceUSD","price","totalSavedResult","feeTokenDetails","feeToken","savedGas","saved","feeInUSDPerGas","cashback","toString"],"mappings":"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","file":"static/js/19.efafa7b6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"transferButton\":\"Transfer_transferButton__1rMpZ\",\"wrapper\":\"Transfer_wrapper__1zpDw\",\"amountLabel\":\"Transfer_amountLabel__2FfXd\",\"recipientField\":\"Transfer_recipientField__38BwH\",\"recipientInput\":\"Transfer_recipientInput__1fRT1\",\"dropdown\":\"Transfer_dropdown__1iOox\",\"udomainsLogo\":\"Transfer_udomainsLogo__2kvpB\",\"udomainsLogoActive\":\"Transfer_udomainsLogoActive__1yiB2\",\"ensLogo\":\"Transfer_ensLogo__3Mty8\",\"ensLogoActive\":\"Transfer_ensLogoActive__3lBQM\",\"panel\":\"Transfer_panel__3xc_N\",\"form\":\"Transfer_form__vDDvB\",\"separator\":\"Transfer_separator__2LFW-\",\"gasTankMsg\":\"Transfer_gasTankMsg__1e4vi\",\"gasTankConvertMsg\":\"Transfer_gasTankConvertMsg__2WccI\",\"addresses\":\"Transfer_addresses__1GQc2\",\"content\":\"Transfer_content__2TjdS\",\"address-list\":\"Transfer_address-list__10GjG\",\"binanceAddressWarning\":\"Transfer_binanceAddressWarning__2UP0i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"addresses-button\":\"Addresses_addresses-button__3nLP7\",\"wrapper\":\"Addresses_wrapper__2fkD9\",\"separator\":\"Addresses_separator__1OSZH\",\"item\":\"Addresses_item__2G0-3\",\"details\":\"Addresses_details__3NAv3\",\"address\":\"Addresses_address__1RlKw\",\"button\":\"Addresses_button__235kc\"};","import './AddAddressModal.scss'\n\nimport { createRef, useRef, useState, useMemo } from 'react'\nimport { MdCheck, MdClose } from 'react-icons/md'\nimport { useModals } from 'hooks'\nimport { Modal, TextInput, Button, ToolTip } from \"components/common\"\nimport { resolveUDomain } from 'lib/unstoppableDomains'\nimport { resolveENSDomain } from 'lib/ensDomains'\n\nconst AddAddressModal = ({ title, inputs, selectedNetwork, onClose }) => {\n    const { hideModal } = useModals()\n    const [isDisabled, setDisabled] = useState(true)\n    const [uDAddress, setUDAddress] = useState('')\n    const [ensAddress, setEnsAddress] = useState('')\n    const timer = useRef(null)\n\n    const inputsFields = useMemo(() => inputs.map(input => ({ ...input, ref: createRef() })), [inputs])\n    const getUDomain = async (value) => {\n        return await resolveUDomain(value, null, selectedNetwork.unstoppableDomainsChain)\n    }\n\n    const onInput = () => {\n        if (timer.current) {\n            clearTimeout(timer.current)\n        }\n\n        const validateForm = async () => {\n            const isFound = inputsFields.find(item => item.inputType === 'address')\n            const domain = isFound && isFound.ref && isFound.ref.current.value\n            if (!domain) return\n            \n            let uDAddr = null\n            let ensAddr = null\n            if (isFound) {\n                uDAddr = await getUDomain(domain)\n                ensAddr = await resolveENSDomain(domain)\n                timer.current = null\n                if (uDAddr) setUDAddress(uDAddr)\n                else if (ensAddr) setEnsAddress(ensAddr)\n            }\n\n            const isFormValid = inputsFields\n                .map(({ ref, validate, inputType }) => {\n                    const isUDField = inputType === 'address'\n                    const value = isUDField && uDAddr ? uDAddr : isUDField && ensAddr ? ensAddr : ref.current.value\n                    if (!validate) return !!value\n\n                    return validate(value)\n                })\n                .every(v => v === true)\n\n            setDisabled(!isFormValid)\n        }\n\n        timer.current = setTimeout(async () => {\n            return validateForm().catch(console.error)\n        }, 500)\n    }\n\n    const onConfirm = () => {\n        let values = inputsFields.map(({ ref }) => ref.current.value)\n        if (uDAddress) values.push({ type: 'ud' })\n        else if (ensAddress) values.push({ type: 'ens' })\n        else values.push({ type: 'pub' })\n        \n        onClose && onClose(values)\n        hideModal()\n    }\n\n    const buttons = <>\n        <Button clear small icon={<MdClose />} onClick={hideModal}>Cancel</Button>\n        <Button small icon={<MdCheck />} disabled={isDisabled} onClick={onConfirm}>Confirm</Button>\n    </>\n\n    return (\n        <Modal id=\"input-modal\" title={title} buttons={buttons}>\n            {\n                inputsFields.map(({ id, label, placeholder, ref, type }) => (\n                    <div key={id + label}>\n                        <TextInput label={label} placeholder={placeholder} onInput={onInput} ref={ref} className='address-input' />\n                        {(type === 'address') &&\n                            <>\n                                <ToolTip label={!uDAddress ? 'You can use Unstoppable domainsⓇ' : 'Valid Unstoppable domainsⓇ domain'}>\n                                    <span id=\"udomains-logo\" className={ uDAddress ? 'ud-logo-active ' : '' } />\n                                </ToolTip>\n                                <ToolTip label={!ensAddress ? 'You can use Ethereum Name ServiceⓇ' : 'Valid Ethereum Name ServicesⓇ domain'}>\n                                    <div id=\"ens-logo\" className={ensAddress ? 'ens-logo-active ' : ''} />\n                                </ToolTip>\n                            </>\n                        }\n                    </div>\n                ))\n            }\n        </Modal>\n    )\n}\n\nexport default AddAddressModal\n","import styles from './Addresses.module.scss'\n\nimport AddressList from 'components/common/AddressBook/AddressList/AddressList'\nimport { Button, Panel } from 'components/common'\nimport { isValidAddress } from 'ambire-common/src/services/address'\nimport AddAddressModal from 'components/Modals/AddAddressModal/AddAddressModal'\nimport { useModals } from 'hooks'\n\nconst Addresses = ({ addresses, addAddress, removeAddress, onSelectAddress, selectedNetwork }) => {\n    const { showModal } = useModals()\n\n    const modalInputs = [\n        { inputType: 'name', label: 'Name', placeholder: 'Address title' },\n        { inputType: 'address', label: 'Address / Unstoppable domainsⓇ / ENSⓇ', placeholder: 'Address / Unstoppable Domains / ENS', validate: value => isValidAddress(value) } \n    ]\n\n    const addAddressModal = <AddAddressModal \n            title=\"Add New Address\" \n            selectedNetwork={selectedNetwork} \n            inputs={modalInputs} \n            onClose={([name, address, type]) => addAddress(name, address, type)}\n        ></AddAddressModal>\n    const showInputModal = () => showModal(addAddressModal)\n\n    return (\n        <Panel title=\"Address Book\" className={styles.wrapper}>\n            <AddressList\n                noAccounts={true}\n                addresses={addresses}\n                removeAddress={removeAddress}\n                onSelectAddress={onSelectAddress}\n            />\n            <div className={styles.separator}></div>\n            <Button onClick={showInputModal} className={styles['addresses-button']}>Add Address</Button>\n        </Panel>\n    )\n}\n\nexport default Addresses","import styles from './Transfer.module.scss'\n\nimport { BsXLg } from 'react-icons/bs'\nimport { MdWarning } from 'react-icons/md'\nimport { useParams, withRouter } from 'react-router'\nimport { useEffect, useMemo, useState, useRef } from 'react'\nimport { ethers } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useToasts } from 'hooks/toasts'\nimport { TextInput, NumberInput, Button, Select, Loading, AddressBook, AddressWarning, NoFundsPlaceholder, Checkbox, ToolTip, Panel } from 'components/common'\nimport { validateSendTransferAddress, validateSendTransferAmount } from 'lib/validations/formValidations'\nimport { resolveUDomain } from 'lib/unstoppableDomains'\nimport { isValidAddress } from 'ambire-common/src/services/address'\nimport Addresses from './Addresses/Addresses'\nimport { MdInfo } from 'react-icons/md'\nimport networks from 'consts/networks'\nimport { getTokenIcon } from 'lib/icons'\nimport { formatFloatTokenAmount } from 'lib/formatters'\nimport { useLocation } from 'react-router-dom'\nimport accountPresets from 'ambire-common/src/constants/accountPresets'\nimport { resolveENSDomain, getBip44Items } from 'lib/ensDomains'\nimport useGasTankData from 'ambire-common/src/hooks/useGasTankData'\nimport { useRelayerData } from 'hooks'\nimport cn from 'classnames'\n\nconst ERC20 = new Interface(require('adex-protocol-eth/abi/ERC20'))\nconst unsupportedSWPlatforms = ['Binance', 'Huobi', 'KuCoin', 'Gate.io', 'FTX']\n\nconst Transfer = ({ history, portfolio, selectedAcc, selectedNetwork, addRequest, addressBook, relayerURL }) => {\n    const { addresses, addAddress, removeAddress, isKnownAddress } = addressBook\n    const {\n        feeAssetsRes\n      } = useGasTankData({\n        relayerURL,\n        selectedAcc,\n        network: selectedNetwork,\n        portfolio,\n        useRelayerData\n      })\n    const feeAssetsPerNetwork = feeAssetsRes && feeAssetsRes.length && feeAssetsRes.filter(item => (item.network === selectedNetwork.id) && !item.disableGasTankDeposit)\n    const { tokenAddressOrSymbol } = useParams()\n    const { addToast } = useToasts()\n    const { state } = useLocation()\n    const [gasTankDetails] = useState(state ? state : null)\n    const tokenAddress = isValidAddress(tokenAddressOrSymbol) ? tokenAddressOrSymbol : portfolio.tokens.find(({ symbol }) => symbol === tokenAddressOrSymbol)?.address || null\n\n    const [asset, setAsset] = useState(tokenAddress)\n    const [amount, setAmount] = useState(0)\n    const [bigNumberHexAmount, setBigNumberHexAmount] = useState('')\n    const [address, setAddress] = useState(gasTankDetails ? accountPresets.feeCollector : '')\n    const [uDAddress, setUDAddress] = useState('')\n    const [ensAddress, setEnsAddress] = useState('')\n    const [disabled, setDisabled] = useState(true)\n    const [addressConfirmed, setAddressConfirmed] = useState(false)\n    const [sWAddressConfirmed, setSWAddressConfirmed] = useState(false)\n    const [newAddress, setNewAddress] = useState('')\n    const [validationFormMgs, setValidationFormMgs] = useState({\n        success: {\n            amount: false,\n            address: false\n        },\n        messages: {\n            amount: '',\n            address: ''\n        }\n    })\n    const [feeBaseTokenWarning, setFeeBaseTokenWarning] = useState('')\n    const timer = useRef(null)\n    let eligibleFeeTokens = null\n    if (gasTankDetails?.isTopUp) {\n        eligibleFeeTokens = portfolio.tokens.filter(item => feeAssetsPerNetwork && feeAssetsPerNetwork?.some(i => i.address.toLowerCase() === item.address.toLowerCase()))\n    } else eligibleFeeTokens = portfolio.tokens\n    \n    const assetsItems = eligibleFeeTokens.map(({ label, symbol, address, img, tokenImageUrl, network }) => ({\n        label: label || symbol,\n        value: address,\n        icon: img || tokenImageUrl,\n        fallbackIcon: getTokenIcon(network, address)\n    }))\n\n    const selectedAsset = portfolio.tokens.find(({ address }) => address === asset)\n\n    const { maxAmount, maxAmountFormatted } = useMemo(() => {\n        if (!selectedAsset) return { maxAmount: '0', maxAmountFormatted: '0.00' };\n        const { balanceRaw, decimals, balance } = selectedAsset\n        return {\n            maxAmount: ethers.utils.formatUnits(balanceRaw, decimals),\n            maxAmountFormatted: formatFloatTokenAmount(balance, true, decimals)\n        }\n    }, [selectedAsset])\n\n    const showSWAddressWarning = useMemo(() =>\n        !gasTankDetails && Number(tokenAddress) === 0 && networks.map(({ id }) => id).filter(id => id !== 'ethereum').includes(selectedNetwork.id)\n        , [gasTankDetails, tokenAddress, selectedNetwork.id])\n\n    const setMaxAmount = () => onAmountChange(maxAmount)\n\n    const onAmountChange = value => {\n        if (value) {\n            const { decimals } = selectedAsset\n            const bigNumberAmount = ethers.utils.parseUnits(value, decimals).toHexString()\n            setBigNumberHexAmount(bigNumberAmount)\n        }\n\n        setAmount(value)\n    }\n\n    const sendTx = () => {\n        const recipientAddress = uDAddress ? uDAddress : ensAddress ? ensAddress :  address\n        if (!bigNumberHexAmount) return \n        \n        try {\n            const txn = {\n                to: selectedAsset.address,\n                value: '0',\n                data: ERC20.encodeFunctionData('transfer', [recipientAddress, bigNumberHexAmount])\n            }\n\n            if (Number(selectedAsset.address) === 0) {\n                txn.to = recipientAddress\n                txn.value = bigNumberHexAmount\n                txn.data = '0x'\n            }\n\n            let req = {\n                id: `transfer_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: selectedNetwork.chainId,\n                account: selectedAcc,\n                txn,\n                meta: null\n            }\n\n            if (uDAddress) {\n                req.meta = {\n                    addressLabel: {\n                        addressLabel: address,\n                        address: uDAddress\n                    }\n                }\n            } else if (ensAddress) {\n                req.meta = {\n                    addressLabel: {\n                        addressLabel: address,\n                        address: ensAddress\n                    }\n                }\n            }\n\n            addRequest(req)\n\n            setAmount(0)\n        } catch (e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    useEffect(() => {\n        // check gasTank topUp with token for convertion\n        setFeeBaseTokenWarning('')\n        if (gasTankDetails?.isTopUp){\n            const gasFeeToken = feeAssetsPerNetwork && feeAssetsPerNetwork.find(ft => ft?.address?.toLowerCase() === selectedAsset?.address?.toLowerCase())\n            if (gasFeeToken?.baseToken) {\n                const feeBaseToken = feeAssetsPerNetwork && feeAssetsPerNetwork.find(ft => ft.address.toLowerCase() === gasFeeToken.baseToken.toLowerCase())\n                setFeeBaseTokenWarning(`Token ${gasFeeToken.symbol.toUpperCase()} will be converted to ${feeBaseToken.symbol.toUpperCase()} without additional fees.`)\n            }\n        }\n    }, [feeAssetsPerNetwork, gasTankDetails?.isTopUp, selectedAsset])\n\n    useEffect(() => {\n        setAmount(0)\n        setBigNumberHexAmount('')\n        setSWAddressConfirmed(false)\n    }, [asset, selectedNetwork.id])\n\n    useEffect(() => {\n        if (!selectedAsset) return\n        history.replace({ pathname: `/wallet/transfer/${Number(asset) !== 0 ? asset : selectedAsset.symbol}` })\n    }, [asset, history, selectedAsset])\n\n    useEffect(() => {\n        const isValidSendTransferAmount = validateSendTransferAmount(amount, selectedAsset)\n\n        if (address.startsWith('0x') && (address.indexOf('.') === -1)) {\n            if (uDAddress !== '') setUDAddress('')\n            if (ensAddress !== '') setEnsAddress('')\n            const isValidRecipientAddress = validateSendTransferAddress(address, selectedAcc, addressConfirmed, isKnownAddress)\n\n            setValidationFormMgs({\n                success: {\n                    amount: isValidSendTransferAmount.success,\n                    address: isValidRecipientAddress.success\n                },\n                messages: {\n                    amount: isValidSendTransferAmount.message ? isValidSendTransferAmount.message : '',\n                    address: isValidRecipientAddress.message ? isValidRecipientAddress.message : ''\n                }\n            })\n\n            setDisabled(!isValidRecipientAddress.success || !isValidSendTransferAmount.success || (showSWAddressWarning && !sWAddressConfirmed))\n        } else {\n            if (timer.current) {\n                clearTimeout(timer.current)\n            }\n\n            const validateForm = async () => {\n                const UDAddress = await resolveUDomain(address, selectedAsset ? selectedAsset.symbol : null, selectedNetwork.unstoppableDomainsChain)\n                const bip44Item = getBip44Items(selectedAsset ? selectedAsset.symbol : null)\n                const ensAddr = await resolveENSDomain(address, bip44Item)\n                timer.current = null\n                const isUDAddress = UDAddress ? true : false\n                const isEnsAddress = ensAddr ? true : false\n                let selectedAddress = ''\n                if (isEnsAddress) selectedAddress = ensAddr\n                else if (isUDAddress) selectedAddress = UDAddress\n                else selectedAddress = address\n\n                const isValidRecipientAddress = validateSendTransferAddress(selectedAddress, selectedAcc, addressConfirmed, isKnownAddress, isUDAddress, isEnsAddress)\n\n                setUDAddress(UDAddress)\n                setEnsAddress(ensAddr)\n                setValidationFormMgs({\n                    success: {\n                        amount: isValidSendTransferAmount.success,\n                        address: isValidRecipientAddress.success\n                    },\n                    messages: {\n                        amount: isValidSendTransferAmount.message ? isValidSendTransferAmount.message : '',\n                        address: isValidRecipientAddress.message ? isValidRecipientAddress.message : ''\n                    }\n                })\n\n                setDisabled(!isValidRecipientAddress.success || !isValidSendTransferAmount.success || (showSWAddressWarning && !sWAddressConfirmed))\n            }\n\n            timer.current = setTimeout(async () => {\n                return validateForm().catch(console.error)\n            }, 300)\n        }\n        return () => clearTimeout(timer.current)\n    }, [address, amount, selectedAcc, selectedAsset, addressConfirmed, showSWAddressWarning, sWAddressConfirmed, isKnownAddress, addToast, selectedNetwork, addAddress, uDAddress, disabled, ensAddress])\n\n    const amountLabel = <div className={styles.amountLabel}>Available Amount: <span>{maxAmountFormatted} {selectedAsset?.symbol}</span></div>\n\n    return (\n        <div className={styles.wrapper} style={{ justifyContent: gasTankDetails ? 'center' : '' }}>\n           <Panel title=\"Send\" className={styles.panel}>\n               {\n                    portfolio.isCurrNetworkBalanceLoading ?\n                        <Loading />\n                        :\n                        assetsItems.length ?\n                            <div className={styles.form}>\n                                <Select searchable defaultValue={asset} items={assetsItems.sort((a, b) => a.label.toLowerCase() > b.label.toLowerCase() ? 1 : -1)} onChange={({ value }) => setAsset(value)}/>\n                                { feeBaseTokenWarning ? <p className={styles.gasTankConvertMsg}><MdWarning /> {feeBaseTokenWarning}</p> : <></>}\n                                <NumberInput\n                                    label={amountLabel}\n                                    value={amount}\n                                    precision={selectedAsset?.decimals}\n                                    onInput={onAmountChange}\n                                    button=\"MAX\"\n                                    onButtonClick={() => setMaxAmount()}\n                                />\n                                \n                                { validationFormMgs.messages.amount && \n                                    (<div className='validation-error'><BsXLg size={12}/>&nbsp;{validationFormMgs.messages.amount}</div>)}\n                                { gasTankDetails ? <p className={styles.gasTankMsg}><MdWarning /> {gasTankDetails?.gasTankMsg}</p> : (<div className={styles.recipientField}>\n                                    <TextInput\n                                        placeholder=\"Recipient\"\n                                        info=\"Please double-check the recipient address, blockchain transactions are not reversible.\"\n                                        value={address}\n                                        onInput={setAddress}\n                                        className={styles.recipientInput}\n                                        inputContainerClass={styles.textInputContainer}\n                                    />\n                                    <ToolTip label={!ensAddress ? 'You can use Ethereum Name ServiceⓇ' : 'Valid Ethereum Name ServicesⓇ domain'}>\n                                        <div className={cn(styles.ensLogo, {[styles.ensLogoActive]: ensAddress})} />\n                                    </ToolTip>\n                                    <ToolTip label={!uDAddress ? 'You can use Unstoppable domainsⓇ' : 'Valid Unstoppable domainsⓇ domain'}>\n                                        <div className={cn(styles.udomainsLogo, { [styles.udomainsLogoActive]: uDAddress })} />\n                                    </ToolTip>\n                                    <AddressBook\n                                        addresses={addresses.filter(x => x.address !== selectedAcc)}\n                                        addAddress={addAddress}\n                                        removeAddress={removeAddress}\n                                        newAddress={newAddress}\n                                        onClose={() => setNewAddress(null)}\n                                        onSelectAddress={address => setAddress(address)}\n                                        selectedNetwork={selectedNetwork}\n                                        className={styles.dropdown}\n                                    />\n                                </div>)}\n                                { validationFormMgs.messages.address && \n                                    (<div className='validation-error'><BsXLg size={12}/>&nbsp;{validationFormMgs.messages.address}</div>)}\n                                <div className={styles.separator} />\n                                <AddressWarning\n                                    address={address}\n                                    onAddNewAddress={() => setNewAddress(address)}\n                                    onChange={(value) => setAddressConfirmed(value)}\n                                    isKnownAddress={isKnownAddress}\n                                    uDAddress={uDAddress}\n                                    ensAddress={ensAddress}\n                                />\n                                {\n                                    showSWAddressWarning ?\n                                        <Checkbox\n                                            className={styles.binanceAddressWarning}\n                                            label={<span id=\"binance-address-warning-label\">\n                                                I confirm this address is not a {unsupportedSWPlatforms.join(' / ')} address: <br />\n                                                These platforms do not support ${selectedAsset?.symbol} deposits from smart wallets\n                                                <a href='https://help.ambire.com/hc/en-us/articles/4415473743506-Statement-on-MATIC-BNB-deposits-to-Binance' target='_blank' rel='noreferrer'><MdInfo size={20} /></a>\n                                            </span>}\n                                            checked={sWAddressConfirmed}\n                                            onChange={({ target }) => setSWAddressConfirmed(target.checked)}\n                                        />\n                                        :\n                                        null\n                                }\n                                <Button primaryGradient={true} disabled={disabled} onClick={sendTx} className='transfer-button'>Send</Button>\n                            </div>\n                            :\n                            <NoFundsPlaceholder/>\n               }\n           </Panel>\n           {!gasTankDetails && <Addresses\n                selectedAsset={selectedAsset}\n                selectedNetwork={selectedNetwork}\n                addresses={addresses}\n                addAddress={addAddress}\n                removeAddress={removeAddress}\n                onSelectAddress={address => setAddress(address)}\n            />}\n        </div>\n    )\n}\n\nexport default withRouter(Transfer)","const customIcons = {\n    '0xb468a1e5596cfbcdf561f21a10490d99b4bb7b68': 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg/220px-Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg', // TEST Polygon ELMO token,\n    '0x88800092ff476844f74dc2fc427974bbee2794ae': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/ambire_logo_white_bg_250x250.png', // Ambire Wallet Token\n    '0x47cd7e91c3cbaaf266369fe8518345fc4fc12935': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png', //xWallet\n    '0xb6456b57f03352be48bf101b46c1752a0813491a': 'https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/vaporwave-adex-2.png', // ADX-STAKING\n    '0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c': 'https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/ADX-loyalty%40256x256.png', // ADX-LOYALTY\n    '0xec3b10ce9cabab5dbf49f946a623e294963fbb4e': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png', // Polygons test xWallet\n    '0xe9415e904143e42007865e6864f7f632bd054a08': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/Ambire_logo_250x250.png', // Polygons test Wallet\n    '0xade00c28244d5ce17d72e40330b1c318cd12b7c3': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/official-logos/Ambire-AdEx/Ambire_AdEx_Symbol_color_white_bg.png' //ADX-TOKEN\n}\n\nconst zapperStorageTokenIcons = 'https://storage.googleapis.com/zapper-fi-assets/tokens'\n\nexport function getTokenIcon(networkId = '', address = '') {\n    const addr = address.toLowerCase()\n    const net = networkId.toLowerCase()\n    return customIcons[addr] || `${zapperStorageTokenIcons}/${net}/${addr}.png`\n}\n","export function formatFloatTokenAmount(amount, useGrouping = true, maximumFractionDigits = 18) {\n    if (isNaN(amount) || isNaN(parseFloat(amount)) || !(typeof amount === 'number' || typeof amount === 'string')) return amount\n\n    try {\n        const minimumFractionDigits = Math.min(2, maximumFractionDigits || 0)\n        return ((typeof amount === 'number') ? amount : parseFloat(amount))\n            .toLocaleString(undefined,\n                {\n                    useGrouping,\n                    maximumFractionDigits: Math.max(minimumFractionDigits, maximumFractionDigits),\n                    minimumFractionDigits\n                })\n    } catch (err) {\n        console.error(err)\n        return amount\n    }\n}\n\n// Round a floating point number to a specific decimal places, i.e. 1.156 => 1.16\nexport function roundFloatingNumber(number, places = 2) {\n  const decimals = Math.pow(10, places)\n\n  return Math.round((number + Number.EPSILON) * decimals) / decimals\n}\n","import { parseUnits } from 'ethers/lib/utils'\nimport { isValidAddress, isKnownTokenOrContract } from 'ambire-common/src/services/address'\nimport accountPresets from 'ambire-common/src/constants/accountPresets'\n\nconst validateAddress = address => {\n    if (!(address && address.length)) {\n        return {\n            success: false,\n            message: ''\n        }\n    }\n\n    if (!(address && isValidAddress(address))) {\n        return {\n            success: false,\n            message: 'Invalid address.'\n        }\n    }\n\n    return { success: true }\n}\n\nconst validateAddAuthSignerAddress = (address, selectedAcc) => {\n    const isValidAddr = validateAddress(address)\n    if (!isValidAddr.success) return isValidAddr\n\n    if (address && selectedAcc && (address === selectedAcc)) {\n        return {\n            success: false,\n            message: 'The entered address should be different than the your own account address.'\n        }\n    }\n    \n    return { success: true }\n}\n\nconst validateSendTransferAddress = (address, selectedAcc, addressConfirmed, isKnownAddress, isUDAddress, isEnsAddress) => {\n    const isValidAddr = validateAddress(address)\n    if (!isValidAddr.success) return isValidAddr\n\n    if (address && address === accountPresets.feeCollector) {\n        return {\n            success: true\n        }\n    }\n\n    if (address && selectedAcc && (address === selectedAcc)) {\n        return {\n            success: false,\n            message: 'The entered address should be different than the your own account address.'\n        }\n    }\n    \n    if (address && isKnownTokenOrContract(address)) {\n        return {\n            success: false,\n            message: 'You are trying to send tokens to a smart contract. Doing so would burn them.'\n        }\n    }\n\n    if (address && (!isKnownAddress(address) && !addressConfirmed && !isUDAddress && !isEnsAddress)) { \n        return {\n            success: false,\n            message: `You're trying to send to an unknown address. If you're really sure, confirm using the checkbox below.`\n        }\n    }\n\n    if (address && (!isKnownAddress(address) && !addressConfirmed && (isUDAddress || isEnsAddress))) { \n        const name = isUDAddress ? 'Unstoppable domain' : 'Ethereum Name Service'\n        return {\n            success: false,\n            message: `You're trying to send to an ${name}. If you really trust to the person who gave you, confirm using the checkbox below.`\n        }\n    }\n\n    return { success: true }\n}\n\nconst validateSendTransferAmount = (amount, selectedAsset) => {\n    if (!(amount && amount.length)) {\n        return {\n            success: false,\n            message: ''\n        }\n    }\n    \n    if (!(amount && (amount > 0))) {\n        return {\n            success: false,\n            message: 'The amount must be greater than 0.'\n        }\n    }\n\n    try {\n        if (amount && selectedAsset && selectedAsset.decimals) {\n            const parsedAmount = amount.slice(0, amount.indexOf('.') + selectedAsset.decimals + 1); // Fixed decimals in case amount is bigger than selectedAsset.decimals, otherwise would cause overflow error\n            const bigNumberAmount = parseUnits(parsedAmount, selectedAsset.decimals)\n            if (bigNumberAmount && selectedAsset.balanceRaw && bigNumberAmount.gt(selectedAsset.balanceRaw)) {\n                return {\n                    success: false,\n                    message: `The amount is greater than the asset's balance: ${selectedAsset?.balance} ${selectedAsset?.symbol}.`\n                }\n            }\n        }\n    } catch(e) {\n        console.error(e);\n    }\n\n    return { success: true }\n}\n\nconst validateSendNftAddress = (address, selectedAcc, addressConfirmed, isKnownAddress, metadata, selectedNetwork, network, isUDAddress, isEnsAddress) => {\n    const isValidAddr = validateSendTransferAddress(address, selectedAcc, addressConfirmed, isKnownAddress, isUDAddress, isEnsAddress)\n    if (!isValidAddr.success) return isValidAddr\n\n    if (metadata && selectedAcc && (metadata.owner?.address.toLowerCase() !== selectedAcc.toLowerCase())) {\n        return {\n            success: false,\n            message: `The NFT you're trying to send is not owned by you!`\n        }\n    }\n\n    if (selectedNetwork && network && (selectedNetwork.id !== network)) {\n        return {\n            success: false,\n            message: 'The selected network is not the correct one.'\n        }\n    }\n\n    return { success: true }\n}\n\nexport {\n    validateAddAuthSignerAddress,\n    validateSendNftAddress,\n    validateSendTransferAddress,\n    validateSendTransferAmount\n}\n","// @ts-nocheck TODO: Fill in all missing types before enabling the TS check again\n// It costs around 19k to send a token, if that token was interacted with before in the same transaction,\n// because of SLOAD costs - they depend on whether a slot has been read\n// however, it costs 30k if the token has not been interacted with\n// we may decrease it a bit and lean on the relayer failsafe values (cfg.gasAddedOnEstimate) later on\nconst ADDED_GAS_TOKEN = 30000\nconst ADDED_GAS_NATIVE = 12000\n\nexport function getAddedGas(token) {\n  return !token?.address || token?.address === '0x0000000000000000000000000000000000000000'\n    ? ADDED_GAS_NATIVE\n    : ADDED_GAS_TOKEN\n}\n\n// can't think of a less funny name for that\nexport function getFeePaymentConsequences(token, estimation, isGasTankEnabled) {\n  // Relayerless mode\n  if (!estimation?.feeInUSD || !token) return { multiplier: 1, addedGas: 0 }\n  // Relayer mode\n  const addedGas = getAddedGas(token)\n  // If Gas Tank enabled\n  if (isGasTankEnabled) return { addedGas: 0, multiplier: 1 }\n\n  return {\n    // otherwise we get very long floating point numbers with trailing .999999\n    multiplier: parseFloat(((estimation.gasLimit + addedGas) / estimation.gasLimit).toFixed(4)),\n    addedGas\n  }\n}\n\n// Returns feeToken data with all multipliers applied\nexport function getFeesData(feeToken, estimation, speed, isGasTankEnabled, network) {\n  const { addedGas, multiplier } = getFeePaymentConsequences(feeToken, estimation, isGasTankEnabled)\n  const savedGas = getAddedGas(feeToken)\n  const discountMultiplier = 1 - (feeToken?.discount || 0)\n  const totalMultiplier = multiplier * discountMultiplier\n  const nativeRate = feeToken?.nativeRate || 1\n  const isCrossChainNativeSelected =\n    isGasTankEnabled &&\n    feeToken.address === '0x0000000000000000000000000000000000000000' &&\n    network.id !== feeToken.network\n  // eslint-disable-next-line no-nested-ternary\n  const feeInNative = estimation.customFee\n    ? (estimation.customFee * discountMultiplier) / nativeRate\n    : !isCrossChainNativeSelected\n    ? estimation.feeInNative[speed] * totalMultiplier\n    : (((estimation.feeInNative[speed] * totalMultiplier) / nativeRate) *\n        estimation.nativeAssetPriceInUSD) /\n      feeToken.price\n  // eslint-disable-next-line no-nested-ternary\n  const feeInUSD = !Number.isNaN(estimation.nativeAssetPriceInUSD)\n    ? !isCrossChainNativeSelected\n      ? feeInNative * estimation.nativeAssetPriceInUSD\n      : feeInNative * feeToken.price\n    : undefined\n  const feeInFeeToken = feeInNative * nativeRate\n\n  return {\n    feeInNative,\n    feeInUSD,\n    feeInFeeToken,\n    addedGas, // use it bundle data\n    savedGas\n  }\n}\nexport function isTokenEligible(token, speed, estimation, isGasTankEnabled, network) {\n  if (estimation?.relayerless && token?.address === '0x0000000000000000000000000000000000000000')\n    return true\n  if (!token) return false\n  const { feeInFeeToken } = getFeesData(token, estimation, speed, isGasTankEnabled, network)\n  const balanceInFeeToken = parseInt(token.balance) / 10 ** token.decimals\n  return balanceInFeeToken > feeInFeeToken\n}\n\nconst contractErrors = [\n  'caller is a contract',\n  'contract not allowed',\n  'contract not supported',\n  'No contractz allowed',\n  /* no */ 'contracts allowed',\n  /* c or C */ 'ontract is not allowed'\n]\n\nexport function mapTxnErrMsg(msg: any) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Swap expired'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT'))\n    return 'Swap will suffer slippage higher than your requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'Your signer address is not authorized.'\n  if (contractErrors.find((contractMsg) => msg.includes(contractMsg)))\n    return 'This dApp does not support smart wallets.'\n  return msg\n}\n\nexport function getErrHint(msg: any) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Try performing the swap again'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT'))\n    return 'Try performing the swap again or increase your slippage requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE'))\n    return 'If you set a new signer for this account, try re-adding the account.'\n  if (contractErrors.find((contractMsg) => msg.includes(contractMsg)))\n    return 'Contact the dApp developers to tell them to implement smart wallet support by not blocking contract interactions and/or implementing EIP1271.'\n  return 'Sending this transaction batch would have resulted in an error, so we prevented it.'\n}\n\nexport function toHexAmount(amnt: any, decimals: any) {\n  return `0x${Math.round(amnt * 10 ** decimals).toString(16)}`\n}\n\nexport function getDiscountApplied(amnt: any, discount = 0) {\n  if (!discount) return 0\n  if (!amnt) return 0\n  if (discount === 1) return amnt\n  return (amnt / (1 - discount)) * discount\n}\n","// @ts-nocheck TODO: Fill in all missing types before enabling the TS check again\nimport ERC20ABI from 'adex-protocol-eth/abi/ERC20.json'\nimport { BigNumber } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\n\nimport accountPresets from '../../constants/accountPresets'\n\nconst ERC20AbiInterface = new Interface(ERC20ABI)\nconst TRANSFER_SIGHASH = ERC20AbiInterface.getSighash(\n  ERC20AbiInterface.getFunction('transfer').format()\n)\nconst feeCollector = accountPresets.feeCollector\nconst NATIVE_ADDRESS = '0x0000000000000000000000000000000000000000'\n\nfunction getTxnTransferInfo(txn) {\n  try {\n    const res = ERC20AbiInterface.decodeFunctionData('transfer', txn)\n\n    return {\n      value: BigNumber.from(res._value),\n      ...res\n    }\n  } catch (e) {\n    console.error(e)\n    return {}\n  }\n}\n\nfunction isFeeCollectorTxn(txn) {\n  // is first call is to relayer this is native\n  if (txn[0] === feeCollector) return true\n  // transfer token to relayer\n  if (txn[2].startsWith(TRANSFER_SIGHASH) && getTxnTransferInfo(txn[2])._to === feeCollector)\n    return true\n  return false\n}\n\nconst getGasTankFilledTxns = (transactions) => {\n  const depositTxns: any = []\n  transactions.forEach(({ txId, txns, submittedAt, gasTankFee, identity, ...rest }) => {\n    const filteredTxns = txns\n      .filter((txnCall, i) => isFeeCollectorTxn(txnCall) && (gasTankFee || i < txns.length - 1))\n      .map((fillTxn) => {\n        if (fillTxn[0] === feeCollector) {\n          return {\n            submittedAt,\n            address: NATIVE_ADDRESS,\n            value: BigNumber.from(fillTxn[1]),\n            identity,\n            txId,\n            ...rest\n          }\n        }\n        if (\n          fillTxn[2].startsWith(TRANSFER_SIGHASH) &&\n          ERC20AbiInterface.decodeFunctionData('transfer', fillTxn[2])._to === feeCollector\n        ) {\n          return {\n            submittedAt,\n            address: fillTxn[0],\n            value: BigNumber.from(\n              ERC20AbiInterface.decodeFunctionData('transfer', fillTxn[2])._value\n            ),\n            identity,\n            txId,\n            ...rest\n          }\n        }\n        return null\n      })\n\n    if (filteredTxns.length) depositTxns.push(filteredTxns[0])\n  })\n\n  return depositTxns\n}\n\nexport { getGasTankFilledTxns }\n","import useGasTankData from './useGasTankData'\n\nexport default useGasTankData\n","import { formatUnits } from 'ethers/lib/utils'\nimport { useMemo } from 'react'\n\nimport { getAddedGas } from '../../helpers/sendTxnHelpers'\nimport { getGasTankFilledTxns } from '../../services/isFeeCollectorTxn'\nimport useCacheBreak from '../useCacheBreak'\nimport { UseGasTankDataProps, UseGasTankDataReturnType } from './types'\n\nexport default function useGasTankData({\n  relayerURL,\n  selectedAcc,\n  network,\n  portfolio,\n  useRelayerData\n}: UseGasTankDataProps): UseGasTankDataReturnType {\n  const { cacheBreak } = useCacheBreak()\n  const { tokens } = portfolio\n\n  const urlGetBalance = relayerURL\n    ? `${relayerURL}/gas-tank/${selectedAcc}/getBalance?cacheBreak=${cacheBreak}`\n    : null\n  const urlGetFeeAssets = relayerURL\n    ? `${relayerURL}/gas-tank/assets?cacheBreak=${cacheBreak}`\n    : null\n  const urlGetTransactions = relayerURL\n    ? `${relayerURL}/identity/${selectedAcc}/${network?.id}/transactions`\n    : null\n\n  const { data: balancesRes, isLoading } = useRelayerData({ url: urlGetBalance })\n  const { data: feeAssetsRes } = useRelayerData({ url: urlGetFeeAssets })\n  const { data: executedTxnsRes } = useRelayerData({ url: urlGetTransactions })\n\n  const gasTankBalances = useMemo(\n    () =>\n      balancesRes &&\n      balancesRes.length &&\n      balancesRes.map(({ balanceInUSD }: any) => balanceInUSD).reduce((a: any, b: any) => a + b, 0),\n    [balancesRes]\n  )\n\n  const gasTankTxns = useMemo(\n    () =>\n      executedTxnsRes &&\n      executedTxnsRes.txns.length &&\n      executedTxnsRes.txns.filter((item: any) => !!item.gasTankFee),\n    [executedTxnsRes]\n  )\n\n  const feeAssetsPerNetwork = useMemo(\n    () =>\n      feeAssetsRes &&\n      feeAssetsRes.length &&\n      feeAssetsRes.filter((item: any) => item.network === network?.id),\n    [feeAssetsRes, network?.id]\n  )\n\n  const executedTxns = executedTxnsRes && executedTxnsRes.txns.length && executedTxnsRes.txns\n  const gasTankFilledTxns = useMemo(\n    () => executedTxns && executedTxns.length && getGasTankFilledTxns(executedTxns),\n    [executedTxns]\n  )\n\n  const availableFeeAssets = useMemo(\n    () =>\n      feeAssetsPerNetwork?.map((item: any) => {\n        const isFound = tokens?.find((x) => x.address.toLowerCase() === item.address.toLowerCase())\n        if (isFound)\n          return {\n            ...isFound,\n            tokenImageUrl: item.icon,\n            decimals: item.decimals,\n            symbol: item.symbol,\n            balance: isFound.balance,\n            disableGasTankDeposit: !!item.disableGasTankDeposit,\n            balanceUSD:\n              parseFloat(isFound.balance) *\n              parseFloat(\n                feeAssetsPerNetwork.find(\n                  (x: any) => x.address.toLowerCase() === isFound.address.toLowerCase()\n                ).price || 0\n              )\n          }\n\n        return {\n          ...item,\n          tokenImageUrl: item.icon,\n          balance: 0,\n          balanceUSD: 0,\n          decimals: 0,\n          address: item.address.toLowerCase(),\n          symbol: item.symbol.toUpperCase()\n        }\n      }),\n    [feeAssetsPerNetwork, tokens]\n  )\n\n  const totalSavedResult = useMemo(\n    () =>\n      gasTankTxns &&\n      gasTankTxns.length &&\n      gasTankTxns.map((item: any) => {\n        const feeTokenDetails = feeAssetsRes\n          ? feeAssetsRes.find((i: any) => i.symbol === item.feeToken)\n          : null\n        const savedGas = feeTokenDetails ? getAddedGas(feeTokenDetails) : null\n        return {\n          saved: savedGas ? item.feeInUSDPerGas * savedGas : 0.0,\n          cashback:\n            item.gasTankFee && item.gasTankFee.cashback\n              ? // @ts-ignore FIXME: Figure out why TypeScript complains\n                formatUnits(\n                  item.gasTankFee.cashback.toString(),\n                  feeTokenDetails?.decimals\n                ).toString() * feeTokenDetails?.price\n              : 0.0\n        }\n      }),\n    [feeAssetsRes, gasTankTxns]\n  )\n\n  return {\n    balancesRes,\n    gasTankBalances,\n    isLoading,\n    gasTankTxns,\n    feeAssetsRes,\n    gasTankFilledTxns,\n    totalSavedResult,\n    availableFeeAssets\n  }\n}\n"],"sourceRoot":""}