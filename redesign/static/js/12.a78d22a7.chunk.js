(this["webpackJsonpambire-wallet"]=this["webpackJsonpambire-wallet"]||[]).push([[12,4,5],{1540:function(e,t,n){},1541:function(e,t,n){},1542:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"allowed","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"addr","type":"address"},{"indexed":false,"internalType":"uint256","name":"salt","type":"uint256"}],"name":"LogDeployed","type":"event"},{"inputs":[],"name":"allowedToDrain","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes","name":"code","type":"bytes"},{"internalType":"uint256","name":"salt","type":"uint256"}],"name":"deploy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes","name":"code","type":"bytes"},{"internalType":"uint256","name":"salt","type":"uint256"},{"internalType":"address","name":"callee","type":"address"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"deployAndCall","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes","name":"code","type":"bytes"},{"internalType":"uint256","name":"salt","type":"uint256"},{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"internalType":"struct Identity.Transaction[]","name":"txns","type":"tuple[]"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"deployAndExecute","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"token","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenAmount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},1625:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return X}));var r=n(2),a=n.n(r),i=n(12),s=n(15),c=n(7),o=n(9),u=n(207),d=n(209),l=n(47),f=(n(1540),n(3)),p=n(558),h=n(106),b=n(21),m=n(212),y=n(45),g=n(528),v=n(146),x=n(57),w=n(213),j=(n(1541),n(210)),O=n(86),k=n(622),T=n(75),A=n(502),E=n(515),N=n(55),I=n(4),S=["address","symbol","discount","network","icon"],L=["slow","medium","fast","ape"],C="https://blog.ambire.com/move-crypto-with-ambire-pay-gas-with-wallet-and-save-30-on-fees-35dca1002697",P=["xWALLET","WALLET-STAKING","WALLET"];function F(e){return e.balance/e.decimals*e.priceInUSD}var _=function(e){var t,n,r=e.currenciesItems,a=e.tokens,i=e.estimation,c=e.onFeeCurrencyChange,o=e.onDismiss,u=e.feeSpeed,f=e.isGasTankEnabled,p=e.network;if((null===(t=i.selectedFeeToken)||void 0===t?void 0:t.symbol)&&(P.includes(null===(n=i.selectedFeeToken)||void 0===n?void 0:n.symbol)||i.selectedFeeToken.discount))return null;var h=Object(s.a)(a).filter((function(e){return P.includes(e.symbol)&&e.discount&&Object(k.f)(e,u,i,f,p)})).sort((function(e,t){return t.discount-e.discount||(parseInt(e.balance)&&parseInt(t.balance)?0:F(t)-F(e))||P.indexOf(e.symbol)-P.indexOf(t.symbol)}));if(!h.length)return null;var b=h[0],m=b.discount,y=r.find((function(e){return e.value&&("WALLET"===e.value||e.value===b.address)})),g=y?function(){return c(y)}:null,v=y?"USE ".concat(b.symbol):"BUY ".concat(b.symbol),x=!g;return Object(I.jsxs)("div",{className:"wallet-discount-banner row",children:[Object(I.jsxs)("div",{className:"row",children:["Get ",100*m," ",Object(I.jsx)(d.e,{})," fees discount with \xa0",Object(I.jsx)("strong",{children:"$WALLET"})," \xa0",Object(I.jsx)("a",{className:"address row",href:C,target:"_blank",rel:"noreferrer noopener",children:Object(I.jsx)(l.q,{})})]}),!!g&&Object(I.jsx)(O.e,{onClick:g,mini:!0,className:"buttonComponent",children:v}),x&&Object(I.jsxs)("div",{className:"swap-info",children:["You can get $WALLET, just use the \xa0",Object(I.jsx)(T.c,{className:"link",to:"/wallet/swap",onClick:o,children:"Swap"})," menu on the left!"]})]})};function M(e){var t,n,r,a,i,s=e.disabled,u=e.signer,p=e.estimation,h=e.network,b=e.setEstimation,m=e.feeSpeed,y=e.setFeeSpeed,g=e.onDismiss,v=e.isGasTankEnabled,x=Object(f.useState)(!1),j=Object(o.a)(x,2),T=j[0],F=j[1];if(!p)return Object(I.jsx)(O.m,{});var M=p&&p.feeInUSD&&!Object(k.f)(p.selectedFeeToken,m,p,v,h);if(p&&!p.success)return Object(k.a)(p.message)?Object(I.jsx)(O.i,{title:"Unable to send transaction"}):Object(I.jsx)(U,{message:Object(I.jsxs)(I.Fragment,{children:["The current transaction batch cannot be sent because it will fail: ",Object(k.g)(p.message)]}),tooltip:Object(k.d)(p.message)});if(!p.feeInNative)return Object(I.jsx)(I.Fragment,{});if(p&&!p.feeInUSD&&p.gasLimit<4e4)return Object(I.jsxs)("div",{children:[Object(I.jsx)("b",{children:"WARNING:"})," Fee estimation unavailable when you're doing your first account transaction and you are not connected to a relayer. You will pay the fee from ",Object(I.jsx)("b",{children:u.address}),", make sure you have ",h.nativeAssetSymbol," there."]});if(p&&p.feeInUSD&&!p.remainingFeeTokenBalances)return Object(I.jsx)("div",{className:"balance-error",children:"Internal error: fee balances not available. This should never happen, please report this on help.ambire.com"});var R,D=h.nativeAssetSymbol,B=null===(t=p.gasTank)||void 0===t?void 0:t.map((R=p.nativeAssetPriceInUSD,function(e){var t="0x0000000000000000000000000000000000000000"===e.address?null:R/e.price;return Object(c.a)(Object(c.a)({},e),{},{symbol:e.symbol.toUpperCase(),balance:N.ethers.utils.parseUnits(e.balance.toFixed(e.decimals).toString(),e.decimals).toString(),nativeRate:t})})),K=v&&(null===B||void 0===B?void 0:B.length)?B:p.remainingFeeTokenBalances||[{symbol:D,decimals:18,address:"0x0000000000000000000000000000000000000000"}],W=function(e){var t=e.value,n=e.label,r=K.find((function(e){var r=e.address,a=e.symbol;return r===t&&a===n}));b(Object(c.a)(Object(c.a)({},p),{},{selectedFeeToken:r}))},q=K.sort((function(e,t){return Object(k.f)(t,L[0],p,v,h)-Object(k.f)(e,L[0],p,v,h)||P.indexOf(t.symbol)-P.indexOf(e.symbol)||(t.discount||0)-(e.discount||0)||(null===e||void 0===e?void 0:e.symbol.toUpperCase().localeCompare(null===t||void 0===t?void 0:t.symbol.toUpperCase()))})).map((function(e){var t=e.address,n=e.symbol,r=e.discount,a=e.network,i=e.icon,s=Object(w.a)(e,S);return Object(c.a)({disabled:!Object(k.f)(Object(c.a)({address:t,symbol:n,discount:r},s),L[0],p,v,h),icon:i||(t?Object(A.a)(v?a:h.id,t):null),label:n,value:t||n},r?{extra:Object(I.jsxs)("div",{className:"discount",children:[" - ",100*r," ",Object(I.jsx)(d.e,{})," "]})}:{})})),z=p.feeInUSD?Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("div",{className:"section",children:[Object(I.jsx)("div",{className:"section-title",children:"Fee Currency"}),Object(I.jsx)(O.u,{className:"fee-select",disabled:s,defaultValue:(null===(n=p.selectedFeeToken)||void 0===n?void 0:n.address)||(null===(r=p.selectedFeeToken)||void 0===r?void 0:r.symbol),items:q,onChange:W})]})}):Object(I.jsx)(I.Fragment,{}),G=p.selectedFeeToken||{},H=G.discount,V=void 0===H?0:H,Y=G.symbol,$=G.nativeRate,J=void 0===$?null:$,Q=G.decimals,Z=function(e){return b((function(t){return Object(c.a)(Object(c.a)({},t),{},{customFee:e})}))};if(M){var X=L.filter((function(e,t){return Object(k.f)(p.selectedFeeToken,e,p,v,h)})),ee=X[X.length-1];y(ee)}var te=function(e){var t=!Object(k.f)(p.selectedFeeToken,e,p,v,h);return s||t},ne=L.map((function(e){var t="ETH"===Y&&"ETH"===D,n=Object(k.e)(Object(c.a)({},p.selectedFeeToken),Object(c.a)(Object(c.a)({},p),{},{customFee:null}),e,v,h),r=n.feeInFeeToken,a=n.feeInUSD,i=Object(k.c)(r,V),s=Object(k.c)(a,V),o=r+i,u=a?a+s:null,l=null!==J&&u;return Object(I.jsxs)("div",{className:"feeSquare".concat(p.customFee||m!==e?"":" selected").concat(te(e)?" disabled":""),onClick:function(){return!te(e)&&function(e){y(e),Z(null),F(!1)}(e)},children:[!!V&&Object(I.jsx)(d.e,{className:"discount-badge"}),Object(I.jsx)("div",{className:"speed",children:e}),Object(I.jsx)("div",{className:"feeEstimation",children:(t?"\u039e ":"")+(l?"$".concat(Object(E.a)(u,!0,4)):Object(E.a)(o,!0,Q))+(t||l?"":" ".concat(p.selectedFeeToken.symbol))}),!t&&!l&&Object(I.jsx)("div",{className:"feeEstimation symbol",children:p.selectedFeeToken.symbol})]},e)})),re=Object(k.e)(p.selectedFeeToken,p,m,v,h),ae=re.feeInFeeToken,ie=re.feeInUSD,se=re.savedGas,ce=Object(k.e)(Object(c.a)({},p.selectedFeeToken),Object(c.a)(Object(c.a)({},p),{},{customFee:null}),"slow",v,h),oe=ce.feeInFeeToken,ue=ce.feeInUSD,de=Object(k.e)(Object(c.a)({},p.selectedFeeToken),Object(c.a)(Object(c.a)({},p),{},{customFee:null}),"ape",v,h),le=de.feeInFeeToken,fe=de.feeInUSD,pe=Object(k.c)(oe,V),he=Object(k.c)(le,V),be=Object(k.c)(ae,V),me=Object(k.c)(ie,V),ye=Object(k.c)(ue,V),ge=Object(k.c)(fe,V),ve=ae+be,xe=ie+me,we=oe+pe,je=1.2*(le+he),Oe=ue+ye,ke=1.2*(fe+ge),Te=!!p.customFee&&!isNaN(parseFloat(p.customFee))&&ve<we,Ae=!!p.customFee&&!isNaN(parseFloat(p.customFee))&&ve>je;return Object(I.jsxs)(I.Fragment,{children:[M?Object(I.jsxs)("div",{className:"balance-error",children:["Insufficient balance for the fee.",Object(I.jsx)("br",{}),"Accepted tokens: ",(p.remainingFeeTokenBalances||[]).map((function(e){return e.symbol})).join(", "),v&&Object(I.jsx)("div",{children:"Disable your Gas Tank to use the default fee tokens."})]}):z,_({selectedFeeToken:p.selectedFeeToken,currenciesItems:q,tokens:K,estimation:p,onFeeCurrencyChange:W,onDismiss:g,feeSpeed:m,isGasTankEnabled:v,network:h}),Object(I.jsxs)("div",{className:"section-title",children:[Object(I.jsx)("span",{children:"Transaction Speed"}),h.isGasTankAvailable&&Object(I.jsxs)("span",{children:["Gas Tank: ",v?Object(I.jsx)("span",{className:"gas-tank-enabled",children:"Enabled"}):Object(I.jsx)("span",{className:"gas-tank-disabled",children:"Disabled"})]})]}),Object(I.jsxs)("div",{className:"fee-selector",children:[Object(I.jsxs)("div",{className:"section",children:[Object(I.jsx)("div",{id:"fee-selector",children:ne}),T?Object(I.jsxs)("div",{id:"custom-fee-selector",children:[Object(I.jsxs)("div",{className:"title",children:["Custom Fee (",Y,")"]}),Object(I.jsx)(O.x,{small:!0,placeholder:"Enter amount",className:"".concat(p.customFee?"selected":""),onChange:function(e){return Z(e)},value:p.customFee}),Te&&Object(I.jsxs)("div",{className:"price-warning",children:[Object(I.jsx)("div",{children:'Custom Fee too low. You can try to "sign and send" the transaction but most probably it will fail.'}),Object(I.jsxs)("div",{children:["Min estimated fee: \xa0",Object(I.jsxs)(O.e,{textOnly:!0,onClick:function(){return Z(we)},children:[we," ",Y]}),!isNaN(Oe)&&Object(I.jsxs)("span",{children:["\xa0 (~$",Object(E.a)(Oe,!0,4),") "]})]})]}),Ae&&Object(I.jsxs)("div",{className:"price-warning",children:[Object(I.jsx)("div",{children:"Custom Fee is higher than the APE speed. You will pay more than probably needed. Make sure you know what are you doing!"}),Object(I.jsxs)("div",{children:["Recommended max fee: \xa0",Object(I.jsxs)(O.e,{textOnly:!0,onClick:function(){return Z(je)},children:[je," ",Y]}),!isNaN(ke)&&Object(I.jsxs)("span",{children:["\xa0 (~$",Object(E.a)(ke,!0,4),") "]})]})]})]}):Object(I.jsxs)("div",{id:"edit-custom-fee",onClick:function(){return F(!0)},children:[Object(I.jsx)(l.l,{}),"Edit fee"]})]}),Object(I.jsxs)("div",{className:"fees-breakdown",children:[Object(I.jsxs)("div",{className:"fee-row native-fee-estimation",children:[Object(I.jsxs)("div",{children:["Fee ",!!V&&Object(I.jsx)("span",{className:"discount-label",children:"*"}),!(!V||!P.includes(null===(a=p.selectedFeeToken)||void 0===a?void 0:a.symbol))&&Object(I.jsxs)("a",{className:"address row discount-label",href:C,target:"_blank",rel:"noreferrer",children:["\xa0",Object(I.jsx)(l.q,{})]}),":"]}),Object(I.jsxs)("div",{className:"fee-amounts",children:[!isNaN(xe)&&Object(I.jsxs)("div",{children:["~$",Object(E.a)(xe,!0,4)]}),!isNaN(ve)&&Object(I.jsx)("div",{children:Object(E.a)(ve,!0,Q)+" "+(null===p||void 0===p||null===(i=p.selectedFeeToken)||void 0===i?void 0:i.symbol)})]})]}),!!V&&Object(I.jsxs)("div",{className:"fee-row native-fee-estimation discount-label",children:[Object(I.jsxs)("div",{children:["You save (",100*V,"%):"]}),Object(I.jsx)("div",{className:"fee-amounts",children:Object(I.jsxs)("div",{children:["~$",Object(E.a)(me,!0,4)]})})]}),!!V&&Object(I.jsxs)("div",{className:"fee-row native-fee-estimation discount-label",children:[Object(I.jsx)("div",{children:"You pay:"}),Object(I.jsx)("div",{className:"fee-amounts",children:Object(I.jsxs)("div",{children:["~$",Object(E.a)(ie,!0,4)]})})]}),!v&&!isNaN(ie/p.gasLimit*se)&&Object(I.jsxs)("div",{className:"fee-row native-fee-estimation discount-label",children:[Object(I.jsx)("div",{children:"Gas Tank Saves You:"}),Object(I.jsx)("div",{className:"fee-amounts",children:Object(I.jsxs)("div",{children:["$",Object(E.a)(ie/p.gasLimit*se,!0,4)]})})]}),!!v&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"fee-row native-fee-estimation discount-label",children:[Object(I.jsx)("div",{children:"Gas Tank fee token balance:"}),Object(I.jsx)("div",{className:"fee-amounts",children:Object(I.jsxs)("div",{children:["$",Object(E.a)(p.selectedFeeToken.balanceInUSD,!0,4)]})})]}),!isNaN(ie/p.gasLimit*se)&&Object(I.jsxs)("div",{className:"fee-row native-fee-estimation discount-label",children:[Object(I.jsx)("div",{children:"Gas Tank saves you:"}),Object(I.jsx)("div",{className:"fee-amounts",children:Object(I.jsxs)("div",{children:["$",Object(E.a)(ie/p.gasLimit*se,!0,4)]})})]})]})]})]}),p.feeInUSD?Object(I.jsx)(I.Fragment,{}):Object(I.jsxs)("span",{className:"no-relayer-msg",children:[Object(I.jsx)("b",{children:"WARNING:"})," Paying fees in tokens other than ",D," is unavailable because you are not connected to a relayer. You will pay the fee from ",Object(I.jsx)("b",{children:u.address}),"."]})]})}function U(e){var t=e.message,n=e.tooltip,r=void 0===n?"":n;return Object(I.jsx)("div",{className:"failingTxn",children:Object(I.jsxs)(O.z,{label:r,children:[Object(I.jsxs)("div",{className:"error-title",children:[Object(I.jsx)(j.i,{})," Warning"]}),Object(I.jsx)("div",{className:"error-message",children:t})]})})}function R(e){var t=e.estimation,n=e.feeSpeed,r=e.approveTxn,a=e.rejectTxn,i=e.cancelSigning,s=e.signingStatus,u=e.isGasTankEnabled,d=e.network,p=Object(f.useState)({code:"",passphrase:""}),h=Object(o.a)(p,2),b=h[0],m=h[1];Object(f.useEffect)((function(){return!s&&m((function(e){return Object(c.a)(Object(c.a)({},e),{},{code:""})}))}),[s]);var y=Object(f.useRef)(null),g=a&&Object(I.jsx)(O.e,{danger:!0,type:"button",className:"rejectTxn",onClick:a,children:"Reject"}),v=t&&t.feeInUSD&&!Object(k.f)(t.selectedFeeToken,n,t,u,d);if(t&&!t.success||v)return Object(I.jsx)("div",{className:"buttons",children:g});var x=s&&s.inProgress?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(O.m,{}),"Signing..."]}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(l.A,{}),"Sign and send"]}),w=s&&s.finalBundle&&s.finalBundle.recoveryMode;return s&&s.quickAcc?Object(I.jsxs)(I.Fragment,{children:[s.confCodeRequired?Object(I.jsxs)("div",{className:"confirmation-code-info",children:[Object(I.jsxs)("div",{className:"confirmation-code-info-title",children:[Object(I.jsx)(l.g,{}),"Confirmation"]}),Object(I.jsxs)("div",{className:"confirmation-code-info-message",children:["otp"===s.confCodeRequired?Object(I.jsx)(I.Fragment,{children:"Please enter your OTP code and your password."}):null,"email"===s.confCodeRequired?w?Object(I.jsx)(I.Fragment,{children:"A confirmation code was sent to your email, please enter it to initiate the recovery."}):Object(I.jsx)(I.Fragment,{children:"A confirmation code was sent to your email, please enter it along with your password."}):null]})]}):null,Object(I.jsxs)("form",{ref:y,className:"quickAccSigningForm",onSubmit:function(e){e.preventDefault()},children:["notRequired"===s.confCodeRequired&&Object(I.jsx)("p",{className:"code-2fa-not-required-msg",children:"You already sent 3 or more transactions to this address, confirmation code is not needed."}),Object(I.jsxs)("div",{className:"inputs-container",children:[Object(I.jsx)(O.x,{small:!0,password:!0,required:!0,minLength:3,placeholder:"Password",value:b.passphrase,style:w?{visibility:"hidden"}:{},disabled:w,onChange:function(e){return m(Object(c.a)(Object(c.a)({},b),{},{passphrase:e}))}}),"notRequired"!==s.confCodeRequired&&Object(I.jsx)(O.x,{small:!0,pattern:"[0-9]+",title:"Confirmation code should be 6 digits",autoComplete:"nope",required:!0,minLength:6,maxLength:6,placeholder:"otp"===s.confCodeRequired?"Authenticator OTP code":"Confirmation code",value:b.code,onChange:function(e){return m(Object(c.a)(Object(c.a)({},b),{},{code:e}))}})]}),Object(I.jsxs)("div",{className:"buttons",children:[Object(I.jsx)(O.e,{clear:!0,disabled:s&&s.inProgress,icon:Object(I.jsx)(l.B,{}),type:"button",className:"cancelSigning buttonComponent",onClick:i,children:"Cancel"}),Object(I.jsx)(O.e,{className:"confirmSigning buttonComponent",onClick:function(){y.current.checkValidity()&&r({quickAccCredentials:b})},children:s&&s.inProgress?Object(I.jsx)(O.m,{}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(l.f,{})," Confirm"]})})]})]})]}):Object(I.jsxs)("div",{className:"buttons",children:[g,Object(I.jsx)(O.e,{className:"approveTxn",disabled:!t||s,onClick:r,children:x})]})}var D=n(733),B=new b.Interface(n(327)),K=new b.Interface(n(1542));function W(e){return q.apply(this,arguments)}function q(){return(q=Object(i.a)(a.a.mark((function e(t){var n,r,i,s,c,o,u,d,l,f,p,h,m,y,g,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.finalBundle,r=t.account,i=t.network,s=t.wallet,c=t.estimation,o=t.feeSpeed,u=t.provider,!(d=n.signer).quickAccManager){e.next=4;break}throw new Error("quickAccManager not supported in relayerless mode yet");case 4:return e.next=6,u.getCode(n.identity).then((function(e){return"0x"!==e}));case 6:if(!e.sent){e.next=13;break}l=c.gasLimit+2e4,f=n.identity,p=B.encodeFunctionData("executeBySender",[n.txns]),e.next=24;break;case 13:return e.next=15,n.getNonce(u);case 15:return n.gasLimit=4e5,e.next=18,n.sign(s);case 18:return f=r.identityFactoryAddr,p=K.encodeFunctionData("deployAndExecute",[r.bytecode,r.salt,n.txns,n.signature]),e.next=22,u.estimateGas({to:f,data:p,from:d.address});case 22:e.t0=e.sent.toNumber(),l=e.t0+2e4;case 24:return e.t1=d.address,e.t2=f,e.t3=p,e.t4=Object(b.hexlify)(l),e.t5=Object(b.hexlify)(Math.floor(c.feeInNative[o]/c.gasLimit*1e18)),e.t6=b.hexlify,e.next=32,u.getTransactionCount(d.address);case 32:if(e.t7=e.sent,e.t8=(0,e.t6)(e.t7),h={from:e.t1,to:e.t2,data:e.t3,gas:e.t4,gasPrice:e.t5,nonce:e.t8},e.prev=35,s.sendTransaction){e.next=45;break}return e.next=39,s.signTransaction(h);case 39:return y=e.sent,e.next=42,u.sendTransaction(y);case 42:m=e.sent.hash,e.next=60;break;case 45:if(!s.provider){e.next=57;break}return e.next=48,s.provider.getNetwork();case 48:if(g=e.sent,v=g.chainId,i.chainId===v){e.next=52;break}throw new Error("Connected to the wrong network: please switch to ".concat(i.name));case 52:return e.next=54,s.sendTransaction({from:h.from,to:h.to,data:h.data,gasPrice:h.gasPrice,nonce:h.nonce});case 54:m=e.sent.hash,e.next=60;break;case 57:return e.next=59,s.sendTransaction({from:h.from,to:h.to,data:h.data,gasPrice:h.gasPrice,gas:h.gas,nonce:h.nonce,chainId:i.chainId});case 59:m=e.sent.hash;case 60:return e.abrupt("return",{success:!0,txId:m});case 63:if(e.prev=63,e.t9=e.catch(35),"INSUFFICIENT_FUNDS"!==e.t9.code){e.next=67;break}throw new Error("Insufficient gas fees: you need to have ".concat(i.nativeAssetSymbol," on ").concat(d.address));case 67:throw e.t9;case 68:case"end":return e.stop()}}),e,null,[[35,63]])})))).apply(this,arguments)}var z=n(94),G=n(763),H=n(76),V=new b.Interface(n(512)),Y="Ambire user rejected the request",$=["xWALLET","WALLET"],J=function(e){return!isNaN(e)&&null!==e},Q=function(e,t,n,r,a){return(null===e||void 0===e?void 0:e.length)?e.sort((function(e,t){return $.indexOf(null===t||void 0===t?void 0:t.symbol)-$.indexOf(null===e||void 0===e?void 0:e.symbol)||((null===t||void 0===t?void 0:t.discount)||0)-((null===e||void 0===e?void 0:e.discount)||0)||(null===e||void 0===e?void 0:e.symbol.toUpperCase().localeCompare(null===t||void 0===t?void 0:t.symbol.toUpperCase()))})).find((function(e){return Object(k.f)(e,n,r,a,t)}))||e[0]:{symbol:t.nativeAssetSymbol,decimals:18,address:"0x0000000000000000000000000000000000000000"}};function Z(e){return e&&"NOT_TIME"===e.message?"Your 72 hour recovery waiting period still hasn't ended. You will be able to use your account after this lock period.":e&&"WRONG_ACC_OR_NO_PRIV"===e.message?"Unable to sign with this email/password account. Please contact support.":e&&"INVALID_SIGNATURE"===e.message?"Invalid signature. This may happen if you used password/derivation path on your hardware wallet.":e&&"INSUFFICIENT_PRIVILEGE"===e.message?"Wrong signature. This may happen if you used password/derivation path on your hardware wallet.":e.message||e}function X(e){var t=e.relayerURL,n=e.accounts,r=e.network,a=e.selectedAcc,i=e.requests,s=e.resolveMany,c=e.replacementBundle,o=e.replaceByDefault,u=e.mustReplaceNonce,d=e.onBroadcastedTxn,l=e.onDismiss,h=e.gasTankState,b=n.find((function(e){return e.id===a})),m=Object(f.useMemo)((function(){return i.filter((function(e){var t=e.type,n=e.chainId,i=e.account,s=e.txn;return"eth_sendTransaction"===t&&n===r.chainId&&i===a&&s&&(!s.from||s.from.toLowerCase()===a.toLowerCase())}))}),[i.map((function(e){return e.id})).join(","),r.chainId,a]),y=Object(f.useMemo)((function(){return c||function(e,t,n){var r=new p.Bundle({network:t,identity:e.id,txns:n.map((function(t){var n=t.txn;return Object(G.a)(Array.isArray(n)?n[0]:n,e.id)})),signer:e.signer});if(r.extraGas=n.map((function(e){return e.extraGas||0})).reduce((function(e,t){return e+t}),0),r.requestIds=n.map((function(e){return e.id})),n.some((function(e){return e.meta}))){r.meta={},n.some((function(e){var t;return null===(t=e.meta)||void 0===t?void 0:t.addressLabel}))&&(r.meta.addressLabel=n.map((function(e){var t;return(null===(t=e.meta)||void 0===t?void 0:t.addressLabel)?e.meta.addressLabel:{addressLabel:"",address:""}})));var a=n.find((function(e){var t;return null===(t=e.meta)||void 0===t?void 0:t.xWallet}));a&&(r.meta.xWallet=a.meta.xWallet)}return r}(b,r.id,m)}),[c,r.id,b,m]);return b&&y.txns.length?Object(I.jsx)(ee,{relayerURL:t,bundle:y,replaceByDefault:o,mustReplaceNonce:u,network:r,account:b,resolveMany:s,onBroadcastedTxn:d,onDismiss:l,gasTankState:h}):Object(I.jsx)("div",{id:"sendTransaction",children:Object(I.jsx)("h3",{className:"error",children:"SendTransactions: No account or no requests: should never happen."})})}function ee(e){var t,n,r,b=e.bundle,w=e.replaceByDefault,j=e.mustReplaceNonce,T=e.network,A=e.account,E=e.resolveMany,S=e.relayerURL,L=e.onBroadcastedTxn,C=e.onDismiss,P=e.gasTankState,F=T.isGasTankAvailable?P.find((function(e){return e.account===A.id})):{account:A.id,isEnabled:!1},_=Object(f.useState)(null),B=Object(o.a)(_,2),K=B[0],q=B[1],G=Object(f.useState)(!!w),$=Object(o.a)(G,2),X=$[0],ee=$[1],te=Object(f.useState)(!1),ne=Object(o.a)(te,2),re=ne[0],ae=ne[1],ie=Object(f.useState)("fast"),se=Object(o.a)(ie,2),ce=se[0],oe=se[1],ue=Object(y.a)().addToast;!J(j)||w||J(b.nonce)||(console.error("ERROR: SendTransactionWithBundle: mustReplaceNonce is set but we are not using replacementBundle or replaceByDefault"),console.error("ERROR: SendTransactionWithBundle: This is a huge logical error as mustReplaceNonce is intended to be used only when we want to replace a txn"));var de=Object(f.useRef)(!1);Object(f.useEffect)((function(){return de.current=!0,function(){de.current=!1}})),Object(f.useEffect)((function(){b.txns.length&&q(null)}),[b,q]);var le=Object(f.useRef)(null);le.current=b,Object(f.useEffect)((function(){if(!re&&b.txns.length){var e=!1,t=function(){return(S?b.estimate({relayerURL:S,fetch:fetch,replacing:!!b.minFeeInUSDPerGas,getNextNonce:!0,gasTank:F.isEnabled}):b.estimateNoRelayer({provider:Object(H.a)(T.id)})).then((function(t){var n;if(!e&&b===le.current){t.relayerless=!S;var r=null===(n=t.gasTank)||void 0===n?void 0:n.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{symbol:e.symbol.toUpperCase(),balance:N.ethers.utils.parseUnits(e.balance.toFixed(e.decimals).toString(),e.decimals).toString(),nativeRate:"0x0000000000000000000000000000000000000000"===e.address?null:t.nativeAssetPriceInUSD/e.price})}));F.isEnabled&&(t.remainingFeeTokenBalances=r),t.selectedFeeToken=Q(t.remainingFeeTokenBalances,T,ce,t,F.isEnabled),q((function(e){return e&&e.customFee?e:(t.remainingFeeTokenBalances&&(t.selectedFeeToken=e&&Object(k.f)(e.selectedFeeToken,ce,t,F.isEnabled,T)&&e.selectedFeeToken||Q(t.remainingFeeTokenBalances,T,ce,t,F.isEnabled)),t)}))}})).catch((function(t){e||(console.log("estimation error",t),ue("Estimation error: ".concat(t.message||t),{error:!0}))}))};t();var n=setInterval(t,15e3);return function(){e=!0,clearInterval(n)}}}),[b,q,ce,ue,T,S,re,F.isEnabled]);var fe=Object(f.useCallback)((function(){var e,t;if(!S)return new p.Bundle(Object(c.a)(Object(c.a)({},b),{},{gasLimit:K.gasLimit}));var n=K.selectedFeeToken,r=Object(k.e)(n,K,ce,F.isEnabled,T),a=r.feeInNative,i=r.feeInFeeToken,o=r.addedGas,u=n.symbol===T.nativeAssetSymbol?[v.a.feeCollector,Object(k.h)(a,18),"0x"]:[n.address,"0x0",V.encodeFunctionData("transfer",[v.a.feeCollector,Object(k.h)(i,n.decimals)])],d=null===(e=K.nextNonce)||void 0===e?void 0:e.nonce,l=null===(t=K.nextNonce)||void 0===t?void 0:t.nextNonMinedNonce,f=J(b.nonce)?b.nonce:X?l:d;if(F.isEnabled){var h,m;if(h=b.txns.length>1?K.gasLimit+(b.extraGas||0):K.gasLimit,"0x0000000000000000000000000000000000000000"===n.address)m=a;else{var y=K.remainingFeeTokenBalances.find((function(e){return e.id===n.id}));m=y&&K.feeInNative[ce]*y.nativeRate}return new p.Bundle(Object(c.a)(Object(c.a)({},b),{},{gasTankFee:{assetId:n.id,value:N.ethers.utils.parseUnits(m.toFixed(n.decimals),n.decimals).toString()},txns:Object(s.a)(b.txns),gasLimit:h,nonce:f}))}return new p.Bundle(Object(c.a)(Object(c.a)({},b),{},{txns:[].concat(Object(s.a)(b.txns),[u]),gasTankFee:null,gasLimit:K.gasLimit+o+(b.extraGas||0),nonce:f}))}),[S,K,ce,F.isEnabled,T,b,X]),pe=function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K){e.next=2;break}throw new Error("no estimation: should never happen");case 2:if(t=fe(),n=Object(H.a)(T.id),r=t.signer,ae({inProgress:!0,finalBundle:t}),i=Object(g.a)({signer:r,signerExtra:A.signerExtra,chainId:T.chainId}),!S){e.next=15;break}return e.next=10,t.sign(i);case 10:return e.next=12,t.submit({relayerURL:S,fetch:fetch});case 12:case 17:return e.abrupt("return",e.sent);case 15:return e.next=17,W({finalBundle:t,account:A,network:T,wallet:i,estimation:K,feeSpeed:ce,provider:n});case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,s,o,u,d,l,f,p,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.quickAccCredentials,K){e.next=3;break}throw new Error("no estimation: should never happen");case 3:if(S){e.next=5;break}throw new Error("Email/Password account signing without the relayer is not supported yet");case 5:return r=re&&re.finalBundle||fe(),i=r.signer,s=re&&"notRequired"===re.confCodeRequired,e.next=10,Object(z.d)("".concat(S,"/second-key/").concat(b.identity,"/").concat(T.id,"/sign"),Object(c.a)(Object(c.a)({signer:i,txns:r.txns,nonce:r.nonce,gasLimit:r.gasLimit},!s&&{code:n&&n.code}),{},{recoveryMode:r.recoveryMode,canSkip2FA:s}));case 10:if(o=e.sent,u=o.signature,d=o.success,l=o.message,f=o.confCodeRequired,d){e.next=22;break}if(l){e.next=18;break}throw new Error("Secondary key: no success but no error message");case 18:if(!l.includes("invalid confirmation code")){e.next=21;break}return ue("Unable to sign: wrong confirmation code",{error:!0}),e.abrupt("return");case 21:throw new Error("Secondary key error: ".concat(l));case 22:if(!f){e.next=26;break}ae({quickAcc:!0,finalBundle:r,confCodeRequired:f}),e.next=47;break;case 26:if(u){e.next=28;break}throw new Error("QuickAcc internal error: there should be a signature");case 28:if(A.primaryKeyBackup){e.next=30;break}throw new Error("No key backup found: you need to import the account from JSON or login again.");case 30:if(ae({quickAcc:!0,inProgress:!0,confCodeRequired:s?"notRequired":void 0}),r.recoveryMode){e.next=42;break}return e.next=34,new Promise((function(e){return setTimeout(e,0)}));case 34:return p=n.passphrase||alert("Enter password"),e.next=37,h.Wallet.fromEncryptedJson(JSON.parse(A.primaryKeyBackup),p);case 37:return m=e.sent,e.next=40,r.sign(m);case 40:e.next=43;break;case 42:r.signature=u;case 43:return r.signatureTwo=u,e.next=46,r.submit({relayerURL:S,fetch:fetch});case 46:return e.abrupt("return",e.sent);case 47:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){C(),b.requestIds&&E(b.requestIds,{message:Y})},me=m.create({seed:A.id}).toDataURL(),ye=!J(j)||(J(null===K||void 0===K||null===(t=K.nextNonce)||void 0===t?void 0:t.nextNonMinedNonce)?j>=(null===K||void 0===K||null===(n=K.nextNonce)||void 0===n?void 0:n.nextNonMinedNonce):null);return Object(I.jsxs)("div",{id:"sendTransaction",children:[Object(I.jsx)("div",{id:"titleBar",children:Object(I.jsxs)("div",{className:"dismiss",onClick:C,children:[Object(I.jsx)(d.c,{size:35}),"back",Object(I.jsx)(O.z,{label:"You can go back to the main dashboard and add more transactions to this bundle in order to sign & send them all at once.",children:Object(I.jsx)(l.F,{size:25})})]})}),Object(I.jsxs)("div",{className:"container",children:[Object(I.jsxs)("div",{id:"transactionPanel",className:"panel",children:[Object(I.jsx)("div",{className:"heading",children:Object(I.jsxs)("div",{className:"title",children:[b.txns.length," Transaction",b.txns.length>1?"s":""," Waiting"]})}),Object(I.jsxs)("div",{className:"content",children:[Object(I.jsx)("div",{className:"listOfTransactions".concat(b.requestIds?"":" frozen"),children:b.txns.map((function(e,t){var n=K&&!K.success&&K.firstFailing===t,r=Math.floor(Date.now()/3e4);return Object(I.jsx)(D.a,{minute:r,onDismiss:b.requestIds&&function(){return E([b.requestIds[t]],{message:Y})},txn:e,network:b.network,account:b.identity,isFirstFailing:n,disableDismiss:!!re,disableDismissLabel:"Cannot modify transaction bundle while a signing procedure is pending",addressLabel:!!b.meta&&b.meta.addressLabel},[].concat(Object(s.a)(e),[t]).join(":"))}))}),Object(I.jsx)("div",{className:"separator"}),Object(I.jsx)("div",{className:"transactionsNote",children:b.requestIds&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("b",{children:[Object(I.jsx)(u.b,{size:16})," DEGEN TIP"]}),Object(I.jsx)("span",{children:'You can sign multiple transactions at once. Add more transactions to this batch by interacting with a connected dApp right now. Alternatively, you may click "Back" to add more transactions.'})]})})]})]}),Object(I.jsxs)("div",{id:"detailsPanel",className:"panel",children:[Object(I.jsxs)("div",{id:"options-container",children:[Object(I.jsxs)("div",{className:"section",id:"signing-details",children:[Object(I.jsx)("div",{className:"section-title",children:"Signing With"}),Object(I.jsxs)("div",{className:"section-content",children:[Object(I.jsxs)("div",{className:"account",children:[Object(I.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(me,")")}}),Object(I.jsx)("div",{className:"address",children:A.id})]}),Object(I.jsxs)("div",{className:"network",children:["on",Object(I.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(x.b[T.id],")")}}),Object(I.jsx)("div",{className:"address",children:T.name})]})]})]}),ye&&Object(I.jsx)(M,{disabled:re&&re.finalBundle&&!(K&&!K.success),signer:b.signer,estimation:K,setEstimation:q,network:T,feeSpeed:ce,setFeeSpeed:oe,onDismiss:C,isGasTankEnabled:F.isEnabled&&!!S})]}),!J(b.nonce)&&!J(j)&&!!(null===K||void 0===K||null===(r=K.nextNonce)||void 0===r?void 0:r.pendingBundle)&&Object(I.jsx)("div",{children:Object(I.jsx)(O.g,{label:"Replace currently pending transaction",checked:X,onChange:function(e){var t=e.target;return ee(t.checked)}})}),J(j)&&Object(I.jsxs)(I.Fragment,{children:[(ye||null===ye)&&Object(I.jsxs)("div",{className:"replaceInfo warning",children:[Object(I.jsx)(l.U,{}),Object(I.jsx)("span",{children:"This transaction bundle will replace the one that's currently pending."})]}),null===ye&&Object(I.jsx)("div",{children:Object(I.jsx)(O.m,{})}),!1===ye&&Object(I.jsxs)("div",{id:"actions-container-replace",children:[Object(I.jsxs)("div",{className:"replaceInfo info",children:[Object(I.jsx)(l.p,{}),Object(I.jsx)("span",{children:"The transaction you're trying to replace has already been confirmed"})]}),Object(I.jsx)("div",{className:"buttons",children:Object(I.jsx)(O.e,{clear:!0,icon:Object(I.jsx)(l.B,{}),type:"button",className:"rejectTxn buttonComponent",onClick:be,children:"Close"})})]})]}),ye&&Object(I.jsxs)(I.Fragment,{children:[K&&K.success&&!1===K.isDeployed&&b.gasLimit?Object(I.jsxs)("div",{className:"first-tx-note",children:[Object(I.jsxs)("div",{className:"first-tx-note-title",children:[Object(I.jsx)(l.p,{}),"Note"]}),Object(I.jsxs)("div",{className:"first-tx-note-message",children:["Because this is your first Ambire transaction, this fee is ",(6e4/b.gasLimit*100).toFixed(),"% higher than usual because we have to deploy your smart wallet. Subsequent transactions will be cheaper"]})]}):null,Object(I.jsx)("div",{id:"actions-container",children:b.signer.quickAccManager&&!S?Object(I.jsx)(U,{message:"Signing transactions with an email/password account without being connected to the relayer is unsupported."}):Object(I.jsx)("div",{className:"section",id:"actions",children:Object(I.jsx)(R,{estimation:K,approveTxn:function(e){var t=e.quickAccCredentials;if(!re||!re.inProgress){ae(re||{inProgress:!0}),A.signerExtra&&"ledger"===A.signerExtra.type&&ue("Please confirm this transaction on your Ledger device.",{timeout:1e4}),A.signerExtra&&"Lattice"===A.signerExtra.type&&ue("Please confirm this transaction on your Lattice device.",{timeout:1e4});var n=b.requestIds;(b.signer.quickAccManager?he({quickAccCredentials:t}):pe()).then((function(e){e&&(de.current&&ae(null),!(!e.success&&e.message&&e.message.match(/underpriced/i))&&n&&E(n,{success:e.success,result:e.txId,message:e.message}),e.success?(L(e.txId),C()):(e.message.includes("was already mined")&&C(),ue("Transaction error: ".concat(Z(e)),{error:!0})))})).catch((function(e){de.current&&ae(null),console.error(e),e&&e.message.includes("must provide an Ethereum address")?ue("Signing error: not connected with the correct address. Make sure you're connected with ".concat(b.signer.address,"."),{error:!0}):e&&e.message.includes("0x6b0c")?ue("Ledger: unknown error (0x6b0c): is your Ledger unlocked and in the Ethereum application?",{error:!0}):ue("Signing error: ".concat(Z(e)),{error:!0})}))}},rejectTxn:be,cancelSigning:function(){return ae(null)},signingStatus:re,feeSpeed:ce,isGasTankEnabled:F.isEnabled&&!!S,network:T})})})]})]})]})]})}},497:function(e,t,n){(function(t){var r=n(496).BN;function a(e){if("string"!==typeof e||42!==e.length||!e.startsWith("0x"))throw new Error("invalid address: must start with a 0x and be 42 characters long");return e}function i(e){if("string"===typeof e&&e.startsWith("0x")&&66===e.length)return t.from(e.slice(2),"hex");if(32!==e.length||!t.isBuffer(e))throw new Error("32 byte Buffer expected");return e}e.exports={Uint256:function(e){var t=new r(e,10);if(t.isNeg())throw new Error("uint256 expected, negative number given");return t},Bytes32:i,Address:a,Bytes:function(e){if("string"===typeof e&&e.startsWith("0x"))return t.from(e.slice(2),"hex");if(!t.isBuffer(e))throw new Error("Buffer expected");return e},Bytes32Array:function(e,t){return(-1===t||void 0===t||e.length===t)&&e.map((function(e){return i(e)}))},Channel:function(e){return a(e.leader),a(e.follower),a(e.guardian),a(e.tokenAddr),i(e.nonce),e}}}).call(this,n(28).Buffer)},501:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.baToJSON=t.addHexPrefix=t.toUnsigned=t.fromSigned=t.bufferToHex=t.bufferToInt=t.toBuffer=t.stripZeros=t.unpad=t.setLengthRight=t.setLength=t.setLengthLeft=t.zeros=void 0;var r=n(499),a=n(496);t.zeros=function(t){return e.allocUnsafe(t).fill(0)},t.setLengthLeft=function(e,n,r){void 0===r&&(r=!1);var a=t.zeros(n);return e=t.toBuffer(e),r?e.length<n?(e.copy(a),a):e.slice(0,n):e.length<n?(e.copy(a,n-e.length),a):e.slice(-n)},t.setLength=t.setLengthLeft,t.setLengthRight=function(e,n){return t.setLength(e,n,!0)},t.unpad=function(e){for(var t=(e=r.stripHexPrefix(e))[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e},t.stripZeros=t.unpad,t.toBuffer=function(t){if(!e.isBuffer(t))if(Array.isArray(t))t=e.from(t);else if("string"===typeof t){if(!r.isHexString(t))throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+t);t=e.from(r.padToEven(r.stripHexPrefix(t)),"hex")}else if("number"===typeof t)t=r.intToBuffer(t);else if(null===t||void 0===t)t=e.allocUnsafe(0);else if(a.isBN(t))t=t.toArrayLike(e);else{if(!t.toArray)throw new Error("invalid type");t=e.from(t.toArray())}return t},t.bufferToInt=function(e){return new a(t.toBuffer(e)).toNumber()},t.bufferToHex=function(e){return"0x"+(e=t.toBuffer(e)).toString("hex")},t.fromSigned=function(e){return new a(e).fromTwos(256)},t.toUnsigned=function(t){return e.from(t.toTwos(256).toArray())},t.addHexPrefix=function(e){return"string"!==typeof e||r.isHexPrefixed(e)?e:"0x"+e},t.baToJSON=function(n){if(e.isBuffer(n))return"0x"+n.toString("hex");if(n instanceof Array){for(var r=[],a=0;a<n.length;a++)r.push(t.baToJSON(n[a]));return r}}}).call(this,n(28).Buffer)},502:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r={"0xb468a1e5596cfbcdf561f21a10490d99b4bb7b68":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg/220px-Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg","0x88800092ff476844f74dc2fc427974bbee2794ae":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/ambire_logo_white_bg_250x250.png","0x47cd7e91c3cbaaf266369fe8518345fc4fc12935":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png","0xb6456b57f03352be48bf101b46c1752a0813491a":"https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/vaporwave-adex-2.png","0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c":"https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/ADX-loyalty%40256x256.png","0xec3b10ce9cabab5dbf49f946a623e294963fbb4e":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png","0xe9415e904143e42007865e6864f7f632bd054a08":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/Ambire_logo_250x250.png","0xade00c28244d5ce17d72e40330b1c318cd12b7c3":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/official-logos/Ambire-AdEx/Ambire_AdEx_Symbol_color_white_bg.png"},a="https://storage.googleapis.com/zapper-fi-assets/tokens";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.toLowerCase(),i=e.toLowerCase();return r[n]||"".concat(a,"/").concat(i,"/").concat(n,".png")}},512:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},515:function(e,t,n){"use strict";function r(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18;if(isNaN(e)||isNaN(parseFloat(e))||"number"!==typeof e&&"string"!==typeof e)return e;try{var r=Math.min(2,n||0);return("number"===typeof e?e:parseFloat(e)).toLocaleString(void 0,{useGrouping:t,maximumFractionDigits:Math.max(r,n),minimumFractionDigits:r})}catch(a){return console.error(a),e}}n.d(t,"a",(function(){return r}))},518:function(e,t,n){e.exports=n(610)},519:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ecdhUnsafe=t.ecdh=t.recover=t.verify=t.sign=t.signatureImportLax=t.signatureImport=t.signatureExport=t.signatureNormalize=t.publicKeyCombine=t.publicKeyTweakMul=t.publicKeyTweakAdd=t.publicKeyVerify=t.publicKeyConvert=t.publicKeyCreate=t.privateKeyTweakMul=t.privateKeyTweakAdd=t.privateKeyModInverse=t.privateKeyNegate=t.privateKeyImport=t.privateKeyExport=t.privateKeyVerify=void 0;var r=n(206),a=n(612),i=n(613);t.privateKeyVerify=function(e){return 32===e.length&&r.privateKeyVerify(Uint8Array.from(e))},t.privateKeyExport=function(e,t){if(32!==e.length)throw new RangeError("private key length is invalid");var n=a.privateKeyExport(e,t);return i.privateKeyExport(e,n,t)},t.privateKeyImport=function(e){if(null!==(e=i.privateKeyImport(e))&&32===e.length&&t.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")},t.privateKeyNegate=function(t){return e.from(r.privateKeyNegate(Uint8Array.from(t)))},t.privateKeyModInverse=function(t){if(32!==t.length)throw new Error("private key length is invalid");return e.from(a.privateKeyModInverse(Uint8Array.from(t)))},t.privateKeyTweakAdd=function(t,n){return e.from(r.privateKeyTweakAdd(Uint8Array.from(t),n))},t.privateKeyTweakMul=function(t,n){return e.from(r.privateKeyTweakMul(Uint8Array.from(t),Uint8Array.from(n)))},t.publicKeyCreate=function(t,n){return e.from(r.publicKeyCreate(Uint8Array.from(t),n))},t.publicKeyConvert=function(t,n){return e.from(r.publicKeyConvert(Uint8Array.from(t),n))},t.publicKeyVerify=function(e){return(33===e.length||65===e.length)&&r.publicKeyVerify(Uint8Array.from(e))},t.publicKeyTweakAdd=function(t,n,a){return e.from(r.publicKeyTweakAdd(Uint8Array.from(t),Uint8Array.from(n),a))},t.publicKeyTweakMul=function(t,n,a){return e.from(r.publicKeyTweakMul(Uint8Array.from(t),Uint8Array.from(n),a))},t.publicKeyCombine=function(t,n){var a=[];return t.forEach((function(e){a.push(Uint8Array.from(e))})),e.from(r.publicKeyCombine(a,n))},t.signatureNormalize=function(t){return e.from(r.signatureNormalize(Uint8Array.from(t)))},t.signatureExport=function(t){return e.from(r.signatureExport(Uint8Array.from(t)))},t.signatureImport=function(t){return e.from(r.signatureImport(Uint8Array.from(t)))},t.signatureImportLax=function(e){if(0===e.length)throw new RangeError("signature length is invalid");var t=i.signatureImportLax(e);if(null===t)throw new Error("couldn't parse DER signature");return a.signatureImport(t)},t.sign=function(t,n,a){if(null===a)throw new TypeError("options should be an Object");var i=void 0;if(a){if(i={},null===a.data)throw new TypeError("options.data should be a Buffer");if(a.data){if(32!=a.data.length)throw new RangeError("options.data length is invalid");i.data=new Uint8Array(a.data)}if(null===a.noncefn)throw new TypeError("options.noncefn should be a Function");a.noncefn&&(i.noncefn=function(t,n,r,i,s){var c=null!=r?e.from(r):null,o=null!=i?e.from(i):null,u=e.from("");return a.noncefn&&(u=a.noncefn(e.from(t),e.from(n),c,o,s)),new Uint8Array(u)})}var s=r.ecdsaSign(Uint8Array.from(t),Uint8Array.from(n),i);return{signature:e.from(s.signature),recovery:s.recid}},t.verify=function(e,t,n){return r.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),n)},t.recover=function(t,n,a,i){return e.from(r.ecdsaRecover(Uint8Array.from(n),a,Uint8Array.from(t),i))},t.ecdh=function(t,n){return e.from(r.ecdh(Uint8Array.from(t),Uint8Array.from(n),{}))},t.ecdhUnsafe=function(t,n,r){if(33!==t.length&&65!==t.length)throw new RangeError("public key length is invalid");if(32!==n.length)throw new RangeError("private key length is invalid");return e.from(a.ecdhUnsafe(Uint8Array.from(t),Uint8Array.from(n),r))}}).call(this,n(28).Buffer)},520:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.rlphash=t.ripemd160=t.sha256=t.keccak256=t.keccak=void 0;var r=n(326),a=r.keccak224,i=r.keccak384,s=r.keccak256,c=r.keccak512,o=n(325),u=n(499),d=n(323),l=n(501);t.keccak=function(t,n){switch(void 0===n&&(n=256),t="string"!==typeof t||u.isHexString(t)?l.toBuffer(t):e.from(t,"utf8"),n||(n=256),n){case 224:return a(t);case 256:return s(t);case 384:return i(t);case 512:return c(t);default:throw new Error("Invald algorithm: keccak"+n)}},t.keccak256=function(e){return t.keccak(e)},t.sha256=function(e){return e=l.toBuffer(e),o("sha256").update(e).digest()},t.ripemd160=function(e,t){e=l.toBuffer(e);var n=o("rmd160").update(e).digest();return!0===t?l.setLength(n,32):n},t.rlphash=function(e){return t.keccak(d.encode(e))}}).call(this,n(28).Buffer)},526:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return b})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return v}));var r=n(7),a=n(2),i=n.n(a),s=n(12),c=n(543),o=n(55),u=n(530),d=n(524),l=2147483648,f={startPath:[2147483692,2147483708,l,0,0],n:10},p=function(e){var t={name:"Ambire Wallet",crypto:d,privKey:e};return new c.Client(t)},h=function(){var e=Object(s.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){t.connect(n,(function(t,n){t?r("Lattice connect: ".concat(t," Or check if the DeviceID is correct.")):e({isPaired:!!n,errConnect:!1})}))})).catch((function(e){return console.error(e),{isPaired:!1,errConnect:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(s.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){t.pair(n,(function(t,n){t?r("Lattice connect: ".concat(t)):e({hasActiveWallet:n,errPair:!1})}))})).catch((function(e){return console.error(e),{hasActiveWallet:!1,errPair:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(s.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){t.getAddresses(f,(function(t,r){if(t)n("Lattice get addresses: ".concat(t));else{if(!r)throw new Error("Lattice could not get the addresses.");e({res:r,errGetAddresses:!1})}}))})).catch((function(e){return console.error(e),{res:null,errGetAddresses:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={protocol:"signPersonal",payload:o.ethers.utils.hexlify(n),signerPath:[2147483692,2147483708,l,0,0]},a={currency:"ETH_MSG",data:r},e.next=4,new Promise((function(e,n){t.sign(a,(function(t,r){if(t)n(t);else{if(!r)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+r.sig.r+r.sig.s+r.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={currency:"ETH_MSG",data:{signerPath:[2147483692,2147483708,l,0,0],protocol:"eip712",payload:n}},e.next=3,new Promise((function(e,n){t.sign(r,(function(t,r){if(t)n(t);else{if(!r)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+r.sig.r+r.sig.s+r.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(s.a)(i.a.mark((function e(t,n,a){var s,c,o,d,f,p,h,b,m,y;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.to,c=n.data,o=n.gas,d=n.gasPrice,f=n.nonce,p=n.value,h=void 0===p?0:p,delete(b=Object(r.a)(Object(r.a)({},n),{},{gasLimit:n.gasLimit||n.gas,chainId:a})).from,delete b.gas,m={nonce:f,gasLimit:o||n.gasLimit,gasPrice:d,to:s,value:h,data:c||"",signerPath:[2147483692,2147483708,l,0,0],chainId:a,useEIP155:!0},y={currency:"ETH",data:m},e.next=8,new Promise((function(e,n){t.sign(y,(function(t,r){if(t)n(t);else{if(!r)throw new Error("Lattice could not sign the message.");delete b.v;var a=Object(u.a)(b,{r:"0x"+r.sig.r,s:"0x"+r.sig.s,v:r.sig.v[0].toString(16)});e({serializedSigned:a,errSignTxn:!1})}}))})).catch((function(e){return console.error(e),{serializedSigned:null,errSignTxn:e}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},528:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(2),a=n.n(r),i=n(12),s=n(7),c=n(568),o=n(620),u=n.n(o),d=n(55),l=n(516),f=n.n(l),p=n(579),h=n(600),b=n(535),m=n(526),y=n(21),g=n(76),v=n(57),x={};function w(e){var t=e.signer,n=e.signerExtra,r=e.chainId,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="".concat(t.address||t.one).concat(r);return x[i]?x[i]:x[i]=j({signer:t,signerExtra:n,chainId:r},a)}function j(e,t){var n=e.chainId,r=e.signer,o=e.signerExtra;if(o&&"trezor"===o.type){var l=new c.TrezorSubprovider({trezorConnectClientApi:u.a,networkId:n});return l._initialDerivedKeyInfo=function(e){return{hdKey:f.a.fromExtendedKey(e.info.hdKey.xpub),derivationPath:e.info.derivationPath,baseDerivationPath:e.info.baseDerivationPath}}(o),{signMessage:function(e){return l.signPersonalMessageAsync(d.ethers.utils.hexlify(e),r.address)},signTransaction:function(e){return l.signTransactionAsync(Object(s.a)(Object(s.a)({},e),{},{from:r.address}))},sendTransaction:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v.a.find((function(e){return e.chainId===t.chainId}))){e.next=3;break}throw Error("no network found for chainId : "+t.chainId);case 3:return e.next=5,Object(g.a)(n.id);case 5:if(r=e.sent){e.next=8;break}throw Error("no provider found for network : "+n.id);case 8:return e.t0=d.ethers.utils,e.next=11,r.getTransactionCount(t.from);case 11:return e.t1=e.sent,t.nonce=e.t0.hexlify.call(e.t0,e.t1),i=d.ethers.utils.hexlify(t.gas||t.gasLimit),t.gasPrice=d.ethers.utils.hexlify(t.gasPrice),t=Object(s.a)(Object(s.a)({},t),{},{gas:i}),e.next=18,l.signTransactionAsync(t);case 18:return c=e.sent,e.abrupt("return",r.sendTransaction(c));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getAccountsAsync(100);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return e.toLowerCase()})).includes(t.toLowerCase()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_signTypedData:function(){var e=Object(i.a)(a.a.mark((function e(t,n,i){var s,c,o,u,d,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y._TypedDataEncoder.hashDomain(t),c=y._TypedDataEncoder.hashStruct(y._TypedDataEncoder.getPrimaryType(n),n,i),o=y._TypedDataEncoder.getPayload(t,n,i),e.next=5,l._initialDerivedKeyInfoAsync();case 5:return u=e.sent,d=l._findDerivedKeyInfoForAddress(u,r.address),f=d.derivationPath,e.next=10,l._trezorConnectClientApi.ethereumSignTypedData({path:f,data:o,metamask_v4_compat:!0,domain_separator_hash:s,message_hash:c});case 10:if(!(p=e.sent).success){e.next=15;break}return e.abrupt("return","".concat(p.payload.signature));case 15:throw new Error(p.payload.error);case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}}if(o&&"ledger"===o.type){if("webHID"===o.transportProtocol)return{signMessage:function(e){return Object(b.c)(d.ethers.utils.hexlify(e),r.address)},signTransaction:function(e){return Object(b.e)(e,n)},sendTransaction:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v.a.find((function(e){return e.chainId===t.chainId}))){e.next=3;break}throw Error("no network found for chainId : "+t.chainId);case 3:return e.next=5,Object(g.a)(n.id);case 5:if(r=e.sent){e.next=8;break}throw Error("no provider found for network : "+n.id);case 8:return e.t0=d.ethers.utils,e.next=11,r.getTransactionCount(t.from);case 11:return e.t1=e.sent,t.nonce=e.t0.hexlify.call(e.t0,e.t1),e.next=15,Object(b.e)(t,t.chainId);case 15:return i=e.sent,e.abrupt("return",r.sendTransaction(i));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.b)();case 2:if(!(n=e.sent)||!n[0]){e.next=7;break}if(!t){e.next=6;break}return e.abrupt("return",!!n.find((function(e){return e.toLowerCase()===t.toLowerCase()})));case 6:return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_signTypedData:function(e,t,n){var a=y._TypedDataEncoder.hashDomain(e),i=y._TypedDataEncoder.hashStruct(y._TypedDataEncoder.getPrimaryType(t),t,n);return Object(b.d)(a,i,r.address)}};var x=new p.LedgerSubprovider({networkId:n,ledgerEthereumClientFactoryAsync:h.ledgerEthereumBrowserClientFactoryAsync,baseDerivationPath:o.info.baseDerivationPath});return{signMessage:function(e){return x.signPersonalMessageAsync(d.ethers.utils.hexlify(e),r.address)},signTransaction:function(e){return x.signTransactionAsync(Object(s.a)(Object(s.a)({},e),{},{from:r.address}))},sendTransaction:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("Please use a chrome based browser to use Ledger");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getAccountsAsync(1);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return e.toLowerCase()})).includes(t.toLowerCase()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_signTypedData:function(e,t,n){throw Error("Please, use a chrome based browser to use 721 Typed signatures")}}}if(o&&"Lattice"===o.type)return{signMessage:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,s,c,u,d,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.commKey,r=o.deviceId,i=Object(m.c)(n),e.next=4,Object(m.a)(i,r);case 4:if(s=e.sent,c=s.isPaired,!(u=s.errConnect)){e.next=9;break}throw new Error(u.message||u);case 9:if(c){e.next=12;break}throw i.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 12:return e.next=14,Object(m.e)(i,t);case 14:if(d=e.sent,l=d.signedMsg,!(f=d.errSignMessage)){e.next=19;break}throw new Error(f);case 19:return e.abrupt("return",l);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signTransaction:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(function(){var e=Object(i.a)(a.a.mark((function e(t){var r,i,s,c,u,d,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.commKey,i=o.deviceId,s=Object(m.c)(r),e.next=4,Object(m.a)(s,i);case 4:if(c=e.sent,u=c.isPaired,!(d=c.errConnect)){e.next=9;break}throw new Error(d.message||d);case 9:if(u){e.next=12;break}throw s.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 12:return e.next=14,Object(m.g)(s,t,n);case 14:if(l=e.sent,f=l.serializedSigned,!(p=l.errSignTxn)){e.next=19;break}throw new Error(p);case 19:return e.abrupt("return",f);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendTransaction:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(function(){var e=Object(i.a)(a.a.mark((function e(t){var r,i,s,c,u,l,f,p,h,b,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=v.a.find((function(e){return e.chainId===t.chainId}))){e.next=3;break}throw Error("no network found for chainId : "+t.chainId);case 3:return e.next=5,Object(g.a)(r.id);case 5:if(i=e.sent){e.next=8;break}throw Error("no provider found for network : "+r.id);case 8:return e.t0=d.ethers.utils,e.next=11,i.getTransactionCount(t.from);case 11:return e.t1=e.sent,t.nonce=e.t0.hexlify.call(e.t0,e.t1),s=o.commKey,c=o.deviceId,u=Object(m.c)(s),e.next=17,Object(m.a)(u,c);case 17:if(l=e.sent,f=l.isPaired,!(p=l.errConnect)){e.next=22;break}throw new Error(p.message||p);case 22:if(f){e.next=25;break}throw u.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 25:return e.next=27,Object(m.g)(u,t,n);case 27:if(h=e.sent,b=h.serializedSigned,!(y=h.errSignTxn)){e.next=32;break}throw new Error(y);case 32:return e.abrupt("return",i.sendTransaction(b));case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,s,c,u,d,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,r=o.commKey,i=o.deviceId,s=Object(m.c)(r),e.next=5,Object(m.a)(s,i);case 5:if(c=e.sent,u=c.isPaired,!(d=c.errConnect)){e.next=10;break}throw new Error(d.message||d);case 10:if(u){e.next=13;break}throw s.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 13:return e.next=15,Object(m.b)(s);case 15:if(l=e.sent,f=l.res,!(p=l.errGetAddresses)){e.next=20;break}throw new Error("Lattice: ".concat(p),{error:!0});case 20:return n=f,e.abrupt("return",n.map((function(e){return e.toLowerCase()})).includes(t.toLowerCase()));case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_signTypedData:function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i,s,c,u,d,l,f,p,h,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=y._TypedDataEncoder.getPayload(t,n,r),s=o.commKey,c=o.deviceId,u=Object(m.c)(s),e.next=5,Object(m.a)(u,c);case 5:if(d=e.sent,l=d.isPaired,!(f=d.errConnect)){e.next=10;break}throw new Error(f.message||f);case 10:if(l){e.next=13;break}throw u.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 13:return e.next=15,Object(m.f)(u,i);case 15:if(p=e.sent,h=p.signedMsg,!(b=p.errSignMessage)){e.next=20;break}throw new Error(b);case 20:return e.abrupt("return",h);case 21:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[t,n,r]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()};if(r.address){if(!window.ethereum)throw new Error("No web3 support detected in your browser: if you created this account through MetaMask, please install it.");var w=new d.ethers.providers.Web3Provider(window.ethereum,"any"),j=w.getSigner(r.address);return j.isConnected=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.listAccounts();case 2:if(r=e.sent,i=!0,!r.length){e.next=14;break}if(t&&(i=!!r.find((function(e){return e.toLowerCase()===t.toLowerCase()}))),!n){e.next=12;break}return e.next=9,w.getNetwork();case 9:s=e.sent,c=s.chainId,i=i&&c===n;case 12:e.next=15;break;case 14:i=!1;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j}throw r.one?new Error("getWallet not applicable for QuickAccounts: use primaryKeyBackup with the passphrase and /second-sig"):new Error("unknown signer type")}function O(e,t){return k.apply(this,arguments)}function k(){return(k=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.apply(this,n).catch((function(e){throw new Error("Lattice: ".concat(e.message))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},535:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return j})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return A}));var r=n(7),a=n(2),i=n.n(a),s=n(12),c=n(618),o=n(619),u=n(530),d=n(211),l=n(516),f=null,p="44'/60'/0'/0";function h(){return b.apply(this,arguments)}function b(){return(b=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.list();case 2:if(!(f=e.sent).length){e.next=11;break}if(!f[0].opened){e.next=8;break}return e.abrupt("return",new c.a(f[0]));case 8:return e.abrupt("return",c.a.open(f[0]));case 9:e.next=22;break;case 11:return e.prev=11,e.next=14,c.a.request();case 14:return e.abrupt("return",e.sent);case 17:if(e.prev=17,e.t0=e.catch(11),!e.t0.message.includes("reading 'open'")){e.next=21;break}throw new Error("ledger WebHID request denied");case 21:throw new Error("Could not request WebHID ledger: "+e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}function m(){return y.apply(this,arguments)}function y(){return(y=Object(s.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return t=e.sent,e.next=5,g(t);case 5:return n=e.sent,t.close(),e.abrupt("return",n.map((function(e){return e.address})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(i.a.mark((function t(n){var r,a,s,c,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="m/".concat(p),t.next=3,x(n,r).then((function(e){return e})).catch((function(e){throw 25871===e.statusCode||27404===e.statusCode?Error("Please make sure your ledger is unlocked and running the Ethereum app. "+e.message):Error("Could not get address from ledger : "+e)}));case 3:return a=t.sent,(s=new l).publicKey=e.from(a.publicKey,"hex"),s.chainCode=e.from(a.chainCode,"hex"),c=I(s),o={hdKey:s,address:c,derivationPath:r,baseDerivationPath:p},t.abrupt("return",N(o,1));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(e,t){return w.apply(this,arguments)}function w(){return(w=Object(s.a)(i.a.mark((function e(t,n){var r,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new o.a(t),s=new Promise((function(e,t){r=setTimeout((function(){return t(new Error("Device took too long to respond..."))}),1e4)})),e.abrupt("return",Promise.race([a.getAddress(n,!1,!0),s]).then((function(e){return clearTimeout(r),e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return O.apply(this,arguments)}function O(){return(O=Object(s.a)(i.a.mark((function e(t,n){var a,s,c,d,l,f,p,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return a=e.sent,s=t.from,delete(c=Object(r.a)(Object(r.a)({},t),{},{gasLimit:t.gasLimit||t.gas,chainId:n})).from,delete c.gas,d=Object(u.a)(c),e.next=10,g(a);case 10:if(l=e.sent,l[0].address.toLowerCase()!==s.toLowerCase()){e.next=30;break}return e.prev=13,e.next=16,new o.a(a).signTransaction(l[0].derivationPath,d.substr(2));case 16:p=e.sent,e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(13),new Error("Could not sign transaction "+e.t0);case 22:if(b=parseInt(p.v,16),Math.floor((b-35)/2)===n){e.next=26;break}throw new Error("Invalid returned V 0x"+p.v);case 26:delete c.v,f=Object(u.a)(c,{r:"0x"+p.r,s:"0x"+p.s,v:b}),e.next=31;break;case 30:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 31:return a.close(),e.abrupt("return",f);case 33:case"end":return e.stop()}}),e,null,[[13,19]])})))).apply(this,arguments)}function k(e,t){return T.apply(this,arguments)}function T(){return(T=Object(s.a)(i.a.mark((function e(t,n){var r,a,s,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return r=e.sent,e.next=5,g(r);case 5:if(a=e.sent,(s=a[0]).address.toLowerCase()!==n.toLowerCase()){e.next=20;break}return e.prev=8,e.next=11,new o.a(r).signPersonalMessage(s.derivationPath,t.substr(2));case 11:u=e.sent,c="0x"+u.r+u.s+u.v.toString(16),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(8),new Error("Signature denied "+e.t0.message);case 18:e.next=21;break;case 20:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 21:return r.close(),e.abrupt("return",c);case 23:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}function A(e,t,n){return E.apply(this,arguments)}function E(){return(E=Object(s.a)(i.a.mark((function e(t,n,r){var a,s,c,u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:return a=e.sent,e.next=5,g(a);case 5:if(s=e.sent,(c=s[0]).address.toLowerCase()!==r.toLowerCase()){e.next=20;break}return e.prev=8,e.next=11,new o.a(a).signEIP712HashedMessage(c.derivationPath,t,n);case 11:d=e.sent,u="0x"+d.r+d.s+d.v.toString(16),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(8),new Error("Signature denied "+e.t0.message);case 18:e.next=21;break;case 20:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 21:return a.close(),e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}function N(e,t){for(var n=[],r=0;r<t;r++){var a="m/".concat(e.baseDerivationPath,"/").concat(r),i="m/".concat(r),s=e.hdKey.derive(i),c={address:I(s),hdKey:s,baseDerivationPath:e.baseDerivationPath,derivationPath:a};n.push(c)}return n}function I(e){var t=e.publicKey,n=d.publicToAddress(t,!0).toString("hex");return d.addHexPrefix(n).toLowerCase()}}).call(this,n(28).Buffer)},537:function(e,t,n){var r=n(324),a=n(2),i=n(177),s=n(55).utils,c=s.AbiCoder,o=s.hexlify,u=s.arrayify,d=s.keccak256,l=s.Interface,f=n(55),p=f.Contract,h=f.BigNumber,b=n(497),m=n(327),y=n(538),g=new l(m);function v(e){return this.identity=b.Address(e.identity),this.network=e.network,this.signer=e.signer,this.txns=e.txns,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.signature=e.signature,this.minFeeInUSDPerGas=e.minFeeInUSDPerGas,this.recoveryMode=e.recoveryMode,this.meta=e.meta,this.gasTankFee=e.gasTankFee,this}v.prototype.getNonce=function(){var e=i(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t,this);case 2:return this.nonce=e.sent,e.abrupt("return",this.nonce);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),v.prototype.estimate=function(){var e=i(a.mark((function e(t){var n,i,s,c,o,u,d;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetch,i=t.relayerURL,s=t.replacing,c=t.getNextNonce,o=t.gasTank,u=Object.fromEntries(Object.entries({getNextNonce:c,gasTank:o}).filter((function(e){var t=r(e,2);t[0];return t[1]}))),e.next=4,C(n,"".concat(i,"/identity/").concat(this.identity,"/").concat(this.network,"/estimate?").concat(new URLSearchParams(u).toString()),{txns:this.txns,signer:this.signer,replacing:s,minFeeInUSDPerGas:this.minFeeInUSDPerGas});case 4:return d=e.sent,this.gasLimit=d.gasLimit,e.abrupt("return",d);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),v.prototype.sign=function(){var e=i(a.mark((function e(t,n){var r,i,s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNaN(this.nonce)){e.next=2;break}throw new Error("nonce is not set");case 2:if(!isNaN(this.gasLimit)){e.next=4;break}throw new Error("gasLimit is not set");case 4:return r=O(this,n),i=u(d(r)),e.next=8,A(t,i);case 8:return s=e.sent,this.signature=s,e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),v.prototype.submit=function(){var e=i(a.mark((function e(t){var n,r,i;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetch,r=t.relayerURL,e.next=3,C(n,"".concat(r,"/identity/").concat(this.identity,"/").concat(this.network,"/submit"),{nonce:this.nonce,signer:this.signer,txns:this.txns,gasLimit:this.gasLimit,signature:this.signature,signatureTwo:this.signatureTwo,meta:this.meta,gasTankFee:this.gasTankFee});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),v.prototype.cancel=function(){var e=i(a.mark((function e(t){var n,r,i;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetch,r=t.relayerURL,e.next=3,C(n,"".concat(r,"/identity/").concat(this.identity,"/").concat(this.network,"/cancel"),{nonce:this.nonce,signer:this.signer});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();var x=/gas required exceeds allowance|always failing transaction|execution reverted/;function w(){return(w=i(a.mark((function e(t,n,r,i,s){var o,u,d,l;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.address){e.next=2;break}return e.abrupt("return",A(t,i,!0));case 2:if(!r.quickAccManager){e.next=10;break}return e.next=5,A(t,i,!0);case 5:return o=e.sent,u=new c,d=u.encode(["uint","bytes","bytes"],[r.timelock,o,s]),l="".concat(d+u.encode(["address"],[r.quickAccManager]).slice(2),"02"),e.abrupt("return",l);case 10:throw new Error("invalid signer object");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=i(a.mark((function e(t,n,r,i,s,o,u){var d,l,f,p;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.address){e.next=2;break}return e.abrupt("return",N(t,i,s,o));case 2:if(!r.quickAccManager){e.next=10;break}return e.next=5,N(t,i,s,o);case 5:return d=e.sent,l=new c,f=l.encode(["uint","bytes","bytes"],[r.timelock,d,u]),p="".concat(f+l.encode(["address"],[r.quickAccManager]).slice(2),"02"),e.abrupt("return",p);case 10:throw new Error("invalid signer object");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){var n=new c,r=e.signer;if(r.address)return n.encode(["address","uint","uint","tuple(address, uint, bytes)[]"],[e.identity,k(e.network),e.nonce,e.txns]);if(r.quickAccManager){var a=d(n.encode(["tuple(uint, address, address)"],[[e.signer.timelock,e.signer.one,e.signer.two]]));return n.encode(["address","uint","address","bytes32","uint","tuple(address, uint, bytes)[]","bool"],[r.quickAccManager,k(e.network),e.identity,a,e.nonce,e.txns,!t])}throw new Error("invalid signer object")}function k(e){if("ethereum"===e)return 1;if("polygon"===e)return 137;if("binance-smart-chain"===e)return 56;if("bsc"===e)return 56;if("fantom"===e)return 250;if("avalanche"===e)return 43114;if("arbitrum"===e)return 42161;if("moonbeam"===e)return 1284;if("moonriver"===e)return 1285;if("gnosis"===e)return 100;if("kucoin"===e)return 321;if("andromeda"===e)return 1088;if("cronos"===e)return 25;if("aurora"===e)return 1313161554;if("rinkeby"===e)return 4;if("optimism"===e)return 10;throw new Error("unsupported network ".concat(e))}function T(e){var t=u(e);return t[64]<27&&(t[64]+=27),o(t)}function A(e,t){return E.apply(this,arguments)}function E(){return E=i(a.mark((function e(t,n){var r,i=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],e.t0="",e.t1=T,e.next=5,t.signMessage(n);case 5:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",e.t0.concat.call(e.t0,e.t3).concat(r?"00":"01"));case 8:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function N(e,t,n,r){return I.apply(this,arguments)}function I(){return(I=i(a.mark((function e(t,n,r,i){var s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._signTypedData(n,r,i);case 2:return s=e.sent,e.abrupt("return","".concat(T(s),"00"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return L.apply(this,arguments)}function L(){return(L=i(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n.signer.quickAccManager){e.next=7;break}return e.next=4,new p(n.signer.quickAccManager,y,t).nonces(n.identity);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,new p(n.identity,m,t).nonce();case 9:e.t0=e.sent;case 10:return e.abrupt("return",e.t0.toNumber());case 13:if(e.prev=13,e.t1=e.catch(0),e.t2="CALL_EXCEPTION"===e.t1.code,!e.t2){e.next=21;break}return e.next=19,t.getCode(n.identity);case 19:e.t3=e.sent,e.t2="0x"===e.t3;case 21:if(!e.t2){e.next=23;break}return e.abrupt("return",0);case 23:throw e.t1;case 24:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function C(e,t,n){return P.apply(this,arguments)}function P(){return(P=i(a.mark((function e(t,n,r){var i;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n,{headers:{"content-type":"application/json"},method:"POST",body:JSON.stringify(r)});case 2:return i=e.sent,e.abrupt("return",i.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}v.prototype.estimateNoRelayer=function(){var e=i(a.mark((function e(t){var n,r,i,s,c,o,u,d,l,f,p;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.provider,r=t.replacing,i={from:this.signer.quickAccManager||this.signer.address,to:this.identity,data:g.encodeFunctionData("executeBySender",[this.txns])},s=r?"latest":"pending",e.next=5,U(n,s,i);case 5:if(c=e.sent,o=c.error,u=c.gasLimit,!o||!o.message.startsWith("execution reverted: ")){e.next=11;break}return d=o.message.slice(20),e.abrupt("return",{success:!1,message:d});case 11:if(!o){e.next=18;break}if("UNPREDICTABLE_GAS_LIMIT"===o.code||o.message.match(x)){e.next=14;break}throw o;case 14:return e.next=16,_(n,i,s);case 16:return e.t0=e.sent,e.abrupt("return",{success:!1,message:e.t0});case 18:return this.gasLimit=u.toNumber(),e.next=21,n.getFeeData();case 21:return l=e.sent,f=l.gasPrice.toNumber(),p=f*u/1e18,e.abrupt("return",{success:!0,gasLimit:this.gasLimit,gasPrice:f,feeInNative:{slow:.9*p,medium:1*p,fast:1.15*p,ape:1.4*p}});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();var F="0x08c379a0";function _(e,t,n){return M.apply(this,arguments)}function M(){return(M=i(a.mark((function e(t,n,r){var i;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.call(n,r);case 3:return i=e.sent,e.abrupt("return",i.startsWith(F)?(new c).decode(["string"],"0x".concat(i.slice(10)))[0]:i);case 7:if(e.prev=7,e.t0=e.catch(0),"UNPREDICTABLE_GAS_LIMIT"!==e.t0.code||!e.t0.error){e.next=11;break}return e.abrupt("return",e.t0.error.message.slice(20));case 11:if("CALL_EXCEPTION"!==e.t0.code){e.next=13;break}return e.abrupt("return","no error string, possibly insufficient amount");case 13:if("INVALID_ARGUMENT"!==e.t0.code){e.next=15;break}return e.abrupt("return","unable to deserialize: ".concat(o(e.t0.value)));case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function U(e,t,n){return R.apply(this,arguments)}function R(){return(R=i(a.mark((function e(t,n,r){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.send("eth_estimateGas",[r,n]).then((function(e){return{gasLimit:h.from(e)}})).catch((function(e){return"SERVER_ERROR"===e.code?{error:e.error}:{error:e}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports={Bundle:v,signMessage:function(e,t,n,r,a){return w.apply(this,arguments)},signMessage712:function(e,t,n,r,a,i,s){return j.apply(this,arguments)},getSignable:O,signMsg:A,signMsg712:N}},538:function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"txnHash","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"accHash","type":"bytes32"},{"indexed":true,"internalType":"address","name":"signer","type":"address"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"}],"name":"LogCancelled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"txnHash","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"accHash","type":"bytes32"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"}],"name":"LogExecScheduled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"txnHash","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"accHash","type":"bytes32"},{"indexed":true,"internalType":"address","name":"signer","type":"address"},{"indexed":false,"internalType":"uint256","name":"nonce","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"},{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"indexed":false,"internalType":"struct Identity.Transaction[]","name":"txns","type":"tuple[]"}],"name":"LogScheduled","type":"event"},{"inputs":[],"name":"DOMAIN_SEPARATOR","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"contract Identity","name":"identity","type":"address"},{"components":[{"internalType":"uint256","name":"timelock","type":"uint256"},{"internalType":"address","name":"one","type":"address"},{"internalType":"address","name":"two","type":"address"}],"internalType":"struct QuickAccManager.QuickAccount","name":"acc","type":"tuple"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"internalType":"bytes","name":"sig","type":"bytes"},{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"internalType":"struct Identity.Transaction[]","name":"txns","type":"tuple[]"}],"name":"cancel","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract Identity","name":"identity","type":"address"},{"internalType":"bytes32","name":"accHash","type":"bytes32"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"internalType":"struct Identity.Transaction[]","name":"txns","type":"tuple[]"}],"name":"execScheduled","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"hash","type":"bytes32"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"isValidSignature","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"scheduled","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"contract Identity","name":"identity","type":"address"},{"components":[{"internalType":"uint256","name":"timelock","type":"uint256"},{"internalType":"address","name":"one","type":"address"},{"internalType":"address","name":"two","type":"address"}],"internalType":"struct QuickAccManager.QuickAccount","name":"acc","type":"tuple"},{"components":[{"internalType":"bool","name":"isBothSigned","type":"bool"},{"internalType":"bytes","name":"one","type":"bytes"},{"internalType":"bytes","name":"two","type":"bytes"}],"internalType":"struct QuickAccManager.DualSig","name":"sigs","type":"tuple"},{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"internalType":"struct Identity.Transaction[]","name":"txns","type":"tuple[]"}],"name":"send","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract Identity","name":"identity","type":"address"},{"components":[{"internalType":"uint256","name":"timelock","type":"uint256"},{"internalType":"address","name":"one","type":"address"},{"internalType":"address","name":"two","type":"address"}],"internalType":"struct QuickAccManager.QuickAccount","name":"acc","type":"tuple"},{"components":[{"internalType":"bytes","name":"one","type":"bytes"},{"internalType":"bytes","name":"two","type":"bytes"}],"internalType":"struct QuickAccManager.DualSigAlwaysBoth","name":"sigs","type":"tuple"},{"components":[{"internalType":"address","name":"token","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"fee","type":"uint256"}],"internalType":"struct QuickAccManager.Transfer","name":"t","type":"tuple"}],"name":"sendTransfer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract Identity","name":"identity","type":"address"},{"components":[{"internalType":"uint256","name":"timelock","type":"uint256"},{"internalType":"address","name":"one","type":"address"},{"internalType":"address","name":"two","type":"address"}],"internalType":"struct QuickAccManager.QuickAccount","name":"acc","type":"tuple"},{"components":[{"internalType":"bytes","name":"one","type":"bytes"},{"internalType":"bytes","name":"two","type":"bytes"}],"internalType":"struct QuickAccManager.DualSigAlwaysBoth","name":"sigs","type":"tuple"},{"components":[{"internalType":"string","name":"description","type":"string"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"internalType":"struct QuickAccManager.Txn[]","name":"txns","type":"tuple[]"}],"name":"sendTxns","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},558:function(e,t,n){var r=n(527),a=n(559),i=n(560),s=n(561),c=n(562),o=n(563),u=n(564),d=n(537);e.exports=r(r(r(r(r(r({},a),i),o),u),d),{},{MerkleTree:s,splitSig:c})},559:function(e,t,n){(function(t){var r=n(518),a=n(95).keccak256,i=n(497);function s(e){return this.leader=i.Address(e.leader),this.follower=i.Address(e.follower),this.guardian=i.Address(e.guardian),this.tokenAddr=i.Address(e.tokenAddr),this.nonce=i.Bytes32(e.nonce),Object.freeze(this),this}s.prototype.hash=function(){return t.from(a.arrayBuffer(r.rawEncode(["address","address","address","address","bytes32"],[this.leader,this.follower,this.guardian,this.tokenAddr,this.nonce])))},s.prototype.hashHex=function(){return"0x".concat(this.hash().toString("hex"))},s.prototype.toSolidityTuple=function(){return[this.leader,this.follower,this.guardian,this.tokenAddr,this.nonce]},s.prototype.hashToSign=function(e,t){return s.getSignableStateRoot(e,this.hashHex(),t)},s.prototype.hashToSignHex=function(e,t){return"0x".concat(this.hashToSign(e,t).toString("hex"))},s.prototype.getResumeSignableMessage=function(e){return t.from(a.arrayBuffer(r.solidityPack(["string","bytes32","uint256"],["resume",this.hashHex(),e])))},s.prototype.getResumeSignableMessageHex=function(e){return"0x".concat(this.getResumeSignableMessage(e).toString("hex"))},s.getSignableStateRoot=function(e,n,i){return t.from(a.arrayBuffer(r.rawEncode(["address","bytes32","bytes32"],[e,n,i])))},s.getBalanceLeaf=function(e,n){return t.from(a.arrayBuffer(r.rawEncode(["address","uint256"],[e,n])))},s.getSpenderBalanceLeaf=function(e,n){return t.from(a.arrayBuffer(r.rawEncode(["address","string","uint256"],[e,"spender",n])))},e.exports={Channel:s,ChannelState:{Challenged:"115792089237316195423570985008687907853269984665640564039457584007913129639935",Active:"0"}}}).call(this,n(28).Buffer)},560:function(e,t,n){var r=n(497);function a(e){return this.channel=e.channel,this.balanceTreeAmount=r.Uint256(e.balanceTreeAmount),this.stateRoot=r.Bytes32(e.stateRoot),this.sigLeader=r.Bytes32Array(e.sigLeader,3),this.sigFollower=r.Bytes32Array(e.sigFollower,3),this.proof=r.Bytes32Array(e.proof,-1),Object.freeze(this),this}a.prototype.toSolidityTuple=function(){return[this.channel.toSolidityTuple(),"0x".concat(this.balanceTreeAmount.toString(16)),this.stateRoot,this.sigLeader,this.sigFollower,this.proof]},e.exports={Withdraw:a}},561:function(e,t,n){var r=n(85),a=n(128),i=n(28).Buffer,s=n(95).keccak256;function c(e,t){if(!t)return e;if(!e)return t;var n=i.concat([e,t].sort(i.compare));return i.from(s.arrayBuffer(n))}function o(e){if(0===e.length)return[[i.from("")]];var t=[];for(t.push(e);t[t.length-1].length>1;)t.push(u(t[t.length-1]));return t}function u(e){return e.reduce((function(e,t,n,r){return n%2===0&&e.push(c(t,r[n+1])),e}),[])}var d=function(){"use strict";function e(t){if(r(this,e),!t.every((function(e){return 32===e.length&&i.isBuffer(e)})))throw new Error("elements must be 32 byte buffers");var n,a={elements:(n=t,n.filter((function(e,t){return n.findIndex((function(t){return t.equals(e)}))===t})))};Object.assign(this,a),this.elements.sort(i.compare);var s={layers:o(this.elements)};Object.assign(this,s)}return a(e,[{key:"getRoot",value:function(){if(!this.root){var e={root:this.layers[this.layers.length-1][0]};Object.assign(this,e)}return this.root}},{key:"verify",value:function(e,t){return this.getRoot().equals(e.reduce((function(e,t){return c(e,t)}),t))}},{key:"proof",value:function(e){var t=this.elements.findIndex((function(t){return t.equals(e)}));if(-1===t)throw new Error("element not found in merkle tree");return this.layers.reduce((function(e,n){var r=function(e,t){var n=e%2?e-1:e+1;return n<t.length?t[n]:null}(t,n);return r&&e.push(r),t=Math.floor(t/2),e}),[])}}]),e}();e.exports=d},562:function(e,t){e.exports=function(e){var t=e.startsWith("0x")?e.slice(2):e,n="0x".concat(t.substring(0,64)),r="0x".concat(t.substring(64,128)),a=parseInt(t.substring(128,130),16);return a<27&&(a+=27),["0x02".concat(a.toString(16),"000000000000000000000000000000000000000000000000000000000000"),n,r]}},563:function(e,t,n){(function(t){var r=n(518),a=n(95).keccak256,i=n(497);function s(e){return this.owner=i.Address(e.owner),this.shares=i.Uint256(e.shares),this.unlocksAt=i.Uint256(e.unlocksAt),Object.freeze(this),this}s.prototype.hash=function(){var e=r.rawEncode(["address","uint256","uint256"],[this.owner,this.shares,this.unlocksAt]);return t.from(a.arrayBuffer(e))},s.prototype.hashHex=function(){return"0x".concat(this.hash().toString("hex"))},e.exports={UnbondCommitment:s}}).call(this,n(28).Buffer)},564:function(e,t,n){var r=n(55).utils,a=r.keccak256,i=r.defaultAbiCoder,s=r.toUtf8Bytes,c=r.solidityPack,o=a(s("Permit(address owner,address spender,uint256 value,uint256 nonce,uint256 deadline)"));function u(e,t,n){return a(i.encode(["bytes32","bytes32","bytes32","uint256","address"],[a(s("EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)")),a(s(e)),a(s("1")),n,t]))}e.exports={getDomainSeparator:u,getApprovalDigest:function(e,t,n,r){var s=u(e.name,e.address,e.chainId);return a(c(["bytes1","bytes1","bytes32","bytes32"],["0x19","0x01",s,a(i.encode(["bytes32","address","address","uint256","uint256","uint256"],[o,t.owner,t.spender,t.value,n,r]))]))}}},582:function(e,t){},589:function(e,t){},590:function(e,t){},591:function(e,t){},592:function(e,t){},593:function(e,t){},595:function(e,t){},596:function(e,t){},597:function(e,t){},599:function(e,t){},606:function(e,t){},609:function(e,t){},610:function(e,t,n){(function(t){var r=n(611),a=n(496),i=function(){};function s(e){return e.startsWith("int[")?"int256"+e.slice(3):"int"===e?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):"uint"===e?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):"fixed"===e?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):"ufixed"===e?"ufixed128x128":e}function c(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function o(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function u(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?""===t[2]?"dynamic":parseInt(t[2],10):null}function d(e){var t=typeof e;if("string"===t)return r.isHexPrefixed(e)?new a(r.stripHexPrefix(e),16):new a(e,10);if("number"===t)return new a(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function l(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(3!==t.length)throw new Error("Invalid method signature");var n=/^(.+)\):\((.+)$/.exec(t[2]);if(null!==n&&3===n.length)return{method:t[1],args:n[1].split(","),retargs:n[2].split(",")};var r=t[2].split(",");return 1===r.length&&""===r[0]&&(r=[]),{method:t[1],args:r}}function f(e,n){var i,s,l,p;if("address"===e)return f("uint160",d(n));if("bool"===e)return f("uint8",n?1:0);if("string"===e)return f("bytes",t.from(n,"utf8"));if(m(e)){if("undefined"===typeof n.length)throw new Error("Not an array?");if("dynamic"!==(i=u(e))&&0!==i&&n.length>i)throw new Error("Elements exceed array size: "+i);for(p in l=[],e=e.slice(0,e.lastIndexOf("[")),"string"===typeof n&&(n=JSON.parse(n)),n)l.push(f(e,n[p]));if("dynamic"===i){var h=f("uint256",n.length);l.unshift(h)}return t.concat(l)}if("bytes"===e)return n=t.from(n),l=t.concat([f("uint256",n.length),n]),n.length%32!==0&&(l=t.concat([l,r.zeros(32-n.length%32)])),l;if(e.startsWith("bytes")){if((i=c(e))<1||i>32)throw new Error("Invalid bytes<N> width: "+i);return r.setLengthRight(n,32)}if(e.startsWith("uint")){if((i=c(e))%8||i<8||i>256)throw new Error("Invalid uint<N> width: "+i);if((s=d(n)).bitLength()>i)throw new Error("Supplied uint exceeds width: "+i+" vs "+s.bitLength());if(s<0)throw new Error("Supplied uint is negative");return s.toArrayLike(t,"be",32)}if(e.startsWith("int")){if((i=c(e))%8||i<8||i>256)throw new Error("Invalid int<N> width: "+i);if((s=d(n)).bitLength()>i)throw new Error("Supplied int exceeds width: "+i+" vs "+s.bitLength());return s.toTwos(256).toArrayLike(t,"be",32)}if(e.startsWith("ufixed")){if(i=o(e),(s=d(n))<0)throw new Error("Supplied ufixed is negative");return f("uint256",s.mul(new a(2).pow(new a(i[1]))))}if(e.startsWith("fixed"))return i=o(e),f("int256",d(n).mul(new a(2).pow(new a(i[1]))));throw new Error("Unsupported or invalid type: "+e)}function p(e,n,r){var i,s,c,o;if("string"===typeof e&&(e=h(e)),"address"===e.name)return p(e.rawType,n,r).toArrayLike(t,"be",20).toString("hex");if("bool"===e.name)return p(e.rawType,n,r).toString()===new a(1).toString();if("string"===e.name){var u=p(e.rawType,n,r);return t.from(u,"utf8").toString()}if(e.isArray){for(c=[],i=e.size,"dynamic"===e.size&&(r=p("uint256",n,r).toNumber(),i=p("uint256",n,r).toNumber(),r+=32),o=0;o<i;o++){var d=p(e.subArray,n,r);c.push(d),r+=e.subArray.memoryUsage}return c}if("bytes"===e.name)return r=p("uint256",n,r).toNumber(),i=p("uint256",n,r).toNumber(),n.slice(r+32,r+32+i);if(e.name.startsWith("bytes"))return n.slice(r,r+e.size);if(e.name.startsWith("uint")){if((s=new a(n.slice(r,r+32),16,"be")).bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+s.bitLength());return s}if(e.name.startsWith("int")){if((s=new a(n.slice(r,r+32),16,"be").fromTwos(256)).bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+s.bitLength());return s}if(e.name.startsWith("ufixed")){if(i=new a(2).pow(new a(e.size[1])),!(s=p("uint256",n,r)).mod(i).isZero())throw new Error("Decimals not supported yet");return s.div(i)}if(e.name.startsWith("fixed")){if(i=new a(2).pow(new a(e.size[1])),!(s=p("int256",n,r)).mod(i).isZero())throw new Error("Decimals not supported yet");return s.div(i)}throw new Error("Unsupported or invalid type: "+e.name)}function h(e){var t,n,r;if(m(e)){t=u(e);var a=e.slice(0,e.lastIndexOf("["));return a=h(a),n={isArray:!0,name:e,size:t,memoryUsage:"dynamic"===t?32:a.memoryUsage*t,subArray:a}}switch(e){case"address":r="uint160";break;case"bool":r="uint8";break;case"string":r="bytes"}if(n={rawType:r,name:e,memoryUsage:32},e.startsWith("bytes")&&"bytes"!==e||e.startsWith("uint")||e.startsWith("int")?n.size=c(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(n.size=o(e)),e.startsWith("bytes")&&"bytes"!==e&&(n.size<1||n.size>32))throw new Error("Invalid bytes<N> width: "+n.size);if((e.startsWith("uint")||e.startsWith("int"))&&(n.size%8||n.size<8||n.size>256))throw new Error("Invalid int/uint<N> width: "+n.size);return n}function b(e){return"string"===e||"bytes"===e||"dynamic"===u(e)}function m(e){return e.lastIndexOf("]")===e.length-1}function y(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}i.eventID=function(e,n){var a=e+"("+n.map(s).join(",")+")";return r.keccak256(t.from(a))},i.methodID=function(e,t){return i.eventID(e,t).slice(0,4)},i.rawEncode=function(e,n){var r=[],a=[],i=0;e.forEach((function(e){if(m(e)){var t=u(e);i+="dynamic"!==t?32*t:32}else i+=32}));for(var c=0;c<e.length;c++){var o=s(e[c]),d=f(o,n[c]);b(o)?(r.push(f("uint256",i)),a.push(d),i+=d.length):r.push(d)}return t.concat(r.concat(a))},i.rawDecode=function(e,n){var r=[];n=t.from(n);for(var a=0,i=0;i<e.length;i++){var c=h(s(e[i])),o=p(c,n,a);a+=c.memoryUsage,r.push(o)}return r},i.simpleEncode=function(e){var n=Array.prototype.slice.call(arguments).slice(1),r=l(e);if(n.length!==r.args.length)throw new Error("Argument count mismatch");return t.concat([i.methodID(r.method,r.args),i.rawEncode(r.args,n)])},i.simpleDecode=function(e,t){var n=l(e);if(!n.retargs)throw new Error("No return values in method");return i.rawDecode(n.retargs,t)},i.stringify=function(e,t){var n=[];for(var r in e){var a=e[r],i=t[r];i=/^[^\[]+\[.*\]$/.test(a)?i.map((function(e){return y(a,e)})).join(", "):y(a,i),n.push(i)}return n},i.solidityHexValue=function(e,n,a){var s,o;if(m(e)){var l=e.replace(/\[.*?\]/,"");if(!m(l)){var f=u(e);if("dynamic"!==f&&0!==f&&n.length>f)throw new Error("Elements exceed array size: "+f)}var p=n.map((function(e){return i.solidityHexValue(l,e,256)}));return t.concat(p)}if("bytes"===e)return n;if("string"===e)return t.from(n,"utf8");if("bool"===e){a=a||8;var h=Array(a/4).join("0");return t.from(n?h+"1":h+"0","hex")}if("address"===e){var b=20;return a&&(b=a/8),r.setLengthLeft(n,b)}if(e.startsWith("bytes")){if((s=c(e))<1||s>32)throw new Error("Invalid bytes<N> width: "+s);return r.setLengthRight(n,s)}if(e.startsWith("uint")){if((s=c(e))%8||s<8||s>256)throw new Error("Invalid uint<N> width: "+s);if((o=d(n)).bitLength()>s)throw new Error("Supplied uint exceeds width: "+s+" vs "+o.bitLength());return a=a||s,o.toArrayLike(t,"be",a/8)}if(e.startsWith("int")){if((s=c(e))%8||s<8||s>256)throw new Error("Invalid int<N> width: "+s);if((o=d(n)).bitLength()>s)throw new Error("Supplied int exceeds width: "+s+" vs "+o.bitLength());return a=a||s,o.toTwos(s).toArrayLike(t,"be",a/8)}throw new Error("Unsupported or invalid type: "+e)},i.solidityPack=function(e,n){if(e.length!==n.length)throw new Error("Number of types are not matching the values");for(var r=[],a=0;a<e.length;a++){var c=s(e[a]),o=n[a];r.push(i.solidityHexValue(c,o,null))}return t.concat(r)},i.soliditySHA3=function(e,t){return r.keccak256(i.solidityPack(e,t))},i.soliditySHA256=function(e,t){return r.sha256(i.solidityPack(e,t))},i.solidityRIPEMD160=function(e,t){return r.ripemd160(i.solidityPack(e,t),!0)},i.fromSerpent=function(e){for(var t,n=[],r=0;r<e.length;r++){var a=e[r];if("s"===a)n.push("bytes");else if("b"===a){for(var i="bytes",s=r+1;s<e.length&&((t=e[s])>="0"&&t<="9");)i+=e[s]-"0",s++;r=s-1,n.push(i)}else if("i"===a)n.push("int256");else{if("a"!==a)throw new Error("Unsupported or invalid type: "+a);n.push("int256[]")}}return n},i.toSerpent=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if("bytes"===r)t.push("s");else if(r.startsWith("bytes"))t.push("b"+c(r));else if("int256"===r)t.push("i");else{if("int256[]"!==r)throw new Error("Unsupported or invalid type: "+r);t.push("a")}}return t.join("")},e.exports=i}).call(this,n(28).Buffer)},611:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.secp256k1=t.rlp=t.BN=void 0;var i=n(519);t.secp256k1=i;var s=n(499),c=n(496);t.BN=c;var o=n(323);t.rlp=o,Object.assign(t,s),a(n(614),t),a(n(615),t),a(n(520),t),a(n(616),t),a(n(501),t),a(n(617),t)},612:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(496),a=new(0,n(208).ec)("secp256k1"),i=a.curve;t.privateKeyExport=function(e,t){void 0===t&&(t=!0);var n=new r(e);if(n.ucmp(i.n)>=0)throw new Error("couldn't export to DER format");var c=a.g.mul(n);return s(c.getX(),c.getY(),t)},t.privateKeyModInverse=function(t){var n=new r(t);if(n.ucmp(i.n)>=0||n.isZero())throw new Error("private key range is invalid");return n.invm(i.n).toArrayLike(e,"be",32)},t.signatureImport=function(t){var n=new r(t.r);n.ucmp(i.n)>=0&&(n=new r(0));var a=new r(t.s);return a.ucmp(i.n)>=0&&(a=new r(0)),e.concat([n.toArrayLike(e,"be",32),a.toArrayLike(e,"be",32)])},t.ecdhUnsafe=function(e,t,n){void 0===n&&(n=!0);var c=a.keyFromPublic(e),o=new r(t);if(o.ucmp(i.n)>=0||o.isZero())throw new Error("scalar was invalid (zero or overflow)");var u=c.pub.mul(o);return s(u.getX(),u.getY(),n)};var s=function(t,n,r){var a;return r?((a=e.alloc(33))[0]=n.isOdd()?3:2,t.toArrayLike(e,"be",32).copy(a,1)):((a=e.alloc(65))[0]=4,t.toArrayLike(e,"be",32).copy(a,1),n.toArrayLike(e,"be",32).copy(a,33)),a}}).call(this,n(28).Buffer)},613:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=e.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),r=e.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);t.privateKeyExport=function(t,a,i){void 0===i&&(i=!0);var s=e.from(i?n:r);return t.copy(s,i?8:9),a.copy(s,i?181:214),s},t.privateKeyImport=function(e){var t=e.length,n=0;if(t<n+1||48!==e[n])return null;if(t<(n+=1)+1||!(128&e[n]))return null;var r=127&e[n];if(r<1||r>2)return null;if(t<(n+=1)+r)return null;var a=e[n+r-1]|(r>1?e[n+r-2]<<8:0);return t<(n+=r)+a||t<n+3||2!==e[n]||1!==e[n+1]||1!==e[n+2]||t<(n+=3)+2||4!==e[n]||e[n+1]>32||t<n+2+e[n+1]?null:e.slice(n+2,n+2+e[n+1])},t.signatureImportLax=function(t){var n=e.alloc(32,0),r=e.alloc(32,0),a=t.length,i=0;if(48!==t[i++])return null;var s=t[i++];if(128&s&&(i+=s-128)>a)return null;if(2!==t[i++])return null;var c=t[i++];if(128&c){if(i+(s=c-128)>a)return null;for(;s>0&&0===t[i];i+=1,s-=1);for(c=0;s>0;i+=1,s-=1)c=(c<<8)+t[i]}if(c>a-i)return null;var o=i;if(i+=c,2!==t[i++])return null;var u=t[i++];if(128&u){if(i+(s=u-128)>a)return null;for(;s>0&&0===t[i];i+=1,s-=1);for(u=0;s>0;i+=1,s-=1)u=(u<<8)+t[i]}if(u>a-i)return null;var d=i;for(i+=u;c>0&&0===t[o];c-=1,o+=1);if(c>32)return null;var l=t.slice(o,o+c);for(l.copy(n,32-l.length);u>0&&0===t[d];u-=1,d+=1);if(u>32)return null;var f=t.slice(d,d+u);return f.copy(r,32-f.length),{r:n,s:r}}}).call(this,n(28).Buffer)},614:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.KECCAK256_RLP=t.KECCAK256_RLP_S=t.KECCAK256_RLP_ARRAY=t.KECCAK256_RLP_ARRAY_S=t.KECCAK256_NULL=t.KECCAK256_NULL_S=t.TWO_POW256=t.MAX_INTEGER=void 0;var r=n(496);t.MAX_INTEGER=new r("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),t.TWO_POW256=new r("10000000000000000000000000000000000000000000000000000000000000000",16),t.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t.KECCAK256_NULL=e.from(t.KECCAK256_NULL_S,"hex"),t.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",t.KECCAK256_RLP_ARRAY=e.from(t.KECCAK256_RLP_ARRAY_S,"hex"),t.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",t.KECCAK256_RLP=e.from(t.KECCAK256_RLP_S,"hex")}).call(this,n(28).Buffer)},615:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.importPublic=t.privateToPublic=t.privateToAddress=t.publicToAddress=t.pubToAddress=t.isValidPublic=t.isValidPrivate=t.isPrecompiled=t.generateAddress2=t.generateAddress=t.isValidChecksumAddress=t.toChecksumAddress=t.isZeroAddress=t.isValidAddress=t.zeroAddress=void 0;var r=n(176),a=n(499),i=n(519),s=n(496),c=n(501),o=n(520);t.zeroAddress=function(){var e=c.zeros(20);return c.bufferToHex(e)},t.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)},t.isZeroAddress=function(e){return t.zeroAddress()===c.addHexPrefix(e)},t.toChecksumAddress=function(e,t){e=a.stripHexPrefix(e).toLowerCase();for(var n=void 0!==t?t.toString()+"0x":"",r=o.keccak(n+e).toString("hex"),i="0x",s=0;s<e.length;s++)parseInt(r[s],16)>=8?i+=e[s].toUpperCase():i+=e[s];return i},t.isValidChecksumAddress=function(e,n){return t.isValidAddress(e)&&t.toChecksumAddress(e,n)===e},t.generateAddress=function(t,n){t=c.toBuffer(t);var r=new s(n);return r.isZero()?o.rlphash([t,null]).slice(-20):o.rlphash([t,e.from(r.toArray())]).slice(-20)},t.generateAddress2=function(t,n,a){var i=c.toBuffer(t),s=c.toBuffer(n),u=c.toBuffer(a);return r(20===i.length),r(32===s.length),o.keccak256(e.concat([e.from("ff","hex"),i,s,o.keccak256(u)])).slice(-20)},t.isPrecompiled=function(e){var t=c.unpad(e);return 1===t.length&&t[0]>=1&&t[0]<=8},t.isValidPrivate=function(e){return i.privateKeyVerify(e)},t.isValidPublic=function(t,n){return void 0===n&&(n=!1),64===t.length?i.publicKeyVerify(e.concat([e.from([4]),t])):!!n&&i.publicKeyVerify(t)},t.pubToAddress=function(e,t){return void 0===t&&(t=!1),e=c.toBuffer(e),t&&64!==e.length&&(e=i.publicKeyConvert(e,!1).slice(1)),r(64===e.length),o.keccak(e).slice(-20)},t.publicToAddress=t.pubToAddress,t.privateToAddress=function(e){return t.publicToAddress(t.privateToPublic(e))},t.privateToPublic=function(e){return e=c.toBuffer(e),i.publicKeyCreate(e,!1).slice(1)},t.importPublic=function(e){return 64!==(e=c.toBuffer(e)).length&&(e=i.publicKeyConvert(e,!1).slice(1)),e}}).call(this,n(28).Buffer)},616:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.hashPersonalMessage=t.isValidSignature=t.fromRpcSig=t.toRpcSig=t.ecrecover=t.ecsign=void 0;var r=n(519),a=n(496),i=n(501),s=n(520);function c(e,t){return t?e-(2*t+35):e-27}function o(e){return 0===e||1===e}t.ecsign=function(e,t,n){var a=r.sign(e,t),i=a.recovery;return{r:a.signature.slice(0,32),s:a.signature.slice(32,64),v:n?i+(2*n+35):i+27}},t.ecrecover=function(t,n,a,s,u){var d=e.concat([i.setLength(a,32),i.setLength(s,32)],64),l=c(n,u);if(!o(l))throw new Error("Invalid signature v value");var f=r.recover(t,d,l);return r.publicKeyConvert(f,!1).slice(1)},t.toRpcSig=function(t,n,r,a){if(!o(c(t,a)))throw new Error("Invalid signature v value");return i.bufferToHex(e.concat([i.setLengthLeft(n,32),i.setLengthLeft(r,32),i.toBuffer(t)]))},t.fromRpcSig=function(e){var t=i.toBuffer(e);if(65!==t.length)throw new Error("Invalid signature length");var n=t[64];return n<27&&(n+=27),{v:n,r:t.slice(0,32),s:t.slice(32,64)}},t.isValidSignature=function(e,t,n,r,i){void 0===r&&(r=!0);var s=new a("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),u=new a("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(32!==t.length||32!==n.length)return!1;if(!o(c(e,i)))return!1;var d=new a(t),l=new a(n);return!(d.isZero()||d.gt(u)||l.isZero()||l.gt(u))&&(!r||1!==l.cmp(s))},t.hashPersonalMessage=function(t){var n=e.from("\x19Ethereum Signed Message:\n"+t.length.toString(),"utf-8");return s.keccak(e.concat([n,t]))}}).call(this,n(28).Buffer)},617:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.defineProperties=void 0;var r=n(176),a=n(499),i=n(323),s=n(501);t.defineProperties=function(t,n,c){if(t.raw=[],t._fields=[],t.toJSON=function(e){if(void 0===e&&(e=!1),e){var n={};return t._fields.forEach((function(e){n[e]="0x"+t[e].toString("hex")})),n}return s.baToJSON(t.raw)},t.serialize=function(){return i.encode(t.raw)},n.forEach((function(n,a){function i(){return t.raw[a]}function c(i){"00"!==(i=s.toBuffer(i)).toString("hex")||n.allowZero||(i=e.allocUnsafe(0)),n.allowLess&&n.length?(i=s.stripZeros(i),r(n.length>=i.length,"The field "+n.name+" must not have more "+n.length+" bytes")):n.allowZero&&0===i.length||!n.length||r(n.length===i.length,"The field "+n.name+" must have byte length of "+n.length),t.raw[a]=i}t._fields.push(n.name),Object.defineProperty(t,n.name,{enumerable:!0,configurable:!0,get:i,set:c}),n.default&&(t[n.name]=n.default),n.alias&&Object.defineProperty(t,n.alias,{enumerable:!1,configurable:!0,set:c,get:i})})),c)if("string"===typeof c&&(c=e.from(a.stripHexPrefix(c),"hex")),e.isBuffer(c)&&(c=i.decode(c)),Array.isArray(c)){if(c.length>t._fields.length)throw new Error("wrong number of fields in data");c.forEach((function(e,n){t[t._fields[n]]=s.toBuffer(e)}))}else{if("object"!==typeof c)throw new Error("invalid data");var o=Object.keys(c);n.forEach((function(e){-1!==o.indexOf(e.name)&&(t[e.name]=c[e.name]),-1!==o.indexOf(e.alias)&&(t[e.alias]=c[e.alias])}))}}}).call(this,n(28).Buffer)},622:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"g",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"h",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return l}));function r(e,t,n,r,a){if((null===n||void 0===n?void 0:n.relayerless)&&"0x0000000000000000000000000000000000000000"===(null===e||void 0===e?void 0:e.address))return!0;if(!e)return!1;var i=l(e,n,t,r,a).feeInFeeToken;return parseInt(e.balance)/Math.pow(10,e.decimals)>i}function a(e){return(null===e||void 0===e?void 0:e.address)&&"0x0000000000000000000000000000000000000000"!==(null===e||void 0===e?void 0:e.address)?3e4:12e3}var i=["caller is a contract","caller is another contract","contract not allowed","contract not supported","No contractz allowed","o contracts","contracts allowed","ontract is not allowed","aller must be user","aller must be a user","ontract call not allowed"];function s(e){if(e)return e.includes("Router: EXPIRED")?"Swap expired":e.includes("Router: INSUFFICIENT_OUTPUT_AMOUNT")?"Swap will suffer slippage higher than your requirements":e.includes("INSUFFICIENT_PRIVILEGE")?"Your signer address is not authorized.":i.find((function(t){return e.includes(t)}))?"This dApp does not support smart wallets.":e}function c(e){if(e)return e.includes("Router: EXPIRED")?"Try performing the swap again":e.includes("Router: INSUFFICIENT_OUTPUT_AMOUNT")?"Try performing the swap again or increase your slippage requirements":e.includes("INSUFFICIENT_PRIVILEGE")?"If you set a new signer for this account, try re-adding the account.":i.find((function(t){return e.includes(t)}))?"WARNING! We detected that this dApp intentionally blocks smart contract calls. This is a highly disruptive practice, as it breaks support for all smart wallets (Ambire, Gnosis Safe and others). We recommend you report this to the dApp ASAP and ask them to fix it.":"Sending this transaction batch would have resulted in an error, so we prevented it."}function o(e){return i.find((function(t){return e.includes(t)}))}function u(e,t){return"0x"+Math.round(e*Math.pow(10,t)).toString(16)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t&&e?1===t?e:e/(1-t)*t:0}function l(e,t,n,r,i){var s=function(e,t,n){if(!(null===t||void 0===t?void 0:t.feeInUSD)||!e)return{multiplier:1,addedGas:0};var r=a(e);return n?{addedGas:0,multiplier:1}:{multiplier:parseFloat(((t.gasLimit+r)/t.gasLimit).toFixed(4)),addedGas:r}}(e,t,r),c=s.addedGas,o=s.multiplier,u=a(e),d=1-((null===e||void 0===e?void 0:e.discount)||0),l=o*d,f=(null===e||void 0===e?void 0:e.nativeRate)||1,p=r&&"0x0000000000000000000000000000000000000000"===e.address&&i.id!==e.network,h=t.customFee?t.customFee*d/f:p?t.feeInNative[n]*l/f*t.nativeAssetPriceInUSD/e.price:t.feeInNative[n]*l;return{feeInNative:h,feeInUSD:isNaN(t.nativeAssetPriceInUSD)?void 0:p?h*e.price:h*t.nativeAssetPriceInUSD,feeInFeeToken:h*f,addedGas:c,savedGas:u}}},733:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(9),a=(n(734),n(3)),i=n(147),s=n(57),c=n(21),o=n(86),u=n(542),d=n(47),l=n(529),f=n(502),p=n(515),h=n(148),b=n(4);function m(e){var t=s.a.find((function(t){return t.id===e}));return t?t.nativeAssetSymbol:"UNKNW"}function y(e){var t=this,n=e.txn,y=e.onDismiss,g=e.network,v=e.account,x=e.isFirstFailing,w=e.mined,j=e.disableExpand,O=e.disableDismiss,k=e.disableDismissLabel,T=e.addressLabel,A=void 0===T?null:T,E=Object(h.a)().constants,N=E.tokenList,I=E.humanizerInfo,S=Object(a.useState)(!1),L=Object(r.a)(S,2),C=L[0],P=L[1],F=Object(i.b)(I,n[0]),_=s.a.find((function(e){return e.id===g})),M=Object(i.c)(I,N,n,g,v,{mined:w,extended:!0}).map((function(e){return Array.isArray(e)?e.map((function(e,t){return function(e,t,n){if(1===e.length)return e;if(0===t)return Object(b.jsx)("div",{className:"action ".concat(e.toLowerCase()),children:e},"item-".concat(t));if(!e.type)return Object(b.jsx)("div",{className:"word",children:e},"item-".concat(t));if("token"===e.type)return Object(b.jsxs)("div",{className:"token",children:[e.amount>0&&Object(b.jsx)("span",{children:Object(p.a)(e.amount,!0,e.decimals)}),null!==e.decimals&&e.symbol?Object(b.jsxs)(a.Fragment,{children:[e.address&&Object(b.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(Object(f.a)(n.id,e.address),")")}}),e.symbol]}):e.amount>0?"units of unknown token":null]},"item-".concat(t));if("address"===e.type)return Object(b.jsx)("a",{className:"address",href:e.address?"".concat(n.explorerUrl,"/address/").concat(e.address):null,target:"_blank",rel:"noreferrer",onClick:function(e){return e.stopPropagation()},children:Object(b.jsxs)(o.z,{disabled:!e.address,label:e.address,children:[e.name?e.name:e.address,e.address?Object(b.jsx)(u.c,{}):null]})},"item-".concat(t));if("network"===e.type)return Object(b.jsxs)("div",{className:"network",children:[e.icon?Object(b.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(e.icon,")")}}):null,e.name]},"item-".concat(t));if("erc721"===e.type){var r=e.network&&e.address&&e.id;return Object(b.jsxs)("a",{className:"erc721",href:r?"#/wallet/nft/".concat(e.network,"/").concat(e.address,"/").concat(e.id):null,target:"_blank",rel:"noreferrer",onClick:function(e){return e.stopPropagation()},children:[e.name,r?Object(b.jsx)(u.c,{}):null]},"item-".concat(t))}return Object(b.jsx)(b.Fragment,{})}(e,t,_)})):e}));return Object(a.useEffect)((function(){return!!A&&Object(i.g)(A)}),[A]),Object(b.jsxs)("div",{className:x?"txnPreview firstFailing":"txnPreview",children:[Object(b.jsxs)("div",{className:"heading",children:[Object(b.jsxs)("div",{className:"info",onClick:function(){return!j&&P((function(e){return!e}))},children:[Object(b.jsxs)("div",{className:"summary-container",children:[!j&&Object(b.jsx)("div",{className:"expandTxn",children:C?Object(b.jsx)(l.g,{}):Object(b.jsx)(l.f,{})}),Object(b.jsx)("div",{className:"summary",children:M})]}),x&&Object(b.jsx)("div",{className:"firstFailingLabel",children:"This is the first failing transaction."}),!x&&!w&&!Object(i.d)(I,n,v)&&Object(b.jsx)("div",{className:"unknownWarning",children:"Warning: interacting with an unknown contract or address."})]}),Object(b.jsx)("div",{className:"actionIcons",children:y?Object(b.jsx)(o.z,{disabled:!O||!k,label:k,children:Object(b.jsx)("div",{className:"dismissTxn ".concat(O?"disabled":""),onClick:function(e){e.stopPropagation(),!O&&y.apply(t,e)},children:Object(b.jsx)(d.B,{})})}):Object(b.jsx)(b.Fragment,{})})]}),C?Object(b.jsxs)("div",{className:"advanced",children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)("b",{children:["Interacting with (",Object(b.jsx)("i",{children:"to"}),"):"]})," ",n[0],F?" (".concat(F,")"):""]}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("b",{children:["Value to be sent (",Object(b.jsx)("i",{children:"value"}),"):"]})," ",Object(c.formatUnits)(n[1]||"0x0",18)," ",m(g)]}),Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"Data:"})," ",n[2]]})]}):Object(b.jsx)(b.Fragment,{})]})}},734:function(e,t,n){},763:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(340),a=n(21),i=n(146),s=new a.Interface(r);function c(e,t){var n=e.to,r=e.value,a=e.data,c=e.deploySalt;if("0x"===n||!n){var o=c||"0x69420000000000".concat(Date.now().toString(16).slice(1,9),"00").concat(t.slice(2));return[i.a.identityFactoryAddr,r,s.encodeFunctionData("deploy",[a,o])]}return[n,r||"0x0",a||"0x"]}}}]);
//# sourceMappingURL=12.a78d22a7.chunk.js.map