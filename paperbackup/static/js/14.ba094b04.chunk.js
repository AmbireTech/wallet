(this["webpackJsonpambire-wallet"]=this["webpackJsonpambire-wallet"]||[]).push([[14],{1550:function(e,n,t){},1551:function(e,n,t){},1552:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"allowed","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"addr","type":"address"},{"indexed":false,"internalType":"uint256","name":"salt","type":"uint256"}],"name":"LogDeployed","type":"event"},{"inputs":[],"name":"allowedToDrain","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes","name":"code","type":"bytes"},{"internalType":"uint256","name":"salt","type":"uint256"}],"name":"deploy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes","name":"code","type":"bytes"},{"internalType":"uint256","name":"salt","type":"uint256"},{"internalType":"address","name":"callee","type":"address"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"deployAndCall","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes","name":"code","type":"bytes"},{"internalType":"uint256","name":"salt","type":"uint256"},{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"internalType":"struct Identity.Transaction[]","name":"txns","type":"tuple[]"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"deployAndExecute","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"token","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenAmount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},1643:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return Z}));var s=t(2),a=t.n(s),r=t(11),i=t(17),c=t(8),o=t(7),d=t(229),l=t(184),u=t(37),b=(t(1550),t(3)),m=t(719),j=t(101),f=t(21),h=t(232),p=t(44),x=t(614),g=t(151),v=t(60),O=t(636),y=(t(1551),t(228)),w=t(77),k=t(682),N=t(69),T=t(596),F=t(604),I=t(55),S=t(4),E=["address","symbol","discount","network","icon"],A=["slow","medium","fast","ape"],L="https://blog.ambire.com/move-crypto-with-ambire-pay-gas-with-wallet-and-save-30-on-fees-35dca1002697",C=["xWALLET","WALLET-STAKING","WALLET"];function P(e){return e.balance/e.decimals*e.priceInUSD}var R=function(e){var n,t,s=e.currenciesItems,a=e.tokens,r=e.estimation,c=e.onFeeCurrencyChange,o=e.onDismiss,d=e.feeSpeed,b=e.isGasTankEnabled,m=e.network;if((null===(n=r.selectedFeeToken)||void 0===n?void 0:n.symbol)&&(C.includes(null===(t=r.selectedFeeToken)||void 0===t?void 0:t.symbol)||r.selectedFeeToken.discount))return null;var j=Object(i.a)(a).filter((function(e){return C.includes(e.symbol)&&e.discount&&Object(k.f)(e,d,r,b,m)})).sort((function(e,n){return n.discount-e.discount||(parseInt(e.balance)&&parseInt(n.balance)?0:P(n)-P(e))||C.indexOf(e.symbol)-C.indexOf(n.symbol)}));if(!j.length)return null;var f=j[0],h=f.discount,p=s.find((function(e){return e.value&&("WALLET"===e.value||e.value===f.address)})),x=p?function(){return c(p)}:null,g=p?"USE ".concat(f.symbol):"BUY ".concat(f.symbol),v=!x;return Object(S.jsxs)("div",{className:"wallet-discount-banner row",children:[Object(S.jsxs)("div",{className:"row",children:["Get ",100*h," ",Object(S.jsx)(l.f,{})," fees discount with \xa0",Object(S.jsx)("strong",{children:"$WALLET"})," \xa0",Object(S.jsx)("a",{className:"address row",href:L,target:"_blank",rel:"noreferrer noopener",children:Object(S.jsx)(u.v,{})})]}),!!x&&Object(S.jsx)(w.e,{onClick:x,mini:!0,children:g}),v&&Object(S.jsxs)("div",{className:"swap-info",children:["You can get $WALLET, just use the \xa0",Object(S.jsx)(N.c,{className:"link",to:"/wallet/swap",onClick:o,children:"Swap"})," menu on the left!"]})]})};function D(e){var n,t,s,a,r,i=e.disabled,d=e.signer,m=e.estimation,j=e.network,f=e.setEstimation,h=e.feeSpeed,p=e.setFeeSpeed,x=e.onDismiss,g=e.isGasTankEnabled,v=Object(b.useState)(!1),y=Object(o.a)(v,2),N=y[0],P=y[1];if(!m)return Object(S.jsx)(w.m,{});var D=m&&m.feeInUSD&&!Object(k.f)(m.selectedFeeToken,h,m,g,j);if(m&&!m.success)return Object(k.a)(m.message)?Object(S.jsx)(w.i,{title:"Unable to send transaction",msg:Object(k.d)(m.message)}):Object(S.jsx)(U,{message:Object(S.jsxs)(S.Fragment,{children:["The current transaction batch cannot be sent because it will fail: ",Object(k.g)(m.message)]}),tooltip:Object(k.d)(m.message)});if(!m.feeInNative)return Object(S.jsx)(S.Fragment,{});if(m&&!m.feeInUSD&&m.gasLimit<4e4)return Object(S.jsxs)("div",{children:[Object(S.jsx)("b",{children:"WARNING:"})," Fee estimation unavailable when you're doing your first account transaction and you are not connected to a relayer. You will pay the fee from ",Object(S.jsx)("b",{children:d.address}),", make sure you have ",j.nativeAssetSymbol," there."]});if(m&&m.feeInUSD&&!m.remainingFeeTokenBalances)return Object(S.jsx)("div",{className:"balance-error",children:"Internal error: fee balances not available. This should never happen, please report this on help.ambire.com"});var M,_=j.nativeAssetSymbol,q=null===(n=m.gasTank)||void 0===n?void 0:n.map((M=m.nativeAssetPriceInUSD,function(e){var n="0x0000000000000000000000000000000000000000"===e.address?null:M/e.price;return Object(c.a)(Object(c.a)({},e),{},{symbol:e.symbol.toUpperCase(),balance:I.ethers.utils.parseUnits(e.balance.toFixed(e.decimals).toString(),e.decimals).toString(),nativeRate:n})})),G=g&&(null===q||void 0===q?void 0:q.length)?q:m.remainingFeeTokenBalances||[{symbol:_,decimals:18,address:"0x0000000000000000000000000000000000000000"}],B=function(e){var n=e.value,t=e.label,s=G.find((function(e){var s=e.address,a=e.symbol;return s===n&&a===t}));f(Object(c.a)(Object(c.a)({},m),{},{selectedFeeToken:s}))},W=G.sort((function(e,n){return Object(k.f)(n,A[0],m,g,j)-Object(k.f)(e,A[0],m,g,j)||C.indexOf(n.symbol)-C.indexOf(e.symbol)||(n.discount||0)-(e.discount||0)||(null===e||void 0===e?void 0:e.symbol.toUpperCase().localeCompare(null===n||void 0===n?void 0:n.symbol.toUpperCase()))})).map((function(e){var n=e.address,t=e.symbol,s=e.discount,a=e.network,r=e.icon,i=Object(O.a)(e,E);return Object(c.a)({disabled:!Object(k.f)(Object(c.a)({address:n,symbol:t,discount:s},i),A[0],m,g,j),icon:r||(n?Object(T.a)(g?a:j.id,n):null),label:t,value:n||t},s?{extra:Object(S.jsxs)("div",{className:"discount",children:[" - ",100*s," ",Object(S.jsx)(l.f,{})," "]})}:{})})),Y=m.feeInUSD?Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"section",children:[Object(S.jsx)("div",{className:"section-title",children:"Fee Currency"}),Object(S.jsx)(w.t,{className:"fee-select",disabled:i,defaultValue:(null===(t=m.selectedFeeToken)||void 0===t?void 0:t.address)||(null===(s=m.selectedFeeToken)||void 0===s?void 0:s.symbol),items:W,onChange:B})]})}):Object(S.jsx)(S.Fragment,{}),$=m.selectedFeeToken||{},z=$.discount,J=void 0===z?0:z,V=$.symbol,H=$.nativeRate,K=void 0===H?null:H,X=$.decimals,Q=function(e){return f((function(n){return Object(c.a)(Object(c.a)({},n),{},{customFee:e})}))};if(D){var Z=A.filter((function(e,n){return Object(k.f)(m.selectedFeeToken,e,m,g,j)})),ee=Z[Z.length-1];p(ee)}var ne=function(e){var n=!Object(k.f)(m.selectedFeeToken,e,m,g,j);return i||n},te=A.map((function(e){var n="ETH"===V&&"ETH"===_,t=Object(k.e)(Object(c.a)({},m.selectedFeeToken),Object(c.a)(Object(c.a)({},m),{},{customFee:null}),e,g,j),s=t.feeInFeeToken,a=t.feeInUSD,r=Object(k.c)(s,J),i=Object(k.c)(a,J),o=s+r,d=a?a+i:null,u=null!==K&&d;return Object(S.jsxs)("div",{className:"feeSquare".concat(m.customFee||h!==e?"":" selected").concat(ne(e)?" disabled":""),onClick:function(){return!ne(e)&&function(e){p(e),Q(null),P(!1)}(e)},children:[!!J&&Object(S.jsx)(l.f,{className:"discount-badge"}),Object(S.jsx)("div",{className:"speed",children:e}),Object(S.jsx)("div",{className:"feeEstimation",children:(n?"\u039e ":"")+(u?"$".concat(Object(F.a)(d,!0,4)):Object(F.a)(o,!0,X))+(n||u?"":" ".concat(m.selectedFeeToken.symbol))}),!n&&!u&&Object(S.jsx)("div",{className:"feeEstimation symbol",children:m.selectedFeeToken.symbol})]},e)})),se=Object(k.e)(m.selectedFeeToken,m,h,g,j),ae=se.feeInFeeToken,re=se.feeInUSD,ie=se.savedGas,ce=Object(k.e)(Object(c.a)({},m.selectedFeeToken),Object(c.a)(Object(c.a)({},m),{},{customFee:null}),"slow",g,j),oe=ce.feeInFeeToken,de=ce.feeInUSD,le=Object(k.e)(Object(c.a)({},m.selectedFeeToken),Object(c.a)(Object(c.a)({},m),{},{customFee:null}),"ape",g,j),ue=le.feeInFeeToken,be=le.feeInUSD,me=Object(k.c)(oe,J),je=Object(k.c)(ue,J),fe=Object(k.c)(ae,J),he=Object(k.c)(re,J),pe=Object(k.c)(de,J),xe=Object(k.c)(be,J),ge=ae+fe,ve=re+he,Oe=oe+me,ye=1.2*(ue+je),we=de+pe,ke=1.2*(be+xe),Ne=!!m.customFee&&!isNaN(parseFloat(m.customFee))&&ge<Oe,Te=!!m.customFee&&!isNaN(parseFloat(m.customFee))&&ge>ye;return Object(S.jsxs)(S.Fragment,{children:[D?Object(S.jsxs)("div",{className:"balance-error",children:["Insufficient balance for the fee.",Object(S.jsx)("br",{}),"Accepted tokens: ",(m.remainingFeeTokenBalances||[]).map((function(e){return e.symbol})).join(", "),g&&Object(S.jsx)("div",{children:"Disable your Gas Tank to use the default fee tokens."})]}):Y,R({selectedFeeToken:m.selectedFeeToken,currenciesItems:W,tokens:G,estimation:m,onFeeCurrencyChange:B,onDismiss:x,feeSpeed:h,isGasTankEnabled:g,network:j}),Object(S.jsxs)("div",{className:"section-title",children:[Object(S.jsx)("span",{children:"Transaction Speed"}),j.isGasTankAvailable&&Object(S.jsxs)("span",{children:["Gas Tank: ",g?Object(S.jsx)("span",{className:"gas-tank-enabled",children:"Enabled"}):Object(S.jsx)("span",{className:"gas-tank-disabled",children:"Disabled"})]})]}),Object(S.jsxs)("div",{className:"fee-selector",children:[Object(S.jsxs)("div",{className:"section",children:[Object(S.jsx)("div",{id:"fee-selector",children:te}),N?Object(S.jsxs)("div",{id:"custom-fee-selector",children:[Object(S.jsxs)("div",{className:"title",children:["Custom Fee (",V,")"]}),Object(S.jsx)(w.w,{small:!0,placeholder:"Enter amount",className:"".concat(m.customFee?"selected":""),onChange:function(e){return Q(e)},value:m.customFee}),Ne&&Object(S.jsxs)("div",{className:"price-warning",children:[Object(S.jsx)("div",{children:'Custom Fee too low. You can try to "sign and send" the transaction but most probably it will fail.'}),Object(S.jsxs)("div",{children:["Min estimated fee: \xa0",Object(S.jsxs)(w.e,{textOnly:!0,onClick:function(){return Q(Oe)},children:[Oe," ",V]}),!isNaN(we)&&Object(S.jsxs)("span",{children:["\xa0 (~$",Object(F.a)(we,!0,4),") "]})]})]}),Te&&Object(S.jsxs)("div",{className:"price-warning",children:[Object(S.jsx)("div",{children:"Custom Fee is higher than the APE speed. You will pay more than probably needed. Make sure you know what are you doing!"}),Object(S.jsxs)("div",{children:["Recommended max fee: \xa0",Object(S.jsxs)(w.e,{textOnly:!0,onClick:function(){return Q(ye)},children:[ye," ",V]}),!isNaN(ke)&&Object(S.jsxs)("span",{children:["\xa0 (~$",Object(F.a)(ke,!0,4),") "]})]})]})]}):Object(S.jsxs)("div",{id:"edit-custom-fee",onClick:function(){return P(!0)},children:[Object(S.jsx)(u.o,{}),"Edit fee"]})]}),Object(S.jsxs)("div",{className:"fees-breakdown",children:[Object(S.jsxs)("div",{className:"fee-row native-fee-estimation",children:[Object(S.jsxs)("div",{children:["Fee ",!!J&&Object(S.jsx)("span",{className:"discount-label",children:"*"}),!(!J||!C.includes(null===(a=m.selectedFeeToken)||void 0===a?void 0:a.symbol))&&Object(S.jsxs)("a",{className:"address row discount-label",href:L,target:"_blank",rel:"noreferrer",children:["\xa0",Object(S.jsx)(u.v,{})]}),":"]}),Object(S.jsxs)("div",{className:"fee-amounts",children:[!isNaN(ve)&&Object(S.jsxs)("div",{children:["~$",Object(F.a)(ve,!0,4)]}),!isNaN(ge)&&Object(S.jsx)("div",{children:Object(F.a)(ge,!0,X)+" "+(null===m||void 0===m||null===(r=m.selectedFeeToken)||void 0===r?void 0:r.symbol)})]})]}),!!J&&Object(S.jsxs)("div",{className:"fee-row native-fee-estimation discount-label",children:[Object(S.jsxs)("div",{children:["You save (",100*J,"%):"]}),Object(S.jsx)("div",{className:"fee-amounts",children:Object(S.jsxs)("div",{children:["~$",Object(F.a)(he,!0,4)]})})]}),!!J&&Object(S.jsxs)("div",{className:"fee-row native-fee-estimation discount-label",children:[Object(S.jsx)("div",{children:"You pay:"}),Object(S.jsx)("div",{className:"fee-amounts",children:Object(S.jsxs)("div",{children:["~$",Object(F.a)(re,!0,4)]})})]}),!g&&!isNaN(re/m.gasLimit*ie)&&Object(S.jsxs)("div",{className:"fee-row native-fee-estimation warning-label",children:[Object(S.jsx)("div",{children:"Enable Gas Tank to save:"}),Object(S.jsx)("div",{className:"fee-amounts",children:Object(S.jsxs)("div",{children:["$",Object(F.a)(re/m.gasLimit*ie,!0,4)]})})]}),!!g&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{className:"fee-row native-fee-estimation discount-label",children:[Object(S.jsx)("div",{children:"Gas Tank fee token balance:"}),Object(S.jsx)("div",{className:"fee-amounts",children:Object(S.jsxs)("div",{children:["$",Object(F.a)(m.selectedFeeToken.balanceInUSD,!0,4)]})})]}),!isNaN(re/m.gasLimit*ie)&&Object(S.jsxs)("div",{className:"fee-row native-fee-estimation discount-label",children:[Object(S.jsx)("div",{children:"Gas Tank saves you:"}),Object(S.jsx)("div",{className:"fee-amounts",children:Object(S.jsxs)("div",{children:["$",Object(F.a)(re/m.gasLimit*ie,!0,4)]})})]})]})]})]}),m.feeInUSD?Object(S.jsx)(S.Fragment,{}):Object(S.jsxs)("span",{className:"no-relayer-msg",children:[Object(S.jsx)("b",{children:"WARNING:"})," Paying fees in tokens other than ",_," is unavailable because you are not connected to a relayer. You will pay the fee from ",Object(S.jsx)("b",{children:d.address}),"."]})]})}function U(e){var n=e.message,t=e.tooltip,s=void 0===t?"":t;return Object(S.jsx)("div",{className:"failingTxn",children:Object(S.jsxs)(w.y,{label:s,children:[Object(S.jsxs)("div",{className:"error-title",children:[Object(S.jsx)(y.k,{})," Warning"]}),Object(S.jsx)("div",{className:"error-message",children:n})]})})}function M(e){var n=e.estimation,t=e.feeSpeed,s=e.approveTxn,a=e.rejectTxn,r=e.cancelSigning,i=e.signingStatus,d=e.isGasTankEnabled,l=e.network,m=Object(b.useState)({code:"",passphrase:""}),j=Object(o.a)(m,2),f=j[0],h=j[1];Object(b.useEffect)((function(){return!i&&h((function(e){return Object(c.a)(Object(c.a)({},e),{},{code:""})}))}),[i]);var p=Object(b.useRef)(null),x=a&&Object(S.jsx)(w.e,{danger:!0,icon:Object(S.jsx)(u.I,{}),type:"button",className:"rejectTxn",onClick:a,children:"Reject"}),g=n&&n.feeInUSD&&!Object(k.f)(n.selectedFeeToken,t,n,d,l);if(n&&!n.success||g)return Object(S.jsx)("div",{className:"buttons",children:x});var v=i&&i.inProgress?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(w.m,{}),"Signing..."]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(u.H,{}),"Sign and send"]}),O=i&&i.finalBundle&&i.finalBundle.recoveryMode;return i&&i.quickAcc?Object(S.jsxs)(S.Fragment,{children:[i.confCodeRequired?Object(S.jsxs)("div",{className:"confirmation-code-info",children:[Object(S.jsxs)("div",{className:"confirmation-code-info-title",children:[Object(S.jsx)(u.h,{}),"Confirmation"]}),Object(S.jsxs)("div",{className:"confirmation-code-info-message",children:["otp"===i.confCodeRequired?Object(S.jsx)(S.Fragment,{children:"Please enter your OTP code and your password."}):null,"email"===i.confCodeRequired?O?Object(S.jsx)(S.Fragment,{children:"A confirmation code was sent to your email, please enter it to initiate the recovery."}):Object(S.jsx)(S.Fragment,{children:"A confirmation code was sent to your email, please enter it along with your password."}):null]})]}):null,Object(S.jsxs)("form",{ref:p,className:"quickAccSigningForm",onSubmit:function(e){e.preventDefault()},children:["notRequired"===i.confCodeRequired&&Object(S.jsx)("p",{className:"code-2fa-not-required-msg",children:"You already sent 3 or more transactions to this address, confirmation code is not needed."}),Object(S.jsxs)("div",{className:"inputs-container",children:[Object(S.jsx)(w.w,{small:!0,password:!0,required:!0,minLength:3,placeholder:"Password",value:f.passphrase,style:O?{visibility:"hidden"}:{},disabled:O,onChange:function(e){return h(Object(c.a)(Object(c.a)({},f),{},{passphrase:e}))}}),"notRequired"!==i.confCodeRequired&&Object(S.jsx)(w.w,{small:!0,pattern:"[0-9]+",title:"Confirmation code should be 6 digits",autoComplete:"nope",required:!0,minLength:6,maxLength:6,placeholder:"otp"===i.confCodeRequired?"Authenticator OTP code":"Confirmation code",value:f.code,onChange:function(e){return h(Object(c.a)(Object(c.a)({},f),{},{code:e}))}})]}),Object(S.jsxs)("div",{className:"buttons",children:[Object(S.jsx)(w.e,{clear:!0,disabled:i&&i.inProgress,icon:Object(S.jsx)(u.I,{}),type:"button",className:"cancelSigning",onClick:r,children:"Cancel"}),Object(S.jsx)(w.e,{className:"confirmSigning",onClick:function(){p.current.checkValidity()&&s({quickAccCredentials:f})},children:i&&i.inProgress?Object(S.jsx)(w.m,{}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(u.g,{})," Confirm"]})})]})]})]}):Object(S.jsxs)("div",{className:"buttons",children:[x,Object(S.jsx)(w.e,{className:"approveTxn",disabled:!n||i,onClick:s,children:v})]})}var _=t(807),q=new f.Interface(t(367)),G=new f.Interface(t(1552));function B(e){return W.apply(this,arguments)}function W(){return(W=Object(r.a)(a.a.mark((function e(n){var t,s,r,i,c,o,d,l,u,b,m,j,h,p,x,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.finalBundle,s=n.account,r=n.network,i=n.wallet,c=n.estimation,o=n.feeSpeed,d=n.provider,!(l=t.signer).quickAccManager){e.next=4;break}throw new Error("quickAccManager not supported in relayerless mode yet");case 4:return e.next=6,d.getCode(t.identity).then((function(e){return"0x"!==e}));case 6:if(!e.sent){e.next=13;break}u=c.gasLimit+2e4,b=t.identity,m=q.encodeFunctionData("executeBySender",[t.txns]),e.next=24;break;case 13:return e.next=15,t.getNonce(d);case 15:return t.gasLimit=4e5,e.next=18,t.sign(i);case 18:return b=s.identityFactoryAddr,m=G.encodeFunctionData("deployAndExecute",[s.bytecode,s.salt,t.txns,t.signature]),e.next=22,d.estimateGas({to:b,data:m,from:l.address});case 22:e.t0=e.sent.toNumber(),u=e.t0+2e4;case 24:return e.t1=l.address,e.t2=b,e.t3=m,e.t4=Object(f.hexlify)(u),e.t5=Object(f.hexlify)(Math.floor(c.feeInNative[o]/c.gasLimit*1e18)),e.t6=f.hexlify,e.next=32,d.getTransactionCount(l.address);case 32:if(e.t7=e.sent,e.t8=(0,e.t6)(e.t7),j={from:e.t1,to:e.t2,data:e.t3,gas:e.t4,gasPrice:e.t5,nonce:e.t8},e.prev=35,i.sendTransaction){e.next=45;break}return e.next=39,i.signTransaction(j);case 39:return p=e.sent,e.next=42,d.sendTransaction(p);case 42:h=e.sent.hash,e.next=60;break;case 45:if(!i.provider){e.next=57;break}return e.next=48,i.provider.getNetwork();case 48:if(x=e.sent,g=x.chainId,r.chainId===g){e.next=52;break}throw new Error("Connected to the wrong network: please switch to ".concat(r.name));case 52:return e.next=54,i.sendTransaction({from:j.from,to:j.to,data:j.data,gasPrice:j.gasPrice,nonce:j.nonce});case 54:h=e.sent.hash,e.next=60;break;case 57:return e.next=59,i.sendTransaction({from:j.from,to:j.to,data:j.data,gasPrice:j.gasPrice,gas:j.gas,nonce:j.nonce,chainId:r.chainId});case 59:h=e.sent.hash;case 60:return e.abrupt("return",{success:!0,txId:h});case 63:if(e.prev=63,e.t9=e.catch(35),"INSUFFICIENT_FUNDS"!==e.t9.code){e.next=67;break}throw new Error("Insufficient gas fees: you need to have ".concat(r.nativeAssetSymbol," on ").concat(l.address));case 67:throw e.t9;case 68:case"end":return e.stop()}}),e,null,[[35,63]])})))).apply(this,arguments)}var Y=t(84),$=t(815),z=t(87),J=new f.Interface(t(607)),V="Ambire user rejected the request",H=["xWALLET","WALLET"],K=function(e){return!isNaN(e)&&null!==e},X=function(e,n,t,s,a){return(null===e||void 0===e?void 0:e.length)?e.sort((function(e,n){return H.indexOf(null===n||void 0===n?void 0:n.symbol)-H.indexOf(null===e||void 0===e?void 0:e.symbol)||((null===n||void 0===n?void 0:n.discount)||0)-((null===e||void 0===e?void 0:e.discount)||0)||(null===e||void 0===e?void 0:e.symbol.toUpperCase().localeCompare(null===n||void 0===n?void 0:n.symbol.toUpperCase()))})).find((function(e){return Object(k.f)(e,t,s,a,n)}))||e[0]:{symbol:n.nativeAssetSymbol,decimals:18,address:"0x0000000000000000000000000000000000000000"}};function Q(e){return e&&"NOT_TIME"===e.message?"Your 72 hour recovery waiting period still hasn't ended. You will be able to use your account after this lock period.":e&&"WRONG_ACC_OR_NO_PRIV"===e.message?"Unable to sign with this email/password account. Please contact support.":e&&"INVALID_SIGNATURE"===e.message?"Invalid signature. This may happen if you used password/derivation path on your hardware wallet.":e&&"INSUFFICIENT_PRIVILEGE"===e.message?"Wrong signature. This may happen if you used password/derivation path on your hardware wallet.":e.message||e}function Z(e){var n=e.relayerURL,t=e.accounts,s=e.network,a=e.selectedAcc,r=e.requests,i=e.resolveMany,c=e.replacementBundle,o=e.replaceByDefault,d=e.mustReplaceNonce,l=e.onBroadcastedTxn,u=e.onDismiss,j=e.gasTankState,f=t.find((function(e){return e.id===a})),h=Object(b.useMemo)((function(){return r.filter((function(e){var n=e.type,t=e.chainId,r=e.account,i=e.txn;return"eth_sendTransaction"===n&&t===s.chainId&&r===a&&i&&(!i.from||i.from.toLowerCase()===a.toLowerCase())}))}),[r.map((function(e){return e.id})).join(","),s.chainId,a]),p=Object(b.useMemo)((function(){return c||function(e,n,t){var s=new m.Bundle({network:n,identity:e.id,txns:t.map((function(n){var t=n.txn;return Object($.a)(Array.isArray(t)?t[0]:t,e.id)})),signer:e.signer});if(s.extraGas=t.map((function(e){return e.extraGas||0})).reduce((function(e,n){return e+n}),0),s.requestIds=t.map((function(e){return e.id})),t.some((function(e){return e.meta}))){s.meta={},t.some((function(e){var n;return null===(n=e.meta)||void 0===n?void 0:n.addressLabel}))&&(s.meta.addressLabel=t.map((function(e){var n;return(null===(n=e.meta)||void 0===n?void 0:n.addressLabel)?e.meta.addressLabel:{addressLabel:"",address:""}})));var a=t.find((function(e){var n;return null===(n=e.meta)||void 0===n?void 0:n.xWallet}));a&&(s.meta.xWallet=a.meta.xWallet)}return s}(f,s.id,h)}),[c,s.id,f,h]);return f&&p.txns.length?Object(S.jsx)(ee,{relayerURL:n,bundle:p,replaceByDefault:o,mustReplaceNonce:d,network:s,account:f,resolveMany:i,onBroadcastedTxn:l,onDismiss:u,gasTankState:j}):Object(S.jsx)("div",{id:"sendTransaction",children:Object(S.jsx)("h3",{className:"error",children:"SendTransactions: No account or no requests: should never happen."})})}function ee(e){var n,t,s,f=e.bundle,O=e.replaceByDefault,y=e.mustReplaceNonce,N=e.network,T=e.account,F=e.resolveMany,E=e.relayerURL,A=e.onBroadcastedTxn,L=e.onDismiss,C=e.gasTankState,P=N.isGasTankAvailable?C.find((function(e){return e.account===T.id})):{account:T.id,isEnabled:!1},R=Object(b.useState)(null),q=Object(o.a)(R,2),G=q[0],W=q[1],$=Object(b.useState)(!!O),H=Object(o.a)($,2),Z=H[0],ee=H[1],ne=Object(b.useState)(!1),te=Object(o.a)(ne,2),se=te[0],ae=te[1],re=Object(b.useState)("fast"),ie=Object(o.a)(re,2),ce=ie[0],oe=ie[1],de=Object(p.a)().addToast;!K(y)||O||K(f.nonce)||(console.error("ERROR: SendTransactionWithBundle: mustReplaceNonce is set but we are not using replacementBundle or replaceByDefault"),console.error("ERROR: SendTransactionWithBundle: This is a huge logical error as mustReplaceNonce is intended to be used only when we want to replace a txn"));var le=Object(b.useRef)(!1);Object(b.useEffect)((function(){return le.current=!0,function(){le.current=!1}})),Object(b.useEffect)((function(){f.txns.length&&W(null)}),[f,W]);var ue=Object(b.useRef)(null);ue.current=f,Object(b.useEffect)((function(){if(!se&&f.txns.length){var e=!1,n=function(){return(E?f.estimate({relayerURL:E,fetch:fetch,replacing:!!f.minFeeInUSDPerGas,getNextNonce:!0,gasTank:P.isEnabled}):f.estimateNoRelayer({provider:Object(z.a)(N.id)})).then((function(n){var t;if(!e&&f===ue.current){n.relayerless=!E;var s=null===(t=n.gasTank)||void 0===t?void 0:t.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{symbol:e.symbol.toUpperCase(),balance:I.ethers.utils.parseUnits(e.balance.toFixed(e.decimals).toString(),e.decimals).toString(),nativeRate:"0x0000000000000000000000000000000000000000"===e.address?null:n.nativeAssetPriceInUSD/e.price})}));P.isEnabled&&(n.remainingFeeTokenBalances=s),n.selectedFeeToken=X(n.remainingFeeTokenBalances,N,ce,n,P.isEnabled),W((function(e){return e&&e.customFee?e:(n.remainingFeeTokenBalances&&(n.selectedFeeToken=e&&Object(k.f)(e.selectedFeeToken,ce,n,P.isEnabled,N)&&e.selectedFeeToken||X(n.remainingFeeTokenBalances,N,ce,n,P.isEnabled)),n)}))}})).catch((function(n){e||(console.log("estimation error",n),de("Estimation error: ".concat(n.message||n),{error:!0}))}))};n();var t=setInterval(n,15e3);return function(){e=!0,clearInterval(t)}}}),[f,W,ce,de,N,E,se,P.isEnabled]);var be=Object(b.useCallback)((function(){var e,n;if(!E)return new m.Bundle(Object(c.a)(Object(c.a)({},f),{},{gasLimit:G.gasLimit}));var t=G.selectedFeeToken,s=Object(k.e)(t,G,ce,P.isEnabled,N),a=s.feeInNative,r=s.feeInFeeToken,o=s.addedGas,d=t.symbol===N.nativeAssetSymbol?[g.a.feeCollector,Object(k.h)(a,18),"0x"]:[t.address,"0x0",J.encodeFunctionData("transfer",[g.a.feeCollector,Object(k.h)(r,t.decimals)])],l=null===(e=G.nextNonce)||void 0===e?void 0:e.nonce,u=null===(n=G.nextNonce)||void 0===n?void 0:n.nextNonMinedNonce,b=K(f.nonce)?f.nonce:Z?u:l;if(P.isEnabled){var j,h;if(j=f.txns.length>1?G.gasLimit+(f.extraGas||0):G.gasLimit,"0x0000000000000000000000000000000000000000"===t.address)h=a;else{var p=G.remainingFeeTokenBalances.find((function(e){return e.id===t.id}));h=p&&G.feeInNative[ce]*p.nativeRate}return new m.Bundle(Object(c.a)(Object(c.a)({},f),{},{gasTankFee:{assetId:t.id,value:I.ethers.utils.parseUnits(h.toFixed(t.decimals),t.decimals).toString()},txns:Object(i.a)(f.txns),gasLimit:j,nonce:b}))}return new m.Bundle(Object(c.a)(Object(c.a)({},f),{},{txns:[].concat(Object(i.a)(f.txns),[d]),gasTankFee:null,gasLimit:G.gasLimit+o+(f.extraGas||0),nonce:b}))}),[E,G,ce,P.isEnabled,N,f,Z]),me=function(){var e=Object(r.a)(a.a.mark((function e(){var n,t,s,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G){e.next=2;break}throw new Error("no estimation: should never happen");case 2:if(n=be(),t=Object(z.a)(N.id),s=n.signer,ae({inProgress:!0,finalBundle:n}),r=Object(x.a)({signer:s,signerExtra:T.signerExtra,chainId:N.chainId}),!E){e.next=15;break}return e.next=10,n.sign(r);case 10:return e.next=12,n.submit({relayerURL:E,fetch:fetch});case 12:case 17:return e.abrupt("return",e.sent);case 15:return e.next=17,B({finalBundle:n,account:T,network:N,wallet:r,estimation:G,feeSpeed:ce,provider:t});case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(r.a)(a.a.mark((function e(n){var t,s,r,i,o,d,l,u,b,m,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.quickAccCredentials,G){e.next=3;break}throw new Error("no estimation: should never happen");case 3:if(E){e.next=5;break}throw new Error("Email/Password account signing without the relayer is not supported yet");case 5:return s=se&&se.finalBundle||be(),r=s.signer,i=se&&"notRequired"===se.confCodeRequired,e.next=10,Object(Y.d)("".concat(E,"/second-key/").concat(f.identity,"/").concat(N.id,"/sign"),Object(c.a)(Object(c.a)({signer:r,txns:s.txns,nonce:s.nonce,gasLimit:s.gasLimit},!i&&{code:t&&t.code}),{},{recoveryMode:s.recoveryMode,canSkip2FA:i}));case 10:if(o=e.sent,d=o.signature,l=o.success,u=o.message,b=o.confCodeRequired,l){e.next=22;break}if(u){e.next=18;break}throw new Error("Secondary key: no success but no error message");case 18:if(!u.includes("invalid confirmation code")){e.next=21;break}return de("Unable to sign: wrong confirmation code",{error:!0}),e.abrupt("return");case 21:throw new Error("Secondary key error: ".concat(u));case 22:if(!b){e.next=26;break}ae({quickAcc:!0,finalBundle:s,confCodeRequired:b}),e.next=47;break;case 26:if(d){e.next=28;break}throw new Error("QuickAcc internal error: there should be a signature");case 28:if(T.primaryKeyBackup){e.next=30;break}throw new Error("No key backup found: you need to import the account from JSON or login again.");case 30:if(ae({quickAcc:!0,inProgress:!0,confCodeRequired:i?"notRequired":void 0}),s.recoveryMode){e.next=42;break}return e.next=34,new Promise((function(e){return setTimeout(e,0)}));case 34:return m=t.passphrase||alert("Enter password"),e.next=37,j.Wallet.fromEncryptedJson(JSON.parse(T.primaryKeyBackup),m);case 37:return h=e.sent,e.next=40,s.sign(h);case 40:e.next=43;break;case 42:s.signature=d;case 43:return s.signatureTwo=d,e.next=46,s.submit({relayerURL:E,fetch:fetch});case 46:return e.abrupt("return",e.sent);case 47:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),fe=function(){L(),f.requestIds&&F(f.requestIds,{message:V})},he=h.create({seed:T.id}).toDataURL(),pe=!K(y)||(K(null===G||void 0===G||null===(n=G.nextNonce)||void 0===n?void 0:n.nextNonMinedNonce)?y>=(null===G||void 0===G||null===(t=G.nextNonce)||void 0===t?void 0:t.nextNonMinedNonce):null);return Object(S.jsxs)("div",{id:"sendTransaction",children:[Object(S.jsx)("div",{id:"titleBar",children:Object(S.jsxs)("div",{className:"dismiss",onClick:L,children:[Object(S.jsx)(l.c,{size:35}),"back",Object(S.jsx)(w.y,{label:"You can go back to the main dashboard and add more transactions to this bundle in order to sign & send them all at once.",children:Object(S.jsx)(u.M,{size:25})})]})}),Object(S.jsxs)("div",{className:"container",children:[Object(S.jsxs)("div",{id:"transactionPanel",className:"panel",children:[Object(S.jsx)("div",{className:"heading",children:Object(S.jsxs)("div",{className:"title",children:[f.txns.length," Transaction",f.txns.length>1?"s":""," Waiting"]})}),Object(S.jsxs)("div",{className:"content",children:[Object(S.jsx)("div",{className:"listOfTransactions".concat(f.requestIds?"":" frozen"),children:f.txns.map((function(e,n){var t=G&&!G.success&&G.firstFailing===n,s=Math.floor(Date.now()/3e4);return Object(S.jsx)(_.a,{minute:s,onDismiss:f.requestIds&&function(){return F([f.requestIds[n]],{message:V})},txn:e,network:f.network,account:f.identity,isFirstFailing:t,disableDismiss:!!se,disableDismissLabel:"Cannot modify transaction bundle while a signing procedure is pending",addressLabel:!!f.meta&&f.meta.addressLabel},[].concat(Object(i.a)(e),[n]).join(":"))}))}),Object(S.jsx)("div",{className:"separator"}),Object(S.jsx)("div",{className:"transactionsNote",children:f.requestIds&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("b",{children:[Object(S.jsx)(d.b,{size:16})," DEGEN TIP"]}),Object(S.jsx)("span",{children:'You can sign multiple transactions at once. Add more transactions to this batch by interacting with a connected dApp right now. Alternatively, you may click "Back" to add more transactions.'})]})})]})]}),Object(S.jsxs)("div",{id:"detailsPanel",className:"panel",children:[Object(S.jsxs)("div",{id:"options-container",children:[Object(S.jsxs)("div",{className:"section",id:"signing-details",children:[Object(S.jsx)("div",{className:"section-title",children:"Signing With"}),Object(S.jsxs)("div",{className:"section-content",children:[Object(S.jsxs)("div",{className:"account",children:[Object(S.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(he,")")}}),Object(S.jsx)("div",{className:"address",children:T.id})]}),Object(S.jsxs)("div",{className:"network",children:["on",Object(S.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(v.b[N.id],")")}}),Object(S.jsx)("div",{className:"address",children:N.name})]})]})]}),pe&&Object(S.jsx)(D,{disabled:se&&se.finalBundle&&!(G&&!G.success),signer:f.signer,estimation:G,setEstimation:W,network:N,feeSpeed:ce,setFeeSpeed:oe,onDismiss:L,isGasTankEnabled:P.isEnabled&&!!E})]}),!K(f.nonce)&&!K(y)&&!!(null===G||void 0===G||null===(s=G.nextNonce)||void 0===s?void 0:s.pendingBundle)&&Object(S.jsx)("div",{children:Object(S.jsx)(w.g,{label:"Replace currently pending transaction",checked:Z,onChange:function(e){var n=e.target;return ee(n.checked)}})}),K(y)&&Object(S.jsxs)(S.Fragment,{children:[(pe||null===pe)&&Object(S.jsxs)("div",{className:"replaceInfo warning",children:[Object(S.jsx)(u.db,{}),Object(S.jsx)("span",{children:"This transaction bundle will replace the one that's currently pending."})]}),null===pe&&Object(S.jsx)("div",{children:Object(S.jsx)(w.m,{})}),!1===pe&&Object(S.jsxs)("div",{id:"actions-container-replace",children:[Object(S.jsxs)("div",{className:"replaceInfo info",children:[Object(S.jsx)(u.u,{}),Object(S.jsx)("span",{children:"The transaction you're trying to replace has already been confirmed"})]}),Object(S.jsx)("div",{className:"buttons",children:Object(S.jsx)(w.e,{clear:!0,icon:Object(S.jsx)(u.I,{}),type:"button",className:"rejectTxn",onClick:fe,children:"Close"})})]})]}),pe&&Object(S.jsxs)(S.Fragment,{children:[G&&G.success&&!1===G.isDeployed&&f.gasLimit?Object(S.jsxs)("div",{className:"first-tx-note",children:[Object(S.jsxs)("div",{className:"first-tx-note-title",children:[Object(S.jsx)(u.u,{}),"Note"]}),Object(S.jsxs)("div",{className:"first-tx-note-message",children:["Because this is your first Ambire transaction, this fee is ",(6e4/f.gasLimit*100).toFixed(),"% higher than usual because we have to deploy your smart wallet. Subsequent transactions will be cheaper"]})]}):null,Object(S.jsx)("div",{id:"actions-container",children:f.signer.quickAccManager&&!E?Object(S.jsx)(U,{message:"Signing transactions with an email/password account without being connected to the relayer is unsupported."}):Object(S.jsx)("div",{className:"section",id:"actions",children:Object(S.jsx)(M,{estimation:G,approveTxn:function(e){var n=e.quickAccCredentials;if(!se||!se.inProgress){ae(se||{inProgress:!0}),T.signerExtra&&"ledger"===T.signerExtra.type&&de("Please confirm this transaction on your Ledger device.",{timeout:1e4}),T.signerExtra&&"Lattice"===T.signerExtra.type&&de("Please confirm this transaction on your Lattice device.",{timeout:1e4});var t=f.requestIds;(f.signer.quickAccManager?je({quickAccCredentials:n}):me()).then((function(e){e&&(le.current&&ae(null),!(!e.success&&e.message&&e.message.match(/underpriced/i))&&t&&F(t,{success:e.success,result:e.txId,message:e.message}),e.success?(A(e.txId),L()):(e.message.includes("was already mined")&&L(),de("Transaction error: ".concat(Q(e)),{error:!0})))})).catch((function(e){le.current&&ae(null),console.error(e),e&&e.message.includes("must provide an Ethereum address")?de("Signing error: not connected with the correct address. Make sure you're connected with ".concat(f.signer.address,"."),{error:!0}):e&&e.message.includes("0x6b0c")?de("Ledger: unknown error (0x6b0c): is your Ledger unlocked and in the Ethereum application?",{error:!0}):de("Signing error: ".concat(Q(e)),{error:!0})}))}},rejectTxn:fe,cancelSigning:function(){return ae(null)},signingStatus:se,feeSpeed:ce,isGasTankEnabled:P.isEnabled&&!!E,network:N})})})]})]})]})]})}},596:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var s={"0xb468a1e5596cfbcdf561f21a10490d99b4bb7b68":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg/220px-Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg","0x88800092ff476844f74dc2fc427974bbee2794ae":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/ambire_logo_white_bg_250x250.png","0x47cd7e91c3cbaaf266369fe8518345fc4fc12935":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png","0xb6456b57f03352be48bf101b46c1752a0813491a":"https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/vaporwave-adex-2.png","0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c":"https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/ADX-loyalty%40256x256.png","0xec3b10ce9cabab5dbf49f946a623e294963fbb4e":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png","0xe9415e904143e42007865e6864f7f632bd054a08":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/Ambire_logo_250x250.png","0xade00c28244d5ce17d72e40330b1c318cd12b7c3":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/official-logos/Ambire-AdEx/Ambire_AdEx_Symbol_color_white_bg.png"},a="https://storage.googleapis.com/zapper-fi-assets/tokens";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=n.toLowerCase(),r=e.toLowerCase();return s[t]||"".concat(a,"/").concat(r,"/").concat(t,".png")}},604:function(e,n,t){"use strict";function s(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18;if(isNaN(e)||isNaN(parseFloat(e))||"number"!==typeof e&&"string"!==typeof e)return e;try{var s=Math.min(2,t||0);return("number"===typeof e?e:parseFloat(e)).toLocaleString(void 0,{useGrouping:n,maximumFractionDigits:Math.max(s,t),minimumFractionDigits:s})}catch(a){return console.error(a),e}}t.d(n,"a",(function(){return s}))},617:function(e,n,t){"use strict";t.d(n,"c",(function(){return m})),t.d(n,"a",(function(){return j})),t.d(n,"d",(function(){return f})),t.d(n,"b",(function(){return h})),t.d(n,"e",(function(){return p})),t.d(n,"f",(function(){return x})),t.d(n,"g",(function(){return g}));var s=t(8),a=t(2),r=t.n(a),i=t(11),c=t(633),o=t(55),d=t(619),l=t(609),u=2147483648,b={startPath:[2147483692,2147483708,u,0,0],n:10},m=function(e){var n={name:"Ambire Wallet",crypto:l,privKey:e};return new c.Client(n)},j=function(){var e=Object(i.a)(r.a.mark((function e(n,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,s){n.connect(t,(function(n,t){n?s("Lattice connect: ".concat(n," Or check if the DeviceID is correct.")):e({isPaired:!!t,errConnect:!1})}))})).catch((function(e){return console.error(e),{isPaired:!1,errConnect:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(r.a.mark((function e(n,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,s){n.pair(t,(function(n,t){n?s("Lattice connect: ".concat(n)):e({hasActiveWallet:t,errPair:!1})}))})).catch((function(e){return console.error(e),{hasActiveWallet:!1,errPair:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){n.getAddresses(b,(function(n,s){if(n)t("Lattice get addresses: ".concat(n));else{if(!s)throw new Error("Lattice could not get the addresses.");e({res:s,errGetAddresses:!1})}}))})).catch((function(e){return console.error(e),{res:null,errGetAddresses:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=Object(i.a)(r.a.mark((function e(n,t){var s,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={protocol:"signPersonal",payload:o.ethers.utils.hexlify(t),signerPath:[2147483692,2147483708,u,0,0]},a={currency:"ETH_MSG",data:s},e.next=4,new Promise((function(e,t){n.sign(a,(function(n,s){if(n)t(n);else{if(!s)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+s.sig.r+s.sig.s+s.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(r.a.mark((function e(n,t){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={currency:"ETH_MSG",data:{signerPath:[2147483692,2147483708,u,0,0],protocol:"eip712",payload:t}},e.next=3,new Promise((function(e,t){n.sign(s,(function(n,s){if(n)t(n);else{if(!s)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+s.sig.r+s.sig.s+s.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),g=function(){var e=Object(i.a)(r.a.mark((function e(n,t,a){var i,c,o,l,b,m,j,f,h,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.to,c=t.data,o=t.gas,l=t.gasPrice,b=t.nonce,m=t.value,j=void 0===m?0:m,delete(f=Object(s.a)(Object(s.a)({},t),{},{gasLimit:t.gasLimit||t.gas,chainId:a})).from,delete f.gas,h={nonce:b,gasLimit:o||t.gasLimit,gasPrice:l,to:i,value:j,data:c||"",signerPath:[2147483692,2147483708,u,0,0],chainId:a,useEIP155:!0},p={currency:"ETH",data:h},e.next=8,new Promise((function(e,t){n.sign(p,(function(n,s){if(n)t(n);else{if(!s)throw new Error("Lattice could not sign the message.");delete f.v;var a=Object(d.a)(f,{r:"0x"+s.sig.r,s:"0x"+s.sig.s,v:s.sig.v[0].toString(16)});e({serializedSigned:a,errSignTxn:!1})}}))})).catch((function(e){return console.error(e),{serializedSigned:null,errSignTxn:e}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(n,t,s){return e.apply(this,arguments)}}()},636:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var s=t(108);function a(e,n){if(null==e)return{};var t,a,r=Object(s.a)(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}},682:function(e,n,t){"use strict";t.d(n,"f",(function(){return s})),t.d(n,"b",(function(){return a})),t.d(n,"g",(function(){return i})),t.d(n,"d",(function(){return c})),t.d(n,"a",(function(){return o})),t.d(n,"h",(function(){return d})),t.d(n,"c",(function(){return l})),t.d(n,"e",(function(){return u}));function s(e,n,t,s,a){if((null===t||void 0===t?void 0:t.relayerless)&&"0x0000000000000000000000000000000000000000"===(null===e||void 0===e?void 0:e.address))return!0;if(!e)return!1;var r=u(e,t,n,s,a).feeInFeeToken;return parseInt(e.balance)/Math.pow(10,e.decimals)>r}function a(e){return(null===e||void 0===e?void 0:e.address)&&"0x0000000000000000000000000000000000000000"!==(null===e||void 0===e?void 0:e.address)?3e4:12e3}var r=["caller is a contract","caller is another contract","contract not allowed","contract not supported","No contractz allowed","o contracts","contracts allowed","ontract is not allowed","aller must be user","aller must be a user","ontract call not allowed"];function i(e){if(e)return e.includes("Router: EXPIRED")?"Swap expired":e.includes("Router: INSUFFICIENT_OUTPUT_AMOUNT")?"Swap will suffer slippage higher than your requirements":e.includes("INSUFFICIENT_PRIVILEGE")?"Your signer address is not authorized.":r.find((function(n){return e.includes(n)}))?"This dApp does not support smart wallets.":e}function c(e){if(e)return e.includes("Router: EXPIRED")?"Try performing the swap again":e.includes("Router: INSUFFICIENT_OUTPUT_AMOUNT")?"Try performing the swap again or increase your slippage requirements":e.includes("INSUFFICIENT_PRIVILEGE")?"If you set a new signer for this account, try re-adding the account.":r.find((function(n){return e.includes(n)}))?"WARNING! We detected that this dApp intentionally blocks smart contract calls. This is a highly disruptive practice, as it breaks support for all smart wallets (Ambire, Gnosis Safe and others). We recommend you report this to the dApp ASAP and ask them to fix it.":"Sending this transaction batch would have resulted in an error, so we prevented it."}function o(e){return r.find((function(n){return e.includes(n)}))}function d(e,n){return"0x"+Math.round(e*Math.pow(10,n)).toString(16)}function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n&&e?1===n?e:e/(1-n)*n:0}function u(e,n,t,s,r){var i=function(e,n,t){if(!(null===n||void 0===n?void 0:n.feeInUSD)||!e)return{multiplier:1,addedGas:0};var s=a(e);return t?{addedGas:0,multiplier:1}:{multiplier:parseFloat(((n.gasLimit+s)/n.gasLimit).toFixed(4)),addedGas:s}}(e,n,s),c=i.addedGas,o=i.multiplier,d=a(e),l=1-((null===e||void 0===e?void 0:e.discount)||0),u=o*l,b=(null===e||void 0===e?void 0:e.nativeRate)||1,m=s&&"0x0000000000000000000000000000000000000000"===e.address&&r.id!==e.network,j=n.customFee?n.customFee*l/b:m?n.feeInNative[t]*u/b*n.nativeAssetPriceInUSD/e.price:n.feeInNative[t]*u;return{feeInNative:j,feeInUSD:isNaN(n.nativeAssetPriceInUSD)?void 0:m?j*e.price:j*n.nativeAssetPriceInUSD,feeInFeeToken:j*b,addedGas:c,savedGas:d}}},688:function(e,n){},689:function(e,n){},690:function(e,n){},691:function(e,n){},693:function(e,n){},694:function(e,n){},695:function(e,n){},709:function(e,n){},807:function(e,n,t){"use strict";t.d(n,"a",(function(){return p}));var s=t(7),a=(t(808),t(3)),r=t(155),i=t(60),c=t(21),o=t(77),d=t(616),l=t(37),u=t(152),b=t(596),m=t(604),j=t(154),f=t(4);function h(e){var n=i.a.find((function(n){return n.id===e}));return n?n.nativeAssetSymbol:"UNKNW"}function p(e){var n=this,t=e.txn,p=e.onDismiss,x=e.network,g=e.account,v=e.isFirstFailing,O=e.mined,y=e.disableExpand,w=e.disableDismiss,k=e.disableDismissLabel,N=e.addressLabel,T=void 0===N?null:N,F=Object(j.a)().constants,I=F.tokenList,S=F.humanizerInfo,E=Object(a.useState)(!1),A=Object(s.a)(E,2),L=A[0],C=A[1],P=Object(r.b)(S,t[0]),R=i.a.find((function(e){return e.id===x})),D=Object(r.c)(S,I,t,x,g,{mined:O,extended:!0}).map((function(e){return Array.isArray(e)?e.map((function(e,n){return function(e,n,t){if(1===e.length)return e;if(0===n)return Object(f.jsx)("div",{className:"action ".concat(e.toLowerCase()),children:e},"item-".concat(n));if(!e.type)return Object(f.jsx)("div",{className:"word",children:e},"item-".concat(n));if("token"===e.type)return Object(f.jsxs)("div",{className:"token",children:[e.amount>0&&Object(f.jsx)("span",{children:Object(m.a)(e.amount,!0,e.decimals)}),null!==e.decimals&&e.symbol?Object(f.jsxs)(a.Fragment,{children:[e.address&&Object(f.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(Object(b.a)(t.id,e.address),")")}}),e.symbol]}):e.amount>0?"units of unknown token":null]},"item-".concat(n));if("address"===e.type)return Object(f.jsx)("a",{className:"address",href:e.address?"".concat(t.explorerUrl,"/address/").concat(e.address):null,target:"_blank",rel:"noreferrer",onClick:function(e){return e.stopPropagation()},children:Object(f.jsxs)(o.y,{disabled:!e.address,label:e.address,children:[e.name?e.name:e.address,e.address?Object(f.jsx)(d.c,{}):null]})},"item-".concat(n));if("network"===e.type)return Object(f.jsxs)("div",{className:"network",children:[e.icon?Object(f.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(e.icon,")")}}):null,e.name]},"item-".concat(n));if("erc721"===e.type){var s=e.network&&e.address&&e.id;return Object(f.jsxs)("a",{className:"erc721",href:s?"#/wallet/nft/".concat(e.network,"/").concat(e.address,"/").concat(e.id):null,target:"_blank",rel:"noreferrer",onClick:function(e){return e.stopPropagation()},children:[e.name,s?Object(f.jsx)(d.c,{}):null]},"item-".concat(n))}return Object(f.jsx)(f.Fragment,{})}(e,n,R)})):e}));return Object(a.useEffect)((function(){return!!T&&Object(r.g)(T)}),[T]),Object(f.jsxs)("div",{className:v?"txnPreview firstFailing":"txnPreview",children:[Object(f.jsxs)("div",{className:"heading",children:[Object(f.jsxs)("div",{className:"info",onClick:function(){return!y&&C((function(e){return!e}))},children:[Object(f.jsxs)("div",{className:"summary-container",children:[!y&&Object(f.jsx)("div",{className:"expandTxn",children:L?Object(f.jsx)(u.g,{}):Object(f.jsx)(u.f,{})}),Object(f.jsx)("div",{className:"summary",children:D})]}),v&&Object(f.jsx)("div",{className:"firstFailingLabel",children:"This is the first failing transaction."}),!v&&!O&&!Object(r.d)(S,t,g)&&Object(f.jsx)("div",{className:"unknownWarning",children:"Warning: interacting with an unknown contract or address."})]}),Object(f.jsx)("div",{className:"actionIcons",children:p?Object(f.jsx)(o.y,{disabled:!w||!k,label:k,children:Object(f.jsx)("div",{className:"dismissTxn ".concat(w?"disabled":""),onClick:function(e){e.stopPropagation(),!w&&p.apply(n,e)},children:Object(f.jsx)(l.I,{})})}):Object(f.jsx)(f.Fragment,{})})]}),L?Object(f.jsxs)("div",{className:"advanced",children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("b",{children:["Interacting with (",Object(f.jsx)("i",{children:"to"}),"):"]})," ",t[0],P?" (".concat(P,")"):""]}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("b",{children:["Value to be sent (",Object(f.jsx)("i",{children:"value"}),"):"]})," ",Object(c.formatUnits)(t[1]||"0x0",18)," ",h(x)]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"Data:"})," ",t[2]]})]}):Object(f.jsx)(f.Fragment,{})]})}},808:function(e,n,t){},815:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var s=t(376),a=t(21),r=t(151),i=new a.Interface(s);function c(e,n){var t=e.to,s=e.value,a=e.data,c=e.deploySalt;if("0x"===t||!t){var o=c||"0x69420000000000".concat(Date.now().toString(16).slice(1,9),"00").concat(n.slice(2));return[r.a.identityFactoryAddr,s,i.encodeFunctionData("deploy",[a,o])]}return[t,s||"0x0",a||"0x"]}}}]);
//# sourceMappingURL=14.ba094b04.chunk.js.map