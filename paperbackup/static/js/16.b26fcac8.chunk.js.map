{"version":3,"sources":["components/Wallet/Dashboard/Balances/Balances.module.scss","components/Wallet/Dashboard/Balances/BalanceItem/BalanceItem.module.scss","components/Wallet/Dashboard/Protocols/Protocols.module.scss","components/Wallet/Dashboard/Protocols/ProtocolsPlaceholder/ProtocolsPlaceholder.module.scss","components/Wallet/Dashboard/Collectibles/Collectibles.module.scss","components/Wallet/Dashboard/Collectibles/CollectiblesPlaceholder/CollectiblesPlaceholder.module.scss","components/Wallet/Dashboard/Promotions/Promotions.module.scss","components/Wallet/Dashboard/OutdatedBalancesMsg/OutdatedBalancesMsg.module.scss","components/Wallet/Dashboard/Dashboard.module.scss","resources/icons/gas-tank.svg","components/Wallet/Dashboard/Balances/BalanceItem/BalanceItem.js","components/Wallet/Dashboard/Balances/Balances.js","components/Wallet/Dashboard/Protocols/ProtocolsPlaceholder/ProtocolsPlaceholder.js","components/Wallet/Dashboard/Protocols/Protocols.js","components/Wallet/Dashboard/Collectibles/CollectiblesPlaceholder/CollectiblesPlaceholder.js","components/Wallet/Dashboard/Collectibles/Collectibles.js","components/common/FinalCountdown/FinalCountdown.js","components/Wallet/Dashboard/Promotions/Promotions.js","resources/icons/alert.svg","components/Wallet/Dashboard/OutdatedBalancesMsg/OutdatedBalancesMsg.js","components/Wallet/Dashboard/Dashboard.js","hooks/usePasswordRecoveryCheck.js","../node_modules/tiny-warning/dist/tiny-warning.esm.js","../../modules/BrowserRouter.js","../../modules/HashRouter.js","../../modules/utils/locationUtils.js","../../modules/Link.js","../../modules/NavLink.js","components/Wallet/Security/PendingRecoveryNotice/PendingRecoveryNotice.js","consts/specialAddresses.js","lib/assetMigrationDetector.js","consts/permittableCoins.js","components/Wallet/AssetsMigration/AssetsMigrationSelector.js","components/Wallet/AssetsMigration/AssetsMigrationPermitter.js","components/Wallet/AssetsMigration/AssetsMigrationNative.js","components/Wallet/AssetsMigration/AssetsMigration.js","components/Modals/AssetsMigrationModal/AssetsMigrationModal.js","components/Wallet/AssetsMigration/AssetsMigrationBanner.js"],"names":["module","exports","_rect","_g","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgGasTank","_ref","svgRef","title","titleId","props","id","xmlns","width","height","viewBox","ref","transform","fill","d","ForwardRef","BalanceItem","onClick","icon","name","value","decimalValue","className","styles","balanceContainer","network","purpleHighlight","Balances","portfolio","selectedNetwork","setNetwork","hidePrivateValue","relayerURL","selectedAccount","otherBalancesRef","match","useRef","history","useHistory","networkDetails","networks","find","otherBalances","filter","total","full","otherBalancesLoading","entries","balancesByNetworksLoading","ntw","urlGetBalance","useRelayerData","url","balancesRes","data","isLoading","gasTankBalances","map","balanceInUSD","reduce","a","b","Number","toString","toFixed","split","truncated","gasTankDetails","label","decimals","handleSetBlur","useCallback","el","current","maxScroll","scrollHeight","clientHeight","scrollTop","classList","remove","bottomOverflow","toggle","useEffect","wrapper","isCurrNetworkBalanceLoading","onScroll","style","backgroundImage","push","iconSvg","noOtherBalancesWrapper","noOtherBalances","ProtocolsPlaceholder","onClickAddToken","onClickShowToken","listHiddenTokens","useLocalStorage","hiddenTokensCount","placeholderOverlay","to","small","addToken","mini","clear","cursor","category","list","symbol","balance","balanceUSD","token","src","alt","separator","currency","dollar","Protocols","account","userSorting","setUserSorting","showModal","useModals","useState","failedImg","setFailedImg","isHideTokenModalOpen","setIsHideTokenModalOpen","isCurrNetworkProtocolsLoading","tokens","protocols","sortType","isMobileScreen","useCheckMobileScreen","useDragAndDrop","prev","items","chainId","dragStart","dragEnter","handle","dragTarget","drop","sortedTokens","sort","address","decreasing","localeCompare","otherProtocols","shouldShowPlaceholder","tokenItem","index","img","send","sortedTokensLength","logo","includes","getTokenIcon","draggable","onDragStart","e","contains","preventDefault","onMouseDown","onDragEnter","onDragEnd","onDragOver","size","dragHandle","body","onError","failed","formatFloatTokenAmount","actions","sendButton","openAddTokenModal","AddTokenModal","openHideTokenModal","sortHolder","sortButtons","color","wrapperBtns","tokenImageUrl","assets","CollectiblesPlaceholder","isPrivateMode","collectiblesLength","placeholderText","collectibles","collectiblesWrapper","collectionName","collectionImg","image","price","collectible","artwork","info","collection","collectionIcon","details","Collectibles","params","useParams","maxPages","Math","ceil","defaultPage","useMemo","min","max","page","setPage","collectiblesList","slice","paginationControls","paginationTitle","paginationCurrent","replace","uri","tokenId","assetName","assetImg","startsWith","endsWith","join","toTwoDigits","num","Countdown","endDateTime","timeLeft","setTimeLeft","useLayoutEffect","interval","setInterval","diff","Date","getTime","days","hours","minutes","seconds","floor","getTimeDiff","clearInterval","Promo","period","text","resources","togglePromo","minimized","pattern","RegExp","emojies","background","linksRes","links","anchors","href","anc","rel","elmojies","elmos","elmo","emoji","fontSize","notice","backgroundColor","x","timer","closeBtn","Promotions","promo","rewardsData","rewards","defaultValue","closedPromos","setClosedPromos","promoId","prevClosed","splice","_path","_path2","SvgAlert","OutdatedBalancesMsg","alertWrapper","alert","explorerUrl","link","shadow","tabSegments","Dashboard","privateMode","accounts","addRequest","useStorage","showSendTxns","tabId","chartTokensData","setChartTokensData","tab","setTab","currentAccount","toLowerCase","now","cacheBreak","setCacheBreak","relayerData","setRelayerData","accountNetworkPair","setAccountNetworkPair","isPasswordRecoveryCheckLoading","setIsPasswordRecoveryCheckLoading","isRefreshingOnly","setIsRefreshingOnly","intvl","setTimeout","clearTimeout","errMsg","privileges","recoveryLock","hasPendingReset","signer","quickAccManager","status","preRecovery","abiCoder","AbiCoder","timelock","one","two","keccak256","encode","accHash","usePasswordRecoveryCheck","isBalancesCachedCurrentNetwork","cachedBalancesByNetworks","tokensData","empty","requestOtherProtocolsRefresh","AssetsMigrationBanner","closeable","PendingRecoveryNotice","overview","cn","chart","panel","topPanels","hidePrivateContent","titleClassName","panelTitle","segments","onChange","footer","missingTokenNotice","warning","condition","message","BrowserRouter","createHistory","_this","render","React","Router","children","Component","HashRouter","resolveToLocation","currentLocation","normalizeToLocation","createLocation","forwardRefShim","C","forwardRef","shiftKey","LinkAnchor","forwardedRef","innerRef","navigate","rest","event","ex","defaultPrevented","button","metaKey","altKey","ctrlKey","isModifiedEvent","Link","component","RouterContext","Consumer","context","invariant","location","createHref","isDuplicateNavigation","createPath","createElement","NavLink","ariaCurrent","activeClassName","activeStyle","classNameProp","exact","isActiveProp","isActive","locationProp","sensitive","strict","styleProp","toLocation","path","pathname","escapedPath","matchPath","joinClassnames","classnames","isAlreadyInitiated","createRecoveryRequest","bundle","buildRecoveryBundle","primaryKeyBackup","recoveryLockStatus","remainingTime","styleClass","remaining","ZERO_ADDRESS","assetMigrationDetector","networkId","relayerlessOnly","Promise","resolve","fetchGet","VELCRO_API_ENDPOINT","ZAPPER_API_KEY","then","velcroResponse","signer_","products","customTokens","urlCustomTokens","JSON","stringify","finalResponse","native","availableBalance","balanceRaw","rate","catch","err","Error","PERMIT_TYPE_2612","type","PERMIT_TYPE_DAI","EIP712DomainWithVersion","EIP712DomainWithoutNameNorVersion","EIP712Domain","EIP712DomainWithSalt","PERMITTABLE_COINS","version","domainType","permitType","nonceFunction","salt","ERC20PermittableInterface","Interface","AssetsMigrationSelector","signerAccount","identityAccount","setIsSelectionConfirmed","setStep","setModalButtons","hideModal","setSelectedTokensWithAllowance","setGasSpeed","setStepperSteps","hidden","selectableTokens","setSelectableTokens","selectableTokensUserInputs","setSelectableTokensUserInputs","nativeToken","setNativeToken","setIsLoading","gasData","setGasData","estimatedGasFees","setEstimatedGasFees","selectedGasSpeed","setSelectedGasSpeed","tokensAllowances","setTokenAllowances","isAddCustomTokenFormShown","setIsAddCustomTokenFormShown","isCustomTokenPending","setIsCustomTokenPending","customTokenAddress","setCustomTokenAddress","customTokenError","setCustomTokenError","customTokenInput","inputRefs","updateSelectableTokenUserInputs","callback","findIndex","updated","toggleTokenSelection","minHumanAmount","t","focus","old","selected","currentHumanAmount","humanAmount","amount","BigNumber","multipliedBy","addCustomToken","provider","getProvider","ethers","utils","isAddress","tokenContract","Contract","symbolPromise","decimalsPromise","allowancePromise","allowance","availableSignerBalancePromise","balanceOf","all","promises","signerBalance","toNumber","selectedAmount","div","gt","console","log","canCoverGasFees","speed","nativeToSpend","gasFees","signerTransactionsCost","plus","lte","getMaxTransferableNative","minus","consolidatedSelectableTokens","st","confirmTokenSelection","tokensToMigrate","error","consolidatedTokens","regularTransfersCount","nativeTransfersCount","signerTransactionsConsumption","nativeRate","gasFeeAssets","GAS_SPEEDS","forEach","gasPrice","maxPriorityFeePerGas","signerTransactionsCostUSD","allowanceResults","onAssetAmountChange","val","item","isEqualTo","isNaN","newHumanAmount","comparedTo","dividedBy","steps","tokensTitleActions","AmbireLoading","labelClassName","checked","element","placeholder","ROUND_DOWN","nativeAssetSymbol","values","f","AssetsMigrationPermitter","signerExtra","selectedTokensWithAllowance","setError","gasSpeed","tokensPermissions","setTokensPermissions","tokensTransfers","setTokensTransfers","tokensPendingStatus","setTokensPendingStatus","hasRefusedOnce","setHasRefusedOnce","lastRefusalError","setLastRefusalError","hasCorrectAccountAndChainId","setHasCorrectAccountAndChainId","currentGasPrice","setCurrentGasPrice","wallet","setWallet","getConsolidatedTokensPure","remapped","signing","signature","sent","pending","checkWalletConnection","isConnected","connected","readyTokensCount","count","sendToken","waitForRcpt","tokenToMigrate","sendData","encodeFunctionData","transferResult","sendTransaction","from","gasLimit","rcpt","wait","cancelMigration","completeMigration","getWallet","nextTokenToAsk","signed","initialTokensTransfers","Button","gte","AssetsMigrationNative","nativeTokenData","hasERC20Tokens","setBeforeCloseModalHandler","hasMigratedNative","setHasMigratedNative","isMigrationPending","setIsMigrationPending","nativeAmount","setNativeAmount","maxRecommendedAmount","setMaxRecommendedAmount","transactionEstimationCost","setTransactionEstimationCost","nativeHumanAmount","setNativeHumanAmount","hasModifiedAmount","setHasModifiedAmount","continueMigration","erc20TransfersCount","permittable","migrateNative","updateAmount","nativeTransactionCost","transfersTransactionCost","recommendedBN","onAmountChange","initialHumanAmount","buttons","getDisplayedButtons","AssetsMigration","setModalSteps","setNativeTokenData","setHasERC20Tokens","isSelectionConfirmed","step","stepperSteps","showCloseConfirmation","setShowCloseConfirmation","stepIndex","s","beforeCloseHandle","AssetsMigrationModal","modalButtons","modalSteps","currentStep","noLabels","linkMargin","hasSignerAssets","setHasSignerAssets","migrationMessageSeen","setMigrationMessageSeen","migrationMessageSeenStorage","setMigrationMessageSeenStorage","closeMigrationMessage","unmounted","relevantAssets","checkSignerAssets"],"mappings":"2GACAA,EAAOC,QAAU,CAAC,QAAU,0BAA0B,eAAiB,iCAAiC,gBAAkB,kCAAkC,cAAgB,gCAAgC,eAAiB,iCAAiC,KAAO,uBAAuB,QAAU,0BAA0B,uBAAyB,yCAAyC,gBAAkB,oC,qBCApZD,EAAOC,QAAU,CAAC,gBAAkB,qCAAqC,iBAAmB,sCAAsC,QAAU,+B,qBCA5ID,EAAOC,QAAU,CAAC,QAAU,2BAA2B,SAAW,4BAA4B,MAAQ,yBAAyB,WAAa,8BAA8B,YAAc,+BAA+B,YAAc,+BAA+B,KAAO,wBAAwB,MAAQ,yBAAyB,KAAO,wBAAwB,WAAa,8BAA8B,UAAY,6BAA6B,KAAO,wBAAwB,KAAO,wBAAwB,QAAU,2BAA2B,SAAW,4BAA4B,OAAS,0BAA0B,OAAS,0BAA0B,QAAU,2BAA2B,MAAQ,yBAAyB,WAAa,gC,qBCA1tBD,EAAOC,QAAU,CAAC,QAAU,sCAAsC,mBAAqB,iDAAiD,SAAW,uCAAuC,MAAQ,oCAAoC,WAAa,yCAAyC,YAAc,0CAA0C,YAAc,0CAA0C,KAAO,mCAAmC,MAAQ,oCAAoC,WAAa,yCAAyC,UAAY,wCAAwC,KAAO,mCAAmC,KAAO,mCAAmC,QAAU,sCAAsC,SAAW,uCAAuC,OAAS,qCAAqC,OAAS,qCAAqC,QAAU,sCAAsC,SAAW,uCAAuC,MAAQ,sC,qBCAx8BD,EAAOC,QAAU,CAAC,QAAU,8BAA8B,eAAiB,qCAAqC,gBAAkB,sCAAsC,mBAAqB,yCAAyC,kBAAoB,wCAAwC,oBAAsB,0CAA0C,YAAc,kCAAkC,QAAU,8BAA8B,KAAO,2BAA2B,WAAa,iCAAiC,eAAiB,qCAAqC,eAAiB,qCAAqC,QAAU,8BAA8B,KAAO,2BAA2B,MAAQ,4BAA4B,aAAe,mCAAmC,aAAe,mCAAmC,MAAQ,8B,qBCAh1BD,EAAOC,QAAU,CAAC,QAAU,yCAAyC,mBAAqB,oDAAoD,kBAAoB,mDAAmD,oBAAsB,qDAAqD,YAAc,6CAA6C,QAAU,yCAAyC,KAAO,sCAAsC,WAAa,4CAA4C,eAAiB,gDAAgD,eAAiB,gDAAgD,QAAU,yCAAyC,KAAO,sCAAsC,MAAQ,uCAAuC,aAAe,8CAA8C,aAAe,8CAA8C,MAAQ,uCAAuC,gBAAkB,iDAAiD,mBAAqB,oDAAoD,wBAA0B,2D,qBCAplCD,EAAOC,QAAU,CAAC,OAAS,2BAA2B,UAAY,8BAA8B,YAAY,8BAA8B,MAAQ,0BAA0B,KAAO,yBAAyB,MAAQ,0BAA0B,MAAQ,4B,4CCAtPD,EAAOC,QAAU,CAAC,QAAU,qCAAqC,OAAS,oCAAoC,aAAe,0CAA0C,MAAQ,mCAAmC,KAAO,kCAAkC,MAAQ,mCAAmC,KAAO,kCAAkC,KAAO,kCAAkC,MAAQ,qC,qBCAhYD,EAAOC,QAAU,CAAC,QAAU,2BAA2B,MAAQ,yBAAyB,WAAa,8BAA8B,UAAY,6BAA6B,SAAW,4BAA4B,OAAS,0BAA0B,mBAAqB,sCAAsC,QAAU,2BAA2B,MAAQ,2B,sFCD1VC,EAAOC,E,yDAEPC,EAAY,CAAC,QAAS,WAE1B,SAASC,IAA2Q,OAA9PA,EAAWC,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,GAAkBH,EAASY,MAAMC,KAAMR,WAEhT,SAASS,EAAyBP,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxMgB,CAA8BZ,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,SAASoB,EAAWC,EAAMC,GACxB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQd,EAAyBU,EAAMzB,GAE3C,OAAoB,gBAAoB,MAAOC,EAAS,CACtD6B,GAAI,gBACJ,YAAa,gBACbC,MAAO,6BACPC,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,IAAKT,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DG,GAAIF,GACHD,GAAS,KAAM7B,IAAUA,EAAqB,gBAAoB,OAAQ,CAC3EgC,GAAI,WACJE,MAAO,GACPC,OAAQ,GACRG,UAAW,8BACXC,KAAM,UACHtC,IAAOA,EAAkB,gBAAoB,IAAK,CACrD+B,GAAI,YACJ,YAAa,YACbM,UAAW,0BACG,gBAAoB,OAAQ,CAC1CN,GAAI,SACJ,YAAa,SACbQ,EAAG,yaACHD,KAAM,YACS,gBAAoB,OAAQ,CAC3CP,GAAI,WACJ,YAAa,WACbQ,EAAG,+XACHF,UAAW,0BACXC,KAAM,eAIV,IAAIE,EAA0B,aAAiBf,G,GAChC,I,iCCjCAgB,EAlBK,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,KAAMC,EAAlB,EAAkBA,KAAMC,EAAxB,EAAwBA,MAAOC,EAA/B,EAA+BA,aAA/B,OAClB,sBAAKC,UAAWC,IAAOC,iBAAkBP,QAASA,EAAlD,UACM,wBAAOK,UAAWC,IAAOE,QAAzB,UACMP,EACF,qBAAKI,UAAWC,IAAOJ,KAAvB,SACIA,OAGR,kCACI,sBAAMG,UAAWC,IAAOG,gBAAxB,eAGEN,EAJN,IAKOC,S,SCqFAM,EAvFE,SAAC,GAAsG,IAApGC,EAAmG,EAAnGA,UAAWC,EAAwF,EAAxFA,gBAAiBC,EAAuE,EAAvEA,WAAYC,EAA2D,EAA3DA,iBAAkBC,EAAyC,EAAzCA,WAAYC,EAA6B,EAA7BA,gBAChFC,GAD6G,EAAZC,MAC9EC,oBACnBC,EAAUC,uBACVC,EAAiB,SAACd,GAAD,OAAae,IAASC,MAAK,qBAAGnC,KAAgBmB,MAC/DiB,EAAgBd,EAAUc,cAAcC,QAAO,gBAAGlB,EAAH,EAAGA,QAASmB,EAAZ,EAAYA,MAAZ,OAAwBnB,IAAYI,EAAgBvB,IAAMsC,EAAMC,KAAO,KACtHC,EAAuBpE,OAAOqE,QAAQnB,EAAUoB,2BAA2BP,MAAK,SAAAQ,GAAG,OAAIA,EAAI,KAAOpB,EAAgBvB,IAAM2C,EAAI,MAC5HC,EAAgBlB,EAAU,UAAMA,EAAN,qBAA6BC,EAA7B,eAA4D,KAC5F,EAAyCkB,YAAe,CAAEC,IAAKF,IAAjDG,EAAd,EAAQC,KAAmBC,EAA3B,EAA2BA,UACrBC,EAAkBH,GAAeA,EAAYtE,QAAUsE,EAAYI,KAAI,qBAAEC,gBAAgCC,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,IAAG,GACvI,EAA8BL,EAAkBM,OAAON,EAAgBO,YAAYC,QAAQ,GAAGC,MAAM,KAAQ,CAAC,EAAG,GAAhH,mBAAOC,EAAP,KACMC,EAAiB,CACnBC,MAAO,WACPxB,MAAO,CACHC,KAAMW,GAAoC,EAC1Ca,SALR,KAMQH,cAKFI,EAAgBC,uBAAY,WAC9B,IAAIzB,GAAwBJ,EAAe,CACvC,IAAM8B,EAAKtC,EAAiBuC,QAC5B,IAAKD,EAAI,OAET,IAAME,EAAYF,EAAGG,aAAeH,EAAGI,aAIvC,KAHqBJ,EAAGG,aAAeH,EAAGI,eAGpBF,GAAaF,EAAGK,UAElC,YADAL,EAAGM,UAAUC,OAAOxD,IAAOyD,gBAI/BR,EAAGM,UAAUG,OAAO1D,IAAOyD,gBAAgB,MAGhD,CAACtC,EAAeI,IAMnB,OAJAoC,qBAAU,WACNZ,MACD,CAACxB,EAAsBJ,EAAe4B,IAGrC,qBAAKhD,UAAWC,IAAO4D,QAAvB,SACMvD,EAAUwD,6BAA+BtC,EAAuB,cAAC,IAAD,IAC9D,qBAAKxB,UAAWC,IAAOmB,cAAe/B,IAAKuB,EAAkBmD,SAAUf,EAAvE,SACM5B,EAAc3D,OAAS,EACrB,qCAEQ2D,EAAcC,QAAO,gBAAGlB,EAAH,EAAGA,QAAH,OAAiBc,EAAed,MAAUgC,KAAI,WAAqB5E,GAArB,IAAG4C,EAAH,EAAGA,QAASmB,EAAZ,EAAYA,MAAZ,OAC/D,cAAC,EAAD,CACI3B,QAAS,kBAAMa,EAAWL,IAE1BN,KAAMoB,EAAed,GAASN,KAC9BC,MAAOW,EAAiBa,EAAMsB,WAC9B7C,aAAcU,EAAiBa,EAAMyB,UACrCnD,KACI,qBAAKI,UAAWC,IAAOL,KAAMoE,MAAO,CAACC,gBAAgB,OAAD,OAAShD,EAAed,GAASP,KAAjC,SALnDO,MAUf0C,GAAmBA,EAAevB,MAAMC,KAAO,IAAOU,GACrD,cAAC,EAAD,CACKtC,QAAS,kBAAMoB,EAAQmD,KAAK,qBAC5BrE,KAAMgD,EAAeC,MACrBhD,MAAOW,EAAiBoC,EAAevB,MAAMsB,WAC7C7C,aAAcU,EAAiBoC,EAAevB,MAAMyB,UACpDnD,KACI,qBAAKI,UAAWC,IAAOkE,QAAvB,SAAgC,cAAC,EAAD,WAIzC,qBAAKnE,UAAWC,IAAOmE,uBAAvB,SACH,sBAAKpE,UAAWC,IAAOoE,gBAAvB,UACI,cAAC,IAAD,IACA,+F,wGCPjBC,EA1Ec,SAAC,GAA2C,IAAzCC,EAAwC,EAAxCA,gBAAiBC,EAAuB,EAAvBA,iBAsBvCC,EAAmBC,YAAgB,CAAE/G,IAAK,iBAC5CgH,EAAoB,EAMxB,OAJIF,GAA4C,OAAxBA,EAAiB,KACrCE,EAAoBF,EAAiB,GAAGhH,QAIxC,sBAAKuC,UAAWC,IAAO4D,QAAvB,UACI,sBAAK7D,UAAWC,IAAO2E,mBAAvB,UACI,uFAGA,cAAC,IAAD,CAASC,GAAG,kBAAZ,SACI,cAAC,IAAD,CAAQC,OAAK,EAAClF,KAAM,cAAC,IAAD,IAApB,uBAEJ,sBAAKI,UAAWC,IAAO8E,SAAvB,UACI,2EACA,cAAC,IAAD,CAAQC,MAAI,EAACC,OAAK,EAACrF,KAAM,cAAC,IAAD,IAAiBD,QAAS4E,EAAnD,kCACCI,EAAoB,GAAM,wBAAOX,MAAO,CAAEkB,OAAQ,WAAYvF,QAAS6E,EAA7C,4BAA+EG,EAA/E,8CAGnC,sBAAK3E,UAAWC,IAAOkF,SAAvB,UACI,qBAAKnF,UAAWC,IAAOpB,MAAvB,oBACA,qBAAKmB,UAAWC,IAAOmF,KAAvB,SA7CG,CACX,CACIxF,KAAM,iHACNyF,OAAQ,MACRC,QAAS,UACTC,WAAY,WAEhB,CACI3F,KAAM,iHACNyF,OAAQ,MACRC,QAAS,MACTC,WAAY,WAEhB,CACI3F,KAAM,iHACNyF,OAAQ,OACRC,QAAS,IACTC,WAAY,UA8BOpD,KAAI,gBAAGvC,EAAH,EAAGA,KAAMyF,EAAT,EAASA,OAAQC,EAAjB,EAAiBA,QAASC,EAA1B,EAA0BA,WAA1B,OACP,sBAAKvF,UAAWC,IAAOuF,MAAvB,UACI,qBAAKxF,UAAWC,IAAOL,KAAvB,SACI,qBAAK6F,IAAK7F,EAAM8F,IAAI,iBAExB,qBAAK1F,UAAWC,IAAOJ,KAAvB,SACMwF,IAEN,qBAAKrF,UAAWC,IAAO0F,YACvB,sBAAK3F,UAAWC,IAAOqF,QAAvB,UACI,sBAAKtF,UAAWC,IAAO2F,SAAvB,UACMN,EADN,IACgB,sBAAMtF,UAAWC,IAAOoF,OAAxB,SAAkCA,OAElD,sBAAKrF,UAAWC,IAAO4F,OAAvB,UACI,sBAAM7F,UAAWC,IAAOoF,OAAxB,eADJ,IAC+CE,UAbpBF,e,oCC4JhDS,EAtMG,SAAC,GAAoF,IAAD,EAAjFxF,EAAiF,EAAjFA,UAAWH,EAAsE,EAAtEA,QAAS4F,EAA6D,EAA7DA,QAAStF,EAAoD,EAApDA,iBAAkBuF,EAAkC,EAAlCA,YAAaC,EAAqB,EAArBA,eACrEC,EAAcC,cAAdD,UAER,EAAkCE,mBAAS,IAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,EAAwDF,oBAAS,GAAjE,mBAAOG,EAAP,KAA6BC,EAA7B,KACQ1C,EAAkFxD,EAAlFwD,4BAA6B2C,EAAqDnG,EAArDmG,8BAA+BC,EAAsBpG,EAAtBoG,OAAQC,EAAcrG,EAAdqG,UAEtEC,GAAW,UAAAZ,EAAYU,cAAZ,eAAoBE,WAAY,aAE3CC,EAAiBC,cAiBvB,EAOIC,YACA,WAvBc,SAAC3B,GACfa,GACI,SAAAe,GAAI,wCACGA,GADH,IAEAN,OAAQ,CACJE,SAAU,SACVK,MAAM,2BAAD,QAAC,EACCD,EAAKN,cADP,aACE,EAAaO,OADf,4BAEGlB,EAFH,YAEc5F,EAAQ+G,SAAY9B,aAQnD+B,EADJ,EACIA,UACAC,EAFJ,EAEIA,UACA9J,EAHJ,EAGIA,OACA+J,EAJJ,EAIIA,OACAC,EALJ,EAKIA,WACAC,EANJ,EAMIA,KAKEC,EAAed,EAAOe,MAAK,SAACnF,EAAGC,GAAO,IAAD,MACvC,GAAiB,WAAbqE,IAAA,UAAyBZ,EAAYU,cAArC,iBAAyB,EAAoBO,aAA7C,iBAAyB,YAA+BlB,EAA/B,YAA0C5F,EAAQ+G,iBAA3E,aAAyB,EAA8DzJ,QAEvF,OADeuI,EAAYU,OAAOO,MAAnB,UAA4BlB,EAA5B,YAAuC5F,EAAQ+G,UAAW7I,QAAQiE,EAAEoF,SAAW1B,EAAYU,OAAOO,MAAnB,UAA4BlB,EAA5B,YAAuC5F,EAAQ+G,UAAW7I,QAAQkE,EAAEmF,SAGlK,IAAMC,EAAapF,EAAEgD,WAAajD,EAAEiD,WACpC,OAAmB,IAAfoC,EAAyBrF,EAAE+C,OAAOuC,cAAcrF,EAAE8C,QAC/CsC,KAKTE,EAAiBlB,EAAUtF,QAAO,kBAAyB,WAAzB,EAAGyB,SACrCgF,GAA0BhE,IAAgC4C,EAAOjJ,SAAagJ,IAAkCoB,EAAepK,OAE/HsK,EAAY,SAACC,EAAOC,EAAK5C,EAAQC,EAASC,EAAYmC,GACvD,IADgEQ,EACjE,wDAD+E/H,EAC/E,uCADwF4C,EACxF,uCADkGoC,EAClG,uCAD4GgD,EAC5G,yCACUC,EAAO/B,EAAUgC,SAASJ,GAAOK,YAAanI,EAASuH,GAAWO,EAExE,OAAQ,sBAAKjI,UAAWC,IAAOuF,MAC9B+C,UAAwB,WAAbpD,GAAyBgD,EAAqB,GAAkB,WAAbvB,IAA0BC,EACxF2B,YAAa,SAACC,GACPpB,EAAOlE,UAAY7F,EAAO6F,SAAWkE,EAAOlE,QAAQuF,SAASpL,EAAO6F,SAAUgE,EAAUsB,EAAGT,GAC1FS,EAAEE,kBAEVC,YAAa,SAACH,GAAD,OAAOnB,EAAWmB,EAAGT,IAClCa,YAAa,SAACJ,GAAD,OAAOrB,EAAUqB,EAAGT,IACjCc,UAAW,kBAAMvB,EAAKC,IACtBuB,WAAY,SAACN,GAAD,OAAOA,EAAEE,kBATd,UAWPR,EAAqB,GAAkB,WAAbvB,IAA0BC,GAAkB,cAAC,IAAD,CAAiBmC,KAAM,GAAIhJ,UAAWC,IAAOgJ,WAAYtJ,QAAS,SAAC8I,GAAD,OAAOtB,EAAUsB,EAAGT,IAAQhJ,GAAE,UAAKgJ,EAAL,aACvK,sBAAKhI,UAAWC,IAAOiJ,KAAvB,UACI,qBAAKlJ,UAAWC,IAAOL,KAAvB,SAEQyG,EAAUgC,SAASD,GACf,cAAC,IAAD,CAASY,KAAM,KAEf,qBAAKvD,IAAK2C,EAAMG,UAAU,QAAQ7C,IAAI,aAAayD,QAAS,kBAAM7C,GAAa,SAAA8C,GAAM,4BAAQA,GAAR,CAAgBhB,YAGjH,qBAAKpI,UAAWC,IAAOJ,KAAvB,SACMwF,IAEN,qBAAKrF,UAAWC,IAAO0F,YACvB,sBAAK3F,UAAWC,IAAOqF,QAAvB,UACI,sBAAKtF,UAAWC,IAAO2F,SAAvB,UACI,sBAAM5F,UAAWC,IAAOH,MAAxB,SAAiCW,EAAiB4I,YAAuB/D,GAAS,EAAMvC,MACxF,sBAAM/C,UAAWC,IAAOoF,OAAxB,SAAkCA,OAEtC,sBAAKrF,UAAWC,IAAO4F,OAAvB,UACI,sBAAM7F,UAAWC,IAAOoF,OAAxB,eADJ,IAC+C5E,EAAiB8E,EAAW7C,QAAQ,aAKvFwF,EACI,qBAAKlI,UAAWC,IAAOqJ,QAAvB,SACI,cAAC,IAAD,CAASzE,GAAE,2BAAsB6C,GAAjC,SACI,cAAC,IAAD,CAAQ5C,OAAK,EAAClF,KAAM,cAAC,IAAD,IAAkBI,UAAWC,IAAOsJ,WAAxD,sBAIR,OA3CA,gBAA4C7B,EAA5C,YAAuDM,KA+CjEwB,EAAoBvG,uBAAY,kBAAMiD,EAAU,cAACuD,EAAA,EAAD,CAAetJ,QAASA,EAAS4F,QAASA,EAASzF,UAAWA,OAAgB,CAACyF,EAAS5F,EAASG,EAAW4F,IAC5JwD,EAAqBzG,uBAAY,kBAAMuD,GAAwB,KAAO,IAiB5E,OAfA5C,qBAAU,WACH2C,GACCL,EACI,cAAC,IAAD,CACI5F,UAAWA,EACXyF,QAASA,EACTC,YAAaA,EACbY,SAAUA,EACVzG,QAASA,EACTqG,wBAAyBA,OAItC,CAAClG,EAAWiG,EAAsBL,EAAWH,EAAS5F,EAASyG,EAAUZ,IAGxE,sBAAKhG,UAAWC,IAAO4D,QAAvB,UAEQiE,EACI,cAAC,EAAD,CAAsBvD,gBAAiBiF,EAAmBhF,iBAAkBkF,IAE5E,KAER,qCAEQ5F,EACI,cAAC,IAAD,KAECgE,GAAyBN,EAAa/J,OACnC,sBAAKuC,UAAWC,IAAOkF,SAAvB,UACI,sBAAKnF,UAAWC,IAAOpB,MAAvB,UACI,sBAAKmB,UAAWC,IAAO0J,WAAvB,mBAEKnC,EAAa/J,OAAS,IAAMoJ,GACzB,sBAAK7G,UAAWC,IAAO2J,YAAvB,UACI,cAAC,IAAD,CAAS9G,MAAM,iCAAf,SACI,cAAC,IAAD,CAAiB+G,MAAoB,WAAbjD,EAAwB,UAAY,GAAI1B,OAAO,UAAUvF,QAAS,kBAAMsG,GAAe,SAAAe,GAAI,kCAC5GA,GAD4G,IAE/GN,OAAO,2BACAM,EAAKN,QADN,IAEFE,SAAU,qBAItB,cAAC,IAAD,CAAS9D,MAAM,gCAAf,SACI,cAAC,IAAD,CAAe+G,MAAoB,eAAbjD,EAA4B,UAAY,GAAI1B,OAAO,UAAUvF,QAAS,kBAAMsG,GAAe,SAAAe,GAAI,kCAC9GA,GAD8G,IAEjHN,OAAO,2BACAM,EAAKN,QADN,IAEFE,SAAU,+BAOlC,sBAAK5G,UAAWC,IAAO6J,YAAvB,UACI,cAAC,IAAD,CAAQ9E,MAAI,EAACC,OAAK,EAACrF,KAAM,cAAC,IAAD,IAAoBD,QAAS,kBAAM+J,KAA5D,wBACA,cAAC,IAAD,CAAQ1E,MAAI,EAACC,OAAK,EAACrF,KAAM,cAAC,IAAD,IAAiBD,QAAS,kBAAM6J,KAAzD,6BAGR,qBAAKxJ,UAAWC,IAAOmF,KAAvB,SAEQoC,EAAarF,KAAI,WAA6E5E,GAA7E,IAAGmK,EAAH,EAAGA,QAASrC,EAAZ,EAAYA,OAAQ0E,EAApB,EAAoBA,cAAezE,EAAnC,EAAmCA,QAASC,EAA5C,EAA4CA,WAAYpF,EAAxD,EAAwDA,QAAS4C,EAAjE,EAAiEA,SAAjE,OACbgF,EAAUxK,EAAGwM,EAAe1E,EAAQC,EAASC,EAAYmC,GAAS,EAAMvH,EAAS4C,EAAU,SAAUyE,EAAa/J,eAnC7F,mBAwCzC,KAGJgJ,EACI,cAAC,IAAD,IAEIoB,EAAe1F,KAAI,WAAoB5E,GAApB,IAAGuF,EAAH,EAAGA,MAAOkH,EAAV,EAAUA,OAAV,OACf,sBAAKhK,UAAU,WAAf,UACI,qBAAKA,UAAU,QAAf,SAAyB8C,IACzB,qBAAK9C,UAAU,OAAf,SAEQgK,EAAO7H,KAAI,WAAoE5E,GAApE,IAAG4H,EAAH,EAAGA,SAAUE,EAAb,EAAaA,OAAQ0E,EAArB,EAAqBA,cAAezE,EAApC,EAAoCA,QAASC,EAA7C,EAA6CA,WAAYmC,EAAzD,EAAyDA,QAAzD,OACPK,EAAUxK,EAAGwM,EAAe1E,EAAQC,EAASC,EAAYmC,EAAsB,cAAbvC,EAA0B,oBAL5G,mBAA2C5H,c,sCC9H5D0M,EAtEiB,SAAC,GAA2C,IAAzCC,EAAwC,EAAxCA,cAAeC,EAAyB,EAAzBA,mBAuC9C,OACI,sBAAKnK,UAAWC,IAAO4D,QAAvB,UACI,qBAAK7D,UAAWC,IAAOmK,gBAAvB,SACKF,GAAiBC,EAAqB,6CAAgD,+CAE3F,qBAAKnK,UAAWC,IAAO2E,qBACvB,qBAAK5E,UAAWC,IAAOoK,aAAvB,SACI,qBAAKrK,UAAWC,IAAOqK,oBAAvB,SA7CS,CACjB,CACIC,eAAgB,aAChBC,cAAe,iJACf3K,KAAM,mBACN4K,MAAO,4IACPC,MAAO,OAEX,CACIH,eAAgB,iBAChBC,cAAe,+IACf3K,KAAM,sBACN4K,MAAO,4IACPC,MAAO,MAEX,CACIH,eAAgB,qBAChBC,cAAe,kJACf3K,KAAM,oBACN4K,MAAO,2IACPC,MAAO,QAEX,CACIH,eAAgB,qBAChBC,cAAe,+IACf3K,KAAM,OACN4K,MAAO,4IACPC,MAAO,SAEX,CACIH,eAAgB,WAChBC,cAAe,kJACf3K,KAAM,qBACN4K,MAAO,yIACPC,MAAO,UAakBvI,KAAI,gBAAGoI,EAAH,EAAGA,eAAgBC,EAAnB,EAAmBA,cAAe3K,EAAlC,EAAkCA,KAAM4K,EAAxC,EAAwCA,MAAOC,EAA/C,EAA+CA,MAA/C,OACb,sBAAK1K,UAAWC,IAAO0K,YAAvB,UACI,qBAAK3K,UAAWC,IAAO2K,QAAS5G,MAAO,CAACC,gBAAgB,OAAD,OAASwG,EAAT,QACvD,sBAAKzK,UAAWC,IAAO4K,KAAvB,UACI,sBAAK7K,UAAWC,IAAO6K,WAAvB,UACI,qBAAK9K,UAAWC,IAAO8K,eAAgB/G,MAAO,CAACC,gBAAgB,OAAD,OAASuG,EAAT,QAC5DD,KAEN,sBAAKvK,UAAWC,IAAO+K,QAAvB,UACI,qBAAKhL,UAAWC,IAAOJ,KAAvB,SAA+BA,IAC/B,sBAAKG,UAAWC,IAAOH,MAAvB,UAA8B,sBAAME,UAAU,mBAAhB,eAA9B,IAA4E0K,aAT/C7K,c,kBC8BtDoL,EAvEM,SAAC,GAAkC,IAAhC3K,EAA+B,EAA/BA,UAAW4J,EAAoB,EAApBA,cACzBgB,EAASC,sBACTpK,EAAUC,uBAEVoK,EAAWC,KAAKC,KAAKhL,EAAU+J,aAAa5M,OADnB,IAEzB8N,EAAcC,mBAAQ,kBAAMH,KAAKI,IAAIJ,KAAKK,IAAIlJ,OAAO0I,EAAOS,MAAO,GAAIP,IAAa,IAAG,CAACF,EAAOS,KAAMP,IAC3G,EAAwBhF,mBAASmF,GAAjC,mBAAOI,EAAP,KAAaC,EAAb,KACMC,EAAmBvL,EAAU+J,aAAayB,MAJjB,IAIwBH,EAAO,GAJ/B,GAI4DA,GAErFI,EACF,sBAAK/L,UAAWC,IAAO8L,mBAAvB,UACE,qBAAK/L,UAAWC,IAAO+L,gBAAvB,kBACA,cAAC,IAAD,CAAQ/G,OAAK,EAACD,MAAI,EAACrF,QAAS,kBAAMgM,EAAO,GAAKC,GAAQ,SAAAD,GAAI,OAAIA,EAAO,MAArE,SAAyE,cAAC,IAAD,MACzE,sBAAK3L,UAAWC,IAAOgM,kBAAvB,UAA4CN,EAA5C,IAAmD,sCAAUP,QAC7D,cAAC,IAAD,CAAQnG,OAAK,EAACD,MAAI,EAACrF,QAAS,kBAAMgM,EAAOP,GAAYQ,GAAQ,SAAAD,GAAI,OAAIA,EAAO,MAA5E,SAAgF,cAAC,IAAD,SAItF/H,qBAAU,kBAAM7C,EAAQmL,QAAR,yCAAkDP,MAAS,CAACA,EAAM5K,IAClF6C,qBAAU,kBAAMgI,EAAQL,KAAc,CAACA,IAavC,OAAIjL,EAAUmG,8BAAsC,cAAC,IAAD,KAE/CnG,EAAU+J,aAAa5M,QAAUyM,EAE9B,cAAC,EAAD,CACIA,cAAeA,EACfC,mBAAoB7J,EAAU+J,aAAa5M,SAMnD,sBAAKuC,UAAWC,IAAO4D,QAAvB,UACI,qBAAK7D,UAAWC,IAAOqK,oBAAvB,SAEQuB,EAAiB1J,KAAI,gBAAGhC,EAAH,EAAGA,QAASuH,EAAZ,EAAYA,QAAS6C,EAArB,EAAqBA,eAAgBC,EAArC,EAAqCA,cAArC,SAAoDR,QAAwB,IAAI7H,KAAI,gBA1BvGgK,EA0B0GC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,UAAWC,EAAvB,EAAuBA,SAAU/G,EAAjC,EAAiCA,WAAjC,OACrG,qBAAKvF,UAAWC,IAAO0K,YAAvB,SACI,eAAC,IAAD,CAAS9F,GAAE,sBAAiB1E,EAAjB,YAA4BuH,EAA5B,YAAuC0E,GAAlD,UACI,qBAAKpM,UAAWC,IAAO2K,QAAS5G,MAAO,CAACC,gBAAgB,OAAD,QA7BjEkI,EA6BoFG,EA5B7FH,EAGqB,gBAF1BA,EAAMA,EAAII,WAAW,yBAA2BJ,EAAID,QAAQ,8BAA+B,IAAMC,GAEzFxJ,MAAM,KAAK,GAA4BwJ,EAC3CA,EAAII,WAAW,WAAmBJ,EAAID,QAAQ,6BAA8B,yBAC5EC,EAAIxJ,MAAM,KAAK,GAAG6J,SAAS,kBAA0B,wBAA0BL,EAAIxJ,MAAM,KAAKmJ,MAAM,GAAGW,KAAK,KAEzGN,EAPU,IA4B8D,QACvD,sBAAKnM,UAAWC,IAAO4K,KAAvB,UACI,sBAAK7K,UAAWC,IAAO6K,WAAvB,UACI,qBAAK9K,UAAWC,IAAO8K,eAAgB/G,MAAO,CAACC,gBAAgB,OAAD,OAASuG,EAAT,QAC9D,sBAAMxK,UAAWC,IAAOsK,eAAxB,SAA0CA,OAE9C,sBAAKvK,UAAWC,IAAO+K,QAAvB,UACI,qBAAKhL,UAAWC,IAAOJ,KAAvB,SAA+BwM,IAC/B,sBAAKrM,UAAWC,IAAOH,MAAvB,UAA8B,sBAAME,UAAWC,IAAOG,gBAAxB,eAA9B,IAAiFmF,EAAW7C,QAAQ,gBAV3E0J,WAkBpDL,M,+CCxEb,SAASW,GAAYC,GACjB,OAAIA,EAAM,GAAU,IAAN,OAAWA,GACnB,GAAN,OAAUA,GAqBC,SAASC,GAAT,GAA4C,IAAvBC,EAAsB,EAAtBA,YAAa/J,EAAS,EAATA,MAE7C,EAAgCsD,mBAAS,MAAzC,mBAAO0G,EAAP,KAAiBC,EAAjB,KA0BA,OAxBAC,2BAAgB,WACZ,GAAIH,EAAa,CAEb,IAAII,EAAWC,aACX,WACI,IAAMC,EAAO,IAAIC,KAAKP,GAAaQ,WAAY,IAAID,MAAOC,UAC1DN,EA5BpB,SAAqBI,GACjB,OAAIA,EAAO,EACA,CACHG,KAAM,KACNC,MAAO,KACPC,QAAS,KACTC,QAAS,MAIV,CACHH,KAAMZ,GAAYrB,KAAKqC,MAAMP,EAAI,QACjCI,MAAOb,GAAYrB,KAAKqC,MAAOP,EAAI,KAAuB,KAC1DK,QAASd,GAAYrB,KAAKqC,MAAOP,EAAO,IAAO,GAAM,KACrDM,QAASf,GAAYrB,KAAKqC,MAAOP,EAAO,IAAQ,MAcxBQ,CAAYR,IACpBA,EAAO,IACPS,cAAcX,GACdA,EAAW,QAGnB,KAEJ,OAAO,WACHW,cAAcX,GACdA,EAAW,MAGfF,EAAY,QAGjB,CAACF,IAECC,EAGD,gCACKhK,GAAS,+BAAOA,IACjB,sBAAK9C,UAAU,kBAAf,UACI,cAAC,IAAD,CAAkBA,UAAU,eAC5B,sBAAKA,UAAU,WAAf,UACI,qBAAKA,UAAU,QAAf,SACK8M,EAASQ,OAEd,qBAAKtN,UAAU,OAAf,qBAIJ,qBAAKA,UAAU,QAAf,eACA,sBAAKA,UAAU,WAAf,UACI,qBAAKA,UAAU,QAAf,SACK8M,EAASS,QAEd,qBAAKvN,UAAU,OAAf,sBAIJ,qBAAKA,UAAU,QAAf,eACA,sBAAKA,UAAU,WAAf,UACI,qBAAKA,UAAU,QAAf,SACK8M,EAASU,UAEd,qBAAKxN,UAAU,OAAf,wBAIJ,qBAAKA,UAAU,QAAf,eACA,sBAAKA,UAAU,WAAf,UACI,qBAAKA,UAAU,QAAf,SACK8M,EAASW,UAEd,qBAAKzN,UAAU,OAAf,8BAtCM,K,kDChD1B,SAAS6N,KAQA,IAAD,yDAAJ,GAPA7O,EAOI,EAPJA,GACA8O,EAMI,EANJA,OACAC,EAKI,EALJA,KACAlP,EAII,EAJJA,MAII,IAHJmP,iBAGI,MAHQ,GAGR,EAFJC,EAEI,EAFJA,YACAC,EACI,EADJA,UAGA,IAAKH,EAAM,OAAO,KAElB,IAAMI,EAAU,IAAIC,OAAO,cAAe,MACpCzL,EAAQoL,EAAKpL,MAAMwL,GACjBE,EAA4CL,EAA5CK,QAASxE,EAAmCmE,EAAnCnE,MAAOyE,EAA4BN,EAA5BM,WAAeC,EAAvC,YAAoDP,EAApD,IAEMQ,EAAQpR,OAAOqE,QAAQ8M,GAAUlM,QAAO,SAACoM,EAAD,GAA2C,IAAD,mBAA/B9Q,EAA+B,YAAxBmF,GAAwB,aAAR,GAAQ,GAAxBA,MAAO4L,EAAiB,EAAjBA,KAC7DC,EACF,mBAEI3O,UAAU,OACV0O,KAAMA,EACNpR,OAAO,SACPsR,IAAI,sBALR,SAMK9L,GALInF,GASb,OADA8Q,EAAQ9Q,GAAOgR,EACRF,IACR,IAEGI,EAAWzR,OAAOqE,QAAPrE,OAAA,IAAAA,CAAA,GAAoBiR,IAAWhM,QAAO,SAACyM,EAAD,GAAwC,IAAD,mBAA9BnR,EAA8B,YAAvBoQ,GAAuB,aAAR,GAAQ,GAAvBA,KAAM/E,EAAiB,EAAjBA,KACnE+F,EAAO,sBAAgB/O,UAAWC,IAAO+O,MAAOhL,MAAO,CAAEiL,SAAUjG,GAA5D,SACR+E,GADmBpQ,GAKxB,OADAmR,EAAMnR,GAAOoR,EACND,IACR,IAEH,OACI,sBAAK9O,UAAS,UAAKC,IAAOiP,OAAZ,YAAsBhB,EAAYjO,IAAOiO,UAAY,IAAMlK,MAAK,2BACtEsK,EAAa,CAAEa,gBAAiBb,GAAe,IAC/CzE,EAAQ,CAAEA,SAAU,IAF5B,WAIMqE,GAAa,gCACVrP,GACG,qBAAKmB,UAAWC,IAAOpB,MAAvB,SACKA,IAGT,8BACK8D,EAAMR,KAAI,SAAAiN,GAAC,OAAIZ,EAAMY,IAAMP,EAASO,IAAMA,QAGrC,OAANtB,QAAM,IAANA,OAAA,EAAAA,EAAQjJ,MAAR,OAAciJ,QAAd,IAAcA,OAAd,EAAcA,EAAQuB,QACtB,qBAAKrP,UAAWC,IAAOoP,MAAvB,SACI,cAAC,GAAD,CAAgBxC,YAAaiB,EAAOjJ,UAM1C7F,EACIkP,EACI,cAAC,IAAD,CAA0BlO,UAAWC,IAAOqP,SAAU3P,QAAS,kBAAMsO,EAAYjP,MACjF,8BAAK,cAAC,IAAD,CAAgBgB,UAAWC,IAAOqP,SAAU3P,QAAS,kBAAMsO,EAAYjP,QAChF,QAOP,SAASuQ,GAAT,GAA6D,IAAbC,EAAY,EAAtCC,YAAeC,QAAWF,MAC3D,EAAwC9K,aAAgB,CAAE/G,IAAK,eAAgBgS,aAAc,KAA7F,mBAAOC,EAAP,KAAqBC,EAArB,KAEM5B,EAAchL,uBAAY,SAAA6M,GAC5B,IAAMC,EAAU,YAAOH,GACjB5H,EAAQ+H,EAAW1R,QAAQyR,GAE7B9H,GAAS,EACT+H,EAAWC,OAAOhI,EAAO,GAEzB+H,EAAW7L,KAAK4L,GAGpBD,EAAgBE,KACjB,CAACH,EAAcC,IAElB,OAAKL,EAGD,cAAC3B,GAAD,2BAAW2B,GAAX,IAAkBvB,YAAaA,EAAaC,UAAW0B,EAAavH,SAASmH,EAAMxQ,OAHpE,K,qCCjGnBiR,GAAOC,G,sBAEP,GAAY,CAAC,QAAS,WAE1B,SAAS,KAA2Q,OAA9P,GAAW9S,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,GAAkB,GAASS,MAAMC,KAAMR,WAEhT,SAAS,GAAyBE,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxM,CAA8BI,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,SAAS6S,GAASxR,EAAMC,GACtB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQ,GAAyBJ,EAAM,IAE3C,OAAoB,gBAAoB,MAAO,GAAS,CACtDK,GAAI,eACJ,YAAa,eACbC,MAAO,6BACPC,MAAO,GACPC,OAAQ,KACRC,QAAS,cACTC,IAAKT,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DG,GAAIF,GACHD,GAAS,KAAMoR,KAAUA,GAAqB,gBAAoB,OAAQ,CAC3EjR,GAAI,UACJ,YAAa,UACbQ,EAAG,0HACHF,UAAW,2BACXC,KAAM,aACH2Q,KAAWA,GAAsB,gBAAoB,OAAQ,CAChElR,GAAI,UACJ,YAAa,UACbQ,EAAG,+OACHF,UAAW,4BACXC,KAAM,WAIV,IAAI,GAA0B,aAAiB4Q,ICLhCC,IDMA,ICxCa,SAAC,GAA0C,IAAxCzP,EAAuC,EAAvCA,gBAAiBJ,EAAsB,EAAtBA,gBAC5C,OACI,sBAAKP,UAAWC,KAAO4D,QAAvB,UACI,qBAAK7D,UAAWC,KAAOoQ,aAAvB,SACI,sBAAKrQ,UAAWC,KAAOqQ,MAAvB,UACI,cAAC,GAAD,IACA,sBAAKtQ,UAAWC,KAAOiJ,KAAvB,UACI,oBAAIlJ,UAAWC,KAAOpB,MAAtB,qEACA,oBAAGmB,UAAWC,KAAO8N,KAArB,8KAGK,IACD,mBACIW,KAAMnO,EAAgBgQ,YAAY,YAAa5P,EAC/CrD,OAAO,SACPsR,IAAI,aACJ5O,UAAWC,KAAOuQ,KAJtB,SAMKjQ,EAAgBgQ,YAAY5N,MAAM,KAAK,KAE3C,IAZL,yGAqBZ,qBAAK3C,UAAWC,KAAOwQ,c,0CCf7BC,GAAc,CAChB,CACI5Q,MAAO,UAEX,CACIA,MAAO,iBAKA,SAAS6Q,GAAT,GAA4M,IAAvLrQ,EAAsL,EAAtLA,UAAWC,EAA2K,EAA3KA,gBAAiBI,EAA0J,EAA1JA,gBAAiBH,EAAyI,EAAzIA,WAAYoQ,EAA6H,EAA7HA,YAAanB,EAAgH,EAAhHA,YAAczJ,EAAkG,EAAlGA,YAAaC,EAAqF,EAArFA,eAAgB4K,EAAqE,EAArEA,SAAUC,EAA2D,EAA3DA,WAAYpQ,EAA+C,EAA/CA,WAAYqQ,EAAmC,EAAnCA,WAAYlQ,EAAuB,EAAvBA,MAAOmQ,EAAgB,EAAhBA,aAChMjQ,EAAUC,uBAChB,EAA4BmK,sBAApB8F,EAAR,EAAQA,MAAR,IAAetF,YAAf,MAAsB,EAAtB,EAEA,EAA8CvF,mBAAS,IAAvD,mBAAO8K,EAAP,KAAwBC,EAAxB,KACA,EAAsB/K,mBAAS6K,GAASP,GAAY,GAAG5Q,OAAvD,mBAAOsR,EAAP,KAAYC,EAAZ,KAEMC,EAAiBT,EAAS1P,MAAK,SAAAmB,GAAC,OAAIA,EAAEtD,GAAGuS,gBAAkB5Q,EAAgB4Q,iBAEjF,EC/BW,SAAkC7Q,EAAY4Q,EAAgB/Q,GAE3E,MAAoC6F,oBAAS,kBAAMgH,KAAKoE,SAAxD,mBAAOC,EAAP,KAAmBC,EAAnB,KACA,EAAsCtL,mBAAS,MAA/C,mBAAOuL,EAAP,KAAoBC,EAApB,KAGA,EAAoDxL,mBAAS,MAA7D,mBAAOyL,EAAP,KAA2BC,EAA3B,KACA,EAA4E1L,mBAAS,MAArF,mBAAO2L,EAAP,KAAuCC,EAAvC,KACA,EAAgD5L,mBAAS,MAAzD,mBAAO6L,EAAP,KAAyBC,EAAzB,KAEAtO,qBAAU,WACJwJ,KAAKoE,MAAQC,EAbC,KAa2BC,EAActE,KAAKoE,OAChE,IAAMW,EAAQC,YAAW,kBAAMV,EAActE,KAAKoE,SAdhC,KAelB,OAAO,kBAAMa,aAAaF,MACzB,CAACV,EAAYH,EAAgB/Q,IAEhC,IAAMuB,EAAMpB,EAAU,UACfA,EADe,qBACQ4Q,EAAetS,GADvB,YAC6BuB,EAAgBvB,GAD7C,kCACyEyS,GAC3F,KAEJ,EAAoC5P,YAAe,CAAEC,QAA7CE,EAAR,EAAQA,KAAMsQ,EAAd,EAAcA,OAAQrQ,EAAtB,EAAsBA,UAqDtB,OAnDA2B,qBAAU,WAER,IAAM2O,EAAavQ,EAAOA,EAAKuQ,WAAa,GACtCC,EAAexQ,GAAQA,EAAKwQ,aAO5BC,EAAkBF,EAAWjB,EAAeoB,OAAOC,mBACtDH,GAAgBA,EAAaI,SAAW3Q,GAEvCsQ,GAAcjB,EAAeoB,OAAOC,iBAEjCrB,EAAeoB,OAAOG,aAVb,SAAAH,GACd,IAAMI,EAAW,IAAIC,YACbC,EAAuBN,EAAvBM,SAAUC,EAAaP,EAAbO,IAAKC,EAAQR,EAARQ,IACvB,OAAOC,qBAAUL,EAASM,OAAO,CAAC,iCAAkC,CAAC,CAACJ,EAAUC,EAAKC,MAShFG,CAAQ/B,EAAeoB,UAAYH,EAAWjB,EAAeoB,OAAOC,kBAI3Ef,EAAe,CACba,kBACAH,SACAE,iBAKGvQ,EAcD+P,GADEC,GAGgChQ,GAdhC4P,KAAqC,OAAdP,QAAc,IAAdA,OAAA,EAAAA,EAAgBtS,IAAKuB,EAAgBvB,IAE9DkT,GAAoB,GACpBF,GAAkC,KAGlCF,GAAoC,OAAdR,QAAc,IAAdA,OAAA,EAAAA,EAAgBtS,IAAKuB,EAAgBvB,IAE3DkT,GAAoB,MAUvB,CAAClQ,EAAMsQ,EAAQrQ,EAAWqP,EAAgBO,EAAoBtR,EAAgBvB,GAAIiT,IAE9E,aACLjQ,OACA+P,kCACGJ,GD7CuE2B,CAAyB5S,EAAY4Q,EAAgB/Q,GAAvHkS,EAAR,EAAQA,gBAAiBD,EAAzB,EAAyBA,aAAcT,EAAvC,EAAuCA,+BACjCwB,IAAiCjT,EAAUkT,yBAAyB/V,QACtE6C,EAAUkT,yBAAyBrS,MAAK,qBAAEhB,UAAyBI,EAAgBvB,MAmCvF,OAjCA4E,qBAAU,WACN,IAAKwN,GAAOA,IAAQV,GAAY,GAAG5Q,MAAO,OAAOiB,EAAQmL,QAAR,qBACjDnL,EAAQmL,QAAR,4BAAqCkF,GAArC,OAA2CA,IAAQV,GAAY,GAAG5Q,MAAvB,WAAmC6L,GAAS,OACxF,CAACyF,EAAKrQ,EAAS4K,IAElBqB,2BAAgB,WAAO,IAAD,IACZyG,EAAanT,EAAUoG,OACxBvE,KAAI,gBAAGW,EAAH,EAAGA,MAAOuC,EAAV,EAAUA,OAAQE,EAAlB,EAAkBA,WAAlB,MAAoC,CACrCzC,MAAOA,GAASuC,EAChBvF,MAAO0C,QAAS+C,EAAajF,EAAUgF,QAAQhE,MAAMC,KAAQ,KAAKmB,QAAQ,IAC1E6C,iBAEHlE,QAAO,qBAAGvB,MAAoB,MAEtB,OAATQ,QAAS,IAATA,GAAA,UAAAA,EAAWgF,eAAX,mBAAoBhE,aAApB,eAA2BC,OAAQkS,EAC/BtC,EAAmB,CACfuC,OAAO,EACP1R,KAAI,OAAEyR,QAAF,IAAEA,OAAF,EAAEA,EAAYhM,MAAK,SAACnF,EAAGC,GAAJ,OAAUA,EAAEzC,MAAQwC,EAAExC,WAGrDqR,EAAmB,CACfuC,OAAO,EACP1R,KAAM,CAAC,CACHc,MAAO,4BACPyC,WAAY,EACZzF,MAAO,QAIpB,CAACQ,EAAUgF,QAAShF,EAAUoG,SAEjC9C,qBAAU,kBAAMtD,EAAUqT,iCAAgC,CAACrT,IAGvD,0BAASN,UAAWC,KAAO4D,QAA3B,UACM0P,GACE,cAAC,GAAD,CACIhT,gBAAiBA,EACjBI,gBAAiBA,IAGzB,cAAC4O,GAAD,CAAYE,YAAaA,IAEvB,cAACmE,GAAA,EAAD,CACErT,gBAAiBA,EACjBI,gBAAiBA,EACjBkQ,SAAUA,EACVC,WAAYA,EACZ+C,WAAW,EACXnT,WAAYA,EACZJ,UAAWA,EACXyQ,WAAYA,IAIb0B,IAAoBV,GACnB,cAAC+B,GAAA,EAAD,CACEtB,aAAcA,EACdxB,aAAcA,EACdrQ,gBAAiB2Q,EACjB/Q,gBAAiBA,IAIvB,sBAAKP,UAAWC,KAAO8T,SAAvB,UACI,cAAC,IAAD,CACI/T,UAAWgU,KAAG/T,KAAOgU,MAAOhU,KAAOiU,MAAOjU,KAAOkU,WADrD,SAIQ7T,EAAUwD,4BACV,cAAC,IAAD,IACA8M,EAAYwD,mBACR,cAAC,IAAD,CACI7T,gBAAiBA,EACjByB,KAAMkP,EACNlI,KAAM,IACNhJ,UAAWC,KAAOgU,MAClBxT,iBAAkBmQ,EAAYnQ,iBAC9BH,UAAWA,OAK3B,cAAC,IAAD,CACIN,UAAWgU,KAAG/T,KAAOqF,QAASrF,KAAOiU,MAAOjU,KAAOkU,WACnDE,eAAgBpU,KAAOqU,WACvBzV,MAAM,gBAHV,SAII,cAAC,EAAD,CACIyB,UAAWA,EACXC,gBAAiBA,EACjBC,WAAYA,EACZC,iBAAkBmQ,EAAYnQ,iBAC9BC,WAAYA,EACZC,gBAAiBA,EACjBE,MAAOA,SAInB,eAAC,IAAD,CAAOhC,MAAO,+CAAS,cAAC,IAAD,CAAUiG,OAAK,EAAC6K,aAAcyB,EAAKmD,SAAU7D,GAAa8D,SAAUnD,OAA3F,UAEQD,IAAQV,GAAY,GAAG5Q,MACnB,cAAC,EAAD,CACIQ,UAAWA,EACXH,QAASI,EACTwF,QAASpF,EACTF,iBAAkBmQ,EAAYnQ,iBAC9BuF,YAAaA,EACbC,eAAgBA,IAGpB,cAAC,EAAD,CAAc3F,UAAWA,EAAW4J,cAAe0G,EAAY1G,gBAEvE,qBAAKlK,UAAWC,KAAOwU,OAAvB,SACI,uBAAMzU,UAAWC,KAAOyU,mBAAxB,8EACqE,mBAAGhG,KAAI,UAAKnO,EAAgBgQ,YAArB,oBAA4C5P,GAAmBrD,OAAO,SAASsR,IAAI,aAA1F,yC,iCE3JzF,OAmBe+F,UAlBf,SAAiBC,EAAWC,M,mvBCQtBC,sJACJ/T,QAAUgU,uBAAcC,EAAKjW,mCAE7BkW,yBACSC,gBAACC,UAAOpU,QAAS/C,KAAK+C,QAASqU,SAAUpX,KAAKe,MAAMqW,cAJzDN,CAAsBI,EAAMG,WCA5BC,sJACJvU,QAAUgU,oBAAcC,EAAKjW,mCAE7BkW,yBACSC,gBAACC,UAAOpU,QAAS/C,KAAK+C,QAASqU,SAAUpX,KAAKe,MAAMqW,cAJzDE,CAAmBJ,EAAMG,WCPlBE,EAAoB,SAAC1Q,EAAI2Q,SACtB,mBAAP3Q,EAAoBA,EAAG2Q,GAAmB3Q,GAEtC4Q,EAAsB,SAAC5Q,EAAI2Q,SACjB,iBAAP3Q,EACV6Q,iBAAe7Q,EAAI,KAAM,KAAM2Q,GAC/B3Q,GCGA8Q,EAAiB,mBAAKC,GACtBC,EAAeX,EAAfW,gBAM8DC,IALzDD,IACTA,EAAaF,GAOf,IAAMI,EAAaF,GACjB,WAOEG,OALEC,aACAC,aACAvW,YACGwW,yCAIG7Y,EAAW6Y,EAAX7Y,OAEJyB,OACCoX,GACHxW,QAAS,gBAEDA,GAASA,EAAQyW,GACrB,MAAOC,SACPD,EAAMzN,iBACA0N,EAILD,EAAME,kBACU,IAAjBF,EAAMG,QACJjZ,GAAqB,UAAXA,GA7BtB,SAAyB8Y,YACbA,EAAMI,SAAWJ,EAAMK,QAAUL,EAAMM,SAAWN,EAAMN,UA6BzDa,CAAgBP,KAEjBA,EAAMzN,iBACNuN,eAOJnX,EAAMM,IADJsW,IAAmBE,GACTG,GAEAC,EAIPf,oBAAOnW,MAWZ6X,EAAOf,GACX,WAQEG,WANEa,uBAAYd,IACZ7J,YACArH,OACAoR,aACGE,sDAKHjB,gBAAC4B,kBAAcC,eACZ,YACWC,GAAVC,GAAUA,GAAVA,IAEQlW,EAAYiW,EAAZjW,QAEFmW,EAAWzB,EACfF,EAAkB1Q,EAAImS,EAAQE,UAC9BF,EAAQE,UAGJxI,EAAOwI,EAAWnW,EAAQoW,WAAWD,GAAY,GACjDnY,OACDoX,GACHzH,OACAwH,wBACQgB,EAAW3B,EAAkB1Q,EAAImS,EAAQE,UACzCE,EAAwBC,aAAWL,EAAQE,YAAcG,aAAW5B,EAAoByB,KAC9EhL,GAAWkL,EAAyBrW,EAAQmL,QAAUnL,EAAQmD,MAEvEgT,aAKPvB,IAAmBE,EACrB9W,EAAMM,IAAM2W,GAAgBC,EAE5BlX,EAAMkX,SAAWA,EAGZf,EAAMoC,cAAcT,EAAW9X,SC1G1C4W,EAAiB,mBAAKC,GACtBC,EAAeX,EAAfW,gBAMkC,IAL7BA,IACTA,EAAaF,GAUf,IAAM4B,EAAU1B,GACd,WAgBEG,WAdE,gBAAgBwB,aAAc,aAC9BC,6BAAkB,WAClBC,gBACWC,IAAX3X,UACA4X,UACUC,IAAVC,SACUC,IAAVb,SACAc,cACAC,WACOC,IAAPlU,MACAa,OACAoR,aACGE,sJAKHjB,gBAAC4B,kBAAcC,eACZ,YACWC,GAAVC,GAAUA,GAAVA,IAEMzB,EAAkBuC,GAAgBf,EAAQE,SAC1CiB,EAAa1C,EACjBF,EAAkB1Q,EAAI2Q,GACtBA,GAEgB4C,EAASD,EAAnBE,SAEFC,EACJF,GAAQA,EAAKlM,QAAQ,4BAA6B,QAE9CrL,EAAQyX,EACVC,YAAU/C,EAAgB6C,SAAU,CAClCD,KAAME,EACNV,QACAI,YACAC,WAEF,KACEH,KAAcD,EAChBA,EAAahX,EAAO2U,GACpB3U,GAEAb,EACuB,mBAAlB2X,EACHA,EAAcG,GACdH,EAEF3T,EACmB,mBAAdkU,EAA2BA,EAAUJ,GAAYI,EAEtDJ,IACF9X,EA9DZ,WAASwY,2BAAkBC,oDAClBA,EAAWpX,QAAO,mBAAK9D,KAAGkP,KAAK,KA6DhB+L,CAAexY,EAAWyX,GACtCzT,OAAaA,EAAU0T,QAGnB3Y,oBACa+Y,GAAYN,GAAgB,KAC7CxX,YACAgE,QACAa,GAAIsT,GACDhC,UAIDR,IAAmBE,EACrB9W,EAAMM,IAAM2W,GAAgBC,EAE5BlX,EAAMkX,SAAWA,EAGZf,gBAAC0B,EAAS7X,sxC,qHCjDZ+U,IA7Ce,SAAC,GAAsE,IAApEtB,EAAmE,EAAnEA,aAAcxB,EAAqD,EAArDA,aAAcrQ,EAAuC,EAAvCA,gBAAiBJ,EAAsB,EAAtBA,gBACpEmY,EAAqBlG,GAAwC,6BAAxBA,EAAaI,OAClD+F,EAAqB,uCAAG,4BAAArW,EAAA,0DACtBoW,EADsB,iDAEpBE,EAASC,YACXlY,EAAgB3B,GAChBuB,EAAgBvB,GAChB2B,EAAgB+R,OAAOG,YACvB,CAAEH,OAAQ/R,EAAgB+R,OAAQoG,iBAAkBnY,EAAgBmY,mBAExE9H,EAAa4H,GAAQ,GARK,2CAAH,qDAUrBG,EAAqBvG,EAAeA,EAAaI,OAAS,2BAC1DoG,EAAgB,SAAAvL,GAClB,OAAIA,EAAU,MAAa,GAAN,OAAUpC,KAAKC,KAAKmC,EAAU,OAA9B,SAChB,UAAUpC,KAAKC,KAAKmC,EAAQ,MAA5B,WAEHwL,EAAaP,EACW,UAAvBK,EAAiC,UAAY,UAC9C,iBAEN,OACI,sBAAK/Y,UAAS,kDAA6CiZ,GAActZ,QAAS,kBAAMgZ,KAAxF,UAE6B,UAAvBI,EACI,cAAC,IAAD,IACA,cAAC,IAAD,IAIqB,6BAAvBA,EACI,uFAAkDxY,EAAgBV,KAAlE,kCACmB,yBAAvBkZ,EACI,uHAAkFC,EAAcxG,EAAaQ,UAA7G,gCAAqJzS,EAAgBV,KAArK,OACmB,oBAAvBkZ,EACI,0DAAqBxY,EAAgBV,KAArC,0BAAkEmZ,EAAcxG,EAAa0G,WAA7F,iBACmB,UAAvBH,EACI,0DAAqBxY,EAAgBV,KAArC,kFACmB,WAAvBkZ,EACI,qIAAqG,U,sEC3C5GI,EAAe,6C,QCKb,SAASC,EAAT,GAAyD,IAAD,EAAtBC,EAAsB,EAAtBA,UAAWtT,EAAW,EAAXA,QAC1D,iBAAI7E,IAASC,MAAK,qBAAEnC,KAAeqa,YAAnC,aAAI,EAA2CC,iBAAwBC,QAAQC,QAAQ,IAClFzT,EAGE0T,YAAS,GAAD,OAAIC,IAAJ,kDAAiE3T,EAAjE,oBAAoFsT,EAApF,oBAAyGM,IAAzG,kDACZC,MAAK,SAAAC,GAEJ,IAAMC,EAAU/T,EAAQwL,cACxB,IAAKsI,EAAeC,GAAU,MAAO,GACrC,IAAKD,EAAeC,GAASC,SAAS,GAAI,MAAO,GAEjD,IAGMC,EAHiBH,EAAeC,GAASC,SAAS,GAAG/P,OAGvB7H,KAAI,SAAAG,GAAC,MAAK,CAC5CoF,QAASpF,EAAEoE,OAAO,GAAGgB,QACrBrC,OAAQ/C,EAAEoE,OAAO,GAAGrB,OACpBtC,SAAUT,EAAEoE,OAAO,GAAG3D,aAElBkX,EAAe,UAAMP,IAAN,kDAAmE3T,EAAnE,oBAAsFsT,EAAtF,oBAA2GM,IAA3G,yBAA0IO,KAAKC,UAAUH,GAAzJ,gCACrB,OAAOP,YAASQ,GACbL,MAAK,SAAAQ,GAAkB,IAAD,IAGrB,OAFoB,UAAGA,EAAcN,UAAjB,iBAAG,EAAwBC,SAAS,UAApC,aAAG,EAAqC/P,QAEtC7H,KAAI,SAAAG,GACxB,MAAO,CACLzC,KAAMyC,EAAEoE,OAAO,GAAGrB,OAClBzF,KAAM0C,EAAEoE,OAAO,GAAGqD,cAClBrC,QAASpF,EAAEoE,OAAO,GAAGgB,QAAQ6J,cAC7B8I,OAAQ/X,EAAEoE,OAAO,GAAGgB,UAAYyR,EAChCpW,SAAUT,EAAEoE,OAAO,GAAG3D,SACtBuX,iBAAkBhY,EAAEoE,OAAO,GAAG6T,WAC9BhV,WAAYjD,EAAEoE,OAAO,GAAGnB,WACxBiV,KAAMlY,EAAEoE,OAAO,GAAGnB,WAAajD,EAAEoE,OAAO,GAAG6T,kBAIhDE,OAAM,SAAAC,GACL,MAAMC,MAAM,sDAGjBF,OAAM,SAAAC,GACL,MAAMC,MAAM,uCAzCKpB,QAAQC,QAAQ,I,8ICJ1BoB,EAAmB,CAC9B,CAAE/a,KAAM,QAASgb,KAAM,WACvB,CAAEhb,KAAM,UAAWgb,KAAM,WACzB,CAAEhb,KAAM,QAASgb,KAAM,WACvB,CAAEhb,KAAM,QAASgb,KAAM,WACvB,CAAEhb,KAAM,WAAYgb,KAAM,YAGfC,EAAkB,CAC7B,CAAEjb,KAAM,SAAUgb,KAAM,WACxB,CAAEhb,KAAM,UAAWgb,KAAM,WACzB,CAAEhb,KAAM,QAASgb,KAAM,WACvB,CAAEhb,KAAM,SAAUgb,KAAM,WACxB,CAAEhb,KAAM,UAAWgb,KAAM,SAGdE,EAA0B,CACrC,CAAElb,KAAM,OAAQgb,KAAM,UACtB,CAAEhb,KAAM,UAAWgb,KAAM,UACzB,CAAEhb,KAAM,UAAWgb,KAAM,WACzB,CAAEhb,KAAM,oBAAqBgb,KAAM,YAGxBG,EAAoC,CAC/C,CAAEnb,KAAM,UAAWgb,KAAM,WACzB,CAAEhb,KAAM,oBAAqBgb,KAAM,YAGxBI,EAAe,CAC1B,CAAEpb,KAAM,OAAQgb,KAAM,UACtB,CAAEhb,KAAM,UAAWgb,KAAM,WACzB,CAAEhb,KAAM,oBAAqBgb,KAAM,YAGxBK,EAAuB,CAClC,CAAErb,KAAM,OAAQgb,KAAM,UACtB,CAAEhb,KAAM,UAAWgb,KAAM,UACzB,CAAEhb,KAAM,oBAAqBgb,KAAM,WACnC,CAAEhb,KAAM,OAAQgb,KAAM,YAGXM,EAAoB,CAC/B,EAAG,CAED,CAAEzT,QAAS,6CAA8C7H,KAAM,WAAYub,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GAG1I,CAAElT,QAAS,6CAA8C7H,KAAM,UAAWwb,WAAYJ,EAAcK,WAAYV,GAChH,CAAElT,QAAS,6CAA8C7H,KAAM,UAAWwb,WAAYJ,EAAcK,WAAYV,GAGhH,CAAElT,QAAS,6CAA8C7H,KAAM,iBAAkBub,QAAS,IAAKC,WAAYN,EAAyBO,WAAYR,GAGhJ,CAAEpT,QAAS,6CAA8C2T,WAAYL,EAAmCM,WAAYV,GAEpH,CAAElT,QAAS,6CAA8C2T,WAAYL,EAAmCM,WAAYV,GAGpH,CAAElT,QAAS,6CAA8C7H,KAAM,aAAcub,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAmBW,cAAe,WAC9K,CAAE1b,KAAM,eAAgB6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GAC9I,CAAE/a,KAAM,aAAc6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GAC5I,CAAE/a,KAAM,8BAA+B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GAC7J,CAAE/a,KAAM,kBAAmB6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACjJ,CAAE/a,KAAM,uBAAwB6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACtJ,CAAE/a,KAAM,qBAAsB6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACpJ,CAAE/a,KAAM,OAAQ6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACtI,CAAE/a,KAAM,wBAAyB6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACvJ,CAAE/a,KAAM,UAAW6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACzI,CAAE/a,KAAM,cAAe6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GAC7I,CAAE/a,KAAM,WAAY6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GAC1I,CAAE/a,KAAM,UAAW6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACzI,CAAE/a,KAAM,kBAAmB6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACjJ,CAAE/a,KAAM,WAAY6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GAE1I,CAAE/a,KAAM,6BAA8B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC7L,CAAE1b,KAAM,6BAA8B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC7L,CAAE1b,KAAM,8BAA+B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC9L,CAAE1b,KAAM,8BAA+B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC9L,CAAE1b,KAAM,6BAA8B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC7L,CAAE1b,KAAM,4BAA6B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC5L,CAAE1b,KAAM,8BAA+B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC9L,CAAE1b,KAAM,6BAA8B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC7L,CAAE1b,KAAM,6BAA8B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC7L,CAAE1b,KAAM,6BAA8B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC7L,CAAE1b,KAAM,6BAA8B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC7L,CAAE1b,KAAM,4BAA6B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC5L,CAAE1b,KAAM,uBAAwB6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WACvL,CAAE1b,KAAM,6BAA8B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC7L,CAAE1b,KAAM,4BAA6B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC5L,CAAE1b,KAAM,4BAA6B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC5L,CAAE1b,KAAM,uBAAwB6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WACvL,CAAE1b,KAAM,sBAAuB6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WACtL,CAAE1b,KAAM,6BAA8B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC7L,CAAE1b,KAAM,4BAA6B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC5L,CAAE1b,KAAM,4BAA6B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC5L,CAAE1b,KAAM,4BAA6B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC5L,CAAE1b,KAAM,6BAA8B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC7L,CAAE1b,KAAM,6BAA8B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC7L,CAAE1b,KAAM,4BAA6B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC5L,CAAE1b,KAAM,6BAA8B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC7L,CAAE1b,KAAM,+BAAgC6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC/L,CAAE1b,KAAM,6BAA8B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,WAC7L,CAAE1b,KAAM,4BAA6B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,EAAkBW,cAAe,YAG9L,IAAK,CAEH,CAAE1b,KAAM,iBAAkB6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GAChJ,CAAE/a,KAAM,OAAQ6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACtI,CAAE/a,KAAM,yBAA0B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GAExJ,CAAE/a,KAAM,yBAA0B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACxJ,CAAE/a,KAAM,yBAA0B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACxJ,CAAE/a,KAAM,yBAA0B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACxJ,CAAE/a,KAAM,UAAW6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GAEzI,CAAE/a,KAAM,2BAA4B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GAC1J,CAAE/a,KAAM,yBAA0B6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACxJ,CAAE/a,KAAM,YAAa6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GAE3I,CAAE/a,KAAM,YAAa6H,QAAS,6CAA8C2T,WAAYJ,EAAcK,WAAYV,GAClH,CAAE/a,KAAM,QAAS6H,QAAS,6CAA8C2T,WAAYJ,EAAcK,WAAYV,GAE9G,CAAElT,QAAS,6CAA8C7H,KAAM,uBAAwBub,QAAS,IAAKI,KAAM,qEAAsEH,WAAYH,EAAsBI,WAAYR,EAAiBS,cAAe,YAC/P,CAAE7T,QAAS,6CAA8C7H,KAAM,iBAAkBub,QAAS,IAAKI,KAAM,qEAAsEH,WAAYH,EAAsBI,WAAYV,IAE3N,GAAI,CACF,CAAE/a,KAAM,cAAe6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GAC7I,CAAE/a,KAAM,OAAQ6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACtI,CAAE/a,KAAM,OAAQ6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,GACtI,CAAE/a,KAAM,gBAAiB6H,QAAS,6CAA8C0T,QAAS,IAAKC,WAAYN,EAAyBO,WAAYV,KAKtIa,EAA4B,IAAIC,YAAU,CACrD,iEACA,kEACA,mEAEA,iDACA,mDACA,mDACA,2DAGA,kHAEA,+HACA,sFACA,oEACA,mEACA,2E,wBCkaaC,EA5iBiB,SAAC,GAA4M,IAA1MC,EAAyM,EAAzMA,cAAeC,EAA0L,EAA1LA,gBAAiB1b,EAAyK,EAAzKA,QAAS2b,EAAgK,EAAhKA,wBAAyBC,EAAuI,EAAvIA,QAASzb,EAA8H,EAA9HA,UAAWI,EAAmH,EAAnHA,WAAYsb,EAAuG,EAAvGA,gBAAiBC,EAAsF,EAAtFA,UAAWC,EAA2E,EAA3EA,+BAAgCC,EAA2C,EAA3CA,YAAaC,EAA8B,EAA9BA,gBAAiBC,EAAa,EAAbA,OAE7N,EAAgDjW,mBAAS,IAAzD,mBAAOkW,EAAP,KAAyBC,EAAzB,KACA,EAAoEnW,mBAAS,IAA7E,mBAAOoW,EAAP,KAAmCC,EAAnC,KAEA,EAAsCrW,mBAAS,MAA/C,mBAAOsW,EAAP,KAAoBC,EAApB,KAEA,EAAkCvW,oBAAS,GAA3C,mBAAOnE,EAAP,KAAkB2a,EAAlB,KACA,EAAkCxW,mBAAS,IAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,GAA8BF,mBAAS,MAAvC,qBAAOyW,GAAP,MAAgBC,GAAhB,MACA,GAAgD1W,mBAAS,MAAzD,qBAAO2W,GAAP,MAAyBC,GAAzB,MACA,GAAgD5W,mBAAS,QAAzD,qBAAO6W,GAAP,MAAyBC,GAAzB,MACA,GAA+C9W,mBAAS,IAAxD,qBAAO+W,GAAP,MAAyBC,GAAzB,MAEA,GAAkEhX,oBAAS,GAA3E,qBAAOiX,GAAP,MAAkCC,GAAlC,MACA,GAAwDlX,oBAAS,GAAjE,qBAAOmX,GAAP,MAA6BC,GAA7B,MACA,GAAoDpX,mBAAS,IAA7D,qBAAOqX,GAAP,MAA2BC,GAA3B,MACA,GAAgDtX,mBAAS,IAAzD,qBAAOuX,GAAP,MAAyBC,GAAzB,MAEMC,GAAmB/c,mBACnBgd,GAAYhd,iBAAO,IAGnBid,GAAkC9a,uBAAY,SAACyE,EAASsW,GAC5D,IAAMhW,EAAQwU,EAA2ByB,WAAU,SAAA3b,GAAC,OAAIA,EAAEoF,UAAYA,KAEtE,IAAe,IAAXM,EAAc,CAChB,IAAMkW,EAAUF,EAASxB,EAA2BxU,IAEpDyU,EAA8B,GAAD,mBACxBD,EAA2B1Q,MAAM,EAAG9D,IADZ,CAE3BkW,GAF2B,YAGxB1B,EAA2B1Q,MAAM9D,EAAQ,SAG/C,CAACwU,IAGE2B,GAAuBlb,uBAAY,SAACyE,GAAoC,IAAD,EAA1B0W,EAA0B,uDAAT,KAG5DpW,EAAQsU,EACX7U,MAAK,SAACnF,EAAGC,GAAJ,OAAUD,EAAEzC,KAAO0C,EAAE1C,MAAQ,EAAI,KACtCoe,WAAU,SAAAI,GAAC,OAAIA,EAAE3W,UAAYA,KAChC,UAAAoW,GAAU3a,QAAQ6E,UAAlB,SAA0BsW,QAE1BP,GAAgCrW,GAAS,SAAA6W,GACvC,IAAIL,EAAO,2BACNK,GADM,IAETC,UAAWD,EAAIC,WAEjB,GAAIJ,EAAgB,CAAC,IAAD,EAGZK,EAAkB,UAAGjC,EAA2Brb,MAAK,SAAAkd,GAAC,OAAIA,EAAE3W,UAAYA,YAAtD,aAAG,EAA6DgX,YACxF,GAAIN,EAAiBK,EAAoB,CAAC,IAAD,EACjC1b,EAAQ,UAAGuZ,EAAiBnb,MAAK,SAAAkd,GAAC,OAAIA,EAAE3W,UAAYA,YAA5C,aAAG,EAAmD3E,SAEpEmb,EAAQS,OAAS,IAAIC,IAAUR,GAAgBS,aAA9B,SAA2C,GAAM9b,IAAUL,QAAQ,GACpFwb,EAAQQ,YAAcN,GAG1B,OAAOF,OAER,CAAC5B,EAAkByB,GAAiCvB,IAEjDsC,GAAiB7b,uBAAY,WAEjC,IAAM8b,EAAWC,YAAY7e,EAAQnB,IAErC,GAAKigB,SAAOC,MAAMC,UAAU1B,IAA5B,CAKA,GAAInB,EAAiBnb,MAAK,SAAAkd,GAAC,OAAIA,EAAE3W,QAAQ6J,gBAAkBkM,GAAmBlM,iBAG5E,OAFAmM,GAAsB,SACtBJ,IAA6B,GAI/B,IAAM8B,EAAgB,IAAIC,WAAS5B,GAAoBhC,EAA2BsD,GAE5EO,EAAgBF,EAAc/Z,SAASoV,OAAM,kBAAMmD,GAAoB,iCAAmCH,OAC1G8B,EAAkBH,EAAcrc,WAAW0X,OAAM,kBAAMmD,GAAoB,mCAAqCH,OAChH+B,EAAmBJ,EAAcK,UAAU7D,EAAeC,GAAiBpB,OAAM,kBAAMmD,GAAoB,qCAAuCH,OAClJiC,EAAgCN,EAAcO,UAAU/D,GAAenB,OAAM,kBAAMmD,GAAoB,mCAAqCH,OAElJD,IAAwB,GACxBI,GAAoB,MAEpBrE,QAAQqG,IAAI,CACVN,EACAC,EACAC,EACAE,IACA9F,MAAK,SAACiG,GAEN,kBAAqDA,EAArD,GAAOxa,EAAP,KAAetC,EAAf,KAAyB0c,EAAzB,KAAoCK,EAApC,KAEAtC,IAAwB,GAEpBnY,GAAUtC,GAA0B,OAAd0c,GAAwC,OAAlBK,IAC9CpC,GAAsB,IACtBJ,IAA6B,GAE7Bf,GAAoB,SAAAgC,GAClB,MAAM,GAAN,mBACKA,GADL,CAEE,CACE7W,QAAS+V,GACT5d,KAAMwF,EACNtC,SAAUA,EAASgd,WACnBngB,KAAM,KACN4a,KAAM,EACNH,QAAQ,EACRC,iBAAkBwF,EAAcrd,WAChC8C,WAAY,QAKlBkX,GAA8B,SAAA8B,GAC5B,MAAM,GAAN,mBACKA,GADL,CAEE,CACE7W,QAAS+V,GACTuC,eAAgB,EAChBrB,OAAQmB,EAAcrd,WACtBic,YAAa,IAAIE,IAAUkB,EAAcrd,YAAYwd,IAAxC,SAA4C,GAAMld,EAASN,aAAYC,UACpF8b,SAAUsB,EAAcI,GAAG,SAKjC9C,IAAmB,SAAAmB,GACjB,MAAM,GAAN,mBACKA,GADL,CAEE,CACE7W,QAAS+V,GACTgC,UAAW,YAKlBhF,OAAM,SAAAC,GACPyF,QAAQC,IAAI,gCAAiC1F,GAC7C8C,IAAwB,WA5ExBI,GAAoB,kCA8ErB,CAACzd,EAASsd,GAAoB7B,EAAeC,EAAiB+B,GAAqBtB,IAEhF+D,GAAkBpd,uBAAY,SAACqd,GAAW,IAAD,EAC7C,IAAKvD,GAAkB,OAAO,EAC9B,IAAMwD,GAAgB,UAAA/D,EAA2Brb,MAAK,SAAAkd,GAAC,OAAIA,EAAE3W,UAAYyR,GAAgBkF,EAAEG,mBAArE,eAAgFG,SAAU,EAEhH,OAAO,IAAIC,IAAU7B,GAAiByD,QAAQF,GAAOG,wBAClDC,KAAKH,GACLI,IAAIjE,EAAYpC,kBAAoB,KAEtC,CAACkC,EAA4BO,GAAkBL,IAE5CkE,GAA2B3d,uBAAY,SAACqd,GAC5C,OAAO,IAAI1B,IAAUlC,EAAYpC,kBAAkBuG,MAAM9D,GAAiByD,QAAQF,GAAOG,0BACxF,CAAC1D,GAAkBL,IAEhBoE,GAA+B,SAACxE,GAA8E,IAA5DE,EAA2D,uDAA9B,GAAIW,EAA0B,uDAAP,GAC1G,OAAOb,EAAiBna,KAAI,SAAA4e,GAC1B,OAAO,uCACFA,GACAvE,EAA2Brb,MAAK,SAAAkd,GAAC,OAAIA,EAAE3W,UAAYqZ,EAAGrZ,YACtDyV,EAAiBhc,MAAK,SAAAkd,GAAC,OAAIA,EAAE3W,UAAYqZ,EAAGrZ,gBAM/CsZ,GAAwB/d,sBAAW,sBAAC,4BAAAX,EAAA,0DAElC2e,EAAkBH,GAA6BxE,EAAkBE,EAA4BW,IAAkB9b,QAAO,SAAAiB,GAAC,OAAIA,EAAEkc,aAC9G/gB,OAHmB,iDAKxCye,EAA+B+E,EAAgB9e,KAAI,SAAAG,GACjD,OAAO,eACFA,OAIPwZ,GAAwB,GACpBmF,EAAgB9f,MAAK,SAAAmB,GAAC,OAAIA,EAAEoF,UAAYyR,KAC1C4C,EAAQ,GAERA,EAAQ,GAGVI,EAAYc,IAlB4B,2CAmBvC,CAACX,EAAkBE,EAA4BW,GAAkBjB,EAAgCJ,EAAyBC,EAASI,EAAac,KAEnJrZ,qBAAU,WACJyZ,IACFQ,GAAiB1a,QAAQmb,UAE1B,CAACjB,KAEJzZ,qBAAU,WACR+Y,EAAeL,EAAiBnb,MAAK,SAAAkd,GAAC,OAAIA,EAAEhE,aAC3C,CAACiC,IAGJ1Y,qBAAU,WAERgZ,GAAa,GACbL,EAAoB,IAEpBnD,EAAuB,CAAEC,UAAWlZ,EAAQnB,GAAI+G,QAAS6V,IAAiBhC,MAAK,SAAA5P,GAC7EuS,EACEvS,EAAO7H,KAAI,SAAAkc,GACT,OAAO,eACFA,OAKT5B,EAA8BzS,EAAO7H,KAAI,SAAAkc,GACvC,MAAO,CACL3W,QAAS2W,EAAE3W,QACXsY,eAAgB,EAChBrB,OAAQN,EAAE/D,iBACVoE,YAAa,IAAIE,IAAUP,EAAE/D,kBAAkB2F,IAAlC,SAAsC,GAAM5B,EAAEtb,WAAUL,UACrE8b,UAAU,OAId5B,GAAa,MACZnC,OAAM,SAAAC,GACPyF,QAAQe,MAAMxG,QAEf,CAACkB,EAAegB,EAAcL,EAAqBpc,IAGtDyD,qBAAU,WAER,GAAKiZ,GAAL,CAEA,IAAMsE,EAAqBL,GAA6BxE,EAAkBE,EAA4BW,IAEhGiE,EAAwBD,EAAmB9f,QAAO,SAAAgd,GAAC,OAAIA,EAAEG,WAAaH,EAAEhE,UAAQ5c,OAChF4jB,EAAuBF,EAAmB9f,QAAO,SAAAgd,GAAC,OAAIA,EAAEG,UAAYH,EAAEhE,UAAQ5c,OAI9E6jB,EAAiCF,GAAyB,MAFpB,aAAfjhB,EAAQnB,GAAoB,IAAS,IAE8E,KAAvBqiB,EAEnHE,EAAa1E,GAAQ2E,aAAanH,OAArB,SAA8B,GAAM,IAEjDmG,EAAU,GAChBiB,IAAWC,SAAQ,SAAApB,GACjB,IAAIqB,EAAY9E,GAAQ8E,SAASrB,IAAUzD,GAAQ8E,SAASC,qBAAsE,EAA/C/E,GAAQ8E,SAASC,qBAAqBtB,GAAa,GAEhIG,EAAyBa,EAAgCK,EACzDE,EAA4BpB,EAAyBc,EAE3Df,EAAQF,GAAS,CACfA,QACAG,yBACAoB,4BACAP,oCAIJtE,GAAoB,CAClBoE,wBACAC,uBACAb,eAGD,CAAClE,EAAkBE,EAA4Blc,EAAWuc,GAASI,GAAkBE,GAAkBhd,IAI1GyD,qBAAU,WACR6V,YAAS,GAAD,OAAI/Y,EAAJ,qBAA2BP,EAAQnB,KAAM4a,MAAK,SAAAiD,GACpDC,GAAWD,EAAQ7a,SAClByY,OAAM,SAAAC,GACPyF,QAAQC,IAAI,cAAe1F,QAE5B,CAACha,EAAYP,IAIhByD,qBAAU,WACR,IAAMic,EAAWvD,EAAiBna,KAAI,SAAAkc,GACpC,IAAMU,EAAWC,YAAY7e,EAAQnB,IAC/BogB,EAAgB,IAAIC,WAAShB,EAAE3W,QAAS+T,EAA2BsD,GAEzE,OAAKV,EAAEhE,OAYA,CACL3S,QAAS2W,EAAE3W,QACX+X,UAAW,GAbJL,EAAcK,UAAU7D,EAAeC,GAC3CjC,MAAK,SAAC6F,GAEL,MAAO,CACL/X,QAAS2W,EAAE3W,QACX+X,UAAWA,EAAUhd,eAEtBgY,OAAM,SAAAC,GACPyF,QAAQC,IAAI,wBAAyB1F,SAS7CnB,QAAQqG,IAAIC,GAAUjG,MAAK,SAAAkI,GACzB1E,GAAmB0E,QAGpB,CAACjG,EAAiB1b,EAASmc,EAAkBV,IAGhDhY,qBAAU,WACJyY,GACJL,EACE,qCACE,cAAC,IAAD,CAAQ/W,OAAK,EAACH,OAAK,EAAClF,KAAM,cAAC,IAAD,IAAYD,QAASsc,EAA/C,mBAEGO,EAA2Bnb,QAAO,SAAAiB,GAAC,OAAIA,EAAEkc,YAAU/gB,OAAS,GAAK4iB,GAAgBpD,IAC9E,eAAC,IAAD,CAAQnY,OAAK,EAAClF,KAAM,cAAC,IAAD,IAA0BI,UAAW,UACjDL,QAAS,kBAAMqhB,MADvB,kBACsDxE,EAA2Bnb,QAAO,SAAAiB,GAAC,OAAIA,EAAEkc,YAAU/gB,OADzG,aAEA,cAAC,IAAD,CAAQqH,OAAK,EAAClF,KAAM,cAAC,IAAD,IAA0BI,UAAW,mBAAzD,+BAIT,CAACwc,EAA4BS,GAAkBjB,EAAiBC,EAAW+E,GAAuB3E,EAAQgE,KAE7G,IAAM0B,GAAsB9e,uBAAY,SAAC+e,EAAKC,GAAN,OAAelE,GAAgCkE,EAAKva,SAAS,SAAC6W,GACpG,GAAY,KAARyD,EACF,OAAO,2BACFzD,GADL,IAEEG,YAAa,EACbC,OAAQ,IAGZ,GACGqD,EAAIxV,SAAS,MAAkC,IAA1BwV,EAAIrf,MAAM,KAAKlF,QACP,IAA1BukB,EAAIrf,MAAM,KAAKlF,QAAiBukB,EAAIxV,SAAS,MAAQ,IAAIoS,IAAUoD,GAAKE,UAAU3D,EAAIG,aAE1F,OAAO,2BACFH,GADL,IAEEG,YAAasD,IAIjB,IAAKG,MAAMH,GAAM,CACf,IAAII,EAAiB,IAAIxD,IAAUoD,GAAKtf,QAAQuf,EAAKlf,UAOrD,OAN0G,IAAtG,IAAI6b,IAAUwD,GAAgBvD,aAA9B,SAA2C,GAAMoD,EAAKlf,WAAUsf,WAAWJ,EAAK3H,oBAClF8H,EAAiB,IAAIxD,IAAUqD,EAAK3H,kBAAkBgI,UAArC,SAA+C,GAAML,EAAKlf,WAAUL,QAAQuf,EAAKlf,WAGpGqf,EAAiBA,EAAelW,QAAQ,UAAW,IAE5C,2BACFqS,GADL,IAEEG,YAAa0D,EACbzD,OAAQ,IAAIC,IAAUwD,GAAgBvD,aAA9B,SAA2C,GAAMoD,EAAKlf,WAAUL,QAAQ,KAGpF,OAAO6b,OACL,CAACR,KAkCL,OAhCAna,qBAAU,WACRwO,YAAW,WAAO,IAAD,EACf,UAAA0L,GAAU3a,QAAQ,UAAlB,SAAsBmb,UACrB,OACF,CAAChC,IAGJ1Y,qBAAU,WAER,IAAM2e,EAAQ,CAAC,aAETlI,EAASmC,EAA2Brb,MAAK,SAAAmB,GAAC,OAAIA,EAAEoF,QAAQ6J,gBAAkB4H,GAAgB7W,EAAEkc,YAKlG,GAJInE,GACFkI,EAAMre,KAAN,eAAmBoY,EAAiBnb,MAAK,SAAAkd,GAAC,OAAIA,EAAE3W,UAAY2S,EAAO3S,WAAS7H,OAG1E2c,EAA2Brb,MAAK,SAAAmB,GAAC,OAAIA,EAAEoF,QAAQ6J,gBAAkB4H,GAAgB7W,EAAEkc,YAAW,CAEhG,IAAIgE,EAAqB,GACrBhG,EAA2Brb,MAAK,SAAAmB,GAAC,OAAIA,EAAEkc,UAAYlc,EAAEoF,QAAQ6J,gBAAkB4H,MAAeqJ,EAAmBte,KAAK,QAE1Hqe,EAAMre,KAAKse,EAAmB/V,KAAK,SAAW,WAI3B,IAAjB8V,EAAM9kB,QACR8kB,EAAMre,KAAK,eAGbkY,EAAgBmG,KACf,CAACjG,EAAkBE,EAA4BJ,EAAiBjc,IAE/Dkc,EAAe,6BAGjB,8BAEIpa,EAEE,sBAAKjC,UAAW,iBAAhB,UACE,oBAAIA,UAAW,OAAf,+BACA,cAACyiB,EAAA,EAAD,OAGF,8BAEgC,IAA5BnG,EAAiB7e,OACb,uEAEF,gCACE,qBAAKuC,UAAW,OAAhB,8GAIE8gB,GAA6BxE,EAAkBE,GAC5C/U,MAAK,SAACnF,EAAGC,GAAJ,OAAUD,EAAEzC,KAAO0C,EAAE1C,MAAQ,EAAI,KACtCsC,KAAI,SAAC8f,EAAMja,GAAP,OACH,sBAAKhI,UAAU,sBAAf,UACE,qBAAKA,UAAS,gCAA2BiiB,EAAKzD,SAAW,WAAa,IACjE7e,QAAS,kBAAM,GADpB,SAEE,cAAC,IAAD,CACE+iB,eAAe,iBACf1jB,GAAE,gBAAWijB,EAAKva,SAClB5E,MAAO,uBAAM9C,UAAW,+BAAjB,UACH,sBAAMA,UAAU,8BAAhB,SAEKqG,EAAUgC,SAAS4Z,EAAKriB,QAAUqiB,EAAKriB,KACtC,cAAC,IAAD,CAASoJ,KAAM,KAEf,qBAAKvD,IAAKwc,EAAKriB,KAAM2I,UAAU,QAAQ7C,IAAI,aAAayD,QAAS,SAACuR,GAChEpU,GAAa,SAAA8C,GAAM,4BAAQA,GAAR,CAAgB6Y,EAAKriB,eAIlD,sBAAMI,UAAU,8BAAhB,SAA+CiiB,EAAKpiB,UAEtD8iB,QAASV,EAAKzD,SACdhK,SAAU,kBAAM2J,GAAqB8D,EAAKva,cAG9C,sBAAK1H,UAAU,sBAAf,eACMiiB,EAAKtD,OAAUsD,EAAKzH,MAAM9X,QAAQ,MAExC,qBAAK1C,UAAU,yBAAf,SACE,cAAC,IAAD,CACEX,IAAK,SAACujB,GAAD,OAAa9E,GAAU3a,QAAQ6E,GAAS4a,GAC7C5iB,UAAW,uBACXF,MAAOmiB,EAAKvD,YACZlK,SAAU,SAACwN,GAAD,OAASD,GAAoBC,EAAKC,UA/BRja,MAqChD,qBAAKhI,UAAW,wBAAhB,SAEIqd,GACI,8BAEEE,GACI,sBAAKvd,UAAW,gCAAhB,UACA,cAAC,IAAD,IADA,mCAIA,qCAEE2d,IAAoB,qBAAK3d,UAAW,QAAhB,SAA0B2d,KAEhD,8BACE,cAAC,IAAD,CACE3d,UAAW,qBACX6iB,YAAa,6BACb/iB,MAAO2d,GACPjJ,SAAU,SAACwN,GACTtE,GAAsBsE,IAExB3iB,IAAKwe,OAGT,sBAAK7d,UAAW,gBAAhB,UACE,cAAC,IAAD,CAAQ8E,OAAK,EAAClF,KAAM,cAAC,IAAD,IAAaI,UAAW,kCACpCL,QAAS,WACP2d,IAA6B,GAC7BI,GAAsB,IACtBE,GAAoB,OAJ9B,oBAMA,cAAC,IAAD,CAAQ9Y,OAAK,EAAClF,KAAM,cAAC,IAAD,IAA8BI,UAAW,eACrDL,QAAS,kBAAMmf,MADvB,yBAMR,cAAC,IAAD,CAAQha,OAAK,EAAClF,KAAM,cAAC,IAAD,IAA8BI,UAAW,oBACrDL,QAAS,kBAAM2d,IAA6B,IADpD,iCAML+C,GAAgBpD,KAAqBT,EAA2Bnb,QAAO,SAAAiB,GAAC,OAAIA,EAAEkc,YAAU/gB,OAAS,GAClG,sBAAKuC,UAAW,wCAAhB,iHAE+B,uBAAMA,UAAW,wBACXL,QAAS,kBAAMoiB,GAAoB,IAAInD,IAAUgC,GAAyB3D,KAAmBqF,UAA1D,SAAoE,GAAM5F,EAAY3Z,WAAUL,QAAQ,EAAGkc,IAAUkE,YAAapG,IAD3K,UAE1B,IAAIkC,IAAUgC,GAAyB3D,KAAmBqF,UAA1D,SAAoE,GAAM5F,EAAY3Z,WAAUL,QAAQ,EAAGkc,IAAUkE,YAF3F,IAEyG3iB,EAAQ4iB,wBAKhJhG,IACA,sBAAK/c,UAAW,4BAAhB,UACE,qBAAKA,UAAW,6BAAhB,+BACA,oBAAIA,UAAW,0BAAf,SAEI5C,OAAO4lB,OAAOjG,GAAiByD,SAASre,KAAI,SAAC8gB,EAAGjb,GAC5C,OAAQ,oBAAgBhI,UAAWijB,EAAE3C,QAAUrD,GAAmB,WAAa,GACnEtd,QAAS,kBAAMud,GAAoB+F,EAAE3C,QADzC,SACkD2C,EAAE3C,OAD3CtY,QAMzB,uBAAOhI,UAAW,yBAAlB,SACE,gCACA,+BACE,+CAGO+c,GAAiBsE,wBAA0BtE,GAAiBqE,wBAC/D,sBAAMphB,UAAW,oBAAjB,SACI,iCAAO+c,GAAiBsE,qBAAuBtE,GAAiBqE,sBAAhE,qBAIR,qBACEphB,UAAW,gCADb,cACgD+c,GAAiByD,QAAQvD,IAAkB4E,0BAA0Bnf,QAAQ,wB,2BChMxIwgB,EAlWkB,SAAC,GAcM,EAbJpS,WAaK,IAZL+K,EAYI,EAZJA,gBACAnJ,EAWI,EAXJA,OACAyQ,EAUI,EAVJA,YACAhjB,EASI,EATJA,QACAijB,EAQI,EARJA,4BACAC,EAOI,EAPJA,SACApH,EAMI,EANJA,UACAF,EAKI,EALJA,QACAC,EAII,EAJJA,gBACAtb,EAGI,EAHJA,WACA4iB,EAEI,EAFJA,SACAjH,EACI,EADJA,OAIlC,EAAkDjW,mBAAS,IAA3D,mBAAOmd,EAAP,KAA0BC,EAA1B,KAGA,EAA8Cpd,mBAAS,IAAvD,mBAAOqd,EAAP,KAAwBC,EAAxB,KAGA,EAAsDtd,mBAAS,IAA/D,mBAAOud,EAAP,KAA4BC,EAA5B,KAEA,EAA4Cxd,oBAAS,GAArD,mBAAOyd,EAAP,KAAuBC,EAAvB,KACA,EAAgD1d,mBAAS,MAAzD,mBAAO2d,EAAP,KAAyBC,EAAzB,KACA,EAAkC5d,mBAAS,IAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KAEA,GAAsEF,mBAAS,MAA/E,qBAAO6d,GAAP,MAAoCC,GAApC,MAEA,GAA8C9d,mBAAS,MAAvD,qBAAO+d,GAAP,MAAwBC,GAAxB,MAEA,GAA4Bhe,mBAAS,MAArC,qBAAOie,GAAP,MAAeC,GAAf,MAGMC,GAA4B,SAAC/F,GAAsF,IAA5E+E,EAA2E,uDAAvD,GAAIE,EAAmD,uDAAjC,GAAIE,EAA6B,uDAAP,GAC/G,OAAOnF,EAASnd,QAAO,SAAAgd,GAAC,OAAIA,EAAE3W,UAAYyR,KAAchX,KAAI,SAAAkc,GAC1D,IAAImG,EAAQ,2BACPnG,GADO,IAEVoG,QAAS,KACTC,UAAW,KACXC,MAAM,EACNC,SAAS,EACTnF,UAAW,IAeb,OAbI8D,EAAkBlF,EAAE3W,WACtB8c,EAASC,QAAUlB,EAAkBlF,EAAE3W,SAAS+c,QAChDD,EAASE,UAAYnB,EAAkBlF,EAAE3W,SAASgd,WAGhDjB,EAAgBpF,EAAE3W,WACpB8c,EAASG,MAAO,GAGdhB,EAAoBtF,EAAE3W,WACxB8c,EAASI,SAAU,GAGdJ,MAILK,GAAwB5hB,sBAAW,sBAAC,sBAAAX,EAAA,sFACjC+hB,SADiC,IACjCA,QADiC,EACjCA,GAAQS,YAAYpS,EAAOhL,QAASvH,EAAQ+G,SAChD0S,MAAK,SAAAmL,GAEJ,OADAb,GAA+Ba,KAC1BA,IACH1B,EAAS,4GAAsE,4BAAI3Q,EAAOhL,UAAjF,0BACQ,4BAAIvH,EAAQnB,UACtB,MAIVyb,OAAM,SAAAhS,GAEL,OADA4a,EAAS,6CAA+C5a,EAAEyY,QACnD,MAb6B,2CAevC,CAAC/gB,EAASkjB,EAAU3Q,EAAQ2R,KAGzBW,GAAmB/hB,uBAAY,WACnC,IAAIgiB,EAAQ,EAMZ,OALAV,GAA0BnB,EAA6BG,EAAmBE,EAAiB,IAAI/B,SAAQ,SAAArD,GACjGA,EAAEsG,MACJM,OAGGA,IACN,CAAC7B,EAA6BG,EAAmBE,IAG9CyB,GAAYjiB,sBAAW,uCAAC,WAAOyE,GAAP,iCAAApF,EAAA,6DAAgB6iB,EAAhB,yCAEhBN,KAFgB,qEAItBO,EAAiBhC,EAA4BjiB,MAAK,SAAAkd,GAAC,OAAIA,EAAE3W,UAAYA,KAJ/C,wDAOtB2d,EAAW5J,EAA0B6J,mBAAmB,WAAY,CAACzJ,EAAiB,IAAI+C,IAAUwG,EAAezG,QAAQjc,QAAQ,KAGzIkhB,GAAuB,SAAArF,GAErB,OADAA,EAAI7W,IAAW,EACR,eAAK6W,MAGdyF,EAAoB,MACduB,EAAiBlB,GAAOmB,gBAAgB,CAC5CC,KAAM/S,EAAOhL,QACb7C,GAAI6C,EACJ1F,KAAMqjB,EACNK,SAAU,IACV/D,SAAUwC,GACVjd,QAAS/G,EAAQ+G,UAChB0S,KAPoB,uCAOf,WAAM+L,GAAN,SAAArjB,EAAA,yDAENkhB,GAAqB,SAAAjF,GAKnB,OAJAA,EAAI7W,GAAJ,2BACK6W,EAAI7W,IADT,IAEE+c,SAAS,IAEJ,eAAKlG,OAGV4G,EAVE,gCAWEQ,EAAKC,OAXP,OAYJlC,GAAmB,SAAAnF,GAEjB,OADAA,EAAI7W,IAAW,EACR,eAAK6W,MAGdqF,GAAuB,SAAArF,GAErB,OADAA,EAAI7W,IAAW,EACR,eAAK6W,MAGdiF,GAAqB,SAAAjF,GAKnB,OAJAA,EAAI7W,GAAJ,2BACK6W,EAAI7W,IADT,IAEE+c,SAAS,IAEJ,eAAKlG,MA3BV,iCA+BC,GA/BD,2CAPe,uDAuCpB9D,OAAM,SAAAC,GAuBP,OAtBAkJ,GAAuB,SAAArF,GAErB,OADAA,EAAI7W,IAAW,EACR,eAAK6W,MAGV7D,EAAI7F,QAAQxM,SAAS,eACvB2b,EAAoB,+BAEpBA,EAAoBtJ,EAAI7F,SAG1BiP,GAAkB,KAEbP,EAAkB7b,IAAa6b,EAAkB7b,KAAmD,IAAvC6b,EAAkB7b,GAAS+c,UAC3FjB,GAAqB,SAAAjF,GAKnB,OAJAA,EAAI7W,GAAJ,2BACK6W,EAAI7W,IADT,IAEE+c,SAAS,IAEJ,eAAKlG,OAGT,KA9EmB,oBAiFnBgH,GAjFmB,4CAAD,sDAmF1B,CAAClB,GAAQxI,EAAiB0H,EAAmBH,EAA6Be,GAAiBhkB,EAASuS,EAAQmS,KAGzGgB,GAAkB5iB,uBAAY,WAClCogB,EAAS,MACTK,EAAmB,IACnBF,EAAqB,IACrBM,GAAkB,GAClB/H,EAAQ,KACP,CAACsH,EAAUG,EAAsBE,EAAoB3H,IAGlD+J,GAAoB7iB,uBAAY,WAEpC4iB,KACA5J,MACC,CAAC4J,GAAiB5J,IAyGrB,OAvGArY,qBAAU,WACR0gB,GAAUyB,YAAU,CAClBrT,OAAQA,EACRyQ,YAAaA,EACbjc,QAAS/G,EAAQ+G,aAElB,CAAC/G,EAASuS,EAAQyQ,IAGrBvf,qBAAU,WACRihB,OACC,CAACA,KAEJjhB,qBAAU,WACR,IAAM9B,EAAG,UAAMpB,EAAN,qBAA6BP,EAAQnB,IAE9Cya,YAAS3X,GAAK8X,MAAK,SAAAiD,GACjB,IAAI8E,EAAW9E,EAAQ7a,KAAK2f,SAAS2B,GACjCzG,EAAQ7a,KAAK2f,SAASC,uBACxBD,GAAY9E,EAAQ7a,KAAK2f,SAASC,qBAAqB0B,IAEzDc,GAAmBzC,MAClBlH,OAAM,SAAAC,GACP2I,EAAS3I,EAAI7F,QAAU,IAAM/S,QAG9B,CAAC3B,EAASO,EAAY2iB,EAAUC,IAGnC1f,qBAAU,WAGR,GAAKqgB,IACA7mB,OAAO4lB,OAAOS,GAAiBhmB,QAC/B0mB,GAAL,CAEA,IAOM6B,EAPuBzB,GAA0BnB,EAA6BG,EAAmBE,EAAiB,IAAIthB,KAAI,SAAAkc,GAC9H,MAAO,CACL3W,QAAS2W,EAAE3W,QACXue,OAAQ5H,EAAEoG,YAI8BtjB,MAAK,SAAAmB,GAAC,OAAiB,OAAbA,EAAE2jB,UAEpDD,GAEF5T,YAAW,WACT8S,GAAUc,EAAete,SAAS,KACjC,QAEJ,CAAC0b,EAA6B8B,GAAW3B,EAAmBE,EAAiBQ,GAA6BE,KAE7GvgB,qBAAU,WACR,GAAKwf,EAA4B3lB,OAAjC,CACA,IAAMyoB,EAAyB,GAC/B9C,EAA4B1B,SAAQ,SAAArD,GAClC6H,EAAuB7H,EAAE3W,UAAW,KAEtCgc,EAAmBwC,MAClB,CAAC9C,EAA6BM,IAEjC9f,qBAAU,WACJigB,GACFR,EAAS,gEAAkEU,EAAmB,KAAOA,EAAmB,IAAM,OAE/H,CAACF,EAAgBR,EAAUU,IAI9BngB,qBAAU,WACJohB,OAAuB5B,EAA4B3lB,QACrD4lB,EAAS,QAEV,CAAC2B,GAAkB5B,EAA6BC,IAEnDzf,qBAAU,WACJyY,GACJL,EACE,qCACE,cAACmK,EAAA,EAAD,CACEnmB,UAAW,QACXJ,KAAM,cAAC,IAAD,IACND,QAAS,kBAAMkmB,MAHjB,kBAMEb,OAAuBT,GAA0BnB,GAA6B3lB,OAE5E,cAAC0oB,EAAA,EAAD,CACEnmB,UAAW,UACXJ,KAAM,cAAC,IAAD,IACND,QAAS,kBAAMsc,KAHjB,mBAMA,cAACkK,EAAA,EAAD,CACEnmB,UAAW,mBACXJ,KAAM,cAAC,IAAD,IAFR,4BAOP,CAACimB,GAAiBC,GAAmBd,GAAkB5B,EAA6BpH,EAAiBK,EAAQJ,IAE5GI,EAAe,6BAGjB,gCAEI2I,KAAqBT,GAA0BnB,GAA6B3lB,OACxE,qBACAuC,UAAU,mCADV,mBACiDukB,GAA0BnB,GAA6B3lB,OAASunB,KADjH,6CAEA,qBAAKhlB,UAAU,mCAAf,kEAILukB,GAA0BnB,EAA6BG,EAAmBE,EAAiBE,GAAqBxhB,KAAI,SAAC8f,EAAMja,GAAP,OACnH,sBAAKhI,UAAU,sBAAf,UACE,sBAAMA,UAAU,iEAAhB,UAEMiiB,EAAKriB,MAAQyG,EAAUgC,SAAS4Z,EAAKriB,MACrC,cAAC,IAAD,CAASoJ,KAAM,KAEf,qBAAKvD,IAAKwc,EAAKriB,KAAM2I,UAAU,QAAQ7C,IAAI,aAAayD,QAAS,SAACuR,GAChEpU,GAAa,SAAA8C,GAAM,4BAAQA,GAAR,CAAgB6Y,EAAKriB,eAIhD,qBAAKI,UAAU,uBAAf,SACGiiB,EAAKpiB,OAER,sBAAKG,UAAU,yBAAf,UACG,IAAI4e,IAAUqD,EAAKtD,QAAQsB,IAA3B,SAA+B,GAAMgC,EAAKlf,WAAUL,UADvD,IACkE,uBAChE1C,UAAW,6BADqD,gBAClBiiB,EAAKtD,OAAUsD,EAAKzH,MAAM9X,QAAQ,GADhB,UAGlE,qBAAK1C,UAAU,cAGf,8BACMiiB,EAAKxC,WAAaR,SAAOL,UAAU6G,KAAKxD,EAAKxC,WAAW2G,IAAInE,EAAKtD,SAAYsD,EAAK0C,KAapF,sBAAK3kB,UAAW,sBAAuBL,QAAS,kBAAMulB,GAAUjD,EAAKva,UAArE,UAA+E,cAAC,IAAD,IAA/E,WAXA,mCACIua,EAAK2C,SAAW3C,EAAKwC,QACnB,sBAAKzkB,UAAW,8BAAhB,UAA+C,cAAC,IAAD,IAA/C,iBAEF,cAACmmB,EAAA,EAAD,CAAQnmB,UAAW,yBACXL,QAAS,kBAAMulB,GAAUjD,EAAKva,UADtC,wBA5BgCM,UCmBnCqe,EA5Ue,SAAC,GAiBxB,IAcDhC,EA9BJxI,EAgBI,EAhBJA,gBACAnJ,EAeI,EAfJA,OACAyQ,EAcI,EAdJA,YACAhjB,EAaI,EAbJA,QACAmmB,EAYI,EAZJA,gBACApK,EAWI,EAXJA,+BACAkH,EAUI,EAVJA,4BACAC,EASI,EATJA,SACAtH,EAQI,EARJA,QACAwK,EAOI,EAPJA,eACAtK,EAMI,EANJA,UACAvb,EAKI,EALJA,WACAsb,EAII,EAJJA,gBACAwK,EAGI,EAHJA,2BACAlD,EAEI,EAFJA,SACAjH,EACI,EADJA,OAGA,EAAkCjW,mBAAS,IAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KACA,EAAkDF,oBAAS,GAA3D,mBAAOqgB,EAAP,KAA0BC,EAA1B,KACA,EAAoDtgB,oBAAS,GAA7D,mBAAOugB,EAAP,KAA2BC,EAA3B,KACA,EAAwCxgB,mBAAS,KAAjD,mBAAOygB,EAAP,KAAqBC,EAArB,KACA,EAAwD1gB,mBAAS,MAAjE,mBAAO2gB,EAAP,KAA6BC,EAA7B,KACA,EAAkE5gB,mBAAS,KAA3E,mBAAO6gB,EAAP,KAAkCC,EAAlC,KACA,GAAkD9gB,mBAAS,KAA3D,qBAAO+gB,GAAP,MAA0BC,GAA1B,MAEA,GAAkDhhB,oBAAS,GAA3D,qBAAOihB,GAAP,MAA0BC,GAA1B,MAEA,GAA8ClhB,mBAAS,MAAvD,qBAAO+d,GAAP,MAAwBC,GAAxB,MAGA,IACEC,EAAS0B,YAAU,CACjBrT,OAAQA,EACRyQ,YAAaA,EACbjc,QAAS/G,EAAQ+G,UAEnB,MAAOwT,IAEP2I,EAAS,8EAIX,IAAMwC,GAAkB5iB,uBAAY,WAClC8Y,EAAQ,GACRG,EAA+B,MAC9B,CAACA,EAAgCH,IAE9BwL,GAAoBtkB,uBAAY,WACpC8Y,EAAQ,KACP,CAACA,IAEEyL,GAAsB,SAACpE,GAC3B,OAAOA,EAA4B/hB,QAAO,SAAAgd,GAAC,OAAIA,EAAEG,WAAaH,EAAEoJ,cAAgBpJ,EAAEhE,UAAQ5c,QAItFiqB,GAAgBzkB,sBAAW,sBAAC,sBAAAX,EAAA,yDAC3B+hB,EAD2B,wDAEhChB,EAAS,MACTuD,GAAsB,GAEjBL,GACHC,EAA2B,MANG,SASMnC,EAAOS,YAAYpS,EAAOhL,QAASvH,EAAQ+G,SAASuT,OAAM,SAAAhS,GAC9F4a,EAAS,6CAA+C5a,EAAEyY,UAV5B,cAc9BmD,EAAOmB,gBAAgB,CACrBC,KAAM/S,EAAOhL,QACb7C,GAAIgX,EACJ6J,SAAU,MAAwB,aAAfvlB,EAAQnB,GAAoB,IAAS,GACxD2iB,SAAUwC,GACVrkB,MAAO,KAAO,IAAI8e,IAAUiI,GAAcpkB,SAAS,IACnDyE,QAAS/G,EAAQ+G,UAChB0S,KAPH,uCAOQ,WAAM+L,GAAN,SAAArjB,EAAA,sEACAqjB,EAAKC,OADL,cAENc,GAAqB,GACrBE,GAAsB,GAHhB,mBAIC,GAJD,2CAPR,uDAYGnM,OAAM,SAAAC,GAUP,OATAgM,GAAqB,GACrBE,GAAsB,GAElBlM,GAAOA,EAAI7F,QAAQxM,SAAS,oCAC9Bgb,EAAS,wDAAD,OAAyD3Q,EAAOhL,QAAhE,MAER2b,EAAS,kCAAoC3I,EAAI7F,UAG5C,MAGTwO,EAAS,4GAAsE,4BAAI3Q,EAAOhL,UAAjF,0BAAoH,4BAAIvH,EAAQnB,SACzI4nB,GAAsB,IAxCQ,2CA0C/B,CAACvC,EAAQhB,EAAUkD,EAAgBpmB,EAASqmB,EAA4B9T,EAAQmJ,EAAiBgL,EAAc1C,KAE5GwD,GAAe1kB,uBAAY,SAAC0b,GAChC,IAAIyD,EAAiB,IAAIxD,IAAUD,GAAQ2D,UAAtB,SAAgC,GAAMgE,EAAgBvjB,WAAUL,QAAQ4jB,EAAgBvjB,UAAUmJ,QAAQ,UAAW,IAE1Ikb,GAAqBhF,GACrB0E,EAAgBnI,GAChB2I,IAAqB,KACpB,CAAChB,IAEJ1iB,qBAAU,WACR,IAAM9B,EAAG,UAAMpB,EAAN,qBAA6BP,EAAQnB,IAE9Cya,YAAS3X,GAAK8X,MAAK,SAAAiD,GACjB,IAAI8E,EAAW9E,EAAQ7a,KAAK2f,SAAS2B,GACjCzG,EAAQ7a,KAAK2f,SAASC,uBACxBD,GAAY9E,EAAQ7a,KAAK2f,SAASC,qBAAqB0B,IAEzD,IAAMsE,EAAmC,KAAXjG,EAGxBkG,EADwBL,GAAoBpE,GACOzB,EAAxB,KAEjCuF,EAA6B,IAAItI,KAAWgJ,EAAwBC,GAA0BnlB,QAAQ,IAAIA,QAAQ,IAClH,IAAMolB,EAAgB,IAAIlJ,IAAU0H,EAAgBhM,kBAAkBuG,MAAO+G,EAAwBC,GACrGb,EAAwBc,EAAc1B,IAAI,GAAK0B,EAAcplB,QAAQ,GAAK,GAC1E0hB,GAAmBzC,MAClBlH,OAAM,SAAAC,GACP2I,EAAS3I,EAAI7F,QAAU,IAAM/S,QAG9B,CAAColB,EAA8BF,EAAyBV,EAAiBnmB,EAASO,EAAY2iB,EAAUC,EAAUF,IAErH,IAAM2E,GAAiB9kB,uBAAY,SAAC+e,GAElC,GADAsF,IAAqB,GACT,KAARtF,EAGF,OAFAoF,GAAqB,QACrBN,EAAgB,GAGlB,GACG9E,EAAIxV,SAAS,MAAkC,IAA1BwV,EAAIrf,MAAM,KAAKlF,QACP,IAA1BukB,EAAIrf,MAAM,KAAKlF,QAAgBukB,EAAIxV,SAAS,KAEhD4a,GAAqBpF,QAIvB,IAAKG,MAAMH,GAAM,CACf,IAAII,EAAiB,IAAIxD,IAAUoD,GAAKtf,QAAQ4jB,EAAgBvjB,UACgE,IAA5H,IAAI6b,IAAUwD,GAAgBvD,aAA9B,SAA2C,GAAMyH,EAAgBvjB,WAAUsf,WAAWiE,EAAgBhM,oBACxG8H,EAAiB,IAAIxD,IAAU0H,EAAgBhM,kBAAkBgI,UAAhD,SAA0D,GAAMgE,EAAgBvjB,WAAUL,QAAQ4jB,EAAgBvjB,WAGrIqf,EAAiBA,EAAelW,QAAQ,UAAW,IAEnDkb,GAAqBhF,GACrB0E,EAAgB,IAAIlI,IAAUwD,GAAgBvD,aAA9B,SAA2C,GAAMyH,EAAgBvjB,WAAUL,QAAQ,OAEpG,CAAC4jB,IA6DJ,OA3DA1iB,qBAAU,WACR,IAAMokB,EAAqB,IAAIpJ,IAAU0H,EAAgB3H,QAAQ2D,UAAtC,SAAgD,GAAMgE,EAAgBvjB,WAAUL,QAAQ4jB,EAAgBvjB,UAAUmJ,QAAQ,UAAW,IAChKkb,GAAqBY,GACrBlB,EAAgBR,EAAgB3H,UAC/B,CAAC2H,IAEJ1iB,qBAAU,WACR,IAAIyY,EAAJ,CAiDAL,EAhD4B,WAC1B,IAAIiM,EAAU,GA4Cd,OA3CIxB,EACEF,EACF0B,EAAQ/jB,KAAK,cAAC,IAAD,CACXtE,KAAM,cAAC,IAAD,IACNI,UAAW,eACXL,QAAS,kBAAM4nB,MAHJ,mBAMbU,EAAQ/jB,KAAK,cAAC,IAAD,CACXtE,KAAM,cAAC,IAAD,IACNI,UAAW,eACXL,QAAS,kBAAMsc,KAHJ,oBAMLoI,GAOV4D,EAAQ/jB,KAAK,cAAC,IAAD,CACXtE,KAAM,cAAC,IAAD,IACNI,UAAW,QACXL,QAAS,kBAAMkmB,MAHJ,iBAIP,MAGFc,EACFsB,EAAQ/jB,KAAK,eAAC,IAAD,CACXtE,KAAM,cAAC,IAAD,IACNI,UAAW,mBAFA,oBAIJsmB,EAAgBzmB,KAJZ,QAGP,MAGNooB,EAAQ/jB,KAAK,eAAC,IAAD,CACXtE,KAAM,cAAC,IAAD,IACNI,UAAW,UACXL,QAAS,kBAAM+nB,MAHJ,kBAKNpB,EAAgBzmB,OADjB,OAxBRooB,EAAQ/jB,KAAK,cAAC,IAAD,CACXtE,KAAM,cAAC,IAAD,IACNI,UAAW,aACXL,QAAS,kBAAMsc,KAHJ,oBA4BRgM,EAGOC,OACf,CAACzB,EAAmBF,EAAgBvK,EAAiBC,EAAW0K,EAAoBd,GAAiB6B,GAAeH,GAAmBlD,EAAQiC,EAAiBjK,IAE/JA,EAAe,6BAGjB,8BAGIgI,GACA,qCACE,sBAAKrkB,UAAW,8BAAhB,UACE,qBAAKA,UAAU,8BAAf,SAEIqG,EAAUgC,SAASie,EAAgB1mB,MACjC,cAAC,IAAD,CAASoJ,KAAM,KAEf,qBAAKvD,IAAK6gB,EAAgB1mB,KAAM2I,UAAU,QAAQ7C,IAAI,aAAayD,QAAS,SAACuR,GAC3EpU,GAAa,SAAA8C,GAAM,4BAAQA,GAAR,CAAgBkd,EAAgB1mB,eAI3D,sBAAKI,UAAU,oCAAf,kCAAwE,4BAAIsmB,EAAgBzmB,aAI5F4mB,EAEE,mCACE,sBAAKzmB,UAAW,mCAAhB,+BAAuEsmB,EAAgBzmB,KAAvF,uBAKF,qCACE,sBAAKG,UAAW,uBAAhB,UACE,sBAAMA,UAAW,2BAAjB,6BAGA,uBAAMA,UAAW,6BACXL,QAAS,kBAAMgoB,GAAarB,EAAgBhM,mBADlD,UAEG,IAAIsE,IAAU0H,EAAgBhM,kBAAkBgI,UAAhD,SAA0D,GAAMgE,EAAgBvjB,WAAUL,QAAQ,GAFrG,IAE0G4jB,EAAgBzmB,WAI5H,sBAAKG,UAAW,uBAAhB,UACE,sBAAMA,UAAW,2BAAjB,+BAEGqnB,IAA+C,OAAzBN,GAAiCF,EAAeE,EAErE,cAAC,IAAD,CACE/mB,UAAW,uBACXF,MAAOqnB,GACP3S,SAAUuT,KAGZ,8BAAMZ,QAKe,OAAzBJ,GAAiC,IAAInI,IAAUiI,GAAc3G,GAAG6G,IAChE,sBAAK/mB,UAAW,mCAAhB,UACE,gCAEMwnB,GAAoBpE,GAClB,2BACA,2BAJR,MAOI,IAAIxE,IAAUqI,GAA2B3E,UAAzC,SAAmD,GAAMgE,EAAgBvjB,WAAUL,QAAQ,GAP/F,IAOoG4jB,EAAgBzmB,KAClH,uBACEG,UAAW,uBADb,gBACyC,IAAI4e,IAAUqI,GAA2BpI,aAAayH,EAAgB9L,MAAM9X,QAAQ,GAD7H,UAIF,qBAAK1C,UAAW,YAAhB,SAEI+mB,EAAuB,EAErB,qCACE,6DACA,uBAAM/mB,UAAW,6BAA8BL,QAAS,kBAAMgoB,GAAaZ,IAA3E,UACG,IAAInI,IAAUmI,GAAsBzE,UAApC,SAA8C,GAAMgE,EAAgBvjB,WAAUL,QAAQ,GADzF,IAC8F4jB,EAAgBzmB,QAE9G,iGAGF,iGAOP8mB,GAAsBJ,GACvB,qBAAKvmB,UAAW,gCAAhB,oFAKC2mB,IAAuBJ,GACxB,sBAAKvmB,UAAW,gCAAhB,2BACiBsmB,EAAgBzmB,KADjC,uKCtKHsoB,EAzJS,SAAC,GAAsJ,IAApJrX,EAAmJ,EAAnJA,WAAYnQ,EAAuI,EAAvIA,gBAAiBkQ,EAAsH,EAAtHA,SAAU1Q,EAA4G,EAA5GA,QAAS8b,EAAmG,EAAnGA,UAAWvb,EAAwF,EAAxFA,WAAYJ,EAA4E,EAA5EA,UAAW0b,EAAiE,EAAjEA,gBAAiBoM,EAAgD,EAAhDA,cAAe5B,EAAiC,EAAjCA,2BAE3I,EAAsEpgB,mBAAS,IAA/E,mBAAOgd,EAAP,KAAoClH,EAApC,KACA,EAA8C9V,mBAAS,MAAvD,mBAAOkgB,EAAP,KAAwB+B,EAAxB,KACA,EAA4CjiB,oBAAS,GAArD,mBAAOmgB,EAAP,KAAuB+B,EAAvB,KAEA,EAAwDliB,oBAAS,GAAjE,mBAAOmiB,EAAP,KAA6BzM,EAA7B,KACA,EAAwB1V,mBAAS,GAAjC,mBAAOoiB,EAAP,KAAazM,EAAb,KACA,EAAwC3V,mBAAS,IAAjD,mBAAOqiB,EAAP,KAAqBrM,EAArB,KACA,EAA0BhW,mBAAS,MAAnC,mBAAO8a,EAAP,KAAcmC,EAAd,KAEA,EAA0Djd,oBAAS,GAAnE,mBAAOsiB,EAAP,KAA8BC,EAA9B,KAEA,EAAgCviB,mBAAS,MAAzC,mBAAOkd,GAAP,KAAiBnH,GAAjB,KAIM7K,GAAiBT,EAAS1P,MAAK,SAAAmB,GAAC,OAAIA,EAAEtD,KAAO2B,KA6DnD,OA1DAiD,qBAAU,WACK,IAAT4kB,IACFnF,EAAS,MACTnH,EAA+B,IAC/BmM,EAAmB,MACnBC,GAAkB,GAClBnM,GAAY,MACZqK,EAA2B,SAE5B,CAACrmB,EAASQ,EAAiB6nB,EAAMhC,IAEpC5iB,qBAAU,WACJ2kB,IACFzM,GAAwB,GAGxBuM,EAAmBjF,EAA4BjiB,MAAK,SAAAkd,GAAC,OAAIA,EAAEhE,WAC3DiO,IAAoBlF,EAA4BjiB,MAAK,SAAAkd,GAAC,OAAKA,EAAEhE,cAE9D,CAACkO,EAAsBjX,GAAgB8R,EAA6BjjB,EAASQ,IAEhFiD,qBAAU,WACR,IAAIglB,EAAYJ,EAEZA,EAAO,IAAMlC,IACfsC,GAAa,GAGfR,EAAc,CACZ7F,MAAOkG,EAAatmB,KAAI,SAAA0mB,GAAC,MAAK,CAAEhpB,KAAMgpB,MACtCD,gBAED,CAACtC,EAAiB8B,EAAeI,EAAMC,IAE1C7kB,qBAAU,WACR,IAAMklB,EAAoB,WACxBH,GAAyB,GACzB3M,EAAgB,CACb,cAAC,IAAD,CACCpc,KAAM,cAAC,IAAD,IACNI,UAAW,wBACXL,QAAS,kBAAMgpB,GAAyB,IAHzC,iBAIK,KAEL,cAAC,IAAD,CACC/oB,KAAM,cAAC,IAAD,IACNI,UAAW,yBACXL,QAAS,kBAAMsc,KAHhB,kBAIK,QAKNuM,EAAO,GACThC,GAA2B,kBAAMsC,OAElC,CAACN,EAAMhC,EAA4BxK,EAAiBC,EAAWyM,IAGhE,gCAEIxH,GAAS,qBAAKlhB,UAAW,aAAhB,SAA+BkhB,IAE1C,sBAAKliB,GAAG,mBAAR,UAEI0pB,GACA,qBAAK1oB,UAAU,mCAAf,6GAKS,IAATwoB,GAAc,cAAC,EAAD,CACZnM,OAAQqM,EACR9M,cAAetK,GAAeoB,OAAOhL,QACrCmU,gBAAiBlb,EACjBR,QAASA,EACTgb,kBAAmBA,EACnBW,wBAAyBA,EACzBC,QAASA,EACTzb,UAAWA,EACXI,WAAYA,EACZsb,gBAAiBA,EACjBC,UAAWA,EACXoH,SAAUA,EACVnH,+BAAgCA,EAChCE,gBAAiBA,EACjBD,YAAaA,KAGP,IAATqM,GAAclC,GACb,cAAC,EAAD,CACEjK,OAAQqM,EACRhW,OAAQpB,GAAeoB,OACvBmJ,gBAAiBlb,EACjBR,QAASA,EACT2Q,WAAYA,EACZqS,YAAa7R,GAAe6R,YAC5BE,SAAUA,EACViD,gBAAiBA,EACjBrK,UAAWA,EACXF,QAASA,EACTrb,WAAYA,EACZ6lB,eAAgBA,EAChBvK,gBAAiBA,EACjBE,+BAAgCA,EAChCkH,4BAA6BA,EAC7BoD,2BAA4BA,EAC5BlD,SAAUA,KAGJ,IAATkF,GACC,cAAC,EAAD,CACEnM,OAAQqM,EACRhW,OAAQpB,GAAeoB,OACvBmJ,gBAAiBlb,EACjBR,QAASA,EACT2Q,WAAYA,EACZqK,kBAAmBA,EACnBgI,YAAa7R,GAAe6R,YAC5BE,SAAUA,EACVD,4BAA6BA,EAC7BnH,UAAWA,EACXF,QAASA,EACTC,gBAAiBA,EACjBsH,SAAUA,GACV5iB,WAAYA,WCnHTqoB,EA/Bc,SAAC,GAAuF,IAArFjY,EAAoF,EAApFA,WAAYnQ,EAAwE,EAAxEA,gBAAiBJ,EAAuD,EAAvDA,gBAAiBsQ,EAAsC,EAAtCA,SAAUnQ,EAA4B,EAA5BA,WAAYJ,EAAgB,EAAhBA,UAClG,EAAkD6F,cAA1C8V,EAAR,EAAQA,UAAWuK,EAAnB,EAAmBA,2BAEnB,EAAwCpgB,mBAAS,MAAjD,mBAAO4iB,EAAP,KAAqBhN,EAArB,KACA,EAAoC5V,mBAAS,CAAEmc,MAAO,GAAIqG,UAAW,IAArE,mBAAOK,EAAP,KAAmBb,EAAnB,KASA,OACE,cAAC,IAAD,CAAOppB,GAAG,wBAAwBH,MAP1B,gCACN,kDACA,cAAC,IAAD,CAAS0jB,MAAO0G,EAAW1G,MAAO2G,YAAaD,EAAWL,UAAWO,UAAU,OAKvBlB,QAASe,EAAnE,SACE,cAAC,EAAD,CACElY,WAAYA,EACZnQ,gBAAiBA,EACjBR,QAASI,EACTsQ,SAAUA,EACVoL,UAAWA,EACXvb,WAAYA,EACZJ,UAAWA,EACX0b,gBAAiBA,EACjBoM,cAAeA,EACf5B,2BAA4BA,OC4DrB5S,IArFe,SAAC,GAA0I,IAAD,EASlKyQ,EAT2BvT,EAAuI,EAAvIA,WAAYnQ,EAA2H,EAA3HA,gBAAiBkQ,EAA0G,EAA1GA,SAAUtQ,EAAgG,EAAhGA,gBAAiBG,EAA+E,EAA/EA,WAAYJ,EAAmE,EAAnEA,UAAmE,IAAxDuT,iBAAwD,aAArCuV,kBAAqC,SAAjBrY,EAAiB,EAAjBA,WAErJ,EAA8C3K,oBAAS,GAAvD,mBAAOijB,EAAP,KAAwBC,EAAxB,KACA,EAAwDljB,oBAAS,GAAjE,mBAAOmjB,EAAP,KAA6BC,EAA7B,KACQtjB,EAAcC,cAAdD,UACR,EAAsE6K,EAAW,CAACpT,IAAK,gBAAiBgS,aAAa,KAArH,mBAAO8Z,EAAP,KAAoCC,EAApC,KAGMpY,EAAiBT,EAAS1P,MAAK,SAAAmB,GAAC,OAAIA,EAAEtD,KAAO2B,KAEnD,IACE0jB,EAAS0B,YAAU,CACjBrT,OAAQpB,EAAeoB,OACvByQ,YAAa7R,EAAe6R,YAC5Bjc,QAAS3G,EAAgB2G,UAE3B,MAAOwT,IAIT,IAAMiP,EAAwB1mB,uBAAY,WACxCumB,GAAwB,GACxBE,GAA+B,SAACnL,GAE9B,OADAA,EAAI5d,EAAkBJ,EAAgBvB,KAAM,EACrCuf,OAER,CAAC5d,EAAiBJ,EAAiBmpB,IAGtC9lB,qBAAU,WACR,IAAIgmB,GAAY,EAEhBN,GAAmB,GAgBnB,OAf0B,SAAC,GAA8C,IAA5CjQ,EAA2C,EAA3CA,UAAWwC,EAAgC,EAAhCA,gBAChCvK,EADgE,EAAfT,SACvB1P,MAAK,SAAAmB,GAAC,OAAIA,EAAEtD,KAAO6c,KAC9CvK,EAAeoB,QAEpB0G,EAAuB,CAAEC,UAAWA,EAAWtT,QAASuL,EAAeoB,OAAOhL,UAAWkS,MAAK,SAAA5P,GAC5F,IAAI4f,EAAJ,CACA,IAAMC,EAAiB7f,EAAO3I,QAAO,SAAAiB,GAAC,OAAIA,EAAEiD,WAAa,QACzD+jB,IAAqBO,EAAepsB,YACnCgd,OAAM,SAAAC,GACPyF,QAAQe,MAAMxG,MAIlBoP,CAAkB,CAAEjO,gBAAiBlb,EAAiB0Y,UAAW9Y,EAAgBvB,GAAI6R,aAE9E,kBAAM+Y,GAAY,KACxB,CAACjpB,EAAiBJ,EAAiBsQ,IAGtCjN,qBAAU,WACR4lB,EAAwB3V,KAAe4V,EAA4B9oB,EAAkBJ,EAAgBvB,OACpG,CAAC6U,EAAWlT,EAAiBJ,EAAiBkpB,IAKjD,OADyB,QAAN,EAAApF,SAAA,eAAQtF,WAAYzN,EAAe6R,aADvB,CAAC,SAAU,SAAU,WACwC9a,SAASiJ,EAAe6R,YAAYtI,MAI7HwO,IAAoBE,GACrB,sBAAKvpB,UAAW,mBAAhB,UACE,sBAAKA,UAAU,2BAAf,UACE,qMACA,sBAAMA,UAAW,QAAUopB,EAAa,eAAiB,IAAKzpB,QAAS,WACrEuG,EAAU,cAAC,EAAD,CACR4K,WAAYA,EACZvQ,gBAAiBA,EACjBI,gBAAiBA,EACjBkQ,SAAUA,EACVnQ,WAAYA,EACZJ,UAAWA,MAPf,mDAYAuT,GACA,qBAAK7T,UAAW,yBAAhB,SAA0C,cAAC,IAAD,CAASL,QAAS,kBAAMgqB,YApB/C","file":"static/js/16.b26fcac8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Balances_wrapper__2sLCW\",\"greenHighlight\":\"Balances_greenHighlight__maVl4\",\"purpleHighlight\":\"Balances_purpleHighlight__2rG4V\",\"otherBalances\":\"Balances_otherBalances__ZYIVD\",\"bottomOverflow\":\"Balances_bottomOverflow__38VnT\",\"icon\":\"Balances_icon__pRVmv\",\"iconSvg\":\"Balances_iconSvg__Zo2dB\",\"noOtherBalancesWrapper\":\"Balances_noOtherBalancesWrapper__3fQU7\",\"noOtherBalances\":\"Balances_noOtherBalances__2jmij\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"purpleHighlight\":\"BalanceItem_purpleHighlight__2YZFz\",\"balanceContainer\":\"BalanceItem_balanceContainer__2UsxP\",\"network\":\"BalanceItem_network__1bu1c\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Protocols_wrapper__1XkX0\",\"category\":\"Protocols_category__k1Yy-\",\"title\":\"Protocols_title__1RwU2\",\"sortHolder\":\"Protocols_sortHolder__3N77T\",\"sortButtons\":\"Protocols_sortButtons__3Qzo5\",\"wrapperBtns\":\"Protocols_wrapperBtns__Hrh_j\",\"list\":\"Protocols_list__35znc\",\"token\":\"Protocols_token__Ks0gq\",\"body\":\"Protocols_body__3ixEH\",\"dragHandle\":\"Protocols_dragHandle__2nYh4\",\"separator\":\"Protocols_separator__pgQE6\",\"icon\":\"Protocols_icon__2_cVe\",\"name\":\"Protocols_name__35KBt\",\"balance\":\"Protocols_balance__C3VRc\",\"currency\":\"Protocols_currency__3e0ke\",\"symbol\":\"Protocols_symbol__NfT-R\",\"dollar\":\"Protocols_dollar__2i6RV\",\"actions\":\"Protocols_actions__WBh39\",\"value\":\"Protocols_value__12pQf\",\"sendButton\":\"Protocols_sendButton__3q5Bt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ProtocolsPlaceholder_wrapper__1sEGA\",\"placeholderOverlay\":\"ProtocolsPlaceholder_placeholderOverlay__3IANd\",\"category\":\"ProtocolsPlaceholder_category__3JU3r\",\"title\":\"ProtocolsPlaceholder_title__32h5t\",\"sortHolder\":\"ProtocolsPlaceholder_sortHolder__3QmfW\",\"sortButtons\":\"ProtocolsPlaceholder_sortButtons__3mKDr\",\"wrapperBtns\":\"ProtocolsPlaceholder_wrapperBtns__MObeB\",\"list\":\"ProtocolsPlaceholder_list__34PAv\",\"token\":\"ProtocolsPlaceholder_token__xDihk\",\"dragHandle\":\"ProtocolsPlaceholder_dragHandle__2TE4r\",\"separator\":\"ProtocolsPlaceholder_separator__2gfeR\",\"icon\":\"ProtocolsPlaceholder_icon__2VHj8\",\"name\":\"ProtocolsPlaceholder_name___ZgC3\",\"balance\":\"ProtocolsPlaceholder_balance__-Uf3b\",\"currency\":\"ProtocolsPlaceholder_currency__2xY1s\",\"symbol\":\"ProtocolsPlaceholder_symbol__3Eu8-\",\"dollar\":\"ProtocolsPlaceholder_dollar__2VAeU\",\"actions\":\"ProtocolsPlaceholder_actions__21EEX\",\"addToken\":\"ProtocolsPlaceholder_addToken__1hEAl\",\"value\":\"ProtocolsPlaceholder_value__2vgPT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Collectibles_wrapper__2JlNE\",\"greenHighlight\":\"Collectibles_greenHighlight__2NuzE\",\"purpleHighlight\":\"Collectibles_purpleHighlight__1rNwl\",\"paginationControls\":\"Collectibles_paginationControls__20eCX\",\"paginationCurrent\":\"Collectibles_paginationCurrent__jMbgR\",\"collectiblesWrapper\":\"Collectibles_collectiblesWrapper__27igk\",\"collectible\":\"Collectibles_collectible__1hyJR\",\"artwork\":\"Collectibles_artwork__2kJ5N\",\"info\":\"Collectibles_info__oEi21\",\"collection\":\"Collectibles_collection__3TGG0\",\"collectionIcon\":\"Collectibles_collectionIcon__30Dr7\",\"collectionName\":\"Collectibles_collectionName__2Q2JV\",\"details\":\"Collectibles_details__28ZTT\",\"name\":\"Collectibles_name__3pXhh\",\"value\":\"Collectibles_value__2fX1e\",\"collectibles\":\"Collectibles_collectibles__2fnQ_\",\"panelHeading\":\"Collectibles_panelHeading__RwKAo\",\"title\":\"Collectibles_title__2tnJQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"CollectiblesPlaceholder_wrapper__1Buhm\",\"paginationControls\":\"CollectiblesPlaceholder_paginationControls__261Pt\",\"paginationCurrent\":\"CollectiblesPlaceholder_paginationCurrent__3PLO1\",\"collectiblesWrapper\":\"CollectiblesPlaceholder_collectiblesWrapper__37MM5\",\"collectible\":\"CollectiblesPlaceholder_collectible__2KT0P\",\"artwork\":\"CollectiblesPlaceholder_artwork__2-02K\",\"info\":\"CollectiblesPlaceholder_info__2KmoR\",\"collection\":\"CollectiblesPlaceholder_collection__sRc1D\",\"collectionIcon\":\"CollectiblesPlaceholder_collectionIcon__bRdo-\",\"collectionName\":\"CollectiblesPlaceholder_collectionName__2TsuG\",\"details\":\"CollectiblesPlaceholder_details__3XMQs\",\"name\":\"CollectiblesPlaceholder_name__30lD6\",\"value\":\"CollectiblesPlaceholder_value__3YfwE\",\"collectibles\":\"CollectiblesPlaceholder_collectibles__1BxGd\",\"panelHeading\":\"CollectiblesPlaceholder_panelHeading__2P9S_\",\"title\":\"CollectiblesPlaceholder_title__wP_EJ\",\"placeholderText\":\"CollectiblesPlaceholder_placeholderText__2AV4T\",\"placeholderOverlay\":\"CollectiblesPlaceholder_placeholderOverlay__wJEP-\",\"collectiblesPlaceholder\":\"CollectiblesPlaceholder_collectiblesPlaceholder__2m7_x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notice\":\"Promotions_notice__2HNSv\",\"minimized\":\"Promotions_minimized__3uLsV\",\"close-btn\":\"Promotions_close-btn__2TV9R\",\"title\":\"Promotions_title__34cvl\",\"link\":\"Promotions_link__3yDFa\",\"timer\":\"Promotions_timer__3moX1\",\"emoji\":\"Promotions_emoji__9wxOk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"OutdatedBalancesMsg_wrapper__1_-E3\",\"shadow\":\"OutdatedBalancesMsg_shadow__2pNzn\",\"alertWrapper\":\"OutdatedBalancesMsg_alertWrapper__22CpX\",\"alert\":\"OutdatedBalancesMsg_alert__11jj3\",\"body\":\"OutdatedBalancesMsg_body__1bzXa\",\"title\":\"OutdatedBalancesMsg_title__162P7\",\"text\":\"OutdatedBalancesMsg_text__1mwPI\",\"link\":\"OutdatedBalancesMsg_link__5s-45\",\"close\":\"OutdatedBalancesMsg_close__1Shnh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Dashboard_wrapper__9cB3R\",\"panel\":\"Dashboard_panel__3A6_U\",\"panelTitle\":\"Dashboard_panelTitle__1Hprs\",\"topPanels\":\"Dashboard_topPanels__14BCf\",\"overview\":\"Dashboard_overview__2YDvh\",\"footer\":\"Dashboard_footer__27Wc8\",\"missingTokenNotice\":\"Dashboard_missingTokenNotice__1Ortw\",\"powered\":\"Dashboard_powered__3Iria\",\"chart\":\"Dashboard_chart__1lo9p\"};","var _rect, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgGasTank(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Gas_tank_icon\",\n    \"data-name\": \"Gas tank icon\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 32,\n    height: 32,\n    viewBox: \"0 0 32 32\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Boundary\",\n    width: 32,\n    height: 32,\n    transform: \"translate(0 32) rotate(-90)\",\n    fill: \"none\"\n  })), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Group_136\",\n    \"data-name\": \"Group 136\",\n    transform: \"translate(7.838 6.968)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_3\",\n    \"data-name\": \"Path 3\",\n    d: \"M.817,18.064A.817.817,0,0,1,0,17.247v-.524a.817.817,0,0,1,.817-.817H10.849a.817.817,0,0,1,.817.817v.524a.817.817,0,0,1-.817.817Zm.091-3.083V1.135a1.13,1.13,0,0,1,.333-.8A1.13,1.13,0,0,1,2.042,0H9.669a1.133,1.133,0,0,1,1.045.693,1.131,1.131,0,0,1,.089.441c-.023,8.543.052,9.31,0,13.846Zm2.1-11.935V6.269a.546.546,0,0,0,.545.545H8.045a.546.546,0,0,0,.545-.545V3.046A.546.546,0,0,0,8.045,2.5H3.553A.546.546,0,0,0,3.008,3.046Z\",\n    fill: \"#ae60ff\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_167\",\n    \"data-name\": \"Path 167\",\n    d: \"M7.212,10.924h.307a1.7,1.7,0,0,1,1.2.5,1.68,1.68,0,0,1,.5,1.2v1.7A.894.894,0,0,0,11,14.311V10.446h-.966a.4.4,0,0,1-.4-.4V5.994a.406.406,0,0,1,.23-.365l2.486-1.163v-.9l-2.5-1.285a.4.4,0,0,1,.367-.716l2.718,1.4a.4.4,0,0,1,.218.356v6.729a.4.4,0,0,1-.4.4H11.9v3.865a1.776,1.776,0,0,1-.523,1.262,1.789,1.789,0,0,1-2.911-.567,1.8,1.8,0,0,1-.137-.562h0V12.712a.9.9,0,0,0-.894-.894H7.212Z\",\n    transform: \"translate(3.592 -0.744)\",\n    fill: \"#ae60ff\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgGasTank);\nexport default __webpack_public_path__ + \"static/media/gas-tank.00d9abea.svg\";\nexport { ForwardRef as ReactComponent };","import styles from './BalanceItem.module.scss'\n\nconst BalanceItem = ({ onClick, icon, name, value, decimalValue}) => (\n  <div className={styles.balanceContainer} onClick={onClick}>\n        <label className={styles.network}>\n            { icon }\n            <div className={styles.name}>\n              { name }\n            </div>\n        </label>\n        <label>\n            <span className={styles.purpleHighlight}>\n              $\n            </span>\n            { value }\n            .{ decimalValue }\n        </label>\n  </div>\n)\n\nexport default BalanceItem","import styles from './Balances.module.scss'\n\nimport { Loading } from 'components/common'\nimport { useRelayerData } from 'hooks'\nimport { ReactComponent as GasTankIcon } from 'resources/icons/gas-tank.svg'\nimport { useHistory } from 'react-router-dom'\n\nimport networks from 'consts/networks'\nimport BalanceItem from './BalanceItem/BalanceItem'\nimport { useCallback, useEffect, useRef } from 'react'\n\nimport { ReactComponent as AlertCircle } from 'resources/icons/alert-circle.svg'\n\nconst Balances = ({ portfolio, selectedNetwork, setNetwork, hidePrivateValue, relayerURL, selectedAccount, match }) => {\n    const otherBalancesRef = useRef()\n    const history = useHistory()\n    const networkDetails = (network) => networks.find(({ id }) => id === network)\n    const otherBalances = portfolio.otherBalances.filter(({ network, total }) => network !== selectedNetwork.id && total.full > 0)\n    const otherBalancesLoading = Object.entries(portfolio.balancesByNetworksLoading).find(ntw => ntw[0] !== selectedNetwork.id && ntw[1])\n    const urlGetBalance = relayerURL ? `${relayerURL}/gas-tank/${selectedAccount}/getBalance` : null\n    const { data: balancesRes, isLoading } = useRelayerData({ url: urlGetBalance })\n    const gasTankBalances = balancesRes && balancesRes.length && balancesRes.map(({balanceInUSD}) => balanceInUSD).reduce((a, b) => a + b, 0)    \n    const [truncated, decimals] = gasTankBalances ? Number(gasTankBalances.toString()).toFixed(2).split('.')  : [0, 0]\n    const gasTankDetails = {\n        label: 'Gas Tank',\n        total: {\n            full: gasTankBalances ? gasTankBalances : 0.00,\n            decimals,\n            truncated\n        }\n    }\n\n    // Used to add blur at the bottom of balances when scrollbar is visible\n    const handleSetBlur = useCallback(() => {\n        if(!otherBalancesLoading && otherBalances) {\n            const el = otherBalancesRef.current\n            if (!el) return\n\n            const maxScroll = el.scrollHeight - el.clientHeight\n            const isScrollable = el.scrollHeight > el.clientHeight;\n            \n            // GUARD: If element is not scrollable, remove all classes\n            if (!isScrollable || (maxScroll <= el.scrollTop)) {\n                el.classList.remove(styles.bottomOverflow);\n                return;\n            }\n            \n            el.classList.toggle(styles.bottomOverflow, true);\n        } else {\n        }\n    }, [otherBalances, otherBalancesLoading])\n\n    useEffect(() => {\n        handleSetBlur()    \n    }, [otherBalancesLoading, otherBalances, handleSetBlur])\n    \n    return (\n        <div className={styles.wrapper}>\n            { portfolio.isCurrNetworkBalanceLoading && otherBalancesLoading ? <Loading /> : (\n                <div className={styles.otherBalances} ref={otherBalancesRef} onScroll={handleSetBlur}>\n                    { otherBalances.length > 0 ? (\n                        <>\n                            {\n                                otherBalances.filter(({ network }) => networkDetails(network)).map(({ network, total }, i) => (\n                                    <BalanceItem \n                                        onClick={() => setNetwork(network)}\n                                        key={network}\n                                        name={networkDetails(network).name}\n                                        value={hidePrivateValue(total.truncated)}\n                                        decimalValue={hidePrivateValue(total.decimals)}\n                                        icon={\n                                            <div className={styles.icon} style={{backgroundImage: `url(${networkDetails(network).icon})`}}></div>\n                                        }\n                                    />\n                                ))\n                            }\n                            { gasTankDetails && (gasTankDetails.total.full > 0) && !isLoading &&\n                               <BalanceItem \n                                    onClick={() => history.push('/wallet/gas-tank')}\n                                    name={gasTankDetails.label}\n                                    value={hidePrivateValue(gasTankDetails.total.truncated)}\n                                    decimalValue={hidePrivateValue(gasTankDetails.total.decimals)}\n                                    icon={\n                                        <div className={styles.iconSvg}><GasTankIcon /></div>\n                                    }\n                                />\n                            }\n                        </>) : <div className={styles.noOtherBalancesWrapper}>\n                            <div className={styles.noOtherBalances}>\n                                <AlertCircle />\n                                <label>You don't have any tokens on the other networks.</label>\n                            </div>\n                        </div>\n                    }\n                </div>\n            )}\n        </div>\n    )\n}\n\nexport default Balances\n","import { NavLink } from 'react-router-dom'\nimport { Button } from 'components/common'\nimport { MdOutlineAdd } from 'react-icons/md'\nimport { useLocalStorage } from 'hooks'\n\nimport { ReactComponent as DepositIcon } from 'components/Wallet/SideBar/images/deposit.svg'\n\nimport styles from './ProtocolsPlaceholder.module.scss'\n\nconst ProtocolsPlaceholder = ({ onClickAddToken, onClickShowToken }) => {\n    const tokens = [\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0xade00c28244d5ce17d72e40330b1c318cd12b7c3.png',\n            symbol: 'ADX',\n            balance: 170027.26,\n            balanceUSD: 138880.64\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x0000000000000000000000000000000000000000.png',\n            symbol: 'ETH',\n            balance: 61.77,\n            balanceUSD: 283170.08\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x2260fac5e5542a773aa44fbcfedf7c193bc2c599.png',\n            symbol: 'WBTC',\n            balance: 0.03,\n            balanceUSD: 2227.24\n        },\n    ]\n\n    const listHiddenTokens = useLocalStorage({ key: 'hiddenTokens'})\n    let hiddenTokensCount = 0\n    \n    if (listHiddenTokens && listHiddenTokens[0] !== null) {\n        hiddenTokensCount = listHiddenTokens[0].length\n    }\n    \n    return (\n        <div className={styles.wrapper}>\n            <div className={styles.placeholderOverlay}>\n                <label>\n                    Welcome! You don't have any funds on this account.\n                </label>\n                <NavLink to=\"/wallet/deposit\">\n                    <Button small icon={<DepositIcon />}>Deposit</Button>\n                </NavLink>\n                <div className={styles.addToken}>\n                    <label>You have a token that's not displayed?</label>\n                    <Button mini clear icon={<MdOutlineAdd/>} onClick={onClickAddToken}>Click here to add it</Button>\n                    {hiddenTokensCount > 0 && (<label style={{ cursor: 'pointer'}} onClick={onClickShowToken}>There are also {hiddenTokensCount} hidden tokens. Click to configure</label>)}\n                </div>\n            </div>\n            <div className={styles.category}>\n                <div className={styles.title}>Tokens</div>\n                <div className={styles.list}>\n                    {\n                        tokens.map(({ icon, symbol, balance, balanceUSD }) => (\n                            <div className={styles.token} key={symbol}>\n                                <div className={styles.icon}>\n                                    <img src={icon} alt=\"Token Icon\"/>\n                                </div>\n                                <div className={styles.name}>\n                                    { symbol }\n                                </div>\n                                <div className={styles.separator}></div>\n                                <div className={styles.balance}>\n                                    <div className={styles.currency}>\n                                        { balance } <span className={styles.symbol}>{ symbol }</span>\n                                    </div>\n                                    <div className={styles.dollar}>\n                                        <span className={styles.symbol}>$</span> { balanceUSD }\n                                    </div>\n                                </div>\n                            </div>\n                        ))\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ProtocolsPlaceholder","import styles from './Protocols.module.scss'\n\nimport { GiToken } from 'react-icons/gi'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { NavLink } from 'react-router-dom'\nimport { Button, Loading } from 'components/common'\nimport ProtocolsPlaceholder from './ProtocolsPlaceholder/ProtocolsPlaceholder'\nimport { useCallback, useEffect, useState } from 'react'\nimport { MdOutlineAdd, MdVisibilityOff, MdDragIndicator, MdOutlineSort } from 'react-icons/md'\nimport AddTokenModal from 'components/Modals/AddTokenModal/AddTokenModal'\nimport { useModals, useDragAndDrop, useCheckMobileScreen } from 'hooks'\nimport HideTokenModel from 'components/Modals/HideTokenModal/HideTokenModal'\nimport { getTokenIcon } from 'lib/icons'\nimport { formatFloatTokenAmount } from 'lib/formatters'\nimport { ToolTip } from 'components/common'\n\nconst Protocols = ({ portfolio, network, account, hidePrivateValue, userSorting, setUserSorting }) => {\n    const { showModal } = useModals()\n\n    const [failedImg, setFailedImg] = useState([])\n    const [isHideTokenModalOpen, setIsHideTokenModalOpen] = useState(false)\n    const { isCurrNetworkBalanceLoading, isCurrNetworkProtocolsLoading, tokens, protocols } = portfolio\n\n    const sortType = userSorting.tokens?.sortType || 'decreasing'\n\n    const isMobileScreen = useCheckMobileScreen()\n\n    const onDropEnd = (list) => {        \n        setUserSorting(\n            prev => ({\n                ...prev,\n                tokens: {\n                    sortType: 'custom',\n                    items: {\n                        ...prev.tokens?.items,\n                        [`${account}-${network.chainId}`]: list\n                    }\n                }\n            })\n        )\n    }\n\n    const {\n        dragStart,\n        dragEnter,\n        target,\n        handle,\n        dragTarget,\n        drop\n    } = useDragAndDrop(\n        'address',\n        onDropEnd)\n \n    const sortedTokens = tokens.sort((a, b) => {\n        if (sortType === 'custom' && userSorting.tokens?.items?.[`${account}-${network.chainId}`]?.length) {\n            const sorted = userSorting.tokens.items[`${account}-${network.chainId}`].indexOf(a.address) - userSorting.tokens.items[`${account}-${network.chainId}`].indexOf(b.address)\n            return sorted\n        } else {\n            const decreasing = b.balanceUSD - a.balanceUSD\n            if (decreasing === 0) return a.symbol.localeCompare(b.symbol)\n            return decreasing\n        }\n    })\n\n\n    const otherProtocols = protocols.filter(({ label }) => label !== 'Tokens')\n    const shouldShowPlaceholder = (!isCurrNetworkBalanceLoading && !tokens.length) && (!isCurrNetworkProtocolsLoading && !otherProtocols.length)\n\n    const tokenItem = (index, img, symbol, balance, balanceUSD, address, send = false, network, decimals, category, sortedTokensLength) => \n        {\n            const logo = failedImg.includes(img) ? getTokenIcon(network, address) : img\n                \n            return (<div className={styles.token} key={`token-${address}-${index}`}\n             draggable={category === 'tokens' && sortedTokensLength > 1 && sortType === 'custom' && !isMobileScreen}\n             onDragStart={(e) => { \n                if (handle.current === target.current || handle.current.contains(target.current)) dragStart(e, index)\n                else e.preventDefault();\n             }}\n             onMouseDown={(e) => dragTarget(e, index)}\n             onDragEnter={(e) => dragEnter(e, index)}\n             onDragEnd={() => drop(sortedTokens)}\n             onDragOver={(e) => e.preventDefault()}\n            >\n            {sortedTokensLength > 1 && sortType === 'custom' && !isMobileScreen && <MdDragIndicator size={20} className={styles.dragHandle} onClick={(e) => dragStart(e, index)} id={`${index}-handle`} />}\n            <div className={styles.body}>\n                <div className={styles.icon}>\n                    { \n                        failedImg.includes(logo) ?\n                            <GiToken size={20}/>\n                            :\n                            <img src={logo} draggable=\"false\" alt=\"Token Icon\" onError={() => setFailedImg(failed => [...failed, logo])}/>\n                    }\n                </div>\n                <div className={styles.name}>\n                    { symbol }\n                </div>\n                <div className={styles.separator}></div>\n                <div className={styles.balance}>\n                    <div className={styles.currency}>\n                        <span className={styles.value}>{ hidePrivateValue(formatFloatTokenAmount(balance, true, decimals)) }</span>\n                        <span className={styles.symbol}>{ symbol }</span>\n                    </div>\n                    <div className={styles.dollar}>\n                        <span className={styles.symbol}>$</span> { hidePrivateValue(balanceUSD.toFixed(2)) }\n                    </div>\n                </div>\n            </div>\n            {\n                send ? \n                    <div className={styles.actions}>\n                        <NavLink to={`/wallet/transfer/${address}`}>\n                            <Button small icon={<AiOutlineSend/>} className={styles.sendButton}>Send</Button>\n                        </NavLink>\n                    </div>\n                    :\n                    null\n            }\n        </div>)}\n\n    const openAddTokenModal = useCallback(() => showModal(<AddTokenModal network={network} account={account} portfolio={portfolio} />), [account, network, portfolio, showModal])\n    const openHideTokenModal = useCallback(() => setIsHideTokenModalOpen(true), [])\n\n    useEffect(() => {\n        if(isHideTokenModalOpen) {\n            showModal(\n                <HideTokenModel \n                    portfolio={portfolio} \n                    account={account} \n                    userSorting={userSorting}\n                    sortType={sortType}\n                    network={network} \n                    setIsHideTokenModalOpen={setIsHideTokenModalOpen} \n                />\n            )\n        }\n    }, [portfolio, isHideTokenModalOpen, showModal, account, network, sortType, userSorting])\n\n    return (\n        <div className={styles.wrapper}>\n            {\n                shouldShowPlaceholder ?\n                    <ProtocolsPlaceholder onClickAddToken={openAddTokenModal} onClickShowToken={openHideTokenModal}/>\n                    :\n                    null\n            }\n            <>\n                {\n                    isCurrNetworkBalanceLoading ?\n                        <Loading/>\n                        :\n                        !shouldShowPlaceholder && sortedTokens.length ?\n                            <div className={styles.category} key=\"category-tokens\">\n                                <div className={styles.title}>\n                                    <div className={styles.sortHolder}>\n                                        Tokens\n                                        {sortedTokens.length > 1 && !isMobileScreen &&  (\n                                            <div className={styles.sortButtons}>\n                                                <ToolTip label='Sorted tokens by drag and drop'>\n                                                    <MdDragIndicator color={sortType === \"custom\" ? \"#80ffdb\" : \"\"} cursor=\"pointer\" onClick={() => setUserSorting(prev => ({\n                                                        ...prev,\n                                                        tokens: {\n                                                            ...prev.tokens,\n                                                            sortType: 'custom'\n                                                        }\n                                                    }))} />\n                                                </ToolTip>\n                                                <ToolTip label='Sorted tokens by DESC balance'>\n                                                    <MdOutlineSort color={sortType === \"decreasing\" ? \"#80ffdb\" : \"\"} cursor=\"pointer\" onClick={() => setUserSorting(prev => ({\n                                                        ...prev,\n                                                        tokens: {\n                                                            ...prev.tokens,\n                                                            sortType: 'decreasing'\n                                                        }\n                                                    }))} />\n                                                </ToolTip>\n                                            </div>\n                                        )}\n                                    </div>\n                                    <div className={styles.wrapperBtns}>\n                                        <Button mini clear icon={<MdVisibilityOff/>} onClick={() => openHideTokenModal()}>Hide Token</Button>\n                                        <Button mini clear icon={<MdOutlineAdd/>} onClick={() => openAddTokenModal()}>Add Token</Button>\n                                    </div>\n                                </div>\n                                <div className={styles.list}>\n                                    { \n                                        sortedTokens.map(({ address, symbol, tokenImageUrl, balance, balanceUSD, network, decimals }, i) =>\n                                            tokenItem(i, tokenImageUrl, symbol, balance, balanceUSD, address, true, network, decimals, 'tokens', sortedTokens.length))\n                                    }\n                                </div>\n                            </div>\n                        :\n                        null\n                }\n                {\n                    isCurrNetworkProtocolsLoading ?\n                        <Loading/>\n                        :\n                            otherProtocols.map(({ label, assets }, i) => (\n                                <div className=\"category\" key={`category-${i}`}>\n                                    <div className=\"title\">{ label }</div>\n                                    <div className=\"list\">\n                                        {\n                                            assets.map(({ category, symbol, tokenImageUrl, balance, balanceUSD, address }, i) => \n                                                tokenItem(i, tokenImageUrl, symbol, balance, balanceUSD, address, category !== 'claimable', 'protocols'))\n                                        }\n                                    </div>\n                                </div>\n                            ))\n                }\n            </>\n        </div>\n    )\n}\n\nexport default Protocols","import styles from './CollectiblesPlaceholder.module.scss'\n\nconst CollectiblesPlaceholder = ({ isPrivateMode, collectiblesLength }) => {\n    const collectibles = [\n        {\n            collectionName: 'Party Bone',\n            collectionImg: 'https://lh3.googleusercontent.com/ZNc-hDBHOxgioSltBcDvh5hBfWEj623dETJj2nrEC0cLbjuULbo4Ign7OnLDX9qf2XaALrkXsZCRylRqPPHqQgzJOabJg4TRq3MDhA=s2500',\n            name: 'Party Bone #7865',\n            image: 'https://lh3.googleusercontent.com/uznp2aNVNPEhVk4MhLG2Zn-JC2sVaF6PsUcpF_CpyQkgekmv4hh4zbyebsoLFLvkY8PSV6D-TR5OaMp15RhG9zQsYd_AvDCo9SEVF4Q',\n            price: 32.16\n        },\n        {\n            collectionName: 'Pudgy Penguins',\n            collectionImg: 'https://lh3.googleusercontent.com/L9PJp0pOXCscKsTpD1_6zoALxdjG5gIKHLykS_Wk5J_yk590drEqRhM1ElTEZCaWeTjFj2isfxFw2tcFKcbCPlu6-Eu5bUuxsL-x=s2500',\n            name: 'Pudgy Penguin #8675',\n            image: 'https://lh3.googleusercontent.com/J6gQQRnzsMLAOhYiN9qIhogxr2MKn17zfGf6nQFKr3WCZ34thm6H0w9izvnJysxJclsyr8c3yo0hshOaLU73aS-IgTm-CooJb1cw1S0',\n            price: 5675.00\n        },\n        {\n            collectionName: 'Art Blocks Factory',\n            collectionImg: 'https://lh3.googleusercontent.com/sr7Y19-bJwsQsxX6n8Pj5tIaNKdUEotNlfhBsYw8McKpIsYARglTORaNlGhDZ2PrH-tO1vU6tFbpamiWwIImbidhVSh4aoIh4d310Og=s2500',\n            name: 'Transitions #4267',\n            image: 'https://lh3.googleusercontent.com/9MzvH_PSYMvlJE8Cfm5d308ltY5fZx-dooEcQizKgtKZ8g05RvJvd_5LAbqVHIzaoZbM-HOBgNSV8RKvEe_1thkLcQtE4NMMx8Kp5g',\n            price: 263.46\n        },\n        {\n            collectionName: 'Sad Frogs District',\n            collectionImg: 'https://lh3.googleusercontent.com/3U8N73XLrQOQPhJBAMNi7IPR1y3GGJ2zxmyUlit4IHCJURmKFPWClgatjbYfyz9drMk6-XSQTjSFqn7tKL0ZNoRbgvUu8OdLVREA=s2500',\n            name: '1882',\n            image: 'https://lh3.googleusercontent.com/3uwrfkdhHSfWm171BOjJHp3768tbLP9TeyTh2BnvgF6S1nIRI489SFq6EGjI9AISRUeyXXufEjB34Wj0bif_vl-y5h6GesEoJaaZcJg',\n            price: 1563.59\n        },\n        {\n            collectionName: 'GLUEWAVE',\n            collectionImg: 'https://lh3.googleusercontent.com/LheZMF6AyTLPpfwABwAGZqoC0gTWrDlYloDdT2VX2u_GZRZnP-ZpDC90huElm3RXE-eU1d1YluQi8G1uVdeDdysUNLZWJte4jXk3zeY=s2500',\n            name: '000105040307070704',\n            image: 'https://lh3.googleusercontent.com/eP_F_6aa_BXuKfYq1w2aiS6UW3bp4-gByFoeKLMXYuWAkU6Xiyi7mkm31aoewCZ_eG9RAuhas8jxFwXTxAWuxq1E3ZxYg97cLUUE',\n            price: 7107.27\n        }\n    ]\n\n    return (\n        <div className={styles.wrapper}>\n            <div className={styles.placeholderText}>\n                {isPrivateMode && collectiblesLength ? 'You can\\'t see collectibles in private mode' : 'You don\\'t have any collectibles (NFTs) yet' }\n            </div>\n            <div className={styles.placeholderOverlay}></div>\n            <div className={styles.collectibles}>\n                <div className={styles.collectiblesWrapper}>\n                    {\n                        collectibles.map(({ collectionName, collectionImg, name, image, price}) => (\n                            <div className={styles.collectible} key={name}>\n                                <div className={styles.artwork} style={{backgroundImage: `url(${image})`}}/>\n                                <div className={styles.info}>\n                                    <div className={styles.collection}>\n                                        <div className={styles.collectionIcon} style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                        { collectionName }\n                                    </div>\n                                    <div className={styles.details}>\n                                        <div className={styles.name}>{ name }</div>\n                                        <div className={styles.value}><span className=\"purple-highlight\">$</span> { price }</div>\n                                    </div>\n                                </div>\n                            </div>\n                        ))\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default CollectiblesPlaceholder","import styles from './Collectibles.module.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport CollectiblesPlaceholder from './CollectiblesPlaceholder/CollectiblesPlaceholder'\nimport { Loading } from 'components/common'\nimport { useMemo, useState, useEffect } from 'react'\nimport { useHistory, useParams } from 'react-router-dom/cjs/react-router-dom.min'\nimport { Button } from 'components/common'\nimport { HiOutlineChevronLeft, HiOutlineChevronRight } from 'react-icons/hi'\n\nconst Collectibles = ({ portfolio, isPrivateMode }) => {\n    const params = useParams()\n    const history = useHistory()\n    const maxCollectiblesPerPage = 15\n    const maxPages = Math.ceil(portfolio.collectibles.length / maxCollectiblesPerPage)\n    const defaultPage = useMemo(() => Math.min(Math.max(Number(params.page), 1), maxPages) || 1, [params.page, maxPages])\n    const [page, setPage] = useState(defaultPage)\n    const collectiblesList = portfolio.collectibles.slice((page - 1) * maxCollectiblesPerPage, page * maxCollectiblesPerPage)\n\n    const paginationControls = (\n        <div className={styles.paginationControls}>\n          <div className={styles.paginationTitle}>Page</div>\n          <Button clear mini onClick={() => page > 1 && setPage(page => page - 1)}><HiOutlineChevronLeft/></Button>\n          <div className={styles.paginationCurrent}>{ page } <span>/ { maxPages }</span></div>\n          <Button clear mini onClick={() => page < maxPages && setPage(page => page + 1)}><HiOutlineChevronRight/></Button>\n        </div>\n    )\n    \n    useEffect(() => history.replace(`/wallet/dashboard/collectibles/${page}`), [page, history])\n    useEffect(() => setPage(defaultPage), [defaultPage])\n    \n    const handleUri = uri => {\n        if (!uri) return ''\n        uri = uri.startsWith('data:application/json') ? uri.replace('data:application/json;utf8,', '') : uri\n\n        if (uri.split('/')[0] === 'data:image') return uri\n        if (uri.startsWith('ipfs://')) return uri.replace(/ipfs:\\/\\/ipfs\\/|ipfs:\\/\\//g, 'https://ipfs.io/ipfs/')\n        if (uri.split('/')[2].endsWith('mypinata.cloud')) return 'https://ipfs.io/ipfs/' + uri.split('/').slice(4).join('/')\n        \n        return uri\n    }\n\n    if (portfolio.isCurrNetworkProtocolsLoading) return <Loading />;\n\n    if (!portfolio.collectibles.length || isPrivateMode) {\n        return (\n            <CollectiblesPlaceholder\n                isPrivateMode={isPrivateMode}\n                collectiblesLength={portfolio.collectibles.length}\n            />\n        );\n    }\n\n    return (\n        <div className={styles.wrapper}>\n            <div className={styles.collectiblesWrapper}>\n                {\n                    collectiblesList.map(({ network, address, collectionName, collectionImg, assets }) => (assets || []).map(({ tokenId, assetName, assetImg, balanceUSD }) => (\n                        <div className={styles.collectible} key={tokenId}>\n                            <NavLink to={`/wallet/nft/${network}/${address}/${tokenId}`}>\n                                <div className={styles.artwork} style={{backgroundImage: `url(${handleUri(assetImg)})`}}/>\n                                <div className={styles.info}>\n                                    <div className={styles.collection}>\n                                        <div className={styles.collectionIcon} style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                        <span className={styles.collectionName}>{ collectionName }</span>\n                                    </div>\n                                    <div className={styles.details}>\n                                        <div className={styles.name}>{ assetName }</div>\n                                        <div className={styles.value}><span className={styles.purpleHighlight}>$</span> {balanceUSD.toFixed(2) }</div>\n                                    </div>\n                                </div>\n                            </NavLink>\n                        </div>\n                    )))\n                }\n            </div>    \n            {paginationControls}\n        </div>        \n    )\n}\n\nexport default Collectibles","import './FinalCountdown.scss'\nimport { useLayoutEffect, useState } from 'react'\nimport { RiTimerFlashLine } from 'react-icons/ri'\n\nfunction toTwoDigits(num) {\n    if (num < 10) return `0${num}`\n    return `${num}`\n}\n\nfunction getTimeDiff(diff) {\n    if (diff < 0) {\n        return {\n            days: '00',\n            hours: '00',\n            minutes: '00',\n            seconds: '00'\n        }\n    }\n\n    return {\n        days: toTwoDigits(Math.floor(diff / (1000 * 60 * 60 * 24))),\n        hours: toTwoDigits(Math.floor((diff / (1000 * 60 * 60)) % 24)),\n        minutes: toTwoDigits(Math.floor((diff / 1000 / 60) % 60)),\n        seconds: toTwoDigits(Math.floor((diff / 1000) % 60)),\n    }\n}\n\nexport default function Countdown({ endDateTime, label }) {\n\n    const [timeLeft, setTimeLeft] = useState(null)\n\n    useLayoutEffect(() => {\n        if (endDateTime) {\n\n            let interval = setInterval(\n                () => {\n                    const diff = new Date(endDateTime).getTime() - new Date().getTime()\n                    setTimeLeft(getTimeDiff(diff))\n                    if (diff < 0) {\n                        clearInterval(interval)\n                        interval = null\n                    }\n                },\n                1000\n            )\n            return () => {\n                clearInterval(interval)\n                interval = null\n            }\n        } else {\n            setTimeLeft(null)\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [endDateTime])\n\n    if (!timeLeft) return null\n\n    return (\n        <div>\n            {label && <span>{label}</span>}\n            <div className='final-countdown'>\n                <RiTimerFlashLine className='timer-icon' />\n                <div className='unit-box'>\n                    <div className='value'>\n                        {timeLeft.days}\n                    </div>\n                    <div className='unit'>\n                        days\n                    </div>\n                </div>\n                <div className='value'>:</div>\n                <div className='unit-box'>\n                    <div className='value'>\n                        {timeLeft.hours}\n                    </div>\n                    <div className='unit'>\n                        hours\n                    </div>\n                </div>\n                <div className='value'>:</div>\n                <div className='unit-box'>\n                    <div className='value'>\n                        {timeLeft.minutes}\n                    </div>\n                    <div className='unit'>\n                        minutes\n                    </div>\n                </div>\n                <div className='value'>:</div>\n                <div className='unit-box'>\n                    <div className='value'>\n                        {timeLeft.seconds}\n                    </div>\n                    <div className='unit'>\n                        seconds\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}","import styles from './Promotions.module.scss'\nimport { useCallback } from 'react'\nimport FinalCountdown from 'components/common/FinalCountdown/FinalCountdown'\nimport useLocalStorage from \"hooks/useLocalStorage\"\nimport { AiOutlineRight } from 'react-icons/ai'\nimport { MdOutlineMarkEmailUnread } from 'react-icons/md'\n\nfunction Promo({\n    id,\n    period,\n    text,\n    title,\n    resources = {},\n    togglePromo,\n    minimized\n} = {}) {\n\n    if (!text) return null\n\n    const pattern = new RegExp(/\\${{(\\w+)}}/, 'gi')\n    const split = text.split(pattern)\n    const { emojies, color, background, ...linksRes } = resources\n\n    const links = Object.entries(linksRes).reduce((anchors, [key, { label, href } = {}]) => {\n        const anc =\n            <a\n                key={key}\n                className=\"link\"\n                href={href}\n                target=\"_blank\"\n                rel=\"noreferrer noopener\">\n                {label}\n            </a>\n\n        anchors[key] = anc\n        return anchors\n    }, {})\n\n    const elmojies = Object.entries({ ...emojies }).reduce((elmos, [key, { text, size } = {}]) => {\n        const elmo = <span key={key} className={styles.emoji} style={{ fontSize: size }}>\n            {text}\n        </span >\n\n        elmos[key] = elmo\n        return elmos\n    }, {})\n\n    return (\n        <div className={`${styles.notice} ${minimized ? styles.minimized : ''}`} style={{\n            ...(background ? { backgroundColor: background } : {}),\n            ...(color ? { color } : {})\n        }}>\n            {!minimized && <div>\n                {title &&\n                    <div className={styles.title}>\n                        {title}\n                    </div>\n                }\n                <div>\n                    {split.map(x => links[x] || elmojies[x] || x)}\n                </div>\n                {\n                    period?.to && period?.timer &&\n                    <div className={styles.timer}>\n                        <FinalCountdown endDateTime={period.to} />\n                    </div>\n                }\n            </div>\n            }\n            {\n                !!id\n                    ? minimized\n                        ? <MdOutlineMarkEmailUnread className={styles.closeBtn} onClick={() => togglePromo(id)} />\n                        : <div><AiOutlineRight className={styles.closeBtn} onClick={() => togglePromo(id)} /></div>\n                    : null\n\n            }\n        </div>\n    )\n}\n\nexport default function Promotions({ rewardsData: { rewards: { promo }} }) {\n    const [closedPromos, setClosedPromos] = useLocalStorage({ key: 'closedPromos', defaultValue: [] })\n\n    const togglePromo = useCallback(promoId => {\n        const prevClosed = [...closedPromos]\n        const index = prevClosed.indexOf(promoId)\n\n        if (index > -1) {\n            prevClosed.splice(index, 1)\n        } else {\n            prevClosed.push(promoId)\n        }\n\n        setClosedPromos(prevClosed)\n    }, [closedPromos, setClosedPromos])\n\n    if (!promo) return null\n\n    return (\n        <Promo {...promo} togglePromo={togglePromo} minimized={closedPromos.includes(promo.id)} />\n    )\n}","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAlert(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Alert_icon_2\",\n    \"data-name\": \"Alert icon 2\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 34,\n    height: 30.6,\n    viewBox: \"0 0 34 30.6\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_60\",\n    \"data-name\": \"Path 60\",\n    d: \"M14.512,7.194a6.185,6.185,0,0,1,10.612,0l10.91,18.838a5.885,5.885,0,0,1-5.306,8.754H8.909A5.885,5.885,0,0,1,3.6,26.032Z\",\n    transform: \"translate(-2.819 -4.187)\",\n    fill: \"#ffbc00\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_59\",\n    \"data-name\": \"Path 59\",\n    d: \"M-3969.3,23.583a1.7,1.7,0,0,1-1.7-1.689,1.7,1.7,0,0,1,1.7-1.689,1.7,1.7,0,0,1,1.7,1.689A1.7,1.7,0,0,1-3969.3,23.583Zm0-6.758a1.7,1.7,0,0,1-1.7-1.689V6.689A1.7,1.7,0,0,1-3969.3,5a1.7,1.7,0,0,1,1.7,1.689v8.447A1.7,1.7,0,0,1-3969.3,16.825Z\",\n    transform: \"translate(3986.298 3.093)\",\n    fill: \"#fff\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAlert);\nexport default __webpack_public_path__ + \"static/media/alert.3d8c50bf.svg\";\nexport { ForwardRef as ReactComponent };","import styles from './OutdatedBalancesMsg.module.scss'\nimport { ReactComponent as AlertIcon } from 'resources/icons/alert.svg'\n// import { ReactComponent as CloseIcon } from 'resources/icons/close.svg'\n\nconst OutdatedBalancesMsg = ({ selectedAccount, selectedNetwork }) => {\n    return (\n        <div className={styles.wrapper}>\n            <div className={styles.alertWrapper}>\n                <div className={styles.alert}>\n                    <AlertIcon />\n                    <div className={styles.body}>\n                        <h4 className={styles.title}>Dashboard balances could appear incomplete or outdated.</h4>\n                        <p className={styles.text}>\n                            We are currently experiencing technical difficulties with our third party services, \n                            so what you see on the dashboard may be incomplete or outdated. You can check\n                            {' '}\n                            <a\n                                href={selectedNetwork.explorerUrl+'/address/'+ selectedAccount} \n                                target='_blank' \n                                rel='noreferrer'\n                                className={styles.link}\n                            >\n                                {selectedNetwork.explorerUrl.split('/')[2]}\n                            </a>\n                            {' '}\n                            to see your current balances. However, you can use Ambire normally with any connected dApp.\n                        </p>\n                    </div>\n                    {/* <button className={styles.close}>\n                        <CloseIcon />\n                    </button> */}\n                </div>\n            </div>\n            <div className={styles.shadow} />\n        </div>\n    )\n}\n\nexport default OutdatedBalancesMsg","\nimport { useEffect, useLayoutEffect, useState } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\n\nimport { Chart, Loading, Segments, Panel } from 'components/common'\nimport Balances from './Balances/Balances'\nimport Protocols from './Protocols/Protocols'\nimport Collectibles from './Collectibles/Collectibles'\n\nimport Promotions from './Promotions/Promotions'\nimport AssetsMigrationBanner from 'components/Wallet/AssetsMigration/AssetsMigrationBanner'\nimport PendingRecoveryNotice from 'components/Wallet/Security/PendingRecoveryNotice/PendingRecoveryNotice'\nimport usePasswordRecoveryCheck from 'hooks/usePasswordRecoveryCheck'\nimport OutdatedBalancesMsg from './OutdatedBalancesMsg/OutdatedBalancesMsg'\nimport cn from 'classnames'\n\nimport styles from './Dashboard.module.scss'\n\nconst tabSegments = [\n    {\n        value: 'tokens'\n    },\n    {\n        value: 'collectibles'\n    }\n]\n\n\nexport default function Dashboard({ portfolio, selectedNetwork, selectedAccount, setNetwork, privateMode, rewardsData,  userSorting, setUserSorting, accounts, addRequest, relayerURL, useStorage, match, showSendTxns }) {\n    const history = useHistory()\n    const { tabId, page = 1 } = useParams()\n\n    const [chartTokensData, setChartTokensData] = useState([]);\n    const [tab, setTab] = useState(tabId || tabSegments[0].value);\n\n    const currentAccount = accounts.find(a => a.id.toLowerCase() === selectedAccount.toLowerCase())\n\n    const { hasPendingReset, recoveryLock, isPasswordRecoveryCheckLoading } = usePasswordRecoveryCheck(relayerURL, currentAccount, selectedNetwork)\n    const isBalancesCachedCurrentNetwork = portfolio.cachedBalancesByNetworks.length ? \n        portfolio.cachedBalancesByNetworks.find(({network}) => network === selectedNetwork.id) : false\n\n    useEffect(() => {\n        if (!tab || tab === tabSegments[0].value) return history.replace(`/wallet/dashboard`)\n        history.replace(`/wallet/dashboard/${tab}${tab === tabSegments[1].value ? `/${page}` : ''}`)\n    }, [tab, history, page])\n\n    useLayoutEffect(() => {\n        const tokensData = portfolio.tokens\n            .map(({ label, symbol, balanceUSD }) => ({\n                label: label || symbol,\n                value: Number(((balanceUSD / portfolio.balance.total.full) * 100).toFixed(2)),\n                balanceUSD\n            }))\n            .filter(({ value }) => value > 0);\n\n        if (portfolio?.balance?.total?.full && tokensData) {\n                setChartTokensData({\n                    empty: false,\n                    data: tokensData?.sort((a, b) => b.value - a.value)\n                })\n        } else {\n            setChartTokensData({\n                empty: true,\n                data: [{\n                    label: \"You don't have any tokens\",\n                    balanceUSD: 1,\n                    value: 0\n                }]\n            })\n        }\n    }, [portfolio.balance, portfolio.tokens]);\n\n    useEffect(() => portfolio.requestOtherProtocolsRefresh(), [portfolio])\n\n    return (\n        <section className={styles.wrapper}>\n            { isBalancesCachedCurrentNetwork && (\n                <OutdatedBalancesMsg \n                    selectedNetwork={selectedNetwork}\n                    selectedAccount={selectedAccount} \n                />)\n            }\n            <Promotions rewardsData={rewardsData} />\n            {\n              <AssetsMigrationBanner\n                selectedNetwork={selectedNetwork}\n                selectedAccount={selectedAccount}\n                accounts={accounts}\n                addRequest={addRequest}\n                closeable={true}\n                relayerURL={relayerURL}\n                portfolio={portfolio}\n                useStorage={useStorage}\n              />\n            }\n            {\n              (hasPendingReset && !isPasswordRecoveryCheckLoading) && (\n                <PendingRecoveryNotice\n                  recoveryLock={recoveryLock}\n                  showSendTxns={showSendTxns}\n                  selectedAccount={currentAccount}\n                  selectedNetwork={selectedNetwork}\n                />\n              )\n            }\n            <div className={styles.overview}>\n                <Panel \n                    className={cn(styles.chart, styles.panel, styles.topPanels)}\n                >\n                    {\n                        portfolio.isCurrNetworkBalanceLoading ?\n                        <Loading/> :\n                        privateMode.hidePrivateContent(\n                            <Chart \n                                selectedNetwork={selectedNetwork} \n                                data={chartTokensData} \n                                size={200} \n                                className={styles.chart} \n                                hidePrivateValue={privateMode.hidePrivateValue}\n                                portfolio={portfolio}\n                            />\n                        )\n                    }\n                </Panel>\n                <Panel \n                    className={cn(styles.balance, styles.panel, styles.topPanels)} \n                    titleClassName={styles.panelTitle} \n                    title=\"You also have\">\n                    <Balances\n                        portfolio={portfolio}\n                        selectedNetwork={selectedNetwork}\n                        setNetwork={setNetwork}\n                        hidePrivateValue={privateMode.hidePrivateValue}\n                        relayerURL={relayerURL}\n                        selectedAccount={selectedAccount}\n                        match={match}\n                    />\n                </Panel>\n            </div>\n            <Panel title={<>Assets <Segments small defaultValue={tab} segments={tabSegments} onChange={setTab} /></>}>\n                {\n                    tab === tabSegments[0].value ?\n                        <Protocols\n                            portfolio={portfolio}\n                            network={selectedNetwork}\n                            account={selectedAccount}\n                            hidePrivateValue={privateMode.hidePrivateValue}\n                            userSorting={userSorting}\n                            setUserSorting={setUserSorting}\n                        />\n                        :\n                        <Collectibles portfolio={portfolio} isPrivateMode={privateMode.isPrivateMode} />\n                }\n                <div className={styles.footer}>\n                    <span className={styles.missingTokenNotice}>\n                        If you don't see a specific token that you own, please check the <a href={`${selectedNetwork.explorerUrl}/address/${selectedAccount}`} target=\"_blank\" rel=\"noreferrer\">Block Explorer</a>\n                    </span>\n                </div>\n            </Panel>\n        </section>\n    )\n}\n","import { useEffect, useState } from 'react'\nimport { useRelayerData } from 'hooks'\nimport { AbiCoder, keccak256 } from 'ethers/lib/utils'\n\nconst REFRESH_INTVL = 30 * 1000\n\nexport default function usePasswordRecoveryCheck(relayerURL, currentAccount, selectedNetwork) {\n\n  const [cacheBreak, setCacheBreak] = useState(() => Date.now())\n  const [relayerData, setRelayerData] = useState(null)\n\n  // for UX, avoiding banner flickering when refreshing same acc and network\n  const [accountNetworkPair, setAccountNetworkPair] = useState(null)\n  const [isPasswordRecoveryCheckLoading, setIsPasswordRecoveryCheckLoading] = useState(null)\n  const [isRefreshingOnly, setIsRefreshingOnly] = useState(null)\n\n  useEffect(() => {\n    if (Date.now() - cacheBreak > REFRESH_INTVL) setCacheBreak(Date.now())\n    const intvl = setTimeout(() => setCacheBreak(Date.now()), REFRESH_INTVL)\n    return () => clearTimeout(intvl)\n  }, [cacheBreak, currentAccount, selectedNetwork])\n\n  const url = relayerURL\n    ? `${relayerURL}/identity/${currentAccount.id}/${selectedNetwork.id}/privileges?cacheBreak=${cacheBreak}`\n    : null\n\n  const { data, errMsg, isLoading } = useRelayerData({ url })\n\n  useEffect(() => {\n\n    const privileges = data ? data.privileges : {}\n    const recoveryLock = data && data.recoveryLock\n\n    const accHash = signer => {\n      const abiCoder = new AbiCoder()\n      const { timelock, one, two } = signer\n      return keccak256(abiCoder.encode(['tuple(uint, address, address)'], [[timelock, one, two]]))\n    }\n    const hasPendingReset = privileges[currentAccount.signer.quickAccManager] && (\n      (recoveryLock && recoveryLock.status && !isLoading)\n      || (\n        privileges && currentAccount.signer.quickAccManager\n        // is or has been in recovery state\n        && currentAccount.signer.preRecovery\n        // but that's not finalized yet\n        && accHash(currentAccount.signer) !== privileges[currentAccount.signer.quickAccManager]\n      )\n    )\n\n    setRelayerData({\n      hasPendingReset,\n      errMsg,\n      recoveryLock\n    })\n\n    // Avoid flickering when refreshing only...\n    // when data is loaded\n    if (!isLoading) {\n      // if same account and network\n      if (accountNetworkPair === currentAccount?.id + selectedNetwork.id) {\n        // refresh mode only ON\n        setIsRefreshingOnly(true)\n        setIsPasswordRecoveryCheckLoading(false)\n        // else if an account or network change occurred\n      } else {\n        setAccountNetworkPair(currentAccount?.id + selectedNetwork.id)\n        // refresh mode only OFF, until isLoading is again true\n        setIsRefreshingOnly(false)\n      }\n    } else {\n      if (isRefreshingOnly) {\n        setIsPasswordRecoveryCheckLoading(false)\n      } else {\n        setIsPasswordRecoveryCheckLoading(isLoading)\n      }\n    }\n\n  }, [data, errMsg, isLoading, currentAccount, accountNetworkPair, selectedNetwork.id, isRefreshingOnly])\n\n  return {\n    data,\n    isPasswordRecoveryCheckLoading,\n    ...relayerData\n  }\n}\n","var isProduction = process.env.NODE_ENV === 'production';\nfunction warning(condition, message) {\n  if (!isProduction) {\n    if (condition) {\n      return;\n    }\n\n    var text = \"Warning: \" + message;\n\n    if (typeof console !== 'undefined') {\n      console.warn(text);\n    }\n\n    try {\n      throw Error(text);\n    } catch (x) {}\n  }\n}\n\nexport default warning;\n","import React from \"react\";\nimport { Router } from \"react-router\";\nimport { createBrowserHistory as createHistory } from \"history\";\nimport PropTypes from \"prop-types\";\nimport warning from \"tiny-warning\";\n\n/**\n * The public API for a <Router> that uses HTML5 history.\n */\nclass BrowserRouter extends React.Component {\n  history = createHistory(this.props);\n\n  render() {\n    return <Router history={this.history} children={this.props.children} />;\n  }\n}\n\nif (__DEV__) {\n  BrowserRouter.propTypes = {\n    basename: PropTypes.string,\n    children: PropTypes.node,\n    forceRefresh: PropTypes.bool,\n    getUserConfirmation: PropTypes.func,\n    keyLength: PropTypes.number\n  };\n\n  BrowserRouter.prototype.componentDidMount = function() {\n    warning(\n      !this.props.history,\n      \"<BrowserRouter> ignores the history prop. To use a custom history, \" +\n        \"use `import { Router }` instead of `import { BrowserRouter as Router }`.\"\n    );\n  };\n}\n\nexport default BrowserRouter;\n","import React from \"react\";\nimport { Router } from \"react-router\";\nimport { createHashHistory as createHistory } from \"history\";\nimport PropTypes from \"prop-types\";\nimport warning from \"tiny-warning\";\n\n/**\n * The public API for a <Router> that uses window.location.hash.\n */\nclass HashRouter extends React.Component {\n  history = createHistory(this.props);\n\n  render() {\n    return <Router history={this.history} children={this.props.children} />;\n  }\n}\n\nif (__DEV__) {\n  HashRouter.propTypes = {\n    basename: PropTypes.string,\n    children: PropTypes.node,\n    getUserConfirmation: PropTypes.func,\n    hashType: PropTypes.oneOf([\"hashbang\", \"noslash\", \"slash\"])\n  };\n\n  HashRouter.prototype.componentDidMount = function() {\n    warning(\n      !this.props.history,\n      \"<HashRouter> ignores the history prop. To use a custom history, \" +\n        \"use `import { Router }` instead of `import { HashRouter as Router }`.\"\n    );\n  };\n}\n\nexport default HashRouter;\n","import { createLocation } from \"history\";\n\nexport const resolveToLocation = (to, currentLocation) =>\n  typeof to === \"function\" ? to(currentLocation) : to;\n\nexport const normalizeToLocation = (to, currentLocation) => {\n  return typeof to === \"string\"\n    ? createLocation(to, null, null, currentLocation)\n    : to;\n};\n","import React from \"react\";\nimport { __RouterContext as RouterContext } from \"react-router\";\nimport { createPath } from 'history';\nimport PropTypes from \"prop-types\";\nimport invariant from \"tiny-invariant\";\nimport {\n  resolveToLocation,\n  normalizeToLocation\n} from \"./utils/locationUtils.js\";\n\n// React 15 compat\nconst forwardRefShim = C => C;\nlet { forwardRef } = React;\nif (typeof forwardRef === \"undefined\") {\n  forwardRef = forwardRefShim;\n}\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\nconst LinkAnchor = forwardRef(\n  (\n    {\n      innerRef, // TODO: deprecate\n      navigate,\n      onClick,\n      ...rest\n    },\n    forwardedRef\n  ) => {\n    const { target } = rest;\n\n    let props = {\n      ...rest,\n      onClick: event => {\n        try {\n          if (onClick) onClick(event);\n        } catch (ex) {\n          event.preventDefault();\n          throw ex;\n        }\n\n        if (\n          !event.defaultPrevented && // onClick prevented default\n          event.button === 0 && // ignore everything but left clicks\n          (!target || target === \"_self\") && // let browser handle \"target=_blank\" etc.\n          !isModifiedEvent(event) // ignore clicks with modifier keys\n        ) {\n          event.preventDefault();\n          navigate();\n        }\n      }\n    };\n\n    // React 15 compat\n    if (forwardRefShim !== forwardRef) {\n      props.ref = forwardedRef || innerRef;\n    } else {\n      props.ref = innerRef;\n    }\n\n    /* eslint-disable-next-line jsx-a11y/anchor-has-content */\n    return <a {...props} />;\n  }\n);\n\nif (__DEV__) {\n  LinkAnchor.displayName = \"LinkAnchor\";\n}\n\n/**\n * The public API for rendering a history-aware <a>.\n */\nconst Link = forwardRef(\n  (\n    {\n      component = LinkAnchor,\n      replace,\n      to,\n      innerRef, // TODO: deprecate\n      ...rest\n    },\n    forwardedRef\n  ) => {\n    return (\n      <RouterContext.Consumer>\n        {context => {\n          invariant(context, \"You should not use <Link> outside a <Router>\");\n\n          const { history } = context;\n\n          const location = normalizeToLocation(\n            resolveToLocation(to, context.location),\n            context.location\n          );\n\n          const href = location ? history.createHref(location) : \"\";\n          const props = {\n            ...rest,\n            href,\n            navigate() {\n              const location = resolveToLocation(to, context.location);\n              const isDuplicateNavigation = createPath(context.location) === createPath(normalizeToLocation(location));\n              const method = (replace || isDuplicateNavigation) ? history.replace : history.push;\n\n              method(location);\n            }\n          };\n\n          // React 15 compat\n          if (forwardRefShim !== forwardRef) {\n            props.ref = forwardedRef || innerRef;\n          } else {\n            props.innerRef = innerRef;\n          }\n\n          return React.createElement(component, props);\n        }}\n      </RouterContext.Consumer>\n    );\n  }\n);\n\nif (__DEV__) {\n  const toType = PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.object,\n    PropTypes.func\n  ]);\n  const refType = PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.any })\n  ]);\n\n  Link.displayName = \"Link\";\n\n  Link.propTypes = {\n    innerRef: refType,\n    onClick: PropTypes.func,\n    replace: PropTypes.bool,\n    target: PropTypes.string,\n    to: toType.isRequired\n  };\n}\n\nexport default Link;\n","import React from \"react\";\nimport { __RouterContext as RouterContext, matchPath } from \"react-router\";\nimport PropTypes from \"prop-types\";\nimport invariant from \"tiny-invariant\";\nimport Link from \"./Link.js\";\nimport {\n  resolveToLocation,\n  normalizeToLocation\n} from \"./utils/locationUtils.js\";\n\n// React 15 compat\nconst forwardRefShim = C => C;\nlet { forwardRef } = React;\nif (typeof forwardRef === \"undefined\") {\n  forwardRef = forwardRefShim;\n}\n\nfunction joinClassnames(...classnames) {\n  return classnames.filter(i => i).join(\" \");\n}\n\n/**\n * A <Link> wrapper that knows if it's \"active\" or not.\n */\nconst NavLink = forwardRef(\n  (\n    {\n      \"aria-current\": ariaCurrent = \"page\",\n      activeClassName = \"active\", // TODO: deprecate\n      activeStyle, // TODO: deprecate\n      className: classNameProp,\n      exact,\n      isActive: isActiveProp,\n      location: locationProp,\n      sensitive,\n      strict,\n      style: styleProp,\n      to,\n      innerRef, // TODO: deprecate\n      ...rest\n    },\n    forwardedRef\n  ) => {\n    return (\n      <RouterContext.Consumer>\n        {context => {\n          invariant(context, \"You should not use <NavLink> outside a <Router>\");\n\n          const currentLocation = locationProp || context.location;\n          const toLocation = normalizeToLocation(\n            resolveToLocation(to, currentLocation),\n            currentLocation\n          );\n          const { pathname: path } = toLocation;\n          // Regex taken from: https://github.com/pillarjs/path-to-regexp/blob/master/index.js#L202\n          const escapedPath =\n            path && path.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n\n          const match = escapedPath\n            ? matchPath(currentLocation.pathname, {\n                path: escapedPath,\n                exact,\n                sensitive,\n                strict\n              })\n            : null;\n          const isActive = !!(isActiveProp\n            ? isActiveProp(match, currentLocation)\n            : match);\n\n          let className =\n            typeof classNameProp === \"function\"\n              ? classNameProp(isActive)\n              : classNameProp;\n\n          let style =\n            typeof styleProp === \"function\" ? styleProp(isActive) : styleProp;\n\n          if (isActive) {\n            className = joinClassnames(className, activeClassName);\n            style = { ...style, ...activeStyle };\n          }\n\n          const props = {\n            \"aria-current\": (isActive && ariaCurrent) || null,\n            className,\n            style,\n            to: toLocation,\n            ...rest\n          };\n\n          // React 15 compat\n          if (forwardRefShim !== forwardRef) {\n            props.ref = forwardedRef || innerRef;\n          } else {\n            props.innerRef = innerRef;\n          }\n\n          return <Link {...props} />;\n        }}\n      </RouterContext.Consumer>\n    );\n  }\n);\n\nif (__DEV__) {\n  NavLink.displayName = \"NavLink\";\n\n  const ariaCurrentType = PropTypes.oneOf([\n    \"page\",\n    \"step\",\n    \"location\",\n    \"date\",\n    \"time\",\n    \"true\",\n    \"false\"\n  ]);\n\n  NavLink.propTypes = {\n    ...Link.propTypes,\n    \"aria-current\": ariaCurrentType,\n    activeClassName: PropTypes.string,\n    activeStyle: PropTypes.object,\n    className: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n    exact: PropTypes.bool,\n    isActive: PropTypes.func,\n    location: PropTypes.object,\n    sensitive: PropTypes.bool,\n    strict: PropTypes.bool,\n    style: PropTypes.oneOfType([PropTypes.object, PropTypes.func])\n  };\n}\n\nexport default NavLink;\n","import { AiFillWarning } from \"react-icons/ai\"\nimport { FaCheck } from \"react-icons/fa\"\nimport buildRecoveryBundle from 'lib/recoveryBundle'\n\nconst PendingRecoveryNotice = ({ recoveryLock, showSendTxns, selectedAccount, selectedNetwork }) => {\n    const isAlreadyInitiated = recoveryLock && recoveryLock.status !== 'requestedButNotInitiated'\n    const createRecoveryRequest = async () => {\n        if (isAlreadyInitiated) return\n        const bundle = buildRecoveryBundle(\n            selectedAccount.id,\n            selectedNetwork.id,\n            selectedAccount.signer.preRecovery,\n            { signer: selectedAccount.signer, primaryKeyBackup: selectedAccount.primaryKeyBackup }\n        )\n        showSendTxns(bundle, true)\n    }\n    const recoveryLockStatus = recoveryLock ? recoveryLock.status : 'requestedButNotInitiated'\n    const remainingTime = seconds => {\n        if (seconds > 86400) return `${Math.ceil(seconds / 86400)} days`\n        else return `${Math.ceil(seconds/1440)} hours`\n    }\n    const styleClass = isAlreadyInitiated\n        ? (recoveryLockStatus === 'ready' ? 'success' : 'warning')\n        : 'warning action'\n\n    return (\n        <div className={`notification-banner notification-hollow ${styleClass}`} onClick={() => createRecoveryRequest()}>\n            {\n              recoveryLockStatus === 'ready'\n                ? <FaCheck />\n                : <AiFillWarning />\n            }\n\n            {\n                recoveryLockStatus === 'requestedButNotInitiated' ?\n                    <>Password reset requested but not initiated for {selectedNetwork.name}. Click here to initiate it.</> :\n                recoveryLockStatus === 'initiationTxnPending' ?\n                    <>Initiation transaction is currently pending. Once mined, you will need to wait {remainingTime(recoveryLock.timelock)} for the reset to be done on {selectedNetwork.name}.</> :\n                recoveryLockStatus === 'waitingTimelock' ?\n                    <>Password reset on {selectedNetwork.name} is currently pending. {remainingTime(recoveryLock.remaining)} remaining.</> :\n                recoveryLockStatus === 'ready' ?\n                    <>Password reset on {selectedNetwork.name} is now complete! You can start signing transactions with your new password!</> :\n                recoveryLockStatus === 'failed' ?\n                    <>Something went wrong while resetting your password. Please contact support at help.ambire.com</> : null\n            }\n        </div>\n    )\n}\n\nexport default PendingRecoveryNotice\n","export const ZERO_ADDRESS = '0x0000000000000000000000000000000000000000'\n","import { VELCRO_API_ENDPOINT, ZAPPER_API_KEY } from 'config'\nimport { fetchGet } from 'lib/fetch'\nimport {ZERO_ADDRESS} from 'consts/specialAddresses'\nimport networks from 'consts/networks'\n\nexport default function assetMigrationDetector({ networkId, account }) {\n  if (networks.find(({id}) => id === networkId)?.relayerlessOnly) return Promise.resolve([])\n  if (!account) return Promise.resolve([])// for web accounts\n\n  //First pass\n  return fetchGet(`${VELCRO_API_ENDPOINT}/protocols/tokens/balances?addresses[]=${account}&network=${networkId}&api_key=${ZAPPER_API_KEY}&newBalances=true&available_on_coingecko=true`)\n    .then(velcroResponse => {\n\n      const signer_ = account.toLowerCase()\n      if (!velcroResponse[signer_]) return []\n      if (!velcroResponse[signer_].products[0]) return []\n\n      const filteredAssets = velcroResponse[signer_].products[0].assets;\n\n      //Second pass to get real time data\n      const customTokens = filteredAssets.map(a => ({\n        address: a.tokens[0].address,\n        symbol: a.tokens[0].symbol,\n        decimals: a.tokens[0].decimals,\n      }))\n      const urlCustomTokens = `${VELCRO_API_ENDPOINT}/protocols/tokens/balances?addresses[]=${account}&network=${networkId}&api_key=${ZAPPER_API_KEY}&customTokens=${JSON.stringify(customTokens)}&available_on_coingecko=true`\n      return fetchGet(urlCustomTokens)\n        .then(finalResponse => {\n          const filteredAssets = finalResponse[signer_]?.products[0]?.assets\n\n          return filteredAssets.map(a => {\n            return {\n              name: a.tokens[0].symbol,\n              icon: a.tokens[0].tokenImageUrl,\n              address: a.tokens[0].address.toLowerCase(),\n              native: a.tokens[0].address === ZERO_ADDRESS,\n              decimals: a.tokens[0].decimals,\n              availableBalance: a.tokens[0].balanceRaw,\n              balanceUSD: a.tokens[0].balanceUSD,\n              rate: a.tokens[0].balanceUSD / a.tokens[0].balanceRaw\n            }\n          })\n        })\n        .catch(err => {\n          throw Error('Could not get customToken assets from velcro')\n        })\n    })\n    .catch(err => {\n      throw Error('Could not get assets from velcro')\n    })\n}\n","//Permit definitions\nimport { Interface } from 'ethers/lib/utils'\n\nexport const PERMIT_TYPE_2612 = [\n  { name: \"owner\", type: \"address\" },\n  { name: \"spender\", type: \"address\" },\n  { name: \"value\", type: \"uint256\" },\n  { name: \"nonce\", type: \"uint256\" },\n  { name: \"deadline\", type: \"uint256\" },\n]\n\nexport const PERMIT_TYPE_DAI = [\n  { name: \"holder\", type: \"address\" },\n  { name: \"spender\", type: \"address\" },\n  { name: \"nonce\", type: \"uint256\" },\n  { name: \"expiry\", type: \"uint256\" },\n  { name: \"allowed\", type: \"bool\" },\n]\n\nexport const EIP712DomainWithVersion = [\n  { name: \"name\", type: \"string\" },\n  { name: \"version\", type: \"string\" },\n  { name: \"chainId\", type: \"uint256\" },\n  { name: \"verifyingContract\", type: \"address\" },\n];\n\nexport const EIP712DomainWithoutNameNorVersion = [\n  { name: \"chainId\", type: \"uint256\" },\n  { name: \"verifyingContract\", type: \"address\" },\n];\n\nexport const EIP712Domain = [\n  { name: \"name\", type: \"string\" },\n  { name: \"chainId\", type: \"uint256\" },\n  { name: \"verifyingContract\", type: \"address\" },\n];\n\nexport const EIP712DomainWithSalt = [\n  { name: \"name\", type: \"string\" },\n  { name: \"version\", type: \"string\" },\n  { name: \"verifyingContract\", type: \"address\" },\n  { name: \"salt\", type: \"bytes32\" },\n]\n\nexport const PERMITTABLE_COINS = {\n  1: [\n    // Without version 2\n    { address: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48', name: 'USD Coin', version: '2', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612 },\n\n    // Without version\n    { address: '0x1f9840a85d5af5bf1d1762f925bdaddc4201f984', name: 'Uniswap', domainType: EIP712Domain, permitType: PERMIT_TYPE_2612 },\n    { address: '0xde30da39c46104798bb5aa3fe8b9e0e1f348163f', name: 'Gitcoin', domainType: EIP712Domain, permitType: PERMIT_TYPE_2612 },\n\n    // Dai\n    { address: '0x6b175474e89094c44da98b954eedeac495271d0f', name: 'Dai Stablecoin', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_DAI },\n\n    // Spell Token\n    { address: '0x090185f2135308bad17527004364ebcc2d37e5f6', domainType: EIP712DomainWithoutNameNorVersion, permitType: PERMIT_TYPE_2612 },\n    // Magic Internet Money\n    { address: '0x99d8a9c45b2eca8864373a26d1459e3dff1e17f3', domainType: EIP712DomainWithoutNameNorVersion, permitType: PERMIT_TYPE_2612 },\n\n    // With version 1\n    { address: '0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9', name: 'Aave Token', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612 , nonceFunction: \"_nonces\"},\n    { name: 'AdEx Loyalty', address: '0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Aave Token', address: '0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Ambire Wallet Staking Token', address: '0x47cd7e91c3cbaaf266369fe8518345fc4fc12935', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'ConstitutionDAO', address: '0x7a58c0be72be218b41c608b7fe7c5bb630736c71', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Aragon Network Token', address: '0xa117000000f279d81a1d3cc75430faa017fa5a2e', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'AdEx Staking Token', address: '0xb6456b57f03352be48bf101b46c1752a0813491a', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'dYdX', address: '0x92d6c1e31e14520e676a687f0a93788b716beff5', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Ethereum Name Service', address: '0xc18360217d8f7ab5e7c516566761ea12ce7f9d72', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Olympus', address: '0x383518188c0c6d7730d91b2c03a03c837814a899', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: '1INCH Token', address: '0x111111111117dc0aa78b770fa6a738034120c302', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'IceToken', address: '0xf16e81dce15b08f326220742020379b855b87df9', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Fei USD', address: '0x956f47f50a910163d8bf957cf5846d573e7f87ca', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'LUSD Stablecoin', address: '0x5f98805a4e8be255a32880fdec7f6728c6568ba0', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Balancer', address: '0xba100000625a3754423978a60c9317c58a424e3d', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n\n    { name: 'Aave interest bearing AAVE', address: '0xffc97d72e13e01096502cb8eb52dee56f74dad7b', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave AMM Market UniBATWETH', address: '0xa1b0edf4460cc4d8bfaa18ed871bff15e5b57eb4', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave AMM Market UniWBTCWETH', address: '0xc58f53a8adff2fb4eb16ed56635772075e2ee123', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave AMM Market UniUSDCWETH', address: '0x391e86e2c002c70dee155eaceb88f7a3c38f5976', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing WETH', address: '0x030ba81f1c18d280636f32af80b9aad02cf0854e', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing DAI', address: '0x028171bca77440897b824ca71d1c56cac55b68a3', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave AMM Market UniWBTCUSDC', address: '0x2365a4890ed8965e564b7e2d27c38ba67fec4c6f', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave AMM Market UniCRVWETH', address: '0x0ea20e7ffb006d4cfe84df2f72d8c7bd89247db0', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave AMM Market UniUNIWETH', address: '0x3d26dcd840fcc8e4b2193ace8a092e4a65832f9f', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing GUSD', address: '0xd37ee7e4f452c6638c96536e68090de8cbcdb583', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave AMM Market UniMKRWETH', address: '0x370adc71f67f581158dc56f539df5f399128ddf9', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing CRV', address: '0x8dae6cb04688c62d939ed9b68d32bc62e49970b1', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave AMM Market USDT', address: '0x17a79792fe6fe5c95dfe95fe3fcee3caf4fe4cb7', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave AMM Market UniSNXWETH', address: '0x38e491a71291cd43e8de63b7253e482622184894', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing YFI', address: '0x5165d24277cd063f5ac44efd447b27025e888f37', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing SNX', address: '0x35f6b052c598d933d69a4eec4d04c73a191fe6c2', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave AMM Market USDC', address: '0xd24946147829deaa935be2ad85a3291dbf109c80', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave AMM Market DAI', address: '0x79be75ffc64dd58e66787e4eae470c8a1fd08ba4', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing USDT', address: '0x3ed3b47dd13ec9a98b44e6204a523e766b225811', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing RAI', address: '0xc9bc48c72154ef3e5425641a3c747242112a46af', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing BAL', address: '0x272f97b7a56a387ae942350bbc7df5700f8a4576', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing BAT', address: '0x05ec93c0365baaeabf7aeffb0972ea7ecdd39cf1', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing USDC', address: '0xbcca60bb61934080951369a648fb03df4f96263c', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave AMM Market BptBALWETH', address: '0xd109b2a304587569c84308c55465cd9ff0317bfb', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing KNC', address: '0x39c6b3e42d6a679d7d776778fe880bc9487c2eda', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing MANA', address: '0xa685a61171bb30d4072b338c80cb7b2c865c873e', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing XSUSHI', address: '0xf256cc7847e919fac9b808cc216cac87ccf2f47a', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing TUSD', address: '0x101cc05f4a51c0319f570d5e146a8c625198e636', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n    { name: 'Aave interest bearing ENJ', address: '0xac6df26a590f08dcc95d5a4705ae8abbc88509ef', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612, nonceFunction: \"_nonces\"},\n\n  ],\n  137: [\n    //Not working, only to test UX behavior on polygon\n    { name: 'Governance OHM', address: '0xd8ca34fd379d9ca3c6ee3b3905678320f5b45195', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Frax', address: '0x45c32fa6df82ead1e2ef74d17b76547eddfaff89', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Aave Matic Market WBTC', address: '0x5c2ed810328349100a66b82b78a1791b101c9d61', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n\n    { name: 'Aave Matic Market WETH', address: '0x28424507fefb6f7f8e9d3860f56504e4e5f5f390', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Aave Matic Market USDC', address: '0x1a13f4ca1d028320a707d99520abfefca3998b7f', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Aave Matic Market AAVE', address: '0x1d2a0e5ec8e5bbdca5cb219e649b565d8e5c3360', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Synapse', address: '0xf8f9efc0db77d8881500bb06ff5d6abc3070e695', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n\n    { name: 'Aave Matic Market WMATIC', address: '0x8df3aad3a84da6b69a4da8aec3ea40d9091b2ac4', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Aave Matic Market USDT', address: '0x60d55f02a771d515e077c9c2403a1ef324885cec', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Klima DAO', address: '0x4e78011ce80ee02d2c3e649fb657e45898257815', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n\n    { name: 'Quickswap', address: '0xb5c064f955d8e7f38fe0460c556a72987494ee17', domainType: EIP712Domain, permitType: PERMIT_TYPE_2612},\n    { name: 'Route', address: '0x16eccfdbb4ee1a85a33f3a9b21175cd7ae753db4', domainType: EIP712Domain, permitType: PERMIT_TYPE_2612},\n\n    { address: '0x8f3cf7ad23cd3cadbd9735aff958023239c6a063', name: '(PoS) Dai Stablecoin', version: '1', salt: '0x0000000000000000000000000000000000000000000000000000000000000089', domainType: EIP712DomainWithSalt, permitType: PERMIT_TYPE_DAI, nonceFunction: 'getNonce'},\n    { address: '0x2791bca1f2de4661ed88a30c99a7a9449aa84174', name: 'USD Coin (PoS)', version: '1', salt: '0x0000000000000000000000000000000000000000000000000000000000000089', domainType: EIP712DomainWithSalt, permitType: PERMIT_TYPE_2612 },\n  ],\n  56: [\n    { name: '1INCH Token', address: '0x111111111117dc0aa78b770fa6a738034120c302', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Frax', address: '0x90c97f71e18723b0cf0dfa30ee176ab653e89f40', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'JADE', address: '0x7ad7242a99f21aa543f9650a56d141c57e4f6081', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n    { name: 'Templar Token', address: '0x19e6bfc1a6e4b042fb20531244d47e252445df01', version: '1', domainType: EIP712DomainWithVersion, permitType: PERMIT_TYPE_2612},\n\n  ]\n}\n\nexport const ERC20PermittableInterface = new Interface([\n  \"function nonces(address owner) external view returns (uint256)\",\n  \"function _nonces(address owner) external view returns (uint256)\",\n  \"function getNonce(address owner) external view returns (uint256)\",\n\n  \"function name() external view returns (string)\",\n  \"function symbol() external view returns (string)\",\n  \"function decimals() external view returns (uint)\",\n  \"function balanceOf(address) external view returns (uint)\",\n\n  //2612 permit\n  \"function permit(address owner, address spender, uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s)\",\n  //Dai permit\n  \"function permit(address holder, address spender, uint256 nonce, uint256 expiry, bool allowed, uint8 v, bytes32 r, bytes32 s)\",\n  \"function transferFrom(address from, address to, uint256 amount) view returns (bool)\",\n  \"function transfer(address to, uint256 amount) view returns (bool)\",\n  \"function approve(address spender, uint256 amount) returns (bool)\",\n  \"function allowance(address owner, address spender) view returns (uint)\"\n])\n","import './AssetsMigration.scss'\n\nimport BigNumber from 'bignumber.js'\nimport { useCallback, useEffect, useRef, useState } from 'react'\nimport assetMigrationDetector from 'lib/assetMigrationDetector'\nimport { ZERO_ADDRESS } from 'consts/specialAddresses'\nimport AmbireLoading from 'components/common/Loading/AmbireLoading'\nimport { Checkbox, TextInput, Button, Loading } from 'components/common'\nimport { GiToken } from 'react-icons/gi'\nimport { fetchGet } from 'lib/fetch'\nimport { MdClose, MdOutlineNavigateNext, MdOutlineAddCircleOutline, MdCancel } from 'react-icons/md'\nimport { Contract, ethers } from 'ethers'\nimport { ERC20PermittableInterface } from 'consts/permittableCoins'\nimport { getProvider } from 'lib/provider'\nimport { GAS_SPEEDS } from 'ambire-common/src/constants/gasSpeeds'\n\nconst TRANSFER_CONSUMPTION = 52000 // higher avg, 21000 included\n\nconst AssetsMigrationSelector = ({ signerAccount, identityAccount, network, setIsSelectionConfirmed, setStep, portfolio, relayerURL, setModalButtons, hideModal, setSelectedTokensWithAllowance, setGasSpeed, setStepperSteps, hidden }) => {\n\n  const [selectableTokens, setSelectableTokens] = useState([])\n  const [selectableTokensUserInputs, setSelectableTokensUserInputs] = useState([])\n\n  const [nativeToken, setNativeToken] = useState(null)\n\n  const [isLoading, setIsLoading] = useState(true)\n  const [failedImg, setFailedImg] = useState([])\n  const [gasData, setGasData] = useState(null)\n  const [estimatedGasFees, setEstimatedGasFees] = useState(null)\n  const [selectedGasSpeed, setSelectedGasSpeed] = useState('fast')\n  const [tokensAllowances, setTokenAllowances] = useState([])\n\n  const [isAddCustomTokenFormShown, setIsAddCustomTokenFormShown] = useState(false)\n  const [isCustomTokenPending, setIsCustomTokenPending] = useState(false)\n  const [customTokenAddress, setCustomTokenAddress] = useState('')\n  const [customTokenError, setCustomTokenError] = useState('')\n\n  const customTokenInput = useRef()\n  const inputRefs = useRef({})\n\n  // update signerTokens state helper\n  const updateSelectableTokenUserInputs = useCallback((address, callback) => {\n    const index = selectableTokensUserInputs.findIndex(a => a.address === address)\n\n    if (index !== -1) {\n      const updated = callback(selectableTokensUserInputs[index])\n\n      setSelectableTokensUserInputs([\n        ...selectableTokensUserInputs.slice(0, index),\n        updated,\n        ...selectableTokensUserInputs.slice(index + 1),\n      ])\n    }\n  }, [selectableTokensUserInputs])\n\n  // Include/Exclude token in migration\n  const toggleTokenSelection = useCallback((address, minHumanAmount = null) => {\n\n    // focusing input fields on selection\n    const index = selectableTokens\n      .sort((a, b) => a.name < b.name ? -1 : 1)\n      .findIndex(t => t.address === address)\n    inputRefs.current[index]?.focus()\n\n    updateSelectableTokenUserInputs(address, old => {\n      let updated = {\n        ...old,\n        selected: !old.selected\n      }\n      if (minHumanAmount) {\n\n        // let newHumanAmount = humanAmount.replace(/\\.?0+$/g, '')\n        const currentHumanAmount = selectableTokensUserInputs.find(t => t.address === address)?.humanAmount\n        if (minHumanAmount > currentHumanAmount) {\n          const decimals = selectableTokens.find(t => t.address === address)?.decimals\n\n          updated.amount = new BigNumber(minHumanAmount).multipliedBy(10 ** decimals).toFixed(0)\n          updated.humanAmount = minHumanAmount\n        }\n      }\n      return updated\n    })\n  }, [selectableTokens, updateSelectableTokenUserInputs, selectableTokensUserInputs])\n\n  const addCustomToken = useCallback(() => {\n\n    const provider = getProvider(network.id)\n\n    if (!ethers.utils.isAddress(customTokenAddress)) {\n      setCustomTokenError('invalid custom token address')\n      return\n    }\n\n    if (selectableTokens.find(t => t.address.toLowerCase() === customTokenAddress.toLowerCase())) {\n      setCustomTokenAddress('')\n      setIsAddCustomTokenFormShown(false)\n      return\n    }\n\n    const tokenContract = new Contract(customTokenAddress, ERC20PermittableInterface, provider)\n\n    const symbolPromise = tokenContract.symbol().catch(() => setCustomTokenError('Could not get symbol of token ' + customTokenAddress))\n    const decimalsPromise = tokenContract.decimals().catch(() => setCustomTokenError('Could not get decimals of token ' + customTokenAddress))\n    const allowancePromise = tokenContract.allowance(signerAccount, identityAccount).catch(() => setCustomTokenError('Could not get allowance for token ' + customTokenAddress))\n    const availableSignerBalancePromise = tokenContract.balanceOf(signerAccount).catch(() => setCustomTokenError('Could not get balance for token ' + customTokenAddress))\n\n    setIsCustomTokenPending(true)\n    setCustomTokenError(null)\n\n    Promise.all([\n      symbolPromise,\n      decimalsPromise,\n      allowancePromise,\n      availableSignerBalancePromise]\n    ).then((promises) => {\n\n      const [symbol, decimals, allowance, signerBalance] = promises\n\n      setIsCustomTokenPending(false)\n\n      if (symbol && decimals && allowance !== null && signerBalance !== null) {\n        setCustomTokenAddress('')\n        setIsAddCustomTokenFormShown(false)\n\n        setSelectableTokens(old => {\n          return [\n            ...old,\n            {\n              address: customTokenAddress,\n              name: symbol,\n              decimals: decimals.toNumber(),\n              icon: null,\n              rate: 0,\n              native: false,\n              availableBalance: signerBalance.toString(),\n              balanceUSD: 0,\n            }\n          ]\n        })\n\n        setSelectableTokensUserInputs(old => {\n          return [\n            ...old,\n            {\n              address: customTokenAddress,\n              selectedAmount: 0,\n              amount: signerBalance.toString(),\n              humanAmount: new BigNumber(signerBalance.toString()).div(10 ** decimals.toString()).toFixed(),\n              selected: signerBalance.gt(0)\n            }\n          ]\n        })\n\n        setTokenAllowances(old => {\n          return [\n            ...old,\n            {\n              address: customTokenAddress,\n              allowance: 0\n            }\n          ]\n        })\n      }\n    }).catch(err => {\n      console.log('err getting custom token data', err)\n      setIsCustomTokenPending(false)\n    })\n  }, [network, customTokenAddress, signerAccount, identityAccount, setCustomTokenError, selectableTokens])\n\n  const canCoverGasFees = useCallback((speed) => {\n    if (!estimatedGasFees) return false\n    const nativeToSpend = selectableTokensUserInputs.find(t => t.address === ZERO_ADDRESS && t.selected)?.amount || 0\n\n    return new BigNumber(estimatedGasFees.gasFees[speed].signerTransactionsCost)\n      .plus(nativeToSpend)\n      .lte(nativeToken.availableBalance || 0)\n\n  }, [selectableTokensUserInputs, estimatedGasFees, nativeToken])\n\n  const getMaxTransferableNative = useCallback((speed) => {\n    return new BigNumber(nativeToken.availableBalance).minus(estimatedGasFees.gasFees[speed].signerTransactionsCost)\n  }, [estimatedGasFees, nativeToken])\n\n  const consolidatedSelectableTokens = (selectableTokens, selectableTokensUserInputs = [], tokensAllowances = []) => {\n    return selectableTokens.map(st => {\n      return {\n        ...st,\n        ...selectableTokensUserInputs.find(t => t.address === st.address),\n        ...tokensAllowances.find(t => t.address === st.address)\n      }\n    })\n  }\n\n  // select tokens to migrate\n  const confirmTokenSelection = useCallback(async () => {\n\n    const tokensToMigrate = consolidatedSelectableTokens(selectableTokens, selectableTokensUserInputs, tokensAllowances).filter(a => a.selected)\n    if (!tokensToMigrate.length) return\n\n    setSelectedTokensWithAllowance(tokensToMigrate.map(a => {\n      return {\n        ...a,\n      }\n    }))\n\n    setIsSelectionConfirmed(true)\n    if (tokensToMigrate.find(a => a.address === ZERO_ADDRESS)) {\n      setStep(1)\n    } else {\n      setStep(2)\n    }\n\n    setGasSpeed(selectedGasSpeed)\n  }, [selectableTokens, selectableTokensUserInputs, tokensAllowances, setSelectedTokensWithAllowance, setIsSelectionConfirmed, setStep, setGasSpeed, selectedGasSpeed])\n\n  useEffect(() => {\n    if (isAddCustomTokenFormShown) {\n      customTokenInput.current.focus()\n    }\n  }, [isAddCustomTokenFormShown])\n\n  useEffect(() => {\n    setNativeToken(selectableTokens.find(t => t.native))\n  }, [selectableTokens])\n\n  // fetch selectable tokens\n  useEffect(() => {\n\n    setIsLoading(true)\n    setSelectableTokens([])\n\n    assetMigrationDetector({ networkId: network.id, account: signerAccount }).then(assets => {\n      setSelectableTokens(\n        assets.map(t => {\n          return {\n            ...t,\n          }\n        })\n      )\n\n      setSelectableTokensUserInputs(assets.map(t => {\n        return {\n          address: t.address,\n          selectedAmount: 0,\n          amount: t.availableBalance,\n          humanAmount: new BigNumber(t.availableBalance).div(10 ** t.decimals).toFixed(),\n          selected: false\n        }\n      }))\n\n      setIsLoading(false)\n    }).catch(err => {\n      console.error(err)\n    })\n  }, [signerAccount, setIsLoading, setSelectableTokens, network])\n\n  // check Identity gas fees\n  useEffect(() => {\n\n    if (!gasData) return\n\n    const consolidatedTokens = consolidatedSelectableTokens(selectableTokens, selectableTokensUserInputs, tokensAllowances)\n\n    const regularTransfersCount = consolidatedTokens.filter(t => t.selected && !t.native).length\n    const nativeTransfersCount = consolidatedTokens.filter(t => t.selected && t.native).length\n\n    const adjustedApprovalCost = network.id === 'arbitrum' ? 200000 : 0\n\n    const signerTransactionsConsumption = (regularTransfersCount * (25000 + TRANSFER_CONSUMPTION + adjustedApprovalCost)) + (nativeTransfersCount * 25000)\n\n    const nativeRate = gasData.gasFeeAssets.native / 10 ** 18 // should decimals be returned in the API?\n\n    const gasFees = {}\n    GAS_SPEEDS.forEach(speed => {\n      let gasPrice = (gasData.gasPrice[speed] + (gasData.gasPrice.maxPriorityFeePerGas ? gasData.gasPrice.maxPriorityFeePerGas[speed] * 1 : 0))\n\n      const signerTransactionsCost = signerTransactionsConsumption * gasPrice\n      const signerTransactionsCostUSD = signerTransactionsCost * nativeRate\n\n      gasFees[speed] = {\n        speed,\n        signerTransactionsCost,\n        signerTransactionsCostUSD,\n        signerTransactionsConsumption\n      }\n    })\n\n    setEstimatedGasFees({\n      regularTransfersCount,\n      nativeTransfersCount,\n      gasFees,\n    })\n\n  }, [selectableTokens, selectableTokensUserInputs, portfolio, gasData, selectedGasSpeed, tokensAllowances, network])\n\n\n  // getting gasPrice data from relayer\n  useEffect(() => {\n    fetchGet(`${relayerURL}/gasPrice/${network.id}`).then(gasData => {\n      setGasData(gasData.data)\n    }).catch(err => {\n      console.log('fetch error', err)\n    })\n  }, [relayerURL, network])\n\n\n  // getting erc20 token allowances\n  useEffect(() => {\n    const promises = selectableTokens.map(t => {\n      const provider = getProvider(network.id)\n      const tokenContract = new Contract(t.address, ERC20PermittableInterface, provider)\n\n      if (!t.native) {\n        return tokenContract.allowance(signerAccount, identityAccount)\n          .then((allowance) => {\n\n            return {\n              address: t.address,\n              allowance: allowance.toString(),\n            }\n          }).catch(err => {\n            console.log('err getting allowance', err)\n          })\n      }\n      return {\n        address: t.address,\n        allowance: 0,\n      }\n    })\n\n    Promise.all(promises).then(allowanceResults => {\n      setTokenAllowances(allowanceResults)\n    })\n\n  }, [identityAccount, network, selectableTokens, signerAccount])\n\n\n  useEffect(() => {\n    if (hidden) return\n    setModalButtons(\n      <>\n        <Button clear small icon={<MdClose/>} onClick={hideModal}>Close</Button>\n        {\n          (selectableTokensUserInputs.filter(a => a.selected).length > 0 && canCoverGasFees(selectedGasSpeed))\n            ? <Button small icon={<MdOutlineNavigateNext/>} className={'primary'}\n                      onClick={() => confirmTokenSelection()}>Move {selectableTokensUserInputs.filter(a => a.selected).length} assets</Button>\n            : <Button small icon={<MdOutlineNavigateNext/>} className={'primary disabled'}>Move assets</Button>\n        }\n      </>\n    )\n  }, [selectableTokensUserInputs, selectedGasSpeed, setModalButtons, hideModal, confirmTokenSelection, hidden, canCoverGasFees])\n\n  const onAssetAmountChange = useCallback((val, item) => updateSelectableTokenUserInputs(item.address, (old) => {\n    if (val === '') {\n      return {\n        ...old,\n        humanAmount: 0,\n        amount: 0\n      }\n    }\n    if (\n      (val.endsWith('.') && val.split('.').length === 2)\n      || (val.split('.').length === 2 && (val.endsWith('0') && new BigNumber(val).isEqualTo(old.humanAmount)))\n    ) {\n      return {\n        ...old,\n        humanAmount: val,\n      }\n    }\n\n    if (!isNaN(val)) {\n      let newHumanAmount = new BigNumber(val).toFixed(item.decimals)\n      if (new BigNumber(newHumanAmount).multipliedBy(10 ** item.decimals).comparedTo(item.availableBalance) === 1) {\n        newHumanAmount = new BigNumber(item.availableBalance).dividedBy(10 ** item.decimals).toFixed(item.decimals)\n      }\n      // trim trailing . or 0\n      newHumanAmount = newHumanAmount.replace(/\\.?0+$/g, '')\n\n      return {\n        ...old,\n        humanAmount: newHumanAmount,\n        amount: new BigNumber(newHumanAmount).multipliedBy(10 ** item.decimals).toFixed(0)\n      }\n    }\n    return old\n  }), [updateSelectableTokenUserInputs])\n\n  useEffect(() => {\n    setTimeout(() => {\n      inputRefs.current[0]?.focus()\n    }, 250)\n  }, [selectableTokens])\n\n  // Stepper\n  useEffect(() => {\n\n    const steps = ['Selection']\n\n    const native = selectableTokensUserInputs.find(a => a.address.toLowerCase() === ZERO_ADDRESS && a.selected)\n    if (native) {\n      steps.push(`Send ${selectableTokens.find(t => t.address === native.address).name}`)\n    }\n\n    if (selectableTokensUserInputs.find(a => a.address.toLowerCase() !== ZERO_ADDRESS && a.selected)) {\n\n      let tokensTitleActions = []\n      if (selectableTokensUserInputs.find(a => a.selected && a.address.toLowerCase() !== ZERO_ADDRESS)) tokensTitleActions.push('Send')\n\n      steps.push(tokensTitleActions.join(' and ') + ' tokens')\n\n    }\n\n    if (steps.length === 1) {\n      steps.push('Send tokens')\n    }\n\n    setStepperSteps(steps)\n  }, [selectableTokens, selectableTokensUserInputs, setStepperSteps, network])\n\n  if (hidden) return <></>\n\n  return (\n    <div>\n      {\n        isLoading\n          ?\n          <div className={'content-center'}>\n            <h3 className={'mb-6'}>Loading assets...</h3>\n            <AmbireLoading/>\n          </div>\n          :\n          <div>\n            {\n              selectableTokens.length === 0\n                ? <div>No assets to migrate have been found</div>\n                :\n                <div>\n                  <div className={'mb-4'}>Please select the assets you would like to migrate from your signer wallet to\n                    your Ambire wallet\n                  </div>\n                  {\n                    consolidatedSelectableTokens(selectableTokens, selectableTokensUserInputs)\n                      .sort((a, b) => a.name < b.name ? -1 : 1)\n                      .map((item, index) => (\n                        <div className='migration-asset-row' key={index}>\n                          <div className={`migration-asset-select${item.selected ? ' checked' : ''}`}\n                               onClick={() => false}>\n                            <Checkbox\n                              labelClassName='checkbox-label'\n                              id={`check-${item.address}`}\n                              label={<span className={'migration-asset-select-label'}>\n                                  <span className='migration-asset-select-icon'>\n                                    {\n                                      (failedImg.includes(item.icon) || !item.icon) ?\n                                        <GiToken size={18}/>\n                                        :\n                                        <img src={item.icon} draggable='false' alt='Token Icon' onError={(err) => {\n                                          setFailedImg(failed => [...failed, item.icon])\n                                        }}/>\n                                    }\n                                </span>\n                                <span className='migration-asset-select-name'>{item.name}</span>\n                              </span>}\n                              checked={item.selected}\n                              onChange={() => toggleTokenSelection(item.address)}\n                            />\n                          </div>\n                          <div className='migration-asset-usd'>\n                            ${((item.amount) * item.rate).toFixed(2)}\n                          </div>\n                          <div className='migration-asset-amount'>\n                            <TextInput\n                              ref={(element) => inputRefs.current[index] = element}\n                              className={'migrate-amount-input'}\n                              value={item.humanAmount}\n                              onChange={(val) => onAssetAmountChange(val, item)}\n                            />\n                          </div>\n                        </div>\n                      ))\n                  }\n                  <div className={'custom-token-row mt-2'}>\n                    {\n                      isAddCustomTokenFormShown\n                        ? <div>\n                          {\n                            isCustomTokenPending\n                              ? <div className={'custom-token-message-fetching'}>\n                                <Loading/>\n                                Fetching custom token data...\n                              </div>\n                              : <>\n                                {\n                                  customTokenError && <div className={'error'}>{customTokenError}</div>\n                                }\n                                <div>\n                                  <TextInput\n                                    className={'custom-token-input'}\n                                    placeholder={'Enter custom token address'}\n                                    value={customTokenAddress}\n                                    onChange={(val) => {\n                                      setCustomTokenAddress(val)\n                                    }}\n                                    ref={customTokenInput}\n                                  />\n                                </div>\n                                <div className={'flex-row mt-2'}>\n                                  <Button small icon={<MdCancel/>} className={'buttonHollow danger align-right'}\n                                          onClick={() => {\n                                            setIsAddCustomTokenFormShown(false)\n                                            setCustomTokenAddress('')\n                                            setCustomTokenError(null)\n                                          }}>Cancel</Button>\n                                  <Button small icon={<MdOutlineAddCircleOutline/>} className={'primary ms-4'}\n                                          onClick={() => addCustomToken()}>Add</Button>\n                                </div>\n                              </>\n                          }\n                        </div>\n                        : <Button small icon={<MdOutlineAddCircleOutline/>} className={'clear align-right'}\n                                  onClick={() => setIsAddCustomTokenFormShown(true)}\n                        >Add custom token</Button>\n                    }\n                  </div>\n                  {\n                    !canCoverGasFees(selectedGasSpeed) && selectableTokensUserInputs.filter(a => a.selected).length > 0 &&\n                    <div className={'notification-hollow warning mt-3 mb-3'}>\n                      Your Signer Wallet will not have enough fees to pay for the migration.\n                      Please transfer a maximum of <span className={'max-native-suggestion'}\n                                                         onClick={() => onAssetAmountChange(new BigNumber(getMaxTransferableNative(selectedGasSpeed)).dividedBy(10 ** nativeToken.decimals).toFixed(6, BigNumber.ROUND_DOWN), nativeToken)}>\n                        {new BigNumber(getMaxTransferableNative(selectedGasSpeed)).dividedBy(10 ** nativeToken.decimals).toFixed(6, BigNumber.ROUND_DOWN)} {network.nativeAssetSymbol}\n                      </span>\n                    </div>\n                  }\n                  {\n                    estimatedGasFees &&\n                    <div className={'gas-estimation-block mt-4'}>\n                      <div className={'gas-estimation-block-title'}>Estimated gas fee</div>\n                      <ul className={'gas-estimation-selector'}>\n                        {\n                          Object.values(estimatedGasFees.gasFees).map((f, index) => {\n                              return (<li key={index} className={f.speed === selectedGasSpeed ? 'selected' : ''}\n                                          onClick={() => setSelectedGasSpeed(f.speed)}>{f.speed}</li>)\n                            }\n                          )\n                        }\n                      </ul>\n                      <table className={'gas-estimation-details'}>\n                        <tbody>\n                        <tr>\n                          <td>\n                            Signer fee\n                            {\n                              (!!estimatedGasFees.nativeTransfersCount || !!estimatedGasFees.regularTransfersCount) &&\n                              <span className={'migration-actions'}>\n                                  <span>{estimatedGasFees.nativeTransfersCount + estimatedGasFees.regularTransfersCount} transfers</span>\n                              </span>\n                            }\n                          </td>\n                          <td\n                            className={'gas-estimation-details-amount'}>${estimatedGasFees.gasFees[selectedGasSpeed].signerTransactionsCostUSD.toFixed(2)}</td>\n                        </tr>\n                        </tbody>\n                      </table>\n                    </div>\n                  }\n                </div>\n            }\n          </div>\n      }\n    </div>\n  )\n}\n\nexport default AssetsMigrationSelector\n","import './AssetsMigration.scss'\nimport { ethers } from 'ethers'\nimport { useCallback, useEffect, useState } from 'react'\nimport { getWallet } from 'lib/getWallet'\nimport { FaCheck, FaHourglass } from 'react-icons/fa'\nimport Button from 'components/common/Button/Button'\n\nimport { GiToken } from 'react-icons/gi'\nimport { MdOutlineNavigateBefore, MdOutlineNavigateNext } from 'react-icons/md'\nimport { ZERO_ADDRESS } from 'consts/specialAddresses'\nimport { fetchGet } from 'lib/fetch'\nimport BigNumber from 'bignumber.js'\nimport { ERC20PermittableInterface } from 'consts/permittableCoins'\n\nconst AssetsMigrationPermitter = ({\n                                    addRequest,\n                                    identityAccount,\n                                    signer,\n                                    signerExtra,\n                                    network,\n                                    selectedTokensWithAllowance,\n                                    setError,\n                                    hideModal,\n                                    setStep,\n                                    setModalButtons,\n                                    relayerURL,\n                                    gasSpeed,\n                                    hidden,\n                                  }) => {\n\n  //storing user sign/send or rejection\n  const [tokensPermissions, setTokensPermissions] = useState([])\n\n  //storing transfer status for non permittable tokens\n  const [tokensTransfers, setTokensTransfers] = useState({})\n\n  //to be able to have UI feedback without trigerring useEffects\n  const [tokensPendingStatus, setTokensPendingStatus] = useState({})\n  //error display logic if a user has rejected one or more MM popup\n  const [hasRefusedOnce, setHasRefusedOnce] = useState(false)\n  const [lastRefusalError, setLastRefusalError] = useState(null)\n  const [failedImg, setFailedImg] = useState([])\n\n  const [hasCorrectAccountAndChainId, setHasCorrectAccountAndChainId] = useState(null)\n\n  const [currentGasPrice, setCurrentGasPrice] = useState(null)\n\n  const [wallet, setWallet] = useState(null)\n\n  //using a callback would return not up to date data + would trigger useEffect prompt loop while we do not want that\n  const getConsolidatedTokensPure = (selected, tokensPermissions = [], tokensTransfers = [], tokensPendingStatus = []) => {\n    return selected.filter(t => t.address !== ZERO_ADDRESS).map(t => {\n      let remapped = {\n        ...t,\n        signing: null,\n        signature: null,\n        sent: false,\n        pending: false,\n        allowance: 0,\n      }\n      if (tokensPermissions[t.address]) {\n        remapped.signing = tokensPermissions[t.address].signing\n        remapped.signature = tokensPermissions[t.address].signature\n      }\n\n      if (tokensTransfers[t.address]) {\n        remapped.sent = true\n      }\n\n      if (tokensPendingStatus[t.address]) {\n        remapped.pending = true\n      }\n\n      return remapped\n    })\n  }\n\n  const checkWalletConnection = useCallback(async () => {\n    return wallet?.isConnected(signer.address, network.chainId)\n      .then(connected => {\n        setHasCorrectAccountAndChainId(connected)\n        if (!connected) {\n          setError(<>Please make sure your signer wallet is unlocked, and connected with <b>{signer.address}</b> to the\n            correct chain: <b>{network.id}</b></>)\n          return false\n        }\n        return true\n      })\n      .catch(e => {\n        setError('Could not check signer connection status: ' + e.error)\n        return false\n      })\n  }, [network, setError, signer, wallet])\n\n  //number of tokens that are ready to migrate (sent / permitted)\n  const readyTokensCount = useCallback(() => {\n    let count = 0\n    getConsolidatedTokensPure(selectedTokensWithAllowance, tokensPermissions, tokensTransfers, []).forEach(t => {\n      if (t.sent) {\n        count++\n      }\n    })\n    return count\n  }, [selectedTokensWithAllowance, tokensPermissions, tokensTransfers])\n\n  //Send MM prompt\n  const sendToken = useCallback(async (address, waitForRcpt = false) => {\n\n    if (!(await checkWalletConnection())) return\n\n    const tokenToMigrate = selectedTokensWithAllowance.find(t => t.address === address)\n    if (!tokenToMigrate) return\n\n    const sendData = ERC20PermittableInterface.encodeFunctionData('transfer', [identityAccount, new BigNumber(tokenToMigrate.amount).toFixed(0)])\n\n    //UI pending status\n    setTokensPendingStatus(old => {\n      old[address] = true\n      return { ...old }\n    })\n\n    setLastRefusalError(null)\n    const transferResult = wallet.sendTransaction({\n      from: signer.address,\n      to: address,\n      data: sendData,\n      gasLimit: 80000,\n      gasPrice: currentGasPrice,\n      chainId: network.chainId,\n    }).then(async rcpt => {\n\n      setTokensPermissions(old => {\n        old[address] = {\n          ...old[address],\n          signing: true,\n        }\n        return { ...old }\n      })\n\n      if (waitForRcpt) {\n        await rcpt.wait()\n        setTokensTransfers(old => {\n          old[address] = true\n          return { ...old }\n        })\n\n        setTokensPendingStatus(old => {\n          old[address] = false\n          return { ...old }\n        })\n\n        setTokensPermissions(old => {\n          old[address] = {\n            ...old[address],\n            signing: false,\n          }\n          return { ...old }\n        })\n      }\n\n      return true\n    }).catch(err => {\n      setTokensPendingStatus(old => {\n        old[address] = false\n        return { ...old }\n      })\n\n      if (err.message.includes('underpriced')) { // not copying the whole JSON error returned by the rpc\n        setLastRefusalError('Transaction fee underpriced')\n      } else {\n        setLastRefusalError(err.message)\n      }\n\n      setHasRefusedOnce(true)\n\n      if (!tokensPermissions[address] || (tokensPermissions[address] && tokensPermissions[address].signing !== false)) {\n        setTokensPermissions(old => {\n          old[address] = {\n            ...old[address],\n            signing: false,\n          }\n          return { ...old }\n        })\n      }\n      return false\n    })\n\n    return !!transferResult\n\n  }, [wallet, identityAccount, tokensPermissions, selectedTokensWithAllowance, currentGasPrice, network, signer, checkWalletConnection])\n\n  //going to assets selection\n  const cancelMigration = useCallback(() => {\n    setError(null)\n    setTokensTransfers([])\n    setTokensPermissions([])\n    setHasRefusedOnce(false)\n    setStep(0)\n  }, [setError, setTokensPermissions, setTokensTransfers, setStep])\n\n  //batch transactions\n  const completeMigration = useCallback(() => {\n    //reset assets migration status\n    cancelMigration()\n    hideModal()\n  }, [cancelMigration, hideModal])\n\n  useEffect(() => {\n    setWallet(getWallet({\n      signer: signer,\n      signerExtra: signerExtra,\n      chainId: network.chainId\n    }))\n  }, [network, signer, signerExtra])\n\n  // check correctness of signer wallet before starting the chained popups\n  useEffect(() => {\n    checkWalletConnection()\n  }, [checkWalletConnection])\n\n  useEffect(() => {\n    const url = `${relayerURL}/gasPrice/${network.id}`\n\n    fetchGet(url).then(gasData => {\n      let gasPrice = gasData.data.gasPrice[gasSpeed]\n      if (gasData.data.gasPrice.maxPriorityFeePerGas) {\n        gasPrice += gasData.data.gasPrice.maxPriorityFeePerGas[gasSpeed]\n      }\n      setCurrentGasPrice(gasPrice)\n    }).catch(err => {\n      setError(err.message + ' ' + url)\n    })\n\n  }, [network, relayerURL, setError, gasSpeed])\n\n  //Automatic permit ask chain\n  useEffect(() => {\n\n    //Skip initial useEffect\n    if (!hasCorrectAccountAndChainId) return\n    if (!Object.values(tokensTransfers).length) return\n    if (!currentGasPrice) return\n\n    const tokensWithPermission = getConsolidatedTokensPure(selectedTokensWithAllowance, tokensPermissions, tokensTransfers, []).map(t => {\n      return {\n        address: t.address,\n        signed: t.signing,\n      }\n    })\n\n    const nextTokenToAsk = tokensWithPermission.find(a => a.signed === null)\n\n    if (nextTokenToAsk) {\n      //avoid MM popup losing focus when immediately running the next action\n      setTimeout(() => {\n        sendToken(nextTokenToAsk.address, true)\n      }, 150)\n    }\n  }, [selectedTokensWithAllowance, sendToken, tokensPermissions, tokensTransfers, hasCorrectAccountAndChainId, currentGasPrice])\n\n  useEffect(() => {\n    if (!selectedTokensWithAllowance.length) return\n    const initialTokensTransfers = {}\n    selectedTokensWithAllowance.forEach(t => {\n      initialTokensTransfers[t.address] = false\n    })\n    setTokensTransfers(initialTokensTransfers)\n  }, [selectedTokensWithAllowance, setTokensTransfers])\n\n  useEffect(() => {\n    if (hasRefusedOnce) {\n      setError('Every asset below needs to be sent to complete the migration' + (lastRefusalError ? ' (' + lastRefusalError + ')' : ''))\n    }\n  }, [hasRefusedOnce, setError, lastRefusalError])\n\n\n  //Clearing UI error if all the tokens are validated\n  useEffect(() => {\n    if (readyTokensCount() === selectedTokensWithAllowance.length) {\n      setError(null)\n    }\n  }, [readyTokensCount, selectedTokensWithAllowance, setError])\n\n  useEffect(() => {\n    if (hidden) return\n    setModalButtons(\n      <>\n        <Button\n          className={'clear'}\n          icon={<MdOutlineNavigateBefore/>}\n          onClick={() => cancelMigration()}\n        >Back</Button>\n        {\n          readyTokensCount() === getConsolidatedTokensPure(selectedTokensWithAllowance).length\n            ?\n            <Button\n              className={'primary'}\n              icon={<MdOutlineNavigateNext/>}\n              onClick={() => hideModal()}\n            >Close</Button>\n            :\n            <Button\n              className={'primary disabled'}\n              icon={<MdOutlineNavigateNext/>}\n            >Complete</Button>\n        }\n      </>\n    )\n  }, [cancelMigration, completeMigration, readyTokensCount, selectedTokensWithAllowance, setModalButtons, hidden, hideModal])\n\n  if (hidden) return <></>\n\n  return (\n    <div>\n      {\n        readyTokensCount() < getConsolidatedTokensPure(selectedTokensWithAllowance).length\n          ? <div\n            className='notification-hollow mb-3 warning'>{`${getConsolidatedTokensPure(selectedTokensWithAllowance).length - readyTokensCount()} actions left to complete the migration`}</div>\n          : <div className='notification-hollow mb-3 success'>\n            Your tokens were migrated. You can close this window\n          </div>\n      }\n      {getConsolidatedTokensPure(selectedTokensWithAllowance, tokensPermissions, tokensTransfers, tokensPendingStatus).map((item, index) => (\n        <div className='migration-asset-row' key={index}>\n          <span className='migration-asset-select-icon migration-asset-select-icon-permit'>\n            {\n              (!item.icon || failedImg.includes(item.icon)) ?\n                <GiToken size={18}/>\n                :\n                <img src={item.icon} draggable='false' alt='Token Icon' onError={(err) => {\n                  setFailedImg(failed => [...failed, item.icon])\n                }}/>\n            }\n          </span>\n          <div className='migration-asset-name'>\n            {item.name}\n          </div>\n          <div className='migration-asset-amount'>\n            {new BigNumber(item.amount).div(10 ** item.decimals).toFixed()} <span\n            className={'migration-asset-amount-usd'}>(${((item.amount) * item.rate).toFixed(2)})</span>\n          </div>\n          <div className='separator'>\n\n          </div>\n          <div>\n            {!((item.allowance && ethers.BigNumber.from(item.allowance).gte(item.amount)) || item.sent)\n              ?\n              <>\n                {(item.pending || item.signing)\n                  ? <div className={'migration-permitted warning'}><FaHourglass/> Sending...</div>\n                  :\n                  <Button className={'button-small secondary'}\n                          onClick={() => sendToken(item.address)}>\n                    Send\n                  </Button>\n                }\n              </>\n              :\n              <div className={'migration-permitted'} onClick={() => sendToken(item.address)}><FaCheck/> Sent\n              </div>\n            }\n          </div>\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport default AssetsMigrationPermitter\n","import './AssetsMigration.scss'\nimport { useCallback, useEffect, useState } from 'react'\nimport { getWallet } from 'lib/getWallet'\nimport { TextInput, Button, Loading } from 'components/common'\n\nimport { GiToken } from 'react-icons/gi'\nimport BigNumber from 'bignumber.js'\nimport { fetchGet } from 'lib/fetch'\nimport { MdOutlineNavigateNext, MdClose, MdOutlineNavigateBefore } from 'react-icons/md'\n\nconst AssetsMigrationNative = ({\n  identityAccount,\n  signer,\n  signerExtra,\n  network,\n  nativeTokenData,\n  setSelectedTokensWithAllowance,\n  selectedTokensWithAllowance,\n  setError,\n  setStep,\n  hasERC20Tokens,\n  hideModal,\n  relayerURL,\n  setModalButtons,\n  setBeforeCloseModalHandler,\n  gasSpeed,\n  hidden,\n}) => {\n\n  const [failedImg, setFailedImg] = useState([])\n  const [hasMigratedNative, setHasMigratedNative] = useState(false)\n  const [isMigrationPending, setIsMigrationPending] = useState(false)\n  const [nativeAmount, setNativeAmount] = useState('0')\n  const [maxRecommendedAmount, setMaxRecommendedAmount] = useState(null)\n  const [transactionEstimationCost, setTransactionEstimationCost] = useState('0')\n  const [nativeHumanAmount, setNativeHumanAmount] = useState('0')\n\n  const [hasModifiedAmount, setHasModifiedAmount] = useState(false)\n\n  const [currentGasPrice, setCurrentGasPrice] = useState(null)\n\n  let wallet\n  try {\n    wallet = getWallet({\n      signer: signer,\n      signerExtra: signerExtra,\n      chainId: network.chainId\n    })\n  } catch (err) {\n    // in case of no window.ethereum was injected from extension\n    setError('No Web3 wallet connected. Please connect a Web3 wallet and reload the page')\n  }\n\n  //going back to assets selection\n  const cancelMigration = useCallback(() => {\n    setStep(0)\n    setSelectedTokensWithAllowance([])\n  }, [setSelectedTokensWithAllowance, setStep])\n\n  const continueMigration = useCallback(() => {\n    setStep(2)\n  }, [setStep])\n\n  const erc20TransfersCount = (selectedTokensWithAllowance) => {\n    return selectedTokensWithAllowance.filter(t => t.selected && !t.permittable && !t.native).length\n  }\n\n  //Pops MM modal to send native to Identity\n  const migrateNative = useCallback(async () => {\n    if (!wallet) return\n    setError(null)\n    setIsMigrationPending(true)\n\n    if (!hasERC20Tokens) {\n      setBeforeCloseModalHandler(null)\n    }\n\n    let hasCorrectChainAndAccount = await wallet.isConnected(signer.address, network.chainId).catch(e => {\n      setError('Could not check signer connection status: ' + e.error)\n    })\n\n    if (hasCorrectChainAndAccount) {\n      wallet.sendTransaction({\n        from: signer.address,\n        to: identityAccount,\n        gasLimit: 25000 + (network.id === 'arbitrum' ? 200000 : 0),\n        gasPrice: currentGasPrice,\n        value: '0x' + new BigNumber(nativeAmount).toString(16),\n        chainId: network.chainId\n      }).then(async rcpt => {\n        await rcpt.wait()\n        setHasMigratedNative(true)\n        setIsMigrationPending(false)\n        return true\n      }).catch(err => {\n        setHasMigratedNative(false)\n        setIsMigrationPending(false)\n\n        if (err && err.message.includes('must provide an Ethereum address')) {\n          setError(`Make sure your wallet is unlocked and connected with ${signer.address}.`)\n        } else {\n          setError('Native asset migration failed: ' + err.message)\n        }\n\n        return false\n      })\n    } else {\n      setError(<>Please make sure your signer wallet is unlocked, and connected with <b>{signer.address}</b> to the correct chain: <b>{network.id}</b></>)\n      setIsMigrationPending(false)\n    }\n  }, [wallet, setError, hasERC20Tokens, network, setBeforeCloseModalHandler, signer, identityAccount, nativeAmount, currentGasPrice])\n\n  const updateAmount = useCallback((amount) => {\n    let newHumanAmount = new BigNumber(amount).dividedBy(10 ** nativeTokenData.decimals).toFixed(nativeTokenData.decimals).replace(/\\.?0+$/g, '')\n\n    setNativeHumanAmount(newHumanAmount)\n    setNativeAmount(amount)\n    setHasModifiedAmount(true)\n  }, [nativeTokenData])\n\n  useEffect(() => {\n    const url = `${relayerURL}/gasPrice/${network.id}`\n\n    fetchGet(url).then(gasData => {\n      let gasPrice = gasData.data.gasPrice[gasSpeed]\n      if (gasData.data.gasPrice.maxPriorityFeePerGas) {\n        gasPrice += gasData.data.gasPrice.maxPriorityFeePerGas[gasSpeed]\n      }\n      const nativeTransactionCost = gasPrice * 25000\n\n      const regularTransfersCount = erc20TransfersCount(selectedTokensWithAllowance)\n      const transfersTransactionCost = regularTransfersCount * gasPrice * (25000 + 52000)\n\n      setTransactionEstimationCost(new BigNumber((nativeTransactionCost + transfersTransactionCost).toFixed(0)).toFixed(0))\n      const recommendedBN = new BigNumber(nativeTokenData.availableBalance).minus((nativeTransactionCost + transfersTransactionCost))\n      setMaxRecommendedAmount(recommendedBN.gte(0) ? recommendedBN.toFixed(0) : 0)\n      setCurrentGasPrice(gasPrice)\n    }).catch(err => {\n      setError(err.message + ' ' + url)\n    })\n\n  }, [setTransactionEstimationCost, setMaxRecommendedAmount, nativeTokenData, network, relayerURL, setError, gasSpeed, selectedTokensWithAllowance])\n\n  const onAmountChange = useCallback((val) => {\n    setHasModifiedAmount(true)\n    if (val === '') {\n      setNativeHumanAmount(0)\n      setNativeAmount(0)\n      return\n    }\n    if (\n      (val.endsWith('.') && val.split('.').length === 2)\n      || (val.split('.').length === 2 && val.endsWith('0'))\n    ) {\n      setNativeHumanAmount(val)\n      return\n    }\n\n    if (!isNaN(val)) {\n      let newHumanAmount = new BigNumber(val).toFixed(nativeTokenData.decimals)\n      if (new BigNumber(newHumanAmount).multipliedBy(10 ** nativeTokenData.decimals).comparedTo(nativeTokenData.availableBalance) === 1) {\n        newHumanAmount = new BigNumber(nativeTokenData.availableBalance).dividedBy(10 ** nativeTokenData.decimals).toFixed(nativeTokenData.decimals)\n      }\n      //trim trailing . or 0\n      newHumanAmount = newHumanAmount.replace(/\\.?0+$/g, '')\n\n      setNativeHumanAmount(newHumanAmount)\n      setNativeAmount(new BigNumber(newHumanAmount).multipliedBy(10 ** nativeTokenData.decimals).toFixed(0))\n    }\n  }, [nativeTokenData])\n\n  useEffect(() => {\n    const initialHumanAmount = new BigNumber(nativeTokenData.amount).dividedBy(10 ** nativeTokenData.decimals).toFixed(nativeTokenData.decimals).replace(/\\.?0+$/g, '')\n    setNativeHumanAmount(initialHumanAmount)\n    setNativeAmount(nativeTokenData.amount)\n  }, [nativeTokenData])\n\n  useEffect(() => {\n    if (hidden) return\n    const getDisplayedButtons = () => {\n      let buttons = []\n      if (hasMigratedNative) {\n        if (hasERC20Tokens) {\n          buttons.push(<Button\n            icon={<MdOutlineNavigateNext/>}\n            className={'primary full'}\n            onClick={() => continueMigration()}\n          >Next</Button>)\n        } else {\n          buttons.push(<Button\n            icon={<MdClose/>}\n            className={'primary full'}\n            onClick={() => hideModal()}\n          >Close</Button>)\n        }\n      } else if (!wallet) { // will have to restart the process anyway as web3.ethereum is not injected (not to confuse with not unlocked)\n        buttons.push(<Button\n          icon={<MdClose/>}\n          className={'clear full'}\n          onClick={() => hideModal()}\n        >Close</Button>)\n      } else {\n        buttons.push(<Button\n          icon={<MdOutlineNavigateBefore/>}\n          className={'clear'}\n          onClick={() => cancelMigration()}\n          key='0'\n        >Back</Button>)\n\n        if (isMigrationPending) {\n          buttons.push(<Button\n            icon={<Loading/>}\n            className={'primary disabled'}\n            key='1'\n          >Moving {nativeTokenData.name}...</Button>)\n        } else {\n          buttons.push(<Button\n            icon={<MdOutlineNavigateNext/>}\n            className={'primary'}\n            onClick={() => migrateNative()}\n            key='1'\n          >Move {nativeTokenData.name}</Button>)\n        }\n      }\n      return buttons\n    }\n\n    setModalButtons(getDisplayedButtons())\n  }, [hasMigratedNative, hasERC20Tokens, setModalButtons, hideModal, isMigrationPending, cancelMigration, migrateNative, continueMigration, wallet, nativeTokenData, hidden])\n\n  if (hidden) return <></>\n\n  return (\n    <div>\n\n      {\n        wallet &&\n        <>\n          <div className={'migration-native-title mb-4'}>\n            <div className='migration-native-asset-icon'>\n              {\n                failedImg.includes(nativeTokenData.icon) ?\n                  <GiToken size={64}/>\n                  :\n                  <img src={nativeTokenData.icon} draggable='false' alt='Token Icon' onError={(err) => {\n                    setFailedImg(failed => [...failed, nativeTokenData.icon])\n                  }}/>\n              }\n            </div>\n            <div className='migration-native-title-asset-name'>Migrate native asset <b>{nativeTokenData.name}</b></div>\n          </div>\n\n          {\n            hasMigratedNative\n              ?\n              <>\n                <div className={'small-asset-notification success'}>Migration of your {nativeTokenData.name} was\n                  successful\n                </div>\n              </>\n              :\n              <>\n                <div className={'migration-native-row'}>\n                  <span className={'migration-native-row-key'}>\n                    Current balance\n                  </span>\n                  <span className={'migration-native-selection'}\n                        onClick={() => updateAmount(nativeTokenData.availableBalance)}>\n                    {new BigNumber(nativeTokenData.availableBalance).dividedBy(10 ** nativeTokenData.decimals).toFixed(6)} {nativeTokenData.name}\n                  </span>\n                </div>\n\n                <div className={'migration-native-row'}>\n                  <span className={'migration-native-row-key'}>Amount to migrate</span>\n                  {\n                    (hasModifiedAmount || (maxRecommendedAmount !== null && nativeAmount > maxRecommendedAmount))\n                      ?\n                      <TextInput\n                        className={'migrate-amount-input'}\n                        value={nativeHumanAmount}\n                        onChange={onAmountChange}\n                      />\n                      :\n                      <div>{nativeHumanAmount}</div>\n                  }\n                </div>\n\n                {\n                  maxRecommendedAmount !== null && new BigNumber(nativeAmount).gt(maxRecommendedAmount) &&\n                  <div className={'notification-hollow warning mt-4'}>\n                    <div>\n                      {\n                        !!erc20TransfersCount(selectedTokensWithAllowance)\n                          ? 'Signer transactions cost'\n                          : 'Current Transaction cost'\n                      }\n                      :\n                      ~{new BigNumber(transactionEstimationCost).dividedBy(10 ** nativeTokenData.decimals).toFixed(6)} {nativeTokenData.name}\n                      <span\n                        className={'migration-native-usd'}> (${new BigNumber(transactionEstimationCost).multipliedBy(nativeTokenData.rate).toFixed(2)})</span>\n                    </div>\n\n                    <div className={'mt-3 mb-3'}>\n                      {\n                        maxRecommendedAmount > 0\n                          ?\n                          <>\n                            <span>You should migrate up to </span>\n                            <span className={'migration-native-selection'} onClick={() => updateAmount(maxRecommendedAmount)}>\n                              {new BigNumber(maxRecommendedAmount).dividedBy(10 ** nativeTokenData.decimals).toFixed(6)} {nativeTokenData.name}\n                            </span>\n                            <span> because will you need funds to pay the transaction costs.</span>\n                          </>\n                          :\n                          <span>You do not have enough funds to pay the transaction fee.</span>\n                      }\n                    </div>\n                  </div>\n                }\n\n                {\n                  (isMigrationPending && hasERC20Tokens) &&\n                  <div className={'notification-hollow info mt-4'}>\n                    Waiting for the transaction to be mined before continuing migration...\n                  </div>\n                }\n                {\n                  (isMigrationPending && !hasERC20Tokens) &&\n                  <div className={'notification-hollow info mt-4'}>\n                    The amount of {nativeTokenData.name} will be updated in your wallet, once the transaction has been\n                    confirmed and mined.\n                    If you confirmed your transaction, you can already close this window\n                  </div>\n                }\n              </>\n          }\n        </>\n      }\n    </div>\n  )\n}\n\nexport default AssetsMigrationNative\n","import './AssetsMigration.scss'\nimport { useEffect, useState } from 'react'\nimport AssetsMigrationSelector from './AssetsMigrationSelector'\nimport AssetsMigrationPermitter from './AssetsMigrationPermitter'\nimport AssetsMigrationNative from './AssetsMigrationNative'\nimport { PERMITTABLE_COINS } from 'consts/permittableCoins'\nimport { MdClose, MdOutlineNavigateBefore } from 'react-icons/md'\nimport { Button } from 'components/common'\n\nconst AssetsMigration = ({ addRequest, selectedAccount, accounts, network, hideModal, relayerURL, portfolio, setModalButtons, setModalSteps, setBeforeCloseModalHandler }) => {\n\n  const [selectedTokensWithAllowance, setSelectedTokensWithAllowance] = useState([])\n  const [nativeTokenData, setNativeTokenData] = useState(null)\n  const [hasERC20Tokens, setHasERC20Tokens] = useState(false)\n\n  const [isSelectionConfirmed, setIsSelectionConfirmed] = useState(false)\n  const [step, setStep] = useState(0)\n  const [stepperSteps, setStepperSteps] = useState([])\n  const [error, setError] = useState(null)\n\n  const [showCloseConfirmation, setShowCloseConfirmation] = useState(false)\n\n  const [gasSpeed, setGasSpeed] = useState(null)\n\n\n  //to get signer\n  const currentAccount = accounts.find(a => a.id === selectedAccount)\n\n  //clear error and reset tokens\n  useEffect(() => {\n    if (step === 0) {\n      setError(null)\n      setSelectedTokensWithAllowance([])\n      setNativeTokenData(null)\n      setHasERC20Tokens(false)\n      setGasSpeed(null)\n      setBeforeCloseModalHandler(null)\n    }\n  }, [network, selectedAccount, step, setBeforeCloseModalHandler])\n\n  useEffect(() => {\n    if (isSelectionConfirmed) {\n      setIsSelectionConfirmed(false)\n\n      //the non permittable, promise wait all\n      setNativeTokenData(selectedTokensWithAllowance.find(t => t.native))\n      setHasERC20Tokens(!!selectedTokensWithAllowance.find(t => !t.native))\n    }\n  }, [isSelectionConfirmed, currentAccount, selectedTokensWithAllowance, network, selectedAccount])\n\n  useEffect(() => {\n    let stepIndex = step\n\n    if (step > 0 && !nativeTokenData) {\n      stepIndex -= 1\n    }\n\n    setModalSteps({\n      steps: stepperSteps.map(s => ({ name: s })),\n      stepIndex\n    })\n  }, [nativeTokenData, setModalSteps, step, stepperSteps])\n\n  useEffect(() => {\n    const beforeCloseHandle = () => {\n      setShowCloseConfirmation(true)\n      setModalButtons([\n        (<Button\n          icon={<MdOutlineNavigateBefore/>}\n          className={'clear buttonComponent'}\n          onClick={() => setShowCloseConfirmation(false)}\n          key='0'\n        >Back</Button>),\n        (<Button\n          icon={<MdClose/>}\n          className={'danger buttonComponent'}\n          onClick={() => hideModal()}\n          key='1'\n        >Close</Button>)\n      ])\n    }\n\n    if (step > 0) {\n      setBeforeCloseModalHandler(() => beforeCloseHandle)\n    }\n  }, [step, setBeforeCloseModalHandler, setModalButtons, hideModal, showCloseConfirmation])\n\n  return (\n    <div>\n      {\n        error && <div className={'mt-3 error'}>{error}</div>\n      }\n      <div id='assets-migration'>\n        {\n          showCloseConfirmation &&\n          <div className='notification-hollow warning mt-4'>\n            By closing this window, your progress will be lost. Are you sure you want to close this window?\n          </div>\n        }\n        {\n          step === 0 && <AssetsMigrationSelector\n            hidden={showCloseConfirmation}\n            signerAccount={currentAccount.signer.address}\n            identityAccount={selectedAccount}\n            network={network}\n            PERMITTABLE_COINS={PERMITTABLE_COINS}\n            setIsSelectionConfirmed={setIsSelectionConfirmed}\n            setStep={setStep}\n            portfolio={portfolio}\n            relayerURL={relayerURL}\n            setModalButtons={setModalButtons}\n            hideModal={hideModal}\n            setError={setError}\n            setSelectedTokensWithAllowance={setSelectedTokensWithAllowance}\n            setStepperSteps={setStepperSteps}\n            setGasSpeed={setGasSpeed}\n          />\n        }\n        {step === 1 && nativeTokenData &&\n          <AssetsMigrationNative\n            hidden={showCloseConfirmation}\n            signer={currentAccount.signer}\n            identityAccount={selectedAccount}\n            network={network}\n            addRequest={addRequest}\n            signerExtra={currentAccount.signerExtra}\n            setError={setError}\n            nativeTokenData={nativeTokenData}\n            hideModal={hideModal}\n            setStep={setStep}\n            relayerURL={relayerURL}\n            hasERC20Tokens={hasERC20Tokens}\n            setModalButtons={setModalButtons}\n            setSelectedTokensWithAllowance={setSelectedTokensWithAllowance}\n            selectedTokensWithAllowance={selectedTokensWithAllowance}\n            setBeforeCloseModalHandler={setBeforeCloseModalHandler}\n            gasSpeed={gasSpeed}\n          />\n        }\n        {step === 2 &&\n          <AssetsMigrationPermitter\n            hidden={showCloseConfirmation}\n            signer={currentAccount.signer}\n            identityAccount={selectedAccount}\n            network={network}\n            addRequest={addRequest}\n            PERMITTABLE_COINS={PERMITTABLE_COINS}\n            signerExtra={currentAccount.signerExtra}\n            setError={setError}\n            selectedTokensWithAllowance={selectedTokensWithAllowance}\n            hideModal={hideModal}\n            setStep={setStep}\n            setModalButtons={setModalButtons}\n            gasSpeed={gasSpeed}\n            relayerURL={relayerURL}\n          />\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default AssetsMigration\n","import './AssetsMigrationModal.scss'\n\nimport { useModals } from 'hooks'\nimport { Modal, Stepper } from 'components/common'\n\nimport AssetsMigration from 'components/Wallet/AssetsMigration/AssetsMigration'\nimport { useState } from 'react'\n\nconst AssetsMigrationModal = ({ addRequest, selectedAccount, selectedNetwork, accounts, relayerURL, portfolio }) => {\n  const { hideModal, setBeforeCloseModalHandler } = useModals()\n\n  const [modalButtons, setModalButtons] = useState(null)\n  const [modalSteps, setModalSteps] = useState({ steps: [], stepIndex: 0})\n\n  const getModalTitle = () => {\n    return (<div>\n      <span>Migrate Assets</span>\n      <Stepper steps={modalSteps.steps} currentStep={modalSteps.stepIndex} noLabels={false}/>\n    </div>)\n  }\n\n  return (\n    <Modal id='asset-migration-modal' title={getModalTitle()} buttons={modalButtons} >\n      <AssetsMigration\n        addRequest={addRequest}\n        selectedAccount={selectedAccount}\n        network={selectedNetwork}\n        accounts={accounts}\n        hideModal={hideModal}\n        relayerURL={relayerURL}\n        portfolio={portfolio}\n        setModalButtons={setModalButtons}\n        setModalSteps={setModalSteps}\n        setBeforeCloseModalHandler={setBeforeCloseModalHandler}\n      />\n    </Modal>\n  )\n}\n\nexport default AssetsMigrationModal\n","import './AssetsMigration.scss'\nimport assetMigrationDetector from 'lib/assetMigrationDetector'\nimport AssetsMigrationModal from 'components/Modals/AssetsMigrationModal/AssetsMigrationModal'\nimport { useCallback, useEffect, useState } from 'react'\nimport { useModals } from 'hooks'\nimport { FaTimes } from 'react-icons/fa'\nimport { getWallet } from 'lib/getWallet'\n\nconst AssetsMigrationBanner = ({ addRequest, selectedAccount, accounts, selectedNetwork, relayerURL, portfolio, closeable = false, linkMargin = false, useStorage }) => {\n\n  const [hasSignerAssets, setHasSignerAssets] = useState(false)\n  const [migrationMessageSeen, setMigrationMessageSeen] = useState(false)\n  const { showModal } = useModals()\n  const [migrationMessageSeenStorage, setMigrationMessageSeenStorage] = useStorage({key: 'migrationSeen', defaultValue:{}})\n\n  // in the meantime that we integrate HW wallets...\n  const currentAccount = accounts.find(a => a.id === selectedAccount)\n  let wallet\n  try {\n    wallet = getWallet({\n      signer: currentAccount.signer,\n      signerExtra: currentAccount.signerExtra,\n      chainId: selectedNetwork.chainId\n    })\n  } catch (err) {\n    // in case of no window.ethereum was injected from extension\n  }\n\n  const closeMigrationMessage = useCallback(() => {\n    setMigrationMessageSeen(true)\n    setMigrationMessageSeenStorage((old) => {\n      old[selectedAccount + selectedNetwork.id] = true\n      return old\n    })\n  }, [selectedAccount, selectedNetwork, setMigrationMessageSeenStorage])\n\n  //fetching relevant assets\n  useEffect(() => {\n    let unmounted = false\n\n    setHasSignerAssets(false)\n    const checkSignerAssets = ({ networkId, identityAccount, accounts }) => {\n      const currentAccount = accounts.find(a => a.id === identityAccount)\n      if (!currentAccount.signer) return\n\n      assetMigrationDetector({ networkId: networkId, account: currentAccount.signer.address }).then(assets => {\n        if (unmounted) return\n        const relevantAssets = assets.filter(a => a.balanceUSD > 0.001)\n        setHasSignerAssets(!!relevantAssets.length)\n      }).catch(err => {\n        console.error(err)\n      })\n    }\n\n    checkSignerAssets({ identityAccount: selectedAccount, networkId: selectedNetwork.id, accounts })\n\n    return () => unmounted = true\n  }, [selectedAccount, selectedNetwork, accounts])\n\n  //checking if closable message has been seen(closed) or not\n  useEffect(() => {\n    setMigrationMessageSeen(closeable && !!migrationMessageSeenStorage[selectedAccount + selectedNetwork.id])\n  }, [closeable, selectedAccount, selectedNetwork, migrationMessageSeenStorage])\n  \n  // We either have a provider (web3) or we use a supported HW wallet\n  const supportedHWWalletTypes = ['ledger', 'trezor', 'Lattice']\n  const shouldShow = wallet?.provider|| (currentAccount.signerExtra && supportedHWWalletTypes.includes(currentAccount.signerExtra.type))\n  if (!shouldShow) return (<></>)\n\n  return (\n    (hasSignerAssets && !migrationMessageSeen) &&\n    <div className={'migration-banner'}>\n      <div className='migration-banner-message'>\n        <div>We detected that your signer account has tokens that can be transferred to your Ambire account. We recommend doing this in order to maximize your $WALLET rewards.</div>\n        <span className={'link' + (linkMargin ? ' link-margin' : '')} onClick={() => {\n          showModal(<AssetsMigrationModal\n            addRequest={addRequest}\n            selectedNetwork={selectedNetwork}\n            selectedAccount={selectedAccount}\n            accounts={accounts}\n            relayerURL={relayerURL}\n            portfolio={portfolio}\n          />)\n        }}>Click here to migrate those tokens</span>\n      </div>\n      {\n        closeable &&\n        <div className={'migration-banner-close'}><FaTimes onClick={() => closeMigrationMessage()}/></div>\n      }\n    </div>\n  )\n}\n\nexport default AssetsMigrationBanner\n"],"sourceRoot":""}