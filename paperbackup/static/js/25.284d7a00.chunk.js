(this["webpackJsonpambire-wallet"]=this["webpackJsonpambire-wallet"]||[]).push([[25],{1566:function(e,a,t){},1569:function(e,a,t){},1637:function(e,a,t){"use strict";t.r(a);t(1566);var n=t(8),s=t(17),c=t(2),r=t.n(c),o=t(11),d=t(7),b=t(55),i=t(21),l=t(3),u=t(44),f=t(1567),A=t(1568),m=t(60),x=t(87),k=t(77),j=t.p+"static/media/aave.58aec338.svg",D=(t(1569),t(152)),p=t(65),C=t(34),v=t(37),O=t(4),F=[{value:"Deposit"},{value:"Withdraw"}],y=function(e){var a=e.loading,t=e.unavailable,n=e.tokensItems,c=e.icon,r=e.details,o=e.customInfo,b=e.onTokenSelect,i=e.onValidate,u=e.moreDetails,f=e.isDepositsDisabled,A=void 0!==f&&f,m=Object(l.useState)(F[0].value),x=Object(d.a)(m,2),j=x[0],y=x[1],E=Object(l.useState)([]),h=Object(d.a)(E,2),w=h[0],T=h[1],B=Object(l.useState)(),g=Object(d.a)(B,2),S=g[0],I=g[1],L=Object(l.useState)(0),R=Object(d.a)(L,2),N=R[0],U=R[1],P=Object(l.useState)(!0),_=Object(d.a)(P,2),W=_[0],M=_[1],V=Object(C.f)().showModal,H=w.find((function(e){return e.value===S})),Y=parseFloat(N)>(H&&"balanceRaw"in H?parseFloat(p.utils.formatUnits(H.balanceRaw,H.decimals)):0),q=W||""===N||parseFloat(N)<=0||Y||j===F[0].value&&A,X=Object(l.useCallback)((function(e){return n.find((function(a){var t=a.address,n=a.type;return t===e.address&&("deposit"===e.type?"withdraw"===n:"deposit"===n)}))}),[n]),K=Object(l.useMemo)((function(){return Object(s.a)(n).sort((function(e,a){var t,n;return(null===a||void 0===a?void 0:a.balance)+(null===(t=X(a))||void 0===t?void 0:t.balance)-((null===e||void 0===e?void 0:e.balance)+(null===(n=X(e))||void 0===n?void 0:n.balance))}))}),[n,X]),G=function(){if(!H)return 0;var e=H.balanceRaw,a=H.decimals;return p.utils.formatUnits(e,a)};Object(l.useEffect)((function(){j===F[0].value&&T(K.filter((function(e){return"deposit"===e.type}))),j===F[1].value&&T(K.filter((function(e){return"withdraw"===e.type})))}),[j,K]),Object(l.useEffect)((function(){return U(0)}),[S,j]),Object(l.useEffect)((function(){b(S),M(!S||!w.length)}),[S,b,w.length]);var J=W?"0":"".concat(G()," ").concat(null===H||void 0===H?void 0:H.symbol),Z=Object(O.jsxs)("div",{className:"amount-label",children:["Available Amount: ",Object(O.jsx)("span",{title:J,children:J})]});return Object(O.jsxs)("div",{className:"card",children:[Object(O.jsx)("div",{className:"title",children:Object(O.jsx)("img",{src:c,alt:"Icon"})}),a?Object(O.jsx)(k.m,{}):t?Object(O.jsx)("div",{className:"unavailable",children:"Unavailable on this Network"}):Object(O.jsxs)("div",{className:"content",children:[Object(O.jsx)(k.t,{searchable:!0,disabled:W,label:"Choose Token",defaultValue:S,items:w,onChange:function(e){var a=e.value;return I(a)}}),W?Object(O.jsxs)("div",{className:"details-placeholder",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]}):r.length>1?Object(O.jsx)("ul",{className:"details",children:r.map((function(e){var a=Object(d.a)(e,2),t=a[0],n=a[1];return Object(O.jsxs)("li",{children:[Object(O.jsx)("b",{children:t})," ",n]},t)}))}):Object(O.jsx)(O.Fragment,{children:r[0]}),Object(O.jsx)(k.s,{small:!0,defaultValue:j,segments:F,onChange:function(e){return y(e)}}),o?Object(O.jsx)("div",{className:"info",children:o}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(k.p,{disabled:!(null===H||void 0===H?void 0:H.balance),value:N,label:Z,onInput:function(e){return U(e)},button:"MAX",onButtonClick:function(){return U(G())}}),Object(O.jsx)("div",{className:"separator"}),Object(O.jsx)(k.e,{disabled:q,icon:j===F[0].value?Object(O.jsx)(D.b,{}):Object(O.jsx)(D.c,{}),onClick:function(){return i(j,S,N,N===G())},children:j})]}),Object(O.jsx)("div",{className:"separator"}),!!u&&Object(O.jsx)(k.e,{clear:!0,icon:Object(O.jsx)(v.M,{}),onClick:function(){u&&V(u)},children:"See more details"})]})]})},E=t(596),h={ethereum:[{address:"0x3Ed3B47Dd13EC9a98b44e6204A523E766B225811",symbol:"aUSDT",baseTokenSymbol:"USDT",baseTokenAddress:"0xdAC17F958D2ee523a2206206994597C13D831ec7"},{address:"0x9ff58f4fFB29fA2266Ab25e75e2A8b3503311656",symbol:"aWBTC",baseTokenSymbol:"WBTC",baseTokenAddress:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599"},{address:"0x030bA81f1c18d280636F32af80b9AAd02Cf0854e",symbol:"aWETH",baseTokenSymbol:"WETH",baseTokenAddress:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"},{address:"0x5165d24277cD063F5ac44Efd447B27025e888f37",symbol:"aYFI",baseTokenSymbol:"YFI",baseTokenAddress:"0x0bc529c00C6401aEF6D220BE8C6Ea1667F6Ad93e"},{address:"0xDf7FF54aAcAcbFf42dfe29DD6144A69b629f8C9e",symbol:"aZRX",baseTokenSymbol:"ZRX",baseTokenAddress:"0xE41d2489571d322189246DaFA5ebDe1F4699F498"},{address:"0xB9D7CB55f463405CDfBe4E90a6D2Df01C2B92BF1",symbol:"aUNI",baseTokenSymbol:"UNI",baseTokenAddress:"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984"},{address:"0xFFC97d72E13E01096502Cb8Eb52dEe56f74DAD7B",symbol:"aAAVE",baseTokenSymbol:"AAVE",baseTokenAddress:"0x7Fc66500c84A76Ad7e9c93437bFc5Ac33E2DDaE9"},{address:"0x05Ec93c0365baAeAbF7AefFb0972ea7ECdD39CF1",symbol:"aBAT",baseTokenSymbol:"BAT",baseTokenAddress:"0x0D8775F648430679A709E98d2b0Cb6250d2887EF"},{address:"0xA361718326c15715591c299427c62086F69923D9",symbol:"aBUSD",baseTokenSymbol:"BUSD",baseTokenAddress:"0x4Fabb145d64652a948d72533023f6E7A623C7C53"},{address:"0x028171bCA77440897B824Ca71D1c56caC55b68A3",symbol:"aDAI",baseTokenSymbol:"DAI",baseTokenAddress:"0x6B175474E89094C44Da98b954EedeAC495271d0F"},{address:"0xaC6Df26a590F08dcC95D5a4705ae8abbc88509Ef",symbol:"aENJ",baseTokenSymbol:"ENJ",baseTokenAddress:"0xF629cBd94d3791C9250152BD8dfBDF380E2a3B9c"},{address:"0x39C6b3e42d6A679d7D776778Fe880BC9487C2EDA",symbol:"aKNC",baseTokenSymbol:"KNC",baseTokenAddress:"0xdd974D5C2e2928deA5F71b9825b8b646686BD200"},{address:"0xa06bC25B5805d5F8d82847D191Cb4Af5A3e873E0",symbol:"aLINK",baseTokenSymbol:"LINK",baseTokenAddress:"0x514910771AF9Ca656af840dff83E8264EcF986CA"},{address:"0xa685a61171bb30d4072B338c80Cb7b2c865c873E",symbol:"aMANA",baseTokenSymbol:"MANA",baseTokenAddress:"0x0F5D2fB29fb7d3CFeE444a200298f468908cC942"},{address:"0xc713e5E149D5D0715DcD1c156a020976e7E56B88",symbol:"aMKR",baseTokenSymbol:"MKR",baseTokenAddress:"0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2"},{address:"0xCC12AbE4ff81c9378D670De1b57F8e0Dd228D77a",symbol:"aREN",baseTokenSymbol:"REN",baseTokenAddress:"0x408e41876cCCDC0F92210600ef50372656052a38"},{address:"0x35f6B052C598d933D69A4EEC4D04c73A191fE6c2",symbol:"aSNX",baseTokenSymbol:"SNX",baseTokenAddress:"0xC011a73ee8576Fb46F5E1c5751cA3B9Fe0af2a6F"},{address:"0x6C5024Cd4F8A59110119C56f8933403A539555EB",symbol:"aSUSD",baseTokenSymbol:"sUSD",baseTokenAddress:"0x57Ab1ec28D129707052df4dF418D58a2D46d5f51"},{address:"0x101cc05f4A51C0319f570d5E146a8C625198e636",symbol:"aTUSD",baseTokenSymbol:"TUSD",baseTokenAddress:"0x0000000000085d4780B73119b644AE5ecd22b376"},{address:"0xBcca60bB61934080951369a648Fb03DF4F96263C",symbol:"aUSDC",baseTokenSymbol:"USDC",baseTokenAddress:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{address:"0x8dAE6Cb04688C62d939ed9B68d32Bc62e49970b1",symbol:"aCRV",baseTokenSymbol:"CRV",baseTokenAddress:"0xD533a949740bb3306d119CC777fa900bA034cd52"},{address:"0xD37EE7e4f452C6638c96536e68090De8cBcdb583",symbol:"aGUSD",baseTokenSymbol:"GUSD",baseTokenAddress:"0x056Fd409E1d7A124BD7017459dFEa2F387b6d5Cd"},{address:"0x272F97b7a56a387aE942350bBC7Df5700f8a4576",symbol:"aBAL",baseTokenSymbol:"BAL",baseTokenAddress:"0xba100000625a3754423978a60c9317c58a424e3D"},{address:"0xF256CC7847E919FAc9B808cC216cAc87CCF2f47a",symbol:"aXSUSHI",baseTokenSymbol:"xSUSHI",baseTokenAddress:"0x8798249c2E607446EfB7Ad49eC89dD1865Ff4272"},{address:"0x514cd6756CCBe28772d4Cb81bC3156BA9d1744aa",symbol:"aRENFIL",baseTokenSymbol:"renFIL",baseTokenAddress:"0xD5147bc8e386d91Cc5DBE72099DAC6C9b99276F5"},{address:"0xc9BC48c72154ef3e5425641a3c747242112a46AF",symbol:"aRAI",baseTokenSymbol:"RAI",baseTokenAddress:"0x03ab458634910AaD20eF5f1C8ee96F1D6ac54919"},{address:"0x1E6bb68Acec8fefBD87D192bE09bb274170a0548",symbol:"aAMPL",baseTokenSymbol:"AMPL",baseTokenAddress:"0xD46bA6D942050d489DBd938a2C909A5d5039A161"},{address:"0x2e8F4bdbE3d47d7d7DE490437AeA9915D930F1A3",symbol:"aUSDP",baseTokenSymbol:"USDP",baseTokenAddress:"0x8E870D67F660D95d5be530380D0eC0bd388289E1"},{address:"0x6F634c6135D2EBD550000ac92F494F9CB8183dAe",symbol:"aDPI",baseTokenSymbol:"DPI",baseTokenAddress:"0x1494CA1F11D487c2bBe4543E90080AeBa4BA3C2b"},{address:"0xd4937682df3C8aEF4FE912A96A74121C0829E664",symbol:"aFRAX",baseTokenSymbol:"FRAX",baseTokenAddress:"0x853d955aCEf822Db058eb8505911ED77F175b99e"},{address:"0x683923dB55Fead99A79Fa01A27EeC3cB19679cC3",symbol:"aFEI",baseTokenSymbol:"FEI",baseTokenAddress:"0x956F47F50A910163D8BF957Cf5846D573E7f87CA"}],polygon:[{address:"0x27F8D03b3a2196956ED754baDc28D73be8830A6e",symbol:"amDAI",baseTokenSymbol:"DAI",baseTokenAddress:"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063"},{address:"0x1a13F4Ca1d028320A707D99520AbFefca3998b7F",symbol:"amUSDC",baseTokenSymbol:"USDC",baseTokenAddress:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"},{address:"0x60D55F02A771d515e077c9C2403a1ef324885CeC",symbol:"amUSDT",baseTokenSymbol:"USDT",baseTokenAddress:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F"},{address:"0x5c2ed810328349100A66B82b78a1791B101C9D61",symbol:"amWBTC",baseTokenSymbol:"WBTC",baseTokenAddress:"0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6"},{address:"0x28424507fefb6f7f8E9D3860F56504E4e5f5f390",symbol:"amWETH",baseTokenSymbol:"WETH",baseTokenAddress:"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619"},{address:"0x8dF3aad3a84da6b69A4DA8aeC3eA40d9091B2Ac4",symbol:"amWMATIC",baseTokenSymbol:"WMATIC",baseTokenAddress:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270"},{address:"0x1d2a0E5EC8E5bBDCA5CB219e649B565d8e5c3360",symbol:"amAAVE",baseTokenSymbol:"AAVE",baseTokenAddress:"0xD6DF932A45C0f255f85145f286eA0b292B21C90B"}],avalanche:[{address:"0x53f7c5869a859F0AeC3D334ee8B4Cf01E3492f21",symbol:"avWETH",baseTokenAddress:"0x49D5c2BdFfac6CE2BFdB6640F4F80f226bc10bAB",baseTokenSymbol:"WETH.e"},{address:"0x47AFa96Cdc9fAb46904A55a6ad4bf6660B53c38a",symbol:"avDAI",baseTokenAddress:"0xd586E7F844cEa2F87f50152665BCbc2C279D8d70",baseTokenSymbol:"DAI.e"},{address:"0xc7198437980c041c805A1EDcbA50c1Ce5db95118",symbol:"avUSDT",baseTokenAddress:"0x532E6537FEA298397212F09A61e03311686f548e",baseTokenSymbol:"USDT.e"},{address:"0x46A51127C3ce23fb7AB1DE06226147F446e4a857",symbol:"avUSDC",baseTokenAddress:"0xA7D7079b0FEaD91F3e65f86E8915Cb59c1a4C664",baseTokenSymbol:"USDC.e"},{address:"0xD45B7c061016102f9FA220502908f2c0f1add1D7",symbol:"avAAVE",baseTokenAddress:"0x63a72806098Bd3D9520cC43356dD78afe5D386D9",baseTokenSymbol:"AAVE.e"},{address:"0x686bEF2417b6Dc32C50a3cBfbCC3bb60E1e9a15D",symbol:"avWBTC",baseTokenAddress:"0x50b7545627a5162F82A992c33b87aDc75187B218",baseTokenSymbol:"WBTC.e"},{address:"0xDFE521292EcE2A4f44242efBcD66Bc594CA9714B",symbol:"avWAVAX",baseTokenAddress:"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7",baseTokenSymbol:"WAVAX.e"}]},w={ethereum:h.ethereum,polygon:h.polygon,avalanche:h.avalanche,"binance-smart-chain":[]},T=t(1630),B=t(635),g=new i.Interface(f.a),S=Math.pow(10,27),I=null,L=function(e){var a=e.networkId,t=e.tokens,c=e.account,i=e.addRequest,f=Object(u.a)().addToast,D=Object(l.useRef)(),p=Object(l.useState)(!0),C=Object(d.a)(p,2),F=C[0],h=C[1],L=Object(l.useState)(!1),R=Object(d.a)(L,2),N=R[0],U=R[1],P=Object(l.useState)([]),_=Object(d.a)(P,2),W=_[0],M=_[1],V=Object(l.useState)([]),H=Object(d.a)(V,2),Y=H[0],q=H[1],X=Object(l.useCallback)(function(){var e=Object(o.a)(r.a.mark((function e(a){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=W.find((function(e){return e.address===a})))&&q([[Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(k.y,{label:"Annual Percentage Rate",children:Object(O.jsxs)("div",{children:["APR\xa0",Object(O.jsx)(v.u,{})]})})}),"".concat(t.apr,"%")],["Lock","No Lock"],["Type","Variable Rate"]]);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[W]),K=m.a.find((function(e){return e.id===a})),G=Object(l.useMemo)((function(){return e=K.id,w[e]?[].concat(Object(s.a)(w[e].map((function(a){return{address:a.baseTokenAddress,baseTokenAddress:a.baseTokenAddress,symbol:a.baseTokenSymbol,name:a.baseTokenSymbol,img:Object(E.a)(e,a.baseTokenAddress),balance:0,balanceRaw:"0",type:"deposit"}}))||[]),Object(s.a)(w[e].map((function(a){return{address:a.address,baseTokenAddress:a.baseTokenAddress,symbol:a.symbol,name:a.symbol,img:Object(E.a)(e,a.baseTokenAddress),balance:0,balanceRaw:"0",type:"withdraw"}}))||[])):[];var e}),[K.id]),J=function(e,a){return W.filter((function(a){return a.type===e})).find((function(e){return e.address===a}))},Z=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return i({id:e,type:"eth_sendTransaction",chainId:K.chainId,account:c,txn:a,extraGas:t})},z=function(){var e=Object(o.a)(r.a.mark((function e(a,t,n){var d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d=function(){var e=Object(o.a)(r.a.mark((function e(a,o){var d,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=J(a,t),i=b.ethers.utils.parseUnits(n.toString(),d.decimals).toHexString(),"deposit"!==a){e.next=5;break}return e.next=5,Object(T.a)("Aave Pool",K.id,c,I,t,Z,f);case 5:try{Z("aave_pool_".concat(a,"_").concat(Date.now()),{to:I,value:"0x0",data:g.encodeFunctionData(a,[t,i].concat(Object(s.a)(o)))},6e4)}catch(r){console.error(r),f("Aave ".concat(a," Error: ").concat(r.message||r),{error:!0})}case 6:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),"Deposit"===a?d("deposit",[c,0]):"Withdraw"===a&&d("withdraw",[c]);case 2:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}(),Q=Object(l.useCallback)(Object(o.a)(r.a.mark((function e(){var a,c,d,i,l,u,m,k,j,p,C,v,O,F;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=A.a[K.id]){e.next=5;break}return h(!1),U(!0),e.abrupt("return");case 5:return e.prev=5,c=Object(x.a)(K.id),d=new b.ethers.Contract(a,g,c),e.next=10,d.getLendingPool();case 10:return I=e.sent,i=new b.ethers.Contract(I,g,c),e.next=14,i.getReservesList();case 14:return l=e.sent,u=l.map((function(e){return e.toLowerCase()})),m=G.filter((function(e){return"withdraw"===e.type})).map((function(e){return e.address.toLowerCase()})),k=G.filter((function(e){return"deposit"===e.type})).map((function(e){return e.address.toLowerCase()})),j=t.filter((function(e){var a=e.address;return m.includes(a.toLowerCase())})).map((function(e){var a;return Object(n.a)(Object(n.a)({},e),{},{address:null===(a=G.find((function(a){return"withdraw"===a.type&&a.address.toLowerCase()===e.address.toLowerCase()})))||void 0===a?void 0:a.baseTokenAddress,type:"withdraw"})})).filter((function(e){return e})).sort((function(e,a){return a.balance-e.balance})),p=t.filter((function(e){var a=e.address;return k.includes(a.toLowerCase())})).filter((function(e){return u.includes(e.address)})).map((function(e){return Object(n.a)(Object(n.a)({},e),{},{type:"deposit"})})).filter((function(e){return e})).sort((function(e,a){return a.balance-e.balance})),e.next=22,Promise.all([].concat(Object(s.a)(j),Object(s.a)(p),Object(s.a)(G.filter((function(e){var a=e.type,t=e.address;return"deposit"===a&&!p.map((function(e){return e.address.toLowerCase()})).includes(t.toLowerCase())}))),Object(s.a)(G.filter((function(e){var a=e.type,t=e.baseTokenAddress;return"withdraw"===a&&!j.map((function(e){return e.address.toLowerCase()})).includes(t.toLowerCase())})))));case 22:return C=e.sent,v=Object(s.a)(new Set(C.map((function(e){return e.address})))),e.t0=Object,e.next=27,Promise.all(v.map(function(){var e=Object(o.a)(r.a.mark((function e(a){var t,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getReserveData(a);case 2:return t=e.sent,n=t.liquidityRate,s=(n/S*100).toFixed(2),e.abrupt("return",[a,s]);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()));case 27:if(e.t1=e.sent,O=e.t0.fromEntries.call(e.t0,e.t1),F=C.map((function(e){var a="0.00"===O[e.address]&&O[e.baseTokenAddress]?O[e.baseTokenAddress]:O[e.address];return Object(n.a)(Object(n.a)({},e),{},{apr:a,icon:e.img||e.tokenImageUrl,label:"".concat(e.symbol," (").concat(a,"% APR)"),value:e.address})})),D.current===K.id){e.next=32;break}return e.abrupt("return");case 32:M(F),h(!1),U(!1),e.next=41;break;case 37:e.prev=37,e.t2=e.catch(5),console.error(e.t2),f("Aave load pool error: ".concat(e.t2.message||e.t2),{error:!0});case 41:case"end":return e.stop()}}),e,null,[[5,37]])}))),[f,t,G,K]);return Object(l.useEffect)((function(){return Q()}),[Q]),Object(l.useEffect)((function(){D.current=a,h(!0)}),[a]),Object(O.jsx)(y,{loading:F,unavailable:N,icon:j,details:Y,tokensItems:W,onTokenSelect:X,onValidate:z,moreDetails:Object(O.jsx)(B.a,{title:"What is Aave",description:"Aave is an open source and non-custodial DeFi protocol for earning interest on deposits and borrowing assets. Depositors provide liquidity to the market to earn a passive income, while borrowers are able to borrow in an overcollateralized (perpetually) or undercollateralized (one-block liquidity) fashion."})})},R=t(958),N=t(1570),U=t.p+"static/media/yearn.ac5ab573.svg",P={ethereum:["0xdA816459F1AB5631232FE5e97a05BBBb94970c95","0xa354F35829Ae975e850e23e9615b11Da1B3dC4DE","0xdb25cA703181E7484a155DD612b06f57E12Be5F0","0xA696a63cc78DfFa1a63E9E50587C197387FF6C7E","0x7Da96a3891Add058AdA2E826306D812C638D87a7","0xB8C3B7A2A618C552C23B1E4701109a9E756Bab67","0xe11ba472F74869176652C35D30dB89854b5ae84D","0xa258C4606Ca8206D8aA700cE2143D7db854D168c","0xFBEB78a723b8087fD2ea7Ef1afEc93d35E8Bed42","0x6d765CbE5bC922694afE112C140b8878b9FB0390","0xFD0877d9095789cAF24c98F7CCe092fa8E120775","0xd9788f3931Ede4D5018184E198699dC6d66C1915"],fantom:["0x0DEC85e74A92c52b7F708c4B10207D9560CEFaf0","0x695A4a6e5888934828Cb97A3a7ADbfc71A70922D","0x935601c5694f23491921c14aA235c65c2ea2c4DE","0x28F2fB6730d5dbeFc4FF9eB375Bbf33BcB36e774","0x8b8b4018F1d1e28217A1c7432E729e58e1828D59","0x2C850cceD00ce2b14AA9D658b7Cad5dF659493Db","0xDf262B43bea0ACd0dD5832cf2422e0c9b2C539dc","0x637eC617c86D24E421328e6CAEa1d92114892439","0xdC9D3bB76Df8bE1e9Ca68C7BF32293a86C829D81","0xd025b85db175EF1b175Af223BD37f330dB277786","0xEF0210eB96c7EB36AF8ed1c20306462764935607","0x27a5ce447f4E581aE69061E90521da4B5b298818","0x42639b59cf9db5339C1C5cfB5738D0ba4F828F94","0x148c05caf1Bb09B5670f00D511718f733C54bC4c","0x3B9bc1f596844Ca8a30A7710Aac7155968Db7d13","0x83a5Af7540E919dE74cf2D6d5F40e47f11D3E8d1","0x0A0b23D9786963DE69CB2447dC125c49929419d8","0x8A807b5742587024783Df3Ed2F149725C197b5eE","0xD0D1f041F93c0fF1091457618E529610C67A76de","0x24BC86a808D45f0AAd8008bd3ac2D9356007e833","0x357ca46da26E1EefC195287ce9D838A6D5023ef3","0xfF8bb7261E4D51678cB403092Ae219bbEC52aa51","0xF137D22d7B23eeB1950B3e19d1f578c053ed9715","0x7ff6fe5bDa1b26fa46880dF8AF844326DAd50d13","0x0446acaB3e0242fCf33Aa526f1c95a88068d5042","0x6EEb47BBcDf0059E5F1D6Ee844Ba793D5401bF18","0xCe2Fc0bDc18BD6a4d9A725791A3DEe33F3a23BB7","0x9DF9418837281faC4C4c1166f55D35F2799A9107","0xd817A100AB8A29fE3DBd925c2EB489D67F758DA9","0x0ed5C4effED69B39C86a8D806462d709Fb96A9E4","0xD3c19eB022CAC706c898D60d756bf1535d605e1d","0x35B51a621d78609dE7Cf25BC4e0682c7DEA38799","0x1b48641D8251c3E84ecbe3f2bD76B3701401906D","0x36A1E9dF5EfdAB9694de5bFe25A9ACc23F66BCB7","0xf2d323621785A066E64282d2B407eAc79cC04966","0x1e0F7D116ffB998EeC879B96698222D1Ee8d87CB","0xde39F0148496D42cd4e16563463fA5C6504CaA00","0x0fBbf9848D969776a5Eb842EdAfAf29ef4467698","0xA36c91E38bf24E9F2df358E47D4134a8894C6a4c","0xCbCaF8cB8cbeAFA927ECEE0c5C56560F83E9B7D9","0xcF3b91D83cD5FE15269E6461098fDa7d69138570"]},_={"0xa258C4606Ca8206D8aA700cE2143D7db854D168c":{displayName:"WETH",displayIcon:"https://etherscan.io/token/images/weth_28.png"}},W=function(e){var a=e.tokens,t=e.networkDetails,c=e.provider,b=e.currentNetwork,i=Object(l.useState)([]),u=Object(d.a)(i,2),f=u[0],A=u[1],m=Object(l.useState)([]),x=Object(d.a)(m,2),j=x[0],D=x[1],p=Object(l.useCallback)((function(e){return a.find((function(a){return a.address.toLowerCase()===e.toLowerCase()}))||{}}),[a]),C=Object(l.useCallback)(Object(o.a)(r.a.mark((function e(){var a,o,d,i,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new N.Yearn(t.chainId,{provider:c}),e.next=3,a.vaults.get(P[t.id]);case 3:if(o=e.sent,d=o.map((function(e){var a=e.address,t=e.metadata,s=e.symbol,c=e.token,r=e.decimals,o=Object(n.a)(Object(n.a)({},t),_[a]||{}),d=o.apy,b=o.displayName,i=o.displayIcon;return{vaultAddress:a,apy:(100*(null===d||void 0===d?void 0:d.net_apy)).toFixed(2)||0,icon:i,value:a,token:{address:c,symbol:b,decimals:r},yToken:{address:a,symbol:s,decimals:r}}})),i=d.map((function(e){var a=e.apy,t=e.token,s=t.address,c=t.symbol,r=t.decimals,o=p(s),d=o.balance,b=o.balanceRaw;return Object(n.a)(Object(n.a)({},e),{},{type:"deposit",label:"".concat(c," (").concat(a,"% APY)"),symbol:c,decimals:r,tokenAddress:t.address,balance:d||0,balanceRaw:b||"0"})})),l=d.map((function(e){var a=e.apy,t=e.yToken,s=t.address,c=t.symbol,r=t.decimals,o=p(s),d=o.balance,b=o.balanceRaw;return Object(n.a)(Object(n.a)({},e),{},{type:"withdraw",label:"".concat(c," (").concat(a,"% APY)"),symbol:c,decimals:r,tokenAddress:t.address,balance:d||0,balanceRaw:b||"0"})})),b.current===t.id){e.next=9;break}return e.abrupt("return");case 9:A([].concat(Object(s.a)(i),Object(s.a)(l)));case 10:case"end":return e.stop()}}),e)}))),[p,c,t,b]),F=Object(l.useCallback)((function(e){var a=f.find((function(a){return a.tokenAddress===e}));a&&D([[Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(k.y,{label:"Annual Percentage Yield",children:Object(O.jsxs)("div",{children:["APY\xa0",Object(O.jsx)(v.u,{})]})})}),"".concat(a.apy,"%")],["Lock","No Lock"],["Type","Variable Rate"]])}),[f]);return{icon:U,loadVaults:C,tokensItems:f,details:j,onTokenSelect:F}},M=t(95),V=t(607),H=t.p+"static/media/tesseract.3da02a6d.svg",Y="https://polygonscan.com/token/images",q=[["tvUSDC","0x57bDbb788d0F39aEAbe66774436c19196653C3F2","".concat(Y,"/centre-usdc_32.png")],["tvDAI","0x4c8C6379b7cd039C892ab179846CD30a1A52b125","".concat(Y,"/mcdDai_32.png")],["tvWBTC","0x6962785c731e812073948a1f5E181cf83274D7c6","".concat(Y,"/wBTC_32.png")],["tvWETH","0x3d44F03a04b08863cc8825384f834dfb97466b9B","".concat(Y,"/wETH_32.png")],["tvWMATIC","0xE11678341625cD88Bb25544e39B2c62CeDcC83f1","".concat(Y,"/wMatic_32.png")]],X=function(e){var a=e.tokens,t=e.provider,n=e.networkId,c=e.currentNetwork,b=Object(u.a)().addToast,i=Object(l.useState)([]),f=Object(d.a)(i,2),A=f[0],m=f[1],x=Object(l.useState)([]),k=Object(d.a)(x,2),j=k[0],D=k[1],p=Object(l.useState)([]),C=Object(d.a)(p,2),v=C[0],F=C[1],y=Object(l.useCallback)((function(e,t){return t.map((function(t){var n=t.vaultAddress,s=t.token,c=t.tToken,r=t.icon,o=t.apy,d="deposit"===e?s:c,b=d.address,i=d.symbol,l=d.decimals,u=a.find((function(e){return e.address.toLowerCase()===b.toLowerCase()}));return{type:e,vaultAddress:n,tokenAddress:b,symbol:i,decimals:l,icon:r,apy:o,label:"".concat(i," (").concat(o,"% APY)"),value:n,balance:u?u.balance:0,balanceRaw:u?u.balanceRaw:"0"}}))}),[a]),E=Object(l.useCallback)(function(){var e=Object(o.a)(r.a.mark((function e(a){var t,n,s,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://prom.tesr.finance/api/v1",'/query?query=deriv(price{network="matic",ticker="').concat(a,'",version="0.4.3.1"}[10d])*60*60*24*365'));case 3:return n=e.sent,e.next=6,n.json();case 6:if(s=e.sent,c=s.data,o=s.status,c&&"success"===o&&c.result.length){e.next=11;break}return e.abrupt("return",0);case 11:return e.abrupt("return",(100*(null===(t=c.result[0])||void 0===t?void 0:t.value[1])).toFixed(2));case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0),b("Failed to fetch ".concat(a," Vault APY"),{error:!0});case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(a){return e.apply(this,arguments)}}(),[b]),h=Object(l.useCallback)(Object(o.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(q.map(function(){var e=Object(o.a)(r.a.mark((function e(a){var n,s,c,o,i,l,u,f,A,m,x,k;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(d.a)(a,3),s=n[0],c=n[1],o=n[2],e.prev=1,i=new M.Contract(c,R.a,t),e.next=5,i.token();case 5:return l=e.sent,u=new M.Contract(l,V,t),e.t0=Promise,e.next=10,u.symbol();case 10:return e.t1=e.sent,e.next=13,u.decimals();case 13:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=17,e.t0.all.call(e.t0,e.t3);case 17:return f=e.sent,A=Object(d.a)(f,2),m=A[0],x=A[1],e.next=23,E(s);case 23:return k=e.sent,e.abrupt("return",{vaultAddress:c,token:{address:l,decimals:x,symbol:m},tToken:{address:c,decimals:x,symbol:"tv".concat(m)},icon:o,apy:k});case 27:return e.prev=27,e.t4=e.catch(1),console.error(e.t4),b("Fetch Tesseract Vaults: "+e.t4.message||!1,{error:!0}),e.abrupt("return",null);case 32:case"end":return e.stop()}}),e,null,[[1,27]])})));return function(a){return e.apply(this,arguments)}}()));case 2:if(a=e.sent.filter((function(e){return e})),n===c.current){e.next=5;break}return e.abrupt("return");case 5:m(a);case 6:case"end":return e.stop()}}),e)}))),[n,c,E,t,b]),w=Object(l.useCallback)((function(e){j.find((function(a){return a.tokenAddress===e}))&&F([Object(O.jsxs)("div",{className:"warning-msg",children:["Tesseract is closing. You will still be able to withdraw your funds indefinitely, but there will be no more earning strategies.\xa0",Object(O.jsx)("a",{href:"https://medium.com/@tesseract_fi/the-omega-of-tesseract-finance-36d6a75d7310",target:"_blank",rel:"noreferrer noopener",children:"Learn more."})]})])}),[j]);return Object(l.useEffect)((function(){var e=y("deposit",A),a=y("withdraw",A);D([].concat(Object(s.a)(e),Object(s.a)(a)))}),[A,y]),{icon:H,loadVaults:h,tokensItems:j,details:v,onTokenSelect:w}},K=t(1578),G="0x460fad03099f67391d84c9cc0ea7aa2457969cea",J=new i.Interface(K),Z=new i.Interface(V),z=new i.Interface(R.a),Q="What is Tesseract Finance",$="Tesseract Finance is a DeFi yield farming protocol that brings yearn.finance to selected EVM compatible chains. Tesseract Finance enables lending and borrowing opportunities on the Polygon network.",ee="What is Yearn.finance",ae="Yearn.finance is a suite of products in DeFi that provides yield generation, lending aggregation, and more on the blockchain. The protocol is maintained by various independent developers and is governed by YFI holders.",te=function(e){var a=e.networkId,t=e.accountId,n=e.tokens,s=e.addRequest,c=Object(u.a)().addToast,b=Object(l.useRef)(),f=Object(l.useState)([]),A=Object(d.a)(f,2),k=A[0],j=A[1],D=!("ethereum"===a||"polygon"===a||"fantom"===a),C="ethereum"===a?"Yearn":"Tesseract",v=m.a.find((function(e){return e.id===a})),F=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return s({id:e,type:"eth_sendTransaction",chainId:v.chainId,account:t,txn:a,extraGas:n})},E=Object(l.useMemo)((function(){return Object(x.a)(v.id)}),[v.id]),h="polygon"===a,w=W({tokens:n,provider:E,networkDetails:v,currentNetwork:b}),T=X({tokens:n,provider:E,networkId:a,currentNetwork:b}),g=Object(l.useMemo)((function(){return"polygon"===a?T:w}),[a,w,T]),S=g.icon,I=g.loadVaults,L=g.tokensItems,R=g.details,N=g.onTokenSelect,U={title:"polygon"===a?Q:ee,description:"polygon"===a?$:ae},P=function(){var e=Object(o.a)(r.a.mark((function e(n,s,o){var d,b,l,u,f,A,m,k,j,D,v;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=L.find((function(e){return e.type===n.toLowerCase()&&e.value===s}))){e.next=3;break}return e.abrupt("return");case 3:if(b=d.tokenAddress,l=d.vaultAddress,u=d.decimals,f=o.slice(0,o.indexOf(".")+Number(u)+1),A=Object(i.parseUnits)(f,u),m={to:b,value:"0x0",data:Z.encodeFunctionData("transfer",[G,A.toHexString()])},0===Number(b)&&(m={to:G,value:A.toHexString(),data:"0x"}),F("batcher_call_transfer_funds_".concat(Date.now()),m),"Deposit"!==n){e.next=28;break}return e.prev=10,k=[],j=Object(x.a)(a),D=new M.Contract(b,Z,j),e.next=16,D.allowance(G,l);case 16:e.sent.lt(p.constants.MaxUint256)&&k.push({to:b,value:"0x0",data:Z.encodeFunctionData("approve",[l,p.constants.MaxUint256])}),k.push({to:l,value:"0x0",data:z.encodeFunctionData("deposit",[A.toHexString(),t])}),F("batcher_call_vault_deposit_".concat(Date.now()),{to:G,value:"0x0",data:J.encodeFunctionData("batchCall",[k])}),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(10),console.error(e.t0),c("".concat(C," Deposit Error: ").concat(e.t0.message||e.t0),{error:!0});case 26:e.next=29;break;case 28:if("Withdraw"===n)try{v=[{to:l,value:"0x0",data:z.encodeFunctionData("withdraw",[A.toHexString(),t])}],F("batcher_call_vault_withdraw_".concat(Date.now()),{to:G,value:"0x0",data:J.encodeFunctionData("batchCall",[v])})}catch(r){console.error(r),c("".concat(C," Withdraw Error: ").concat(r.message||r),{error:!0})}case 29:case"end":return e.stop()}}),e,null,[[10,22]])})));return function(a,t,n){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){function e(){return(e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:j(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}D?j(!1):function(){e.apply(this,arguments)}()}),[D,I]),Object(l.useEffect)((function(){b.current=a,D||j(!0)}),[a,D]),Object(O.jsx)(y,{isDepositsDisabled:h,loading:k,icon:S,unavailable:D,tokensItems:L,details:R,onTokenSelect:N,onValidate:P,moreDetails:Object(O.jsx)(B.a,{title:U.title,description:U.description})})},ne=t.p+"static/media/logo.ab51d124.png",se=t(26),ce=t(246),re=t(1579),oe=t(1580),de=t(669),be=t(1581),ie=t(731),le="0xade00c28244d5ce17d72e40330b1c318cd12b7c3",ue="0xb6456b57f03352be48bf101b46c1752a0813491a",fe=new i.Interface(re),Ae="0x515629338229dd5f8cea3f4f3cc8185ba21fa30b",me="0x88800092ff476844f74dc2fc427974bbee2794ae",xe="0x47cd7e91c3cbaaf266369fe8518345fc4fc12935",ke="ADX",je="WALLET",De=new i.Interface(ce),pe=new i.Interface(V),Ce=se.a.from(0),ve=31536e3,Oe=1e12,Fe=function(e){var a=864e5,t=Math.floor(e/a),n=Math.floor(e%a/36e5);return t<1?"".concat(n," hours"):"".concat(t," days")},ye=function(e,a,t){var s;if([me,xe].includes(e.txn.to.toLowerCase())){var c=t.rewards,r=c.walletUsdPrice;s={xWallet:{APY:c.xWALLETAPY,shareValue:a,walletTokenUsdPrice:r}}}return s?Object(n.a)(Object(n.a)({},e),{},{meta:Object(n.a)(Object(n.a)({},e.meta&&e.meta),s)}):e},Ee=function(e){var a=e.networkId,t=e.accountId,c=e.tokens,b=e.rewardsData,u=e.addRequest,f=Object(l.useState)(!0),A=Object(d.a)(f,2),j=A[0],C=A[1],F=Object(l.useState)([]),h=Object(d.a)(F,2),w=h[0],T=h[1],B=Object(l.useState)(null),g=Object(d.a)(B,2),S=g[0],I=g[1],L=Object(l.useState)(null),R=Object(d.a)(L,2),N=R[0],U=R[1],P=Object(l.useState)(Ce),_=Object(d.a)(P,2),W=_[0],H=_[1],Y=Object(l.useState)(null),q=Object(d.a)(Y,2),X=q[0],K=q[1],G=Object(l.useState)(null),J=Object(d.a)(G,2),Z=J[0],z=J[1],Q=Object(l.useState)(0),$=Object(d.a)(Q,2),ee=$[0],ae=$[1],te=Object(l.useState)({tokenAddress:"",stakingTokenAddress:"",stakingPoolInterface:"",stakingPoolAbi:"",tokenAbi:""}),Ee=Object(d.a)(te,2),he=Ee[0],we=Ee[1],Te=Object(l.useState)({label:""}),Be=Object(d.a)(Te,2),ge=Be[0],Se=Be[1],Ie=Object(l.useState)(null),Le=Object(d.a)(Ie,2),Re=Le[0],Ne=Le[1],Ue=Object(l.useState)(!1),Pe=Object(d.a)(Ue,2),_e=Pe[0],We=Pe[1],Me=Object(l.useState)(!1),Ve=Object(d.a)(Me,2),He=Ve[0],Ye=Ve[1],qe=Object(l.useState)(null),Xe=Object(d.a)(qe,2),Ke=Xe[0],Ge=Xe[1],Je=Object(l.useCallback)((function(){return"WALLET"===ge.label?30:20}),[ge.label]),Ze="ethereum"!==a,ze=m.a.find((function(e){return e.id===a})),Qe=Object(l.useCallback)((function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=ye({id:e,type:"eth_sendTransaction",chainId:ze.chainId,account:t,txn:a,extraGas:n},W,b);u(s)}),[ze.chainId,t,W,b,u]),$e=b.rewards.xWALLETAPYPercentage,ea=Object(l.useMemo)((function(){return c.find((function(e){return e.address===me}))}),[c]),aa=Object(l.useMemo)((function(){return c.find((function(e){return e.address===xe}))}),[c]),ta=Object(l.useMemo)((function(){return c.find((function(e){return e.address===le}))}),[c]),na=Object(l.useMemo)((function(){return c.find((function(e){return e.address===ue}))}),[c]),sa=Object(l.useMemo)((function(){return X?se.a.from(X).mul(W).div(se.a.from(1e18.toString())).toString():0}),[X,W]),ca=Object(l.useMemo)((function(){return[{type:"deposit",icon:Object(E.a)(a,me),label:je,value:me,symbol:je,balance:(null===ea||void 0===ea?void 0:ea.balanceRaw)&&(null===ea||void 0===ea?void 0:ea.decimals)?Object(i.formatUnits)(null===ea||void 0===ea?void 0:ea.balanceRaw,null===ea||void 0===ea?void 0:ea.decimals):0,balanceRaw:(null===ea||void 0===ea?void 0:ea.balanceRaw)||0},{type:"deposit",icon:Object(E.a)(a,le),label:ke,value:le,symbol:ke,balance:(null===ta||void 0===ta?void 0:ta.balanceRaw)&&(null===ta||void 0===ta?void 0:ta.decimals)?Object(i.formatUnits)(null===ta||void 0===ta?void 0:ta.balanceRaw,null===ta||void 0===ta?void 0:ta.decimals):0,balanceRaw:(null===ta||void 0===ta?void 0:ta.balanceRaw)||0}]}),[null===ta||void 0===ta?void 0:ta.balanceRaw,null===ta||void 0===ta?void 0:ta.decimals,a,null===ea||void 0===ea?void 0:ea.balanceRaw,null===ea||void 0===ea?void 0:ea.decimals]),ra=Object(l.useMemo)((function(){return[{type:"withdraw",icon:Object(E.a)(a,me),label:je,value:xe,symbol:je,balance:Object(i.formatUnits)(sa,null===aa||void 0===aa?void 0:aa.decimals),balanceRaw:sa},{type:"withdraw",icon:Object(E.a)(a,le),label:ke,value:ue,symbol:ke,balance:Object(i.formatUnits)(sa,null===na||void 0===na?void 0:na.decimals),balanceRaw:sa}]}),[null===na||void 0===na?void 0:na.decimals,sa,a,null===aa||void 0===aa?void 0:aa.decimals]),oa=Object(l.useMemo)((function(){return[].concat(Object(s.a)(ca.sort((function(e,a){return e.value===he.tokenAddress?-1:a.value===he.tokenAddress?1:0}))),Object(s.a)(ra.sort((function(e,a){return e.value===he.stakingTokenAddress?-1:a.value===he.stakingTokenAddress?1:0}))))}),[he.stakingTokenAddress,he.tokenAddress,ca,ra]),da=Object(l.useCallback)((function(){var e=Z.shares,a=Z.unlocksAt;Qe("withdraw_staking_pool_".concat(Date.now()),{to:he.stakingTokenAddress,value:"0x0",data:he.stakingPoolInterface.encodeFunctionData("withdraw",[e.toHexString(),a.toHexString(),!1])})}),[he,Z,Qe]),ba=Object(l.useCallback)((function(){return ge.label===ke}),[ge.label]),ia=Object(l.useCallback)((function(e){I(null);var a=oa.find((function(a){return a.value===e}));if(Se({label:null===a||void 0===a?void 0:a.label}),a&&"withdraw"===a.type&&Z&&parseFloat(Z.walletValue)>0){var t="* Because of pending to withdraw, you are not able to unstaking more ".concat(ge.label," until unbond period is end.");I(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"info-message",children:Object(O.jsx)(k.y,{label:t,children:Object(O.jsxs)("span",{children:[Object(O.jsx)("b",{children:Fe(ee)})," until ",parseFloat(Z.walletValue).toFixed(4)," ",ge.label," becomes available for withdraw.\xa0",Object(O.jsx)(v.u,{})]})})}),Object(O.jsx)(k.e,{disabled:ee>0,icon:Object(O.jsx)(D.c,{}),onClick:function(){return da()},children:"Withdraw"})]}))}var n="Annual Percentage Yield".concat("WALLET"===ge.label?": IN ADDITION to what you earn in ".concat(ge.label,"s"):"");T([[Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(k.y,{label:n,children:Object(O.jsxs)("div",{children:["APY\xa0",Object(O.jsx)(v.u,{})]})})}),ba()?Re?"".concat(Re.toFixed(2),"%"):"...":b.isLoading?"...":$e],["Lock","".concat(Je()," day unbond period")],["Type","Variable Rate"]])}),[Je,Re,ba,Z,ee,da,b.isLoading,ge.label,oa,$e]),la=function(){var e=Object(o.a)(r.a.mark((function e(a,n,s,c){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Object(i.parseUnits)(s,18),"Deposit"!==a){e.next=7;break}return e.next=4,N.allowance(t,he.stakingTokenAddress);case 4:e.sent.lt(p.constants.MaxUint256)&&Qe("approve_staking_pool_".concat(Date.now()),{to:he.tokenAddress,value:"0x0",data:pe.encodeFunctionData("approve",[he.stakingTokenAddress,p.constants.MaxUint256])}),Qe("enter_staking_pool_".concat(Date.now()),{to:he.stakingTokenAddress,value:"0x0",data:he.stakingPoolInterface.encodeFunctionData("enter",[o.toHexString()])});case 7:"Withdraw"===a&&(We(!0),Ge({bigNumberAmount:o,type:a,_tokenAddress:n,amount:s,isMaxAmount:c}));case 8:case"end":return e.stop()}}),e)})));return function(a,t,n,s){return e.apply(this,arguments)}}(),ua=Object(l.useCallback)(function(){var e=Object(o.a)(r.a.mark((function e(a){var n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.bigNumberAmount,!a.isMaxAmount){e.next=7;break}return e.next=4,N.balanceOf(t);case 4:s=e.sent,e.next=8;break;case 7:s=n.mul(se.a.from(1e18.toString())).div(W);case 8:Qe("leave_staking_pool_".concat(Date.now()),{to:he.stakingTokenAddress,value:"0x0",data:he.stakingPoolInterface.encodeFunctionData("leave",[s.toHexString(),!1])});case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[t,Qe,he,W,N]);return Object(l.useEffect)((function(){He&&null!=Ke&&(ua(Ke),We(!1),Ye(!1),Ge(null))}),[He,ua,Ke]),Object(l.useEffect)((function(){function e(){return e=Object(o.a)(r.a.mark((function e(){var c,b,i,l,u,f,A,m,k,j,D,C,v,O,F,y,E,h,w,T,B,g,S,I,L,R,N,P,_,W,Y,q,X,G,J,Q,$,ee;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"ethereum"===a){e.next=3;break}return e.abrupt("return");case 3:return c=Object(x.a)(a),b=ba()?le:me,i=ba()?ue:xe,l=ba()?fe:De,u=ba()?re:ce,f=ba()?V:be,A=new M.Contract(i,l,c),m=new M.Contract(b,f,c),k=new M.Contract(Ae,oe,c),U(A),we({tokenAddress:b,stakingTokenAddress:i,stakingPoolInterface:l,stakingPoolAbi:u,tokenAbi:f}),e.next=16,Promise.all([A.shareValue(),A.totalSupply(),A.balanceOf(t)]);case 16:if(j=e.sent,D=Object(d.a)(j,3),C=D[0],v=D[1],O=D[2],!ba()){e.next=30;break}return e.next=24,Promise.all([k.incentivePerSecond(ue),m.balanceOf(i)]);case 24:F=e.sent,y=Object(d.a)(F,2),E=y[0],h=y[1],w=E.mul(Oe).mul(ve).div(h).toNumber()/Oe,Ne(100*w);case 30:return H(C),K(O),e.next=34,Promise.all([c.getLogs(Object(n.a)({fromBlock:0},A.filters.LogLeave(t,null,null,null))),c.getLogs(Object(n.a)({fromBlock:0},A.filters.LogWithdraw(t,null,null,null,null)))]);case 34:return T=e.sent,B=Object(d.a)(T,2),g=B[0],S=B[1],I=S.map((function(e){var a=A.interface.parseLog(e).args,t=a.shares,n=a.unlocksAt,s=a.maxTokens,c=a.receivedTokens;return{transactionHash:e.transactionHash,type:"withdraw",shares:t,unlocksAt:n,maxTokens:s,receivedTokens:c,blockNumber:e.blockNumber}})),L=new Date/1e3,e.next=42,Promise.all(g.map(function(){var e=Object(o.a)(r.a.mark((function e(a){var n,s,c,o,d,b,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=A.interface.parseLog(a),s=n.args,c=s.maxTokens,o=s.shares,d=s.unlocksAt,b=I.find((function(e){return e.unlocksAt.toString()===d.toString()&&e.shares.toString()===o.toString()&&e.maxTokens.toString()===c.toString()})),!v.isZero()){e.next=7;break}e.t0=Ce,e.next=10;break;case 7:return e.next=9,A.unbondingCommitmentWorth(t,o,d);case 9:e.t0=e.sent;case 10:return i=e.t0,e.abrupt("return",{transactionHash:a.transactionHash,type:"leave",maxTokens:c,shares:o,unlocksAt:d,blockNumber:a.blockNumber,walletValue:i,withdrawTx:b});case 12:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()));case 42:if(R=e.sent,N=Object(s.a)(R).filter((function(e){return e.unlocksAt>L})),P=Object(s.a)(R).filter((function(e){return e.unlocksAt<L&&!e.withdrawTx})),_=null,P.length?_=P[0]:N.length&&(_=N[0]),!_){e.next=59;break}return Y=(W=_).maxTokens,q=W.shares,X=W.unlocksAt,G=W.blockNumber,J=W.walletValue,z({tokens:Y,shares:q,unlocksAt:X,walletValue:p.utils.formatUnits(J.toString(),18)}),e.next=52,c.getBlock(G);case 52:Q=e.sent,$=Q.timestamp,(ee=Z?Z.unlocksAt.toString()-(Date.now()-1e3*$):null)<=0&&(ee=0),ae(ee),e.next=60;break;case 59:z(null);case 60:e.next=65;break;case 62:e.prev=62,e.t0=e.catch(0),console.error(e.t0);case 65:case"end":return e.stop()}}),e,null,[[0,62]])}))),e.apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){H(Ce)}}),[a,t,ge.label,ba,Z]),Object(l.useEffect)((function(){return C(!1)}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(ie.a,{isVisible:_e,hideModal:function(){return We(!1)},text:"There is a ".concat(Je(),"-day lockup period for the tokens you are requesting to unbond. You will not be earning staking rewards on these tokens during these ").concat(Je()," days!"),onClick:function(){return Ye(!0)}}),Object(O.jsx)(y,{loading:j||!X&&!Ze,icon:ne,unavailable:Ze,tokensItems:oa,details:w,customInfo:S,onTokenSelect:ia,onValidate:la,moreDetails:!Ze&&Object(O.jsx)(de.a,{apy:ba()?Re?"".concat(Re.toFixed(2),"%"):"...":$e,accountId:t,msToDaysHours:Fe,addresses:he,tokenLabel:ge.label})})]})};a.default=function(e){var a=e.portfolio,t=e.selectedNetwork,n=e.rewardsData,s=e.selectedAcc,c=e.addRequest;return Object(O.jsx)("div",{id:"earn",children:a.isCurrNetworkBalanceLoading?Object(O.jsx)(k.m,{}):Object(O.jsxs)("div",{className:"cards",children:[Object(O.jsx)(Ee,{networkId:t.id,accountId:s,tokens:a.tokens,rewardsData:n,addRequest:c}),Object(O.jsx)(L,{networkId:t.id,tokens:a.tokens,account:s,addRequest:c}),Object(O.jsx)(te,{networkId:t.id,accountId:s,tokens:a.tokens,addRequest:c})]})})}}}]);
//# sourceMappingURL=25.284d7a00.chunk.js.map