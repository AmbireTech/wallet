(this["webpackJsonpambire-wallet"]=this["webpackJsonpambire-wallet"]||[]).push([[21],{1559:function(e,n,t){var r=t(3),s=t(179),a=t(62).ethers,i=["function isValidSignature(bytes32 hash, bytes signature) view returns (bytes4)"],c=function(){var e=s(r.mark((function e(n){var t,s,i,c,l,g,p;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.provider,s=n.signer,i=n.message,c=n.typedData,l=n.finalDigest,g=n.signature,p=n.undeployedCallback,!i){e.next=5;break}l=a.utils.hashMessage(i),e.next=13;break;case 5:if(!c){e.next=11;break}if(c.domain&&c.types&&c.message){e.next=8;break}throw Error("Missing one or more properties for typedData (domain, types, message)");case 8:l=a.utils._TypedDataEncoder.hash(c.domain,c.types,c.message),e.next=13;break;case 11:if(l){e.next=13;break}throw Error("Missing one of the properties: message, unPrefixedMessage, typedData or finalDigest");case 13:if(!u(o(l,g),s)){e.next=15;break}return e.abrupt("return",!0);case 15:return e.next=17,d(t,s,l,g);case 17:if(e.t0=e.sent,"0x1626ba7e"!==e.t0){e.next=20;break}return e.abrupt("return",!0);case 20:if(!p){e.next=29;break}if(e.prev=21,!p(s,l,g)){e.next=24;break}return e.abrupt("return",!0);case 24:e.next=29;break;case 26:throw e.prev=26,e.t1=e.catch(21),new Error("undeployedCallback error: "+e.t1.message);case 29:return e.abrupt("return",!1);case 30:case"end":return e.stop()}}),e,null,[[21,26]])})));return function(n){return e.apply(this,arguments)}}(),o=function(e,n){try{return a.utils.recoverAddress(e,n)}catch(t){return!1}},u=function(e,n){if(!1===e)return!1;if(!a.utils.isAddress(e))throw new Error("Invalid recovered address: "+e);return e.toLowerCase()===n.toLowerCase()},d=function(){var e=s(r.mark((function e(n,t,s,c){var o,u,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.providers.Provider.isProvider(n)?n:new a.providers.Web3Provider(n),e.next=3,o.getCode(t);case 3:if(!(u=e.sent)||"0x"===u){e.next=7;break}return d=new a.Contract(t,i,o),e.abrupt("return",d.isValidSignature(s,c));case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(n,t,r,s){return e.apply(this,arguments)}}();e.exports={verifyMessage:c}},1560:function(e,n,t){e.exports={wrapper:"SignMessage_wrapper__2eGYN",panel:"SignMessage_panel__i6hvi",title:"SignMessage_title__3JEw4",content:"SignMessage_content__1o8oD",signMessageTitle:"SignMessage_signMessageTitle__2RsRq",signMessageTitleTitle:"SignMessage_signMessageTitleTitle__3ogi2",signMessageTitleSignatureType:"SignMessage_signMessageTitleSignatureType__hzp-A",signingAccountContent:"SignMessage_signingAccountContent__15a4k",signingAccountAccount:"SignMessage_signingAccountAccount__2D-uA",signingAccountNetwork:"SignMessage_signingAccountNetwork__3dOJ5",icon:"SignMessage_icon__1Mive",requestMessage:"SignMessage_requestMessage__2KE1p",dappMessage:"SignMessage_dappMessage__2lOnt",dapp:"SignMessage_dapp__1UufH",warning:"SignMessage_warning__3kbj1",signMessage:"SignMessage_signMessage__JdYru",actions:"SignMessage_actions__3xogp",buttons:"SignMessage_buttons__3B_BQ",loading:"SignMessage_loading__2OWC3",reject:"SignMessage_reject__3jwDH"}},1656:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return D}));var r=t(7),s=t(3),a=t.n(s),i=t(12),c=t(9),o=t(15),u=t(889),d=t(107),l=t(20),g=t(2),p=t(1559),f=t(147),b=t(74),h=t(50),j=t(217);function v(e){return Object(l.isHexString)(e)?Object(l.arrayify)(e):Object(l.toUtf8Bytes)(e)}var x=function(e){var n,t,r=e.fetch,s=e.account,x=e.everythingToSign,m=e.relayerURL,O=e.addToast,y=e.resolve,w=e.onConfirmationCodeRequired,k=e.onLastMessageSign,S=e.getHardwareWallet,_=e.useStorage,M=Object(g.useState)(!1),A=Object(c.a)(M,2),N=A[0],T=A[1],E=Object(g.useState)(null),I=Object(c.a)(E,2),P=I[0],D=I[1],C=Object(g.useState)(null),q=Object(c.a)(C,2),L=q[0],R=q[1],U=Object(g.useState)(null),J=Object(c.a)(U,2),H=J[0],W=J[1],z=Object(g.useState)(null),G=Object(c.a)(z,2),V=G[0],B=G[1],Y=Object(g.useMemo)((function(){return x[0]||{}}),[x]),F=_({key:"signedMessages",defaultValue:[]}),K=Object(c.a)(F,2),Q=K[0],X=K[1],Z=Y.dapp,$=Y.chainId,ee=-1!==["eth_signTypedData_v4","eth_signTypedData"].indexOf(null===Y||void 0===Y?void 0:Y.type);if(ee){t=Y.txn;try{t.startsWith("{")&&(t=JSON.parse(Y.txn))}catch(he){t=Y.txn}if("object"===typeof t&&null!==t)try{var ne,te,re,se,ae,ie,ce,oe;if(null===(ne=t)||void 0===ne||null===(te=ne.types)||void 0===te?void 0:te.EIP712Domain)null===(ie=t)||void 0===ie||(null===(ce=ie.types)||void 0===ce||delete ce.EIP712Domain);if(l._TypedDataEncoder.hash(null===(re=t)||void 0===re?void 0:re.domain,t.types,null===(se=t)||void 0===se?void 0:se.message),null===(ae=t.domain)||void 0===ae?void 0:ae.chainId)$=null===(oe=t.domain)||void 0===oe?void 0:oe.chainId}catch(je){n=".txn has Invalid TypedData object. Should be {domain, types, message}"}else n=".txn should be a TypedData object"}var ue,de=(ue=$)?h.b.find((function(e){return e.chainId===parseInt(ue.toString(),10)})):null,le=Object(g.useCallback)(Object(i.a)(a.a.mark((function e(){var n,t,i,c,o,d,g,p,h,v,x,m,O,y;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(de){e.next=2;break}return e.abrupt("return");case 2:return i=new u.Bundle({network:null===de||void 0===de?void 0:de.id,identity:null===s||void 0===s?void 0:s.id,signer:null===s||void 0===s?void 0:s.signer}),e.next=5,Object(j.a)(null===de||void 0===de?void 0:de.id);case 5:c=e.sent,(null===s||void 0===s||null===(n=s.signer)||void 0===n?void 0:n.quickAccManager)?(v=f.a.quickAccTimelock,x=[v,null===s||void 0===s||null===(g=s.signer)||void 0===g?void 0:g.one,null===s||void 0===s||null===(p=s.signer)||void 0===p?void 0:p.two],m=new l.AbiCoder,d=Object(l.keccak256)(m.encode(["tuple(uint, address, address)"],[x])),o=null===(h=s.signer)||void 0===h?void 0:h.quickAccManager):o=null===(O=s.signer)||void 0===O?void 0:O.address,y={method:"eth_call",params:[{to:i.identity,data:"0xc066a5b1000000000000000000000000".concat(o.toLowerCase().substring(2))},"latest"],id:1,jsonrpc:"2.0"},Object(b.b)(r,null===c||void 0===c||null===(t=c.connection)||void 0===t?void 0:t.url,y).then((function(e){var n;e.result&&"0x"!==e.result?(D(!0),(null===s||void 0===s||null===(n=s.signer)||void 0===n?void 0:n.quickAccManager)?R(e.result===d):"0x0000000000000000000000000000000000000000000000000000000000000001"===e.result?R(!0):R(!1)):D(!1)})).catch((function(e){W(e.message)}));case 9:case"end":return e.stop()}}),e)}))),[s,de,r]);Object(g.useEffect)((function(){le()}),[le]);var ge=Object(g.useCallback)((function(e){var n;e&&e.message.includes("must provide an Ethereum address")?O("Signing error: not connected with the correct address. Make sure you're connected with ".concat(null===(n=s.signer)||void 0===n?void 0:n.address,"."),{error:!0}):O("Signing error: ".concat(e.message||e),{error:!0})}),[s,O]),pe=Object(g.useCallback)((function(e,n,r){var a=Object(j.a)(r);return Object(p.verifyMessage)({provider:a,signer:s.id,message:ee?null:v(e.txn),typedData:ee?t:null,signature:n}).then((function(n){n?O("".concat(e.type," SIGNATURE VALID")):O("".concat(e.type," SIGNATURE INVALID"),{error:!0})})).catch((function(n){O("".concat(e.type," SIGNATURE INVALID: ").concat(n.message),{error:!0})}))}),[s,O,t,ee]),fe=Object(g.useCallback)(function(){var e=Object(i.a)(a.a.mark((function e(n){var i,c,l,g,p,f,h,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=3;break}return O("Email/pass accounts not supported without a relayer connection",{error:!0}),e.abrupt("return");case 3:if(n.password){e.next=6;break}return O("Password required to unlock the account",{error:!0}),e.abrupt("return");case 6:return T(!0),e.prev=7,e.next=10,Object(b.b)(r,"".concat(m,"/second-key/").concat(s.id,"/ethereum/sign").concat(ee?"?typedData=true":""),{toSign:Y.txn,code:(null===(i=n.code)||void 0===i?void 0:i.length)?n.code:void 0});case 10:if(c=e.sent,l=c.signature,g=c.success,p=c.message,f=c.confCodeRequired,g){e.next=24;break}if(T(!1),p){e.next=19;break}throw new Error("Secondary key: no success but no error message");case 19:return p.includes("invalid confirmation code")&&O("Unable to sign: wrong confirmation code",{error:!0}),O("Second signature error: ".concat(p),{error:!0}),B(null),T(!1),e.abrupt("return");case 24:if(!f){e.next=31;break}if(B(f),!w){e.next=29;break}return e.next=29,w(f,fe);case 29:return T(!1),e.abrupt("return");case 31:if(s.primaryKeyBackup){e.next=33;break}throw new Error("No key backup found: you need to import the account from JSON or login again.");case 33:return e.next=35,d.Wallet.fromEncryptedJson(JSON.parse(s.primaryKeyBackup),n.password);case 35:return h=e.sent,e.next=38,ee?Object(u.signMessage712)(h,s.id,s.signer,t.domain,t.types,t.message,l):Object(u.signMessage)(h,s.id,s.signer,v(Y.txn),l);case 38:return j=e.sent,e.next=41,pe(Y,j,null===de||void 0===de?void 0:de.id);case 41:O("Successfully signed!"),X([].concat(Object(o.a)(Q),[{accountId:s.id,networkId:$,date:(new Date).getTime(),typed:ee,signer:s.signer,message:Y.txn,signature:j,dApp:Z}])),1===x.length&&k&&k(),y({success:!0,result:j}),e.next=50;break;case 47:e.prev=47,e.t0=e.catch(7),ge(e.t0);case 50:T(!1);case 51:case"end":return e.stop()}}),e,null,[[7,47]])})));return function(n){return e.apply(this,arguments)}}(),[s,O,t,x,r,ge,ee,w,k,m,de,y,Y,pe,Z,$,X,Q]),be=Object(g.useCallback)(function(){var e=Object(i.a)(a.a.mark((function e(n,r){var i,c,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(i=s.signer)||void 0===i?void 0:i.quickAccManager)){e.next=4;break}return e.next=3,fe(n);case 3:return e.abrupt("return");case 4:return T(!0),e.prev=5,e.next=8,S(r);case 8:if(c=e.sent){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,ee?Object(u.signMessage712)(c,s.id,s.signer,t.domain,t.types,t.message):Object(u.signMessage)(c,s.id,s.signer,v(Y.txn));case 13:return d=e.sent,e.next=16,pe(Y,d,null===de||void 0===de?void 0:de.id);case 16:O("Successfully signed!"),X([].concat(Object(o.a)(Q),[{accountId:s.id,networkId:$,date:(new Date).getTime(),typed:ee,signer:s.signer,message:Y.txn,signature:d,dApp:Z}])),y({success:!0,result:d}),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),ge(e.t0);case 24:T(!1);case 25:case"end":return e.stop()}}),e,null,[[5,21]])})));return function(n,t){return e.apply(this,arguments)}}(),[s,O,fe,t,S,ge,null===de||void 0===de?void 0:de.id,y,Y,ee,pe,Q,X,Z,$]);return{approve:be,approveQuickAcc:fe,toSign:Y,isLoading:N,hasPrivileges:L,hasProviderError:H,typeDataErr:n,isDeployed:P,dataV4:t,requestedNetwork:de,requestedChainId:$,isTypedData:ee,confirmationType:V,verifySignature:pe,dApp:Z}},m=x,O=["https://snapshot.org","https://guild.xyz","https://sudoswap.xyz","https://sigtool.ambire.com/","https://app.swappin.gifts","https://app.swappin.gifts/ref/ambire"],y=t(1560),w=t.n(y),k=t(52),S=t(216),_=t(528),M=t(46),A=t(85),N=t(58),T=t(27),E=t.n(T),I=t(221),P=t(4);function D(e){var n=e.everythingToSign,t=e.resolve,s=e.account,o=e.relayerURL,u=e.totalRequests,d=Object(M.a)().addToast,l=Object(g.useState)({codeRequired:!1,passphrase:""}),p=Object(c.a)(l,2),f=p[0],b=p[1],h=Object(g.useState)(null),j=Object(c.a)(h,2),v=j[0],x=j[1],y=Object(g.useRef)(null),T=function(){var e=Object(i.a)(a.a.mark((function e(n,t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){x((function(){return e}))}));case 2:if(r=e.sent){e.next=5;break}throw new Error("You must enter a confirmation code");case 5:return e.next=7,t({password:f.passphrase,code:r});case 7:return e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),D=m({fetch:fetch,account:s,everythingToSign:n,relayerURL:o,addToast:d,resolve:t,onConfirmationCodeRequired:T,getHardwareWallet:function(){return Object(_.a)({signer:s.signer,signerExtra:s.signerExtra,chainId:1})},useStorage:I.a}),q=D.approve,L=D.toSign,R=D.isLoading,U=D.hasPrivileges,J=D.hasProviderError,H=D.typeDataErr,W=D.isDeployed,z=D.dataV4,G=D.requestedNetwork,V=D.requestedChainId,B=D.isTypedData,Y=D.confirmationType,F=D.dApp,K=F&&(O.includes(F.url)||O.includes(F.url+"/"));if(Object(g.useEffect)((function(){Y&&y.current.focus()}),[Y]),!L||!s)return Object(P.jsx)(P.Fragment,{});if(!G)return Object(P.jsxs)("div",{className:w.a.wrapper,children:[Object(P.jsxs)("h3",{className:"error",children:["Inexistant network for chainId : ",V]}),Object(P.jsx)(A.e,{className:w.a.reject,onClick:function(){return t({message:"signature denied"})},children:"Reject"})]});if(H)return Object(P.jsxs)("div",{className:w.a.wrapper,children:[Object(P.jsxs)("h3",{className:"error",children:["Invalid signing request: ",H]}),Object(P.jsx)(A.e,{className:w.a.reject,onClick:function(){return t({message:"signature denied"})},children:"Reject"})]});var Q=N.b[G.id];return Object(P.jsxs)("div",{className:w.a.wrapper,children:[Object(P.jsx)(A.s,{title:"Signing with account",className:w.a.panel,children:Object(P.jsxs)("div",{className:w.a.signingAccountContent,children:[Object(P.jsxs)("div",{className:w.a.signingAccountAccount,children:[Object(P.jsx)("img",{className:w.a.icon,src:S.create({seed:s.id}).toDataURL(),alt:"Account Icon"}),s.id]}),Object(P.jsxs)("div",{className:w.a.signingAccountNetwork,children:["on",Object(P.jsx)("div",{className:w.a.icon,style:{backgroundImage:"url(".concat(Q,")")}}),Object(P.jsx)("div",{className:"address",children:G.name})]})]})}),Object(P.jsxs)(A.s,{className:w.a.panel,children:[Object(P.jsxs)("div",{className:E()(w.a.title,w.a.signMessageTitle),children:[Object(P.jsx)("span",{className:w.a.signMessageTitleTitle,children:"Sign message"}),Object(P.jsx)("span",{className:w.a.signMessageTitleSignatureType,children:Object(P.jsxs)(A.B,{label:"".concat(B?"An EIP-712 typed data signature has been requested":"An ethSign ethereum signature type has been requested"),children:[Object(P.jsx)(k.o,{})," ",Object(P.jsx)("span",{children:B?"EIP-712 type":"standard type"})]})})]}),Object(P.jsxs)("div",{className:w.a.requestMessage,children:[Object(P.jsxs)("div",{className:w.a.dappMessage,children:[F?Object(P.jsxs)("a",{className:w.a.dapp,href:F.url,target:"_blank",rel:"noreferrer",children:[Object(P.jsx)("div",{className:w.a.icon,style:{backgroundImage:"url(".concat(F.icons?F.icons[0]:"none",")")},children:Object(P.jsx)(k.a,{})}),F.name]}):"A dApp ","is requesting your signature."]}),Object(P.jsx)("span",{children:u>1?"You have ".concat(u-1," more pending requests."):""}),!K&&Object(P.jsx)(A.i,{})]}),Object(P.jsx)("textarea",{className:w.a.signMessage,type:"text",value:z?JSON.stringify(z,"\n"," "):"0x"!==L.txn?C(L.txn):"(Empty message)",readOnly:!0}),Object(P.jsx)("div",{className:w.a.actions,children:Object(P.jsxs)("form",{onSubmit:function(e){e.preventDefault(),q({password:f.passphrase})},children:[s.signer.quickAccManager&&W&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(A.z,{password:!0,required:!0,minLength:3,placeholder:"Account password",value:f.passphrase,onChange:function(e){return b(Object(r.a)(Object(r.a)({},f),{},{passphrase:e}))}}),Object(P.jsx)("input",{type:"submit",hidden:!0})]}),Y&&Object(P.jsxs)(P.Fragment,{children:["email"===Y&&Object(P.jsx)("span",{children:"A confirmation code has been sent to your email, it is valid for 3 minutes."}),"otp"===Y&&Object(P.jsx)("span",{children:"Please enter your OTP code"}),Object(P.jsx)(A.z,{ref:y,placeholder:"otp"===Y?"Authenticator OTP code":"Confirmation code",onInput:function(e){var n;6===(n=e).length&&v(n)}})]}),null===W&&!J&&Object(P.jsx)("div",{children:Object(P.jsx)(A.n,{})}),!1===W&&Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{className:"error",children:"You can't sign this message yet."}),Object(P.jsxs)("h3",{className:"error",children:["You need to complete your first transaction on"," ",G.name," network in order to be able to sign messages."]})]}),!1===U&&Object(P.jsx)("div",{children:Object(P.jsx)("h3",{className:"error",children:"The currently used signer is not authorized to control this account and therefore you cannot sign messages."})}),J&&Object(P.jsx)("div",{children:Object(P.jsxs)("h3",{className:"error",children:["There was an issue with the network provider:"," ",J]})}),Object(P.jsxs)("div",{className:w.a.buttons,children:[Object(P.jsx)(A.e,{type:"button",danger:!0,icon:Object(P.jsx)(k.f,{}),className:w.a.reject,onClick:function(){return t({message:"signature denied"})},children:"Reject"}),null!==W&&W&&U&&Object(P.jsx)(A.e,{type:"submit",disabled:R,children:R?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(A.n,{}),"Signing..."]}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(k.d,{})," Sign"]})})]})]})})]})]})}function C(e){if(Object(l.isHexString)(e))try{return Object(l.toUtf8String)(e)}catch(n){return e}return(null===e||void 0===e?void 0:e.toString)?e.toString():e+""}},526:function(e,n,t){"use strict";t.d(n,"c",(function(){return p})),t.d(n,"a",(function(){return f})),t.d(n,"d",(function(){return b})),t.d(n,"b",(function(){return h})),t.d(n,"e",(function(){return j})),t.d(n,"f",(function(){return v})),t.d(n,"g",(function(){return x}));var r=t(7),s=t(3),a=t.n(s),i=t(12),c=t(555),o=t(62),u=t(536),d=t(523),l=2147483648,g={startPath:[2147483692,2147483708,l,0,0],n:10},p=function(e){var n={name:"Ambire Wallet",crypto:d,privKey:e};return new c.Client(n)},f=function(){var e=Object(i.a)(a.a.mark((function e(n,t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){n.connect(t,(function(n,t){n?r("Lattice connect: ".concat(n," Or check if the DeviceID is correct.")):e({isPaired:!!t,errConnect:!1})}))})).catch((function(e){return console.error(e),{isPaired:!1,errConnect:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(a.a.mark((function e(n,t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){n.pair(t,(function(n,t){n?r("Lattice connect: ".concat(n)):e({hasActiveWallet:t,errPair:!1})}))})).catch((function(e){return console.error(e),{hasActiveWallet:!1,errPair:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){n.getAddresses(g,(function(n,r){if(n)t("Lattice get addresses: ".concat(n));else{if(!r)throw new Error("Lattice could not get the addresses.");e({res:r,errGetAddresses:!1})}}))})).catch((function(e){return console.error(e),{res:null,errGetAddresses:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(a.a.mark((function e(n,t){var r,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={protocol:"signPersonal",payload:o.ethers.utils.hexlify(t),signerPath:[2147483692,2147483708,l,0,0]},s={currency:"ETH_MSG",data:r},e.next=4,new Promise((function(e,t){n.sign(s,(function(n,r){if(n)t(n);else{if(!r)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+r.sig.r+r.sig.s+r.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(a.a.mark((function e(n,t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={currency:"ETH_MSG",data:{signerPath:[2147483692,2147483708,l,0,0],protocol:"eip712",payload:t}},e.next=3,new Promise((function(e,t){n.sign(r,(function(n,r){if(n)t(n);else{if(!r)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+r.sig.r+r.sig.s+r.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(a.a.mark((function e(n,t,s){var i,c,o,d,g,p,f,b,h,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.to,c=t.data,o=t.gas,d=t.gasPrice,g=t.nonce,p=t.value,f=void 0===p?0:p,delete(b=Object(r.a)(Object(r.a)({},t),{},{gasLimit:t.gasLimit||t.gas,chainId:s})).from,delete b.gas,h={nonce:g,gasLimit:o||t.gasLimit,gasPrice:d,to:i,value:f,data:c||"",signerPath:[2147483692,2147483708,l,0,0],chainId:s,useEIP155:!0},j={currency:"ETH",data:h},e.next=8,new Promise((function(e,t){n.sign(j,(function(n,r){if(n)t(n);else{if(!r)throw new Error("Lattice could not sign the message.");delete b.v;var s=Object(u.a)(b,{r:"0x"+r.sig.r,s:"0x"+r.sig.s,v:r.sig.v[0].toString(16)});e({serializedSigned:s,errSignTxn:!1})}}))})).catch((function(e){return console.error(e),{serializedSigned:null,errSignTxn:e}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()},624:function(e,n){},625:function(e,n){},626:function(e,n){},627:function(e,n){},629:function(e,n){},630:function(e,n){},631:function(e,n){},644:function(e,n){}}]);
//# sourceMappingURL=21.75de918d.chunk.js.map