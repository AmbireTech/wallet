(this["webpackJsonpambire-wallet"]=this["webpackJsonpambire-wallet"]||[]).push([[18],{1546:function(e,t,n){},1547:function(e,t,n){},1548:function(e,t,n){},1625:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),r=n(11),c=n(7),o=(n(1546),n(152)),i=n(229),u=n(37),d=n(30),l=n(3),b=n(55),m=n(21),f=n(44),p=n(78),j=n(693),v=n(237),h=n(92),O=(n(1547),n(310)),g=n(8),y=(n(1548),n(34)),x=n(238),w=n(4),k=function(e){var t=e.title,n=e.inputs,a=e.selectedNetwork,o=e.onClose,i=Object(y.f)().hideModal,d=Object(l.useState)(!0),b=Object(c.a)(d,2),m=b[0],f=b[1],j=Object(l.useState)(""),h=Object(c.a)(j,2),O=h[0],k=h[1],A=Object(l.useState)(""),T=Object(c.a)(A,2),S=T[0],N=T[1],C=Object(l.useRef)(null),_=Object(l.useMemo)((function(){return n.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{ref:Object(l.createRef)()})}))}),[n]),L=function(){var e=Object(r.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)(t,null,a.unstoppableDomainsChain);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){C.current&&clearTimeout(C.current);var e=function(){var e=Object(r.a)(s.a.mark((function e(){var t,n,a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_.find((function(e){return"address"===e.inputType})),n=t&&t.ref&&t.ref.current.value){e.next=4;break}return e.abrupt("return");case 4:if(a=null,r=null,!t){e.next=15;break}return e.next=9,L(n);case 9:return a=e.sent,e.next=12,Object(x.b)(n);case 12:r=e.sent,C.current=null,a?k(a):r&&N(r);case 15:c=_.map((function(e){var t=e.ref,n=e.validate,s="address"===e.inputType,c=s&&a?a:s&&r?r:t.current.value;return n?n(c):!!c})).every((function(e){return!0===e})),f(!c);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();C.current=setTimeout(Object(r.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e().catch(console.error));case 1:case"end":return t.stop()}}),t)}))),500)},U=Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(p.e,{clear:!0,small:!0,icon:Object(w.jsx)(u.i,{}),onClick:i,children:"Cancel"}),Object(w.jsx)(p.e,{small:!0,icon:Object(w.jsx)(u.g,{}),disabled:m,onClick:function(){var e=_.map((function(e){return e.ref.current.value}));O?e.push({type:"ud"}):S?e.push({type:"ens"}):e.push({type:"pub"}),o&&o(e),i()},children:"Confirm"})]});return Object(w.jsx)(p.n,{id:"input-modal",title:t,buttons:U,children:_.map((function(e){var t=e.id,n=e.label,a=e.placeholder,s=e.ref,r=e.type;return Object(w.jsxs)("div",{children:[Object(w.jsx)(p.w,{label:n,placeholder:a,onInput:F,ref:s}),"address"===r&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(p.y,{label:O?"Valid Unstoppable domains\u24c7 domain":"You can use Unstoppable domains\u24c7",children:Object(w.jsx)("span",{id:"udomains-logo",className:O?"ud-logo-active ":""})}),Object(w.jsx)(p.y,{label:S?"Valid Ethereum Name Services\u24c7 domain":"You can use Ethereum Name Service\u24c7",children:Object(w.jsx)("div",{id:"ens-logo",className:S?"ens-logo-active ":""})})]})]},t+n)}))})},A=function(e){var t=e.addresses,n=e.addAddress,a=e.removeAddress,s=e.onSelectAddress,r=e.selectedNetwork,o=Object(y.f)().showModal,i=[{inputType:"name",label:"Name",placeholder:"Address title"},{inputType:"address",label:"Address / Unstoppable domains\u24c7 / ENS\u24c7",placeholder:"Address / Unstoppable Domains / ENS",validate:function(e){return Object(h.b)(e)}}],d=Object(w.jsx)(k,{title:"Add New Address",selectedNetwork:r,inputs:i,onClose:function(e){var t=Object(c.a)(e,3),a=t[0],s=t[1],r=t[2];return n(a,s,r)}});return Object(w.jsxs)("div",{id:"addresses",className:"panel",children:[Object(w.jsx)("div",{className:"title",children:"Address Book"}),Object(w.jsx)("div",{className:"content",children:Object(w.jsx)(O.a,{noAccounts:!0,addresses:t,removeAddress:a,onSelectAddress:s})}),Object(w.jsx)("div",{className:"separator"}),Object(w.jsx)(p.e,{icon:Object(w.jsx)(u.C,{}),onClick:function(){return o(d)},children:"Add Address"})]})},T=n(60),S=n(595),N=n(605),C=n(151),_=n(815),L=new m.Interface(n(602)),F=["Binance","Huobi","KuCoin","Gate.io","FTX"];t.default=Object(d.withRouter)((function(e){var t,n=e.history,a=e.portfolio,m=e.selectedAcc,O=e.selectedNetwork,g=e.addRequest,k=e.addressBook,U=e.relayerURL,M=k.addresses,I=k.addAddress,D=k.removeAddress,R=k.isKnownAddress,E=Object(_.a)({relayerURL:U,selectedAcc:m,network:O,portfolio:a,useRelayerData:y.j}).feeAssetsRes,B=E&&E.length&&E.filter((function(e){return e.network===O.id&&!e.disableGasTankDeposit})),Y=Object(d.useParams)().tokenAddressOrSymbol,G=Object(f.a)().addToast,J=Object(d.useLocation)().state,P=Object(l.useState)(J||null),V=Object(c.a)(P,1)[0],z=Object(h.b)(Y)?Y:(null===(t=a.tokens.find((function(e){return e.symbol===Y})))||void 0===t?void 0:t.address)||null,K=Object(l.useState)(z),W=Object(c.a)(K,2),X=W[0],H=W[1],q=Object(l.useState)(0),$=Object(c.a)(q,2),Q=$[0],Z=$[1],ee=Object(l.useState)(""),te=Object(c.a)(ee,2),ne=te[0],ae=te[1],se=Object(l.useState)(V?C.a.feeCollector:""),re=Object(c.a)(se,2),ce=re[0],oe=re[1],ie=Object(l.useState)(""),ue=Object(c.a)(ie,2),de=ue[0],le=ue[1],be=Object(l.useState)(""),me=Object(c.a)(be,2),fe=me[0],pe=me[1],je=Object(l.useState)(!0),ve=Object(c.a)(je,2),he=ve[0],Oe=ve[1],ge=Object(l.useState)(!1),ye=Object(c.a)(ge,2),xe=ye[0],we=ye[1],ke=Object(l.useState)(!1),Ae=Object(c.a)(ke,2),Te=Ae[0],Se=Ae[1],Ne=Object(l.useState)(""),Ce=Object(c.a)(Ne,2),_e=Ce[0],Le=Ce[1],Fe=Object(l.useState)({success:{amount:!1,address:!1},messages:{amount:"",address:""}}),Ue=Object(c.a)(Fe,2),Me=Ue[0],Ie=Ue[1],De=Object(l.useState)(""),Re=Object(c.a)(De,2),Ee=Re[0],Be=Re[1],Ye=Object(l.useRef)(null),Ge=((null===V||void 0===V?void 0:V.isTopUp)?a.tokens.filter((function(e){return B&&(null===B||void 0===B?void 0:B.some((function(t){return t.address.toLowerCase()===e.address.toLowerCase()})))})):a.tokens).map((function(e){var t=e.label,n=e.symbol,a=e.address,s=e.img,r=e.tokenImageUrl,c=e.network;return{label:t||n,value:a,icon:s||r,fallbackIcon:Object(S.a)(c,a)}})),Je=a.tokens.find((function(e){return e.address===X})),Pe=Object(l.useMemo)((function(){if(!Je)return{maxAmount:"0",maxAmountFormatted:"0.00"};var e=Je.balanceRaw,t=Je.decimals,n=Je.balance;return{maxAmount:b.ethers.utils.formatUnits(e,t),maxAmountFormatted:Object(N.a)(n,!0,t)}}),[Je]),Ve=Pe.maxAmount,ze=Pe.maxAmountFormatted,Ke=Object(l.useMemo)((function(){return!V&&0===Number(z)&&T.a.map((function(e){return e.id})).filter((function(e){return"ethereum"!==e})).includes(O.id)}),[V,z,O.id]),We=function(e){if(e){var t=Je.decimals,n=b.ethers.utils.parseUnits(e,t).toHexString();ae(n)}Z(e)};Object(l.useEffect)((function(){if(Be(""),null===V||void 0===V?void 0:V.isTopUp){var e=B&&B.find((function(e){var t,n;return(null===e||void 0===e||null===(t=e.address)||void 0===t?void 0:t.toLowerCase())===(null===Je||void 0===Je||null===(n=Je.address)||void 0===n?void 0:n.toLowerCase())}));if(null===e||void 0===e?void 0:e.baseToken){var t=B&&B.find((function(t){return t.address.toLowerCase()===e.baseToken.toLowerCase()}));Be("Token ".concat(e.symbol.toUpperCase()," will be converted to ").concat(t.symbol.toUpperCase()," without additional fees."))}}}),[B,null===V||void 0===V?void 0:V.isTopUp,Je]),Object(l.useEffect)((function(){Z(0),ae(""),Se(!1)}),[X,O.id]),Object(l.useEffect)((function(){Je&&n.replace({pathname:"/wallet/transfer/".concat(0!==Number(X)?X:Je.symbol)})}),[X,n,Je]),Object(l.useEffect)((function(){var e=Object(j.d)(Q,Je);if(ce.startsWith("0x")&&-1===ce.indexOf(".")){""!==de&&le(""),""!==fe&&pe("");var t=Object(j.c)(ce,m,xe,R);Ie({success:{amount:e.success,address:t.success},messages:{amount:e.message?e.message:"",address:t.message?t.message:""}}),Oe(!t.success||!e.success||Ke&&!Te)}else{Ye.current&&clearTimeout(Ye.current);var n=function(){var t=Object(r.a)(s.a.mark((function t(){var n,a,r,c,o,i,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(v.a)(ce,Je?Je.symbol:null,O.unstoppableDomainsChain);case 2:return n=t.sent,a=Object(x.a)(Je?Je.symbol:null),t.next=6,Object(x.b)(ce,a);case 6:r=t.sent,Ye.current=null,c=!!n,i="",i=(o=!!r)?r:c?n:ce,u=Object(j.c)(i,m,xe,R,c,o),le(n),pe(r),Ie({success:{amount:e.success,address:u.success},messages:{amount:e.message?e.message:"",address:u.message?u.message:""}}),Oe(!u.success||!e.success||Ke&&!Te);case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Ye.current=setTimeout(Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n().catch(console.error));case 1:case"end":return e.stop()}}),e)}))),300)}return function(){return clearTimeout(Ye.current)}}),[ce,Q,m,Je,xe,Ke,Te,R,G,O,I,de,he,fe]);var Xe=Object(w.jsxs)("div",{className:"amount-label",children:["Available Amount: ",Object(w.jsxs)("span",{children:[ze," ",null===Je||void 0===Je?void 0:Je.symbol]})]});return Object(w.jsxs)("div",{id:"transfer",style:{justifyContent:V?"center":""},children:[Object(w.jsxs)("div",{className:"panel",children:[Object(w.jsx)("div",{className:"title",children:"Send"}),a.isCurrNetworkBalanceLoading?Object(w.jsx)(p.m,{}):Ge.length?Object(w.jsxs)("div",{className:"form",children:[Object(w.jsx)(p.t,{searchable:!0,defaultValue:X,items:Ge.sort((function(e,t){return e.label.toLowerCase()>t.label.toLowerCase()?1:-1})),onChange:function(e){var t=e.value;return H(t)}}),Ee?Object(w.jsxs)("p",{className:"gas-tank-convert-msg",children:[Object(w.jsx)(u.db,{})," ",Ee]}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)(p.p,{label:Xe,value:Q,precision:null===Je||void 0===Je?void 0:Je.decimals,onInput:We,button:"MAX",onButtonClick:function(){return We(Ve)}}),Me.messages.amount&&Object(w.jsxs)("div",{className:"validation-error",children:[Object(w.jsx)(o.p,{size:12}),"\xa0",Me.messages.amount]}),V?Object(w.jsxs)("p",{className:"gas-tank-msg",children:[Object(w.jsx)(u.db,{})," ",null===V||void 0===V?void 0:V.gasTankMsg]}):Object(w.jsxs)("div",{id:"recipient-field",children:[Object(w.jsx)(p.w,{placeholder:"Recipient",info:"Please double-check the recipient address, blockchain transactions are not reversible.",value:ce,onInput:oe}),Object(w.jsx)(p.y,{label:fe?"Valid Ethereum Name Services\u24c7 domain":"You can use Ethereum Name Service\u24c7",children:Object(w.jsx)("div",{id:"ens-logo",className:fe?"ens-logo-active ":""})}),Object(w.jsx)(p.y,{label:de?"Valid Unstoppable domains\u24c7 domain":"You can use Unstoppable domains\u24c7",children:Object(w.jsx)("div",{id:"udomains-logo",className:de?"ud-logo-active ":""})}),Object(w.jsx)(p.a,{addresses:M.filter((function(e){return e.address!==m})),addAddress:I,removeAddress:D,newAddress:_e,onClose:function(){return Le(null)},onSelectAddress:function(e){return oe(e)},selectedNetwork:O})]}),Me.messages.address&&Object(w.jsxs)("div",{className:"validation-error",children:[Object(w.jsx)(o.p,{size:12}),"\xa0",Me.messages.address]}),Object(w.jsx)("div",{className:"separator"}),Object(w.jsx)(p.b,{address:ce,onAddNewAddress:function(){return Le(ce)},onChange:function(e){return we(e)},isKnownAddress:R,uDAddress:de,ensAddress:fe}),Ke?Object(w.jsx)(p.g,{id:"binance-address-warning",label:Object(w.jsxs)("span",{id:"binance-address-warning-label",children:["I confirm this address is not a ",F.join(" / ")," address: ",Object(w.jsx)("br",{}),"These platforms do not support $",null===Je||void 0===Je?void 0:Je.symbol," deposits from smart wallets",Object(w.jsx)("a",{href:"https://help.ambire.com/hc/en-us/articles/4415473743506-Statement-on-MATIC-BNB-deposits-to-Binance",target:"_blank",rel:"noreferrer",children:Object(w.jsx)(u.u,{size:20})})]}),checked:Te,onChange:function(e){var t=e.target;return Se(t.checked)}}):null,Object(w.jsx)(p.e,{icon:Object(w.jsx)(i.i,{}),disabled:he,onClick:function(){var e=de||(fe||ce);if(ne)try{var t={to:Je.address,value:"0",data:L.encodeFunctionData("transfer",[e,ne])};0===Number(Je.address)&&(t.to=e,t.value=ne,t.data="0x");var n={id:"transfer_".concat(Date.now()),type:"eth_sendTransaction",chainId:O.chainId,account:m,txn:t,meta:null};de?n.meta={addressLabel:{addressLabel:ce,address:de}}:fe&&(n.meta={addressLabel:{addressLabel:ce,address:fe}}),g(n),Z(0)}catch(a){console.error(a),G("Error: ".concat(a.message||a),{error:!0})}},children:"Send"})]}):Object(w.jsx)(p.o,{})]}),!V&&Object(w.jsx)(A,{selectedAsset:Je,selectedNetwork:O,addresses:M,addAddress:I,removeAddress:D,onSelectAddress:function(e){return oe(e)}})]})}))},595:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a={"0xb468a1e5596cfbcdf561f21a10490d99b4bb7b68":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg/220px-Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg","0x88800092ff476844f74dc2fc427974bbee2794ae":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/ambire_logo_white_bg_250x250.png","0x47cd7e91c3cbaaf266369fe8518345fc4fc12935":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png","0xb6456b57f03352be48bf101b46c1752a0813491a":"https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/vaporwave-adex-2.png","0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c":"https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/ADX-loyalty%40256x256.png","0xec3b10ce9cabab5dbf49f946a623e294963fbb4e":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png","0xe9415e904143e42007865e6864f7f632bd054a08":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/Ambire_logo_250x250.png","0xade00c28244d5ce17d72e40330b1c318cd12b7c3":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/official-logos/Ambire-AdEx/Ambire_AdEx_Symbol_color_white_bg.png"},s="https://storage.googleapis.com/zapper-fi-assets/tokens";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.toLowerCase(),r=e.toLowerCase();return a[n]||"".concat(s,"/").concat(r,"/").concat(n,".png")}},602:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},605:function(e,t,n){"use strict";function a(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18;if(isNaN(e)||isNaN(parseFloat(e))||"number"!==typeof e&&"string"!==typeof e)return e;try{var a=Math.min(2,n||0);return("number"===typeof e?e:parseFloat(e)).toLocaleString(void 0,{useGrouping:t,maximumFractionDigits:Math.max(a,n),minimumFractionDigits:a})}catch(s){return console.error(s),e}}n.d(t,"a",(function(){return a}))},647:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(108);function s(e,t){if(null==e)return{};var n,s,r=Object(a.a)(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)n=c[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}},693:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return u}));var a=n(21),s=n(92),r=n(151),c=function(e){return e&&e.length?e&&Object(s.b)(e)?{success:!0}:{success:!1,message:"Invalid address."}:{success:!1,message:""}},o=function(e,t){var n=c(e);return n.success?e&&t&&e===t?{success:!1,message:"The entered address should be different than the your own account address."}:{success:!0}:n},i=function(e,t,n,a,o,i){var u=c(e);return u.success?e&&e===r.a.feeCollector?{success:!0}:e&&t&&e===t?{success:!1,message:"The entered address should be different than the your own account address."}:e&&Object(s.a)(e)?{success:!1,message:"You are trying to send tokens to a smart contract. Doing so would burn them."}:!e||a(e)||n||o||i?!e||a(e)||n||!o&&!i?{success:!0}:{success:!1,message:"You're trying to send to an ".concat(o?"Unstoppable domain":"Ethereum Name Service",". If you really trust to the person who gave you, confirm using the checkbox below.")}:{success:!1,message:"You're trying to send to an unknown address. If you're really sure, confirm using the checkbox below."}:u},u=function(e,t){if(!e||!e.length)return{success:!1,message:""};if(!(e&&e>0))return{success:!1,message:"The amount must be greater than 0."};try{if(e&&t&&t.decimals){var n=e.slice(0,e.indexOf(".")+t.decimals+1),s=Object(a.parseUnits)(n,t.decimals);if(s&&t.balanceRaw&&s.gt(t.balanceRaw))return{success:!1,message:"The amount is greater than the asset's balance: ".concat(null===t||void 0===t?void 0:t.balance," ").concat(null===t||void 0===t?void 0:t.symbol,".")}}}catch(r){console.error(r)}return{success:!0}},d=function(e,t,n,a,s,r,c,o,u){var d,l=i(e,t,n,a,o,u);return l.success?s&&t&&(null===(d=s.owner)||void 0===d?void 0:d.address.toLowerCase())!==t.toLowerCase()?{success:!1,message:"The NFT you're trying to send is not owned by you!"}:r&&c&&r.id!==c?{success:!1,message:"The selected network is not the correct one."}:{success:!0}:l}},815:function(e,t,n){"use strict";var a=n(8),s=n(21),r=n(3);function c(e){return(null===e||void 0===e?void 0:e.address)&&"0x0000000000000000000000000000000000000000"!==(null===e||void 0===e?void 0:e.address)?3e4:12e3}var o=n(647),i=n(602),u=n(26),d=n(151),l=["txId","txns","submittedAt","gasTankFee","identity"],b=new s.Interface(i),m=b.getSighash(b.getFunction("transfer").format()),f=d.a.feeCollector;function p(e){return e[0]===f||!(!e[2].startsWith(m)||function(e){try{var t=b.decodeFunctionData("transfer",e);return Object(a.a)({value:u.a.from(t._value)},t)}catch(n){return console.error(n),{}}}(e[2])._to!==f)}var j=n(242);t.a=function(e){var t=e.relayerURL,n=e.selectedAcc,i=e.network,d=e.portfolio,v=e.useRelayerData,h=Object(j.a)().cacheBreak,O=d.tokens,g=t?"".concat(t,"/gas-tank/").concat(n,"/getBalance?cacheBreak=").concat(h):null,y=t?"".concat(t,"/gas-tank/assets?cacheBreak=").concat(h):null,x=t?"".concat(t,"/identity/").concat(n,"/").concat(null===i||void 0===i?void 0:i.id,"/transactions"):null,w=v({url:g}),k=w.data,A=w.isLoading,T=v({url:y}).data,S=v({url:x}).data,N=Object(r.useMemo)((function(){return k&&k.length&&k.map((function(e){return e.balanceInUSD})).reduce((function(e,t){return e+t}),0)}),[k]),C=Object(r.useMemo)((function(){return S&&S.txns.length&&S.txns.filter((function(e){return!!e.gasTankFee}))}),[S]),_=Object(r.useMemo)((function(){return T&&T.length&&T.filter((function(e){return e.network===(null===i||void 0===i?void 0:i.id)}))}),[T,null===i||void 0===i?void 0:i.id]),L=S&&S.txns.length&&S.txns,F=Object(r.useMemo)((function(){return L&&L.length&&function(e){var t=[];return e.forEach((function(e){var n=e.txId,s=e.txns,r=e.submittedAt,c=e.gasTankFee,i=e.identity,d=Object(o.a)(e,l),j=s.filter((function(e,t){return p(e)&&(c||t<s.length-1)})).map((function(e){return e[0]===f?Object(a.a)({submittedAt:r,address:"0x0000000000000000000000000000000000000000",value:u.a.from(e[1]),identity:i,txId:n},d):e[2].startsWith(m)&&b.decodeFunctionData("transfer",e[2])._to===f?Object(a.a)({submittedAt:r,address:e[0],value:u.a.from(b.decodeFunctionData("transfer",e[2])._value),identity:i,txId:n},d):null}));j.length&&t.push(j[0])})),t}(L)}),[L]),U=Object(r.useMemo)((function(){return null===_||void 0===_?void 0:_.map((function(e){var t=null===O||void 0===O?void 0:O.find((function(t){return t.address.toLowerCase()===e.address.toLowerCase()}));return t?Object(a.a)(Object(a.a)({},t),{},{tokenImageUrl:e.icon,decimals:e.decimals,symbol:e.symbol,balance:t.balance,disableGasTankDeposit:!!e.disableGasTankDeposit,balanceUSD:parseFloat(t.balance)*parseFloat(_.find((function(e){return e.address.toLowerCase()===t.address.toLowerCase()})).price||0)}):Object(a.a)(Object(a.a)({},e),{},{tokenImageUrl:e.icon,balance:0,balanceUSD:0,decimals:0,address:e.address.toLowerCase(),symbol:e.symbol.toUpperCase()})}))}),[_,O]),M=Object(r.useMemo)((function(){return C&&C.length&&C.map((function(e){var t=T?T.find((function(t){return t.symbol===e.feeToken})):null,n=t?c(t):null;return{saved:n?e.feeInUSDPerGas*n:0,cashback:e.gasTankFee&&e.gasTankFee.cashback?Object(s.formatUnits)(e.gasTankFee.cashback.toString(),null===t||void 0===t?void 0:t.decimals).toString()*(null===t||void 0===t?void 0:t.price):0}}))}),[T,C]);return{balancesRes:k,gasTankBalances:N,isLoading:A,gasTankTxns:C,feeAssetsRes:T,gasTankFilledTxns:F,totalSavedResult:M,availableFeeAssets:U}}}}]);
//# sourceMappingURL=18.d2cad75f.chunk.js.map