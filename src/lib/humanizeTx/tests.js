const contractsManager = require("./contractsManager");

let polygonTxs = [
    //swapExactETHForTokens
    {
        from: "0x5891f2A88311408A52289903df30175885626003",
        to: "0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff",
        data: "0x7ff36ab5000000000000000000000000000000000000000000000018a823de1886a6b9f200000000000000000000000000000000000000000000000000000000000000800000000000000000000000005891f2A88311408A52289903df3017588562600300000000000000000000000000000000000000000000000000000000c31a7c7700000000000000000000000000000000000000000000000000000000000000030000000000000000000000000d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000c2132d05d31c914a87c6611c10748aeb04b58e8f000000000000000000000000229b1b6c23ff8953d663c4cbb519717e323a0a84",
        value: 1e18
    },

    //swapExactETHForTokens
    {
        from: "0x5891f2A88311408A52289903df30175885626003",
        to: "0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff",
        data: "0x7ff36ab5000000000000000000000000000000000000000000000018a823de1886a6b9f20000000000000000000000000000000000000000000000000000000000000080000000000000000000000000a29a414a809e2fe93f7ce2bb746d6449ad577fe900000000000000000000000000000000000000000000000000000000c31a7c7700000000000000000000000000000000000000000000000000000000000000030000000000000000000000000d500b1d8e8ef31e21c99d1db9a6444d3adf1270000000000000000000000000c2132d05d31c914a87c6611c10748aeb04b58e8f000000000000000000000000229b1b6c23ff8953d663c4cbb519717e323a0a84",
        value: 1e18
    },

    //swapExactTokensForETH
    {
        from: "0x5891f2A88311408A52289903df30175885626003",
        to: "0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff",
        data: "0x18cbafe500000000000000000000000000000000000000000000000000040de4b7427fd60000000000000000000000000000000000000000000000002ad4aaa419ed574000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000003707aa64a35fe74dd4a21bdca160071929f6512a00000000000000000000000000000000000000000000000000000000c31ab27e00000000000000000000000000000000000000000000000000000000000000020000000000000000000000007ceb23fd6bc0add59e62ac25578270cff1b9f6190000000000000000000000000d500b1d8e8ef31e21c99d1db9a6444d3adf1270",
    },

    //transfer
    {
        from:"0x5891f2A88311408A52289903df30175885626003",
        to:"0x831753dd7087cac61ab5644b308642cc1c33dc13",
        data:"0xa9059cbb0000000000000000000000004c66edbb7fd0567036482d09640ea55cb205bc0b00000000000000000000000000000000000000000000000098a7d9b8314c0000"
    },

    //approve
    {
        from:"0x5891f2A88311408A52289903df30175885626003",
        to:"0x831753dd7087cac61ab5644b308642cc1c33dc13",
        data:"0x095ea7b3000000000000000000000000a5E0829CaCEd8fFDD4De3c43696c57F7D7A678ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"
    },

    //Valueless tx
    {
        from:"0x5891f2A88311408A52289903df30175885626003",
        to:"0x831753dd7087cac61ab5644b308642cc1c33dc13",
        value:0,
        data:"0x"
    },

    //Deploy contract
    {
        from:"0x5891f2A88311408A52289903df30175885626003",
        value:0,
        data:"0x123132"
    },

    //Self tx
    {
        from:"0x5891f2A88311408A52289903df30175885626003",
        to:"0x5891f2A88311408A52289903df30175885626003",
        value:0,
    },

    //approve on unknown token
    {
        from:"0x5891f2A88311408A52289903df30175885626003",
        to:"0x6af1d9376a7060488558cfb443939ed67bb9b48d",
        data:"0x095ea7b3000000000000000000000000a5E0829CaCEd8fFDD4De3c43696c57F7D7A678ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"
    },

    //Unknown call with send
    {
        from:"0x5891f2A88311408A52289903df30175885626003",
        to:"0x6af1d9376a7060488558cfb443939ed67bb9b48d",
        value:12345678912345123456,
        data:"0x095eb7b3000000000000000000000000a5E0829CaCEd8fFDD4De3c43696c57F7D7A678ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"
    },
];


const ethTxs = [
    //WETH deposit
    {
        from: "0x5891f2A88311408A52289903df30175885626003",
        to: "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",
        value:10**18,
        data: "0xd0e30db0"
    },
    //WETH withdraw
    {
        from: "0x5891f2A88311408A52289903df30175885626003",
        to: "0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2",
        data: "0x2e1a7d4d0000000000000000000000000000000000000000000000000003c9eb8a01c064"
    },

    //UNIV3 Multicall exactOutputSingle
    {
        from: "0x5891f2A88311408A52289903df30175885626003",
        to: "0xe592427a0aece92de3edee1f18e0157c05861564",
        data: "0xac9650d800000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000104db3e219800000000000000000000000070cc41a7ba9101fdf402bc0758b7c40fc704ad05000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000000000000000000000000000000000000000000bb8000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000618fb7440000000000000000000000000000000000000000000000000a3de717043d0000000000000000000000000000000000000000000000000133dc5abccfa15c2eb4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004449404b7c0000000000000000000000000000000000000000000000000a3de717043d0000000000000000000000000000ab6c7040b9c1bc2133081bbe008a740a5ba063d200000000000000000000000000000000000000000000000000000000"
    },


    //UNIV3 Multicall exactOutput?
    /*{
        from: "0x5891f2A88311408A52289903df30175885626003",
        to: "0xe592427a0aece92de3edee1f18e0157c05861564",
        data: "0xac9650d8000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000000c4f3995c67000000000000000000000000a0b86991c6218b36c1d19d4a2e9eb0ce3606eb480000000000000000000000000000000000000000000000000000000b37fe1ef500000000000000000000000000000000000000000000000000000000619021a2000000000000000000000000000000000000000000000000000000000000001b9a804b23d69edd5c296d405776416fc24b580cad608ee458cb5382460cedaab75abc372222defa500c607e665a8d01e475c41dab55fc40ad0e78fcc4137dc604000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000144c04b8d59000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000006160eba83d264b8348f3f4d3a73e37a29affde000000000000000000000000000000000000000000000000000000000061901cf20000000000000000000000000000000000000000000000000000000b37fe1ef500000000000000000000000000000000000000000000006a5d38e665f651daa00000000000000000000000000000000000000000000000000000000000000042a0b86991c6218b36c1d19d4a2e9eb0ce3606eb480001f4c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20027103432b6a60d23ca0dfca7761b7ab56459d9c964d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"
    },*/

    // Masterchef V1 deposit 0/claim
    {
        from: "0x5891f2A88311408A52289903df30175885626003",
        to: "0xc2edad668740f1aa35e4d8f227fb8e17dca888cd",
        data: "0xe2bbb15800000000000000000000000000000000000000000000000000000000000000810000000000000000000000000000000000000000000000000000000000000000"
    },

    // Masterchef V1 withdraw
    {
        from: "0x5891f2A88311408A52289903df30175885626003",
        to: " 0xc2edad668740f1aa35e4d8f227fb8e17dca888cd",
        data: "0x441a3e70000000000000000000000000000000000000000000000000000000000000014e0000000000000000000000000000000000000000000000002f3d6fb43056ce3d"
    },

    // Masterchef V2 deposit
    {
        from: "0x6dc5b0bb5bb3e3972e7b3f23ec1918b4c8450c61",
        to: " 0xef0881ec094552b2e128cf945ef17a6752b4ec5d",
        data: "0x8dbdbe6d0000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000b6432573de457568000000000000000000000000ef6f774dc2ff41db3481e83e1b5abda19d3c4323"
    },

    // Masterchef V2 withdraw
    {
        from: "0x6dc5b0bb5bb3e3972e7b3f23ec1918b4c8450c61",
        to: " 0xef0881ec094552b2e128cf945ef17a6752b4ec5d",
        data: "0x0ad58d2f00000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000002e53e1d37da419290000000000000000000000006dc5b0bb5bb3e3972e7b3f23ec1918b4c8450c61"
    },

    //ERC721 transfer
    {
        from: "0x5891f2A88311408A52289903df30175885626003",
        to: "0x06012c8cf97bead5deae237070f9587f8e7a266d",
        data: "0xa9059cbb00000000000000000000000063760e7c402f64661da16c13c2353c839b210e9300000000000000000000000000000000000000000000000000000000001e8b51"
    },
    //ERC721 transferFrom
    {
        from: "0x5891f2A88311408A52289903df30175885626003",
        to: "0x06012c8cf97bead5deae237070f9587f8e7a266d",
        data: "0x23b872dd0000000000000000000000009646aa0f9152c126b42f7ce4698f35fa700c8cde000000000000000000000000e7fa846ad3d12d89872220f53d70d082477e798100000000000000000000000000000000000000000000000000000000000022e6"
    }
]

//NOTES : make summary UI in 2 parts 1 : humanize TO(contract interaction), 2 : display sentence
// some parts are not parsable : callbackFunc with bytes[] / masterchef batches?

contractsManager.init();

contractsManager.initAddressBook({
    polygon: [
        {name: "Alice", address:"0x4c66eDBb7fD0567036482D09640ea55cB205Bc0B"},
        {name: "Bob", address:"0x5539eC0576AF2dd0F060083742EC1A003cCA670b"},
    ]
})

console.log("Humanize some tx of Polygon");
let i = 0;
for(let tx of polygonTxs){
    const summary = contractsManager.getSummary({chainId:137, id:"polygon"}, tx);
    if(summary.length > 1){//MULTICALLS OR Multiple explicit actions
        console.log(i++ +  ': Multiple actions:');
        for(let sub of summary){
            console.log(' - ' + sub);
        }
    }else{
        console.log(i++ + " : " + summary[0]);
    }
    console.log("")
}

console.log("Humanize some tx of ETH");
i = 0;
for(let tx of ethTxs){
    const summary = contractsManager.getSummary({chainId:1, id:"ethereum"}, tx);
    if(summary.length > 1){//MULTICALLS OR Multiple explicit actions
        console.log(i++ +  ': Multiple actions:');
        for(let sub of summary){
            console.log(' - ' + sub);
        }
    }else{
        console.log(i++ + " : " + summary[0]);
    }
    console.log("")
}
