(this["webpackJsonpambire-wallet"]=this["webpackJsonpambire-wallet"]||[]).push([[18],{1636:function(e,n,t){e.exports={wrapper:"Providers_wrapper__7mBkD",provider:"Providers_provider__39HAw",logo:"Providers_logo__22UO3",details:"Providers_details__3D5WY",type:"Providers_type__ZBapd",fees:"Providers_fees__3H-KG",limits:"Providers_limits__37PHy",currencies:"Providers_currencies__ffX78",disabled:"Providers_disabled__127mG",networkWarning:"Providers_networkWarning__3sy45"}},1637:function(e,n,t){e.exports={deposit:"Deposit_deposit__MVFPl",depositAddress:"Deposit_depositAddress__8GtBi",inputClass:"Deposit_inputClass__1kOnb",panel:"Deposit_panel__3vfYo",heading:"Deposit_heading__37Rps",title:"Deposit_title__FtpVm",subtitle:"Deposit_subtitle__28DJk",description:"Deposit_description__1u2D2",margin:"Deposit_margin__8HgjN",qrCode:"Deposit_qrCode__3gFm8",networks:"Deposit_networks__20Jgz",networksTitle:"Deposit_networksTitle___H2Hn",list:"Deposit_list__2V21e",network:"Deposit_network__3IP_d",icon:"Deposit_icon__2OVP1",name:"Deposit_name__3iAeA",logos:"Deposit_logos__1W5P7"}},1656:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return M}));var a,r=t(9),s=t(27),c=t.n(s),i=t(2),o=t(85),d=t(763),u=t.n(d),l=t(231),f=t.p+"static/media/ramp.51a5841d.svg",b=t.p+"static/media/paytrie.81b0b17f.svg",p=t.p+"static/media/transak.cc92c218.svg",m=t.p+"static/media/kriptomat.6b5104a5.svg",h=t(942),j=t.p+"static/media/swappin.43ae149f.svg",v=t(941),g=t(1636),x=t.n(g),O=["title","titleId"];function y(){return y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},y.apply(this,arguments)}function w(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function k(e,n){var t=e.title,r=e.titleId,s=w(e,O);return i.createElement("svg",y({id:"Information_icon","data-name":"Information icon",xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",ref:n,"aria-labelledby":r},s),t?i.createElement("title",{id:r},t):null,a||(a=i.createElement("g",{id:"Group_29","data-name":"Group 29",transform:"translate(78 849) rotate(180)"},i.createElement("rect",{id:"Boundary",width:24,height:24,transform:"translate(54 825)",fill:"none"}),i.createElement("path",{id:"Shape",d:"M1987,23a10,10,0,1,1,10-10A10.012,10.012,0,0,1,1987,23Zm0-8a1,1,0,1,0,1,1A1,1,0,0,0,1987,15Zm0-8a1,1,0,0,0-1,1v5a1,1,0,1,0,2,0V8A1,1,0,0,0,1987,7Z",transform:"translate(-1921 824)",fill:"#ebecff"}))))}var T=i.forwardRef(k),C=(t.p,t(4));function S(e){var n=e.walletAddress,t=e.networkDetails,a=e.relayerURL,r=e.portfolio,s=e.sellMode,c=void 0!==s&&s,i=e.selectedAsset,d=Object(v.a)({walletAddress:n,selectedNetwork:t.id,relayerURL:a,portfolio:r}),u=d.openRampNetwork,l=d.openPayTrie,g=d.openTransak,O=d.openKriptomat,y=d.openGuardarian,w=d.openSwappin,k=d.isLoading,S=c?"sell":"buy",A=[{logo:h.a,name:"Guardarian",type:"Buy with Bank Transfer, Credit/Debit Card, Sell Crypto",fees:"from 2%",limits:"up to 15k EUR/monthly on and off ramp",currencies:"GBP, EUR, USD and many more",networks:["ethereum","polygon","binance-smart-chain","fantom"],isSellAvailable:!0,isBuyAvailable:!0,onClick:function(){return y(S,i)}},{logo:m,name:"Kriptomat",type:"Credit Card",fees:"2.45%",limits:"up to 5000 EUR/day",currencies:"USD, EUR, GBP",networks:["ethereum","polygon","binance-smart-chain"],isSellAvailable:!1,isBuyAvailable:!0,onClick:function(){return O()}},{logo:f,name:"Ramp",type:"Bank Transfer, Credit/Debit Card, Apple Pay",fees:"0.49%-2.9%",limits:"10,000EUR/m",currencies:"USD, EUR, GBP",networks:["ethereum","polygon","avalanche","binance-smart-chain","gnosis"],isSellAvailable:!1,isBuyAvailable:!0,onClick:function(){return u()}},{logo:b,name:"PayTrie",type:"Bank Transfer",fees:"1% (min. $2 CAD)",limits:"$2,000CAD/day",currencies:"CAD",networks:["ethereum","polygon","binance-smart-chain"],isSellAvailable:!1,isBuyAvailable:!0,onClick:function(){return l()}},{logo:p,name:"Transak",type:"Credit/Debit card and Bank Transfer (methods availability depends on location)",fees:"from 0.5%",limits:"up to 15,000 EUR/day",currencies:"GBP, EUR, USD and many more",networks:["ethereum","polygon","avalanche","arbitrum","binance-smart-chain","moonriver","moonbeam","optimism"],isSellAvailable:!1,onClick:function(){return g()}},{logo:j,name:"Swappin",type:"Buy online gift cards, converting your crypto into real-life goods and services.",fees:"",limits:"",description:"Supporting more than 20.000 tokens. You can acquire digital vouchers from more than 1000 retailers worldwide, in over 40 countries.",networks:["ethereum","polygon","avalanche","binance-smart-chain"],isSellAvailable:!0,isBuyAvailable:!1,onClick:function(){return w()}}].filter((function(e){return c?e.isSellAvailable:e.isBuyAvailable})),E=function(e){return!e.includes(t.id)};return Object(C.jsxs)("div",{className:x.a.wrapper,children:[A.map((function(e){var n=e.logo,t=e.name,a=e.type,r=e.fees,s=e.limits,c=e.currencies,i=e.networks,d=e.description,u=void 0===d?"":d,l=e.onClick;return Object(C.jsxs)("div",{className:"".concat(x.a.provider," ").concat(E(i)&&x.a.disabled),onClick:l,children:[Object(C.jsx)("div",{className:x.a.logo,children:Object(C.jsx)("img",{src:n,alt:t})}),k.includes(t)?Object(C.jsxs)("div",{children:[" ",Object(C.jsx)(o.n,{})," "]}):Object(C.jsxs)("div",{className:x.a.details,children:[Object(C.jsx)("div",{className:x.a.type,children:a}),"Swappin"!==t?Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("div",{className:x.a.fees,children:["Fees: ",r]}),Object(C.jsxs)("div",{className:x.a.limits,children:["Limits: ",s]}),Object(C.jsxs)("div",{className:x.a.currencies,children:["Currencies: ",c]})]}):Object(C.jsx)("div",{className:x.a.fees,children:u})]})]},t)})),"ethereum"!==t.id?Object(C.jsxs)("label",{className:x.a.networkWarning,children:[Object(C.jsx)(T,{}),Object(C.jsxs)("label",{children:["Some ",c?"sell":"deposit"," methods are unavailable on ",t.name,". Switch to Ethereum for the widest support."]})]}):null]})}var A=t(57),E=t(785),_=t(1637),N=t.n(_);function M(e){var n=e.selectedAcc,t=e.selectedNetwork,a=e.accounts,s=e.addRequest,d=e.relayerURL,f=e.portfolio,b=e.useStorage,p=A.a.find((function(e){return e.id===t.id})),m=Object(i.useState)(""),h=Object(r.a)(m,2),j=h[0],v=h[1],g=Object(i.useCallback)((function(){u.a.toDataURL(n,{quality:1,margin:1},(function(e,n){if(e)return console.error(e);v(n)}))}),[n]);return Object(i.useEffect)((function(){return g()}),[g]),Object(C.jsxs)("section",{className:N.a.deposit,children:[Object(C.jsxs)(o.s,{className:N.a.panel,children:[Object(C.jsxs)("div",{className:N.a.heading,children:[Object(C.jsx)("div",{className:N.a.title,children:"Deposit Tokens"}),Object(C.jsx)("div",{className:N.a.subtitle,children:"Direct Deposit"})]}),Object(C.jsxs)("div",{className:N.a.description,children:[Object(C.jsx)(l.a,{className:N.a.depositAddress,inputContainerClass:N.a.inputClass,label:"Send ".concat(p.nativeAssetSymbol,", tokens or collectibles (NFTs) to this address:"),value:n,copy:!0}),Object(C.jsx)("img",{className:N.a.qrCode,alt:"QR Code",src:j})]}),Object(C.jsxs)("div",{className:N.a.networks,children:[Object(C.jsx)("label",{className:N.a.networksTitle,children:"Following networks supported on this address:"}),Object(C.jsx)("div",{className:N.a.list,children:A.a.filter((function(e){return!e.hide})).map((function(e){var n=e.id,t=e.icon,a=e.name;return Object(C.jsxs)("div",{className:N.a.network,children:[Object(C.jsx)("div",{className:N.a.icon,style:{backgroundImage:"url(".concat(t,")")}}),Object(C.jsx)("div",{className:N.a.name,children:"binance-smart-chain"===n?"BSC":a})]},n)}))})]}),Object(C.jsx)(E.a,{selectedNetwork:t,selectedAccount:n,accounts:a,addRequest:s,linkMargin:!0,relayerURL:d,portfolio:f,useStorage:b})]}),Object(C.jsxs)(o.s,{className:N.a.panel,children:[Object(C.jsxs)("div",{className:N.a.heading,children:[Object(C.jsx)("div",{className:N.a.title,children:"Fiat Currency"}),Object(C.jsx)("div",{className:N.a.subtitle,children:"Credit Card & Bank Transfer"})]}),Object(C.jsx)("div",{className:c()(N.a.description,N.a.margin),children:"Deposit with credit card to your account directly using one of our partners"}),Object(C.jsx)(S,{walletAddress:n,networkDetails:p,relayerURL:d,portfolio:f})]})]})}},522:function(e,n,t){"use strict";t.d(n,"c",(function(){return b})),t.d(n,"a",(function(){return p})),t.d(n,"d",(function(){return m})),t.d(n,"b",(function(){return h})),t.d(n,"e",(function(){return j})),t.d(n,"f",(function(){return v})),t.d(n,"g",(function(){return g}));var a=t(7),r=t(3),s=t.n(r),c=t(12),i=t(541),o=t(62),d=t(523),u=t(524),l=2147483648,f={startPath:[2147483692,2147483708,l,0,0],n:10},b=function(e){var n={name:"Ambire Wallet",crypto:u,privKey:e};return new i.Client(n)},p=function(){var e=Object(c.a)(s.a.mark((function e(n,t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,a){n.connect(t,(function(n,t){n?a("Lattice connect: ".concat(n," Or check if the DeviceID is correct.")):e({isPaired:!!t,errConnect:!1})}))})).catch((function(e){return console.error(e),{isPaired:!1,errConnect:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(s.a.mark((function e(n,t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,a){n.pair(t,(function(n,t){n?a("Lattice connect: ".concat(n)):e({hasActiveWallet:t,errPair:!1})}))})).catch((function(e){return console.error(e),{hasActiveWallet:!1,errPair:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){n.getAddresses(f,(function(n,a){if(n)t("Lattice get addresses: ".concat(n));else{if(!a)throw new Error("Lattice could not get the addresses.");e({res:a,errGetAddresses:!1})}}))})).catch((function(e){return console.error(e),{res:null,errGetAddresses:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(s.a.mark((function e(n,t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={protocol:"signPersonal",payload:o.ethers.utils.hexlify(t),signerPath:[2147483692,2147483708,l,0,0]},r={currency:"ETH_MSG",data:a},e.next=4,new Promise((function(e,t){n.sign(r,(function(n,a){if(n)t(n);else{if(!a)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+a.sig.r+a.sig.s+a.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),v=function(){var e=Object(c.a)(s.a.mark((function e(n,t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={currency:"ETH_MSG",data:{signerPath:[2147483692,2147483708,l,0,0],protocol:"eip712",payload:t}},e.next=3,new Promise((function(e,t){n.sign(a,(function(n,a){if(n)t(n);else{if(!a)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+a.sig.r+a.sig.s+a.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(s.a.mark((function e(n,t,r){var c,i,o,u,f,b,p,m,h,j;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.to,i=t.data,o=t.gas,u=t.gasPrice,f=t.nonce,b=t.value,p=void 0===b?0:b,delete(m=Object(a.a)(Object(a.a)({},t),{},{gasLimit:t.gasLimit||t.gas,chainId:r})).from,delete m.gas,h={nonce:f,gasLimit:o||t.gasLimit,gasPrice:u,to:c,value:p,data:i||"",signerPath:[2147483692,2147483708,l,0,0],chainId:r,useEIP155:!0},j={currency:"ETH",data:h},e.next=8,new Promise((function(e,t){n.sign(j,(function(n,a){if(n)t(n);else{if(!a)throw new Error("Lattice could not sign the message.");delete m.v;var r=Object(d.a)(m,{r:"0x"+a.sig.r,s:"0x"+a.sig.s,v:a.sig.v[0].toString(16)});e({serializedSigned:r,errSignTxn:!1})}}))})).catch((function(e){return console.error(e),{serializedSigned:null,errSignTxn:e}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}()},526:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return b})),t.d(n,"b",(function(){return h})),t.d(n,"e",(function(){return y})),t.d(n,"c",(function(){return k})),t.d(n,"d",(function(){return C}));var a=t(7),r=t(3),s=t.n(r),c=t(12),i=t(599),o=t(602),d=t(523),u=t(215),l=t(518),f=null,b="44'/60'/0'/0";function p(){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.list();case 2:if(!(f=e.sent).length){e.next=11;break}if(!f[0].opened){e.next=8;break}return e.abrupt("return",new i.a(f[0]));case 8:return e.abrupt("return",i.a.open(f[0]));case 9:e.next=22;break;case 11:return e.prev=11,e.next=14,i.a.request();case 14:return e.abrupt("return",e.sent);case 17:if(e.prev=17,e.t0=e.catch(11),!e.t0.message.includes("reading 'open'")){e.next=21;break}throw new Error("ledger WebHID request denied");case 21:throw new Error("Could not request WebHID ledger: "+e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}function h(){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return n=e.sent,e.next=5,v(n);case 5:return t=e.sent,n.close(),e.abrupt("return",t.map((function(e){return e.address})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return(g=Object(c.a)(s.a.mark((function n(t){var a,r,c,i,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a="m/".concat(b),n.next=3,x(t,a).then((function(e){return e})).catch((function(e){throw 25871===e.statusCode||27404===e.statusCode?Error("Please make sure your ledger is unlocked and running the Ethereum app. "+e.message):Error("Could not get address from ledger : "+e)}));case 3:return r=n.sent,(c=new l).publicKey=e.from(r.publicKey,"hex"),c.chainCode=e.from(r.chainCode,"hex"),i=E(c),o={hdKey:c,address:i,derivationPath:a,baseDerivationPath:b},n.abrupt("return",A(o,1));case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function x(e,n){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(s.a.mark((function e(n,t){var a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new o.a(n),c=new Promise((function(e,n){a=setTimeout((function(){return n(new Error("Device took too long to respond..."))}),1e4)})),e.abrupt("return",Promise.race([r.getAddress(t,!1,!0),c]).then((function(e){return clearTimeout(a),e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,n){return w.apply(this,arguments)}function w(){return(w=Object(c.a)(s.a.mark((function e(n,t){var r,c,i,u,l,f,b,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return r=e.sent,c=n.from,delete(i=Object(a.a)(Object(a.a)({},n),{},{gasLimit:n.gasLimit||n.gas,chainId:t})).from,delete i.gas,u=Object(d.a)(i),e.next=10,v(r);case 10:if(l=e.sent,l[0].address.toLowerCase()!==c.toLowerCase()){e.next=30;break}return e.prev=13,e.next=16,new o.a(r).signTransaction(l[0].derivationPath,u.substr(2));case 16:b=e.sent,e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(13),new Error("Could not sign transaction "+e.t0);case 22:if(m=parseInt(b.v,16),Math.floor((m-35)/2)===t){e.next=26;break}throw new Error("Invalid returned V 0x"+b.v);case 26:delete i.v,f=Object(d.a)(i,{r:"0x"+b.r,s:"0x"+b.s,v:m}),e.next=31;break;case 30:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 31:return r.close(),e.abrupt("return",f);case 33:case"end":return e.stop()}}),e,null,[[13,19]])})))).apply(this,arguments)}function k(e,n){return T.apply(this,arguments)}function T(){return(T=Object(c.a)(s.a.mark((function e(n,t){var a,r,c,i,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return a=e.sent,e.next=5,v(a);case 5:if(r=e.sent,(c=r[0]).address.toLowerCase()!==t.toLowerCase()){e.next=20;break}return e.prev=8,e.next=11,new o.a(a).signPersonalMessage(c.derivationPath,n.substr(2));case 11:d=e.sent,i="0x"+d.r+d.s+d.v.toString(16),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(8),new Error("Signature denied "+e.t0.message);case 18:e.next=21;break;case 20:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 21:return a.close(),e.abrupt("return",i);case 23:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}function C(e,n,t){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(s.a.mark((function e(n,t,a){var r,c,i,d,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return r=e.sent,e.next=5,v(r);case 5:if(c=e.sent,(i=c[0]).address.toLowerCase()!==a.toLowerCase()){e.next=20;break}return e.prev=8,e.next=11,new o.a(r).signEIP712HashedMessage(i.derivationPath,n,t);case 11:u=e.sent,d="0x"+u.r+u.s+u.v.toString(16),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(8),new Error("Signature denied "+e.t0.message);case 18:e.next=21;break;case 20:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 21:return r.close(),e.abrupt("return",d);case 23:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}function A(e,n){for(var t=[],a=0;a<n;a++){var r="m/".concat(e.baseDerivationPath,"/").concat(a),s="m/".concat(a),c=e.hdKey.derive(s),i={address:E(c),hdKey:c,baseDerivationPath:e.baseDerivationPath,derivationPath:r};t.push(i)}return t}function E(e){var n=e.publicKey,t=u.publicToAddress(n,!0).toString("hex");return u.addHexPrefix(t).toLowerCase()}}).call(this,t(29).Buffer)},531:function(e,n,t){"use strict";t.d(n,"a",(function(){return O}));var a=t(3),r=t.n(a),s=t(12),c=t(7),i=t(548),o=t(606),d=t.n(o),u=t(62),l=t(518),f=t.n(l),b=t(558),p=t(593),m=t(526),h=t(522),j=t(20),v=t(98),g=t(57),x={};function O(e){var n=e.signer,t=e.signerExtra,a=e.chainId,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(n.address||n.one).concat(a);return x[s]?x[s]:x[s]=y({signer:n,signerExtra:t,chainId:a},r)}function y(e,n){var t=e.chainId,a=e.signer,o=e.signerExtra;if(o&&"trezor"===o.type){d.a.manifest({email:"contactus@ambire.com",appUrl:"https://wallet.ambire.com"});var l=new i.TrezorSubprovider({trezorConnectClientApi:d.a,networkId:t});return l._initialDerivedKeyInfo=function(e){return{hdKey:f.a.fromExtendedKey(e.info.hdKey.xpub),derivationPath:e.info.derivationPath,baseDerivationPath:e.info.baseDerivationPath}}(o),{signMessage:function(e){return l.signPersonalMessageAsync(u.ethers.utils.hexlify(e),a.address)},signTransaction:function(e){return l.signTransactionAsync(Object(c.a)(Object(c.a)({},e),{},{from:a.address}))},sendTransaction:function(){var e=Object(s.a)(r.a.mark((function e(n){var t,a,s,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.a.find((function(e){return e.chainId===n.chainId}))){e.next=3;break}throw Error("no network found for chainId : "+n.chainId);case 3:return e.next=5,Object(v.a)(t.id);case 5:if(a=e.sent){e.next=8;break}throw Error("no provider found for network : "+t.id);case 8:return e.t0=u.ethers.utils,e.next=11,a.getTransactionCount(n.from);case 11:return e.t1=e.sent,n.nonce=e.t0.hexlify.call(e.t0,e.t1),s=u.ethers.utils.hexlify(n.gas||n.gasLimit),n.gasPrice=u.ethers.utils.hexlify(n.gasPrice),n=Object(c.a)(Object(c.a)({},n),{},{gas:s}),e.next=18,l.signTransactionAsync(n);case 18:return i=e.sent,e.abrupt("return",a.sendTransaction(i));case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(s.a)(r.a.mark((function e(n){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getAccountsAsync(100);case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return e.toLowerCase()})).includes(n.toLowerCase()));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),_signTypedData:function(){var e=Object(s.a)(r.a.mark((function e(n,t,s){var c,i,o,d,u,f,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=j._TypedDataEncoder.hashDomain(n),i=j._TypedDataEncoder.hashStruct(j._TypedDataEncoder.getPrimaryType(t),t,s),o=j._TypedDataEncoder.getPayload(n,t,s),e.next=5,l._initialDerivedKeyInfoAsync();case 5:return d=e.sent,u=l._findDerivedKeyInfoForAddress(d,a.address),f=u.derivationPath,e.next=10,l._trezorConnectClientApi.ethereumSignTypedData({path:f,data:o,metamask_v4_compat:!0,domain_separator_hash:c,message_hash:i});case 10:if(!(b=e.sent).success){e.next=15;break}return e.abrupt("return","".concat(b.payload.signature));case 15:throw new Error(b.payload.error);case 16:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}()}}if(o&&"ledger"===o.type){if("webHID"===o.transportProtocol)return{signMessage:function(e){return Object(m.c)(u.ethers.utils.hexlify(e),a.address)},signTransaction:function(e){return Object(m.e)(e,t)},sendTransaction:function(){var e=Object(s.a)(r.a.mark((function e(n){var t,a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.a.find((function(e){return e.chainId===n.chainId}))){e.next=3;break}throw Error("no network found for chainId : "+n.chainId);case 3:return e.next=5,Object(v.a)(t.id);case 5:if(a=e.sent){e.next=8;break}throw Error("no provider found for network : "+t.id);case 8:return e.t0=u.ethers.utils,e.next=11,a.getTransactionCount(n.from);case 11:return e.t1=e.sent,n.nonce=e.t0.hexlify.call(e.t0,e.t1),e.next=15,Object(m.e)(n,n.chainId);case 15:return s=e.sent,e.abrupt("return",a.sendTransaction(s));case 17:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(s.a)(r.a.mark((function e(n){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.b)();case 2:if(!(t=e.sent)||!t[0]){e.next=7;break}if(!n){e.next=6;break}return e.abrupt("return",!!t.find((function(e){return e.toLowerCase()===n.toLowerCase()})));case 6:return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),_signTypedData:function(e,n,t){var r=j._TypedDataEncoder.hashDomain(e),s=j._TypedDataEncoder.hashStruct(j._TypedDataEncoder.getPrimaryType(n),n,t);return Object(m.d)(r,s,a.address)}};var x=new b.LedgerSubprovider({networkId:t,ledgerEthereumClientFactoryAsync:p.ledgerEthereumBrowserClientFactoryAsync,baseDerivationPath:o.info.baseDerivationPath});return{signMessage:function(e){return x.signPersonalMessageAsync(u.ethers.utils.hexlify(e),a.address)},signTransaction:function(e){return x.signTransactionAsync(Object(c.a)(Object(c.a)({},e),{},{from:a.address}))},sendTransaction:function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("Please use a chrome based browser to use Ledger");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(s.a)(r.a.mark((function e(n){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getAccountsAsync(1);case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return e.toLowerCase()})).includes(n.toLowerCase()));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),_signTypedData:function(e,n,t){throw Error("Please, use a chrome based browser to use 721 Typed signatures")}}}if(o&&"Lattice"===o.type)return{signMessage:function(){var e=Object(s.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(s.a)(r.a.mark((function e(n){var t,a,s,c,i,d,u,l,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.commKey,a=o.deviceId,s=Object(h.c)(t),e.next=4,Object(h.a)(s,a);case 4:if(c=e.sent,i=c.isPaired,!(d=c.errConnect)){e.next=9;break}throw new Error(d.message||d);case 9:if(i){e.next=12;break}throw s.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 12:return e.next=14,Object(h.e)(s,n);case 14:if(u=e.sent,l=u.signedMsg,!(f=u.errSignMessage)){e.next=19;break}throw new Error(f);case 19:return e.abrupt("return",l);case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),signTransaction:function(){var e=Object(s.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(s.a)(r.a.mark((function e(n){var a,s,c,i,d,u,l,f,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.commKey,s=o.deviceId,c=Object(h.c)(a),e.next=4,Object(h.a)(c,s);case 4:if(i=e.sent,d=i.isPaired,!(u=i.errConnect)){e.next=9;break}throw new Error(u.message||u);case 9:if(d){e.next=12;break}throw c.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 12:return e.next=14,Object(h.g)(c,n,t);case 14:if(l=e.sent,f=l.serializedSigned,!(b=l.errSignTxn)){e.next=19;break}throw new Error(b);case 19:return e.abrupt("return",f);case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),sendTransaction:function(){var e=Object(s.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(s.a)(r.a.mark((function e(n){var a,s,c,i,d,l,f,b,p,m,j;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=g.a.find((function(e){return e.chainId===n.chainId}))){e.next=3;break}throw Error("no network found for chainId : "+n.chainId);case 3:return e.next=5,Object(v.a)(a.id);case 5:if(s=e.sent){e.next=8;break}throw Error("no provider found for network : "+a.id);case 8:return e.t0=u.ethers.utils,e.next=11,s.getTransactionCount(n.from);case 11:return e.t1=e.sent,n.nonce=e.t0.hexlify.call(e.t0,e.t1),c=o.commKey,i=o.deviceId,d=Object(h.c)(c),e.next=17,Object(h.a)(d,i);case 17:if(l=e.sent,f=l.isPaired,!(b=l.errConnect)){e.next=22;break}throw new Error(b.message||b);case 22:if(f){e.next=25;break}throw d.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 25:return e.next=27,Object(h.g)(d,n,t);case 27:if(p=e.sent,m=p.serializedSigned,!(j=p.errSignTxn)){e.next=32;break}throw new Error(j);case 32:return e.abrupt("return",s.sendTransaction(m));case 33:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(s.a)(r.a.mark((function e(n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(s.a)(r.a.mark((function e(n){var t,a,s,c,i,d,u,l,f,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,a=o.commKey,s=o.deviceId,c=Object(h.c)(a),e.next=5,Object(h.a)(c,s);case 5:if(i=e.sent,d=i.isPaired,!(u=i.errConnect)){e.next=10;break}throw new Error(u.message||u);case 10:if(d){e.next=13;break}throw c.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 13:return e.next=15,Object(h.b)(c);case 15:if(l=e.sent,f=l.res,!(b=l.errGetAddresses)){e.next=20;break}throw new Error("Lattice: ".concat(b),{error:!0});case 20:return t=f,e.abrupt("return",t.map((function(e){return e.toLowerCase()})).includes(n.toLowerCase()));case 22:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),_signTypedData:function(){var e=Object(s.a)(r.a.mark((function e(n,t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(s.a)(r.a.mark((function e(n,t,a){var s,c,i,d,u,l,f,b,p,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=j._TypedDataEncoder.getPayload(n,t,a),c=o.commKey,i=o.deviceId,d=Object(h.c)(c),e.next=5,Object(h.a)(d,i);case 5:if(u=e.sent,l=u.isPaired,!(f=u.errConnect)){e.next=10;break}throw new Error(f.message||f);case 10:if(l){e.next=13;break}throw d.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 13:return e.next=15,Object(h.f)(d,s);case 15:if(b=e.sent,p=b.signedMsg,!(m=b.errSignMessage)){e.next=20;break}throw new Error(m);case 20:return e.abrupt("return",p);case 21:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),[n,t,a]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}()};if(a.address){if(!window.ethereum)throw new Error("No web3 support detected in your browser: if you created this account through MetaMask, please install it.");var O=new u.ethers.providers.Web3Provider(window.ethereum,"any"),y=O.getSigner(a.address);return y.isConnected=function(){var e=Object(s.a)(r.a.mark((function e(n,t){var a,s,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.listAccounts();case 2:if(a=e.sent,s=!0,!a.length){e.next=14;break}if(n&&(s=!!a.find((function(e){return e.toLowerCase()===n.toLowerCase()}))),!t){e.next=12;break}return e.next=9,O.getNetwork();case 9:c=e.sent,i=c.chainId,s=s&&i===t;case 12:e.next=15;break;case 14:s=!1;case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),y}throw a.one?new Error("getWallet not applicable for QuickAccounts: use primaryKeyBackup with the passphrase and /second-sig"):new Error("unknown signer type")}function w(e,n){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(r.a.mark((function e(n,t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.apply(this,t).catch((function(e){throw new Error("Lattice: ".concat(e.message))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},532:function(e,n,t){},576:function(e,n){},577:function(e,n){},578:function(e,n){},579:function(e,n){},582:function(e,n){},583:function(e,n){},584:function(e,n){},590:function(e,n){},591:function(e,n){},595:function(e,n){},597:function(e,n){},758:function(e,n,t){},785:function(e,n,t){"use strict";var a=t(9),r=(t(532),t(111)),s=t(94),c="0x0000000000000000000000000000000000000000",i=t(57);function o(e){var n,t=e.networkId,a=e.account;return(null===(n=i.a.find((function(e){return e.id===t})))||void 0===n?void 0:n.relayerlessOnly)?Promise.resolve([]):a?Object(s.c)("".concat(r.h,"/protocols/tokens/balances?addresses[]=").concat(a,"&network=").concat(t,"&api_key=").concat(r.j,"&newBalances=true&available_on_coingecko=true")).then((function(e){var n=a.toLowerCase();if(!e[n])return[];if(!e[n].products[0])return[];var i=e[n].products[0].assets.map((function(e){return{address:e.tokens[0].address,symbol:e.tokens[0].symbol,decimals:e.tokens[0].decimals}})),o="".concat(r.h,"/protocols/tokens/balances?addresses[]=").concat(a,"&network=").concat(t,"&api_key=").concat(r.j,"&customTokens=").concat(JSON.stringify(i),"&available_on_coingecko=true");return Object(s.c)(o).then((function(e){var t,a;return(null===(t=e[n])||void 0===t||null===(a=t.products[0])||void 0===a?void 0:a.assets).map((function(e){return{name:e.tokens[0].symbol,icon:e.tokens[0].tokenImageUrl,address:e.tokens[0].address.toLowerCase(),native:e.tokens[0].address===c,decimals:e.tokens[0].decimals,availableBalance:e.tokens[0].balanceRaw,balanceUSD:e.tokens[0].balanceUSD,rate:e.tokens[0].balanceUSD/e.tokens[0].balanceRaw}}))})).catch((function(e){throw Error("Could not get customToken assets from velcro")}))})).catch((function(e){throw Error("Could not get assets from velcro")})):Promise.resolve([])}t(758);var d=t(37),u=t(85),l=t(2),f=t(3),b=t.n(f),p=t(12),m=t(7),h=t(15),j=t(571),v=t.n(j),g=t(224),x=t(530),O=t(52),y=t(62),w=t(102),k=t(20),T=[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}],C=[{name:"holder",type:"address"},{name:"spender",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"},{name:"allowed",type:"bool"}],S=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],A=[{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],E=[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],_=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"}],N={1:[{address:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",name:"USD Coin",version:"2",domainType:S,permitType:T},{address:"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984",name:"Uniswap",domainType:E,permitType:T},{address:"0xde30da39c46104798bb5aa3fe8b9e0e1f348163f",name:"Gitcoin",domainType:E,permitType:T},{address:"0x6b175474e89094c44da98b954eedeac495271d0f",name:"Dai Stablecoin",version:"1",domainType:S,permitType:C},{address:"0x090185f2135308bad17527004364ebcc2d37e5f6",domainType:A,permitType:T},{address:"0x99d8a9c45b2eca8864373a26d1459e3dff1e17f3",domainType:A,permitType:T},{address:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9",name:"Aave Token",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"AdEx Loyalty",address:"0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c",version:"1",domainType:S,permitType:T},{name:"Aave Token",address:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9",version:"1",domainType:S,permitType:T},{name:"Ambire Wallet Staking Token",address:"0x47cd7e91c3cbaaf266369fe8518345fc4fc12935",version:"1",domainType:S,permitType:T},{name:"ConstitutionDAO",address:"0x7a58c0be72be218b41c608b7fe7c5bb630736c71",version:"1",domainType:S,permitType:T},{name:"Aragon Network Token",address:"0xa117000000f279d81a1d3cc75430faa017fa5a2e",version:"1",domainType:S,permitType:T},{name:"AdEx Staking Token",address:"0xb6456b57f03352be48bf101b46c1752a0813491a",version:"1",domainType:S,permitType:T},{name:"dYdX",address:"0x92d6c1e31e14520e676a687f0a93788b716beff5",version:"1",domainType:S,permitType:T},{name:"Ethereum Name Service",address:"0xc18360217d8f7ab5e7c516566761ea12ce7f9d72",version:"1",domainType:S,permitType:T},{name:"Olympus",address:"0x383518188c0c6d7730d91b2c03a03c837814a899",version:"1",domainType:S,permitType:T},{name:"1INCH Token",address:"0x111111111117dc0aa78b770fa6a738034120c302",version:"1",domainType:S,permitType:T},{name:"IceToken",address:"0xf16e81dce15b08f326220742020379b855b87df9",version:"1",domainType:S,permitType:T},{name:"Fei USD",address:"0x956f47f50a910163d8bf957cf5846d573e7f87ca",version:"1",domainType:S,permitType:T},{name:"LUSD Stablecoin",address:"0x5f98805a4e8be255a32880fdec7f6728c6568ba0",version:"1",domainType:S,permitType:T},{name:"Balancer",address:"0xba100000625a3754423978a60c9317c58a424e3d",version:"1",domainType:S,permitType:T},{name:"Aave interest bearing AAVE",address:"0xffc97d72e13e01096502cb8eb52dee56f74dad7b",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniBATWETH",address:"0xa1b0edf4460cc4d8bfaa18ed871bff15e5b57eb4",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniWBTCWETH",address:"0xc58f53a8adff2fb4eb16ed56635772075e2ee123",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniUSDCWETH",address:"0x391e86e2c002c70dee155eaceb88f7a3c38f5976",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing WETH",address:"0x030ba81f1c18d280636f32af80b9aad02cf0854e",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing DAI",address:"0x028171bca77440897b824ca71d1c56cac55b68a3",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniWBTCUSDC",address:"0x2365a4890ed8965e564b7e2d27c38ba67fec4c6f",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniCRVWETH",address:"0x0ea20e7ffb006d4cfe84df2f72d8c7bd89247db0",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniUNIWETH",address:"0x3d26dcd840fcc8e4b2193ace8a092e4a65832f9f",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing GUSD",address:"0xd37ee7e4f452c6638c96536e68090de8cbcdb583",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniMKRWETH",address:"0x370adc71f67f581158dc56f539df5f399128ddf9",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing CRV",address:"0x8dae6cb04688c62d939ed9b68d32bc62e49970b1",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market USDT",address:"0x17a79792fe6fe5c95dfe95fe3fcee3caf4fe4cb7",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniSNXWETH",address:"0x38e491a71291cd43e8de63b7253e482622184894",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing YFI",address:"0x5165d24277cd063f5ac44efd447b27025e888f37",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing SNX",address:"0x35f6b052c598d933d69a4eec4d04c73a191fe6c2",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market USDC",address:"0xd24946147829deaa935be2ad85a3291dbf109c80",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market DAI",address:"0x79be75ffc64dd58e66787e4eae470c8a1fd08ba4",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing USDT",address:"0x3ed3b47dd13ec9a98b44e6204a523e766b225811",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing RAI",address:"0xc9bc48c72154ef3e5425641a3c747242112a46af",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing BAL",address:"0x272f97b7a56a387ae942350bbc7df5700f8a4576",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing BAT",address:"0x05ec93c0365baaeabf7aeffb0972ea7ecdd39cf1",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing USDC",address:"0xbcca60bb61934080951369a648fb03df4f96263c",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market BptBALWETH",address:"0xd109b2a304587569c84308c55465cd9ff0317bfb",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing KNC",address:"0x39c6b3e42d6a679d7d776778fe880bc9487c2eda",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing MANA",address:"0xa685a61171bb30d4072b338c80cb7b2c865c873e",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing XSUSHI",address:"0xf256cc7847e919fac9b808cc216cac87ccf2f47a",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing TUSD",address:"0x101cc05f4a51c0319f570d5e146a8c625198e636",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing ENJ",address:"0xac6df26a590f08dcc95d5a4705ae8abbc88509ef",version:"1",domainType:S,permitType:T,nonceFunction:"_nonces"}],137:[{name:"Governance OHM",address:"0xd8ca34fd379d9ca3c6ee3b3905678320f5b45195",version:"1",domainType:S,permitType:T},{name:"Frax",address:"0x45c32fa6df82ead1e2ef74d17b76547eddfaff89",version:"1",domainType:S,permitType:T},{name:"Aave Matic Market WBTC",address:"0x5c2ed810328349100a66b82b78a1791b101c9d61",version:"1",domainType:S,permitType:T},{name:"Aave Matic Market WETH",address:"0x28424507fefb6f7f8e9d3860f56504e4e5f5f390",version:"1",domainType:S,permitType:T},{name:"Aave Matic Market USDC",address:"0x1a13f4ca1d028320a707d99520abfefca3998b7f",version:"1",domainType:S,permitType:T},{name:"Aave Matic Market AAVE",address:"0x1d2a0e5ec8e5bbdca5cb219e649b565d8e5c3360",version:"1",domainType:S,permitType:T},{name:"Synapse",address:"0xf8f9efc0db77d8881500bb06ff5d6abc3070e695",version:"1",domainType:S,permitType:T},{name:"Aave Matic Market WMATIC",address:"0x8df3aad3a84da6b69a4da8aec3ea40d9091b2ac4",version:"1",domainType:S,permitType:T},{name:"Aave Matic Market USDT",address:"0x60d55f02a771d515e077c9c2403a1ef324885cec",version:"1",domainType:S,permitType:T},{name:"Klima DAO",address:"0x4e78011ce80ee02d2c3e649fb657e45898257815",version:"1",domainType:S,permitType:T},{name:"Quickswap",address:"0xb5c064f955d8e7f38fe0460c556a72987494ee17",domainType:E,permitType:T},{name:"Route",address:"0x16eccfdbb4ee1a85a33f3a9b21175cd7ae753db4",domainType:E,permitType:T},{address:"0x8f3cf7ad23cd3cadbd9735aff958023239c6a063",name:"(PoS) Dai Stablecoin",version:"1",salt:"0x0000000000000000000000000000000000000000000000000000000000000089",domainType:_,permitType:C,nonceFunction:"getNonce"},{address:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",name:"USD Coin (PoS)",version:"1",salt:"0x0000000000000000000000000000000000000000000000000000000000000089",domainType:_,permitType:T}],56:[{name:"1INCH Token",address:"0x111111111117dc0aa78b770fa6a738034120c302",version:"1",domainType:S,permitType:T},{name:"Frax",address:"0x90c97f71e18723b0cf0dfa30ee176ab653e89f40",version:"1",domainType:S,permitType:T},{name:"JADE",address:"0x7ad7242a99f21aa543f9650a56d141c57e4f6081",version:"1",domainType:S,permitType:T},{name:"Templar Token",address:"0x19e6bfc1a6e4b042fb20531244d47e252445df01",version:"1",domainType:S,permitType:T}]},M=new k.Interface(["function nonces(address owner) external view returns (uint256)","function _nonces(address owner) external view returns (uint256)","function getNonce(address owner) external view returns (uint256)","function name() external view returns (string)","function symbol() external view returns (string)","function decimals() external view returns (uint)","function balanceOf(address) external view returns (uint)","function permit(address owner, address spender, uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s)","function permit(address holder, address spender, uint256 nonce, uint256 expiry, bool allowed, uint8 v, bytes32 r, bytes32 s)","function transferFrom(address from, address to, uint256 amount) view returns (bool)","function transfer(address to, uint256 amount) view returns (bool)","function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint)"]),P=t(98),D=t(624),F=t(4),I=function(e){var n=e.signerAccount,t=e.identityAccount,r=e.network,i=e.setIsSelectionConfirmed,d=e.setStep,f=e.portfolio,j=e.relayerURL,k=e.setModalButtons,T=e.hideModal,C=e.setSelectedTokensWithAllowance,S=e.setGasSpeed,A=e.setStepperSteps,E=e.hidden,_=Object(l.useState)([]),N=Object(a.a)(_,2),I=N[0],B=N[1],L=Object(l.useState)([]),U=Object(a.a)(L,2),R=U[0],W=U[1],H=Object(l.useState)(null),G=Object(a.a)(H,2),K=G[0],q=G[1],z=Object(l.useState)(!0),V=Object(a.a)(z,2),$=V[0],Y=V[1],J=Object(l.useState)([]),X=Object(a.a)(J,2),Z=X[0],Q=X[1],ee=Object(l.useState)(null),ne=Object(a.a)(ee,2),te=ne[0],ae=ne[1],re=Object(l.useState)(null),se=Object(a.a)(re,2),ce=se[0],ie=se[1],oe=Object(l.useState)("fast"),de=Object(a.a)(oe,2),ue=de[0],le=de[1],fe=Object(l.useState)([]),be=Object(a.a)(fe,2),pe=be[0],me=be[1],he=Object(l.useState)(!1),je=Object(a.a)(he,2),ve=je[0],ge=je[1],xe=Object(l.useState)(!1),Oe=Object(a.a)(xe,2),ye=Oe[0],we=Oe[1],ke=Object(l.useState)(""),Te=Object(a.a)(ke,2),Ce=Te[0],Se=Te[1],Ae=Object(l.useState)(""),Ee=Object(a.a)(Ae,2),_e=Ee[0],Ne=Ee[1],Me=Object(l.useRef)(),Pe=Object(l.useRef)({}),De=Object(l.useCallback)((function(e,n){var t=R.findIndex((function(n){return n.address===e}));if(-1!==t){var a=n(R[t]);W([].concat(Object(h.a)(R.slice(0,t)),[a],Object(h.a)(R.slice(t+1))))}}),[R]),Fe=Object(l.useCallback)((function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=I.sort((function(e,n){return e.name<n.name?-1:1})).findIndex((function(n){return n.address===e}));null===(n=Pe.current[a])||void 0===n||n.focus(),De(e,(function(n){var a=Object(m.a)(Object(m.a)({},n),{},{selected:!n.selected});if(t){var r,s=null===(r=R.find((function(n){return n.address===e})))||void 0===r?void 0:r.humanAmount;if(t>s){var c,i=null===(c=I.find((function(n){return n.address===e})))||void 0===c?void 0:c.decimals;a.amount=new v.a(t).multipliedBy(Math.pow(10,i)).toFixed(0),a.humanAmount=t}}return a}))}),[I,De,R]),Ie=Object(l.useCallback)((function(){var e=Object(P.a)(r.id);if(y.ethers.utils.isAddress(Ce)){if(I.find((function(e){return e.address.toLowerCase()===Ce.toLowerCase()})))return Se(""),void ge(!1);var s=new w.Contract(Ce,M,e),c=s.symbol().catch((function(){return Ne("Could not get symbol of token "+Ce)})),i=s.decimals().catch((function(){return Ne("Could not get decimals of token "+Ce)})),o=s.allowance(n,t).catch((function(){return Ne("Could not get allowance for token "+Ce)})),d=s.balanceOf(n).catch((function(){return Ne("Could not get balance for token "+Ce)}));we(!0),Ne(null),Promise.all([c,i,o,d]).then((function(e){var n=Object(a.a)(e,4),t=n[0],r=n[1],s=n[2],c=n[3];we(!1),t&&r&&null!==s&&null!==c&&(Se(""),ge(!1),B((function(e){return[].concat(Object(h.a)(e),[{address:Ce,name:t,decimals:r.toNumber(),icon:null,rate:0,native:!1,availableBalance:c.toString(),balanceUSD:0}])})),W((function(e){return[].concat(Object(h.a)(e),[{address:Ce,selectedAmount:0,amount:c.toString(),humanAmount:new v.a(c.toString()).div(Math.pow(10,r.toString())).toFixed(),selected:c.gt(0)}])})),me((function(e){return[].concat(Object(h.a)(e),[{address:Ce,allowance:0}])})))})).catch((function(e){console.log("err getting custom token data",e),we(!1)}))}else Ne("invalid custom token address")}),[r,Ce,n,t,Ne,I]),Be=Object(l.useCallback)((function(e){var n;if(!ce)return!1;var t=(null===(n=R.find((function(e){return e.address===c&&e.selected})))||void 0===n?void 0:n.amount)||0;return new v.a(ce.gasFees[e].signerTransactionsCost).plus(t).lte(K.availableBalance||0)}),[R,ce,K]),Le=Object(l.useCallback)((function(e){return new v.a(K.availableBalance).minus(ce.gasFees[e].signerTransactionsCost)}),[ce,K]),Ue=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.map((function(e){return Object(m.a)(Object(m.a)(Object(m.a)({},e),n.find((function(n){return n.address===e.address}))),t.find((function(n){return n.address===e.address})))}))},Re=Object(l.useCallback)(Object(p.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Ue(I,R,pe).filter((function(e){return e.selected}))).length){e.next=3;break}return e.abrupt("return");case 3:C(n.map((function(e){return Object(m.a)({},e)}))),i(!0),n.find((function(e){return e.address===c}))?d(1):d(2),S(ue);case 7:case"end":return e.stop()}}),e)}))),[I,R,pe,C,i,d,S,ue]);Object(l.useEffect)((function(){ve&&Me.current.focus()}),[ve]),Object(l.useEffect)((function(){q(I.find((function(e){return e.native})))}),[I]),Object(l.useEffect)((function(){Y(!0),B([]),o({networkId:r.id,account:n}).then((function(e){B(e.map((function(e){return Object(m.a)({},e)}))),W(e.map((function(e){return{address:e.address,selectedAmount:0,amount:e.availableBalance,humanAmount:new v.a(e.availableBalance).div(Math.pow(10,e.decimals)).toFixed(),selected:!1}}))),Y(!1)})).catch((function(e){console.error(e)}))}),[n,Y,B,r]),Object(l.useEffect)((function(){if(te){var e=Ue(I,R,pe),n=e.filter((function(e){return e.selected&&!e.native})).length,t=e.filter((function(e){return e.selected&&e.native})).length,a=n*(77e3+("arbitrum"===r.id?2e5:0))+25e3*t,s=te.gasFeeAssets.native/Math.pow(10,18),c={};D.a.forEach((function(e){var n=te.gasPrice[e]+(te.gasPrice.maxPriorityFeePerGas?1*te.gasPrice.maxPriorityFeePerGas[e]:0),t=a*n,r=t*s;c[e]={speed:e,signerTransactionsCost:t,signerTransactionsCostUSD:r,signerTransactionsConsumption:a}})),ie({regularTransfersCount:n,nativeTransfersCount:t,gasFees:c})}}),[I,R,f,te,ue,pe,r]),Object(l.useEffect)((function(){Object(s.c)("".concat(j,"/gasPrice/").concat(r.id)).then((function(e){ae(e.data)})).catch((function(e){console.log("fetch error",e)}))}),[j,r]),Object(l.useEffect)((function(){var e=I.map((function(e){var a=Object(P.a)(r.id),s=new w.Contract(e.address,M,a);return e.native?{address:e.address,allowance:0}:s.allowance(n,t).then((function(n){return{address:e.address,allowance:n.toString()}})).catch((function(e){console.log("err getting allowance",e)}))}));Promise.all(e).then((function(e){me(e)}))}),[t,r,I,n]),Object(l.useEffect)((function(){E||k(Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(u.e,{clear:!0,small:!0,icon:Object(F.jsx)(O.f,{}),onClick:T,children:"Close"}),R.filter((function(e){return e.selected})).length>0&&Be(ue)?Object(F.jsxs)(u.e,{small:!0,icon:Object(F.jsx)(O.D,{}),className:"primary",onClick:function(){return Re()},children:["Move ",R.filter((function(e){return e.selected})).length," assets"]}):Object(F.jsx)(u.e,{small:!0,icon:Object(F.jsx)(O.D,{}),className:"primary disabled",children:"Move assets"})]}))}),[R,ue,k,T,Re,E,Be]);var We=Object(l.useCallback)((function(e,n){return De(n.address,(function(t){if(""===e)return Object(m.a)(Object(m.a)({},t),{},{humanAmount:0,amount:0});if(e.endsWith(".")&&2===e.split(".").length||2===e.split(".").length&&e.endsWith("0")&&new v.a(e).isEqualTo(t.humanAmount))return Object(m.a)(Object(m.a)({},t),{},{humanAmount:e});if(!isNaN(e)){var a=new v.a(e).toFixed(n.decimals);return 1===new v.a(a).multipliedBy(Math.pow(10,n.decimals)).comparedTo(n.availableBalance)&&(a=new v.a(n.availableBalance).dividedBy(Math.pow(10,n.decimals)).toFixed(n.decimals)),a=a.replace(/\.?0+$/g,""),Object(m.a)(Object(m.a)({},t),{},{humanAmount:a,amount:new v.a(a).multipliedBy(Math.pow(10,n.decimals)).toFixed(0)})}return t}))}),[De]);return Object(l.useEffect)((function(){setTimeout((function(){var e;null===(e=Pe.current[0])||void 0===e||e.focus()}),250)}),[I]),Object(l.useEffect)((function(){var e=["Selection"],n=R.find((function(e){return e.address.toLowerCase()===c&&e.selected}));if(n&&e.push("Send ".concat(I.find((function(e){return e.address===n.address})).name)),R.find((function(e){return e.address.toLowerCase()!==c&&e.selected}))){var t=[];R.find((function(e){return e.selected&&e.address.toLowerCase()!==c}))&&t.push("Send"),e.push(t.join(" and ")+" tokens")}1===e.length&&e.push("Send tokens"),A(e)}),[I,R,A,r]),E?Object(F.jsx)(F.Fragment,{}):Object(F.jsx)("div",{children:$?Object(F.jsxs)("div",{className:"content-center",children:[Object(F.jsx)("h3",{className:"mb-6",children:"Loading assets..."}),Object(F.jsx)(g.a,{})]}):Object(F.jsx)("div",{children:0===I.length?Object(F.jsx)("div",{children:"No assets to migrate have been found"}):Object(F.jsxs)("div",{children:[Object(F.jsx)("div",{className:"mb-4",children:"Please select the assets you would like to migrate from your signer wallet to your Ambire wallet"}),Ue(I,R).sort((function(e,n){return e.name<n.name?-1:1})).map((function(e,n){return Object(F.jsxs)("div",{className:"migration-asset-row",children:[Object(F.jsx)("div",{className:"migration-asset-select".concat(e.selected?" checked":""),onClick:function(){return!1},children:Object(F.jsx)(u.g,{labelClassName:"checkbox-label",id:"check-".concat(e.address),label:Object(F.jsxs)("span",{className:"migration-asset-select-label",children:[Object(F.jsx)("span",{className:"migration-asset-select-icon",children:Z.includes(e.icon)||!e.icon?Object(F.jsx)(x.c,{size:18}):Object(F.jsx)("img",{src:e.icon,draggable:"false",alt:"Token Icon",onError:function(n){Q((function(n){return[].concat(Object(h.a)(n),[e.icon])}))}})}),Object(F.jsx)("span",{className:"migration-asset-select-name",children:e.name})]}),checked:e.selected,onChange:function(){return Fe(e.address)}})}),Object(F.jsxs)("div",{className:"migration-asset-usd",children:["$",(e.amount*e.rate).toFixed(2)]}),Object(F.jsx)("div",{className:"migration-asset-amount",children:Object(F.jsx)(u.z,{ref:function(e){return Pe.current[n]=e},className:"migrate-amount-input",value:e.humanAmount,onChange:function(n){return We(n,e)}})})]},n)})),Object(F.jsx)("div",{className:"custom-token-row mt-2",children:ve?Object(F.jsx)("div",{children:ye?Object(F.jsxs)("div",{className:"custom-token-message-fetching",children:[Object(F.jsx)(u.n,{}),"Fetching custom token data..."]}):Object(F.jsxs)(F.Fragment,{children:[_e&&Object(F.jsx)("div",{className:"error",children:_e}),Object(F.jsx)("div",{children:Object(F.jsx)(u.z,{className:"custom-token-input",placeholder:"Enter custom token address",value:Ce,onChange:function(e){Se(e)},ref:Me})}),Object(F.jsxs)("div",{className:"flex-row mt-2",children:[Object(F.jsx)(u.e,{small:!0,icon:Object(F.jsx)(O.c,{}),className:"buttonHollow danger align-right",onClick:function(){ge(!1),Se(""),Ne(null)},children:"Cancel"}),Object(F.jsx)(u.e,{small:!0,icon:Object(F.jsx)(O.t,{}),className:"primary ms-4",onClick:function(){return Ie()},children:"Add"})]})]})}):Object(F.jsx)(u.e,{small:!0,icon:Object(F.jsx)(O.t,{}),className:"clear align-right",onClick:function(){return ge(!0)},children:"Add custom token"})}),!Be(ue)&&R.filter((function(e){return e.selected})).length>0&&Object(F.jsxs)("div",{className:"notification-hollow warning mt-3 mb-3",children:["Your Signer Wallet will not have enough fees to pay for the migration. Please transfer a maximum of ",Object(F.jsxs)("span",{className:"max-native-suggestion",onClick:function(){return We(new v.a(Le(ue)).dividedBy(Math.pow(10,K.decimals)).toFixed(6,v.a.ROUND_DOWN),K)},children:[new v.a(Le(ue)).dividedBy(Math.pow(10,K.decimals)).toFixed(6,v.a.ROUND_DOWN)," ",r.nativeAssetSymbol]})]}),ce&&Object(F.jsxs)("div",{className:"gas-estimation-block mt-4",children:[Object(F.jsx)("div",{className:"gas-estimation-block-title",children:"Estimated gas fee"}),Object(F.jsx)("ul",{className:"gas-estimation-selector",children:Object.values(ce.gasFees).map((function(e,n){return Object(F.jsx)("li",{className:e.speed===ue?"selected":"",onClick:function(){return le(e.speed)},children:e.speed},n)}))}),Object(F.jsx)("table",{className:"gas-estimation-details",children:Object(F.jsx)("tbody",{children:Object(F.jsxs)("tr",{children:[Object(F.jsxs)("td",{children:["Signer fee",(!!ce.nativeTransfersCount||!!ce.regularTransfersCount)&&Object(F.jsx)("span",{className:"migration-actions",children:Object(F.jsxs)("span",{children:[ce.nativeTransfersCount+ce.regularTransfersCount," transfers"]})})]}),Object(F.jsxs)("td",{className:"gas-estimation-details-amount",children:["$",ce.gasFees[ue].signerTransactionsCostUSD.toFixed(2)]})]})})})]})]})})})},B=t(531),L=t(148),U=t(223),R=function(e){e.addRequest;var n=e.identityAccount,t=e.signer,r=e.signerExtra,i=e.network,o=e.selectedTokensWithAllowance,d=e.setError,u=e.hideModal,f=e.setStep,j=e.setModalButtons,g=e.relayerURL,w=e.gasSpeed,k=e.hidden,T=Object(l.useState)([]),C=Object(a.a)(T,2),S=C[0],A=C[1],E=Object(l.useState)({}),_=Object(a.a)(E,2),N=_[0],P=_[1],D=Object(l.useState)({}),I=Object(a.a)(D,2),R=I[0],W=I[1],H=Object(l.useState)(!1),G=Object(a.a)(H,2),K=G[0],q=G[1],z=Object(l.useState)(null),V=Object(a.a)(z,2),$=V[0],Y=V[1],J=Object(l.useState)([]),X=Object(a.a)(J,2),Z=X[0],Q=X[1],ee=Object(l.useState)(null),ne=Object(a.a)(ee,2),te=ne[0],ae=ne[1],re=Object(l.useState)(null),se=Object(a.a)(re,2),ce=se[0],ie=se[1],oe=Object(l.useState)(null),de=Object(a.a)(oe,2),ue=de[0],le=de[1],fe=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return e.filter((function(e){return e.address!==c})).map((function(e){var r=Object(m.a)(Object(m.a)({},e),{},{signing:null,signature:null,sent:!1,pending:!1,allowance:0});return n[e.address]&&(r.signing=n[e.address].signing,r.signature=n[e.address].signature),t[e.address]&&(r.sent=!0),a[e.address]&&(r.pending=!0),r}))},be=Object(l.useCallback)(Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===ue||void 0===ue?void 0:ue.isConnected(t.address,i.chainId).then((function(e){return ae(e),!!e||(d(Object(F.jsxs)(F.Fragment,{children:["Please make sure your signer wallet is unlocked, and connected with ",Object(F.jsx)("b",{children:t.address})," to the correct chain: ",Object(F.jsx)("b",{children:i.id})]})),!1)})).catch((function(e){return d("Could not check signer connection status: "+e.error),!1})));case 1:case"end":return e.stop()}}),e)}))),[i,d,t,ue]),pe=Object(l.useCallback)((function(){var e=0;return fe(o,S,N,[]).forEach((function(n){n.sent&&e++})),e}),[o,S,N]),me=Object(l.useCallback)(function(){var e=Object(p.a)(b.a.mark((function e(a){var r,s,c,d,u=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]&&u[1],e.next=3,be();case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(s=o.find((function(e){return e.address===a}))){e.next=8;break}return e.abrupt("return");case 8:return c=M.encodeFunctionData("transfer",[n,new v.a(s.amount).toFixed(0)]),W((function(e){return e[a]=!0,Object(m.a)({},e)})),Y(null),d=ue.sendTransaction({from:t.address,to:a,data:c,gasLimit:8e4,gasPrice:ce,chainId:i.chainId}).then(function(){var e=Object(p.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A((function(e){return e[a]=Object(m.a)(Object(m.a)({},e[a]),{},{signing:!0}),Object(m.a)({},e)})),!r){e.next=7;break}return e.next=4,n.wait();case 4:P((function(e){return e[a]=!0,Object(m.a)({},e)})),W((function(e){return e[a]=!1,Object(m.a)({},e)})),A((function(e){return e[a]=Object(m.a)(Object(m.a)({},e[a]),{},{signing:!1}),Object(m.a)({},e)}));case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return W((function(e){return e[a]=!1,Object(m.a)({},e)})),e.message.includes("underpriced")?Y("Transaction fee underpriced"):Y(e.message),q(!0),(!S[a]||S[a]&&!1!==S[a].signing)&&A((function(e){return e[a]=Object(m.a)(Object(m.a)({},e[a]),{},{signing:!1}),Object(m.a)({},e)})),!1})),e.abrupt("return",!!d);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[ue,n,S,o,ce,i,t,be]),he=Object(l.useCallback)((function(){d(null),P([]),A([]),q(!1),f(0)}),[d,A,P,f]),je=Object(l.useCallback)((function(){he(),u()}),[he,u]);return Object(l.useEffect)((function(){le(Object(B.a)({signer:t,signerExtra:r,chainId:i.chainId}))}),[i,t,r]),Object(l.useEffect)((function(){be()}),[be]),Object(l.useEffect)((function(){var e="".concat(g,"/gasPrice/").concat(i.id);Object(s.c)(e).then((function(e){var n=e.data.gasPrice[w];e.data.gasPrice.maxPriorityFeePerGas&&(n+=e.data.gasPrice.maxPriorityFeePerGas[w]),ie(n)})).catch((function(n){d(n.message+" "+e)}))}),[i,g,d,w]),Object(l.useEffect)((function(){if(te&&Object.values(N).length&&ce){var e=fe(o,S,N,[]).map((function(e){return{address:e.address,signed:e.signing}})).find((function(e){return null===e.signed}));e&&setTimeout((function(){me(e.address,!0)}),150)}}),[o,me,S,N,te,ce]),Object(l.useEffect)((function(){if(o.length){var e={};o.forEach((function(n){e[n.address]=!1})),P(e)}}),[o,P]),Object(l.useEffect)((function(){K&&d("Every asset below needs to be sent to complete the migration"+($?" ("+$+")":""))}),[K,d,$]),Object(l.useEffect)((function(){pe()===o.length&&d(null)}),[pe,o,d]),Object(l.useEffect)((function(){k||j(Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(U.a,{className:"clear",icon:Object(F.jsx)(O.C,{}),onClick:function(){return he()},children:"Back"}),pe()===fe(o).length?Object(F.jsx)(U.a,{className:"primary",icon:Object(F.jsx)(O.D,{}),onClick:function(){return u()},children:"Close"}):Object(F.jsx)(U.a,{className:"primary disabled",icon:Object(F.jsx)(O.D,{}),children:"Complete"})]}))}),[he,je,pe,o,j,k,u]),k?Object(F.jsx)(F.Fragment,{}):Object(F.jsxs)("div",{children:[pe()<fe(o).length?Object(F.jsx)("div",{className:"notification-hollow mb-3 warning",children:"".concat(fe(o).length-pe()," actions left to complete the migration")}):Object(F.jsx)("div",{className:"notification-hollow mb-3 success",children:"Your tokens were migrated. You can close this window"}),fe(o,S,N,R).map((function(e,n){return Object(F.jsxs)("div",{className:"migration-asset-row",children:[Object(F.jsx)("span",{className:"migration-asset-select-icon migration-asset-select-icon-permit",children:!e.icon||Z.includes(e.icon)?Object(F.jsx)(x.c,{size:18}):Object(F.jsx)("img",{src:e.icon,draggable:"false",alt:"Token Icon",onError:function(n){Q((function(n){return[].concat(Object(h.a)(n),[e.icon])}))}})}),Object(F.jsx)("div",{className:"migration-asset-name",children:e.name}),Object(F.jsxs)("div",{className:"migration-asset-amount",children:[new v.a(e.amount).div(Math.pow(10,e.decimals)).toFixed()," ",Object(F.jsxs)("span",{className:"migration-asset-amount-usd",children:["($",(e.amount*e.rate).toFixed(2),")"]})]}),Object(F.jsx)("div",{className:"separator"}),Object(F.jsx)("div",{children:e.allowance&&y.ethers.BigNumber.from(e.allowance).gte(e.amount)||e.sent?Object(F.jsxs)("div",{className:"migration-permitted",onClick:function(){return me(e.address)},children:[Object(F.jsx)(L.b,{})," Sent"]}):Object(F.jsx)(F.Fragment,{children:e.pending||e.signing?Object(F.jsxs)("div",{className:"migration-permitted warning",children:[Object(F.jsx)(L.f,{})," Sending..."]}):Object(F.jsx)(U.a,{className:"button-small secondary",onClick:function(){return me(e.address)},children:"Send"})})})]},n)}))]})},W=function(e){var n,t=e.identityAccount,r=e.signer,c=e.signerExtra,i=e.network,o=e.nativeTokenData,d=e.setSelectedTokensWithAllowance,f=e.selectedTokensWithAllowance,m=e.setError,j=e.setStep,g=e.hasERC20Tokens,y=e.hideModal,w=e.relayerURL,k=e.setModalButtons,T=e.setBeforeCloseModalHandler,C=e.gasSpeed,S=e.hidden,A=Object(l.useState)([]),E=Object(a.a)(A,2),_=E[0],N=E[1],M=Object(l.useState)(!1),P=Object(a.a)(M,2),D=P[0],I=P[1],L=Object(l.useState)(!1),U=Object(a.a)(L,2),R=U[0],W=U[1],H=Object(l.useState)("0"),G=Object(a.a)(H,2),K=G[0],q=G[1],z=Object(l.useState)(null),V=Object(a.a)(z,2),$=V[0],Y=V[1],J=Object(l.useState)("0"),X=Object(a.a)(J,2),Z=X[0],Q=X[1],ee=Object(l.useState)("0"),ne=Object(a.a)(ee,2),te=ne[0],ae=ne[1],re=Object(l.useState)(!1),se=Object(a.a)(re,2),ce=se[0],ie=se[1],oe=Object(l.useState)(null),de=Object(a.a)(oe,2),ue=de[0],le=de[1];try{n=Object(B.a)({signer:r,signerExtra:c,chainId:i.chainId})}catch(ve){m("No Web3 wallet connected. Please connect a Web3 wallet and reload the page")}var fe=Object(l.useCallback)((function(){j(0),d([])}),[d,j]),be=Object(l.useCallback)((function(){j(2)}),[j]),pe=function(e){return e.filter((function(e){return e.selected&&!e.permittable&&!e.native})).length},me=Object(l.useCallback)(Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return m(null),W(!0),g||T(null),e.next=7,n.isConnected(r.address,i.chainId).catch((function(e){m("Could not check signer connection status: "+e.error)}));case 7:e.sent?n.sendTransaction({from:r.address,to:t,gasLimit:25e3+("arbitrum"===i.id?2e5:0),gasPrice:ue,value:"0x"+new v.a(K).toString(16),chainId:i.chainId}).then(function(){var e=Object(p.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.wait();case 2:return I(!0),W(!1),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return I(!1),W(!1),e&&e.message.includes("must provide an Ethereum address")?m("Make sure your wallet is unlocked and connected with ".concat(r.address,".")):m("Native asset migration failed: "+e.message),!1})):(m(Object(F.jsxs)(F.Fragment,{children:["Please make sure your signer wallet is unlocked, and connected with ",Object(F.jsx)("b",{children:r.address})," to the correct chain: ",Object(F.jsx)("b",{children:i.id})]})),W(!1));case 9:case"end":return e.stop()}}),e)}))),[n,m,g,i,T,r,t,K,ue]),he=Object(l.useCallback)((function(e){var n=new v.a(e).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals).replace(/\.?0+$/g,"");ae(n),q(e),ie(!0)}),[o]);Object(l.useEffect)((function(){var e="".concat(w,"/gasPrice/").concat(i.id);Object(s.c)(e).then((function(e){var n=e.data.gasPrice[C];e.data.gasPrice.maxPriorityFeePerGas&&(n+=e.data.gasPrice.maxPriorityFeePerGas[C]);var t=25e3*n,a=pe(f)*n*77e3;Q(new v.a((t+a).toFixed(0)).toFixed(0));var r=new v.a(o.availableBalance).minus(t+a);Y(r.gte(0)?r.toFixed(0):0),le(n)})).catch((function(n){m(n.message+" "+e)}))}),[Q,Y,o,i,w,m,C,f]);var je=Object(l.useCallback)((function(e){if(ie(!0),""===e)return ae(0),void q(0);if(e.endsWith(".")&&2===e.split(".").length||2===e.split(".").length&&e.endsWith("0"))ae(e);else if(!isNaN(e)){var n=new v.a(e).toFixed(o.decimals);1===new v.a(n).multipliedBy(Math.pow(10,o.decimals)).comparedTo(o.availableBalance)&&(n=new v.a(o.availableBalance).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals)),n=n.replace(/\.?0+$/g,""),ae(n),q(new v.a(n).multipliedBy(Math.pow(10,o.decimals)).toFixed(0))}}),[o]);return Object(l.useEffect)((function(){var e=new v.a(o.amount).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals).replace(/\.?0+$/g,"");ae(e),q(o.amount)}),[o]),Object(l.useEffect)((function(){if(!S){k(function(){var e=[];return D?g?e.push(Object(F.jsx)(u.e,{icon:Object(F.jsx)(O.D,{}),className:"primary full",onClick:function(){return be()},children:"Next"})):e.push(Object(F.jsx)(u.e,{icon:Object(F.jsx)(O.f,{}),className:"primary full",onClick:function(){return y()},children:"Close"})):n?(e.push(Object(F.jsx)(u.e,{icon:Object(F.jsx)(O.C,{}),className:"clear",onClick:function(){return fe()},children:"Back"},"0")),R?e.push(Object(F.jsxs)(u.e,{icon:Object(F.jsx)(u.n,{}),className:"primary disabled",children:["Moving ",o.name,"..."]},"1")):e.push(Object(F.jsxs)(u.e,{icon:Object(F.jsx)(O.D,{}),className:"primary",onClick:function(){return me()},children:["Move ",o.name]},"1"))):e.push(Object(F.jsx)(u.e,{icon:Object(F.jsx)(O.f,{}),className:"clear full",onClick:function(){return y()},children:"Close"})),e}())}}),[D,g,k,y,R,fe,me,be,n,o,S]),S?Object(F.jsx)(F.Fragment,{}):Object(F.jsx)("div",{children:n&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:"migration-native-title mb-4",children:[Object(F.jsx)("div",{className:"migration-native-asset-icon",children:_.includes(o.icon)?Object(F.jsx)(x.c,{size:64}):Object(F.jsx)("img",{src:o.icon,draggable:"false",alt:"Token Icon",onError:function(e){N((function(e){return[].concat(Object(h.a)(e),[o.icon])}))}})}),Object(F.jsxs)("div",{className:"migration-native-title-asset-name",children:["Migrate native asset ",Object(F.jsx)("b",{children:o.name})]})]}),D?Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)("div",{className:"small-asset-notification success",children:["Migration of your ",o.name," was successful"]})}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:"migration-native-row",children:[Object(F.jsx)("span",{className:"migration-native-row-key",children:"Current balance"}),Object(F.jsxs)("span",{className:"migration-native-selection",onClick:function(){return he(o.availableBalance)},children:[new v.a(o.availableBalance).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name]})]}),Object(F.jsxs)("div",{className:"migration-native-row",children:[Object(F.jsx)("span",{className:"migration-native-row-key",children:"Amount to migrate"}),ce||null!==$&&K>$?Object(F.jsx)(u.z,{className:"migrate-amount-input",value:te,onChange:je}):Object(F.jsx)("div",{children:te})]}),null!==$&&new v.a(K).gt($)&&Object(F.jsxs)("div",{className:"notification-hollow warning mt-4",children:[Object(F.jsxs)("div",{children:[pe(f)?"Signer transactions cost":"Current Transaction cost",": ~",new v.a(Z).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name,Object(F.jsxs)("span",{className:"migration-native-usd",children:[" ($",new v.a(Z).multipliedBy(o.rate).toFixed(2),")"]})]}),Object(F.jsx)("div",{className:"mt-3 mb-3",children:$>0?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("span",{children:"You should migrate up to "}),Object(F.jsxs)("span",{className:"migration-native-selection",onClick:function(){return he($)},children:[new v.a($).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name]}),Object(F.jsx)("span",{children:" because will you need funds to pay the transaction costs."})]}):Object(F.jsx)("span",{children:"You do not have enough funds to pay the transaction fee."})})]}),R&&g&&Object(F.jsx)("div",{className:"notification-hollow info mt-4",children:"Waiting for the transaction to be mined before continuing migration..."}),R&&!g&&Object(F.jsxs)("div",{className:"notification-hollow info mt-4",children:["The amount of ",o.name," will be updated in your wallet, once the transaction has been confirmed and mined. If you confirmed your transaction, you can already close this window"]})]})]})})},H=function(e){var n=e.addRequest,t=e.selectedAccount,r=e.accounts,s=e.network,c=e.hideModal,i=e.relayerURL,o=e.portfolio,d=e.setModalButtons,f=e.setModalSteps,b=e.setBeforeCloseModalHandler,p=Object(l.useState)([]),m=Object(a.a)(p,2),h=m[0],j=m[1],v=Object(l.useState)(null),g=Object(a.a)(v,2),x=g[0],y=g[1],w=Object(l.useState)(!1),k=Object(a.a)(w,2),T=k[0],C=k[1],S=Object(l.useState)(!1),A=Object(a.a)(S,2),E=A[0],_=A[1],M=Object(l.useState)(0),P=Object(a.a)(M,2),D=P[0],B=P[1],L=Object(l.useState)([]),U=Object(a.a)(L,2),H=U[0],G=U[1],K=Object(l.useState)(null),q=Object(a.a)(K,2),z=q[0],V=q[1],$=Object(l.useState)(!1),Y=Object(a.a)($,2),J=Y[0],X=Y[1],Z=Object(l.useState)(null),Q=Object(a.a)(Z,2),ee=Q[0],ne=Q[1],te=r.find((function(e){return e.id===t}));return Object(l.useEffect)((function(){0===D&&(V(null),j([]),y(null),C(!1),ne(null),b(null))}),[s,t,D,b]),Object(l.useEffect)((function(){E&&(_(!1),y(h.find((function(e){return e.native}))),C(!!h.find((function(e){return!e.native}))))}),[E,te,h,s,t]),Object(l.useEffect)((function(){var e=D;D>0&&!x&&(e-=1),f({steps:H.map((function(e){return{name:e}})),stepIndex:e})}),[x,f,D,H]),Object(l.useEffect)((function(){var e=function(){X(!0),d([Object(F.jsx)(u.e,{icon:Object(F.jsx)(O.C,{}),className:"clear buttonComponent",onClick:function(){return X(!1)},children:"Back"},"0"),Object(F.jsx)(u.e,{icon:Object(F.jsx)(O.f,{}),className:"danger buttonComponent",onClick:function(){return c()},children:"Close"},"1")])};D>0&&b((function(){return e}))}),[D,b,d,c,J]),Object(F.jsxs)("div",{children:[z&&Object(F.jsx)("div",{className:"mt-3 error",children:z}),Object(F.jsxs)("div",{id:"assets-migration",children:[J&&Object(F.jsx)("div",{className:"notification-hollow warning mt-4",children:"By closing this window, your progress will be lost. Are you sure you want to close this window?"}),0===D&&Object(F.jsx)(I,{hidden:J,signerAccount:te.signer.address,identityAccount:t,network:s,PERMITTABLE_COINS:N,setIsSelectionConfirmed:_,setStep:B,portfolio:o,relayerURL:i,setModalButtons:d,hideModal:c,setError:V,setSelectedTokensWithAllowance:j,setStepperSteps:G,setGasSpeed:ne}),1===D&&x&&Object(F.jsx)(W,{hidden:J,signer:te.signer,identityAccount:t,network:s,addRequest:n,signerExtra:te.signerExtra,setError:V,nativeTokenData:x,hideModal:c,setStep:B,relayerURL:i,hasERC20Tokens:T,setModalButtons:d,setSelectedTokensWithAllowance:j,selectedTokensWithAllowance:h,setBeforeCloseModalHandler:b,gasSpeed:ee}),2===D&&Object(F.jsx)(R,{hidden:J,signer:te.signer,identityAccount:t,network:s,addRequest:n,PERMITTABLE_COINS:N,signerExtra:te.signerExtra,setError:V,selectedTokensWithAllowance:h,hideModal:c,setStep:B,setModalButtons:d,gasSpeed:ee,relayerURL:i})]})]})},G=function(e){var n=e.addRequest,t=e.selectedAccount,r=e.selectedNetwork,s=e.accounts,c=e.relayerURL,i=e.portfolio,o=Object(d.f)(),f=o.hideModal,b=o.setBeforeCloseModalHandler,p=Object(l.useState)(null),m=Object(a.a)(p,2),h=m[0],j=m[1],v=Object(l.useState)({steps:[],stepIndex:0}),g=Object(a.a)(v,2),x=g[0],O=g[1];return Object(F.jsx)(u.o,{id:"asset-migration-modal",title:Object(F.jsxs)("div",{children:[Object(F.jsx)("span",{children:"Migrate Assets"}),Object(F.jsx)(u.y,{steps:x.steps,currentStep:x.stepIndex,noLabels:!1})]}),buttons:h,children:Object(F.jsx)(H,{addRequest:n,selectedAccount:t,network:r,accounts:s,hideModal:f,relayerURL:c,portfolio:i,setModalButtons:j,setModalSteps:O,setBeforeCloseModalHandler:b})})};n.a=function(e){var n,t,r=e.addRequest,s=e.selectedAccount,c=e.accounts,i=e.selectedNetwork,u=e.relayerURL,f=e.portfolio,b=e.closeable,p=void 0!==b&&b,m=e.linkMargin,h=void 0!==m&&m,j=e.useStorage,v=Object(l.useState)(!1),g=Object(a.a)(v,2),x=g[0],O=g[1],y=Object(l.useState)(!1),w=Object(a.a)(y,2),k=w[0],T=w[1],C=Object(d.f)().showModal,S=j({key:"migrationSeen",defaultValue:{}}),A=Object(a.a)(S,2),E=A[0],_=A[1],N=c.find((function(e){return e.id===s}));try{t=Object(B.a)({signer:N.signer,signerExtra:N.signerExtra,chainId:i.chainId})}catch(P){}var M=Object(l.useCallback)((function(){T(!0),_((function(e){return e[s+i.id]=!0,e}))}),[s,i,_]);Object(l.useEffect)((function(){var e=!1;O(!1);return function(n){var t=n.networkId,a=n.identityAccount,r=n.accounts.find((function(e){return e.id===a}));r.signer&&o({networkId:t,account:r.signer.address}).then((function(n){if(!e){var t=n.filter((function(e){return e.balanceUSD>.001}));O(!!t.length)}})).catch((function(e){console.error(e)}))}({identityAccount:s,networkId:i.id,accounts:c}),function(){return e=!0}}),[s,i,c]),Object(l.useEffect)((function(){T(p&&!!E[s+i.id])}),[p,s,i,E]);return(null===(n=t)||void 0===n?void 0:n.provider)||N.signerExtra&&["ledger","trezor","Lattice"].includes(N.signerExtra.type)?x&&!k&&Object(F.jsxs)("div",{className:"migration-banner",children:[Object(F.jsxs)("div",{className:"migration-banner-message",children:[Object(F.jsx)("div",{children:"We detected that your signer account has tokens that can be transferred to your Ambire account. We recommend doing this in order to maximize your $WALLET rewards."}),Object(F.jsx)("span",{className:"link"+(h?" link-margin":""),onClick:function(){C(Object(F.jsx)(G,{addRequest:r,selectedNetwork:i,selectedAccount:s,accounts:c,relayerURL:u,portfolio:f}))},children:"Click here to migrate those tokens"})]}),p&&Object(F.jsx)("div",{className:"migration-banner-close",children:Object(F.jsx)(L.j,{onClick:function(){return M()}})})]}):Object(F.jsx)(F.Fragment,{})}}}]);
//# sourceMappingURL=18.9f64f8f0.chunk.js.map