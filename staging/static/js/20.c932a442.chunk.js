(this["webpackJsonpambire-wallet"]=this["webpackJsonpambire-wallet"]||[]).push([[20],{1608:function(e,n,t){},1609:function(e,n,t){e.exports={wrapper:"Providers_wrapper__7mBkD",provider:"Providers_provider__39HAw",logo:"Providers_logo__22UO3",details:"Providers_details__3D5WY",type:"Providers_type__ZBapd",fees:"Providers_fees__3H-KG",limits:"Providers_limits__37PHy",currencies:"Providers_currencies__ffX78",disabled:"Providers_disabled__127mG",networkWarning:"Providers_networkWarning__3sy45"}},1610:function(e,n,t){e.exports={deposit:"Deposit_deposit__MVFPl",depositAddress:"Deposit_depositAddress__8GtBi",inputClass:"Deposit_inputClass__1kOnb",panel:"Deposit_panel__3vfYo",heading:"Deposit_heading__37Rps",title:"Deposit_title__FtpVm",subtitle:"Deposit_subtitle__28DJk",description:"Deposit_description__1u2D2",margin:"Deposit_margin__8HgjN",qrCode:"Deposit_qrCode__3gFm8",networks:"Deposit_networks__20Jgz",networksTitle:"Deposit_networksTitle___H2Hn",list:"Deposit_list__2V21e",network:"Deposit_network__3IP_d",icon:"Deposit_icon__2OVP1",name:"Deposit_name__3iAeA",logos:"Deposit_logos__1W5P7"}},1629:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return Q}));var a,i=t(9),c=t(31),r=t.n(c),s=t(2),o=t(85),d=t(738),l=t.n(d),u=t(226),m=t.p+"static/media/ramp.51a5841d.svg",b=t.p+"static/media/paytrie.81b0b17f.svg",f=t.p+"static/media/transak.cc92c218.svg",j=t.p+"static/media/kriptomat.6b5104a5.svg",p=t.p+"static/media/guardarian.770dcdb9.svg",v=t(3),h=t.n(v),O=t(8),g=t(15),x=t(12),y=t(1606),w=t(1607),k=t.n(w),T=function(e){var n=e.url,t=e.title,a=e.w,i=e.h,c=void 0!==window.screenLeft?window.screenLeft:window.screenX,r=void 0!==window.screenTop?window.screenTop:window.screenY,s=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,d=s/window.screen.availWidth,l=(s-a)/2/d+c,u=(o-i)/2/d+r,m=window.open(n,t,"\n\t\ttoolbar=no,scrollbars=no,resizable=no\n\t\twidth=".concat(a/d,", \n\t\theight=").concat(i/d,", \n\t\ttop=").concat(u,", \n\t\tleft=").concat(l,",\n\t\t"));window.focus&&m.focus()},C=t(93),N=t(46),A=t(37),S=(t(1608),t(48)),_=[{label:"EUR",value:"EUR",icon:"https://changenow.io/images/sprite/currencies/eur.svg"},{label:"GBP",value:"GBP",icon:"https://changenow.io/images/sprite/currencies/gbp.svg"},{label:"USD",value:"USD",icon:"https://changenow.io/images/sprite/currencies/usd.svg"}],E={ethereum:"ETH","binance-smart-chain":"BSC",polygon:"MATIC",fantom:"FTM",avalanche:"AVAX"},M={ethereum:"ETH","binance-smart-chain":"BNB",polygon:"MATIC",fantom:"FTM",avalanche:"AVAX"},F="0x"+"0".repeat(40),L=function(e){var n=e.relayerURL,t=e.selectedNetwork,a=e.initMode,c=e.tokens,r=e.walletAddress,o="".concat(n,"/guardarian/currencies/fiat"),d="".concat(n,"/guardarian/currencies/crypto"),l=_,u=Object(N.a)().addToast,m=Object(s.useState)(t),b=Object(i.a)(m,2),f=b[0],j=b[1],p=Object(s.useState)(""),v=Object(i.a)(p,2),h=v[0],O=v[1],g=Object(s.useState)(""),x=Object(i.a)(g,2),y=x[0],w=x[1],k=Object(s.useState)(a),T=Object(i.a)(k,2),A=T[0],S=T[1],L=Object(s.useState)("50"),D=Object(i.a)(L,2),U=D[0],B=D[1],I=Object(s.useState)({data:[]}),P=Object(i.a)(I,2),R=P[0],W=P[1],H=Object(s.useState)({data:[]}),G=Object(i.a)(H,2),V=G[0],q=G[1],K=Object(s.useState)(null),Y=Object(i.a)(K,2),z=Y[0],X=Y[1],$=Object(s.useState)({data:null,isLoading:!1}),J=Object(i.a)($,2),Z=J[0],Q=J[1],ee=Object(s.useMemo)((function(){var e,n;return"buy"===A?{data:(null===R||void 0===R||null===(e=R.data)||void 0===e?void 0:e.filter((function(e){return e.networks.find((function(e){return e.network===E[f]&&e.payment_methods.some((function(e){return e.withdrawal_enabled}))}))})).map((function(e){return{label:e.ticker,value:e.ticker,icon:e.logo_url}})).filter((function(e){return e.value})))||[],isLoading:null===R||void 0===R?void 0:R.isLoading}:"sell"===A?{data:(null===R||void 0===R||null===(n=R.data)||void 0===n?void 0:n.filter((function(e){return e.networks.find((function(e){return e.network===E[f]&&e.payment_methods.some((function(e){return e.deposit_enabled}))&&c.find((function(n){var t,a;return(null===n||void 0===n||null===(t=n.address)||void 0===t?void 0:t.toLowerCase())===(null===e||void 0===e||null===(a=e.token_contract)||void 0===a?void 0:a.toLowerCase())||(null===n||void 0===n?void 0:n.address)===F&&null===(null===e||void 0===e?void 0:e.token_contract)}))}))})).map((function(e){return{label:e.ticker,value:e.ticker,icon:e.logo_url}})).filter((function(e){return e.value})))||[],isLoading:R.isLoading}:void 0}),[A,R,f,c]),ne=Object(s.useMemo)((function(){var e;return"buy"===A?{data:(null===V||void 0===V||null===(e=V.data)||void 0===e?void 0:e.map((function(e){var n;return{label:e.ticker,value:e.ticker,icon:e.logo_url||"https://changenow.io/images/sprite/currencies/".concat(null===e||void 0===e||null===(n=e.ticker)||void 0===n?void 0:n.toLowerCase(),".svg")}})))||[],isLoading:null===V||void 0===V?void 0:V.isLoading}:"sell"===A?{data:l,isLoading:!1}:void 0}),[A,V,l]);Object(s.useEffect)((function(){"buy"===A?(B("50"),O(ne.data&&ne.data[0]?ne.data[0].value:null),w(M[f])):"sell"===A&&(B(""),O(ee.data&&ee.data[0]?ee.data[0].value:null),w(ne.data&&ne.data[0]?ne.data[0].value:null))}),[A,ne,ee,f]),Object(s.useEffect)((function(){q({data:null,isLoading:!0}),Object(C.c)(o).then((function(e){return q({data:e,isLoading:!1,error:{},message:""})})).catch((function(e){q({data:null,isLoading:!1,error:e,message:"Error while fetching fiat list"}),u("Error while fetching fiat list",{error:!0})}))}),[o,u]),Object(s.useEffect)((function(){W({data:null,isLoading:!0}),Object(C.c)(d).then((function(e){W({data:e,isLoading:!1,error:{},message:""})})).catch((function(e){W({data:null,isLoading:!1,error:e,message:"Error while fetching crypto list"}),u("Error while fetching crypto list",{error:!0})}))}),[f,d,u]);var te=Object(s.useCallback)((function(){var e="buy"===A?"".concat(h,"_").concat(y,"-").concat(E[f]):"sell"===A?"".concat(h,"-").concat(E[f],"_").concat(y):null;return e?"".concat(n,"/guardarian/market-info/").concat(e):null}),[A,h,y,f,n]);Object(s.useEffect)((function(){if(!f||!h||!y||!A)return X({data:null,isLoading:!1});X({data:null,isLoading:!0});var e=te(),n=!1;return Object(C.c)(e).then((function(e){var t=e.data;return!n&&X({data:t,isLoading:!1})})).catch((function(e){return!n&&(X({data:null,isLoading:!1,error:e,message:"Error while fetching market info"}),u("Error while fetching market info",{error:!0}))})),function(){n=!0}}),[f,A,h,y,u,te]);var ae=Object(s.useCallback)((function(){return"buy"===A?"".concat(n,"/guardarian/estimate/").concat(h,"/").concat(f,"/").concat(U,"/").concat(y,"/","true"):"".concat(n,"/guardarian/estimate/").concat(h,"/").concat(f,"/").concat(U,"/").concat(y,"/","false")}),[A,n,h,f,U,y]);return Object(s.useEffect)((function(){if(!f||!h||!y||!A||!U)return Q({data:null,isLoading:!1});Q({data:null,isLoading:!0});var e=ae(),n=!1;return Object(C.c)(e).then((function(e){var t=e.data;return!n&&Q({data:t,isLoading:!1})})).catch((function(e){return!n&&(Q({data:null,isLoading:!1,error:e,message:"Error while fetching estimate info"}),u("Error while fetching estimate info",{error:!0}))})),function(){n=!0}}),[f,A,h,y,U,u,ae]),{marketInfo:z,estimateInfo:Z,cryptoList:ee,fiatList:ne,network:f,from:h,to:y,mode:A,amount:U,cryptoCurrencies:R,setNetwork:j,setFrom:O,setTo:w,setMode:S,setAmount:B,genTxnUrl:function(){return"buy"===A?"".concat(n,"/guardarian/transaction/").concat(h,"/null/").concat(U,"/").concat(y,"/").concat(t,"/").concat(r):"".concat(n,"/guardarian/transaction/").concat(h,"/").concat(t,"/").concat(U,"/").concat(y,"/null/null")},NETWORK_MAPPING:E,NATIVE_ADDRESS:F,DEFAULT_CRYPTO:M}},D=t(195),U=t.n(D),B=t(4),I=function(e){var n,t,a,c,r,d,l,u,m,b,f,j,p,v,h,O,g,x,y,w=e.relayerURL,k=e.walletAddress,_=e.selectedNetwork,E=e.portfolio,M=Object(A.f)().hideModal,F=Object(N.a)().addToast,D=L({relayerURL:w,selectedNetwork:_,initMode:"buy",tokens:E.tokens,walletAddress:k,addToast:F}),I=Object(s.useState)(!1),P=Object(i.a)(I,2),R=P[0],W=P[1],H=Object(s.useCallback)((function(){var e;if(E.tokens&&(null===D||void 0===D||null===(e=D.cryptoCurrencies)||void 0===e?void 0:e.data)&&"sell"===D.mode){var n,t,a,i=null===D||void 0===D||null===(n=D.cryptoCurrencies)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.find((function(e){return e.ticker===D.from}));return null===E||void 0===E||null===(a=E.tokens)||void 0===a?void 0:a.find((function(e){var n;return null===i||void 0===i||null===(n=i.networks)||void 0===n?void 0:n.find((function(n){var t,a;return(null===n||void 0===n||null===(t=n.token_contract)||void 0===t?void 0:t.toLowerCase())===(null===e||void 0===e||null===(a=e.address)||void 0===a?void 0:a.toLowerCase())||(null===n||void 0===n?void 0:n.network)===D.NETWORK_MAPPING[D.network]&&(null===e||void 0===e?void 0:e.address.toLowerCase())===D.NATIVE_ADDRESS&&null===(null===n||void 0===n?void 0:n.token_contract)}))}))}return{}}),[D,E.tokens]),G=Object(s.useMemo)((function(){var e,n,t,a=null===D||void 0===D||null===(e=D.marketInfo)||void 0===e?void 0:e.data;if((null===D||void 0===D||null===(n=D.marketInfo)||void 0===n?void 0:n.error)||(null===D||void 0===D||null===(t=D.estimateInfo)||void 0===t?void 0:t.error))return"Sorry! We couldn't estimate your order! Please try again later!";if(!a)return"";var i=parseFloat(D.amount),c=parseFloat(a.min),r=parseFloat(a.max);if("buy"===D.mode){if(i<c)return"Minimum amount is ".concat(a.min," ").concat(a.from);if(i>r)return"Maximum amount is ".concat(a.max," ").concat(a.from)}else if("sell"===D.mode){var s=H();if(i<c)return"Minimum amount is ".concat(a.min," ").concat(a.from);if(i>r)return"Maximum amount is ".concat(a.max," ").concat(a.from);if(s&&(null===D||void 0===D?void 0:D.from)&&i>s.balance)return"You do not have enough funds"}return""}),[D,H]),V=function(){D.setMode((function(e){return"buy"===e?"sell":"buy"})),D.setAmount(""),D.setFrom(""),D.setTo("buy"===D.mode?D.DEFAULT_CRYPTO[D.NETWORK_MAPPING[D.network]]:"")};var q=Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(o.e,{clear:!0,icon:Object(B.jsx)(S.y,{}),onClick:function(){return M()},children:"Close"}),Object(B.jsx)(o.e,{disabled:""!==G||(null===D||void 0===D||null===(n=D.marketInfo)||void 0===n?void 0:n.isLoading)||(null===D||void 0===D||null===(t=D.estimateInfo)||void 0===t?void 0:t.isLoading)||(null===D||void 0===D||null===(a=D.txn)||void 0===a?void 0:a.isLoading)||""===(null===D||void 0===D?void 0:D.amount)||R,onClick:function(){W(!0),Object(C.c)(D.genTxnUrl()).then((function(e){var n=e.data;W(!1),(null===n||void 0===n?void 0:n.redirect_url)&&T({url:U.a.format(null===n||void 0===n?void 0:n.redirect_url),title:"Guardarian Deposit",w:560,h:710})})).catch((function(e){F("Error while trying to send transaction",{error:!0}),W(!1)}))},children:"buy"===D.mode?"Buy":"Sell"})]});return Object(B.jsxs)(o.o,{id:"guardarian-modal",title:"Guardarian",buttons:q,children:[Object(B.jsxs)("div",{className:"buy-sell-btns-wrapper",children:[Object(B.jsx)("div",{className:"buy"===D.mode?"button active":"button",onClick:V,children:"Buy"}),Object(B.jsx)("div",{className:"sell"===D.mode?"button active":"button",onClick:V,children:"Sell"})]}),Object(B.jsxs)("div",{className:"input-currencies-wrapper",children:[Object(B.jsx)("div",{className:"amount",children:Object(B.jsx)(o.z,{value:D.amount,label:"You send",placeholder:"Input amount",onInput:function(e){D.setAmount(e)}})}),Object(B.jsx)("div",{className:"currency",children:"buy"===D.mode&&!(null===D||void 0===D||null===(c=D.fiatList)||void 0===c?void 0:c.isLoading)||"sell"===(null===D||void 0===D?void 0:D.mode)&&!(null===D||void 0===D||null===(r=D.cryptoList)||void 0===r?void 0:r.isLoading)?Object(B.jsx)(o.w,{searchable:!0,defaultValue:D.from,items:"buy"===D.mode?D.fiatList.data:D.cryptoList.data,onChange:function(e){return function(e){D.setFrom(e)}(e.value)}}):Object(B.jsxs)("div",{className:"loading-wrapper",children:[Object(B.jsx)(o.n,{})," "]})})]}),""!==G&&Object(B.jsx)("p",{style:{color:"red"},children:G}),Object(B.jsxs)("div",{className:"estimation-info-wrapper",children:[Object(B.jsx)("div",{className:"extra-fees",children:Object(B.jsx)(o.B,{label:"All the exchange fees are added into the rate. There are no extra costs.",children:Object(B.jsx)("p",{children:"No extra fees"})})}),Object(B.jsx)("div",{className:"estimation-rate",children:Object(B.jsx)(o.B,{label:"This is expected rate. Guardarian guarantees to pick up the best possible rate on the moment of the exchange",children:Object(B.jsxs)("p",{children:["Estimation rate: "," ",!D.estimateInfo.isLoading&&(null===D||void 0===D||null===(d=D.estimateInfo)||void 0===d?void 0:d.data)&&""===G?Object(B.jsxs)(B.Fragment,{children:[1+(null===D||void 0===D||null===(l=D.estimateInfo)||void 0===l||null===(u=l.data)||void 0===u?void 0:u.from_currency)," \u2248 ",null===D||void 0===D||null===(m=D.estimateInfo)||void 0===m||null===(b=m.data)||void 0===b?void 0:b.estimated_exchange_rate," ",null===D||void 0===D||null===(f=D.estimateInfo)||void 0===f||null===(j=f.data)||void 0===j?void 0:j.to_currency]}):Object(B.jsx)(B.Fragment,{})]})})})]}),Object(B.jsxs)("div",{className:"input-currencies-wrapper",children:[Object(B.jsx)("div",{className:"amount",children:D.estimateInfo.isLoading?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("label",{children:"You get"}),Object(B.jsxs)("div",{className:"loading-wrapper",children:[Object(B.jsx)(o.n,{})," "]})]}):Object(B.jsx)(o.z,{value:(null===D||void 0===D||null===(p=D.estimateInfo)||void 0===p?void 0:p.data)?null===D||void 0===D||null===(v=D.estimateInfo)||void 0===v||null===(h=v.data)||void 0===h?void 0:h.value:"",disabled:!0,label:"You get"})}),Object(B.jsx)("div",{className:"currency",children:"buy"===(null===D||void 0===D?void 0:D.mode)&&!(null===D||void 0===D||null===(O=D.cryptoList)||void 0===O?void 0:O.isLoading)||"sell"===(null===D||void 0===D?void 0:D.mode)&&!(null===D||void 0===D||null===(g=D.fiatList)||void 0===g?void 0:g.isLoading)?Object(B.jsx)(o.w,{searchable:!0,defaultValue:null===D||void 0===D?void 0:D.to,items:"sell"===(null===D||void 0===D?void 0:D.mode)?null===D||void 0===D||null===(x=D.fiatList)||void 0===x?void 0:x.data:null===D||void 0===D||null===(y=D.cryptoList)||void 0===y?void 0:y.data,onChange:function(e){return function(e){D.setTo(e)}(e.value)}}):Object(B.jsxs)("div",{className:"loading-wrapper",children:[Object(B.jsx)(o.n,{})," "]})})]})]})},P=t(110),R=function(e){var n=e.walletAddress,t=e.selectedNetwork,a=e.relayerURL,c=e.portfolio,r=Object(s.useState)([]),o=Object(i.a)(r,2),d=o[0],l=o[1],u=Object(N.a)().addToast,m=Object(A.f)().showModal,b=function(){var e=Object(x.a)(h.a.mark((function e(){var a,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l((function(e){return["PayTrie"].concat(Object(g.a)(e))})),a={ethereum:"USDC",polygon:"USDC-P","binance-smart-chain":"USDT-B"},(i=U.a.parse(P.b,!0)).search=null,i.query=Object(O.a)(Object(O.a)({},i.query),{},{addr:n,rightSideLabel:a[t]}),T({url:U.a.format(i),title:"Paytrie Deposit",w:450,h:700}),l((function(e){return e.filter((function(e){return"PayTrie"!==e}))}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(x.a)(h.a.mark((function e(){var i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l((function(e){return["Kriptomat"].concat(Object(g.a)(e))})),e.next=3,Object(C.c)("".concat(a,"/kriptomat/").concat(n,"/").concat(t));case 3:(i=e.sent).success&&i.data&&i.data.url?T({url:U.a.format(i.data.url),title:"Kriptomat Deposit",w:515,h:600}):u("Error: ".concat(i.data?i.data:"unexpected error"),{error:!0}),l((function(e){return e.filter((function(e){return"Kriptomat"!==e}))}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{openRampNetwork:function(){new y.a({hostAppName:"Ambire",hostLogoUrl:"https://www.ambire.com/ambire-logo.png",variant:"auto",swapAsset:{ethereum:"ERC20_*,ETH_*",polygon:"MATIC_ERC20_*,MATIC_*",avalanche:"AVAX_*","binance-smart-chain":"BSC_*,BSC_ERC20_*",gnosis:"XDAI_*"}[t],userAddress:n,hostApiKey:P.c}).show()},openPayTrie:b,openTransak:function(){var e=new k.a({apiKey:P.f,environment:P.g,networks:{avalanche:"avaxcchain","binance-smart-chain":"bsc",moonbeam:"mainnet"}[t]||t,defaultCryptoCurrency:{ethereum:"USDC",polygon:"USDC",arbitrum:"ETH",avalanche:"AVAX","binance-smart-chain":"BNB",moonriver:"MOVR",moonbeam:"GLMR",optimism:"USDC"}[t],disableWalletAddressForm:!0,walletAddress:n,themeColor:"282b33",email:"",redirectURL:"",hostURL:window.location.origin,widgetHeight:"calc(100% - 60px)",widgetWidth:"100%"});e.init(),e.on(e.ALL_EVENTS,(function(e){console.log(e)})),e.on(e.EVENTS.TRANSAK_ORDER_SUCCESSFUL,(function(n){console.log(n),e.close()}))},openKriptomat:f,openGuardarian:function(){l((function(e){return["Guardarian"].concat(Object(g.a)(e))})),m(Object(B.jsx)(I,{relayerURL:a,walletAddress:n,selectedNetwork:t,portfolio:c})),l((function(e){return e.filter((function(e){return"Guardarian"!==e}))}))},isLoading:d}},W=t(1609),H=t.n(W),G=["title","titleId"];function V(){return V=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},V.apply(this,arguments)}function q(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function K(e,n){var t=e.title,i=e.titleId,c=q(e,G);return s.createElement("svg",V({id:"Information_icon","data-name":"Information icon",xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",ref:n,"aria-labelledby":i},c),t?s.createElement("title",{id:i},t):null,a||(a=s.createElement("g",{id:"Group_29","data-name":"Group 29",transform:"translate(78 849) rotate(180)"},s.createElement("rect",{id:"Boundary",width:24,height:24,transform:"translate(54 825)",fill:"none"}),s.createElement("path",{id:"Shape",d:"M1987,23a10,10,0,1,1,10-10A10.012,10.012,0,0,1,1987,23Zm0-8a1,1,0,1,0,1,1A1,1,0,0,0,1987,15Zm0-8a1,1,0,0,0-1,1v5a1,1,0,1,0,2,0V8A1,1,0,0,0,1987,7Z",transform:"translate(-1921 824)",fill:"#ebecff"}))))}var Y=s.forwardRef(K);t.p;function z(e){var n=e.walletAddress,t=e.networkDetails,a=e.relayerURL,i=e.portfolio,c=R({walletAddress:n,selectedNetwork:t.id,relayerURL:a,portfolio:i}),r=c.openRampNetwork,s=c.openPayTrie,d=c.openTransak,l=c.openKriptomat,u=c.openGuardarian,v=c.isLoading,h=[{logo:p,name:"Guardarian",type:"Buy with Bank Transfer, Credit/Debit Card, Sell Crypto",fees:"from 2%",limits:"up to 15k EUR/monthly on and off ramp",currencies:"GBP, EUR, USD and many more",networks:["ethereum","polygon","binance-smart-chain","fantom"],onClick:function(){return u()}},{logo:j,name:"Kriptomat",type:"Credit Card",fees:"2.45%",limits:"up to 5000 EUR/day",currencies:"USD, EUR, GBP",networks:["ethereum","polygon","avalanche","binance-smart-chain"],onClick:function(){return l()}},{logo:m,name:"Ramp",type:"Bank Transfer, Credit/Debit Card, Apple Pay",fees:"0.49%-2.9%",limits:"10,000EUR/m",currencies:"USD, EUR, GBP",networks:["ethereum","polygon","avalanche","binance-smart-chain","gnosis"],onClick:function(){return r()}},{logo:b,name:"PayTrie",type:"Bank Transfer",fees:"1% (min. $2 CAD)",limits:"$2,000CAD/day",currencies:"CAD",networks:["ethereum","polygon","binance-smart-chain"],onClick:function(){return s()}},{logo:f,name:"Transak",type:"Credit/Debit card and Bank Transfer (methods availability depends on location)",fees:"from 0.5%",limits:"up to 15,000 EUR/day",currencies:"GBP, EUR, USD and many more",networks:["ethereum","polygon","avalanche","arbitrum","binance-smart-chain","moonriver","moonbeam","optimism"],onClick:function(){return d()}}],O=function(e){return e.includes(t.id)?null:"disabled"};return Object(B.jsxs)("div",{className:H.a.wrapper,children:[h.map((function(e){var n=e.logo,t=e.name,a=e.type,i=e.fees,c=e.limits,r=e.currencies,s=e.networks,d=e.onClick;return Object(B.jsxs)("div",{className:"".concat(H.a.provider," ").concat(O(s)||""),onClick:d,children:[Object(B.jsx)("div",{className:H.a.logo,children:Object(B.jsx)("img",{src:n,alt:t})}),v.includes(t)?Object(B.jsxs)("div",{children:[" ",Object(B.jsx)(o.n,{})," "]}):Object(B.jsxs)("div",{className:H.a.details,children:[Object(B.jsx)("div",{className:H.a.type,children:a}),Object(B.jsxs)("div",{className:H.a.fees,children:["Fees: ",i]}),Object(B.jsxs)("div",{className:H.a.limits,children:["Limits: ",c]}),Object(B.jsxs)("div",{className:H.a.currencies,children:["Currencies: ",r]})]})]},t)})),"ethereum"!==t.id?Object(B.jsxs)("label",{className:H.a.networkWarning,children:[Object(B.jsx)(Y,{}),Object(B.jsxs)("label",{children:["Some deposit methods are unavailable on ",t.name,". Switch to Ethereum for the widest support."]})]}):null]})}var X=t(57),$=t(760),J=t(1610),Z=t.n(J);function Q(e){var n=e.selectedAcc,t=e.selectedNetwork,a=e.accounts,c=e.addRequest,d=e.relayerURL,m=e.portfolio,b=e.useStorage,f=X.a.find((function(e){return e.id===t.id})),j=Object(s.useState)(""),p=Object(i.a)(j,2),v=p[0],h=p[1],O=Object(s.useCallback)((function(){l.a.toDataURL(n,{quality:1,margin:1},(function(e,n){if(e)return console.error(e);h(n)}))}),[n]);return Object(s.useEffect)((function(){return O()}),[O]),Object(B.jsxs)("section",{className:Z.a.deposit,children:[Object(B.jsxs)(o.s,{className:Z.a.panel,children:[Object(B.jsxs)("div",{className:Z.a.heading,children:[Object(B.jsx)("div",{className:Z.a.title,children:"Deposit Tokens"}),Object(B.jsx)("div",{className:Z.a.subtitle,children:"Direct Deposit"})]}),Object(B.jsxs)("div",{className:Z.a.description,children:[Object(B.jsx)(u.a,{className:Z.a.depositAddress,inputContainerClass:Z.a.inputClass,label:"Send ".concat(f.nativeAssetSymbol,", tokens or collectibles (NFTs) to this address:"),value:n,copy:!0}),Object(B.jsx)("img",{className:Z.a.qrCode,alt:"QR Code",src:v})]}),Object(B.jsxs)("div",{className:Z.a.networks,children:[Object(B.jsx)("label",{className:Z.a.networksTitle,children:"Following networks supported on this address:"}),Object(B.jsx)("div",{className:Z.a.list,children:X.a.filter((function(e){return!e.hide})).map((function(e){var n=e.id,t=e.icon,a=e.name;return Object(B.jsxs)("div",{className:Z.a.network,children:[Object(B.jsx)("div",{className:Z.a.icon,style:{backgroundImage:"url(".concat(t,")")}}),Object(B.jsx)("div",{className:Z.a.name,children:"binance-smart-chain"===n?"BSC":a})]},n)}))})]}),Object(B.jsx)($.a,{selectedNetwork:t,selectedAccount:n,accounts:a,addRequest:c,linkMargin:!0,relayerURL:d,portfolio:m,useStorage:b})]}),Object(B.jsxs)(o.s,{className:Z.a.panel,children:[Object(B.jsxs)("div",{className:Z.a.heading,children:[Object(B.jsx)("div",{className:Z.a.title,children:"Fiat Currency"}),Object(B.jsx)("div",{className:Z.a.subtitle,children:"Credit Card & Bank Transfer"})]}),Object(B.jsx)("div",{className:r()(Z.a.description,Z.a.margin),children:"Deposit with credit card to your account directly using one of our partners"}),Object(B.jsx)(z,{walletAddress:n,networkDetails:f,relayerURL:d,portfolio:m})]})]})}},525:function(e,n,t){},736:function(e,n,t){},760:function(e,n,t){"use strict";var a=t(9),i=(t(525),t(110)),c=t(93),r="0x0000000000000000000000000000000000000000",s=t(57);function o(e){var n,t=e.networkId,a=e.account;return(null===(n=s.a.find((function(e){return e.id===t})))||void 0===n?void 0:n.relayerlessOnly)?Promise.resolve([]):a?Object(c.c)("".concat(i.h,"/protocols/tokens/balances?addresses[]=").concat(a,"&network=").concat(t,"&api_key=").concat(i.j,"&newBalances=true&available_on_coingecko=true")).then((function(e){var n=a.toLowerCase();if(!e[n])return[];if(!e[n].products[0])return[];var s=e[n].products[0].assets.map((function(e){return{address:e.tokens[0].address,symbol:e.tokens[0].symbol,decimals:e.tokens[0].decimals}})),o="".concat(i.h,"/protocols/tokens/balances?addresses[]=").concat(a,"&network=").concat(t,"&api_key=").concat(i.j,"&customTokens=").concat(JSON.stringify(s),"&available_on_coingecko=true");return Object(c.c)(o).then((function(e){var t,a;return(null===(t=e[n])||void 0===t||null===(a=t.products[0])||void 0===a?void 0:a.assets).map((function(e){return{name:e.tokens[0].symbol,icon:e.tokens[0].tokenImageUrl,address:e.tokens[0].address.toLowerCase(),native:e.tokens[0].address===r,decimals:e.tokens[0].decimals,availableBalance:e.tokens[0].balanceRaw,balanceUSD:e.tokens[0].balanceUSD,rate:e.tokens[0].balanceUSD/e.tokens[0].balanceRaw}}))})).catch((function(e){throw Error("Could not get customToken assets from velcro")}))})).catch((function(e){throw Error("Could not get assets from velcro")})):Promise.resolve([])}t(736);var d=t(37),l=t(85),u=t(2),m=t(3),b=t.n(m),f=t(12),j=t(8),p=t(15),v=t(568),h=t.n(v),O=t(220),g=t(524),x=t(48),y=t(62),w=t(101),k=t(21),T=[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}],C=[{name:"holder",type:"address"},{name:"spender",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"},{name:"allowed",type:"bool"}],N=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],A=[{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],S=[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],_=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"}],E={1:[{address:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",name:"USD Coin",version:"2",domainType:N,permitType:T},{address:"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984",name:"Uniswap",domainType:S,permitType:T},{address:"0xde30da39c46104798bb5aa3fe8b9e0e1f348163f",name:"Gitcoin",domainType:S,permitType:T},{address:"0x6b175474e89094c44da98b954eedeac495271d0f",name:"Dai Stablecoin",version:"1",domainType:N,permitType:C},{address:"0x090185f2135308bad17527004364ebcc2d37e5f6",domainType:A,permitType:T},{address:"0x99d8a9c45b2eca8864373a26d1459e3dff1e17f3",domainType:A,permitType:T},{address:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9",name:"Aave Token",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"AdEx Loyalty",address:"0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c",version:"1",domainType:N,permitType:T},{name:"Aave Token",address:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9",version:"1",domainType:N,permitType:T},{name:"Ambire Wallet Staking Token",address:"0x47cd7e91c3cbaaf266369fe8518345fc4fc12935",version:"1",domainType:N,permitType:T},{name:"ConstitutionDAO",address:"0x7a58c0be72be218b41c608b7fe7c5bb630736c71",version:"1",domainType:N,permitType:T},{name:"Aragon Network Token",address:"0xa117000000f279d81a1d3cc75430faa017fa5a2e",version:"1",domainType:N,permitType:T},{name:"AdEx Staking Token",address:"0xb6456b57f03352be48bf101b46c1752a0813491a",version:"1",domainType:N,permitType:T},{name:"dYdX",address:"0x92d6c1e31e14520e676a687f0a93788b716beff5",version:"1",domainType:N,permitType:T},{name:"Ethereum Name Service",address:"0xc18360217d8f7ab5e7c516566761ea12ce7f9d72",version:"1",domainType:N,permitType:T},{name:"Olympus",address:"0x383518188c0c6d7730d91b2c03a03c837814a899",version:"1",domainType:N,permitType:T},{name:"1INCH Token",address:"0x111111111117dc0aa78b770fa6a738034120c302",version:"1",domainType:N,permitType:T},{name:"IceToken",address:"0xf16e81dce15b08f326220742020379b855b87df9",version:"1",domainType:N,permitType:T},{name:"Fei USD",address:"0x956f47f50a910163d8bf957cf5846d573e7f87ca",version:"1",domainType:N,permitType:T},{name:"LUSD Stablecoin",address:"0x5f98805a4e8be255a32880fdec7f6728c6568ba0",version:"1",domainType:N,permitType:T},{name:"Balancer",address:"0xba100000625a3754423978a60c9317c58a424e3d",version:"1",domainType:N,permitType:T},{name:"Aave interest bearing AAVE",address:"0xffc97d72e13e01096502cb8eb52dee56f74dad7b",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniBATWETH",address:"0xa1b0edf4460cc4d8bfaa18ed871bff15e5b57eb4",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniWBTCWETH",address:"0xc58f53a8adff2fb4eb16ed56635772075e2ee123",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniUSDCWETH",address:"0x391e86e2c002c70dee155eaceb88f7a3c38f5976",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing WETH",address:"0x030ba81f1c18d280636f32af80b9aad02cf0854e",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing DAI",address:"0x028171bca77440897b824ca71d1c56cac55b68a3",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniWBTCUSDC",address:"0x2365a4890ed8965e564b7e2d27c38ba67fec4c6f",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniCRVWETH",address:"0x0ea20e7ffb006d4cfe84df2f72d8c7bd89247db0",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniUNIWETH",address:"0x3d26dcd840fcc8e4b2193ace8a092e4a65832f9f",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing GUSD",address:"0xd37ee7e4f452c6638c96536e68090de8cbcdb583",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniMKRWETH",address:"0x370adc71f67f581158dc56f539df5f399128ddf9",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing CRV",address:"0x8dae6cb04688c62d939ed9b68d32bc62e49970b1",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market USDT",address:"0x17a79792fe6fe5c95dfe95fe3fcee3caf4fe4cb7",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market UniSNXWETH",address:"0x38e491a71291cd43e8de63b7253e482622184894",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing YFI",address:"0x5165d24277cd063f5ac44efd447b27025e888f37",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing SNX",address:"0x35f6b052c598d933d69a4eec4d04c73a191fe6c2",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market USDC",address:"0xd24946147829deaa935be2ad85a3291dbf109c80",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market DAI",address:"0x79be75ffc64dd58e66787e4eae470c8a1fd08ba4",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing USDT",address:"0x3ed3b47dd13ec9a98b44e6204a523e766b225811",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing RAI",address:"0xc9bc48c72154ef3e5425641a3c747242112a46af",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing BAL",address:"0x272f97b7a56a387ae942350bbc7df5700f8a4576",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing BAT",address:"0x05ec93c0365baaeabf7aeffb0972ea7ecdd39cf1",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing USDC",address:"0xbcca60bb61934080951369a648fb03df4f96263c",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave AMM Market BptBALWETH",address:"0xd109b2a304587569c84308c55465cd9ff0317bfb",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing KNC",address:"0x39c6b3e42d6a679d7d776778fe880bc9487c2eda",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing MANA",address:"0xa685a61171bb30d4072b338c80cb7b2c865c873e",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing XSUSHI",address:"0xf256cc7847e919fac9b808cc216cac87ccf2f47a",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing TUSD",address:"0x101cc05f4a51c0319f570d5e146a8c625198e636",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"},{name:"Aave interest bearing ENJ",address:"0xac6df26a590f08dcc95d5a4705ae8abbc88509ef",version:"1",domainType:N,permitType:T,nonceFunction:"_nonces"}],137:[{name:"Governance OHM",address:"0xd8ca34fd379d9ca3c6ee3b3905678320f5b45195",version:"1",domainType:N,permitType:T},{name:"Frax",address:"0x45c32fa6df82ead1e2ef74d17b76547eddfaff89",version:"1",domainType:N,permitType:T},{name:"Aave Matic Market WBTC",address:"0x5c2ed810328349100a66b82b78a1791b101c9d61",version:"1",domainType:N,permitType:T},{name:"Aave Matic Market WETH",address:"0x28424507fefb6f7f8e9d3860f56504e4e5f5f390",version:"1",domainType:N,permitType:T},{name:"Aave Matic Market USDC",address:"0x1a13f4ca1d028320a707d99520abfefca3998b7f",version:"1",domainType:N,permitType:T},{name:"Aave Matic Market AAVE",address:"0x1d2a0e5ec8e5bbdca5cb219e649b565d8e5c3360",version:"1",domainType:N,permitType:T},{name:"Synapse",address:"0xf8f9efc0db77d8881500bb06ff5d6abc3070e695",version:"1",domainType:N,permitType:T},{name:"Aave Matic Market WMATIC",address:"0x8df3aad3a84da6b69a4da8aec3ea40d9091b2ac4",version:"1",domainType:N,permitType:T},{name:"Aave Matic Market USDT",address:"0x60d55f02a771d515e077c9c2403a1ef324885cec",version:"1",domainType:N,permitType:T},{name:"Klima DAO",address:"0x4e78011ce80ee02d2c3e649fb657e45898257815",version:"1",domainType:N,permitType:T},{name:"Quickswap",address:"0xb5c064f955d8e7f38fe0460c556a72987494ee17",domainType:S,permitType:T},{name:"Route",address:"0x16eccfdbb4ee1a85a33f3a9b21175cd7ae753db4",domainType:S,permitType:T},{address:"0x8f3cf7ad23cd3cadbd9735aff958023239c6a063",name:"(PoS) Dai Stablecoin",version:"1",salt:"0x0000000000000000000000000000000000000000000000000000000000000089",domainType:_,permitType:C,nonceFunction:"getNonce"},{address:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",name:"USD Coin (PoS)",version:"1",salt:"0x0000000000000000000000000000000000000000000000000000000000000089",domainType:_,permitType:T}],56:[{name:"1INCH Token",address:"0x111111111117dc0aa78b770fa6a738034120c302",version:"1",domainType:N,permitType:T},{name:"Frax",address:"0x90c97f71e18723b0cf0dfa30ee176ab653e89f40",version:"1",domainType:N,permitType:T},{name:"JADE",address:"0x7ad7242a99f21aa543f9650a56d141c57e4f6081",version:"1",domainType:N,permitType:T},{name:"Templar Token",address:"0x19e6bfc1a6e4b042fb20531244d47e252445df01",version:"1",domainType:N,permitType:T}]},M=new k.Interface(["function nonces(address owner) external view returns (uint256)","function _nonces(address owner) external view returns (uint256)","function getNonce(address owner) external view returns (uint256)","function name() external view returns (string)","function symbol() external view returns (string)","function decimals() external view returns (uint)","function balanceOf(address) external view returns (uint)","function permit(address owner, address spender, uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s)","function permit(address holder, address spender, uint256 nonce, uint256 expiry, bool allowed, uint8 v, bytes32 r, bytes32 s)","function transferFrom(address from, address to, uint256 amount) view returns (bool)","function transfer(address to, uint256 amount) view returns (bool)","function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint)"]),F=t(97),L=t(621),D=t(4),U=function(e){var n=e.signerAccount,t=e.identityAccount,i=e.network,s=e.setIsSelectionConfirmed,d=e.setStep,m=e.portfolio,v=e.relayerURL,k=e.setModalButtons,T=e.hideModal,C=e.setSelectedTokensWithAllowance,N=e.setGasSpeed,A=e.setStepperSteps,S=e.hidden,_=Object(u.useState)([]),E=Object(a.a)(_,2),U=E[0],B=E[1],I=Object(u.useState)([]),P=Object(a.a)(I,2),R=P[0],W=P[1],H=Object(u.useState)(null),G=Object(a.a)(H,2),V=G[0],q=G[1],K=Object(u.useState)(!0),Y=Object(a.a)(K,2),z=Y[0],X=Y[1],$=Object(u.useState)([]),J=Object(a.a)($,2),Z=J[0],Q=J[1],ee=Object(u.useState)(null),ne=Object(a.a)(ee,2),te=ne[0],ae=ne[1],ie=Object(u.useState)(null),ce=Object(a.a)(ie,2),re=ce[0],se=ce[1],oe=Object(u.useState)("fast"),de=Object(a.a)(oe,2),le=de[0],ue=de[1],me=Object(u.useState)([]),be=Object(a.a)(me,2),fe=be[0],je=be[1],pe=Object(u.useState)(!1),ve=Object(a.a)(pe,2),he=ve[0],Oe=ve[1],ge=Object(u.useState)(!1),xe=Object(a.a)(ge,2),ye=xe[0],we=xe[1],ke=Object(u.useState)(""),Te=Object(a.a)(ke,2),Ce=Te[0],Ne=Te[1],Ae=Object(u.useState)(""),Se=Object(a.a)(Ae,2),_e=Se[0],Ee=Se[1],Me=Object(u.useRef)(),Fe=Object(u.useRef)({}),Le=Object(u.useCallback)((function(e,n){var t=R.findIndex((function(n){return n.address===e}));if(-1!==t){var a=n(R[t]);W([].concat(Object(p.a)(R.slice(0,t)),[a],Object(p.a)(R.slice(t+1))))}}),[R]),De=Object(u.useCallback)((function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=U.sort((function(e,n){return e.name<n.name?-1:1})).findIndex((function(n){return n.address===e}));null===(n=Fe.current[a])||void 0===n||n.focus(),Le(e,(function(n){var a=Object(j.a)(Object(j.a)({},n),{},{selected:!n.selected});if(t){var i,c=null===(i=R.find((function(n){return n.address===e})))||void 0===i?void 0:i.humanAmount;if(t>c){var r,s=null===(r=U.find((function(n){return n.address===e})))||void 0===r?void 0:r.decimals;a.amount=new h.a(t).multipliedBy(Math.pow(10,s)).toFixed(0),a.humanAmount=t}}return a}))}),[U,Le,R]),Ue=Object(u.useCallback)((function(){var e=Object(F.a)(i.id);if(y.ethers.utils.isAddress(Ce)){if(U.find((function(e){return e.address.toLowerCase()===Ce.toLowerCase()})))return Ne(""),void Oe(!1);var c=new w.Contract(Ce,M,e),r=c.symbol().catch((function(){return Ee("Could not get symbol of token "+Ce)})),s=c.decimals().catch((function(){return Ee("Could not get decimals of token "+Ce)})),o=c.allowance(n,t).catch((function(){return Ee("Could not get allowance for token "+Ce)})),d=c.balanceOf(n).catch((function(){return Ee("Could not get balance for token "+Ce)}));we(!0),Ee(null),Promise.all([r,s,o,d]).then((function(e){var n=Object(a.a)(e,4),t=n[0],i=n[1],c=n[2],r=n[3];we(!1),t&&i&&null!==c&&null!==r&&(Ne(""),Oe(!1),B((function(e){return[].concat(Object(p.a)(e),[{address:Ce,name:t,decimals:i.toNumber(),icon:null,rate:0,native:!1,availableBalance:r.toString(),balanceUSD:0}])})),W((function(e){return[].concat(Object(p.a)(e),[{address:Ce,selectedAmount:0,amount:r.toString(),humanAmount:new h.a(r.toString()).div(Math.pow(10,i.toString())).toFixed(),selected:r.gt(0)}])})),je((function(e){return[].concat(Object(p.a)(e),[{address:Ce,allowance:0}])})))})).catch((function(e){console.log("err getting custom token data",e),we(!1)}))}else Ee("invalid custom token address")}),[i,Ce,n,t,Ee,U]),Be=Object(u.useCallback)((function(e){var n;if(!re)return!1;var t=(null===(n=R.find((function(e){return e.address===r&&e.selected})))||void 0===n?void 0:n.amount)||0;return new h.a(re.gasFees[e].signerTransactionsCost).plus(t).lte(V.availableBalance||0)}),[R,re,V]),Ie=Object(u.useCallback)((function(e){return new h.a(V.availableBalance).minus(re.gasFees[e].signerTransactionsCost)}),[re,V]),Pe=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.map((function(e){return Object(j.a)(Object(j.a)(Object(j.a)({},e),n.find((function(n){return n.address===e.address}))),t.find((function(n){return n.address===e.address})))}))},Re=Object(u.useCallback)(Object(f.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Pe(U,R,fe).filter((function(e){return e.selected}))).length){e.next=3;break}return e.abrupt("return");case 3:C(n.map((function(e){return Object(j.a)({},e)}))),s(!0),n.find((function(e){return e.address===r}))?d(1):d(2),N(le);case 7:case"end":return e.stop()}}),e)}))),[U,R,fe,C,s,d,N,le]);Object(u.useEffect)((function(){he&&Me.current.focus()}),[he]),Object(u.useEffect)((function(){q(U.find((function(e){return e.native})))}),[U]),Object(u.useEffect)((function(){X(!0),B([]),o({networkId:i.id,account:n}).then((function(e){B(e.map((function(e){return Object(j.a)({},e)}))),W(e.map((function(e){return{address:e.address,selectedAmount:0,amount:e.availableBalance,humanAmount:new h.a(e.availableBalance).div(Math.pow(10,e.decimals)).toFixed(),selected:!1}}))),X(!1)})).catch((function(e){console.error(e)}))}),[n,X,B,i]),Object(u.useEffect)((function(){if(te){var e=Pe(U,R,fe),n=e.filter((function(e){return e.selected&&!e.native})).length,t=e.filter((function(e){return e.selected&&e.native})).length,a=n*(77e3+("arbitrum"===i.id?2e5:0))+25e3*t,c=te.gasFeeAssets.native/Math.pow(10,18),r={};L.a.forEach((function(e){var n=te.gasPrice[e]+(te.gasPrice.maxPriorityFeePerGas?1*te.gasPrice.maxPriorityFeePerGas[e]:0),t=a*n,i=t*c;r[e]={speed:e,signerTransactionsCost:t,signerTransactionsCostUSD:i,signerTransactionsConsumption:a}})),se({regularTransfersCount:n,nativeTransfersCount:t,gasFees:r})}}),[U,R,m,te,le,fe,i]),Object(u.useEffect)((function(){Object(c.c)("".concat(v,"/gasPrice/").concat(i.id)).then((function(e){ae(e.data)})).catch((function(e){console.log("fetch error",e)}))}),[v,i]),Object(u.useEffect)((function(){var e=U.map((function(e){var a=Object(F.a)(i.id),c=new w.Contract(e.address,M,a);return e.native?{address:e.address,allowance:0}:c.allowance(n,t).then((function(n){return{address:e.address,allowance:n.toString()}})).catch((function(e){console.log("err getting allowance",e)}))}));Promise.all(e).then((function(e){je(e)}))}),[t,i,U,n]),Object(u.useEffect)((function(){S||k(Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(l.e,{clear:!0,small:!0,icon:Object(D.jsx)(x.f,{}),onClick:T,children:"Close"}),R.filter((function(e){return e.selected})).length>0&&Be(le)?Object(D.jsxs)(l.e,{small:!0,icon:Object(D.jsx)(x.E,{}),className:"primary",onClick:function(){return Re()},children:["Move ",R.filter((function(e){return e.selected})).length," assets"]}):Object(D.jsx)(l.e,{small:!0,icon:Object(D.jsx)(x.E,{}),className:"primary disabled",children:"Move assets"})]}))}),[R,le,k,T,Re,S,Be]);var We=Object(u.useCallback)((function(e,n){return Le(n.address,(function(t){if(""===e)return Object(j.a)(Object(j.a)({},t),{},{humanAmount:0,amount:0});if(e.endsWith(".")&&2===e.split(".").length||2===e.split(".").length&&e.endsWith("0")&&new h.a(e).isEqualTo(t.humanAmount))return Object(j.a)(Object(j.a)({},t),{},{humanAmount:e});if(!isNaN(e)){var a=new h.a(e).toFixed(n.decimals);return 1===new h.a(a).multipliedBy(Math.pow(10,n.decimals)).comparedTo(n.availableBalance)&&(a=new h.a(n.availableBalance).dividedBy(Math.pow(10,n.decimals)).toFixed(n.decimals)),a=a.replace(/\.?0+$/g,""),Object(j.a)(Object(j.a)({},t),{},{humanAmount:a,amount:new h.a(a).multipliedBy(Math.pow(10,n.decimals)).toFixed(0)})}return t}))}),[Le]);return Object(u.useEffect)((function(){setTimeout((function(){var e;null===(e=Fe.current[0])||void 0===e||e.focus()}),250)}),[U]),Object(u.useEffect)((function(){var e=["Selection"],n=R.find((function(e){return e.address.toLowerCase()===r&&e.selected}));if(n&&e.push("Send ".concat(U.find((function(e){return e.address===n.address})).name)),R.find((function(e){return e.address.toLowerCase()!==r&&e.selected}))){var t=[];R.find((function(e){return e.selected&&e.address.toLowerCase()!==r}))&&t.push("Send"),e.push(t.join(" and ")+" tokens")}1===e.length&&e.push("Send tokens"),A(e)}),[U,R,A,i]),S?Object(D.jsx)(D.Fragment,{}):Object(D.jsx)("div",{children:z?Object(D.jsxs)("div",{className:"content-center",children:[Object(D.jsx)("h3",{className:"mb-6",children:"Loading assets..."}),Object(D.jsx)(O.a,{})]}):Object(D.jsx)("div",{children:0===U.length?Object(D.jsx)("div",{children:"No assets to migrate have been found"}):Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{className:"mb-4",children:"Please select the assets you would like to migrate from your signer wallet to your Ambire wallet"}),Pe(U,R).sort((function(e,n){return e.name<n.name?-1:1})).map((function(e,n){return Object(D.jsxs)("div",{className:"migration-asset-row",children:[Object(D.jsx)("div",{className:"migration-asset-select".concat(e.selected?" checked":""),onClick:function(){return!1},children:Object(D.jsx)(l.g,{labelClassName:"checkbox-label",id:"check-".concat(e.address),label:Object(D.jsxs)("span",{className:"migration-asset-select-label",children:[Object(D.jsx)("span",{className:"migration-asset-select-icon",children:Z.includes(e.icon)||!e.icon?Object(D.jsx)(g.c,{size:18}):Object(D.jsx)("img",{src:e.icon,draggable:"false",alt:"Token Icon",onError:function(n){Q((function(n){return[].concat(Object(p.a)(n),[e.icon])}))}})}),Object(D.jsx)("span",{className:"migration-asset-select-name",children:e.name})]}),checked:e.selected,onChange:function(){return De(e.address)}})}),Object(D.jsxs)("div",{className:"migration-asset-usd",children:["$",(e.amount*e.rate).toFixed(2)]}),Object(D.jsx)("div",{className:"migration-asset-amount",children:Object(D.jsx)(l.z,{ref:function(e){return Fe.current[n]=e},className:"migrate-amount-input",value:e.humanAmount,onChange:function(n){return We(n,e)}})})]},n)})),Object(D.jsx)("div",{className:"custom-token-row mt-2",children:he?Object(D.jsx)("div",{children:ye?Object(D.jsxs)("div",{className:"custom-token-message-fetching",children:[Object(D.jsx)(l.n,{}),"Fetching custom token data..."]}):Object(D.jsxs)(D.Fragment,{children:[_e&&Object(D.jsx)("div",{className:"error",children:_e}),Object(D.jsx)("div",{children:Object(D.jsx)(l.z,{className:"custom-token-input",placeholder:"Enter custom token address",value:Ce,onChange:function(e){Ne(e)},ref:Me})}),Object(D.jsxs)("div",{className:"flex-row mt-2",children:[Object(D.jsx)(l.e,{small:!0,icon:Object(D.jsx)(x.c,{}),className:"buttonHollow danger align-right",onClick:function(){Oe(!1),Ne(""),Ee(null)},children:"Cancel"}),Object(D.jsx)(l.e,{small:!0,icon:Object(D.jsx)(x.t,{}),className:"primary ms-4",onClick:function(){return Ue()},children:"Add"})]})]})}):Object(D.jsx)(l.e,{small:!0,icon:Object(D.jsx)(x.t,{}),className:"clear align-right",onClick:function(){return Oe(!0)},children:"Add custom token"})}),!Be(le)&&R.filter((function(e){return e.selected})).length>0&&Object(D.jsxs)("div",{className:"notification-hollow warning mt-3 mb-3",children:["Your Signer Wallet will not have enough fees to pay for the migration. Please transfer a maximum of ",Object(D.jsxs)("span",{className:"max-native-suggestion",onClick:function(){return We(new h.a(Ie(le)).dividedBy(Math.pow(10,V.decimals)).toFixed(6,h.a.ROUND_DOWN),V)},children:[new h.a(Ie(le)).dividedBy(Math.pow(10,V.decimals)).toFixed(6,h.a.ROUND_DOWN)," ",i.nativeAssetSymbol]})]}),re&&Object(D.jsxs)("div",{className:"gas-estimation-block mt-4",children:[Object(D.jsx)("div",{className:"gas-estimation-block-title",children:"Estimated gas fee"}),Object(D.jsx)("ul",{className:"gas-estimation-selector",children:Object.values(re.gasFees).map((function(e,n){return Object(D.jsx)("li",{className:e.speed===le?"selected":"",onClick:function(){return ue(e.speed)},children:e.speed},n)}))}),Object(D.jsx)("table",{className:"gas-estimation-details",children:Object(D.jsx)("tbody",{children:Object(D.jsxs)("tr",{children:[Object(D.jsxs)("td",{children:["Signer fee",(!!re.nativeTransfersCount||!!re.regularTransfersCount)&&Object(D.jsx)("span",{className:"migration-actions",children:Object(D.jsxs)("span",{children:[re.nativeTransfersCount+re.regularTransfersCount," transfers"]})})]}),Object(D.jsxs)("td",{className:"gas-estimation-details-amount",children:["$",re.gasFees[le].signerTransactionsCostUSD.toFixed(2)]})]})})})]})]})})})},B=t(531),I=t(147),P=t(219),R=function(e){e.addRequest;var n=e.identityAccount,t=e.signer,i=e.signerExtra,s=e.network,o=e.selectedTokensWithAllowance,d=e.setError,l=e.hideModal,m=e.setStep,v=e.setModalButtons,O=e.relayerURL,w=e.gasSpeed,k=e.hidden,T=Object(u.useState)([]),C=Object(a.a)(T,2),N=C[0],A=C[1],S=Object(u.useState)({}),_=Object(a.a)(S,2),E=_[0],F=_[1],L=Object(u.useState)({}),U=Object(a.a)(L,2),R=U[0],W=U[1],H=Object(u.useState)(!1),G=Object(a.a)(H,2),V=G[0],q=G[1],K=Object(u.useState)(null),Y=Object(a.a)(K,2),z=Y[0],X=Y[1],$=Object(u.useState)([]),J=Object(a.a)($,2),Z=J[0],Q=J[1],ee=Object(u.useState)(null),ne=Object(a.a)(ee,2),te=ne[0],ae=ne[1],ie=Object(u.useState)(null),ce=Object(a.a)(ie,2),re=ce[0],se=ce[1],oe=Object(u.useState)(null),de=Object(a.a)(oe,2),le=de[0],ue=de[1],me=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return e.filter((function(e){return e.address!==r})).map((function(e){var i=Object(j.a)(Object(j.a)({},e),{},{signing:null,signature:null,sent:!1,pending:!1,allowance:0});return n[e.address]&&(i.signing=n[e.address].signing,i.signature=n[e.address].signature),t[e.address]&&(i.sent=!0),a[e.address]&&(i.pending=!0),i}))},be=Object(u.useCallback)(Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===le||void 0===le?void 0:le.isConnected(t.address,s.chainId).then((function(e){return ae(e),!!e||(d(Object(D.jsxs)(D.Fragment,{children:["Please make sure your signer wallet is unlocked, and connected with ",Object(D.jsx)("b",{children:t.address})," to the correct chain: ",Object(D.jsx)("b",{children:s.id})]})),!1)})).catch((function(e){return d("Could not check signer connection status: "+e.error),!1})));case 1:case"end":return e.stop()}}),e)}))),[s,d,t,le]),fe=Object(u.useCallback)((function(){var e=0;return me(o,N,E,[]).forEach((function(n){n.sent&&e++})),e}),[o,N,E]),je=Object(u.useCallback)(function(){var e=Object(f.a)(b.a.mark((function e(a){var i,c,r,d,l=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>1&&void 0!==l[1]&&l[1],e.next=3,be();case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(c=o.find((function(e){return e.address===a}))){e.next=8;break}return e.abrupt("return");case 8:return r=M.encodeFunctionData("transfer",[n,new h.a(c.amount).toFixed(0)]),W((function(e){return e[a]=!0,Object(j.a)({},e)})),X(null),d=le.sendTransaction({from:t.address,to:a,data:r,gasLimit:8e4,gasPrice:re,chainId:s.chainId}).then(function(){var e=Object(f.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A((function(e){return e[a]=Object(j.a)(Object(j.a)({},e[a]),{},{signing:!0}),Object(j.a)({},e)})),!i){e.next=7;break}return e.next=4,n.wait();case 4:F((function(e){return e[a]=!0,Object(j.a)({},e)})),W((function(e){return e[a]=!1,Object(j.a)({},e)})),A((function(e){return e[a]=Object(j.a)(Object(j.a)({},e[a]),{},{signing:!1}),Object(j.a)({},e)}));case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return W((function(e){return e[a]=!1,Object(j.a)({},e)})),e.message.includes("underpriced")?X("Transaction fee underpriced"):X(e.message),q(!0),(!N[a]||N[a]&&!1!==N[a].signing)&&A((function(e){return e[a]=Object(j.a)(Object(j.a)({},e[a]),{},{signing:!1}),Object(j.a)({},e)})),!1})),e.abrupt("return",!!d);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[le,n,N,o,re,s,t,be]),pe=Object(u.useCallback)((function(){d(null),F([]),A([]),q(!1),m(0)}),[d,A,F,m]),ve=Object(u.useCallback)((function(){pe(),l()}),[pe,l]);return Object(u.useEffect)((function(){ue(Object(B.a)({signer:t,signerExtra:i,chainId:s.chainId}))}),[s,t,i]),Object(u.useEffect)((function(){be()}),[be]),Object(u.useEffect)((function(){var e="".concat(O,"/gasPrice/").concat(s.id);Object(c.c)(e).then((function(e){var n=e.data.gasPrice[w];e.data.gasPrice.maxPriorityFeePerGas&&(n+=e.data.gasPrice.maxPriorityFeePerGas[w]),se(n)})).catch((function(n){d(n.message+" "+e)}))}),[s,O,d,w]),Object(u.useEffect)((function(){if(te&&Object.values(E).length&&re){var e=me(o,N,E,[]).map((function(e){return{address:e.address,signed:e.signing}})).find((function(e){return null===e.signed}));e&&setTimeout((function(){je(e.address,!0)}),150)}}),[o,je,N,E,te,re]),Object(u.useEffect)((function(){if(o.length){var e={};o.forEach((function(n){e[n.address]=!1})),F(e)}}),[o,F]),Object(u.useEffect)((function(){V&&d("Every asset below needs to be sent to complete the migration"+(z?" ("+z+")":""))}),[V,d,z]),Object(u.useEffect)((function(){fe()===o.length&&d(null)}),[fe,o,d]),Object(u.useEffect)((function(){k||v(Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(P.a,{className:"clear",icon:Object(D.jsx)(x.D,{}),onClick:function(){return pe()},children:"Back"}),fe()===me(o).length?Object(D.jsx)(P.a,{className:"primary",icon:Object(D.jsx)(x.E,{}),onClick:function(){return l()},children:"Close"}):Object(D.jsx)(P.a,{className:"primary disabled",icon:Object(D.jsx)(x.E,{}),children:"Complete"})]}))}),[pe,ve,fe,o,v,k,l]),k?Object(D.jsx)(D.Fragment,{}):Object(D.jsxs)("div",{children:[fe()<me(o).length?Object(D.jsx)("div",{className:"notification-hollow mb-3 warning",children:"".concat(me(o).length-fe()," actions left to complete the migration")}):Object(D.jsx)("div",{className:"notification-hollow mb-3 success",children:"Your tokens were migrated. You can close this window"}),me(o,N,E,R).map((function(e,n){return Object(D.jsxs)("div",{className:"migration-asset-row",children:[Object(D.jsx)("span",{className:"migration-asset-select-icon migration-asset-select-icon-permit",children:!e.icon||Z.includes(e.icon)?Object(D.jsx)(g.c,{size:18}):Object(D.jsx)("img",{src:e.icon,draggable:"false",alt:"Token Icon",onError:function(n){Q((function(n){return[].concat(Object(p.a)(n),[e.icon])}))}})}),Object(D.jsx)("div",{className:"migration-asset-name",children:e.name}),Object(D.jsxs)("div",{className:"migration-asset-amount",children:[new h.a(e.amount).div(Math.pow(10,e.decimals)).toFixed()," ",Object(D.jsxs)("span",{className:"migration-asset-amount-usd",children:["($",(e.amount*e.rate).toFixed(2),")"]})]}),Object(D.jsx)("div",{className:"separator"}),Object(D.jsx)("div",{children:e.allowance&&y.ethers.BigNumber.from(e.allowance).gte(e.amount)||e.sent?Object(D.jsxs)("div",{className:"migration-permitted",onClick:function(){return je(e.address)},children:[Object(D.jsx)(I.b,{})," Sent"]}):Object(D.jsx)(D.Fragment,{children:e.pending||e.signing?Object(D.jsxs)("div",{className:"migration-permitted warning",children:[Object(D.jsx)(I.f,{})," Sending..."]}):Object(D.jsx)(P.a,{className:"button-small secondary",onClick:function(){return je(e.address)},children:"Send"})})})]},n)}))]})},W=function(e){var n,t=e.identityAccount,i=e.signer,r=e.signerExtra,s=e.network,o=e.nativeTokenData,d=e.setSelectedTokensWithAllowance,m=e.selectedTokensWithAllowance,j=e.setError,v=e.setStep,O=e.hasERC20Tokens,y=e.hideModal,w=e.relayerURL,k=e.setModalButtons,T=e.setBeforeCloseModalHandler,C=e.gasSpeed,N=e.hidden,A=Object(u.useState)([]),S=Object(a.a)(A,2),_=S[0],E=S[1],M=Object(u.useState)(!1),F=Object(a.a)(M,2),L=F[0],U=F[1],I=Object(u.useState)(!1),P=Object(a.a)(I,2),R=P[0],W=P[1],H=Object(u.useState)("0"),G=Object(a.a)(H,2),V=G[0],q=G[1],K=Object(u.useState)(null),Y=Object(a.a)(K,2),z=Y[0],X=Y[1],$=Object(u.useState)("0"),J=Object(a.a)($,2),Z=J[0],Q=J[1],ee=Object(u.useState)("0"),ne=Object(a.a)(ee,2),te=ne[0],ae=ne[1],ie=Object(u.useState)(!1),ce=Object(a.a)(ie,2),re=ce[0],se=ce[1],oe=Object(u.useState)(null),de=Object(a.a)(oe,2),le=de[0],ue=de[1];try{n=Object(B.a)({signer:i,signerExtra:r,chainId:s.chainId})}catch(he){j("No Web3 wallet connected. Please connect a Web3 wallet and reload the page")}var me=Object(u.useCallback)((function(){v(0),d([])}),[d,v]),be=Object(u.useCallback)((function(){v(2)}),[v]),fe=function(e){return e.filter((function(e){return e.selected&&!e.permittable&&!e.native})).length},je=Object(u.useCallback)(Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return j(null),W(!0),O||T(null),e.next=7,n.isConnected(i.address,s.chainId).catch((function(e){j("Could not check signer connection status: "+e.error)}));case 7:e.sent?n.sendTransaction({from:i.address,to:t,gasLimit:25e3+("arbitrum"===s.id?2e5:0),gasPrice:le,value:"0x"+new h.a(V).toString(16),chainId:s.chainId}).then(function(){var e=Object(f.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.wait();case 2:return U(!0),W(!1),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){return U(!1),W(!1),e&&e.message.includes("must provide an Ethereum address")?j("Make sure your wallet is unlocked and connected with ".concat(i.address,".")):j("Native asset migration failed: "+e.message),!1})):(j(Object(D.jsxs)(D.Fragment,{children:["Please make sure your signer wallet is unlocked, and connected with ",Object(D.jsx)("b",{children:i.address})," to the correct chain: ",Object(D.jsx)("b",{children:s.id})]})),W(!1));case 9:case"end":return e.stop()}}),e)}))),[n,j,O,s,T,i,t,V,le]),pe=Object(u.useCallback)((function(e){var n=new h.a(e).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals).replace(/\.?0+$/g,"");ae(n),q(e),se(!0)}),[o]);Object(u.useEffect)((function(){var e="".concat(w,"/gasPrice/").concat(s.id);Object(c.c)(e).then((function(e){var n=e.data.gasPrice[C];e.data.gasPrice.maxPriorityFeePerGas&&(n+=e.data.gasPrice.maxPriorityFeePerGas[C]);var t=25e3*n,a=fe(m)*n*77e3;Q(new h.a((t+a).toFixed(0)).toFixed(0));var i=new h.a(o.availableBalance).minus(t+a);X(i.gte(0)?i.toFixed(0):0),ue(n)})).catch((function(n){j(n.message+" "+e)}))}),[Q,X,o,s,w,j,C,m]);var ve=Object(u.useCallback)((function(e){if(se(!0),""===e)return ae(0),void q(0);if(e.endsWith(".")&&2===e.split(".").length||2===e.split(".").length&&e.endsWith("0"))ae(e);else if(!isNaN(e)){var n=new h.a(e).toFixed(o.decimals);1===new h.a(n).multipliedBy(Math.pow(10,o.decimals)).comparedTo(o.availableBalance)&&(n=new h.a(o.availableBalance).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals)),n=n.replace(/\.?0+$/g,""),ae(n),q(new h.a(n).multipliedBy(Math.pow(10,o.decimals)).toFixed(0))}}),[o]);return Object(u.useEffect)((function(){var e=new h.a(o.amount).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals).replace(/\.?0+$/g,"");ae(e),q(o.amount)}),[o]),Object(u.useEffect)((function(){if(!N){k(function(){var e=[];return L?O?e.push(Object(D.jsx)(l.e,{icon:Object(D.jsx)(x.E,{}),className:"primary full",onClick:function(){return be()},children:"Next"})):e.push(Object(D.jsx)(l.e,{icon:Object(D.jsx)(x.f,{}),className:"primary full",onClick:function(){return y()},children:"Close"})):n?(e.push(Object(D.jsx)(l.e,{icon:Object(D.jsx)(x.D,{}),className:"clear",onClick:function(){return me()},children:"Back"},"0")),R?e.push(Object(D.jsxs)(l.e,{icon:Object(D.jsx)(l.n,{}),className:"primary disabled",children:["Moving ",o.name,"..."]},"1")):e.push(Object(D.jsxs)(l.e,{icon:Object(D.jsx)(x.E,{}),className:"primary",onClick:function(){return je()},children:["Move ",o.name]},"1"))):e.push(Object(D.jsx)(l.e,{icon:Object(D.jsx)(x.f,{}),className:"clear full",onClick:function(){return y()},children:"Close"})),e}())}}),[L,O,k,y,R,me,je,be,n,o,N]),N?Object(D.jsx)(D.Fragment,{}):Object(D.jsx)("div",{children:n&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{className:"migration-native-title mb-4",children:[Object(D.jsx)("div",{className:"migration-native-asset-icon",children:_.includes(o.icon)?Object(D.jsx)(g.c,{size:64}):Object(D.jsx)("img",{src:o.icon,draggable:"false",alt:"Token Icon",onError:function(e){E((function(e){return[].concat(Object(p.a)(e),[o.icon])}))}})}),Object(D.jsxs)("div",{className:"migration-native-title-asset-name",children:["Migrate native asset ",Object(D.jsx)("b",{children:o.name})]})]}),L?Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)("div",{className:"small-asset-notification success",children:["Migration of your ",o.name," was successful"]})}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{className:"migration-native-row",children:[Object(D.jsx)("span",{className:"migration-native-row-key",children:"Current balance"}),Object(D.jsxs)("span",{className:"migration-native-selection",onClick:function(){return pe(o.availableBalance)},children:[new h.a(o.availableBalance).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name]})]}),Object(D.jsxs)("div",{className:"migration-native-row",children:[Object(D.jsx)("span",{className:"migration-native-row-key",children:"Amount to migrate"}),re||null!==z&&V>z?Object(D.jsx)(l.z,{className:"migrate-amount-input",value:te,onChange:ve}):Object(D.jsx)("div",{children:te})]}),null!==z&&new h.a(V).gt(z)&&Object(D.jsxs)("div",{className:"notification-hollow warning mt-4",children:[Object(D.jsxs)("div",{children:[fe(m)?"Signer transactions cost":"Current Transaction cost",": ~",new h.a(Z).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name,Object(D.jsxs)("span",{className:"migration-native-usd",children:[" ($",new h.a(Z).multipliedBy(o.rate).toFixed(2),")"]})]}),Object(D.jsx)("div",{className:"mt-3 mb-3",children:z>0?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("span",{children:"You should migrate up to "}),Object(D.jsxs)("span",{className:"migration-native-selection",onClick:function(){return pe(z)},children:[new h.a(z).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name]}),Object(D.jsx)("span",{children:" because will you need funds to pay the transaction costs."})]}):Object(D.jsx)("span",{children:"You do not have enough funds to pay the transaction fee."})})]}),R&&O&&Object(D.jsx)("div",{className:"notification-hollow info mt-4",children:"Waiting for the transaction to be mined before continuing migration..."}),R&&!O&&Object(D.jsxs)("div",{className:"notification-hollow info mt-4",children:["The amount of ",o.name," will be updated in your wallet, once the transaction has been confirmed and mined. If you confirmed your transaction, you can already close this window"]})]})]})})},H=function(e){var n=e.addRequest,t=e.selectedAccount,i=e.accounts,c=e.network,r=e.hideModal,s=e.relayerURL,o=e.portfolio,d=e.setModalButtons,m=e.setModalSteps,b=e.setBeforeCloseModalHandler,f=Object(u.useState)([]),j=Object(a.a)(f,2),p=j[0],v=j[1],h=Object(u.useState)(null),O=Object(a.a)(h,2),g=O[0],y=O[1],w=Object(u.useState)(!1),k=Object(a.a)(w,2),T=k[0],C=k[1],N=Object(u.useState)(!1),A=Object(a.a)(N,2),S=A[0],_=A[1],M=Object(u.useState)(0),F=Object(a.a)(M,2),L=F[0],B=F[1],I=Object(u.useState)([]),P=Object(a.a)(I,2),H=P[0],G=P[1],V=Object(u.useState)(null),q=Object(a.a)(V,2),K=q[0],Y=q[1],z=Object(u.useState)(!1),X=Object(a.a)(z,2),$=X[0],J=X[1],Z=Object(u.useState)(null),Q=Object(a.a)(Z,2),ee=Q[0],ne=Q[1],te=i.find((function(e){return e.id===t}));return Object(u.useEffect)((function(){0===L&&(Y(null),v([]),y(null),C(!1),ne(null),b(null))}),[c,t,L,b]),Object(u.useEffect)((function(){S&&(_(!1),y(p.find((function(e){return e.native}))),C(!!p.find((function(e){return!e.native}))))}),[S,te,p,c,t]),Object(u.useEffect)((function(){var e=L;L>0&&!g&&(e-=1),m({steps:H.map((function(e){return{name:e}})),stepIndex:e})}),[g,m,L,H]),Object(u.useEffect)((function(){var e=function(){J(!0),d([Object(D.jsx)(l.e,{icon:Object(D.jsx)(x.D,{}),className:"clear buttonComponent",onClick:function(){return J(!1)},children:"Back"},"0"),Object(D.jsx)(l.e,{icon:Object(D.jsx)(x.f,{}),className:"danger buttonComponent",onClick:function(){return r()},children:"Close"},"1")])};L>0&&b((function(){return e}))}),[L,b,d,r,$]),Object(D.jsxs)("div",{children:[K&&Object(D.jsx)("div",{className:"mt-3 error",children:K}),Object(D.jsxs)("div",{id:"assets-migration",children:[$&&Object(D.jsx)("div",{className:"notification-hollow warning mt-4",children:"By closing this window, your progress will be lost. Are you sure you want to close this window?"}),0===L&&Object(D.jsx)(U,{hidden:$,signerAccount:te.signer.address,identityAccount:t,network:c,PERMITTABLE_COINS:E,setIsSelectionConfirmed:_,setStep:B,portfolio:o,relayerURL:s,setModalButtons:d,hideModal:r,setError:Y,setSelectedTokensWithAllowance:v,setStepperSteps:G,setGasSpeed:ne}),1===L&&g&&Object(D.jsx)(W,{hidden:$,signer:te.signer,identityAccount:t,network:c,addRequest:n,signerExtra:te.signerExtra,setError:Y,nativeTokenData:g,hideModal:r,setStep:B,relayerURL:s,hasERC20Tokens:T,setModalButtons:d,setSelectedTokensWithAllowance:v,selectedTokensWithAllowance:p,setBeforeCloseModalHandler:b,gasSpeed:ee}),2===L&&Object(D.jsx)(R,{hidden:$,signer:te.signer,identityAccount:t,network:c,addRequest:n,PERMITTABLE_COINS:E,signerExtra:te.signerExtra,setError:Y,selectedTokensWithAllowance:p,hideModal:r,setStep:B,setModalButtons:d,gasSpeed:ee,relayerURL:s})]})]})},G=function(e){var n=e.addRequest,t=e.selectedAccount,i=e.selectedNetwork,c=e.accounts,r=e.relayerURL,s=e.portfolio,o=Object(d.f)(),m=o.hideModal,b=o.setBeforeCloseModalHandler,f=Object(u.useState)(null),j=Object(a.a)(f,2),p=j[0],v=j[1],h=Object(u.useState)({steps:[],stepIndex:0}),O=Object(a.a)(h,2),g=O[0],x=O[1];return Object(D.jsx)(l.o,{id:"asset-migration-modal",title:Object(D.jsxs)("div",{children:[Object(D.jsx)("span",{children:"Migrate Assets"}),Object(D.jsx)(l.y,{steps:g.steps,currentStep:g.stepIndex,noLabels:!1})]}),buttons:p,children:Object(D.jsx)(H,{addRequest:n,selectedAccount:t,network:i,accounts:c,hideModal:m,relayerURL:r,portfolio:s,setModalButtons:v,setModalSteps:x,setBeforeCloseModalHandler:b})})};n.a=function(e){var n,t,i=e.addRequest,c=e.selectedAccount,r=e.accounts,s=e.selectedNetwork,l=e.relayerURL,m=e.portfolio,b=e.closeable,f=void 0!==b&&b,j=e.linkMargin,p=void 0!==j&&j,v=e.useStorage,h=Object(u.useState)(!1),O=Object(a.a)(h,2),g=O[0],x=O[1],y=Object(u.useState)(!1),w=Object(a.a)(y,2),k=w[0],T=w[1],C=Object(d.f)().showModal,N=v({key:"migrationSeen",defaultValue:{}}),A=Object(a.a)(N,2),S=A[0],_=A[1],E=r.find((function(e){return e.id===c}));try{t=Object(B.a)({signer:E.signer,signerExtra:E.signerExtra,chainId:s.chainId})}catch(F){}var M=Object(u.useCallback)((function(){T(!0),_((function(e){return e[c+s.id]=!0,e}))}),[c,s,_]);Object(u.useEffect)((function(){var e=!1;x(!1);return function(n){var t=n.networkId,a=n.identityAccount,i=n.accounts.find((function(e){return e.id===a}));i.signer&&o({networkId:t,account:i.signer.address}).then((function(n){if(!e){var t=n.filter((function(e){return e.balanceUSD>.001}));x(!!t.length)}})).catch((function(e){console.error(e)}))}({identityAccount:c,networkId:s.id,accounts:r}),function(){return e=!0}}),[c,s,r]),Object(u.useEffect)((function(){T(f&&!!S[c+s.id])}),[f,c,s,S]);return(null===(n=t)||void 0===n?void 0:n.provider)||E.signerExtra&&["ledger","trezor","Lattice"].includes(E.signerExtra.type)?g&&!k&&Object(D.jsxs)("div",{className:"migration-banner",children:[Object(D.jsxs)("div",{className:"migration-banner-message",children:[Object(D.jsx)("div",{children:"We detected that your signer account has tokens that can be transferred to your Ambire account. We recommend doing this in order to maximize your $WALLET rewards."}),Object(D.jsx)("span",{className:"link"+(p?" link-margin":""),onClick:function(){C(Object(D.jsx)(G,{addRequest:i,selectedNetwork:s,selectedAccount:c,accounts:r,relayerURL:l,portfolio:m}))},children:"Click here to migrate those tokens"})]}),f&&Object(D.jsx)("div",{className:"migration-banner-close",children:Object(D.jsx)(I.j,{onClick:function(){return M()}})})]}):Object(D.jsx)(D.Fragment,{})}}}]);
//# sourceMappingURL=20.c932a442.chunk.js.map