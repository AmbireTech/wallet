{"version":3,"sources":["lib/ledgerWebHID.js","lib/fetch.js","consts/accountPresets.js","components/common/AddressBook/AddressList/AddressList.js","components/common/AddressBook/AddressBook.js","lib/address.js","components/common/AddressWarning/AddressWarning.js","components/common/Button/Button.js","components/common/Chart/Chart.js","components/common/Checkbox/Checkbox.js","hooks/onClickOutside.js","components/common/DropDown/DropDown.js","components/common/Loading/Loading.js","components/common/Loading/AmbireLoading.js","components/common/Loading/Borders.js","components/common/Loading/Skeleton.js","components/ToastProvider/ToastProvider.js","hooks/toasts.js","consts/networks.js","config/index.js","lib/formatters.js","consts/supportedProtocols.js","lib/humanizers/UniRouters.js","lib/humanizers/ERC20.js","lib/humanizers/AaveLendingPoolV2.js","lib/humanizers/ERC721.js","lib/humanizers/WETH.js","consts/privilegesOptions.js","lib/humanizers/AmbireIdentity.js","lib/humanizers/AmbireFactory.js","lib/humanizers/YearnTesseractVault.js","lib/humanizers/Movr.js","lib/humanizers/OpenSea.js","lib/humanizers/WALLETSupplyController.js","lib/humanizers/AmbireBatcher.js","lib/humanizers/WALLETStakingPool.js","lib/humanizers/AaveWethGatewayV2.js","lib/humanizers/index.js","lib/humanReadableTransactions.js","lib/provider.js","lib/icons.js","lib/balanceOracle.js","hooks/portfolio.js","lib/isFirefox.js","hooks/walletconnect.js","hooks/relayerData.js","hooks/addressBook.js","hooks/attentionGrabber.js","components/ModalProvider/ModalProvider.js","hooks/modals.js","hooks/permissions.js","hooks/useStorage.ts","hooks/useLocalStorage.js","hooks/ambireEarnDetails.js","components/common/Modal/Modal.js","components/common/Radios/Radios.js","components/common/Segments/Segments.js","components/common/Select/Select.js","components/common/TextInput/TextInput.js","components/common/NumberInput/NumberInput.js","components/common/PasswordInput/PasswordInput.js","components/common/Toggle/Toggle.js","components/common/ToolTip/ToolTip.js","components/common/NoFundsPlaceholder/NoFundsPlaceholder.js","components/common/CountdownTimer/CountdownTimer.js","components/LoginOrSignupForm/LoginOrSignupForm.js","components/EmailLogin/EmailLogin.js","lib/permissions.js","components/Modals/PermissionsModal/PermissionsModal.js","components/Modals/InputModal/InputModal.js","components/Modals/SelectSignerAccountModal/SelectSignerAccountModal.js","lib/recoveryBundle.js","components/Modals/ResetPasswordModal/ResetPasswordModal.js","components/Modals/WalletTokenModal/WalletTokenModal.js","components/Modals/AddTokenModal/AddTokenModal.js","lib/lattice.js","components/Modals/LatticeModal/LatticeModal.js","components/Modals/UnsupportedDAppsModal/UnsupportedDAppsModal.js","components/Modals/HideTokenModal/HideTokenModal.js","components/Modals/AmbireEarnDetailsModal/AmbireEarnDetailsModal.js","components/Modals/EarnDetailsModal/EarnDetailsModal.js","lib/validations/importedAccountValidations.js","components/AddAccount/AddAccount.js","components/Wallet/Dashboard/Balances/Balances.js","components/Wallet/Dashboard/Protocols/ProtocolsPlaceholder/ProtocolsPlaceholder.js","components/Wallet/Dashboard/Protocols/Protocols.js","components/Wallet/Dashboard/Collectibles/CollectiblesPlaceholder/CollectiblesPlaceholder.js","components/Wallet/Dashboard/Collectibles/Collectibles.js","components/common/FinalCountdown/FinalCountdown.js","components/Wallet/Dashboard/Promotions/Promotions.js","components/Wallet/Dashboard/Dashboard.js","components/Wallet/TopBar/Accounts/Accounts.js","components/Wallet/TopBar/DApps/DApps.js","components/Wallet/TopBar/Links/Links.js","hooks/useDynamicModals.js","components/Wallet/TopBar/WalletTokenButton/useClaimableWalletToken.js","components/Wallet/TopBar/WalletTokenButton/WalletTokenButton.js","components/Wallet/TopBar/TopBar.js","consts/gasSpeeds.js","consts/actionGasCosts.js","components/Modals/GasDetailsModal/GasDetailsModal.js","components/Wallet/GasIndicator/GasIndicator.js","components/Wallet/SideBar/SideBar.js","resources/ramp.svg","resources/paytrie.svg","resources/transak.svg","resources/kriptomat.svg","lib/popupHelper.js","components/Wallet/Deposit/Providers/useProviders.js","components/Wallet/Deposit/Providers/Providers.js","components/Wallet/Deposit/Deposit.js","components/Plugins/GnosisSafeApps/GnosisSafeAppIframe.js","components/Wallet/Swap/SushiIframe.js","components/Wallet/Swap/Swap.js","lib/validations/formValidations.js","lib/unstoppableDomains.js","components/Wallet/Transfer/Addresses/Addresses.js","components/Wallet/Transfer/Transfer.js","consts/AAVELendingPoolAbi.js","consts/AAVELendingPoolProviders.js","resources/aave.svg","components/Wallet/Earn/Card/Card.js","components/Wallet/Earn/Cards/AAVECard/defaultTokens.js","lib/approveToken.js","components/Wallet/Earn/Cards/AAVECard/AAVECard.js","consts/YearnTesseractVaultABI.js","resources/yearn.svg","components/Wallet/Earn/Cards/YearnTesseractCard/useYearn.js","resources/tesseract.svg","components/Wallet/Earn/Cards/YearnTesseractCard/useTesseract.js","components/Wallet/Earn/Cards/YearnTesseractCard/YearnTesseractCard.js","resources/logo.png","components/Wallet/Earn/Cards/AmbireTokensCard/AmbireTokensCard.js","components/Wallet/Earn/Earn.js","components/Wallet/Security/AddAuthSigner/AddAuthSigner.js","components/Modals/OtpTwoFAModal/OtpTwoFAModal.js","components/Modals/OtpTwoFADisableModal/OtpTwoFADisableModal.js","components/Wallet/Security/Backup/Backup.js","components/Wallet/Security/PendingRecoveryNotice/PendingRecoveryNotice.js","components/Wallet/Security/Security.js","components/common/TxnPreview/TxnPreview.js","lib/requestToBundleTxn.js","components/Wallet/Transactions/Transactions.js","components/Plugins/GnosisSafeApps/GnosisSafeApps.js","consts/ERC721Abi.js","components/Wallet/Collectible/Collectible.js","components/Wallet/CrossChain/useMovr.js","components/Wallet/CrossChain/Quotes/Quotes.js","components/Wallet/CrossChain/History/movrTxParser.js","components/Wallet/CrossChain/History/History.js","components/Wallet/CrossChain/CrossChain.js","components/Wallet/OpenSea/OpenSea.js","consts/unsupportedDApps.js","components/Wallet/Wallet.js","lib/getWallet.js","components/SendTransaction/helpers.js","components/SendTransaction/FeeSelector.js","components/SendTransaction/Actions.js","components/SendTransaction/noRelayer.js","components/SendTransaction/SendTransaction.js","components/SignMessage/SignMessage.js","lib/GnosisConnector.js","resources/icon.png","hooks/notifications.js","hooks/oneTimeQueryParam.js","App.js","hooks/accounts.js","hooks/network.js","hooks/useGnosisSafe.js","hooks/privateMode.js","reportWebVitals.js","index.js"],"names":["ethUtil","require","HDNode","connectedDevices","PARENT_HD_PATH","getTransport","a","TransportWebHID","list","length","opened","request","Error","ledgerGetAddresses","returnData","error","addresses","catch","err","transport","getAccounts","accountsData","close","accounts","map","address","parentKeyDerivationPath","getAddressInternal","then","o","statusCode","message","ledgerResponse","console","log","hdKey","publicKey","Buffer","from","chainCode","mainAddress","addressOfHDKey","initialDerivedKeyInfo","derivationPath","baseDerivationPath","calculateDerivedHDKeyInfos","appEth","AppEth","ledgerTimeout","Promise","resolve","reject","timeoutHandle","setTimeout","race","getAddress","res","clearTimeout","ledgerSignTransaction","txn","chainId","fromAddr","unsignedTxObj","gasLimit","gas","serializedUnsigned","serialize","toLowerCase","signTransaction","substr","rsvResponse","intV","parseInt","v","Math","floor","serializedSigned","r","s","ledgerSignMessage","hash","signerAddress","account","signPersonalMessage","rsvReply","signedMsg","toString","count","derivedKeys","i","fullDerivationPath","path","derive","derivedKey","baseDerivationPathh","push","derivedPublicKey","ethereumAddressUnprefixed","publicToAddress","addHexPrefix","fetch","fetchPost","url","body","headers","method","JSON","stringify","json","fetchGet","response","status","fetchCaught","params","resp","errMsg","accountPresets","salt","identityFactoryAddr","baseIdentityAddr","quickAccManager","feeCollector","quickAccTimelock","encryptionOpts","scrypt","N","AddressList","noAccounts","onSelectAddress","removeAddress","items","filter","isAccount","className","icon","name","onClick","style","backgroundImage","AddressBook","addAddress","newAddress","onClose","useState","setAddress","setName","isOpen","setOpenMenu","openAddAddress","setOpenAddAddress","isAddAddressFormValid","test","onAddAddress","useCallback","onDropDownChange","state","useEffect","title","open","onChange","id","autoComplete","placeholder","value","onInput","clear","small","disabled","isValidAddress","isKnownTokenOrContract","addressToLowerCase","tokensAddresses","Object","keys","tokens","contractsAddresses","names","includes","AddressWarning","onAddNewAddress","isKnownAddress","confirmed","setConfirmed","unknownWarning","useMemo","smartContractWarning","label","checked","target","Button","children","mini","iconAfter","red","danger","border","type","textOnly","args","apply","Chart","data","size","hoveredItem","setHoveredItem","colors","height","width","onMouseEnter","item","sort","b","sortData","startAngle","strokeColor","innerRadius","selectedOffset","legend","toggled","maxHeight","backgroundColor","index","trunc","parseFloat","toFixed","Checkbox","forwardRef","props","ref","inputElem","required","useOnClickOutside","handler","listener","event","current","contains","document","addEventListener","removeEventListener","DropDown","badge","closeOnClick","onOpen","isLoading","useRef","transitionRef","isMenuOpen","setMenuOpen","CSSTransition","unmountOnExit","in","timeout","classNames","nodeRef","Loading","AmbireLoading","Borders","Skeleton","ToastContext","React","createContext","ToastProvider","history","useHistory","toasts","setToasts","removeToast","t","addToast","content","options","toast","createRef","position","sticky","route","updateToastsPositions","forEach","toastElement","bottomToasts","element","find","getComputedStyle","marginBottom","x","clientWidth","y","offsetHeight","reduce","acc","curr","transform","onResize","window","Provider","TransitionGroup","onToastClick","useToasts","useContext","networks","rpc","nativeAssetSymbol","explorerUrl","unstoppableDomainsChain","ZAPPER_API_KEY","process","VELCRO_API_ENDPOINT","SUSHI_SWAP_FRAME","SUSHI_SWAP_FRAME_EXCEPTIONS","parse","formatFloatTokenAmount","amount","useGrouping","maximumFractionDigits","isNaN","minimumFractionDigits","min","toLocaleString","undefined","max","roundFloatingNumber","number","places","decimals","pow","round","Number","EPSILON","suportedProtocols","network","protocols","balancesProvider","nftsProvider","iface","Interface","abis","UniV2Router","recipientText","recipient","txnFrom","extended","deadlineText","deadlineSecs","mined","minute","diff","Date","now","toExtended","fromToken","toToken","expires","atLeast","upTo","uniV2Mapping","getSighash","opts","parseTransaction","amountIn","amountOutMin","to","deadline","outputAsset","token","amountOut","amountInMax","nativeToken","tokenA","tokenB","amountADesired","amountBDesired","amountTokenDesired","amountAMin","amountBMin","amountTokenMin","amountETHMin","ifaceV3","UniV3Router","parsePath","pathBytes","uniV3Mapping","parsed","sigHash","slice","humanizer","flat","tokenIn","tokenOut","amountOutMinimum","amountInMaximum","amountMin","ifaceV32","UniV3Router2","uniV32Mapping","calls","concat","toNumber","mapping","ERC20","ERC20Mapping","approvedAddress","getName","tokenName","eq","constants","MaxUint256","AaveLendingPoolV2","onBehalfText","onBehalf","action","word","AaveMapping","asset","ERC721","fromText","tokenId","ERC721Mapping","operator","approved","WETH","WETHMapping","privilegesOptions","true","false","IdentityMapping","addr","privLevel","isQuickAccManager","FactoryMapping","code","generateAddress2","hexConcat","YearnVault","vaultNames","ethereum","polygon","tokenPrefixes","addTokenPrefix","split","join","getVaultInfo","yearnVaults","tesseractVaults","toExtendedRich","vaultInfo","baseToken","symbol","YearnTesseractMapping","MovrAnyswapInterface","MovrAnyswap","MovrRouterInterface","MovrRouter","getNetwork","n","MovrMapping","middlewareInputToken","tokenToBridge","toChainId","middlewareRequest","bridgeRequest","inputToken","outputToken","formatNativeTokenAddress","WyvernExchange","addrs","uints","seller","tokenAddress","price","paymentToken","collection","WALLETSupplyControllerABI","isExtended","details","WALLETSupplyControllerMapping","burnPercentage","toBurnBps","Batcher","AmbireBatcher","txns","humanizers","STAKING_POOLS","WalletStakingPoolABI","WALLETStakingPool","shares","AaveWethGatewayV2","onBehalfOf","all","UniRouters","AmbireIdentity","AmbireFactory","YearnTesseractVault","Movr","OpenSea","WALLETSupplyController","knownAliases","knownTokens","repeat","getTransactionSummary","networkId","accountAddr","callSummary","sendSummary","tokenInfo","actions","e","filteredSummary","assetInfo","extendedToken","formatUnits","extendedNativeToken","setKnownAddresses","isKnown","providersByNetwork","getProvider","startsWith","providers","WebSocketProvider","StaticJsonRpcProvider","customIcons","zapperStorageTokenIcons","getTokenIcon","net","ethers","utils","AbiCoder","isAddress","hexlify","RemainingBalancesOracle","oracle","SPOOFER","blockTag","remainingBalancesOracleAddr","getTokenListBalance","walletAddr","updateBalance","call","result","success","newBalance","newTokenBalance","balance","balanceRaw","updateAt","balanceUSD","tokenImageUrl","isHidden","provider","coder","txParams","encodeFunctionData","isErr","callResult","balances","decode","ERROR_SIG","PANIC_SIG","hex","checkTokenList","hidden","visibilityChange","getBalances","apiKey","protocol","msHidden","webkitHidden","lastOtherProcolsRefresh","paginateArray","input","limit","pages","ceil","supplementTokensDataFromNetwork","tokensData","extraTokens","hiddenTokens","fullTokenList","Set","tokenList","td","tokensNotInList","some","filteredByHiddenTokensInList","filterByHiddenTokens","filteredByHiddenTokensNotInList","callTokens","tokenBalances","et","ht","usePortfolio","currentNetwork","useStorage","currentAccount","rpcTokensLastUpdated","isBalanceLoading","setBalanceLoading","areProtocolsLoading","setProtocolsLoading","tokensByNetworks","setTokensByNetworks","supportedProtocols","otherProtocolsByNetworks","setOtherProtocolsByNetworks","total","full","truncated","setBalance","otherBalances","setOtherBalances","setTokens","setProtocols","collectibles","setCollectibles","key","defaultValue","setExtraTokens","setHiddenTokens","getExtraTokensAssets","extra","extraToken","isExtraToken","fetchSupplementTokenData","updatedTokens","currentNetworkTokens","meta","assets","extraTokensAssets","rcpTokenData","fetchTokens","failedRequests","requestsCount","values","products","systemInfo","source","networkTokens","updatedNetworks","fetchOtherProtocols","updatedProtocols","protocolsByNetworks","refreshTokensIfVisible","requestOtherProtocolsRefresh","updateHumanizerData","tokensList","setKnownTokens","loadBalance","loadProtocols","lookup","removeDuplicatedAssets","balanceByNetworks","otherProtocols","refreshInterval","setInterval","clearInterval","onAddExtraToken","updatedExtraTokens","coingeckoId","onRemoveExtraToken","onAddHiddenToken","hiddenToken","updatedHiddenTokens","onRemoveHiddenToken","isFirefox","navigator","userAgent","noop","noopSessionStorage","setSession","getSession","removeSession","SUPPORTED_METHODS","connectors","connectionErrors","wait","ms","checkIsOffline","uri","time","useWalletConnect","initialUri","allNetworks","setNetwork","stateRef","isConnecting","setIsConnecting","stateStorage","setStateStorage","useReducer","connections","session","isOffline","requests","batchRequest","newRequests","ix","isBatch","ids","dispatch","maybeUpdateSessions","updateConnections","connector","updateSession","clearWcClipboard","getClipboardText","clipboard","isWcUri","writeText","connect","connectorOpts","WalletConnectCore","cryptoLib","sessionStorage","connected","createSession","onError","peerMeta","sessionTimeout","suggestion","bridge","on","payload","rejectSession","sessionStart","approveSession","signPayload","primaryType","domain","verifyingContract","functionSignature","supportedNetwork","approveRequest","rejectRequest","wcUri","notification","disconnect","killSession","wcConnect","tryReadClipboard","runInitEffects","resolveMany","resolution","endsWith","realId","lastIndexOf","readText","text","useRelayerData","setLoading","setData","setErr","prevUrl","updateData","resetDataTimer","stripQuery","unloaded","accountType","email","signerExtra","walletType","toIcon","seed","blockies","toDataURL","useAddressBook","storageAddresses","setStorageAddresses","addressList","Array","isArray","entry","setAddresses","updateAddresses","sha256","newAddresses","documentTitle","flashingTitleInterval","stickyIds","removeFlashingTitle","useAttentionGrabber","eligibleRequests","isSendTxnShowing","onSitckyClick","location","useLocation","removeStickyToasts","isRouteWallet","pathname","Notification","permission","showFlashingTitle","ModalContext","ModalProvider","modal","setModal","dynamicModal","setDynamicModal","showModal","disableClose","showDynamicModal","component","hideModal","updateModal","useModals","onPermissionChange","permissions","query","onchange","usePermissions","arePermissionsLoaded","setPermissionsLoaded","isClipboardGranted","setClipboardGranted","isNoticationsGranted","setNotificationsGranted","useLocalStorage","modalHidden","setModalHidden","checkForPermissions","clipboardState","notificationsState","setInitDefault","isStringStorage","setInit","storage","getItem","parsedItem","set","prevState","itemValue","setItem","removeItem","localStorage","ZERO","BigNumber","ZERO_ADDR","PRECISION","POOL_SHARES_TOKEN_DECIMALS_MUL","STAKING_POOL_EVENT_TYPES","ethProvider","useAmbireEarnDetails","accountId","tokenLabel","WALLET_ADDR","stakingTokenAddress","setDetails","setIsLoading","getStats","xWalletContract","Contract","stakingPoolAbi","walletContract","tokenAbi","timeToUnbond","shareValue","totalSupply","balanceOf","lockedShares","getLogs","fromBlock","filters","Transfer","LogLeave","LogWithdraw","LogRageLeave","sharesTotalSupply","balanceShares","allEnterWalletTransferLogs","leaveLogs","withdrawLogs","rageLeaveLogs","sharesTokensTransfersInLogs","sharesTokensTransfersOutLogs","blockNumber","latestLog","getBlock","timestamp","remainingTime","userShare","isZero","mul","div","enterWalletTokensByTxHash","byHash","transactionHash","sharesTokensTransfersIn","interface","parseLog","sharesTokensTransfersOut","shareTokensEnterMintByHash","shareTokensTransfersInByTxHash","sharesTokensTransfersInFromExternal","userEnters","sharesMintEvent","adexTokenTransfersLog","parsedWalletLog","walletAmount","userWithdraws","unlocksAt","maxTokens","receivedTokens","userRageLeaves","parsedLog","withdrawTx","unbondingCommitmentWorth","walletValue","canWithdraw","userLeaves","leavesPendingToUnlock","leavesReadyToWithdraw","leavesPendingToUnlockTotalMax","add","leavesPendingToUnlockTotalWallet","leavesReadyToWithdrawTotalMax","leavesReadyToWithdrawTotalWallet","MAX_SAFE_INTEGER","allLeaveLogs","allWithdrawLogs","allRageLeaveLogs","allEnterSharesTokensTransfersInLogs","allEnters","walletTokenTransfersLog","allWithdraws","allRageLeaves","allLeaves","allLogs","withWalletAmount","events","transferLog","bestShareValue","totalSharesOutTransfers","totalSharesOutTransfersWalletValue","totalSharesInTransfers","totalSharesInTransfersWalletValue","depositsWalletTotal","rageLeavesWithdrawnWalletTotal","rageLeavesReceivedWalletTotal","withdrawsWalletTotal","totalLockedSharesCheck","balanceSharesAvailable","sub","lt","currentBalanceWalletAvailable","currentBalanceWallet","currentBalanceSharesWalletValue","hasInsufficentBalanceForUnbondCommitments","insufficientSharesAmoutForCurrentUnbonds","currentBalanceWalletAtCurrentShareValue","totalInTokenValue","totalOutTokenValue","totalRewards","hasActiveUnbondCommitments","stakings","stakingEvent","withTimestamp","stats","loaded","userDataLoaded","poolShare","allTimeRewards","totalDeposit","totalWithdraws","pendingToUnlock","readyToWithdraw","getData","Modal","buttons","isCloseBtnShown","topLeft","maxWidth","Radios","radios","currentValue","setCurrentValue","onSelect","Segments","segments","hidePrivateValue","setValue","setSegment","segment","Select","native","monospace","searchable","hiddenTextInput","setOpen","search","setSearch","selectedItem","setSelectedItem","failedImg","setFailedImg","filteredItems","selectItem","focus","getIcon","fallbackIcon","src","draggable","alt","failed","ev","buttonLabel","onButtonClick","TextInput","pattern","minLength","maxLength","info","password","copy","NumberInput","precision","button","afterDecimals","PasswordInput","peakPassword","showPassword","setShowPassword","Toggle","defaultChecked","ToolTip","mousePosition","setMousePosition","onMouseMove","clientY","clientX","innerWidth","top","left","str","NoFundsPlaceholder","CountdownTimer","seconds","setTimeIsUp","counter","setCounter","timerFormatted","setTimerFormatted","isTimeIsUp","timer","minutes","color","LoginOrSignupForm","onAccRequest","inProgress","passConfirmInput","passphrase","passphraseConfirm","setState","onUpdate","updates","newState","invalid","setCustomValidity","isSignup","days","noBackupDisclaimer","additionalOnSignup","backupOptout","Link","href","rel","stopPropagation","additionalInputs","onSubmit","preventDefault","accType","display","EmailLogin","relayerURL","onAddAccount","requiresEmailConfFor","setRequiresConfFor","setInProgress","loginSessionKey","setLoginSessionKey","removeLoginSessionKey","attemptLogin","ignoreEmailConfirmationRequired","encodeURIComponent","authorization","errType","requestAuthResp","sessionKey","_id","identityInfo","bytecode","quickAccSigner","primaryKeyBackup","signer","select","onLoginUserAction","inner","checkPermissions","onPrompt","allowWithoutGesture","checkClipboardPermission","prompt","askForPermission","requestPermission","toastErrorMessage","PermissionsModal","relayerIdentityURL","isBackupOptout","isEmailConfirmed","setEmailConfirmed","isEmailResent","setEmailResent","isJsonBackupDownloaded","setIsJsonBackupDownloaded","resendTimeLeft","setResendTimeLeft","areBlockedPermissions","isAccountNotConfirmed","emailConfRequired","buttonDisabled","sendConfirmationEmail","checkEmailConfirmation","identity","emailConfirmed","isConfirmed","requestNotificationsPermission","requestClipboardPermission","emailConfirmationInterval","resendInterval","copiedAcc","cloudBackupOptout","fileName","fileType","blob","Blob","createElement","download","URL","createObjectURL","clickEvt","MouseEvent","view","bubbles","cancelable","dispatchEvent","remove","downloadFile","InputModal","inputs","isDisabled","setDisabled","inputsFields","isFormValid","validate","every","SelectSignerAccountModal","signersToChoose","onSignerAddressClicked","selectedNetwork","description","currentPage","setCurrentPage","val","idx","formatAddress","prevBtnDisabled","nextBtnDisabled","onAddressClicked","IDENTITY_INTERFACE","buildRecoveryBundle","newValues","abiCoder","timelock","one","two","newQuickAccHash","keccak256","encode","Bundle","recoveryMode","ResetPassword","showSendTxns","setType","oldPassword","setOldPassword","newPassword","setNewPassword","newPasswordConfirm","setNewPasswordConfirm","passwordsMustMatchWarning","setPasswordsMustMatchWarning","passwordsLengthWarning","setPasswordsLengthWarning","checkboxes","changePassword","Wallet","fromEncryptedJson","wallet","encrypt","signMessage","sig","resetPassword","extraEntropy","random","performance","firstKeyWallet","createRandom","preRecovery","bundle","preRecoveryPrimaryKeyBackup","validateForm","arePasswordsMatching","areFieldsNotEmpty","isLengthValid","areCheckboxesChecked","modalButtons","autocomplete","WALLET_STAKING_POOL_INTERFACE","stakingWalletContract","multiplierBadges","multiplier","link","MultiplierBadges","rewards","badges","isUnlocked","multipliers","active","borderColor","WalletTokenModal","claimableWalletToken","vestingEntry","currentClaimStatus","claimableNow","disabledReason","claimDisabledReason","claimEarlyRewards","claimVesting","walletTokenAPY","adxTokenAPY","xWALLETAPY","walletTokenUSDPrice","walletUsdPrice","claimableNowUsd","loading","mintableVestingUsd","mintableVesting","claimeWithBurnNotice","stakedAmount","setStakedAmount","fetchStakedWalletData","confirm","end","start","ERC20Interface","ERC20ABI","AddTokenModal","portfolio","tokenDetails","setTokenDetails","showError","setShowError","tokenContract","tokenStandard","toUpperCase","removeToken","crypto","HARDENED_OFFSET","getAddressesReqOpts","startPath","latticeInit","commKey","clientConfig","privKey","Client","latticeConnect","client","deviceId","isPaired","errConnect","latticePair","secret","pair","hasActiveWallet","errPair","latticeGetAddresses","getAddresses","errGetAddresses","latticeSignMessage","dataMsg","signerPath","signOptsMsg","currency","sign","signedTx","errSignMessage","latticeSignTransaction","gasPrice","nonce","signOpts","useEIP155","errSignTxn","signTx","randomBytes","LatticeModal","setDeviceId","isSecretFieldShown","setIsSecretFieldShown","promiseResolve","setPromiseResolve","inputSecretRef","connectToDevice","enteredSecret","textTransform","inputSecret","handleInputSecret","UnsupportedDAppsModal","advancedModeList","onContinue","advancedMode","setAdvancedMode","icons","HideTokenModel","addressOrSymbol","foundByAddressOrSymbol","AmbireEarnDetailsModal","apy","msToDaysHours","EarnDetailsModal","NUMBER_STRING_REGEX","NEEDED_KEYS","validateImportedAccountProps","validateAccountProps","isValidTimeLock","isValidSalt","hexDataLength","fileSizeValidator","file","AddAccount","setChooseSigners","addAccErr","setAddAccErr","wrapProgress","fn","wrapErr","createQuickAcc","req","secondKeySecret","mnemonic","phrase","secondKeyResp","quickAccountTuple","accHash","privileges","getProxyDeployBytecode","privSlot","identityAddr","createResp","isNew","createFromEOA","signerType","hexZeroPad","connectWeb3AndGetAccounts","web3Accs","onEOASelected","signerName","getAccountByAddr","idAddr","signerAddr","getOwnedByEOAs","eoas","allUniqueOwned","entries","getGridPlusAddresses","connectGridPlusAndGetAccounts","connectTrezorAndGetAccounts","TrezorSubprovider","trezorConnectClientApi","TrezorConnect","getAccountsAsync","_initialDerivedKeyInfo","connectLedgerAndGetAccounts","connectLedgerAndGetAccountsU2F","connectLedgerAndGetAccountsWebHID","LedgerSubprovider","ledgerEthereumClientFactoryAsync","ledgerEthereumBrowserClientFactoryAsync","_initialDerivedKeyInfoAsync","addrData","transportProtocol","addAccount","owned","onDrop","acceptedFiles","rejectedFiles","reader","FileReader","errors","readAsText","onload","readerEvent","fileContent","validatedFile","useDropzone","noClick","noKeyboard","accept","maxFiles","validator","getInputProps","addFromSignerButtons","manifest","appUrl","Balances","networkDetails","ProtocolsPlaceholder","onClickAddToken","onClickShowToken","listHiddenTokens","hiddenTokensCount","cursor","Protocols","sortedTokens","decreasing","localeCompare","shouldShowPlaceholder","tokenItem","img","send","logo","openAddTokenModal","openHideTokenModal","category","CollectiblesPlaceholder","isPrivateMode","collectiblesLength","collectionName","collectionImg","image","Collectibles","assetName","assetImg","replace","toTwoDigits","num","Countdown","endDateTime","timeLeft","setTimeLeft","useLayoutEffect","interval","getTime","hours","getTimeDiff","Promo","period","resources","RegExp","links","anchors","anc","Promotions","rewardsData","promo","setPromo","chartSegments","tabSegments","Dashboard","selectedAccount","privateMode","tabId","useParams","chartTokensData","setChartTokensData","chartProtocolsData","setChartProtocolsData","chartType","setChartType","tab","setTab","totalProtocols","protocolsData","hidePrivateContent","Accounts","selectedAddress","onSelectAcc","onRemoveAccount","logoutWarning","setLogoutWarning","closed","setClosed","shortenedAddress","isActive","copyAddress","onSelectAccount","DApps","isWcConnecting","checkPermission","readClipboard","isLegacyWC","Links","linksViewed","setLinksViewed","useDynamicModal","watchProps","previousWatchProps","supplyControllerAddress","supplyControllerInterface","useClaimableWalletToken","addRequest","supplyController","initialClaimableEntry","WALLETInitialClaimableRewards","initialClaimable","totalClaimable","WALLETVestings","claimed","setCurrentClaimStatus","refreshSlot","toNum","rate","claimedInitial","fromBalanceClaimable","fromADXClaimable","withoutBurn","proof","WalletTokenButton","totalLifetimeRewards","pendingTokensTotal","setRewards","showWalletTokenModal","rewardsDetails","fromEntries","usdPrice","TopBar","selectedAcc","togglePrivateMode","networksItems","accountIcon","GAS_SPEEDS","ACTION_GAS_COSTS","GasDetailsModal","gasData","GAS_PRICES","speed","maxPriorityFeePerGas","updated","toDateString","toTimeString","rowIndex","gasFeeAssets","GAS_COST_ERC20_TRANSFER","c","GasIndicator","setGasData","cacheBreak","setCacheBreak","intvl","unmounted","SideBar","match","sidebarRef","balanceFontSize","setBalanceFontSize","resizeBalance","balanceFontSizes","charLength","closest","prev","abs","fontSize","activeClassName","popupCenter","w","h","dualScreenLeft","screenLeft","screenX","dualScreenTop","screenTop","screenY","documentElement","screen","innerHeight","clientHeight","systemZoom","availWidth","newWindow","useProviders","walletAddress","openPayTrie","rightSideLabels","rightSideLabel","format","openKriptomat","kriptomatResponse","openRampNetwork","RampInstantSDK","hostAppName","hostLogoUrl","variant","swapAsset","avalanche","userAddress","hostApiKey","show","openTransak","transak","transakSDK","environment","defaultCryptoCurrency","disableWalletAddressForm","themeColor","redirectURL","hostURL","origin","widgetHeight","widgetWidth","init","ALL_EVENTS","EVENTS","TRANSAK_ORDER_SUCCESSFUL","orderData","Providers","KRIPTOMAT_LOGO","fees","limits","currencies","RAMP_LOGO","PAYTRIE_LOGO","TRANSAK_LOGO","shouldBeDisabled","Deposit","qrCodeUrl","setQrCodeUrl","generateQRCode","QRCode","quality","margin","GnosisSafeAppIframe","selectedApp","gnosisConnect","gnosisDisconnect","setHash","iframeRef","app","onLoad","ambireSushi","desc","SushiSwap","ambireSushiCurrent","Swap","validateAddress","validateSendTransferAddress","addressConfirmed","isValidAddr","validateSendNftAddress","metadata","owner","Resolution","getMessage","resolveAddress","resolveAddressMultiChain","chain","multiChainAddr","resolveUDomain","nativeUDAddress","customUDAddress","Addresses","modalInputs","inputModal","unsupportedSWPlatforms","withRouter","addressBook","tokenAddressOrSymbol","setAsset","setAmount","bigNumberHexAmount","setBigNumberHexAmount","uDAddress","setUDAddress","setAddressConfirmed","sWAddressConfirmed","setSWAddressConfirmed","setNewAddress","messages","validationFormMgs","setValidationFormMgs","assetsItems","selectedAsset","maxAmount","maxAmountFormatted","showSWAddressWarning","onAmountChange","bigNumberAmount","parseUnits","toHexString","isValidSendTransferAmount","parsedAmount","indexOf","gt","validateSendTransferAmount","isValidRecipientAddress","UDAddress","amountLabel","recipientAddress","AAVELendingPoolAbi","AAVELendingPoolProviders","Card","unavailable","tokensItems","customInfo","onTokenSelect","onValidate","moreDetails","setToken","currentToken","getEquToken","sortedTokenItems","getMaxAmount","availableAmount","baseTokenAddress","baseTokenSymbol","approveToken","scope","addRequestTxn","prefixId","allowance","AAVELendingPool","RAY","lendingPoolAddress","AAVECard","setUnavailable","setTokensItems","apr","defaultTokens","getToken","extraGas","loadPool","providerAddress","lendingPoolProviderContract","getLendingPool","lendingPoolContract","getReservesList","reserves","reservesAddresses","reserve","withdrawTokens","depositTokens","allTokens","uniqueTokenAddresses","getReserveData","liquidityRate","tokensAPR","arp","AAVE_ICON","YearnVaultABI","v2VaultsAddresses","fantom","customVaultMetadata","displayName","displayIcon","useYearn","getTokenFromPortfolio","loadVaults","yearn","Yearn","vaults","get","v2Vaults","vaultAddress","net_apy","yToken","vault","selectedToken","YEARN_ICON","POLYGON_SCAN_IMAGES","VAULTS","useTesseract","setVaults","toTokensItems","tToken","portfolioToken","fetchVaultAPY","ticker","tesseractVaultContract","TesseractVaultABI","depositTokenItems","withdrawTokenItems","TESSERACT_ICON","BATCHER_ADDRESS","BATCHER_INTERFACE","AmbireBatcherABI","ERC20_INTERFACE","VaultInterface","YEARN_TESSERACT_VAULT_ABI","TESSERACT_DETAILS","YEARN_DETAILS","YearnTesseractCard","tesseract","transferTx","batchCallTxn","load","ADX_TOKEN_ADDRESS","ADX_STAKING_TOKEN_ADDRESS","ADX_STAKING_POOL_INTERFACE","AdexStakingPool","ADDR_ADX_SUPPLY_CONTROLLER","WALLET_TOKEN_ADDRESS","WALLET_STAKING_ADDRESS","secondsInYear","day","AmbireTokensCard","setCustomInfo","stakingTokenContract","setStakingTokenContract","setShareValue","stakingTokenBalanceRaw","SetStakingTokenBalanceRaw","leaveLog","setLeaveLog","lockedRemainingTime","setLockedRemainingTime","stakingPoolInterface","setSelectedToken","adxCurrentAPY","setAdxCurrentAPY","walletToken","xWalletToken","adexToken","adexStakingToken","onWithdraw","unbondToolTipLabelMdg","apyTooltipMsg","isMaxAmount","xWalletAmount","walletABI","supplyControllerABI","incentivePerSecond","poolTotalStaked","currentAPY","leavePendingToUnlockOrReadyToWithdraw","AMBIRE_ICON","Earn","AddAuthSigner","onAddBtnClicked","setSignerAddress","modalToggle","setModalToggle","showLoading","setShowLoading","textInputInfo","setTextInputInfo","setLatticeAddresses","isAddressValid","validateAddAuthSignerAddress","OtpTwoFAModal","authenticator","generateSecret","imageURL","setImageURL","receivedOtp","setReceivedOTP","showSecret","setShowSecret","emailConfirmCode","setEmailConfirmCode","setIsTimeIsUp","hexSecret","setHexSecret","toUtf8Bytes","otp","generateQR","otpAuth","keyuri","sendEmail","toSign","confCodeRequired","verifyOTP","verify","signatureEthers","resetForm","OtpTwoFADisableModal","disableOTP","Backup","downloadedBackup","PendingRecoveryNotice","recoveryLock","isAlreadyInitiated","createRecoveryRequest","recoveryLockStatus","remaining","Security","otpEnabled","craftTransaction","addTransactionToAddRequest","onMakeDefaultBtnClicked","isQuickAccount","showResetPasswordModal","handleEnableOtp","handleDisableOtp","getRootProps","isDragActive","isDragAccept","isDragReject","hasPendingReset","privList","addressName","isQuickAcc","privText","isSelected","canChangePassword","onRemoveBtnClicked","signersFragment","newSignerAddress","getNetworkSymbol","TxnPreview","onDismiss","isFirstFailing","disableExpand","disableDismiss","disableDismissLabel","isExpanded","setExpanded","contractName","summary","canShowLink","parseExtendedSummaryItem","IdentityFactory","toBundleTxn","deploySalt","BundlePreview","date","lastTxnSummary","hasFeeMatch","executed","errorMsg","submittedAt","toLocaleDateString","toLocaleTimeString","replacesTxId","txId","Transactions","setSendTxnState","showSendTxnsForReplacement","showing","replaceByDefault","executedTransactions","maxPages","defaultPage","page","setPage","bundlesList","firstPending","replaced","mapToBundle","relayerBundle","minFeeInUSDPerGas","feeInUSDPerGas","cancelByReplacing","paginationControls","cancel","dapps","GnosisSafeApps","setSelectedApp","customPlugins","setCustomPlugins","addPlugin","newDapp","customId","newPlugins","removeCustomPlugin","dapp","removeApp","ERC721Abi","handleUri","Collectible","collectionAddr","setMetadata","setRecipientAddress","isTransferDisabled","setTransferDisabled","fetchMetadata","contract","ownerOf","tokenURI","maybeUri1","maybeUri2","jsonUrl","recipAddress","baseURL","useMovr","fetchChains","fetchFromTokens","fetchToTokens","fetchQuotes","fromAsset","fromChainId","toAsset","excludeBridges","checkApprovalAllowance","chainID","allowanceTarget","approvalBuildTx","sendBuildTx","output","routePath","checkTxStatus","formatAmount","formatFeeAmount","fee","Quotes","fromTokensItems","quotes","onQuotesConfirmed","onCancel","fromNetwork","toNetwork","selectedRoute","setSelectedRoute","routes","middlewareRoute","bridgeRoute","middlewareFee","bridgeFee","middlewareInfo","bridgeInfo","inputAmount","outputAmount","sendTx","onConfirm","isApprovalRequired","tx","serviceTimeMinutes","serviceTime","getMinutes","txData","getAssetInfo","formattedAddress","getAssetIcon","formatTx","fromAssetIcon","toAssetIcon","movrTxParser","History","quotesConfirmed","txStatuses","setTxStatuses","getNetworkDetails","relayerTransactions","isRelayerLoading","txTransfers","outboundTransferTo","parseOutboundTransferTo","storedQuote","q","isPending","sourceTxStatus","destinationTxStatus","sourceTx","statusError","statuses","getStatuses","CrossChain","loadingFromTokens","setLoadingFromTokens","loadingToTokens","setLoadingToTokens","loadingQuotes","setLoadingQuotes","setFromTokenItems","setFromToken","chainsItems","setChainsItems","toChain","setToChain","toTokenItems","setToTokenItems","setToToken","setQuotes","portfolioTokens","setQuotesConfirmed","fromChain","formDisabled","hasNoFunds","getTokenFromPortofolio","loadChains","chains","isSupported","loadFromTokens","fromTokens","filteredFromTokens","uniqueFromTokenAddresses","loadToTokens","toTokens","filteredToTokens","tokenItems","getQuotes","flatAmount","fromTokenItem","equivalentToken","asyncLoad","setStateLoading","loadCallback","quoteRequest","updatedQuotesConfirmed","ambireOpenSea","unsupportedDApps","walletContainer","isLoggedIn","setAdvancedModeList","LoggedInGuard","handlePermissionsModal","showCauseOfPermissions","showCauseOfEmail","showCauseOfBackupOptout","permissionsModal","scrollTimeout","scrollTo","behavior","unsupported","exact","wallets","getWallet","getWalletNew","providerTrezor","fromExtendedKey","xpub","getInitialDerivedKeyInfo","signPersonalMessageAsync","signTransactionAsync","Web3Provider","getSigner","isTokenEligible","estimation","feeInFeeToken","getFeesData","contractErrors","mapTxnErrMsg","msg","contractMsg","getErrHint","toHexAmount","amnt","getDiscountApplied","discount","feeToken","feeInUSD","addedGas","getFeePaymentConsequences","discountMultiplier","totalMultiplier","nativeRate","feeInNative","customFee","nativeAssetPriceInUSD","SPEEDS","walletDiscountBlogpost","DISCOUNT_TOKENS_SYMBOLS","getBalance","priceInUSD","WalletDiscountBanner","currenciesItems","onFeeCurrencyChange","selectedFeeToken","walletDiscountTokens","discountToken","eligibleWalletToken","actionTxt","showSwap","FeeSelector","setEstimation","feeSpeed","setFeeSpeed","editCustomFee","setEditCustomFee","insufficientFee","FailingTxn","tooltip","remainingFeeTokenBalances","feeCurrencySelect","setCustomFee","prevEstimation","sufficientSpeeds","highestSufficientSpeed","checkIsSelectorDisabled","feeAmountSelectors","isETH","discountInFeeToken","discountInFeeInUSD","baseFeeInFeeToken","baseFeeInFeeUSD","showInUSD","selectFeeSpeed","minFee","minFeeUSD","maxFee","maxFeeUSD","discountMin","discountMax","discountInUSD","discountBaseMinInUSD","discountBaseMaxInUSD","baseFeeInUSD","baseMinFee","baseMaxFee","baseMinFeeUSD","baseMaxFeeUSD","isUnderpriced","isOverpriced","Actions","approveTxn","rejectTxn","cancelSigning","signingStatus","quickAccCredentials","setQuickAccCredentials","form","rejectButton","signButtonLabel","isRecoveryMode","finalBundle","quickAcc","visibility","checkValidity","IdentityInterface","FactoryInterface","sendNoRelayer","getCode","getNonce","signature","estimateGas","getTransactionCount","sendTransaction","signed","REJECT_MSG","getErrorMessage","SendTransaction","replacementBundle","onBroadcastedTxn","requestIds","makeBundle","SendTransactionWithBundle","replaceTx","setReplaceTx","setSigningStatus","currentBundle","reestimate","estimate","replacing","getNextNonce","estimateNoRelayer","nextNonce","pendingBundle","getFinalBundle","feeTxn","nextFreeNonce","nextNonMinedNonce","approveTxnImpl","submit","approveTxnImplQuickAcc","pwd","alert","signatureTwo","accountAvatar","firstFailing","isDeployed","bundleResult","SignMessage","totalRequests","codeRequired","signingState","setSigningState","isShown","confFieldState","setConfFieldState","connection","dApp","isHexString","handleSigningErr","approveQuickAcc","confirmationCode","arrayify","confCode","signMsgHash","approve","getMessageAsText","readOnly","toUtf8String","_","GnosisConnector","_iframeRef","_app","this","handlers","isValidMessage","parent","sentFromIframe","knownMethod","Methods","canHandleMessage","Boolean","requestId","sdkVersion","getSDKVersion","MessageFormatter","makeErrorResponse","makeResponse","contentWindow","postMessage","handleIncomingMessage","validMessage","hasHandler","SUPPORTED_TYPES","currentNotifs","isLastTotalBalanceInit","lastTokensBalanceRaw","useNotifications","onShow","sentTxn","confirmSentTx","onShowRef","onClickNotif","showNotification","requireInteraction","onclick","isSign","lastToken","isSignificantChange","amountRecieved","newBalanceRaw","getAmountReceived","txStatusInterval","getTransactionReceipt","hasOwnProperty","AppInner","initialAccounts","setAccounts","initialSelectedAcc","setSelectedAcc","selected","existing","existingIdx","clearedAccounts","useAccounts","defaultNetwork","setNetworkId","networkIdentifier","useNetwork","searchParam","urlSearchParams","URLSearchParams","oneTimeQueryParam","setOneTimeQueryParam","altParams","deleteOneTimeQueryParam","has","delete","useOneTimeQueryParam","wcRequests","wcResolveMany","verbose","uniqueId","initialRequests","setRequests","getSafeInfo","safeAddress","owners","threshold","rpcCall","callTx","getBlockNumber","getBlockWithTransactions","getTransaction","txs","handleSendTransactions","handlePersonalSign","sendTransactions","forwardId","prevRequests","getTxBySafeTxHash","safeTxHash","replyData","useGnosisSafe","gnosisRequests","gnosisResolveMany","internalRequests","setInternalRequests","reqs","setIsPrivateMode","usePrivateMode","sendTxnState","everythingToSign","setSentTxn","txHash","outcome","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d6a5be8e.chunk.js","sourcesContent":["import TransportWebHID from '@ledgerhq/hw-transport-webhid'\nimport AppEth from '@ledgerhq/hw-app-eth'\nimport { serialize } from '@ethersproject/transactions'\n\nconst EIP_155_CONSTANT = 35\n\nconst ethUtil = require('ethereumjs-util')\nconst HDNode = require('hdkey')\n\nlet connectedDevices = null\n\nexport const PARENT_HD_PATH = \"44'/60'/0'/0\"\n\nasync function getTransport() {\n  connectedDevices = await TransportWebHID.list()\n  if (connectedDevices.length && connectedDevices[0].opened) {\n    return new TransportWebHID(connectedDevices[0])\n  } else {\n    try {\n      return await TransportWebHID.request()\n    } catch (e) {\n      throw new Error('Could not request WebHID ledger')\n    }\n  }\n}\n\n\nexport async function ledgerGetAddresses() {\n  const returnData = {\n    error: null,\n    addresses: []\n  }\n\n  const transport = await getTransport().catch(err => {\n    returnData.error = err\n  })\n  if (!transport) return returnData\n\n  const accountsData = await getAccounts(transport)\n\n  transport.close()\n\n  if (accountsData.error) {\n    returnData.error = accountsData.error\n  } else {\n    returnData.addresses = accountsData.accounts.map(a => a.address)\n  }\n\n  return returnData\n}\n\nasync function getAccounts(transport) {\n  const parentKeyDerivationPath = `m/${PARENT_HD_PATH}`\n  const returnData = {\n    error: null,\n    accounts: []\n  }\n  let ledgerResponse\n  try {\n    ledgerResponse = await getAddressInternal(transport, parentKeyDerivationPath).then(o => o).catch(err => {\n      if (err.statusCode === 25871 || err.statusCode === 27404) {\n        returnData.error = 'Please make sure your ledger is unlocked and running the Ethereum app. ' + err.message\n      } else {\n        returnData.error = 'Could not get address from ledger : ' + err\n      }\n    })\n  } catch (e) {\n    console.log(e)\n  }\n\n  if (!ledgerResponse) {\n    return returnData\n  }\n\n  const hdKey = new HDNode()\n  hdKey.publicKey = Buffer.from(ledgerResponse.publicKey, 'hex')\n  hdKey.chainCode = Buffer.from(ledgerResponse.chainCode, 'hex')\n  const mainAddress = addressOfHDKey(hdKey)\n\n  const initialDerivedKeyInfo = {\n    hdKey,\n    address: mainAddress,\n    derivationPath: parentKeyDerivationPath,\n    baseDerivationPath: PARENT_HD_PATH,\n  }\n\n  // currently we can't get addrs to match with what appears in MM/Ledger live so only one is derived\n  returnData.accounts = calculateDerivedHDKeyInfos(initialDerivedKeyInfo, 1)\n  return returnData\n}\n\n\nasync function getAddressInternal(transport, parentKeyDerivationPath) {\n  let timeoutHandle\n  const appEth = new AppEth(transport)\n\n  const ledgerTimeout = new Promise((resolve, reject) => {\n    timeoutHandle = setTimeout(() => {\n      return reject(new Error('Device took too long to respond...'))\n    }, 10000)\n  })\n\n  return Promise.race([\n    appEth.getAddress(parentKeyDerivationPath, false, true),\n    ledgerTimeout\n  ]).then((res) => {\n    clearTimeout(timeoutHandle)\n    return res\n  })\n}\n\nexport async function ledgerSignTransaction(txn, chainId) {\n  const transport = await getTransport().catch(err => {\n    throw err\n  })\n\n  const fromAddr = txn.from\n\n  const unsignedTxObj = {\n    ...txn,\n    gasLimit: txn.gasLimit || txn.gas,\n    chainId: chainId\n  }\n  delete unsignedTxObj.from\n  delete unsignedTxObj.gas\n\n  let serializedUnsigned = serialize(unsignedTxObj)\n  const accountsData = await getAccounts(transport)\n  if (accountsData.error) {\n    throw new Error(accountsData.error)\n  }\n\n  //Managing only 1 addr for now\n  const address = accountsData.accounts[0].address\n\n  let serializedSigned\n  if (address.toLowerCase() === fromAddr.toLowerCase()) {\n    let rsvResponse\n    try {\n      rsvResponse = await new AppEth(transport).signTransaction(accountsData.accounts[0].derivationPath, serializedUnsigned.substr(2))\n    } catch (e) {\n      throw new Error('Could not sign transaction ' + e)\n    }\n\n    const intV = parseInt(rsvResponse.v, 16)\n    const signedChainId = Math.floor((intV - EIP_155_CONSTANT) / 2)\n\n    if (signedChainId !== chainId) {\n      throw new Error('Invalid returned V 0x' + rsvResponse.v)\n    }\n\n    delete unsignedTxObj.v\n    serializedSigned = serialize(unsignedTxObj, {\n      r: '0x' + rsvResponse.r,\n      s: '0x' + rsvResponse.s,\n      v: intV\n    })\n  } else {\n    throw new Error('Incorrect address. Are you using the correct account/ledger?')\n  }\n\n  transport.close()\n\n  return serializedSigned\n}\n\nexport async function ledgerSignMessage(hash, signerAddress) {\n  const transport = await getTransport().catch(err => {\n    throw err\n  })\n\n  const accountsData = await getAccounts(transport)\n  if (accountsData.error) {\n    throw new Error(accountsData.error)\n  }\n\n  //TODO for multiple accs?\n  const account = accountsData.accounts[0]\n\n  let signedMsg\n  if (account.address.toLowerCase() === signerAddress.toLowerCase()) {\n    try {\n      const rsvReply = await new AppEth(transport).signPersonalMessage(account.derivationPath, hash.substr(2))\n      signedMsg = '0x' + rsvReply.r + rsvReply.s + rsvReply.v.toString(16)\n    } catch (e) {\n      throw new Error('Signature denied ' + e.message)\n    }\n  } else {\n    throw new Error('Incorrect address. Are you using the correct account/ledger?')\n  }\n  transport.close()\n  return signedMsg\n}\n\nfunction calculateDerivedHDKeyInfos(initialDerivedKeyInfo, count) {\n  const derivedKeys = []\n  for (let i = 0; i < count; i++) {\n\n    const fullDerivationPath = `m/${initialDerivedKeyInfo.baseDerivationPath}/${i}`\n    const path = `m/${i}`\n    const hdKey = initialDerivedKeyInfo.hdKey.derive(path)\n    const address = addressOfHDKey(hdKey)\n    const derivedKey = {\n      address,\n      hdKey,\n      baseDerivationPath: initialDerivedKeyInfo.baseDerivationPathh,\n      derivationPath: fullDerivationPath,\n    }\n\n    derivedKeys.push(derivedKey)\n  }\n  return derivedKeys\n}\n\nexport function addressOfHDKey(hdKey) {\n  const shouldSanitizePublicKey = true\n  const derivedPublicKey = hdKey.publicKey\n  const ethereumAddressUnprefixed = ethUtil\n    .publicToAddress(derivedPublicKey, shouldSanitizePublicKey)\n    .toString('hex')\n  return ethUtil.addHexPrefix(ethereumAddressUnprefixed).toLowerCase()\n}\n","export const fetch = require('node-fetch')\n\nexport async function fetchPost (url, body) {\n\tconst r = await fetch(url, {\n\t\theaders: { 'content-type': 'application/json' },\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(body)\n\t})\n\treturn r.json()\n}\n\nexport const fetchGet = async url => {\n  const response = await fetch(url, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (response.status !== 200) throw new Error('Failed to fetch')\n  return response.json()\n}\n\nexport async function fetchCaught (url, params) {\n    let resp\n    try {\n      resp = await fetch(url, params)\n    } catch (e) {\n      console.error(e)\n      return { errMsg: `Unexpected error: ${e && e.message}` }\n    }\n    let body\n    try {\n      body = await resp.json()\n    } catch(e) {\n      console.error(e)\n      return { errMsg: `Unexpected error: ${resp.status}, ${e && e.message}`, resp }\n    }\n    return { body, resp, errMsg: '' }\n}","// NOTE: This is a compromise, but we can afford it cause QuickAccs require a secondary key\n// Consider making it more\nconst SCRYPT_ITERATIONS = 131072 / 8\n\n// NOTE: those should only apply to new accounts, never for existing accounts, since some existing accounts may be on older versions of those\nconst accountPresets = {\n    salt: '0x0000000000000000000000000000000000000000000000000000000000000001',\n    identityFactoryAddr: '0xBf07a0Df119Ca234634588fbDb5625594E2a5BCA',\n    baseIdentityAddr: '0x2A2b85EB1054d6f0c6c2E37dA05eD3E5feA684EF',\n    quickAccManager: '0xfF3f6D14DF43c112aB98834Ee1F82083E07c26BF',\n    feeCollector: '0x942f9CE5D9a33a82F88D233AEb3292E680230348',\n    quickAccTimelock: 259200, // 3 days\n    encryptionOpts: { scrypt: { N: SCRYPT_ITERATIONS } }\n}\nexport default accountPresets","import './AddressList.scss'\n\nimport { MdOutlineDelete } from 'react-icons/md'\n\nconst AddressList = ({ noAccounts, addresses, onSelectAddress, removeAddress }) => {\n    const items = addresses.filter(({ isAccount }) => !(isAccount && noAccounts))\n\n    return (\n        <div className=\"address-list\">\n            {\n                !items.length ?\n                    <div className=\"placeholder\">Your Address Book is empty</div>\n                    :\n                    items.map(({ isAccount, icon, name, address }) => (\n                        <div className=\"item\" key={address + name}>\n                            <div className=\"inner\" onClick={() => onSelectAddress && onSelectAddress(address)}>\n                                <div className=\"icon\" style={{ backgroundImage: `url(${icon})`}}></div>\n                                <div className=\"details\">\n                                    <label>{ name }</label>\n                                    <div className=\"address\">{ address }</div>\n                                </div>\n                            </div>\n                            {\n                                !isAccount ? \n                                    <div className=\"button\" onClick={() => removeAddress(name, address)}>\n                                        <MdOutlineDelete/>\n                                    </div>\n                                    :\n                                    null\n                            }\n                        </div>\n                    ))\n            }\n        </div>\n    )\n}\n\nexport default AddressList","import './AddressBook.scss'\n\nimport { FaAddressCard } from 'react-icons/fa'\nimport { MdOutlineAdd, MdClose } from 'react-icons/md'\nimport { Button, DropDown, TextInput } from 'components/common'\nimport { useCallback, useEffect, useState } from 'react'\nimport AddressList from './AddressList/AddressList'\n\nconst AddressBook = ({ addresses, addAddress, removeAddress, newAddress, onClose, onSelectAddress }) => {\n    const [address, setAddress] = useState('')\n    const [name, setName] = useState('')\n    const [isOpen, setOpenMenu] = useState(false)\n    const [openAddAddress, setOpenAddAddress] = useState(false)\n\n    const selectAddress = address => {\n        onSelectAddress && onSelectAddress(address)\n        setOpenMenu(false)\n    }\n    \n    const isAddAddressFormValid = address.length && name.length && /^0x[a-fA-F0-9]{40}$/.test(address)\n    const onAddAddress = useCallback(() => {\n        setOpenMenu(false)\n        setOpenAddAddress(false)\n        addAddress(name, address)\n    }, [name, address, addAddress])\n\n    const onDropDownChange = useCallback(state => {\n        setOpenMenu(state)\n        if (!state) {\n            setName('')\n            setAddress('')\n        }\n    }, [])\n\n    useEffect(() => !isOpen && onClose ? onClose() : null, [isOpen, onClose])\n\n    useEffect(() => {\n        if (newAddress) {\n            setAddress(newAddress)\n            setOpenMenu(true)\n            setOpenAddAddress(true)\n        }\n    }, [newAddress])\n\n    return (\n        <DropDown title={<><FaAddressCard/>Address Book</>} className=\"address-book\" open={isOpen} onChange={onDropDownChange}>\n            <div className=\"heading\">\n                <div className=\"title\">\n                    <FaAddressCard/> Address Book\n                </div>\n                {\n                    !openAddAddress ?\n                        <div className=\"button\" onClick={() => setOpenAddAddress(true)}>\n                            <MdOutlineAdd/>\n                        </div>\n                        :\n                        <div className=\"button\" onClick={() => setOpenAddAddress(false)}>\n                            <MdClose/>\n                        </div>\n                }\n            </div>\n            {\n                openAddAddress ?\n                    <div id=\"add-address\" className=\"content\">\n                        <div className=\"fields\">\n                            <TextInput autoComplete=\"nope\" placeholder=\"Name\" value={name} onInput={value => setName(value)}/>\n                            <TextInput autoComplete=\"nope\" placeholder=\"Address\" value={address} onInput={value => setAddress(value)}/>\n                        </div>\n                        <Button clear small disabled={!isAddAddressFormValid} onClick={onAddAddress}>\n                            <MdOutlineAdd/> Add Address\n                        </Button>\n                    </div>\n                    :\n                    !addresses.length ?\n                        <div className=\"content\">\n                            Your Address Book is empty.\n                        </div>\n                        :\n                        <div className=\"content\">\n                            <AddressList\n                                addresses={addresses}\n                                onSelectAddress={selectAddress}\n                                removeAddress={removeAddress}\n                            />\n                        </div>\n            }\n        </DropDown>\n    )\n}\n\nexport default AddressBook","import { names, tokens } from 'consts/humanizerInfo'\n\nconst isValidAddress = address => /^0x[a-fA-F0-9]{40}$/.test(address)\n\nconst isKnownTokenOrContract = address => {\n    const addressToLowerCase = address.toLowerCase()\n    const tokensAddresses = Object.keys(tokens)\n    const contractsAddresses = Object.keys(names)\n    return tokensAddresses.includes(addressToLowerCase) || contractsAddresses.includes(addressToLowerCase)\n}\n\nexport {\n    isValidAddress,\n    isKnownTokenOrContract\n}","import './AddressWarning.scss'\n\nimport { MdOutlineAdd } from 'react-icons/md'\nimport { Checkbox } from 'components/common'\nimport { useEffect, useMemo, useState } from 'react'\nimport { isValidAddress, isKnownTokenOrContract } from 'lib/address';\n\nconst AddressWarning = ({ address, onChange, onAddNewAddress, isKnownAddress }) => {\n    const [confirmed, setConfirmed] = useState(false)\n    const unknownWarning = useMemo(() => isValidAddress(address) && !isKnownAddress(address), [address, isKnownAddress])\n    const smartContractWarning = useMemo(() => isKnownTokenOrContract(address), [address])\n\n    useEffect(() => {\n        if (onChange) onChange(confirmed)\n    }, [confirmed, onChange])\n\n    return (\n        <>\n            {\n                !smartContractWarning && unknownWarning ?\n                    <div id=\"unknown-address-warning\">\n                        <Checkbox\n                            label=\"Confirm sending to a previously unknown address\"\n                            checked={confirmed}\n                            onChange={({ target }) => setConfirmed(target.checked)}\n                        />\n                        <div className=\"button\" onClick={onAddNewAddress}>\n                            <MdOutlineAdd/>\n                            Add it to the address book\n                        </div>\n                    </div>\n                    :\n                    null\n            }\n        </>\n    )\n}\n\nexport default AddressWarning","import './Button.scss'\n\nconst Button = ({ children, className, small, mini, icon, iconAfter, disabled, onClick, red, danger, clear, border, title, type, textOnly }) => {\n    return (\n        <button\n            onClick={(...args) => !disabled && onClick && onClick.apply(this, args)}\n            className={`buttonComponent ${className} ${small ? 'small' : ''} ${mini ? 'mini' : ''} ${danger || red ? 'danger' : ''} ${clear ? 'clear' : ''} ${border ? 'border' : ''} ${disabled ? 'disabled' : ''} ${textOnly ? 'text-only' : ''}`}\n            // disabled={disabled} // causing pointer-events to not trigger \n            title={title}\n            // used with <form>\n            type={type}\n        >\n            { icon ? <div className=\"icon-button\">{ icon }</div> : null }\n            { children }\n            { iconAfter ? <div className=\"icon-button\">{ iconAfter }</div> : null }\n        </button>\n    )\n}\n\nexport default Button\n","import './Chart.scss';\n\nimport DonutChart from \"react-donut-chart\";\nimport { useState } from 'react';\n\nconst Chart = ({ data, size }) => {\n    const [hoveredItem, setHoveredItem] = useState({});\n\n    const colors = [\n        \"#AA6AFF\",\n        \"#80FFDB\",\n        \"#8088FF\",\n        \"#E680FF\",\n        \"#A5FF80\",\n        \"#E6FF80\",\n        \"#FFC480\",\n        \"#FF8080\",\n    ];\n    \n    const strokeColor = \"transparent\";\n    const innerRadius = 0.5;\n    const selectedOffset = 0.05;\n\n    const onMouseEnter = (item) => {\n        setHoveredItem(item.label);\n    };\n\n    const onClick = (item, toggled) => {\n        if (toggled) {\n            console.log(item);\n        }\n    };\n\n    const sortData = data => {\n        return data.sort((a, b) => b.value - a.value);\n    };\n\n    const getItemColor = index => {\n        const colorCount = colors.length - 1;\n        return index > colorCount ? colors[index - (colors.length * Math.trunc(index / colors.length))] : colors[index];\n    };\n\n    return (\n        <div className=\"chart\">\n            <DonutChart\n                className=\"donut\"\n                height={size}\n                width={size}\n                onMouseEnter={(item) => onMouseEnter(item)}\n                data={sortData(data)}\n                colors={colors}\n                startAngle={-90}\n                strokeColor={strokeColor}\n                innerRadius={innerRadius}\n                selectedOffset={selectedOffset}\n                legend={false}\n                onClick={(item, toggled) => onClick(item, toggled)}\n            />\n            <div className=\"legend\" style={{maxHeight: size}}>\n                {\n                    data.map((item, i) => (\n                        <div className={`item ${hoveredItem === item.label ? 'active' : ''}`} key={`item-${i}`}>\n                            <div className=\"color\" style={{backgroundColor: getItemColor(i)}}/>\n                            <label>{ item.label }</label>\n                            <div className=\"separator\"></div>\n                            <div className=\"percent\">\n                                { parseFloat(item.value).toFixed(2) }%\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default Chart;","import React, { forwardRef } from 'react';\nimport './Checkbox.scss'\n\nconst Checkbox = forwardRef((props, ref) => {\n    const inputElem =  (\n        <input type=\"checkbox\" checked={props.checked} required={props.required} onChange={props.onChange} ref={ref}/>\n    )\n\n    return props.label ? (<label className={`checkbox-container ${props.disabled ? 'disabled': ''}`}>\n        {inputElem}\n        <div className=\"checkbox-mark\"></div>\n        <div className=\"checkbox-label\">{props.label}</div>\n    </label>) : (<>\n        {inputElem}\n        <div className=\"checkbox-mark\"></div>\n    </>)\n})\n\nexport { Checkbox as default }","import { useEffect } from 'react';\n\nexport default function useOnClickOutside(ref, handler) {\n    useEffect(\n        () => {\n            const listener = (event) => {\n                if (!ref.current || ref.current.contains(event.target)) {\n                    return;\n                }\n                handler(event);\n            };\n            document.addEventListener(\"mousedown\", listener);\n            document.addEventListener(\"touchstart\", listener);\n                return () => {\n                    document.removeEventListener(\"mousedown\", listener);\n                    document.removeEventListener(\"touchstart\", listener);\n                };\n        },\n        [ref, handler]\n    );\n}","import './DropDown.scss'\n\nimport { useEffect, useRef, useState } from 'react';\nimport { BsChevronDown } from 'react-icons/bs'\nimport { Borders as LoadingBorders } from 'components/common'\nimport { CSSTransition } from 'react-transition-group';\nimport useOnClickOutside from 'hooks/onClickOutside';\n\nexport default function DropDown({ children, id, icon, className, title, badge, open, closeOnClick, onChange, onOpen, onClose, style, isLoading }) {\n    const ref = useRef();\n    const transitionRef = useRef();\n    const [isMenuOpen, setMenuOpen] = useState(false);\n\n    useEffect(() => setMenuOpen(open), [open]);\n    useEffect(() => onChange && onChange(isMenuOpen), [onChange, isMenuOpen]);\n    useEffect(() => !isMenuOpen && onClose && onClose(), [isMenuOpen, onClose]);\n    useEffect(() => isMenuOpen && onOpen && onOpen(), [isMenuOpen, onOpen])\n    useOnClickOutside(ref, () => setMenuOpen(false));\n\n    return (\n        <div id={id} style={style} className={`dropdown ${className}`} ref={ref}>\n            <div className=\"content\" onClick={() => setMenuOpen(!isMenuOpen)}>\n                {\n                    icon ?\n                        <div className=\"icon\" style={{backgroundImage: `url(${icon})`}} />\n                        :\n                        null\n                }\n                <div className=\"title\">{ title }</div>\n                {\n                    badge ?\n                        <div className=\"badge\">\n                            { badge > 9 ? '9+' : badge }\n                        </div>\n                        :\n                        null\n                }\n                <div className=\"separator\"></div>\n                <div className={`handle ${isMenuOpen ? 'open' : ''}`}>\n                    <BsChevronDown size={20}></BsChevronDown>\n                </div>\n\n                { isLoading && <LoadingBorders /> }\n            </div>\n            <CSSTransition unmountOnExit in={isMenuOpen} timeout={200} classNames=\"fade\" nodeRef={transitionRef}>\n                <div className=\"menu\" ref={transitionRef} onClick={closeOnClick ? () => setMenuOpen(false) : null}>\n                    { children }\n                </div>\n            </CSSTransition>\n        </div>\n    )\n}\n","import './Loading.scss';\n\nimport { AiOutlineLoading } from 'react-icons/ai';\n\nconst Loading = () => {\n    return (\n        <div className=\"loading\">\n            <div className=\"icon\">\n                <AiOutlineLoading size={35}/>\n            </div>\n        </div>\n    );\n};\n\nexport default Loading;","import './Loading.scss';\n\nconst AmbireLoading = () => {\n    return (\n        <div className=\"ambire-loading-animation-128\">\n        </div>\n    );\n};\n\nexport default AmbireLoading;","import './Loading.scss'\n\nconst Borders = () => {\n    return (\n      <div className='loading-borders'>\n        <span />\n        <span />\n        <span />\n        <span />\n      </div>\n    )\n}\n\nexport default Borders\n","import './Loading.scss';\n\nconst Skeleton = ({children}) => {\n    return (\n        <div className=\"Skeleton\">\n            <div className=\"\">\n                {children}\n            </div>\n        </div>\n    );\n};\n\nexport default Skeleton;","import './ToastProvider.scss';\n\nimport React, { createRef, useState, useCallback, useEffect } from \"react\";\nimport { MdOutlineClose } from 'react-icons/md';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport { useHistory } from 'react-router-dom'\n\nconst ToastContext = React.createContext(null);\n\nlet id = 0\n\nconst ToastProvider = ({ children }) => {\n    const history = useHistory()\n    const [toasts, setToasts] = useState([]);\n\n    const removeToast = useCallback(id => {\n        setToasts(toasts => toasts.filter(t => t.id !== id));\n    }, []);\n\n    const addToast = useCallback((content, options) => {\n        const defaultOptions = {\n            timeout: 8000,\n            error: false,\n            position: 'center',\n            sticky: false,\n            badge: null,\n            onClick: null,\n            url: null,\n            route: null,\n        }\n\n        const toast = {\n            id: id++,\n            content,\n            ref: createRef(),\n            ...defaultOptions,\n            ...options\n        }\n        \n        setToasts(toasts => [\n            ...toasts,\n            toast\n        ]);\n\n        !toast.sticky && setTimeout(() => removeToast(toast.id), toast.timeout)\n\n        return toast.id;\n    }, [setToasts, removeToast]);\n\n    const updateToastsPositions = useCallback(() => {\n        toasts\n            .filter(({ sticky }) => !sticky)\n            .forEach(({ id, ref }) => {\n                const toastElement = ref.current\n                if (!toastElement) return\n\n                let bottomToasts = []\n                for (let i = id; i <= toasts[toasts.length - 1].id; i++) {\n                    const element = toasts.filter(({ sticky }) => !sticky).find(({ id }) => id === i)\n                    if (element) bottomToasts.push(element)\n                }\n\n                const style = getComputedStyle(toastElement)\n                const marginBottom = parseInt(style.marginBottom)\n\n                const x = (document.body.clientWidth / 2) - (toastElement.clientWidth / 2)\n                const y = bottomToasts.map(({ ref }) => ref.current && ref.current.offsetHeight).reduce((acc, curr) => acc + curr + marginBottom, 0)\n                toastElement.style.transform = `translate(${x}px, -${y}px)`\n            })\n    }, [toasts])\n\n    useEffect(() => updateToastsPositions(), [toasts, updateToastsPositions])\n    useEffect(() => {\n        const onResize = () => updateToastsPositions()\n        window.addEventListener('resize', onResize, false);\n        return () => window.removeEventListener('resize', onResize, false);\n    }, [updateToastsPositions])\n\n    const onToastClick = (id, onClick, url, route) => {\n        if (url) window.open(url, '_blank')\n        else if (route) history.push(route)\n        onClick ? onClick() : removeToast(id)\n    }\n    \n    return (\n        <ToastContext.Provider\n            value={{\n                addToast,\n                removeToast\n            }}\n        >\n            <div id=\"toast-container\" className={!toasts.length ? 'hide' : ''}>\n                <TransitionGroup className=\"transition-group\">\n                {\n                    toasts.map(({ id, ref, url, route, error, sticky, badge, position, content, onClick }) => (\n                        <CSSTransition timeout={200} classNames=\"slide-fade\" key={id} nodeRef={ref}>\n                            <div className={`toast ${error ? 'error' : ''} ${sticky ? 'sticky' : ''} ${position ? position : ''}`} ref={ref}>\n                                <div className=\"inner\" onClick={() => onToastClick(id, onClick, url, route)}>\n                                    { badge ? <div className=\"badge\">{ badge }</div> : null }\n                                    { content }\n                                </div>\n                                {\n                                    sticky ? \n                                        <div className=\"close\" onClick={() => removeToast(id)}>\n                                            <MdOutlineClose/>\n                                        </div>\n                                        :\n                                        null\n                                }\n                            </div>\n                        </CSSTransition>\n                    ))\n                }\n                </TransitionGroup>\n            </div>\n            { children }\n        </ToastContext.Provider>\n    );\n};\n\nexport { ToastContext };\nexport default ToastProvider;","import { useContext } from 'react';\nimport { ToastContext } from 'components/ToastProvider/ToastProvider';\n\nconst useToasts = () => {\n    return useContext(ToastContext);\n};\n\nexport { useToasts };","const networks = [{\n\t\tid: 'ethereum',\n\t\tchainId: 1,\n\t\t//rpc: 'https://mainnet.infura.io/v3/3d22938fd7dd41b7af4197752f83e8a1',\n\t\t//rpc: 'https://morning-wild-water.quiknode.pro/66011d2c6bdebc583cade5365086c8304c13366c/',\n\t\trpc: 'https://mainnet.infura.io/v3/d4319c39c4df452286d8bf6d10de28ae',\n\t\tnativeAssetSymbol: 'ETH',\n\t\tname: 'Ethereum',\n\t\ticon: '/resources/networks/ethereum.png',\n\t\texplorerUrl: 'https://etherscan.io',\n\t\tunstoppableDomainsChain: 'ERC20'\n\t},  {\n\t\tid: 'polygon',\n\t\tchainId: 137,\n\t\trpc: 'https://polygon-rpc.com/rpc',\n\t\t// rpc: 'https://polygon-mainnet.infura.io/v3/d4319c39c4df452286d8bf6d10de28ae',\n\t\tnativeAssetSymbol: 'MATIC',\n\t\tname: 'Polygon',\n\t\ticon: '/resources/networks/polygon.png',\n\t\texplorerUrl: 'https://polygonscan.com',\n\t\tunstoppableDomainsChain: 'MATIC'\n\t}, {\n\t\tid: 'avalanche',\n\t\tchainId: 43114,\n\t\trpc: 'https://api.avax.network/ext/bc/C/rpc',\n\t\tnativeAssetSymbol: 'AVAX',\n\t\tname: 'Avalanche',\n\t\ticon: '/resources/networks/avalanche.png',\n\t\texplorerUrl: 'https://snowtrace.io',\n\t\tunstoppableDomainsChain: 'ERC20'\n\t}, {\n\t\t// to match the zapper ID\n\t\tid: 'binance-smart-chain',\n\t\tchainId: 56,\n\t\trpc: 'https://bsc-dataseed1.defibit.io',\n\t\tnativeAssetSymbol: 'BNB',\n\t\tname: 'Binance Smart Chain',\n\t\ticon: '/resources/networks/bsc.png',\n\t\texplorerUrl: 'https://bscscan.com',\n\t\tunstoppableDomainsChain: 'BEP20'\n\t}, {\n\t\tid: 'fantom',\n\t\tchainId: 250,\n\t\trpc: 'https://rpc.ftm.tools',\n\t\tnativeAssetSymbol: 'FTM',\n\t\tname: 'Fantom Opera',\n\t\ticon: '/resources/networks/fantom.png',\n\t\texplorerUrl: 'https://ftmscan.com',\n\t\tunstoppableDomainsChain: 'ERC20'\n\t}, {\n\t\tid: 'moonbeam',\n\t\tchainId: 1284,\n\t\trpc: 'https://rpc.api.moonbeam.network',\n\t\tnativeAssetSymbol: 'GLMR',\n\t\tname: 'Moonbeam',\n\t\ticon: '/resources/networks/moonbeam.png',\n\t\texplorerUrl: 'https://moonscan.io/',\n\t\tunstoppableDomainsChain: 'ERC20'\n\t}, {\n\t\tid: 'moonriver',\n\t\tchainId: 1285,\n\t\trpc: 'https://rpc.api.moonriver.moonbeam.network',\n\t\tnativeAssetSymbol: 'MOVR',\n\t\tname: 'Moonriver',\n\t\ticon: '/resources/networks/moonriver.png',\n\t\texplorerUrl: 'https://moonriver.moonscan.io/',\n\t\tunstoppableDomainsChain: 'ERC20'\n\t}/*, {\n\t\tid: 'arbitrum',\n\t\tchainId: 42161,\n\t\trpc: 'https://arb1.arbitrum.io/rpc',\n\t\tnativeAssetSymbol: 'AETH',\n\t\tname: 'Arbitrum',\n\t\ticon: '/resources/networks/arbitrum.svg',\n\t\texplorerUrl: 'https://arbiscan.io',\n\t\tunstoppableDomainsChain: 'ERC20\n}*/]\n\nexport default networks\n","export const RAMP_HOST_API_KEY = process.env.REACT_APP_RAMP_HOST_API_KEY;\nexport const PAYTRIE_PARTNER_URL = process.env.REACT_APP_PAYTRIE_PARTNER_URL;\nexport const TRANSAK_API_KEY = process.env.REACT_APP_TRANSAK_API_KEY;\nexport const TRANSAK_ENV = process.env.REACT_APP_TRANSAK_ENV;\nexport const ZAPPER_API_KEY = process.env.REACT_APP_ZAPPER_API_KEY;\nexport const ZAPPER_API_ENDPOINT = process.env.REACT_APP_ZAPPER_API_ENDPOINT;\nexport const OPENSEA_FRAME_URL = process.env.REACT_APP_OPENSEA_FRAME_URL;\nexport const VELCRO_API_ENDPOINT = process.env.REACT_APP_VELCRO_API_ENDPOINT;\nexport const SUSHI_SWAP_FRAME = process.env.REACT_APP_SUSHI_SWAP_FRAME_URL;\nexport const SUSHI_SWAP_FRAME_EXCEPTIONS = process.env.REACT_APP_SUSHI_SWAP_FRAME_EXCEPTIONS_URL ? JSON.parse(process.env.REACT_APP_SUSHI_SWAP_FRAME_EXCEPTIONS_URL) : {};\n","export function formatFloatTokenAmount(amount, useGrouping = true, maximumFractionDigits = 18) {\n    if (isNaN(amount) || isNaN(parseFloat(amount)) || !(typeof amount === 'number' || typeof amount === 'string')) return amount\n\n    try {\n        const minimumFractionDigits = Math.min(2, maximumFractionDigits || 0)\n        return ((typeof amount === 'number') ? amount : parseFloat(amount))\n            .toLocaleString(undefined,\n                {\n                    useGrouping,\n                    maximumFractionDigits: Math.max(minimumFractionDigits, maximumFractionDigits),\n                    minimumFractionDigits\n                })\n    } catch (err) {\n        console.error(err)\n        return amount\n    }\n}\n\n// Round a floating point number to a specific decimal places, i.e. 1.156 => 1.16\nexport function roundFloatingNumber(number, places = 2) {\n  const decimals = Math.pow(10, places)\n\n  return Math.round((number + Number.EPSILON) * decimals) / decimals\n}\n","// List of all supported protocols by networks: https://api.zapper.fi/v1/protocols/balances/supported?api_key=5d1237c2-3840-4733-8e92-c5a58fe81b88\n\nconst suportedProtocols = [\n    {\n        network: 'ethereum',\n        // protocols: ['1inch', 'aave-v2', 'alchemix', 'badger', 'balancer-v2', 'compound', 'cream', 'curve', 'sushiswap', 'uniswap-v2', 'uniswap-v3', 'nft'],\n        protocols: ['nft'],\n        balancesProvider: 'velcro',\n        nftsProvider: 'velcro'\n    },\n    {\n        network: 'polygon',\n        // protocols: ['aave-v2', 'quickswap', 'sushiswap', 'nft'],\n        protocols: ['nft'],\n        balancesProvider: 'velcro',\n        nftsProvider: 'velcro'\n    },\n    {\n        network: 'avalanche',\n        // protocols: ['aave-v2'],\n        protocols: [],\n        balancesProvider: 'velcro'\n    },\n    {\n        network: 'binance-smart-chain',\n        // protocols: ['pancakeswap'],\n        protocols: [],\n        balancesProvider: 'velcro'\n    },\n    {\n        network: 'fantom',\n        protocols: [],\n\t    balancesProvider: 'velcro'\n    },\n    {\n        network: 'moonbeam',\n        protocols: [],\n\t    balancesProvider: 'velcro'\n    },\n    {\n        network: 'moonriver',\n        protocols: [],\n\t    balancesProvider: 'velcro'\n    }\n    /*,\n    {\n        network: 'arbitrum',\n        protocols: [],\n        balancesProvider: 'velcro'\n    }*/\n]\n\nexport default suportedProtocols\n","import { abis } from 'consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { nativeToken, token } from 'lib/humanReadableTransactions'\n\nconst iface = new Interface(abis.UniV2Router)\nconst recipientText = (recipient, txnFrom, extended = false) => recipient.toLowerCase() === txnFrom.toLowerCase()\n  ? !extended ? ``: [] : !extended ? ` and send it to ${recipient}` : ['and send it to', { type: 'address', address: recipient }]\n\nconst deadlineText = (deadlineSecs, mined) => {\n  if (mined) return ''\n  const minute = 60000\n  const deadline = deadlineSecs * 1000\n  const diff = deadline - Date.now()\n  if (diff < 0 && diff > -minute*2) return `, expired just now`\n  // Disabled this: this is a bit of a hack cause we don't want it to show for mined txns\n  // we don't really need it for pending ones, simply because we'll show the big error message instead\n  //if (diff < 0) return `, expired ${Math.floor(-diff / minute)} minutes ago`\n  if (diff < 0) return ''\n  if (diff < minute) return `, expires in less than a minute`\n  if (diff < 10*minute) return `, expires in ${Math.floor(diff / minute)} minutes`\n  return ''\n}\n\nconst toExtended = (fromToken, toToken, recipient, expires, atLeast = true) => {\n  const upTo = !atLeast ? ['up to'] : []\n  return [[\n    'Swap',\n    ...upTo,\n    {\n      type: 'token',\n      ...fromToken\n    },\n    atLeast ? 'for at least' : 'for',\n    {\n      type: 'token',\n      ...toToken\n    },\n    ...recipient,\n    expires\n  ]]\n}\n\nconst uniV2Mapping = {\n  // ordered in the same order as the router\n  [iface.getSighash('swapExactTokensForTokens')]: (txn, network, opts = {}) => {\n    const [ amountIn, amountOutMin, path, to, deadline ] = iface.parseTransaction(txn).args\n    const outputAsset = path[path.length - 1]\n    return !opts.extended ? \n      [`Swap ${token(path[0], amountIn)} for at least ${token(outputAsset, amountOutMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n      : toExtended(token(path[0], amountIn, true), token(outputAsset, amountOutMin, true), recipientText(to, txn.from, true), deadlineText(deadline, opts.mined))\n  },\n  [iface.getSighash('swapTokensForExactTokens')]: (txn, network, opts = {}) => {\n    const [ amountOut, amountInMax, path, to, deadline ] = iface.parseTransaction(txn).args\n    const outputAsset = path[path.length - 1]\n    return !opts.extended ?\n      [`Swap up to ${token(path[0], amountInMax)} for ${token(outputAsset, amountOut)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n      : toExtended(token(path[0], amountInMax, true), token(outputAsset, amountOut, true), recipientText(to, txn.from, true), deadlineText(deadline, opts.mined), false)\n  },\n  [iface.getSighash('swapExactETHForTokens')]: (txn, network, opts = {}) => {\n    const { args, value } = iface.parseTransaction(txn)\n    const [ amountOutMin, path, to, deadline ] = args\n    const outputAsset = path[path.length - 1]\n    return !opts.extended ?\n      [`Swap ${nativeToken(network, value)} for at least ${token(outputAsset, amountOutMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n      : toExtended(nativeToken(network, value, true), token(outputAsset, amountOutMin, true), recipientText(to, txn.from, true), deadlineText(deadline, opts.mined))\n  },\n  [iface.getSighash('swapTokensForExactETH')]: (txn, network, opts = {}) => {\n    const [ amountOut, amountInMax, path, to, deadline ] = iface.parseTransaction(txn).args\n    return !opts.extended ? \n      [`Swap up to ${token(path[0], amountInMax)} for ${nativeToken(network, amountOut)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n      : toExtended(token(path[0], amountInMax, true), nativeToken(network, amountOut, true), recipientText(to, txn.from, true), deadlineText(deadline, opts.mined), false)\n  },\n  [iface.getSighash('swapExactTokensForETH')]: (txn, network, opts = {}) => {\n    const [ amountIn, amountOutMin, path, to, deadline ] = iface.parseTransaction(txn).args\n    return !opts.extended ?\n      [`Swap ${token(path[0], amountIn)} for at least ${nativeToken(network, amountOutMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n      : toExtended(token(path[0], amountIn, true), nativeToken(network, amountOutMin, true), recipientText(to, txn.from, true), deadlineText(deadline, opts.mined))\n  },\n  [iface.getSighash('swapETHForExactTokens')]: (txn, network, opts = {}) => {\n    const { args, value } = iface.parseTransaction(txn)\n    const [ amountOut, path, to, deadline ] = args\n    const outputAsset = path[path.length - 1]\n    return !opts.extended ? \n      [`Swap up to ${nativeToken(network, value)} for ${token(outputAsset, amountOut)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n      : toExtended(nativeToken(network, value, true), token(outputAsset, amountOut, true), recipientText(to, txn.from, true), deadlineText(deadline, opts.mined), false)\n  },\n  // Liquidity\n  [iface.getSighash('addLiquidity')]: (txn, network, opts = {}) => {\n    const [tokenA, tokenB, amountADesired, amountBDesired, /*amountAMin*/, /*amountBMin*/, to, deadline] =  iface.parseTransaction(txn).args\n    return [`Add liquidity: ${token(tokenA, amountADesired)} and ${token(tokenB, amountBDesired)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('addLiquidityETH')]: (txn, network, opts = {}) => {\n    const { args, value } = iface.parseTransaction(txn)\n    const [token, amountTokenDesired, /*amountTokenMin*/, /*amountETHMin*/, to, deadline] = args\n    return [`Add liquidity: ${token(token, amountTokenDesired)} and ${nativeToken(network, value)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('removeLiquidity')]: (txn, network, opts = {}) => {\n    const [tokenA, tokenB, /*liquidity*/, amountAMin, amountBMin, to, deadline] =  iface.parseTransaction(txn).args\n    return [`Remove liquidity: at least ${token(tokenA, amountAMin)} and ${token(tokenB, amountBMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('removeLiquidityETH')]: (txn, network, opts = {}) => {\n    const [token, /*liquidity*/, amountTokenMin, amountETHMin, to, deadline] =  iface.parseTransaction(txn).args\n    return [`Remove liquidity: at least ${token(token, amountTokenMin)} and ${nativeToken(network, amountETHMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  // NOTE: We currently do not support *WithPermit functions cause they require an ecrecover signature\n  // Uniswap will detect we don't support it cause it will fail on requesting eth_signTypedData_v4\n}\n\nconst ifaceV3 = new Interface(abis.UniV3Router)\nconst parsePath = pathBytes => {\n    // some decodePacked fun\n    // can we do this with Ethers AbiCoder? probably not\n    let path = []\n    // address, uint24\n    for (let i = 2; i < pathBytes.length; i += 46) {\n      path.push('0x' + pathBytes.substr(i, 40))\n    }\n    return path\n}\n\nconst uniV3Mapping = {\n  [ifaceV3.getSighash('multicall')]: (txn, network) => {\n    const args = ifaceV3.parseTransaction(txn).args\n    const calls = args[args.length - 1]\n    // @TODO: Multicall that outputs ETH should be detected as such and displayed as one action\n    // the current verbosity of \"Swap ..., unwrap WETH to ETH\" will be a nice pedantic quirk\n    const parsed = calls.map(data => {\n      const sigHash = data.slice(0, 10)\n      const humanizer = uniV3Mapping[sigHash]\n      return humanizer ? humanizer({ ...txn, data }, network) : null\n    }).flat().filter(x => x)\n    return parsed.length ? parsed : [`Unknown Uni V3 interaction`]\n  },\n  // NOTE: selfPermit is not supported cause it requires an ecrecover signature\n  [ifaceV3.getSighash('exactInputSingle')]: (txn, network, opts = {}) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    // @TODO: consider fees\n    return [`Swap ${token(params.tokenIn, params.amountIn)} for at least ${token(params.tokenOut, params.amountOutMinimum)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline, opts.mined)}`]\n  },\n  [ifaceV3.getSighash('exactInput')]: (txn, network, opts = {}) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    const path = parsePath(params.path)\n    return [`Swap ${token(path[0], params.amountIn)} for at least ${token(path[path.length - 1], params.amountOutMinimum)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline, opts.mined)}`]\n  },\n  [ifaceV3.getSighash('exactOutputSingle')]: (txn, network, opts = {}) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    return [`Swap up to ${token(params.tokenIn, params.amountInMaximum)} for ${token(params.tokenOut, params.amountOut)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline, opts.mined)}`]\n  },\n  [ifaceV3.getSighash('exactOutput')]: (txn, network, opts = {}) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    const path = parsePath(params.path)\n    return [`Swap up to ${token(path[0], params.amountInMaximum)} for ${token(path[path.length - 1], params.amountOut)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline, opts.mined)}`]\n  },\n  [ifaceV3.getSighash('unwrapWETH9')]: (txn, network) => {\n    const [ amountMin, recipient ] = ifaceV3.parseTransaction(txn).args\n    return [`Unwrap at least ${nativeToken(network, amountMin)}${recipientText(recipient, txn.from)}`]\n  },\n}\n\nconst ifaceV32 = new Interface(abis.UniV3Router2)\nconst uniV32Mapping = {\n  [ifaceV32.getSighash('multicall(uint256,bytes[])')]: (txn, network, opts = {}) => {\n    const [deadline, calls] = ifaceV32.parseTransaction(txn).args\n    // @TODO: Multicall that outputs ETH should be detected as such and displayed as one action\n    // the current verbosity of \"Swap ..., unwrap WETH to ETH\" will be a nice pedantic quirk\n    const parsed = calls.map(data => {\n      const sigHash = data.slice(0, 10)\n      const humanizer = uniV32Mapping[sigHash]\n      return humanizer ? humanizer({ ...txn, data }, network) : null\n    }).flat().filter(x => x)\n    return (parsed.length ? parsed : [`Unknown Uni V3 interaction`])\n      // the .slice(2) is needed cause usuall this returns something like \", expires\"... and we concat all actions with \", \" anyway\n      .concat([deadlineText(deadline.toNumber(), opts.mined).slice(2)]).filter(x => x)\n  },\n  // NOTE: selfPermit is not supported cause it requires an ecrecover signature\n  [ifaceV32.getSighash('exactInputSingle')]: (txn, network) => {\n    const [ params ] = ifaceV32.parseTransaction(txn).args\n    // @TODO: consider fees\n    return [`Swap ${token(params.tokenIn, params.amountIn)} for at least ${token(params.tokenOut, params.amountOutMinimum)}${recipientText(params.recipient, txn.from)}`]\n  },\n  [ifaceV32.getSighash('exactInput')]: (txn, network) => {\n    const [ params ] = ifaceV32.parseTransaction(txn).args\n    const path = parsePath(params.path)\n    return [`Swap ${token(path[0], params.amountIn)} for at least ${token(path[path.length - 1], params.amountOutMinimum)}${recipientText(params.recipient, txn.from)}`]\n  },\n  [ifaceV32.getSighash('exactOutputSingle')]: (txn, network) => {\n    const [ params ] = ifaceV32.parseTransaction(txn).args\n    return [`Swap up to ${token(params.tokenIn, params.amountInMaximum)} for ${token(params.tokenOut, params.amountOut)}${recipientText(params.recipient, txn.from)}`]\n  },\n  [ifaceV32.getSighash('exactOutput')]: (txn, network) => {\n    const [ params ] = ifaceV32.parseTransaction(txn).args\n    const path = parsePath(params.path)\n    return [`Swap up to ${token(path[0], params.amountInMaximum)} for ${token(path[path.length - 1], params.amountOut)}${recipientText(params.recipient, txn.from)}}`]\n  },\n  [ifaceV32.getSighash('swapTokensForExactTokens')]: (txn, network) => {\n    // NOTE: is amountInMax set when dealing with ETH? it should be... cause value and max are not the same thing\n    const { amountOut, amountInMax, path, to } = ifaceV32.parseTransaction(txn).args\n    return [`Swap up to ${token(path[0], amountInMax)} for ${token(path[path.length - 1], amountOut)}${recipientText(to, txn.from)}}`]\n  },\n  [ifaceV32.getSighash('swapExactTokensForTokens')]: (txn, network) => {\n    // NOTE: is amountIn set when dealing with ETH?\n    const { amountIn, amountOutMin, path, to } = ifaceV32.parseTransaction(txn).args\n    return [`Swap ${token(path[0], amountIn)} for at least ${token(path[path.length - 1], amountOutMin)}${recipientText(to, txn.from)}`]\n  },\n  [ifaceV32.getSighash('unwrapWETH9(uint256)')]: (txn, network) => {\n    const [ amountMin ] = ifaceV32.parseTransaction(txn).args\n    return [`Unwrap at least ${nativeToken(network, amountMin)}`]\n  },\n  [ifaceV32.getSighash('unwrapWETH9(uint256,address)')]: (txn, network) => {\n    const [ amountMin, recipient ] = ifaceV32.parseTransaction(txn).args\n    return [`Unwrap at least ${nativeToken(network, amountMin)}${recipientText(recipient, txn.from)}`]\n  },\n}\n\n\nconst mapping = { ...uniV2Mapping, ...uniV3Mapping, ...uniV32Mapping }\nexport default mapping","import { abis } from 'consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { token, getName } from 'lib/humanReadableTransactions'\nimport { constants } from 'ethers'\n\nconst iface = new Interface(abis.ERC20)\n\nconst ERC20Mapping = {\n  [iface.getSighash('approve')]: (txn, network, { extended = false }) => {\n    const [ approvedAddress, amount ] = iface.parseTransaction(txn).args\n    const name = getName(approvedAddress, network)\n    const tokenName = getName(txn.to, network)\n    if (amount.eq(0)) return !extended ? [`Revoke approval for ${name} to use ${tokenName}`] : [[\n      'Revoke',\n      'approval for',\n      {\n        type: 'address',\n        address: approvedAddress,\n        name\n      },\n      'to use',\n      {\n        type: 'token',\n        ...token(txn.to, amount, true)\n      }\n    ]]\n\n    if (extended) return [[\n      'Approve',\n      {\n        type: 'address',\n        address: approvedAddress,\n        name\n      },\n      `to use${amount.eq(constants.MaxUint256) ? ' your' : ''}`,\n      {\n        type: 'token',\n        ...token(txn.to, amount, true)\n      }\n    ]]\n\n    if (amount.eq(constants.MaxUint256)) return [`Approve ${name} to use your ${tokenName}`]\n    return [`Approve ${name} to use ${token(txn.to, amount)}`]\n  },\n  [iface.getSighash('transfer')]: (txn, network, { extended }) => {\n    const [ to, amount ] = iface.parseTransaction(txn).args\n    const name = getName(to, network)\n    \n    if (extended) return [[\n      'Send',\n      {\n        type: 'token',\n        ...token(txn.to, amount, true)\n      },\n      'to',\n      {\n        type: 'address',\n        address: to,\n        name\n      }\n    ]]\n  \n    return [`Send ${token(txn.to, amount)} to ${to === name ? to : name+' ('+to+')'}`]\n  },\n  /*\n  // HACK: since this conflicts with ERC721 in terms of sigHash, but ERC721 is more likely to use this function from a user perspective, do not define this one\n  [iface.getSighash('transferFrom')]: (txn, network) => {\n    const [ from, to, amount ] = iface.parseTransaction(txn).args\n    return [`Send ${token(txn.to, amount)} from ${getName(from, network)} to ${getName(to, network)}`]\n  },*/\n}\nexport default ERC20Mapping\n","import { abis } from 'consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { token } from 'lib/humanReadableTransactions'\n\nconst iface = new Interface(abis.AaveLendingPoolV2)\nconst onBehalfText = (onBehalf, txnFrom) => onBehalf.toLowerCase() !== txnFrom.toLowerCase()\n  ? ' on behalf of '+onBehalf\n  : ''\n\nconst toExtended = (action, word, token, txn, onBehalf) => {\n  return [[\n    action,\n    {\n      type: 'token',\n      ...token\n    },\n    word,\n    {\n      type: 'address',\n      address: txn.to,\n      name: 'Aave Lending Pool'\n    },\n    onBehalf ? onBehalfText(onBehalf, txn.from) : ''\n  ]]\n}\n\nconst AaveMapping = {\n  [iface.getSighash('deposit')]: (txn, network, { extended }) => {\n    const [ asset, amount, onBehalf ] = iface.parseTransaction(txn).args\n    if (extended) return toExtended('Deposit', 'to', token(asset, amount, true), txn, onBehalf)\n    return [`Deposit ${token(asset, amount)} to Aave lending pool${onBehalfText(onBehalf, txn.from)}`]\n  },\n  [iface.getSighash('withdraw')]: (txn, network, { extended }) => {\n    const [ asset, amount, onBehalf ] = iface.parseTransaction(txn).args\n    if (extended) return toExtended('Withdraw', 'from', token(asset, amount, true), txn, onBehalf)\n    return [`Withdraw ${token(asset, amount)} from Aave lending pool${onBehalfText(onBehalf, txn.from)}`]\n  },\n  [iface.getSighash('repay')]: (txn, network, { extended }) => {\n    const [ asset, amount,/* rateMode */, onBehalf ] = iface.parseTransaction(txn).args\n    if (extended) return toExtended('Repay', 'to', token(asset, amount, true), txn, onBehalf)\n    return [`Repay ${token(asset, amount)} to Aave lending pool${onBehalfText(onBehalf, txn.from)}`]\n  },\n  [iface.getSighash('borrow')]: (txn, network, { extended }) => {\n    const [ asset, amount ] = iface.parseTransaction(txn).args\n    if (extended) return toExtended('Borrow', 'from', token(asset, amount, true), txn)\n    return [`Borrow ${token(asset, amount)} from Aave lending pool`]\n  },\n}\nexport default AaveMapping","import { abis } from 'consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { getName } from 'lib/humanReadableTransactions'\n\nconst iface = new Interface(abis.ERC721)\nconst fromText = (from, txnFrom) => from.toLowerCase() !== txnFrom.toLowerCase() ? ` from ${from}` : ''\n\nconst toExtended = (tokenId, from, to, txn, network) => [[\n  'Send',\n  {\n    type: 'erc721',\n    address: txn.to,\n    network: network.id,\n    id: tokenId,\n    name: `Token #${tokenId.toString(10)}${fromText(from, txn.from)}`,\n  },\n  'to',\n  {\n    type: 'address',\n    address: to,\n    name: getName(to, network)\n  }\n]]\n\nconst ERC721Mapping = {\n  [iface.getSighash('transferFrom')]: (txn, network, { extended = false }) => {\n    const [ from, to, tokenId ] = iface.parseTransaction(txn).args\n    return !extended ? [`Send token #${tokenId.toString(10)}${fromText(from, txn.from)} to ${getName(to, network)}`]\n    : toExtended(tokenId, from, to, txn, network)\n  },\n  [iface.getSighash('safeTransferFrom(address,address,uint256)')]: (txn, network, { extended = false }) => {\n    const [ from, to, tokenId ] = iface.parseTransaction(txn).args\n    return !extended ? [`Send token #${tokenId.toString(10)}${fromText(from, txn.from)} to ${getName(to, network)}`]\n    : toExtended(tokenId, from, to, txn, network)\n  },\n  [iface.getSighash('setApprovalForAll')]: (txn, network, { extended = false }) => {\n    const [ operator, approved ] = iface.parseTransaction(txn).args\n    const name = getName(operator, network)\n    if (approved) {\n      return extended ? [\n        `Approve`,\n        { type: 'address', name, address: operator },\n        `to use/spend any NFT from collection`,\n        { type: 'address', name: getName(txn.to), address: txn.to }\n      ] : `Approve ${name} to spend NFT collection ${getName(txn.to)}`\n    } else {\n      return extended ? [\n        `Revoke approval for`,\n        { type: 'address', name, address: operator },\n        `to use/spend any NFT from collection`,\n        { type: 'address', name: getName(txn.to), address: txn.to }\n      ] : `Revoke approval for ${name} to spend NFT collection ${getName(txn.to)}`\n    }\n  }\n}\nexport default ERC721Mapping","import { abis } from 'consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { nativeToken } from 'lib/humanReadableTransactions'\n\nconst toExtended = (action, network, amount) => {\n  return [[\n      action,\n      {\n        type: 'token',\n        ...nativeToken(network, amount, true)\n      }\n    ]]\n}\n\nconst iface = new Interface(abis.WETH)\nconst WETHMapping = {\n  [iface.getSighash('deposit')]: (txn, network, { extended = false }) => {\n    const { value } = iface.parseTransaction(txn)\n    return !extended ? [`Wrap ${nativeToken(network, value)}`] : toExtended('Wrap', network, value)\n  },\n  [iface.getSighash('withdraw')]: (txn, network, { extended = false }) => {\n    const [ amount ] = iface.parseTransaction(txn).args\n    return !extended ? [`Unwrap ${nativeToken(network, amount)}`] : toExtended('Unwrap', network, amount)\n  },\n}\nexport default WETHMapping","const privilegesOptions = {\n  true: '0x0000000000000000000000000000000000000000000000000000000000000001',\n  false: '0x0000000000000000000000000000000000000000000000000000000000000000',\n}\nexport default privilegesOptions\n","import { Interface } from 'ethers/lib/utils'\nimport { getName } from 'lib/humanReadableTransactions'\nimport accountPresets from 'consts/accountPresets'\nimport privilegesOptions from 'consts/privilegesOptions'\n\nconst iface = new Interface(require('adex-protocol-eth/abi/Identity5.2'))\n\nconst IdentityMapping = {\n  [iface.getSighash('setAddrPrivilege')]: (txn, network) => {\n    const [ addr, privLevel ] = iface.parseTransaction(txn).args\n    const name = getName(addr, network)\n    const isQuickAccManager = addr.toLowerCase() === accountPresets.quickAccManager.toLowerCase()\n    if (privLevel === privilegesOptions.false) {\n      if (isQuickAccManager) return [`Revoke email/password access`]\n      else return [`Revoke access for signer ${name}`]\n    } else if (privLevel === privilegesOptions.true) {\n      if (isQuickAccManager) return [`INVALID PROCEDURE - DO NOT SIGN`]\n      return [`Authorize signer ${name}`]\n    } else {\n      if (isQuickAccManager) return [`Add a new email/password signer`]\n      return [`Set special authorization for ${name}`]\n    }\n  }\n}\nexport default IdentityMapping\n","import { Interface, getAddress, hexConcat } from 'ethers/lib/utils'\nimport { generateAddress2 } from 'ethereumjs-util'\n\n// the factory can be used for deploying contracts from Ambire\nconst iface = new Interface(require('adex-protocol-eth/abi/IdentityFactory'))\n\nconst FactoryMapping = {\n  [iface.getSighash('deploy')]: (txn, network) => {\n    const [ code, salt ] = iface.parseTransaction(txn).args\n    const addr = getAddress('0x' + generateAddress2(txn.to, hexConcat([salt]), code).toString('hex'))\n    return [`Deploy contract with address ${addr}`]\n  }\n}\nexport default FactoryMapping\n","import { abis, yearnVaults, tesseractVaults } from 'consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { token } from 'lib/humanReadableTransactions'\n\nconst iface = new Interface(abis.YearnVault)\n\nconst vaultNames = { ethereum: 'Yearn', polygon: 'Tesseract' }\nconst tokenPrefixes = { ethereum: 'y', polygon: 'tv' }\n// add 'y' or 'tv' prefix, eg '10 USDC' will become '10 yUSDC' to signify vault tokens\nconst addTokenPrefix = (token, network) => token.split(' ').map((x, i) => i === 1 ? tokenPrefixes[network]+x : x).join(' ')\nconst getVaultInfo = ({ to }) => yearnVaults.find(x => x.addr === to) || tesseractVaults.find(x => x.addr === to)\n\nconst toExtendedRich = (action, word, vaultInfo, amount) => [[\n  action,\n  {\n    type: 'token',\n    ...token(vaultInfo.baseToken, amount, true)\n  },\n  word,\n  {\n    type: 'address',\n    name: vaultInfo.name,\n    address: vaultInfo.addr\n  }\n]]\n\nconst toExtended = (action, word, network, amount) => [[\n  action,\n  {\n    type: 'token',\n    symbol: 'units',\n    amount: amount.toString()\n  },\n  word,\n  {\n    type: 'address',\n    name: vaultNames[network.id]\n  }\n]]\n\nconst YearnTesseractMapping = {\n  [iface.getSighash('deposit(uint256,address)')]: (txn, network, { extended = false }) => {\n    const [ amount ] = iface.parseTransaction(txn).args\n    const vaultInfo = getVaultInfo(txn)\n    if (vaultInfo) return !extended ? [`Deposit ${token(vaultInfo.baseToken, amount)} to ${vaultInfo.name}`] : toExtendedRich('Deposit', 'to', vaultInfo, amount)\n    return !extended ? [`Deposit ${amount} units to ${vaultNames[network.id]}`] : toExtended('Deposit', 'to', network, amount)\n  },\n  [iface.getSighash('withdraw(uint256,address)')]: (txn, network, { extended = false }) => {\n    const [ amount ] = iface.parseTransaction(txn).args\n    const vaultInfo = getVaultInfo(txn)\n    if (vaultInfo) return !extended ? [`Withdraw ${addTokenPrefix(token(vaultInfo.baseToken, amount), network.id)} from ${vaultInfo.name}`] : toExtendedRich('Withdraw', 'from', vaultInfo, amount)\n    return !extended ? [`Withdraw ${amount} units from ${vaultNames[network.id]}`] : toExtended('Withdraw', 'from', network, amount)\n  },\n}\nexport default YearnTesseractMapping","import { abis } from 'consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { formatNativeTokenAddress, token } from 'lib/humanReadableTransactions'\nimport networks from 'consts/networks'\n\nconst MovrAnyswapInterface = new Interface(abis.MovrAnyswap)\nconst MovrRouterInterface = new Interface(abis.MovrRouter)\n\nconst getNetwork = (chainId, extended = false) => {\n  const network = networks.find(n => n.chainId === Number(chainId))\n  return !extended ? network.name : network\n}\n\nconst toExtended = (fromToken, network, toToken) => {\n  return [[\n    'Transfer',\n    {\n      type: 'token',\n      ...fromToken\n    },\n    'to',\n    {\n      type: 'network',\n      ...network\n    },\n    'for',\n    {\n      type: 'token',\n      ...toToken\n    }\n  ]]\n}\n\nconst MovrMapping = {\n  [MovrAnyswapInterface.getSighash('outboundTransferTo')]: (txn, network, { extended = false }) => {\n    const { middlewareInputToken, amount, tokenToBridge, toChainId } = MovrAnyswapInterface.parseTransaction(txn).args[0]\n    return !extended ?\n      [`Transfer ${token(middlewareInputToken, amount)} to ${getNetwork(toChainId)} for ${token(tokenToBridge)}`]\n      : toExtended(token(middlewareInputToken, amount, true), getNetwork(toChainId, true), token(tokenToBridge, null, true))\n  },\n  [MovrRouterInterface.getSighash('outboundTransferTo')]: (txn, network, { extended = false }) => {\n    const { middlewareRequest, amount, bridgeRequest, toChainId } = MovrRouterInterface.parseTransaction(txn).args[0]\n    const { inputToken } = middlewareRequest\n    const { inputToken: outputToken } = bridgeRequest\n    return !extended ?\n      [`Transfer ${token(formatNativeTokenAddress(inputToken), amount)} to ${getNetwork(toChainId)} for ${token(formatNativeTokenAddress(outputToken))}`]\n      : toExtended(token(formatNativeTokenAddress(inputToken), amount, true), getNetwork(toChainId, true), token(formatNativeTokenAddress(outputToken), null, true))\n  },\n}\nexport default MovrMapping","import { abis } from 'consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { nativeToken, token } from 'lib/humanReadableTransactions';\n\nconst WyvernExchange = new Interface(abis.WyvernExchange)\n\nconst MovrMapping = {\n  [WyvernExchange.getSighash('atomicMatch_')]: (txn, network, { extended = false }) => {\n    const { addrs, uints } = WyvernExchange.parseTransaction(txn).args\n    const seller = addrs[1]\n    const tokenAddress = addrs[6]\n    const price = uints[4]\n    const paymentToken = Number(tokenAddress) === 0 ? nativeToken(network, price, true) : token(tokenAddress, price, true)\n    return !extended ?\n        [`Buy nft from ${seller} for ${price} ETH on OpenSea`]\n        : \n        [[\n            'Buy',\n            'nft from',\n            {\n                type: 'address',\n                address: seller\n            },\n            'for',\n            {\n                type: 'token',\n                ...paymentToken\n            },\n            'on OpenSea'\n        ]]\n  },\n  [WyvernExchange.getSighash('approveOrder_')]: (txn, network, { extended = false }) => {\n    const { addrs, uints } = WyvernExchange.parseTransaction(txn).args\n    const collection = addrs[4]\n    const tokenAddress = addrs[6]\n    const price = uints[4]\n    const paymentToken = Number(tokenAddress) === 0 ? nativeToken(network, price, true) : token(tokenAddress, price, true)\n    return !extended ?\n        [`Approve to submit an order of ${price} WETH to buy bft from ${collection} on OpenSea`]\n        : \n        [[\n            'Approve',\n            'to submit an order of',\n            {\n                type: 'token',\n                ...paymentToken\n            },\n            'to buy nft from',\n            {\n                type: 'address',\n                address: collection\n            },\n            'on OpenSea'\n        ]]\n  },\n}\nexport default MovrMapping","import { Interface } from 'ethers/lib/utils'\nimport WALLETSupplyControllerABI from 'consts/WALLETSupplyControllerABI'\n\nconst iface = new Interface(WALLETSupplyControllerABI)\n\nconst toExtended = (isExtended, action, details = '') => {\n  return isExtended ? [[ action, details ]] : [action, details]\n}\n\nconst WALLETSupplyControllerMapping = {\n  [iface.getSighash('claim')]: (txn, network, { extended = false }) => {\n    const { toBurnBps } = iface.parseTransaction(txn).args\n    const burnPercentage = toBurnBps.toString() / 100\n    return toExtended(extended, 'claim rewards', burnPercentage > 0 ? `with ${burnPercentage}% burn` : '')\n  },\n  [iface.getSighash('mintVesting')]: (txn, network, { extended = false }) => {\n    return toExtended(extended, 'claim vested tokens')\n  },\n}\nexport default WALLETSupplyControllerMapping\n","import { abis } from 'consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport humanizers from './'\n\nconst iface = new Interface(abis.Batcher)\n\nconst AmbireBatcher = {\n  [iface.getSighash('batchCall')]: (txn, network, opts) => {\n    const { txns } = iface.parseTransaction(txn).args\n    const { to, value, data, from } = txns[txns.length - 1]\n    const sigHash = data.slice(0, 10)\n    const humanizer = humanizers[sigHash]\n    return humanizer({ to, value, data, from }, network, opts)\n  },\n}\nexport default AmbireBatcher","import { Interface } from 'ethers/lib/utils'\nimport { token } from 'lib/humanReadableTransactions'\nimport WalletStakingPoolABI from 'consts/WalletStakingPoolABI'\n\nconst STAKING_POOLS = {\n  '0x47cd7e91c3cbaaf266369fe8518345fc4fc12935': {\n    baseToken: '0x88800092ff476844f74dc2fc427974bbee2794ae',\n    name: 'WALLET Staking Pool'\n  },\n  '0xb6456b57f03352be48bf101b46c1752a0813491a': {\n    baseToken: '0xade00c28244d5ce17d72e40330b1c318cd12b7c3',\n    name: 'ADX Staking Pool'\n  },\n  //this is on polygon for tests\n  '0xec3b10ce9cabab5dbf49f946a623e294963fbb4e': {\n    baseToken: '0xe9415e904143e42007865e6864f7f632bd054a08',\n    name: 'WALLET Staking Pool (Test)'\n  }\n}\n\nconst iface = new Interface(WalletStakingPoolABI)\n\nconst toExtended = (action, word, token, txn) => {\n  return [[\n    action,\n    {\n      type: 'token',\n      ...token\n    },\n    word,\n    {\n      type: 'address',\n      address: txn.to,\n      name: STAKING_POOLS[txn.to].name\n    }\n  ]]\n}\n\nconst WALLETStakingPool = {\n  [iface.getSighash('enter')]: (txn, network, { extended = false }) => {\n    const { amount } = iface.parseTransaction(txn).args\n    if (extended) return toExtended('Deposit', 'to', token(STAKING_POOLS[txn.to].baseToken, amount, true), txn)\n    return [`Deposit ${token(STAKING_POOLS[txn.to].baseToken, amount)} to ${STAKING_POOLS[txn.to].name}`]\n  },\n  [iface.getSighash('leave')]: (txn, network, { extended = false }) => {\n    if (extended) return [['Leave', 'from', {\n      type: 'address',\n      address: txn.to,\n      name: STAKING_POOLS[txn.to].name\n    }]]\n    return [`Leave the WALLET Staking Pool`]\n  },\n  [iface.getSighash('withdraw')]: (txn, network, { extended = false }) => {\n    const { shares } = iface.parseTransaction(txn).args\n    if (extended) return toExtended('Withdraw', 'from', token(txn.to, shares, true), txn)\n    return [`Withdraw ${token(txn.to, shares)} to ${STAKING_POOLS[txn.to].name}`]\n  },\n  [iface.getSighash('rageLeave')]: (txn, network, { extended = false }) => {\n    const { shares } = iface.parseTransaction(txn).args\n    if (extended) return toExtended('Rage Leave', 'from', token(txn.to, shares, true), txn)\n    return [`Rage Leave ${token(txn.to, shares)} to ${STAKING_POOLS[txn.to].name}`]\n  },\n}\nexport default WALLETStakingPool\n","import { abis } from 'consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { nativeToken } from 'lib/humanReadableTransactions'\n\nconst iface = new Interface(abis.AaveWethGatewayV2)\nconst onBehalfText = (onBehalf, txnFrom) => onBehalf.toLowerCase() !== txnFrom.toLowerCase()\n  ? ' on behalf of '+onBehalf\n  : ''\n\nconst toExtended = (action, word, token, txn, onBehalf) => {\n  return [[\n    action,\n    {\n      type: 'token',\n      ...token\n    },\n    word,\n    {\n      type: 'address',\n      address: txn.to,\n      name: 'Aave lending pool'\n    },\n    onBehalf ? onBehalfText(onBehalf, txn.from) : ''\n  ]]\n}\n\nconst AaveMapping = {\n  [iface.getSighash('depositETH')]: (txn, network, { extended }) => {\n    const [ /*depositETH*/, /*lendingPool*/ , onBehalfOf ] = iface.parseTransaction(txn).args\n    if (extended) return toExtended('Deposit', 'to', nativeToken(network, txn.value, true), txn, onBehalfOf)\n    return [`Deposit ${nativeToken(network, txn.value)} to Aave lending pool${onBehalfText(onBehalfOf, txn.from)}`]\n  },\n  [iface.getSighash('withdrawETH')]: (txn, network, { extended }) => {\n    const [ /*lendingPool*/, amount, to ] = iface.parseTransaction(txn).args\n    if (extended) return toExtended('Withdraw', 'from', nativeToken(network, amount, true), txn, to)\n    return [`Withdraw ${nativeToken(network, amount)} from Aave lending pool${onBehalfText(to, txn.from)}`]\n  },\n  [iface.getSighash('repayETH')]: (txn, network, { extended }) => {\n    const [ /*repayETH*/, /*lendingPool*/, /*amount*/, /*rateMode*/, onBehalfOf ] = iface.parseTransaction(txn).args\n    if (extended) return toExtended('Repay', 'to', nativeToken(network, txn.value, true), txn, onBehalfOf)\n    return [`Repay ${nativeToken(network, txn.value)} to Aave lending pool${onBehalfText(onBehalfOf, txn.from)}`]\n  },\n  [iface.getSighash('borrowETH')]: (txn, network, { extended }) => {\n    const [ /*lendingPool*/, amount ] = iface.parseTransaction(txn).args\n    if (extended) return toExtended('Borrow', 'from', nativeToken(network, amount, true), txn)\n    return [`Borrow ${nativeToken(network, amount)} from Aave lending pool`]\n  },\n}\nexport default AaveMapping\n","import UniRouters from './UniRouters'\nimport ERC20 from './ERC20'\nimport AaveLendingPoolV2 from './AaveLendingPoolV2'\nimport ERC721 from './ERC721'\nimport WETH from './WETH'\nimport AmbireIdentity from './AmbireIdentity'\nimport AmbireFactory from './AmbireFactory'\nimport YearnTesseractVault from './YearnTesseractVault'\nimport Movr from './Movr'\nimport OpenSea from './OpenSea'\nimport WALLETSupplyController from './WALLETSupplyController'\nimport AmbireBatcher from './AmbireBatcher'\nimport WALLETStakingPool from './WALLETStakingPool'\nimport AaveWethGatewayV2 from './AaveWethGatewayV2'\n\nconst all = {\n\t...UniRouters,\n\t...AaveLendingPoolV2,\n\t...AaveWethGatewayV2,\n\t...ERC20,\n\t...ERC721,\n\t...WETH,\n\t...AmbireIdentity,\n\t...AmbireFactory,\n\t...YearnTesseractVault,\n\t...Movr,\n\t...OpenSea,\n\t...WALLETSupplyController,\n\t...AmbireBatcher,\n\t...WALLETStakingPool,\n}\nexport default all","import { formatUnits } from 'ethers/lib/utils'\nimport { constants } from 'ethers'\nimport { names, tokens } from 'consts/humanizerInfo'\nimport networks from 'consts/networks'\nimport humanizers from './humanizers'\n\n// address (lwoercase) => name\nconst knownAliases = {}\n// address (lowercase) => [symbol, decimals]\nconst knownTokens = {}\n\nexport const formatNativeTokenAddress = address => address.toLowerCase() === `0x${'e'.repeat(40)}` ? `0x${'0'.repeat(40)}` : address.toLowerCase()\n\nexport function getTransactionSummary(txn, networkId, accountAddr, opts = {}) {\n    const [to, value, data = '0x'] = txn\n    const network = networks.find(x => x.id === networkId || x.chainId === networkId)\n    if (!network) return 'Unknown network (unable to parse)'\n\n    if (to === '0x' || !to) {\n        return 'Deploy contract'\n    }\n\n    const tokenInfo = tokens[to.toLowerCase()]\n    const name = names[to.toLowerCase()]\n\n    if (data === '0x' && to.toLowerCase() === accountAddr.toLowerCase()) {\n        // Doesn't matter what the value is, this is always a no-op\n        return !opts.extended ? `Transaction cancellation` : [[\n            'Cancel',\n            'transaction'\n        ]]\n    }\n\n    let callSummary, sendSummary\n    if (parseInt(value) > 0) sendSummary = !opts.extended ? `send ${nativeToken(network, value)} to ${name || to}` : [\n        'Send',\n        {\n            type: 'token',\n            ...nativeToken(network, value, true),\n        },\n        'to',\n        {\n            type: 'address',\n            address: to,\n            name: getName(to, network)\n        }\n    ]\n\n    if (data !== '0x') {\n        callSummary = !opts.extended ? `Unknown interaction with ${name || (tokenInfo ? tokenInfo[0] : to)}` : [\n            'unknown',\n            'interaction with',\n            {\n                type: 'address',\n                address: to,\n                name: name || (tokenInfo && tokenInfo[0])\n            }\n        ]\n\n        const sigHash = data.slice(0, 10)\n        const humanizer = humanizers[sigHash]\n        if (humanizer) {\n            try {\n                const actions = humanizer({ to, value, data, from: accountAddr }, network, opts)\n                return opts.extended === true ? actions : actions.join(', ')\n            } catch (e) {\n                callSummary = opts.extended ? callSummary.concat(['(unable to parse)']) :  callSummary + ' (unable to parse)'\n                console.error('internal tx humanization error', e)\n            }\n        }\n    }\n\n    const filteredSummary = [callSummary, sendSummary].filter(x => x)\n    return !opts.extended ? filteredSummary.join(', ') : filteredSummary\n}\n\n// Currently takes network because one day we may be seeing the same addresses used on different networks\nexport function getName(addr, network) {\n    const address = addr.toLowerCase()\n    return names[address] \n        || (tokens[address] ? tokens[address][0] + ' token' : null) \n        || knownAliases[address] \n        || addr\n}\n\nexport function token(addr, amount, extended = false) {\n    const address = addr.toLowerCase()\n    const assetInfo = tokens[address] || knownTokens[address]\n\n    if (assetInfo) {\n        const extendedToken = {\n            address,\n            symbol: assetInfo[0],\n            decimals: assetInfo[1],\n            amount: null\n        }\n\n        if (!amount) return !extended ? assetInfo[0] : extendedToken\n\n        if (constants.MaxUint256.eq(amount)) return !extended ? `maximum ${assetInfo[0]}` : {\n            ...extendedToken,\n            amount: -1\n        }\n    \n        return !extended ? `${formatUnits(amount, assetInfo[1])} ${assetInfo[0]}` : {\n            ...extendedToken,\n            amount: formatUnits(amount, assetInfo[1])\n        }\n    } else {\n        return !extended ? `${formatUnits(amount, 0)} units of unknown token` : {\n            address,\n            symbol: null,\n            decimals: null,\n            amount: formatUnits(amount, 0)\n        }\n    }\n}\n\nexport function nativeToken(network, amount, extended = false) {\n    const extendedNativeToken = {\n        address: `0x` + '0'.repeat(40),\n        symbol: 'unknown native token',\n        decimals: 18,\n    }\n\n    // All EVM chains use a 18 decimal native asset\n    if (network) {\n        return !extended ? `${formatUnits(amount, 18)} ${network.nativeAssetSymbol}` : {\n            ...extendedNativeToken,\n            symbol: network.nativeAssetSymbol,\n            amount: formatUnits(amount, 18)\n        }\n    } else {\n        return !extended ? `${formatUnits(amount, 18)} unknown native token` : {\n            ...extendedNativeToken,\n            amount: formatUnits(amount, 18)\n        }\n    }\n}\n\nexport function setKnownAddresses(addrs) {\n    addrs.forEach(({ address, name }) => knownAliases[address.toLowerCase()] = name)\n}\n\nexport function setKnownTokens(tokens) {\n    tokens.forEach(({ address, symbol, decimals }) => knownTokens[address.toLowerCase()] = [symbol, decimals])\n}\n\nexport function isKnown(txn, from) {\n    if (txn[0] === from) return true\n    const address = txn[0].toLowerCase()\n    return !!(knownAliases[address] || names[address] || tokens[address] || knownTokens[address])\n}\n\nexport {\n    knownAliases,\n    knownTokens\n}\n\n// @TODO\n// export function getMethodName(txn)","import networks from 'consts/networks'\nimport { providers } from 'ethers'\n\n// Cache provider instances by a network id\n// For instance: { 'ethereum': new providers.StaticJsonRpcProvider }\nconst providersByNetwork = {}\n\nexport function getProvider (networkId) {\n  const network = networks.find(({ id }) => id === networkId)\n  if (!network) throw new Error(`getProvider called with non-existent network: ${networkId}`)\n\n  // If the provider instance is already created, just reuse the cached instance,\n  // instead of creating the same object again.\n  if (providersByNetwork[networkId]) return providersByNetwork[networkId]\n\n  const { id: name, chainId } = network\n  const url = network.rpc\n\n  if (url.startsWith('wss:')) {\n    providersByNetwork[networkId] = new providers.WebSocketProvider(url, { name, chainId })\n  }\n  else {\n    providersByNetwork[networkId] = new providers.StaticJsonRpcProvider(url, { name, chainId })\n  }\n\n  return providersByNetwork[networkId]\n}\n\n","const customIcons = {\n    '0xb468a1e5596cfbcdf561f21a10490d99b4bb7b68': 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg/220px-Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg', // TEST Polygon ELMO token,\n    '0x88800092ff476844f74dc2fc427974bbee2794ae': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/ambire_logo_white_bg_250x250.png', // Ambire Wallet Token\n    '0x47cd7e91c3cbaaf266369fe8518345fc4fc12935': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png', //xWallet\n    '0xb6456b57f03352be48bf101b46c1752a0813491a': 'https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/vaporwave-adex-2.png', // ADX-STAKING\n    '0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c': 'https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/ADX-loyalty%40256x256.png', // ADX-LOYALTY\n    '0xec3b10ce9cabab5dbf49f946a623e294963fbb4e': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png', // Polygons test xWallet\n    '0xe9415e904143e42007865e6864f7f632bd054a08': 'https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/Ambire_logo_250x250.png', // Polygons test Wallet\n    '0xade00c28244d5ce17d72e40330b1c318cd12b7c3': 'https://raw.githubusercontent.com/sushiswap/icons/master/token/adx.jpg' //ADX-TOKEN\n}\n\nconst zapperStorageTokenIcons = 'https://storage.googleapis.com/zapper-fi-assets/tokens'\n\nexport function getTokenIcon(networkId = '', address = '') {\n    const addr = address.toLowerCase()\n    const net = networkId.toLowerCase()\n    return customIcons[addr] || `${zapperStorageTokenIcons}/${net}/${addr}.png`\n}\n","import { ethers } from 'ethers'\nimport oracle from 'adex-protocol-eth/abi/RemainingBalancesOracle.json'\nimport tokenList from 'consts/tokenList.json'\nimport { getProvider } from 'lib/provider'\nimport { getTokenIcon } from 'lib/icons'\n\nconst { Interface, AbiCoder, formatUnits, hexlify, isAddress } = ethers.utils\nconst RemainingBalancesOracle = new Interface(oracle)\nconst SPOOFER = '0x0000000000000000000000000000000000000001'\nconst blockTag = 'pending'\nconst remainingBalancesOracleAddr = '0xF1628de74193Dde3Eed716aB0Ef31Ca2b6347eB1'\n\nasync function getTokenListBalance ({walletAddr, tokens, network, updateBalance}) {\n  let result = await call({ walletAddr, tokens, network })\n  if (result.success) {\n    const newBalance = tokens.map(t => {\n      const newTokenBalance = result.data.filter(r => r.address === t.address && parseFloat(r.balance) > 0)[0]\n      return (newTokenBalance ? {\n        type: \"base\",\n        network: network,\n        address: newTokenBalance.address,\n        decimals: newTokenBalance.decimals,\n        symbol: newTokenBalance.symbol,\n        price: newTokenBalance.price || 0,\n        balance: Number(newTokenBalance.balance),\n        balanceRaw: newTokenBalance.balanceRaw,\n        updateAt: (new Date()).toString(),\n        balanceUSD: Number(parseFloat(newTokenBalance.price * newTokenBalance.balance || 0).toFixed(2)),\n        tokenImageUrl: newTokenBalance.tokenImageUrl || getTokenIcon(network, newTokenBalance.address),\n        isHidden: t.isHidden\n      } : t)\n    })\n    if (updateBalance && typeof updateBalance === 'function') updateBalance(newBalance)\n    return newBalance\n  } else {\n    console.error(result.message, result.data)\n    return tokens\n  }\n}\n\n//ToDo check for missing data and double check for incompleted returns\nasync function call ({ walletAddr, tokens, network }) {\n  if (!isAddress(walletAddr)) return {success: false, data: walletAddr, message:`Wallet address is not valide eth address`}\n  const provider = getProvider(network)\n  const coder = new AbiCoder()\n  const args = [\n    // identityFactoryAddr\n    '0xBf07a0Df119Ca234634588fbDb5625594E2a5BCA',\n    // bytecode dummy.sol\n    '0x6080604052348015600f57600080fd5b50604880601d6000396000f3fe6080604052348015600f57600080fd5b5000fea2646970667358221220face6a0e4f251ee8ded32eb829598230ad218691166fa0a46bc85583c202c60c64736f6c634300080a0033',\n    // salt\n    '0x0000000000000000000000000000000000000000000000000000000000000001',\n    // txns\n    [['0x0000000000000000000000000000000000000000', '0x0', '0x0000000000000000000000000000000000000000']],\n    '0x000000000000000000000000000000000000000000000000000000000000000000',\n    walletAddr,\n    tokens.map(x => x.address)\n  ]\n  const txParams = {\n    from: SPOOFER,\n    to: remainingBalancesOracleAddr,\n    data: RemainingBalancesOracle.encodeFunctionData('getRemainingBalances', args)\n  }\n  const callResult = await provider.call(txParams, blockTag)\n  if (isErr(callResult)) throw new Error(`probably one ot following tokens is not ERC20 and missing balanceOf()`)\n  const balances = coder.decode(['uint[]'], callResult)[0]\n  const result = tokens.map((x, i) => ({ ...x, balanceRaw: balances[i].toString(), balance: parseFloat(formatUnits(balances[i], x.decimals)).toFixed(10) }))\n  return { success: true, data: result }\n}\n\n// Signature of Error(string)\nconst ERROR_SIG = '0x08c379a0'\n// Signature of Panic(uint256)\nconst PANIC_SIG = '0x4e487b71'\n\nfunction isErr (hex) {\n\treturn hex.startsWith(ERROR_SIG) || hex.startsWith(PANIC_SIG)\n}\n\nasync function getErrMsg (provider, txParams, blockTag) {\n\t// .call always returisErrns a hex string with ethers\n\ttry {\n\t\t// uncomment if you need HEVM debugging\n\t\t// console.log(`hevm exec --caller ${txParams.from} --address ${txParams.to} --calldata ${txParams.data} --gas 1000000 --debug --rpc ${provider.connection.rpc} ${!isNaN(blockTag) && blockTag ? '--block '+blockTag : ''}`)\n\t\tconst returnData = await provider.call(txParams, blockTag)\n    if (returnData.startsWith(PANIC_SIG)) return returnData.slice(10)\n\t\treturn returnData.startsWith(ERROR_SIG)\n\t\t\t? (new AbiCoder()).decode(['string'], '0x' + returnData.slice(10))[0]\n\t\t\t: returnData\n\t} catch (e) {\n\t\t// weird infura case\n\t\tif (e.code === 'UNPREDICTABLE_GAS_LIMIT' && e.error) return e.error.message.slice(20)\n\t\tif (e.code === 'CALL_EXCEPTION') return 'no error string, possibly insufficient amount or wrong SmartWallet sig'\n\t\tif (e.code === 'INVALID_ARGUMENT') return `unable to deserialize: ${hexlify(e.value)}`\n\t\tthrow e\n\t}\n}\n\nfunction checkTokenList (list) {\n  return list.filter(t => {\n    return isAddress(t.address)\n  })\n}\n\nexport {\n    call,\n    tokenList,\n    getErrMsg,\n    checkTokenList,\n    getTokenListBalance\n}\n","import { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { ZAPPER_API_KEY } from 'config';\nimport { fetchGet } from 'lib/fetch';\nimport { roundFloatingNumber } from 'lib/formatters';\nimport { ZAPPER_API_ENDPOINT } from 'config'\nimport supportedProtocols from 'consts/supportedProtocols';\nimport { useToasts } from 'hooks/toasts'\nimport { setKnownAddresses, setKnownTokens } from 'lib/humanReadableTransactions';\nimport { VELCRO_API_ENDPOINT } from 'config'\nimport { getTokenListBalance, tokenList, checkTokenList } from 'lib/balanceOracle'\n\nconst getBalances = (apiKey, network, protocol, address, provider) => fetchGet(`${provider === 'velcro' ? VELCRO_API_ENDPOINT : ZAPPER_API_ENDPOINT}/protocols/${protocol}/balances?addresses[]=${address}&network=${network}&api_key=${apiKey}&newBalances=true`)\n\nlet hidden, visibilityChange;\nif (typeof document.hidden !== 'undefined') {\n    hidden = 'hidden';\n    visibilityChange = 'visibilitychange';\n} else if (typeof document.msHidden !== 'undefined') {\n    hidden = 'msHidden';\n    visibilityChange = 'msvisibilitychange';\n} else if (typeof document.webkitHidden !== 'undefined') {\n    hidden = 'webkitHidden';\n    visibilityChange = 'webkitvisibilitychange';\n}\nlet lastOtherProcolsRefresh = null\n\n// use Balance Oracle\nfunction paginateArray(input, limit) {\n    let pages = []\n    let from = 0\n    for (let i = 1; i <= Math.ceil(input.length / limit); i++) {\n        pages.push(input.slice(from, i * limit))\n        from += limit\n    }\n    return pages\n}\nasync function supplementTokensDataFromNetwork({ walletAddr, network, tokensData, extraTokens, updateBalance, hiddenTokens }) {\n    if (!walletAddr || walletAddr===\"\" || !network || !network === \"\" ) return []\n    if (!tokensData || !tokensData[0]) tokensData = checkTokenList(tokensData || []) //tokensData check and populate for test if undefind\n    if (!extraTokens || !extraTokens[0]) extraTokens = checkTokenList(extraTokens || [])  //extraTokens check and populate for test if undefind\n\n    // concat predefined token list with extraTokens list (extraTokens are certainly ERC20)\n    const fullTokenList = [ ...new Set(\n        tokenList[network] ? tokenList[network].concat(extraTokens) : [...extraTokens]\n    )]\n    const tokens = fullTokenList.map(t => {\n      return tokensData.find(td => td.address === t.address) || t\n    })\n    const tokensNotInList = tokensData.filter(td => {\n      return !tokens.some(t => t.address === td.address)\n    })\n    const filteredByHiddenTokensInList = filterByHiddenTokens(tokens, hiddenTokens)\n    const filteredByHiddenTokensNotInList = filterByHiddenTokens(tokensNotInList, hiddenTokens)\n    // tokensNotInList: call separately to prevent errors from non-erc20 tokens\n    // NOTE about err handling: errors are caught for each call in balanceOracle, and we retain the original token entry, which contains the balance\n    const calls = paginateArray([...new Set(filteredByHiddenTokensInList)], 100).concat(paginateArray(filteredByHiddenTokensNotInList, 100))\n\n    const tokenBalances = (await Promise.all(calls.map(callTokens => {\n        return getTokenListBalance({ walletAddr, tokens: callTokens, network, updateBalance })\n    }))).flat().filter(t => {\n        return extraTokens.some(et => t.address === et.address) ? true : t.balanceRaw > 0\n    })\n    return tokenBalances\n}\n\nconst filterByHiddenTokens = (tokens, hiddenTokens) => {\n    return tokens.map(t => {\n        return hiddenTokens.find(ht => t.address === ht.address) || { ...t, isHidden: false }\n    }).filter(t => !t.isHidden)\n}\n\nexport default function usePortfolio({ currentNetwork, account, useStorage }) {\n    const { addToast } = useToasts()\n\n    const currentAccount = useRef();\n    const rpcTokensLastUpdated = useRef();\n\n    const [isBalanceLoading, setBalanceLoading] = useState(true);\n    const [areProtocolsLoading, setProtocolsLoading] = useState(true);\n\n    const [tokensByNetworks, setTokensByNetworks] = useState([])\n    // Added unsupported networks (fantom and moonbeam) as default values with empty arrays to prevent crashes\n    const [otherProtocolsByNetworks, setOtherProtocolsByNetworks] = useState(supportedProtocols.filter(item => !item.protocols || !item.protocols.length))\n\n    const [balance, setBalance] = useState({\n        total: {\n            full: 0,\n            truncated: 0,\n            decimals: '00'\n        },\n        tokens: []\n    });\n    const [otherBalances, setOtherBalances] = useState([]);\n    const [tokens, setTokens] = useState([]);\n    const [protocols, setProtocols] = useState([]);\n    const [collectibles, setCollectibles] = useState([]);\n    const [extraTokens, setExtraTokens] = useStorage({ key: 'extraTokens', defaultValue: [] });\n    const [hiddenTokens, setHiddenTokens] = useStorage({ key: 'hiddenTokens', defaultValue: [] })\n\n    const getExtraTokensAssets = useCallback((account, network) => extraTokens\n        .filter(extra => extra.account === account && extra.network === network)\n        .map(extraToken => ({\n            ...extraToken,\n            type: 'base',\n            price: 0,\n            balanceUSD: 0,\n            isExtraToken: true\n        }))\n    , [extraTokens])\n\n    const fetchSupplementTokenData = useCallback(async (updatedTokens) => {\n        const currentNetworkTokens = updatedTokens.find(({ network }) => network === currentNetwork) || { network: currentNetwork, meta: [], assets: [] }\n\n        const extraTokensAssets = getExtraTokensAssets(account, currentNetwork)\n        try {\n            const rcpTokenData = await supplementTokensDataFromNetwork({\n                walletAddr: account,\n                network: currentNetwork,\n                tokensData: currentNetworkTokens ? currentNetworkTokens.assets.filter(({ isExtraToken }) => !isExtraToken) : [], // Filter out extraTokens\n                extraTokens: extraTokensAssets,\n                hiddenTokens\n            })\n\n            currentNetworkTokens.assets = rcpTokenData\n\n            setTokensByNetworks(tokensByNetworks => [\n                ...tokensByNetworks.filter(({ network }) => network !== currentNetwork),\n                currentNetworkTokens\n            ])\n\n            rpcTokensLastUpdated.current = Date.now()\n\n            setBalanceLoading(false)\n        } catch(e) {\n            console.error('supplementTokensDataFromNetwork failed', e)\n        }\n    }, [currentNetwork, getExtraTokensAssets, account, hiddenTokens])\n\n    const fetchTokens = useCallback(async (account, currentNetwork = false) => {\n        try {\n            const networks = currentNetwork ? [supportedProtocols.find(({ network }) => network === currentNetwork)] : supportedProtocols\n\n            let failedRequests = 0\n            const requestsCount = networks.length\n\n            const updatedTokens = (await Promise.all(networks.map(async ({ network, balancesProvider }) => {\n                try {\n                    const balance = await getBalances(ZAPPER_API_KEY, network, 'tokens', account, balancesProvider)\n                    if (!balance) return null\n\n                    const { meta, products, systemInfo } = Object.values(balance)[0]\n\n                    // We should skip the tokens update for the current network,\n                    // in the case Velcro returns a cached data, which is more outdated than the already fetched RPC data.\n                    // source 1 means Zapper, 2 means Covalent, 2.1 means Covalent from Velcro cache.\n                    const isCurrentNetwork = network === currentNetwork\n                    const shouldSkipUpdate = isCurrentNetwork && (systemInfo.source > 2 && systemInfo.updateAt < rpcTokensLastUpdated.current)\n\n                    if (shouldSkipUpdate) return null\n\n                    const extraTokensAssets = getExtraTokensAssets(account, network) // Add user added extra token to handle\n\n                    const assets = [\n                        ...products.map(({ assets }) => assets.map(({ tokens }) => tokens.map(token => ({\n                            ...token,\n                            // balanceOracle fixes the number to the 10 decimal places, so here we should also fix it\n                            balance: Number(token.balance.toFixed(10)),\n                            // balanceOracle rounds to the second decimal places, so here we should also round it\n                            balanceUSD: roundFloatingNumber(token.balanceUSD),\n                        })))).flat(2),\n                        ...extraTokensAssets\n                    ]\n\n                    return {\n                        network,\n                        meta,\n                        assets,\n                        systemInfo,\n                    }\n                } catch(e) {\n                    console.error('Balances API error', e)\n                    failedRequests++\n                }\n            }))).filter(data => data)\n\n            updatedTokens.map(networkTokens => {\n                return networkTokens.assets = filterByHiddenTokens(networkTokens.assets, hiddenTokens)\n            })\n\n            const updatedNetworks = updatedTokens.map(({ network }) => network)\n\n            // Prevent race conditions\n            if (currentAccount.current !== account) return\n\n            setTokensByNetworks(tokensByNetworks => ([\n                ...tokensByNetworks.filter(({ network }) => !updatedNetworks.includes(network)),\n                ...updatedTokens\n            ]))\n\n            if (!currentNetwork) fetchSupplementTokenData(updatedTokens)\n\n            if (failedRequests >= requestsCount) throw new Error('Failed to fetch Tokens from API')\n            return true\n        } catch (error) {\n            console.error(error)\n            addToast(error.message, { error: true })\n            return false\n        }\n    }, [fetchSupplementTokenData, getExtraTokensAssets, hiddenTokens, addToast])\n\n    const fetchOtherProtocols = useCallback(async (account, currentNetwork = false) => {\n        try {\n            const protocols = currentNetwork ? [supportedProtocols.find(({ network }) => network === currentNetwork)] : supportedProtocols\n\n            let failedRequests = 0\n            const requestsCount = protocols.reduce((acc, curr) => curr.protocols.length + acc, 0)\n            if (requestsCount === 0) return true\n            const updatedProtocols = (await Promise.all(protocols.map(async ({ network, protocols, nftsProvider }) => {\n                const all = (await Promise.all(protocols.map(async protocol => {\n                    try {\n                        const balance = await getBalances(ZAPPER_API_KEY, network, protocol, account, protocol === 'nft' ? nftsProvider : null)\n                        return balance ? Object.values(balance)[0] : null\n                    } catch(e) {\n                        console.error('Balances API error', e)\n                        failedRequests++\n                    }\n                }))).filter(data => data).flat()\n\n                return all.length ? {\n                    network,\n                    protocols: all\n                        .map(({ products }) =>\n                            products.map(({ label, assets }) =>\n                                ({ label, assets: assets.map(({ tokens }) => tokens).flat(1) })\n                            )\n                        )\n                        .flat(2)\n                } : null\n            }))).filter(data => data)\n            const updatedNetworks = updatedProtocols.map(({ network }) => network)\n\n            // Prevent race conditions\n            if (currentAccount.current !== account) return\n\n            setOtherProtocolsByNetworks(protocolsByNetworks => ([\n                ...protocolsByNetworks.filter(({ network }) => !updatedNetworks.includes(network)),\n                ...updatedProtocols\n            ]))\n\n            lastOtherProcolsRefresh = Date.now()\n            if (failedRequests >= requestsCount) throw new Error('Failed to fetch other Protocols from API')\n            return true\n        } catch (error) {\n            lastOtherProcolsRefresh = Date.now()\n            console.error(error)\n            addToast(error.message, { error: true })\n            return false\n        }\n    }, [addToast])\n\n    const refreshTokensIfVisible = useCallback(() => {\n        if (!account) return\n        if (!document[hidden] && !isBalanceLoading) fetchTokens(account, currentNetwork)\n    }, [isBalanceLoading, account, fetchTokens, currentNetwork])\n\n    const requestOtherProtocolsRefresh = async () => {\n        if (!account) return\n        if ((Date.now() - lastOtherProcolsRefresh) > 30000 && !areProtocolsLoading) await fetchOtherProtocols(account, currentNetwork)\n    }\n\n    // Make humanizer 'learn' about new tokens and aliases\n    const updateHumanizerData = tokensByNetworks => {\n        const tokensList = Object.values(tokensByNetworks).map(({ assets }) => assets).flat(1)\n        const knownAliases = tokensList.map(({ address, symbol }) => ({ address, name: symbol}))\n        setKnownAddresses(knownAliases)\n        setKnownTokens(tokensList)\n    }\n\n    const onAddExtraToken = extraToken => {\n        const { address, name, symbol } = extraToken\n        if (extraTokens.map(({ address }) => address).includes(address)) return addToast(`${name} (${symbol}) is already added to your wallet.`)\n        if (Object.values(tokenList).flat(1).map(({ address }) => address).includes(address)) return addToast(`${name} (${symbol}) is already handled by your wallet.`)\n        if (tokens.map(({ address }) => address).includes(address)) return addToast(`You already have ${name} (${symbol}) in your wallet.`)\n\n        const updatedExtraTokens = [\n            ...extraTokens,\n            {\n                ...extraToken,\n                coingeckoId: null\n            }\n        ]\n\n        setExtraTokens(updatedExtraTokens)\n        addToast(`${name} (${symbol}) token added to your wallet!`)\n    }\n\n    const onAddHiddenToken = hiddenToken => {\n        const { symbol } = hiddenToken\n        const updatedHiddenTokens = [\n            ...hiddenTokens,\n            {\n                ...hiddenToken,\n                isHidden: true\n            }\n        ]\n\n        setHiddenTokens(updatedHiddenTokens)\n        addToast(`${symbol} token is hidden from your assets list!`)\n    }\n\n    const onRemoveHiddenToken = address => {\n        const token = hiddenTokens.find(t => t.address === address)\n        if (!token) return addToast(`${address} is not present in your assets list.`)\n\n        const updatedHiddenTokens = hiddenTokens.filter(t => t.address !== address)\n\n        setHiddenTokens(updatedHiddenTokens)\n        addToast(`${token.symbol} is shown to your assets list.`)\n    }\n\n    const onRemoveExtraToken = address => {\n        const token = extraTokens.find(t => t.address === address)\n        if (!token) return addToast(`${address} is not present in your wallet.`)\n\n        const updatedExtraTokens = extraTokens.filter(t => t.address !== address)\n\n        setExtraTokens(updatedExtraTokens)\n        addToast(`${token.name} (${token.symbol}) was removed from your wallet.`)\n    }\n\n    const removeDuplicatedAssets = tokens => {\n        const lookup = tokens.reduce((a, e) => {\n            a[e.address] = ++a[e.address] || 0\n            return a\n        }, {})\n\n        // filters by non duplicated objects or takes the one of dup but with a price greater than 0\n        tokens = tokens.filter(e => !lookup[e.address] || (lookup[e.address] && e.price))\n\n        return tokens\n    }\n\n    // Fetch balances and protocols on account change\n    useEffect(() => {\n        currentAccount.current = account\n\n        async function loadBalance() {\n            if (!account) return\n            setBalanceLoading(true)\n            if (await fetchTokens(account)) setBalanceLoading(false)\n        }\n\n        async function loadProtocols() {\n            if (!account) return\n            setProtocolsLoading(true)\n            if (await fetchOtherProtocols(account)) setProtocolsLoading(false)\n        }\n\n        loadBalance()\n        loadProtocols()\n    }, [account, fetchTokens, fetchOtherProtocols])\n\n    // Update states on network, tokens and ohterProtocols change\n    useEffect(() => {\n        try {\n            const tokens = tokensByNetworks.find(({ network }) => network === currentNetwork)\n\n            if (tokens) {\n                tokens.assets = removeDuplicatedAssets(tokens.assets)\n                setTokens(tokens.assets)\n            }\n\n            const balanceByNetworks = tokensByNetworks.map(({ network, meta, assets }) => {\n                const totalUSD = assets.reduce((acc, curr) => acc + curr.balanceUSD, 0)\n                const balanceUSD = totalUSD + meta.find(({ label }) => label === 'Debt')?.value\n                if (!balanceUSD) return {\n                    network,\n                    total: {\n                        full: 0,\n                        truncated: 0,\n                        decimals: '00'\n                    }\n                }\n\n                const [truncated, decimals] = Number(balanceUSD.toString()).toFixed(2).split('.')\n                return {\n                    network,\n                    total: {\n                        full: balanceUSD,\n                        truncated: Number(truncated).toLocaleString('en-US'),\n                        decimals\n                    }\n                }\n            })\n\n            const balance = balanceByNetworks.find(({ network }) => network === currentNetwork)\n            if (balance) {\n                setBalance(balance)\n                setOtherBalances(balanceByNetworks.filter(({ network }) => network !== currentNetwork))\n            }\n\n            updateHumanizerData(tokensByNetworks)\n\n            const otherProtocols = otherProtocolsByNetworks.find(({ network }) => network === currentNetwork)\n            if (tokens && otherProtocols) {\n                setProtocols([\n                    {\n                        label: 'Tokens',\n                        assets: tokens.assets\n                    },\n                    ...otherProtocols.protocols.filter(({ label }) => label !== 'NFTs')\n                ])\n                setCollectibles(otherProtocols.protocols.find(({ label }) => label === 'NFTs')?.assets || [])\n            }\n        } catch(e) {\n            console.error(e);\n            addToast(e.message | e, { error: true })\n        }\n    }, [currentNetwork, tokensByNetworks, otherProtocolsByNetworks, addToast])\n\n    // Reset `rpcTokensLastUpdated` on a network change, because its value is regarding the previous network,\n    // and it's not useful for the current network.\n    useEffect(() => {\n        rpcTokensLastUpdated.current = null\n    }, [currentNetwork])\n\n    // Refresh tokens on network change\n    useEffect(() => {\n        refreshTokensIfVisible()\n    }, [currentNetwork, refreshTokensIfVisible])\n\n    // Refresh balance every 90s if visible\n    // NOTE: this must be synced (a multiple of) supplementing, otherwise we can end up with weird inconsistencies\n    useEffect(() => {\n        const refreshInterval = setInterval(refreshTokensIfVisible, 90000)\n        return () => clearInterval(refreshInterval)\n    }, [refreshTokensIfVisible])\n\n    // Refresh balance every 150s if hidden\n    useEffect(() => {\n        const refreshIfHidden = () => document[hidden] && !isBalanceLoading\n            ? fetchTokens(account, currentNetwork)\n            : null\n        const refreshInterval = setInterval(refreshIfHidden, 150000)\n        return () => clearInterval(refreshInterval)\n    }, [account, currentNetwork, isBalanceLoading, fetchTokens])\n\n    // Get supplement tokens data every 20s\n    useEffect(() => {\n        const refreshInterval = setInterval(() => fetchSupplementTokenData(tokensByNetworks), 20000)\n        return () => clearInterval(refreshInterval)\n    }, [fetchSupplementTokenData, tokensByNetworks])\n\n    // Refresh balance when window is focused\n    useEffect(() => {\n        document.addEventListener(visibilityChange, refreshTokensIfVisible, false);\n        return () => document.removeEventListener(visibilityChange, refreshTokensIfVisible, false);\n    }, [refreshTokensIfVisible])\n\n    return {\n        isBalanceLoading,\n        areProtocolsLoading,\n        balance,\n        otherBalances,\n        tokens,\n        extraTokens,\n        hiddenTokens,\n        protocols,\n        collectibles,\n        requestOtherProtocolsRefresh,\n        onAddExtraToken,\n        onRemoveExtraToken,\n        onAddHiddenToken,\n        onRemoveHiddenToken\n        //updatePortfolio//TODO find a non dirty way to be able to reply to getSafeBalances from the dapps, after the first refresh\n    }\n}\n","export function isFirefox() {\n  return typeof (navigator) !== 'undefined' && navigator.userAgent.toLowerCase().includes('firefox')\n}\n","import { useCallback, useEffect, useReducer, useRef, useState } from 'react'\nimport { useToasts } from 'hooks/toasts'\nimport { isFirefox } from 'lib/isFirefox'\n\nimport WalletConnectCore from '@walletconnect/core'\nimport * as cryptoLib from '@walletconnect/iso-crypto'\n\nconst noop = () => null\nconst noopSessionStorage = { setSession: noop, getSession: noop, removeSession: noop }\n\nconst STORAGE_KEY = 'wc1_state'\nconst SUPPORTED_METHODS = ['eth_sendTransaction', 'gs_multi_send', 'personal_sign', 'eth_sign']\nconst SESSION_TIMEOUT = 10000\n\nconst getDefaultState = () => ({ connections: [], requests: [] })\n\nlet connectors = {}\nlet connectionErrors = []\n\nasync function wait (ms) { return new Promise(resolve => setTimeout(resolve, ms)) }\n\n// Offline check: if it errored recently\nconst timePastForConnectionErr = 90 * 1000\nconst checkIsOffline = uri => {\n    const errors = connectionErrors.filter(x => x.uri === uri)\n    return errors.find(({ time } = {}) => time > (Date.now() - timePastForConnectionErr))\n    //return errors.length > 1 && errors.slice(-2)\n    //    .every(({ time } = {}) => time > (Date.now() - timePastForConnectionErr))\n}\n\nexport default function useWalletConnect ({ account, chainId, initialUri, allNetworks, setNetwork, useStorage }) {\n    const { addToast } = useToasts()\n\n    // This is needed cause of the WalletConnect event handlers\n    const stateRef = useRef()\n    stateRef.current = { account, chainId }\n\n    const [isConnecting, setIsConnecting] = useState(false)\n\n    const [stateStorage, setStateStorage] = useStorage({ key: STORAGE_KEY })\n\n    const [state, dispatch] = useReducer((state, action) => {\n        if (action.type === 'updateConnections') return { ...state, connections: action.connections }\n        if (action.type === 'connectedNewSession') {\n            return {\n                ...state,\n                connections: [...state.connections, { uri: action.uri, session: action.session, isOffline: false }]\n            }\n        }\n        if (action.type === 'disconnected') {\n            return {\n                ...state,\n                connections: state.connections.filter(x => x.uri !== action.uri)\n            }\n        }\n        if (action.type === 'batchRequestsAdded') {\n            if (state.requests.find(({ id }) => id === action.batchRequest.id + ':0')) return { ...state }\n\n            const newRequests = []\n            for (let ix in action.batchRequest.txns) {\n                if(action.batchRequest.txns[ix].to || action.batchRequest.txns[ix].data) {\n                    newRequests.push({\n                        ...action.batchRequest,\n                        type: 'eth_sendTransaction',\n                        isBatch: true,\n                        id: action.batchRequest.id + ':' + ix,\n                        account,\n                        txn: {\n                            ...action.batchRequest.txns[ix],\n                            from: account\n                        }\n                    })\n                } else {\n                    return { ...state }\n                }\n            }\n\n            return { ...state, requests: [...state.requests, ...newRequests] }\n        }\n        if (action.type === 'requestAdded') {\n            if (state.requests.find(({ id }) => id === action.request.id)) return { ...state }\n            return { ...state, requests: [...state.requests, action.request] }\n        }\n        if (action.type === 'requestsResolved') {\n            return {\n                ...state,\n                requests: state.requests.filter(x => !action.ids.includes(x.id))\n            }\n        }\n        return { ...state }\n    }, null, () => {\n        if (!stateStorage) return getDefaultState()\n        try {\n            return {\n                ...getDefaultState(),\n                ...stateStorage\n            }\n        } catch(e) {\n            console.error(e)\n            return getDefaultState()\n        }\n    })\n\n    // Side effects that will run on every state change/rerender\n    const maybeUpdateSessions = () => {\n        // restore connectors and update the ones that are stale\n        let updateConnections = false\n        state.connections.forEach(({ uri, session, isOffline }) => {\n            if (connectors[uri]) {\n                const connector = connectors[uri]\n                const session = connector.session\n                if (session.accounts[0] !== account || session.chainId !== chainId || checkIsOffline(uri) !== isOffline) {\n                    // NOTE: in case isOffline is different, we do not need to do this, but we're gonna leave that just in case the session is outdated anyway\n                    connector.updateSession({ accounts: [account], chainId })\n                    updateConnections = true\n                }\n            }\n        })\n\n        setStateStorage(state)\n\n        if (updateConnections) dispatch({\n            type: 'updateConnections',\n            connections: state.connections\n                .filter(({ uri }) => connectors[uri])\n                .map(({ uri }) => ({ uri, session: connectors[uri].session, isOffline: checkIsOffline(uri) }))\n        })\n    }\n    useEffect(maybeUpdateSessions, [account, chainId, state, setStateStorage])\n    // we need this so we can invoke the latest version from any event handler\n    stateRef.current.maybeUpdateSessions = maybeUpdateSessions\n\n    const clearWcClipboard = async () => {\n        const clipboard = await getClipboardText()\n\n        if (clipboard && isWcUri(clipboard)) {\n            navigator.clipboard.writeText('')\n        }\n    }\n\n    // New connections\n    const connect = useCallback(async connectorOpts => {\n        if (connectors[connectorOpts.uri]) {\n            addToast('dApp already connected')\n            return connectors[connectorOpts.uri]\n        }\n        let connector\n        try {\n            connector = connectors[connectorOpts.uri] = new WalletConnectCore({\n                connectorOpts,\n                cryptoLib,\n                sessionStorage: noopSessionStorage\n            })\n\n            if (!connector.connected) {\n                await connector.createSession();\n            }\n        } catch(e) {\n            console.error(e)\n            addToast(`Unable to connect to ${connectorOpts.uri}: ${e.message}`, { error: true })\n            return null\n        }\n\n        const onError = err => {\n            addToast(`WalletConnect error: ${(connector.session && connector.session.peerMeta && connector.session.peerMeta.name)} ${err.message || err}`, { error: true })\n            console.error('WalletConnect error', err)\n        }\n\n        let sessionStart\n        let sessionTimeout\n        if (!connector.session.peerMeta) sessionTimeout = setTimeout(() => {\n            const suggestion = /https:\\/\\/bridge.walletconnect.org/g.test(connector.session.bridge)\n                // @TODO: 'or try an alternative connection method' when we implement one\n                ? 'this dApp is using an old version of WalletConnect - please tell them to upgrade!'\n                : 'perhaps the link has expired? Refresh the dApp and try again.'\n            if (!connector.session.peerMeta) addToast(`Unable to get session from dApp - ${suggestion}`, { error: true })\n        }, SESSION_TIMEOUT)\n\n        connector.on('session_request', async (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n\n            setIsConnecting(true)\n\n            // Clear the \"dApp tool too long to connect\" timeout\n            clearTimeout(sessionTimeout)\n\n            if (connector.session.peerMeta.url.includes('bridge.avax.network')) {\n                const message = 'Avalanche Bridge does not currently support smart wallets.'\n                connector.rejectSession({ message })\n                addToast(message, { error: true })\n                return\n            }\n\n            await wait(1000)\n\n            // sessionStart is used to check if dApp disconnected immediately\n            sessionStart = Date.now()\n            connector.approveSession({\n                accounts: [stateRef.current.account],\n                chainId: stateRef.current.chainId,\n            })\n\n            await wait(1000)\n\n            // It's safe to read .session right after approveSession because 1) approveSession itself normally stores the session itself\n            // 2) connector.session is a getter that re-reads private properties of the connector; those properties are updated immediately at approveSession\n            dispatch({ type: 'connectedNewSession', uri: connectorOpts.uri, session: connector.session })\n\n            addToast('Successfully connected to '+connector.session.peerMeta.name)\n\n            setIsConnecting(false)\n\n            // On a successful connection, remove WC uri from the clipboard.\n            // Otherwise, in the case the user disconnects himself from the dApp, but still having the previous WC uri in the clipboard,\n            // then the app will try to connect him with the already invalidated WC uri.\n            clearWcClipboard()\n        })\n\n        connector.on('transport_error', (error, payload) => {\n            console.error('WalletConnect transport error', payload)\n            connectionErrors.push({ uri: connectorOpts.uri, event: payload.event, time: Date.now() })\n            // Keep the last 690 only\n            connectionErrors = connectionErrors.slice(-690)\n            stateRef.current.maybeUpdateSessions()\n        })\n\n        connector.on('call_request', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n            // @TODO: refactor into wcRequestHandler\n            // Opensea \"unlock currency\" hack; they use a stupid MetaTransactions system built into WETH on Polygon\n            // There's no point of this because the user has to sign it separately as a tx anyway; but more importantly,\n            // it breaks Ambire and other smart wallets cause it relies on ecrecover and does not depend on EIP1271\n            if (payload.method === 'eth_signTypedData') {\n                // @TODO: try/catch the JSON parse?\n                const signPayload = JSON.parse(payload.params[1])\n                if (signPayload.primaryType === 'MetaTransaction') {\n                    payload = {\n                        ...payload,\n                        method: 'eth_sendTransaction',\n                        params: [{\n                            to: signPayload.domain.verifyingContract,\n                            from: signPayload.message.from,\n                            data: signPayload.message.functionSignature, // @TODO || data?\n                            value: signPayload.message.value || '0x0'\n                        }]\n                    }\n                }\n            }\n            if (payload.method === 'gs_multi_send' || payload.method === 'ambire_sendBatchTransaction') {\n                dispatch({ type: 'batchRequestsAdded', batchRequest: {\n                        id: payload.id,\n                        type: payload.method,\n                        wcUri: connectorOpts.uri,\n                        txns: payload.params,\n                        chainId: connector.session.chainId,\n                        account: connector.session.accounts[0],\n                        notification: true\n                    } })\n                return\n            }\n            //FutureProof? WC does not implement it yet\n            if (payload.method === 'wallet_switchEthereumChain') {\n                const supportedNetwork = allNetworks.find(a => a.chainId === parseInt(payload.params[0].chainId, 16))\n\n                if (supportedNetwork) {\n                    setNetwork(supportedNetwork.chainId)\n                    connector.approveRequest({ id: payload.id, result: { chainId: supportedNetwork.chainId }})\n                } else {\n                    //Graceful error for user\n                    addToast(`dApp asked to switch to an unsupported chain: ${payload.params[0]?.chainId}`, { error: true })\n                    connector.rejectRequest({ id: payload.id, error: { message: 'Unsupported chain' }})\n                }\n            }\n            if (!SUPPORTED_METHODS.includes(payload.method)) {\n                const isUniIgnorable = payload.method === 'eth_signTypedData_v4'\n                    && connector.session.peerMeta\n                    && connector.session.peerMeta.name.includes('Uniswap')\n                // @TODO: if the dapp is in a \"allow list\" of dApps that have fallbacks, ignore certain messages\n                // eg uni has a fallback for eth_signTypedData_v4\n                if (!isUniIgnorable) addToast(`dApp requested unsupported method: ${payload.method}`, { error: true })\n                connector.rejectRequest({ id: payload.id, error: { message: 'METHOD_NOT_SUPPORTED: ' + payload.method }})\n                return\n            }\n            const wrongAcc = (\n                payload.method === 'eth_sendTransaction' && payload.params[0] && payload.params[0].from\n                && payload.params[0].from.toLowerCase() !== connector.session.accounts[0].toLowerCase()\n            ) || (\n                payload.method === 'eth_sign' && payload.params[1]\n                && payload.params[1].toLowerCase() !== connector.session.accounts[0].toLowerCase()\n            )\n            if (wrongAcc) {\n                addToast(`dApp sent a request for the wrong account: ${payload.params[0].from}`, { error: true })\n                connector.rejectRequest({ id: payload.id, error: { message: 'Sent a request for the wrong account' }})\n                return\n            }\n            dispatch({ type: 'requestAdded', request: {\n                id: payload.id,\n                type: payload.method,\n                wcUri: connectorOpts.uri,\n                txn: payload.method === 'eth_sign' ? payload.params[1] : payload.params[0],\n                chainId: connector.session.chainId,\n                account: connector.session.accounts[0],\n                notification: true\n            } })\n        })\n\n        connector.on('disconnect', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n\n            clearTimeout(sessionTimeout)\n            // NOTE the dispatch() will cause double rerender when we trigger a disconnect,\n            // cause we will call it once on disconnect() and once when the event arrives\n            // we can prevent this by checking if (!connectors[...]) but we'd rather stay safe and ensure\n            // the connection is removed\n            dispatch({ type: 'disconnected', uri: connectorOpts.uri })\n            connectors[connectorOpts.uri] = null\n\n            // NOTE: this event might be invoked 2 times when the dApp itself disconnects\n            // currently we don't dedupe that\n            if (sessionStart && (Date.now() - sessionStart) < SESSION_TIMEOUT) {\n                addToast('dApp disconnected immediately - perhaps it does not support the current network?', { error: true })\n            } else {\n                addToast(`${connector.session.peerMeta.name} disconnected: ${payload.params[0].message}`)\n            }\n        })\n\n        connector.on('error', onError)\n\n        return connector\n    }, [addToast, allNetworks, setNetwork])\n\n    const disconnect = useCallback(uri => {\n        // connector might not be there, either cause we disconnected before,\n        // or cause we failed to connect in the first place\n        if (connectors[uri]) {\n            connectors[uri].killSession()\n            connectors[uri] = null\n        }\n        dispatch({ type: 'disconnected', uri })\n    }, [])\n\n    const resolveMany = (ids, resolution) => {\n        state.requests.forEach(({ id, wcUri, isBatch }) => {\n            if (ids.includes(id)) {\n                const connector = connectors[wcUri]\n                if (!connector) return\n                if (!isBatch || id.endsWith(':0')) {\n                    let realId = isBatch ? id.substr(0, id.lastIndexOf(':')) : id\n                    if (resolution.success) connector.approveRequest({ id: realId, result: resolution.result })\n                    else connector.rejectRequest({ id: realId, error: { message: resolution.message } })\n                }\n            }\n        })\n        dispatch({ type: 'requestsResolved', ids })\n    }\n\n    // Side effects on init\n    useEffect(() => {\n        state.connections.forEach(({ uri, session }) => {\n            if (!connectors[uri]) connect({ uri, session })\n        })\n    // we specifically want to run this only once despite depending on state\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [connect])\n\n    // Initialization effects\n    useEffect(() => runInitEffects(connect, account, initialUri, addToast), [connect, account, initialUri, addToast])\n\n    return {\n        connections: state.connections,\n        requests: state.requests,\n        resolveMany,\n        connect, disconnect, isConnecting\n    }\n}\n\n// Initialization side effects\n// Connect to the URL, read from clipboard, etc.\nfunction runInitEffects(wcConnect, account, initialUri, addToast) {\n    if (initialUri) {\n        if (account) wcConnect({ uri: initialUri })\n        else addToast('WalletConnect dApp connection request detected, please create an account and you will be connected to the dApp.', { timeout: 15000 })\n    }\n\n    // hax\n    window.wcConnect = uri => wcConnect({ uri })\n\n    // @TODO on focus and on user action\n    const tryReadClipboard = async () => {\n        if (!account) return\n\n        const clipboard = await getClipboardText()\n        if (clipboard && isWcUri(clipboard) && !connectors[clipboard]) wcConnect({ uri: clipboard })\n    }\n\n    tryReadClipboard()\n    window.addEventListener('focus', tryReadClipboard)\n    return () => window.removeEventListener('focus', tryReadClipboard)\n}\n\nconst clipboardError = e => console.log('non-fatal clipboard/walletconnect err:', e.message)\nconst getClipboardText = async () => {\n    if (isFirefox()) return false\n\n    try {\n       return await navigator.clipboard.readText()\n    } catch(e) { clipboardError(e) }\n\n    return false\n}\n\nconst isWcUri = text => text.startsWith('wc:')\n","import { useEffect, useCallback, useState, useRef } from 'react'\nimport { fetchCaught } from 'lib/fetch'\n\n// 250ms after we've triggered a load of another URL, we will clear the data\n//  so that the component that uses this hook cann display the loading spinner\nconst RESET_DATA_AFTER = 250\n\nexport default function useRelayerData(url) {\n  const [isLoading, setLoading] = useState(true)\n  const [data, setData] = useState(null)\n  const [err, setErr] = useState(null)\n  const prevUrl = useRef('')\n\n  const updateData = useCallback(async () => {\n    const { resp, body, errMsg } = await fetchCaught(url)\n\n    if (resp && resp.status === 200) {\n      return body\n    } else {\n      console.log('relayerData error', { resp, body, errMsg })\n      throw new Error(errMsg || `status code ${resp && resp.status}`)\n    }\n  }, [url])\n\n  useEffect(() => {\n    if (!url) return\n\n    // Data reset: if some time passes before we load the next piece of data, and the URL is different,\n    // we will reset the data so that the UI knows to display a loading indicator\n    let resetDataTimer = null\n    const stripQuery = x => x.split('?')[0]\n    if (stripQuery(prevUrl.current) !== stripQuery(url)) {\n      resetDataTimer = setTimeout(() => setData(null), RESET_DATA_AFTER)\n    }\n    prevUrl.current = url\n\n    let unloaded = false\n    setLoading(true)\n    setErr(null)\n    updateData()\n      .then(data => !unloaded && prevUrl.current === url && setData(data))\n      .catch(e => !unloaded && setErr(e.message || e))\n      .then(() => {\n        clearTimeout(resetDataTimer)\n        !unloaded && setLoading(false)\n      })\n    return () => {\n      unloaded = true\n      clearTimeout(resetDataTimer)\n    }\n  }, [url, updateData])\n\n  return { data, isLoading, errMsg: err }\n}\n","import { useCallback, useEffect, useMemo, useState } from 'react'\nimport { useToasts } from './toasts'\nimport * as blockies from 'blockies-ts'\nimport { isValidAddress, isKnownTokenOrContract } from 'lib/address'\nimport { setKnownAddresses } from 'lib/humanReadableTransactions'\nimport { sha256 } from 'ethers/lib/utils'\n\nconst accountType = ({ email, signerExtra }) => {\n    const walletType = signerExtra && signerExtra.type === 'ledger' ? 'Ledger' : signerExtra && signerExtra.type === 'trezor' ? 'Trezor' : 'Web3'\n    return email ? `Ambire account for ${email}` : `Ambire account (${walletType})`\n}\nconst toIcon = seed => blockies.create({ seed }).toDataURL()\n\nconst useAddressBook = ({ accounts, useStorage }) => {\n    const { addToast } = useToasts()\n    const [storageAddresses, setStorageAddresses] = useStorage({ key: 'addresses', defaultValue: [] })\n\n    const addressList = useMemo(() => {\n        try {\n            const addresses = storageAddresses\n            if (!Array.isArray(addresses)) throw new Error('Address Book: incorrect format')\n            return [\n                ...accounts.map(account => ({\n                    isAccount: true,\n                    name: accountType(account),\n                    address: account.id,\n                    icon: toIcon(account.id)\n                })),\n                ...addresses.map(entry => ({\n                    ...entry,\n                    icon: toIcon(entry.address)\n                }))\n            ]\n        } catch (e) {\n            console.error('Address Book parsing failure', e)\n            return []\n        }\n    }, [accounts, storageAddresses])\n\n    const [addresses, setAddresses] = useState(() => addressList)\n\n    const updateAddresses = useCallback(addresses => {\n        setAddresses(addresses.map(entry => ({\n            ...entry,\n            icon: toIcon(entry.address)\n        })))\n        setStorageAddresses(addresses.filter(({ isAccount }) => !isAccount))\n    }, [setAddresses, setStorageAddresses])\n\n    const isKnownAddress = useCallback(address => [\n        ...addresses.map(({ address }) => sha256(address)),\n        ...accounts.map(({ id }) => sha256(id))\n    ].includes(sha256(address)), [addresses, accounts])\n\n    const addAddress = useCallback((name, address) => {\n        if (!name || !address) throw new Error('Address Book: invalid arguments supplied')\n        if (!isValidAddress(address)) throw new Error('Address Book: invalid address format')\n        if (isKnownTokenOrContract(address)) return addToast('The address you\\'re trying to add is a smart contract.', { error: true })\n\n        const newAddresses = [\n            ...addresses,\n            {\n                name,\n                address\n            }\n        ]\n\n        updateAddresses(newAddresses)\n\n        addToast(`${address} added to your Address Book.`)\n    }, [addresses, addToast, updateAddresses])\n\n    const removeAddress = useCallback((name, address) => {\n        if (!name || !address) throw new Error('Address Book: invalid arguments supplied')\n        if (!isValidAddress(address)) throw new Error('Address Book: invalid address format')\n\n        const newAddresses = addresses\n            .filter(a => !(a.name === name && a.address === address))\n\n        updateAddresses(newAddresses)\n\n        addToast(`${address} removed from your Address Book.`)\n    }, [addresses, addToast, updateAddresses])\n\n    useEffect(() => { setAddresses(addressList) }, [accounts, addressList])\n\n    // a bit of a 'cheat': update the humanizer with the latest known addresses\n    // this is breaking the react patterns cause the humanizer has a 'global' state, but that's fine since it simply constantly learns new addr aliases,\n    // so there's no 'inconsistent state' there, the more the better\n    useEffect(() => setKnownAddresses(addresses), [addresses])\n\n    return {\n        addresses,\n        addAddress,\n        removeAddress,\n        isKnownAddress\n    }\n}\n\nexport default useAddressBook\n","import { useEffect, useCallback, useMemo } from 'react'\nimport { useLocation } from \"react-router-dom\";\nimport { useToasts} from './toasts'\n\nlet documentTitle = document.title\nlet flashingTitleInterval = null\nlet stickyIds = []\n\nconst showFlashingTitle = () => {\n    let count = 0\n    clearInterval(flashingTitleInterval)\n    flashingTitleInterval = setInterval(() => {\n        document.title = (count % 2 === 0 ? '' : '') + ' PENDING SIGNING REQUEST'\n        count++\n    }, 500)\n}\n\nconst removeFlashingTitle = () => {\n    clearInterval(flashingTitleInterval)\n    document.title = documentTitle\n}\n\nconst useAttentionGrabber = ({ eligibleRequests, isSendTxnShowing, onSitckyClick }) => {\n    const location = useLocation()\n    const { addToast, removeToast } = useToasts()\n\n    const removeStickyToasts = useCallback(() => stickyIds.forEach(id => removeToast(id)), [removeToast])\n    const isRouteWallet = useMemo(() => location.pathname.startsWith('/wallet'), [location.pathname])\n    \n    useEffect(() => {\n        if (eligibleRequests.length && isRouteWallet) {\n            if (isSendTxnShowing) removeStickyToasts()\n            else {\n                stickyIds.push(addToast('Transactions waiting to be signed', {\n                    position: 'right',\n                    sticky: true,\n                    badge: eligibleRequests.length,\n                    onClick: () => onSitckyClick()\n                }))\n            }\n\n            !(window.Notification && Notification.permission !== 'denied') ? showFlashingTitle() : removeFlashingTitle()\n        } else {\n            removeStickyToasts()\n            removeFlashingTitle()\n        }\n\n        return () => clearInterval(flashingTitleInterval)\n    }, [removeStickyToasts, eligibleRequests, isSendTxnShowing, onSitckyClick, addToast, removeToast, isRouteWallet])\n}\n\nexport default useAttentionGrabber\n\n","import { createContext, useCallback, useState } from 'react'\nimport './ModalProvider.scss'\n\nconst ModalContext = createContext(null)\n\nconst ModalProvider = ({ children }) => {\n    const [modal, setModal] = useState(null)\n    const [dynamicModal, setDynamicModal] = useState(null)\n    \n    const showModal = useCallback((element, opts = { disableClose: false }) => {\n        setDynamicModal(null)\n        setModal({element, opts})\n    }, [])\n\n    const showDynamicModal = useCallback((component, props, opts = { disableClose: false }) => {\n        setModal(null)\n        setDynamicModal({ component, props, opts })\n    }, [])\n\n    const hideModal = useCallback(() => {\n        setModal(null)\n        setDynamicModal(null)\n    }, [])\n\n    const updateModal = useCallback(props => \n        setDynamicModal(dynamicModal => dynamicModal ? ({\n            ...dynamicModal,\n            props: {\n                ...dynamicModal.props,\n                ...props\n            }\n        }) : null)\n    , [])\n    \n    return (\n        <ModalContext.Provider value={{ showModal, showDynamicModal, hideModal, updateModal }}>\n            { \n                modal ?\n                    <div id=\"modal-container\">\n                        <div className=\"backdrop\" onClick={modal.opts.disableClose ? null : hideModal }></div>\n                        { modal.element }\n                    </div>\n                    :\n                    null\n            }\n            {\n                dynamicModal ?\n                    <div id=\"modal-container\">\n                        <div className=\"backdrop\" onClick={dynamicModal.opts && dynamicModal.opts.disableClose ? null : hideModal }></div>\n                        <dynamicModal.component {...dynamicModal.props} />\n                    </div>\n                    :\n                    null\n            }\n            { children }\n        </ModalContext.Provider>\n    )\n}\n\nexport { ModalContext }\nexport default ModalProvider","import { useContext } from 'react'\nimport { ModalContext } from 'components/ModalProvider/ModalProvider'\n\nconst useModals = () => useContext(ModalContext)\nexport default useModals","import { useEffect, useState } from 'react'\nimport { isFirefox } from 'lib/isFirefox'\nimport { useLocalStorage } from 'hooks'\n\nconst onPermissionChange = async (name, listener) => {\n    try {\n        const status = await navigator.permissions.query({ name })\n        status.onchange = () => listener(status.state === 'granted')\n        return status.state === 'granted'\n    } catch(e) {\n        console.error(e);\n        return false\n    }\n}\n\nconst usePermissions = () => {\n    const [arePermissionsLoaded, setPermissionsLoaded] = useState(false)\n    const [isClipboardGranted, setClipboardGranted] = useState(false)\n    const [isNoticationsGranted, setNotificationsGranted] = useState(false)\n    const [modalHidden, setModalHidden] = useLocalStorage({ key: 'permissionsModalHidden' })\n\n    const checkForPermissions = async () => {\n\tif (isFirefox()) {\n\t\tsetClipboardGranted(false)\n\t} else {\n\t\tconst clipboardState = await onPermissionChange('clipboard-read', state => setClipboardGranted(state))\n\t\tsetClipboardGranted(clipboardState)\n\t}\n\n        const notificationsState = await onPermissionChange('notifications', state => setNotificationsGranted(state))\n        setNotificationsGranted(notificationsState)\n\n        setPermissionsLoaded(true)\n    }\n\n    useEffect(() => checkForPermissions(), [])\n\n    return {\n        isClipboardGranted,\n        isNoticationsGranted,\n        arePermissionsLoaded,\n        modalHidden,\n        setModalHidden\n    }\n}\n\nexport default usePermissions\n","import { useCallback, useState } from \"react\"\n\ninterface Storage {\n  getItem(key: string): string | null;\n  setItem(key: string, value: string): void;\n  removeItem(key: string): void;\n}\n\ntype HookProps = {\n  storage: Storage;\n  key: string;\n  defaultValue?: any;\n  isStringStorage?: boolean;\n  setInit?: (item: any) => any;\n}\n\nconst setInitDefault = (item: any) : any => item\n\n/**\n * The main role of this hook is to hide the Storage provider we are using under the hood (AsyncStorage/localStorage).\n * This will allow us to share code between mobile/web.\n *\n * @param storage - Object implementing Storage interface. For instance, localStorage.\n * @param key - Storage item key name.\n * @param defaultValue - Default value to be used, in the case the Storage item is not set. If we don't pass it - it will default to null.\n * @param isStringStorage - Flag for disabling parsing and item stringifying. If it's enabled, we will treat whatever is in the storage as a string.\n * @param setInit - In some advanced cases, we need to perform additional logic for setting the defaultValue, based on the Storage item parsed value.\n * setInit function will provide us quick access to the parsed Storage item and based on its value we can return the needed default/init value of the hook.\n */\nexport default function useStorage({\n  storage,\n  key,\n  defaultValue = null,\n  isStringStorage = false,\n  setInit = setInitDefault,\n}: HookProps): [any, (item: any) => void, () => void]  {\n  const [item, set] = useState(() => {\n    // In case the item is not set in the storage, we just fall back to `defaultValue`\n    if (!storage.getItem(key)) return setInit(defaultValue)\n\n    if (isStringStorage) return setInit(storage.getItem(key))\n\n    // Here we are going to keep the parsed item value.\n    // If the parsing failed, we just fall back to `defaultValue`.\n    let parsedItem\n\n    try {\n      parsedItem = JSON.parse(storage.getItem(key)!)\n    } catch (e) {\n      console.error(`Storage item parsing failure. Item key: ${key}`, e)\n\n      parsedItem = defaultValue\n    }\n\n    return setInit(parsedItem)\n  })\n\n  const setItem = useCallback((value: any): void => {\n    set((prevState:any) => {\n      const itemValue = typeof value === 'function' ? value(prevState) : value\n\n      if (isStringStorage && typeof itemValue !== 'string') {\n        throw new Error(`Wrong item type. We expect a string to be passed, but got ${typeof itemValue}!`)\n      }\n\n      storage.setItem(key, isStringStorage ? itemValue : JSON.stringify(itemValue))\n\n      return itemValue\n    })\n  }, [storage, key, isStringStorage])\n\n  const removeItem = useCallback((): void => {\n    storage.removeItem(key)\n    set(null)\n  }, [storage, key])\n\n  return [item, setItem, removeItem]\n}\n","import useStorage from \"./useStorage\";\n\nexport default function useLocalStorage({ key, defaultValue, isStringStorage, setInit }) {\n  return useStorage({ storage: localStorage, key, defaultValue, isStringStorage, setInit })\n}\n","import { getProvider } from 'lib/provider'\nimport { BigNumber, utils, Contract } from 'ethers'\nimport { useEffect, useState, useCallback } from 'react'\n\nconst ZERO = BigNumber.from(0)\nconst ZERO_ADDR = '0x0000000000000000000000000000000000000000'\nconst PRECISION = 1_000_000_000_000\nconst POOL_SHARES_TOKEN_DECIMALS_MUL = '1000000000000000000'\nconst STAKING_POOL_EVENT_TYPES = {\n    enter: 'enter',\n    leave: 'leave',\n    burn: 'burn',\n    withdraw: 'withdraw',\n    rageLeave: 'rageLeave',\n    shareTokensTransferIn: 'shareTokensTransferIn',\n    shareTokensTransferOut: 'shareTokensTransferOut',\n}\n\nconst ethProvider = getProvider('ethereum')\n\nconst useAmbireEarnDetails = ({accountId, addresses, tokenLabel}) => {\n    const WALLET_ADDR = addresses.stakingTokenAddress\n    const [details, setDetails] = useState({})\n    const [isLoading, setIsLoading] = useState(true)\n\n    const getStats = useCallback(async (addresses, tokenLabel) => {\n        const xWalletContract = new Contract(addresses.stakingTokenAddress, addresses.stakingPoolAbi, ethProvider)\n        const walletContract = new Contract(addresses.tokenAddress, addresses.tokenAbi, ethProvider)\n        const fromBlock = 0\n        const [\n            timeToUnbond,\n            shareValue,\n            sharesTotalSupply,\n            balanceShares,\n            lockedShares,\n            allEnterWalletTransferLogs,\n            leaveLogs,\n            withdrawLogs,\n            rageLeaveLogs,\n            sharesTokensTransfersInLogs,\n            sharesTokensTransfersOutLogs,\n        ] = await Promise.all([\n            xWalletContract.timeToUnbond(),\n            xWalletContract.shareValue(),\n            xWalletContract.totalSupply(),\n            xWalletContract.balanceOf(accountId),\n            xWalletContract.lockedShares(accountId),\n            ethProvider.getLogs({\n                fromBlock,\n                ...walletContract.filters.Transfer(null, WALLET_ADDR, null),\n            }),\n            ethProvider.getLogs({\n                fromBlock,\n                ...xWalletContract.filters.LogLeave(accountId, null, null, null),\n            }),\n            ethProvider.getLogs({\n                fromBlock,\n                ...xWalletContract.filters.LogWithdraw(\n                    accountId,\n                    null,\n                    null,\n                    null,\n                    null\n                ),\n            }),\n            ethProvider.getLogs({\n                fromBlock,\n                ...xWalletContract.filters.LogRageLeave(\n                    accountId,\n                    null,\n                    null,\n                    null\n                ),\n            }),\n            ethProvider.getLogs({\n                fromBlock,\n                ...xWalletContract.filters.Transfer(null, accountId, null),\n            }),\n            ethProvider.getLogs({\n                fromBlock,\n                ...xWalletContract.filters.Transfer(accountId, null, null),\n            }),\n        ])\n        const [latestLog] = leaveLogs.sort((a, b) => b.blockNumber - a.blockNumber)\n        let remainingTime\n        if (latestLog) {\n            const { timestamp } = await ethProvider.getBlock(latestLog.blockNumber)\n            remainingTime = (timeToUnbond.toString() * 1000) - (Date.now() - (timestamp * 1000))\n            if (remainingTime <= 0) remainingTime = 0\n        } else {\n            remainingTime = null\n        }\n       \n        const userShare = sharesTotalSupply.isZero()\n            ? ZERO\n            : balanceShares.mul(PRECISION).div(sharesTotalSupply).toNumber() /\n              PRECISION\n\n        const enterWalletTokensByTxHash = allEnterWalletTransferLogs.reduce(\n            (byHash, log) => {\n                byHash[log.transactionHash] = log\n                return byHash\n            },\n            {}\n        )\n\n        const sharesTokensTransfersIn = sharesTokensTransfersInLogs.map(log => {\n            const parsedLog = xWalletContract.interface.parseLog(log)\n\n            const {\n                from, // [0]\n                amount, // [2]\n            } = parsedLog.args\n\n            return {\n                transactionHash: log.transactionHash,\n                blockNumber: log.blockNumber,\n                shares: amount,\n                type:\n                    from === ZERO_ADDR\n                        ? STAKING_POOL_EVENT_TYPES.enter\n                        : STAKING_POOL_EVENT_TYPES.shareTokensTransferIn,\n                from,\n            }\n        })\n\n        // Only out txns as we have logs for RageLEave and Withdraw and they only burns shares\n        // TODO: detect innerBurn transactions to ZERO_ADDR (burned by the user itself)\n        const sharesTokensTransfersOut = sharesTokensTransfersOutLogs\n            .map(log => {\n                const parsedLog = xWalletContract.interface.parseLog(log)\n\n                const {\n                    to, // [1]\n                    amount, // [2]\n                } = parsedLog.args\n\n                return {\n                    transactionHash: log.transactionHash,\n                    blockNumber: log.blockNumber,\n                    shares: amount,\n                    type: STAKING_POOL_EVENT_TYPES.shareTokensTransferOut,\n                    to,\n                }\n            })\n            .filter(x => x.to !== ZERO_ADDR)\n\n        const { shareTokensEnterMintByHash, shareTokensTransfersInByTxHash } =\n            sharesTokensTransfersIn.reduce(\n                (txns, event) => {\n                    if (event.type === STAKING_POOL_EVENT_TYPES.enter) {\n                        txns.shareTokensEnterMintByHash[event.transactionHash] =\n                            event\n                    }\n\n                    if (\n                        event.type ===\n                        STAKING_POOL_EVENT_TYPES.shareTokensTransferIn\n                    ) {\n                        txns.shareTokensTransfersInByTxHash[\n                            event.transactionHash\n                        ] = event\n                    }\n\n                    return txns\n                },\n                {\n                    shareTokensEnterMintByHash: {},\n                    shareTokensTransfersInByTxHash: {},\n                }\n            )\n\n        const sharesTokensTransfersInFromExternal = Object.values(\n            shareTokensTransfersInByTxHash\n        )\n\n        const userEnters = Object.values(shareTokensEnterMintByHash)\n            .map(sharesMintEvent => {\n                const adexTokenTransfersLog =\n                    enterWalletTokensByTxHash[sharesMintEvent.transactionHash]\n\n                if (adexTokenTransfersLog) {\n                    const parsedWalletLog = walletContract.interface.parseLog(\n                        adexTokenTransfersLog\n                    )\n\n                    return {\n                        transactionHash: sharesMintEvent.transactionHash,\n                        type: STAKING_POOL_EVENT_TYPES.enter,\n                        shares: sharesMintEvent.shares,\n                        walletAmount: tokenLabel === 'ADX' ? parsedWalletLog.args.value : parsedWalletLog.args.amount, // [2]\n                        from: parsedWalletLog.args.from,\n                        blockNumber: sharesMintEvent.blockNumber,\n                    }\n                } else {\n                    return null\n                }\n            })\n            .filter(x => !!x)\n\n        const userWithdraws = withdrawLogs.map(log => {\n            const parsedWithdrawLog = xWalletContract.interface.parseLog(log)\n            const { shares, unlocksAt, maxTokens, receivedTokens } =\n                parsedWithdrawLog.args\n\n            return {\n                transactionHash: log.transactionHash,\n                type: STAKING_POOL_EVENT_TYPES.withdraw,\n                shares, //[1]\n                unlocksAt, //[2]\n                maxTokens, //[3]\n                receivedTokens, //[4]\n                blockNumber: log.blockNumber,\n            }\n        })\n\n        const userRageLeaves = rageLeaveLogs.map(log => {\n            const parsedRageLeaveLog = xWalletContract.interface.parseLog(log)\n\n            const { shares, maxTokens, receivedTokens } =\n                parsedRageLeaveLog.args\n\n            return {\n                transactionHash: log.transactionHash,\n                type: STAKING_POOL_EVENT_TYPES.rageLeave,\n                shares, //[1]\n                maxTokens, //[2]\n                receivedTokens,\n                walletAmount: receivedTokens, //[3]\n                blockNumber: log.blockNumber,\n            }\n        })\n\n        const now = new Date() / 1000\n\n        const userLeaves = await Promise.all(\n            leaveLogs.map(async log => {\n                const parsedLog = xWalletContract.interface.parseLog(log)\n\n                const { shares, unlocksAt, maxTokens } = parsedLog.args\n\n                const withdrawTx = userWithdraws.find(\n                    event =>\n                        event.unlocksAt.toString() === unlocksAt.toString() &&\n                        event.shares.toString() === shares.toString() &&\n                        event.maxTokens.toString() === maxTokens.toString()\n                )\n\n                const walletValue = sharesTotalSupply.isZero()\n                    ? ZERO // maxTokens\n                    : await xWalletContract.unbondingCommitmentWorth(\n                          accountId,\n                          shares,\n                          unlocksAt\n                      )\n\n                return {\n                    transactionHash: log.transactionHash,\n                    type: STAKING_POOL_EVENT_TYPES.leave,\n                    shares, // [1]\n                    unlocksAt, //[2]\n                    maxTokens, // [3]\n                    walletValue,\n                    canWithdraw: unlocksAt < now && !withdrawTx,\n                    blockNumber: log.blockNumber,\n                    withdrawTx,\n                }\n            })\n        )\n        \n        const leavesPendingToUnlock = [...userLeaves].filter(\n            event => event.unlocksAt > now\n        )\n\n        const leavesReadyToWithdraw = [...userLeaves].filter(\n            event => event.unlocksAt < now && !event.withdrawTx\n        )\n\n        const leavesPendingToUnlockTotalMax = leavesPendingToUnlock.reduce(\n            (a, b) => a.add(b.maxTokens),\n            ZERO\n        )\n\n        const leavesPendingToUnlockTotalWallet = leavesPendingToUnlock.reduce(\n            (a, b) => a.add(b.walletValue),\n            ZERO\n        )\n\n        const leavesReadyToWithdrawTotalMax = leavesReadyToWithdraw.reduce(\n            (a, b) => a.add(b.maxTokens),\n            ZERO\n        )\n\n        const leavesReadyToWithdrawTotalWallet = leavesReadyToWithdraw.reduce(\n            (a, b) => a.add(b.walletValue),\n            ZERO\n        )\n\n        if (\n            sharesTokensTransfersOut.length ||\n            sharesTokensTransfersInFromExternal.length\n        ) {\n            const fromBlock = Math.min(\n                sharesTokensTransfersOut[0]\n                    ? sharesTokensTransfersOut[0].blockNumber\n                    : Number.MAX_SAFE_INTEGER,\n                sharesTokensTransfersInFromExternal[0]\n                    ? sharesTokensTransfersInFromExternal[0].blockNumber\n                    : Number.MAX_SAFE_INTEGER\n            )\n\n            const [\n                allLeaveLogs,\n                allWithdrawLogs,\n                allRageLeaveLogs,\n                allEnterSharesTokensTransfersInLogs,\n            ] = await Promise.all([\n                ethProvider.getLogs({\n                    fromBlock,\n                    ...xWalletContract.filters.LogLeave(null, null, null, null),\n                }),\n                ethProvider.getLogs({\n                    fromBlock,\n                    ...xWalletContract.filters.LogWithdraw(\n                        null,\n                        null,\n                        null,\n                        null,\n                        null\n                    ),\n                }),\n                ethProvider.getLogs({\n                    fromBlock,\n                    ...xWalletContract.filters.LogRageLeave(\n                        null,\n                        null,\n                        null,\n                        null\n                    ),\n                }),\n                ethProvider.getLogs({\n                    fromBlock,\n                    ...xWalletContract.filters.Transfer(ZERO_ADDR, null, null),\n                }),\n            ])\n\n            const allEnters = allEnterSharesTokensTransfersInLogs\n                .map(sharesMintEvent => {\n                    const walletTokenTransfersLog =\n                        enterWalletTokensByTxHash[\n                            sharesMintEvent.transactionHash\n                        ]\n\n                    if (walletTokenTransfersLog) {\n                        const parsedLog = walletContract.interface.parseLog(\n                            walletTokenTransfersLog\n                        )\n                        const amount = tokenLabel === 'ADX' ? parsedLog.args.value : parsedLog.args.amount \n                        const { amount: shares } =\n                            xWalletContract.interface.parseLog(\n                                sharesMintEvent\n                            ).args\n\n                        return {\n                            blockNumber: sharesMintEvent.blockNumber,\n                            shareValue: shares.isZero()\n                                ? ZERO\n                                : amount\n                                      .mul(POOL_SHARES_TOKEN_DECIMALS_MUL)\n                                      .div(shares),\n                        }\n                    } else {\n                        return null\n                    }\n                })\n                .filter(x => !!x)\n\n            const allWithdraws = allWithdrawLogs.map(log => {\n                const parsedWithdrawLog =\n                    xWalletContract.interface.parseLog(log)\n                const { shares, maxTokens } = parsedWithdrawLog.args\n\n                return {\n                    blockNumber: log.blockNumber,\n                    shareValue: maxTokens\n                        .mul(POOL_SHARES_TOKEN_DECIMALS_MUL)\n                        .div(shares),\n                }\n            })\n\n            const allRageLeaves = allRageLeaveLogs.map(log => {\n                const parsedRageLeaveLog =\n                    xWalletContract.interface.parseLog(log)\n\n                const { shares, maxTokens } = parsedRageLeaveLog.args\n\n                return {\n                    shareValue: maxTokens\n                        .mul(POOL_SHARES_TOKEN_DECIMALS_MUL)\n                        .div(shares),\n                    blockNumber: log.blockNumber,\n                }\n            })\n\n            const allLeaves = allLeaveLogs.map(log => {\n                const parsedLog = xWalletContract.interface.parseLog(log)\n                const { shares, maxTokens } = parsedLog.args\n                return {\n                    blockNumber: log.blockNumber,\n                    shareValue: maxTokens\n                        .mul(POOL_SHARES_TOKEN_DECIMALS_MUL)\n                        .div(shares),\n                }\n            })\n\n            const allLogs = allEnters\n                .concat(allWithdraws)\n                .concat(allLeaves)\n                .concat(allRageLeaves)\n                .sort((a, b) => a.blockNumber - b.blockNumber)\n\n            const withWalletAmount = events =>\n                events.forEach((transferLog, i) => {\n                    const nextLog =\n                        allLogs.find(\n                            log => log.blockNumber >= transferLog.blockNumber\n                        ) || {}\n\n                    const bestShareValue = nextLog.shareValue || shareValue\n\n                    // approximate share value\n                    events[i].shareValue = bestShareValue\n                    events[i].walletAmount = transferLog.shares\n                        .mul(bestShareValue)\n                        .div(POOL_SHARES_TOKEN_DECIMALS_MUL)\n                })\n\n            withWalletAmount(sharesTokensTransfersOut)\n            withWalletAmount(sharesTokensTransfersInFromExternal)\n        }\n\n        const totalSharesOutTransfers = sharesTokensTransfersOut.reduce(\n            (a, b) => a.add(b.shares),\n            ZERO\n        )\n\n        const totalSharesOutTransfersWalletValue =\n            sharesTokensTransfersOut.reduce(\n                (a, b) => a.add(b.walletAmount),\n                ZERO\n            )\n\n        const totalSharesInTransfers = sharesTokensTransfersInFromExternal.reduce(\n            (a, b) => a.add(b.shares),\n            ZERO\n        )\n\n        const totalSharesInTransfersWalletValue =\n            sharesTokensTransfersInFromExternal.reduce(\n                (a, b) => a.add(b.walletAmount),\n                ZERO\n            )\n\n        const depositsWalletTotal = userEnters.reduce(\n            (a, b) => a.add(b.walletAmount),\n            ZERO\n        )\n\n        // Incl received + distributed to other staker. Used for calc reward because the were actually earned\n        const rageLeavesWithdrawnWalletTotal = userRageLeaves.reduce(\n            (a, b) => a.add(b.maxTokens),\n            ZERO\n        )\n\n        const rageLeavesReceivedWalletTotal = userRageLeaves.reduce(\n            (a, b) => a.add(b.receivedTokens),\n            ZERO\n        )\n\n        const withdrawsWalletTotal = userWithdraws.reduce(\n            (a, b) => a.add(b.receivedTokens),\n            ZERO\n        )\n\n        const totalLockedSharesCheck = [...userLeaves]\n            .filter(x => !x.withdrawTx)\n            .reduce((a, b) => a.add(b.shares), ZERO)\n\n        if (!totalLockedSharesCheck.eq(lockedShares)) {\n            console.error(\n                'locked shares different than check sum, user balance can be incorrect',\n                'lockedShares:',\n                lockedShares.toString(),\n                'totalLockedSharesCheck:',\n                totalLockedSharesCheck.toString()\n            )\n        }\n\n        const balanceSharesAvailable = balanceShares.sub(lockedShares).lt(ZERO)\n            ? ZERO \n            : balanceShares.sub(lockedShares)\n\n        const currentBalanceWalletAvailable = balanceSharesAvailable\n            .mul(shareValue)\n            .div(POOL_SHARES_TOKEN_DECIMALS_MUL)\n\n        // NOTE: used to calc actual balance in Wallet + rewards\n        const currentBalanceWallet = balanceShares\n            .mul(shareValue)\n            .div(POOL_SHARES_TOKEN_DECIMALS_MUL)\n\n        const currentBalanceSharesWalletValue = balanceShares\n            .mul(shareValue)\n            .div(POOL_SHARES_TOKEN_DECIMALS_MUL)\n\n        const hasInsufficentBalanceForUnbondCommitments = balanceShares.lt(\n            lockedShares\n        ) \n        const insufficientSharesAmoutForCurrentUnbonds =\n            hasInsufficentBalanceForUnbondCommitments\n                ? lockedShares.sub(balanceShares)\n                : ZERO\n\n        // NOTE: Used for rage leave because shareValue is can be different than in unbondCommitments\n        const currentBalanceWalletAtCurrentShareValue =\n            currentBalanceWalletAvailable\n        \n        // Enter, transfers in\n\t    const totalInTokenValue = depositsWalletTotal.add(totalSharesInTransfersWalletValue)\n        \n        // Withdraws, Transfers out, rage leaves\n        const totalOutTokenValue = withdrawsWalletTotal\n            .add(totalSharesOutTransfersWalletValue)\n            .add(rageLeavesWithdrawnWalletTotal)\n\n        const totalRewards = currentBalanceWallet\n            .add(totalOutTokenValue)\n            .sub(totalInTokenValue)\n\n\n        const hasActiveUnbondCommitments = !![...userLeaves].filter(\n            x => !x.withdrawTx\n        ).length\n\n        const stakings = userEnters\n            .concat(userLeaves)\n            .concat(userWithdraws)\n            .concat(userRageLeaves)\n            .concat(sharesTokensTransfersInFromExternal)\n            .concat(sharesTokensTransfersOut)\n            .sort((a, b) => a.blockNumber - b.blockNumber)\n\n        const withTimestamp = await Promise.all(\n            stakings.map(async stakingEvent => {\n                const { timestamp } = await ethProvider.getBlock(\n                    stakingEvent.blockNumber\n                )\n                return {\n                    ...stakingEvent,\n                    timestamp: timestamp * 1000,\n                }\n            })\n        )\n\n        const stats = {\n            // ...poolData,\n            balanceShares,\n            balanceSharesAvailable,\n            currentBalanceWallet,\n            currentBalanceWalletAvailable,\n            currentBalanceWalletAtCurrentShareValue,\n            currentBalanceSharesWalletValue,\n            hasInsufficentBalanceForUnbondCommitments,\n            insufficientSharesAmoutForCurrentUnbonds,\n            totalRewards,\n            totalSharesOutTransfersWalletValue,\n            totalSharesInTransfersWalletValue,\n            stakings: withTimestamp,\n            userLeaves,\n            depositsWalletTotal,\n            withdrawsWalletTotal,\n            leavesPendingToUnlockTotalMax,\n            leavesReadyToWithdrawTotalMax,\n            leavesPendingToUnlockTotalWallet,\n            leavesReadyToWithdrawTotalWallet,\n            hasActiveUnbondCommitments,\n            loaded: true,\n            userDataLoaded: true,\n            userShare,\n            remainingTime,\n            totalSharesOutTransfers,\n            totalSharesInTransfers,\n            rageLeavesReceivedWalletTotal,\n            rageLeavesWithdrawnWalletTotal,\n            totalInTokenValue,\n            totalOutTokenValue\n        }\n\n        return {\n            currentBalanceWalletAtCurrentShareValue: utils.formatUnits(\n                stats.currentBalanceWalletAtCurrentShareValue.toString(),\n                18\n            ),\n            balance: utils.formatUnits(\n                stats.currentBalanceWallet.toString(),\n                18\n            ),\n            poolShare: stats.userShare,\n            allTimeRewards: utils.formatUnits(\n                stats.totalRewards.toString(),\n                18\n            ),\n            totalDeposit: utils.formatUnits(\n                stats.depositsWalletTotal.toString(),\n                18\n            ),\n            totalWithdraws: utils.formatUnits(\n                stats.withdrawsWalletTotal.toString(),\n                18\n            ),\n            pendingToUnlock: utils.formatUnits(\n                stats.leavesPendingToUnlockTotalWallet.toString(),\n                18\n            ),\n            readyToWithdraw: utils.formatUnits(\n                stats.leavesReadyToWithdrawTotalWallet.toString(),\n                18\n            ),\n            totalInTokenValue: utils.formatUnits(\n                stats.totalInTokenValue.toString(),\n                18\n            ),\n            totalOutTokenValue: utils.formatUnits(\n                stats.totalOutTokenValue.toString(),\n                18\n            ),\n            rageLeavesReceivedWalletTotal: utils.formatUnits(\n                stats.rageLeavesReceivedWalletTotal.toString(),\n                18\n            ),\n            rageLeavesWithdrawnWalletTotal: utils.formatUnits(\n                stats.rageLeavesWithdrawnWalletTotal.toString(),\n                18\n            ),\n            totalSharesInTransfersWalletValue: utils.formatUnits(\n                stats.totalSharesInTransfersWalletValue.toString(),\n                18\n            ),\n            totalSharesOutTransfersWalletValue: utils.formatUnits(\n                stats.totalSharesOutTransfersWalletValue.toString(),\n                18\n            ),\n            remainingTime: stats.remainingTime,\n        }\n    }, [WALLET_ADDR, accountId])\n\n    useEffect(() => {\n        const getData = async (addresses, tokenLabel) => {\n            setIsLoading(prevState => !prevState)\n            try {\n                const data = await getStats(addresses, tokenLabel)\n                setDetails(data)\n                setIsLoading(prevState => !prevState)\n            } catch(e) {\n                console.error(e)\n                setIsLoading(prevState => !prevState)\n            }\n        }\n        if (!accountId) return\n        getData(addresses, tokenLabel)\n    }, [accountId, addresses, getStats, setDetails, setIsLoading, tokenLabel])\n\n    return { details, isLoading } || {}\n}\n\nexport default useAmbireEarnDetails\n","import './Modal.scss'\n\nimport { MdClose } from 'react-icons/md'\nimport { useModals } from 'hooks'\n\nconst Modal = ({ children, id, title, buttons, isCloseBtnShown = true, onClose, topLeft }) => {\n    const { hideModal } = useModals()\n\n    const onCloseModal = () => {\n        hideModal()\n        onClose && onClose()\n    }\n\n    return (\n        <div id={id} className={`modal ${buttons ? 'buttons' : ''}`}>\n            <div className=\"heading\">\n                <div className=\"title\"  style={topLeft ? { maxWidth: '360px' } : {}}>{ title }</div>\n                {topLeft && <div className=\"top-left\">{ topLeft }</div>}\n                {isCloseBtnShown ? (<div className=\"close\" onClick={onCloseModal}>\n                    <MdClose/>\n                </div>) : <></>}\n            </div>\n            <div className=\"content\">{ children }</div>\n            { buttons ? \n                <div className=\"buttons\">{ buttons }</div>\n            : null}\n        </div>\n    )\n}\n\nexport default Modal\n","import './Radios.scss'\n\nimport { useState } from 'react'\n\nconst Radios = ({ radios, defaultValue, onChange }) => {\n    const [currentValue, setCurrentValue] = useState(defaultValue || null)\n\n    const onSelect = value => {\n        setCurrentValue(value)\n        onChange && onChange(value)\n    }\n\n    return (\n        <div className=\"radios-container\">\n            {\n                radios.map(({label, value, disabled }, i) => (\n                    <div className={`radio-container ${value === currentValue ? 'active' : ''} ${disabled ? 'disabled' : ''}`} key={`radio-${i}`} onClick={() => !disabled && onSelect(value)}>\n                        <div className=\"radio\"></div>\n                        <label>{ label }</label>\n                    </div>\n                ))\n            }\n        </div>\n    )\n}\n\nexport default Radios","import { useCallback, useEffect, useState } from 'react'\nimport './Segments.scss'\n\nconst Segments = ({ small, defaultValue, segments, onChange, hidePrivateValue }) => {\n    const [value, setValue] = useState(defaultValue);\n\n    const setSegment = useCallback(value => {\n        setValue(value)\n        onChange(value)\n    }, [onChange])\n\n    useEffect(() => {\n        setSegment(defaultValue)\n    }, [defaultValue, setSegment])\n\n    return (\n        <div className={`segments ${small ? 'small': ''}`}>\n            {\n                segments.map(segment => (\n                    <div className={`segment ${segment.value === value ? 'active' : ''}`} key={segment.value} onClick={() => setSegment(segment.value)}>\n                        {\n                            segment.icon ?\n                                <div className=\"icon\">{ segment.icon }</div>\n                                :\n                                null\n                        }\n                        { segment.value }\n                    </div>\n                ))\n            }\n        </div>\n    )\n}\n\nexport default Segments","import './Select.scss';\n\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { BsChevronDown } from 'react-icons/bs'\nimport { CSSTransition } from 'react-transition-group';\nimport useOnClickOutside from 'hooks/onClickOutside';\nimport { TextInput } from 'components/common';\nimport { MdOutlineClose } from 'react-icons/md';\n\nconst Select = ({ children, native, monospace, searchable, disabled, label, defaultValue, items, onChange, className }) => {\n    const ref = useRef();\n    const hiddenTextInput = useRef();\n    const transitionRef = useRef();\n    const [isOpen, setOpen] = useState();\n    const [search, setSearch] = useState('');\n    const [selectedItem, setSelectedItem] = useState({\n        label: null,\n        value: null,\n        icon: null,\n    });\n    const [failedImg, setFailedImg] = useState([])\n\n    const filteredItems = search.length ? items.filter(({ label }) => label.toLowerCase().includes(search.toLowerCase())) : items\n\n    const selectItem = useCallback(item => {\n        setOpen(false)\n        setSearch('')\n        setSelectedItem(item);\n        onChange(item.value);\n    }, [onChange])\n\n    useEffect(() => {\n        const item = items.find(item => item.value === defaultValue) || items[0]\n        if (item && (selectedItem.value !== item.value)) selectItem(item)\n    }, [items, defaultValue, selectedItem, selectItem])\n\n    useEffect(() => {\n        if (!items.length) return setSelectedItem({})\n    }, [items])\n\n    useEffect(() => {\n        if (isOpen && searchable) {\n            hiddenTextInput.current.focus()\n            setSearch('')\n        }\n    }, [isOpen, searchable])\n\n    useOnClickOutside(ref, () => setOpen(false));\n\n    const getIcon = ({ icon, fallbackIcon, label }) => {\n        if (!icon) return null\n        const url = failedImg.includes(icon) && fallbackIcon ? fallbackIcon : icon\n        return (\n            failedImg.includes(url)\n                ? < div className=\"icon\" />\n                : <img\n                    className=\"icon\"\n                    src={url}\n                    draggable=\"false\"\n                    alt={label}\n                    onError={() => setFailedImg(failed => [...failed, url])}\n                />\n        )\n    }\n\n    return (\n        !native ?\n            <div className={`select ${monospace ? 'monospace' : ''} ${disabled ? 'disabled' : ''} ${searchable ? 'searchable' : ''} ${className || ''}`} ref={ref}>\n                {\n                    label ?\n                        <label>{label}</label>\n                        :\n                        null\n                }\n                {\n                    selectedItem ?\n                        <div className=\"select-container\">\n                            <div className=\"select-input\" onClick={() => setOpen(!isOpen)}>\n                                {getIcon(selectedItem)}\n                                <div className=\"label\">{selectedItem.label || selectedItem.value}</div>\n                                {selectedItem.extra && <div className=\"extra\">{selectedItem.extra}</div>}\n                                {/* <div className=\"separator\"></div> */}\n                                <div className={`handle ${isOpen ? 'open' : ''}`}>\n                                    <BsChevronDown size={20}></BsChevronDown>\n                                </div>\n                            </div>\n                            {\n                                <CSSTransition unmountOnExit in={isOpen} timeout={200} classNames=\"fade\" nodeRef={transitionRef}>\n                                    <div className=\"select-menu\" ref={transitionRef}>\n                                        {\n                                            searchable ?\n                                                <TextInput\n                                                    className=\"select-search-input\"\n                                                    disabled={disabled}\n                                                    placeholder=\"Search\"\n                                                    value={search}\n                                                    ref={hiddenTextInput}\n                                                    buttonLabel={search.length ? <MdOutlineClose /> : null}\n                                                    onInput={value => setSearch(value)}\n                                                    onButtonClick={() => setSearch('')}\n                                                />\n                                                :\n                                                null\n                                        }\n                                        {\n                                            filteredItems.map(item => (\n                                                <div\n                                                    className={`option ${item.value === selectedItem.value ? 'active' : ''} ${item.disabled ? disabled : ''}`}\n                                                    key={item.value}\n                                                    onClick={() => !item.disabled && selectItem(item)}\n                                                >\n                                                    {getIcon(item)}\n                                                    <div className=\"label\">{item.label || item.value}</div>\n                                                    {item.extra && <div className=\"extra\">{item.extra}</div>}\n                                                </div>\n                                            ))\n                                        }\n                                        {children}\n                                    </div>\n                                </CSSTransition>\n                            }\n                        </div>\n                        :\n                        null\n                }\n            </div>\n            :\n            <select className=\"select\" disabled={disabled} onChange={ev => onChange(ev.target.value)} defaultValue={defaultValue}>\n                {\n                    items.map(item => (\n                        <option key={item.value} value={item.value}>\n                            {item.label || item.value}\n                        </option>\n                    ))\n                }\n            </select>\n    );\n};\n\nexport default Select;","import './TextInput.scss'\n\nimport { forwardRef } from 'react';\nimport { MdContentCopy } from 'react-icons/md';\nimport { useToasts } from 'hooks/toasts';\n\nconst TextInput = forwardRef(({ value, className, title, pattern, autoComplete, required, minLength, maxLength, placeholder, info, label, buttonLabel, password, disabled, copy, small, onInput, onChange, onButtonClick, style }, ref) => {\n    const { addToast } = useToasts();\n\n    const onClick = async () => {\n        await navigator.clipboard.writeText(value);\n        addToast(\"Copied to clipboard!\");\n    };\n\n    return (\n        <div className={`text-input ${copy ? 'copy' : ''} ${small ? 'small' : ''} ${className}`}>\n            {\n                label ?\n                    <label>{ label }</label>\n                    :\n                    null\n            }\n            <div className=\"text-input-container\" onClick={copy ? onClick : null}>\n                <input\n                    value={value}\n                    title={title}\n                    pattern={pattern}\n                    autoComplete={autoComplete}\n                    required={required}\n                    minLength={minLength}\n                    maxLength={maxLength}\n                    type={password ? 'password' : 'text'}\n                    placeholder={placeholder}\n                    disabled={copy || disabled}\n                    onInput={ev => onInput && onInput(ev.target.value)}\n                    onChange={ev => onChange && onChange(ev.target.value)}\n                    ref={ref}\n                    style={style}\n                />\n                {\n                    copy ?\n                        <div className=\"button\">\n                            <MdContentCopy size={20}/>\n                        </div>\n                        :\n                        null\n                }\n                {\n                    buttonLabel ?\n                        <div className=\"button\" onClick={onButtonClick}>\n                            { buttonLabel }\n                        </div>\n                        :\n                        null\n                }\n            </div>\n            {\n                info ?\n                    <div className=\"info\">\n                        { info }\n                    </div>\n                    :\n                    null\n            }\n        </div>\n    )\n})\n\nexport default TextInput","import './NumberInput.scss'\n\nconst NumberInput = ({ disabled, precision, label, value, button, onButtonClick, onInput }) => {\n    const onInputValue = ({ target }) => {\n        if (!onInput) return\n        if (!target.value.length) return onInput('')\n\n        const afterDecimals = target.value.split('.')[1] \n        if (afterDecimals && afterDecimals.length > precision) return\n\n        const isIntOrFloat = /^[0-9]+\\.{0,1}[0-9]*$/g.test(target.value)\n        isIntOrFloat && onInput(target.value)\n    }\n\n    return (\n        <div className={`number-input ${disabled ? 'disabled' : ''}`}>\n            {\n                label ?\n                    <label>{ label }</label>\n                    :\n                    null\n            }\n            <div className=\"input\">\n                <input\n                    type=\"text\"\n                    disabled={disabled}\n                    value={value}\n                    onInput={onInputValue}\n                />\n                {\n                    button ?\n                        <div className=\"button\" onClick={onButtonClick}>\n                            { button }\n                        </div>\n                        :\n                        null\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default NumberInput","import './PasswordInput.scss'\n\nimport { forwardRef, useState } from 'react'\nimport { MdOutlineRemoveRedEye, MdRemoveRedEye } from 'react-icons/md'\n\nconst PasswordInput = forwardRef(({ label, placeholder, autoComplete, peakPassword, disabled, value, onInput, onChange }, ref) => {\n    const [showPassword, setShowPassword] = useState()\n\n    return (\n        <div className=\"password-input\">\n            {\n                label ?\n                    <label>{ label }</label>\n                    :\n                    null\n            }\n            <div className=\"input-container\">\n                <input\n                    value={value}\n                    autoComplete={autoComplete}\n                    type={!showPassword ? 'password' : 'text'}\n                    placeholder={placeholder}\n                    disabled={disabled}\n                    onInput={ev => onInput && onInput(ev.target.value)}\n                    onChange={ev => onChange && onChange(ev.target.value)}\n                    ref={ref}\n                />\n                {\n                    peakPassword ?\n                        !showPassword ?\n                            <div className=\"button\" onClick={() => setShowPassword(true)}>\n                                <MdOutlineRemoveRedEye size={20}/>\n                            </div>\n                            :\n                            <div className=\"button\" onClick={() => setShowPassword(false)}>\n                                <MdRemoveRedEye size={20}/>\n                            </div>\n                        :\n                        null\n                }\n            </div>\n        </div>\n    )\n})\n\nexport default PasswordInput","import './Toggle.scss'\n\nconst Toggle = ({ defaultChecked, checked, onChange }) => {\n    return (\n        <label className=\"toggle\">\n            <input type=\"checkbox\" defaultChecked={defaultChecked} checked={checked} onChange={onChange}/>\n            <span className=\"slider\"></span>\n        </label>\n    )\n}\n\nexport default Toggle","import { useState } from 'react';\nimport './ToolTip.scss'\n\nconst ToolTip = ({ children, label, disabled, className }) => {\n    const [mousePosition, setMousePosition] = useState({ x: 0, y: 0})\n\n    const screenBorder = 300\n    const margin = 15\n    const onMouseMove = ({ clientY, clientX }) => {\n        if (clientX > window.innerWidth - screenBorder) clientX = clientX - screenBorder\n        setMousePosition({ x: clientX + margin, y: clientY + margin })\n    }\n\n    const newLineText = text => {\n        return text.split('\\n').map((str, key) => <div key={key}>{str}</div>)\n    }\n\n    return (\n        <div\n            className={`tooltip ${className ? className : ''}`}\n            onMouseMove={onMouseMove}\n        >\n            { children }\n            {\n                !disabled ? \n                    <div className=\"tooltip-label\" style={{top: mousePosition.y, left: mousePosition.x}}>{ newLineText(label) }</div>\n                    :\n                    null\n            }\n        </div>\n    )\n}\n\nexport default ToolTip\n","import './NoFundsPlaceholder.scss'\n\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { NavLink } from 'react-router-dom'\nimport { Button } from 'components/common'\n\nconst NoFundsPlaceholder = () => {\n    return (\n        <div id=\"no-funds-placeholder\">\n            <label>You don't have any funds on this account.</label>\n            <NavLink to=\"/wallet/deposit\">\n                <Button small icon={<GiReceiveMoney/>}>Deposit</Button>\n            </NavLink>\n        </div>\n    )\n}\n\nexport default NoFundsPlaceholder","import './CountdownTimer.scss'\n\nimport { useState, useEffect } from 'react'\nimport { MdOutlineAvTimer } from 'react-icons/md'\n\nconst CountdownTimer = ({ seconds, setTimeIsUp }) => {\n    const [counter, setCounter] = useState(seconds)\n    const [timerFormatted, setTimerFormatted] = useState('')\n\n    const isTimeIsUp = timerFormatted === '0:00'\n    \n    useEffect(() => {\n        const timer =\n            counter > 0 && setInterval(() => setCounter(counter - 1), 1000)\n        const minutes = Math.floor(counter / 60)\n        let seconds = counter - minutes * 60\n        if (seconds < 10) {\n            seconds = `0${seconds}`\n        }\n\n        if (isTimeIsUp) setTimeIsUp(true)\n        setTimerFormatted(`${minutes}:${seconds}`)\n\n        return () => clearInterval(timer)\n    }, [counter, isTimeIsUp, setTimeIsUp])\n\n    return (\n        <div\n            id=\"countdown-timer\"\n            style={isTimeIsUp ? { color: 'red' } : {}}\n        >\n            <MdOutlineAvTimer /> {timerFormatted}\n        </div>\n    )\n}\n\nexport default CountdownTimer\n","import { useState, useRef } from 'react'\nimport accountPresets from 'consts/accountPresets'\nimport { Checkbox } from \"components/common\"\n\nexport default function LoginOrSignupForm({ action = 'LOGIN', onAccRequest, inProgress }) {\n    const passConfirmInput = useRef(null)\n    const [state, setState] = useState({\n      email: '', passphrase: '', passphraseConfirm: '', action\n    })\n    const onSubmit = e => {\n      e.preventDefault()\n      onAccRequest({\n        action: state.action,\n        accType: 'QUICK',\n        email: state.email,\n        passphrase: state.passphrase,\n        backupOptout: state.backupOptout,\n      })\n    }\n    const onUpdate = updates => {\n      const newState = { ...state, ...updates }\n      setState(newState)\n      const shouldValidate = newState.action === 'SIGNUP'\n      const invalid = shouldValidate && (\n        newState.passphrase !== newState.passphraseConfirm\n      )\n      // @TODO translation string\n      if (passConfirmInput.current) {\n          passConfirmInput.current.setCustomValidity(invalid ? 'Passwords must match' : '')\n      }\n    }\n    const minPwdLen = 8\n    const isSignup = state.action === 'SIGNUP'\n    const days = Math.ceil(accountPresets.quickAccTimelock / 86400)\n    const noBackupDisclaimer = `In case you forget your password or lose your backup, you will have to wait ${days} days and pay the recovery fee to restore access to your account.`\n    const additionalOnSignup = state.backupOptout ? (\n      <Checkbox label={noBackupDisclaimer} required={true}></Checkbox>\n    ) : (<></>)\n    const Link = ({ href, children }) => (<a href={href} target='_blank' rel='noreferrer' onClick={e => e.stopPropagation()}>{children}</a>)\n    const additionalInputs = isSignup ?\n      (<>\n        <input\n          type=\"password\"\n          required\n          minLength={minPwdLen}\n          placeholder=\"Password\"\n          value={state.passphrase}\n          onChange={e => onUpdate({ passphrase: e.target.value })}\n        ></input>\n        <input\n          ref={passConfirmInput}\n          required\n          minLength={minPwdLen}\n          type=\"password\"\n          placeholder=\"Confirm password\"\n          value={state.passphraseConfirm}\n          onChange={e => onUpdate({ passphraseConfirm: e.target.value })}></input>\n        <Checkbox\n          label={<>I agree to the <Link href='https://www.ambire.com/Ambire%20ToS%20and%20PP%20(26%20November%202021).pdf'>Terms of Service and Privacy policy</Link>.</>}\n          required={true}\n        ></Checkbox>\n        <Checkbox\n          label={<>Backup on <Link href='https://help.ambire.com/hc/en-us/articles/4410892186002-What-is-Ambire-Cloud-'>Ambire Cloud</Link>.</>}\n          checked={!state.backupOptout}\n          onChange={e => onUpdate({ backupOptout: !e.target.checked })}\n        ></Checkbox>\n        {additionalOnSignup}\n      </>) : (<></>)\n\n    return (\n      <form onSubmit={onSubmit}>\n        <input type=\"email\" required placeholder=\"Email\" value={state.email} onChange={e => onUpdate({ email: e.target.value })}></input>\n        {\n          // Trick the password manager into putting in the email\n          !isSignup ? (<input type=\"password\" style={{ display: \"none\" }}></input>): (<></>)\n        }\n        {additionalInputs}\n        <input type=\"submit\" disabled={inProgress} value={isSignup ?\n          (inProgress ? \"Signing up...\" : \"Sign up\")\n          : (inProgress ? \"Logging in...\" : \"Log in\")}></input>\n      </form>\n    )\n}\n","import './EmailLogin.scss'\n\nimport { useState, useEffect } from 'react'\nimport { MdEmail } from 'react-icons/md'\n\nimport { fetch, fetchCaught } from 'lib/fetch'\n\nimport LoginOrSignup from 'components/LoginOrSignupForm/LoginOrSignupForm'\nimport { useLocalStorage } from 'hooks'\n\n// NOTE: the same polling that we do here with the setEffect should be used for txns\n// that require email confirmation\nexport default function EmailLogin({ relayerURL, onAddAccount }) {\n    const [requiresEmailConfFor, setRequiresConfFor] = useState(null)\n    const [err, setErr] = useState('')\n    const [inProgress, setInProgress] = useState(false)\n    const [loginSessionKey, setLoginSessionKey, removeLoginSessionKey] = useLocalStorage({ key: 'loginSessionKey', isStringStorage: true })\n\n    const EMAIL_VERIFICATION_RECHECK = 3000\n\n    const attemptLogin = async ({ email, passphrase }, ignoreEmailConfirmationRequired) => {\n      // try by-email first: if this returns data we can just move on to decrypting\n      // does not matter which network we request\n      const { resp, body, errMsg } = await fetchCaught(`${relayerURL}/identity/by-email/${encodeURIComponent(email)}`, { headers: {\n          authorization: loginSessionKey ? `Bearer ${loginSessionKey}` : null\n      } })\n      if (errMsg) {\n        setErr(errMsg)\n        return\n      }\n\n      if (resp.status === 401 && body.errType === 'UNAUTHORIZED') {\n        if (ignoreEmailConfirmationRequired) {\n          // we still have to call this to make sure the state is consistent and to force a re-render (to trigger the effect again)\n          setRequiresConfFor({ email, passphrase })\n          return\n        }\n        const requestAuthResp = await fetch(`${relayerURL}/identity/by-email/${encodeURIComponent(email)}/request-confirm-login`, { method: 'POST' })\n        if (requestAuthResp.status !== 200) {\n          setErr(`Email confirmation needed but unable to request: ${requestAuthResp.status}`)\n          return\n        }\n        const loginSessionKey = (await requestAuthResp.json()).sessionKey\n        setLoginSessionKey(loginSessionKey)\n        setRequiresConfFor({ email, passphrase })\n        return\n      }\n      // If we make it beyond this point, it means no email confirmation will be required\n      if (resp.status === 404 && body.errType === 'DOES_NOT_EXIST') {\n        setRequiresConfFor(null)\n        setErr('Account does not exist')\n        return\n      }\n\n      if (resp.status === 200) {\n        const identityInfo = body\n        const { _id, salt, identityFactoryAddr, baseIdentityAddr, bytecode } = identityInfo\n        const { quickAccSigner, primaryKeyBackup } = identityInfo.meta\n\n        onAddAccount({\n          id: _id,\n          email: identityInfo.meta.email,\n          primaryKeyBackup,\n          salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n          signer: quickAccSigner\n        }, { select: true })\n\n        // Remove the key value so that it can't be used anymore on this browser\n        removeLoginSessionKey()\n      } else {\n        setErr(body.message ? `Relayer error: ${body.message}` : `Unknown no-message error: ${resp.status}`)\n      }\n      setRequiresConfFor(null)\n    }\n\n    const onLoginUserAction = async ({ email, passphrase }) => {\n      setErr('')\n      setRequiresConfFor(null)\n      setInProgress(true)\n      try {\n        await attemptLogin({ email, passphrase })\n      } catch (e) {\n          setErr(`Unexpected error: ${e.message || e}`)\n      }\n      setInProgress(false)\n    }\n\n    // try logging in once after EMAIL_VERIFICATION_RECHECK\n    useEffect(() => {\n      if (requiresEmailConfFor) {\n        const timer = setTimeout(async () => {\n            setInProgress(true)\n            await attemptLogin(requiresEmailConfFor, true)\n            setInProgress(false)\n        }, EMAIL_VERIFICATION_RECHECK)\n        return () => clearTimeout(timer)\n      }\n    })\n\n    // @TODO import from JSON; maybe without a URL, as we'll just pop a file selector and then import the JSON\n    const importJSONHref = `/#/json-import`\n\n    if (!relayerURL) {\n        return (<section className=\"loginSignupWrapper\" id=\"emailLoginSection\">\n            <div id=\"logo\"/>\n            <h3 className=\"error\">Email login not supported without the relayer.</h3>\n            <a href={importJSONHref}><button>Import JSON</button></a>\n        </section>)\n    }\n\n    const inner = requiresEmailConfFor ?\n      (<div id=\"loginEmail\" className=\"emailConf\">\n        <h3><MdEmail size={25} color=\"white\"/>Email confirmation required</h3>\n        <p>\n        We sent an email to {requiresEmailConfFor.email}, please check your inbox and click \"<b>Authorize New Device</b>\".\n        </p>\n        {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n      </div>)\n      : (<div id=\"loginEmail\">\n        <LoginOrSignup onAccRequest={onLoginUserAction} inProgress={inProgress}></LoginOrSignup>\n        <div className='magicLink'>A password will not be required, we will send a magic login link to your email.</div>\n\n        {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n\n        {/*<a href={importJSONHref}>Import JSON</a>*/}\n      </div>)\n\n    return (\n      <section className=\"loginSignupWrapper\" id=\"emailLoginSection\">\n      <div id=\"logo\"/>\n      {inner}\n    </section>\n    )\n  }\n","import { isFirefox } from 'lib/isFirefox'\n\nconst checkPermissions = async (name, onPrompt) => {\n    let status = false;\n\n    try {\n        const { state } = await navigator.permissions.query({\n            name,\n            allowWithoutGesture: false,\n        })\n        if (state === 'granted') return true\n        if (state === 'prompt') {\n            if (onPrompt) {\n                await onPrompt\n                return checkPermissions(name)\n            } else return false\n        }\n    } catch (e) {\n        console.error('Error while trying to query permissions', e)\n    }\n\n    return status;\n}\n\nconst checkClipboardPermission = (prompt = false) => isFirefox() ? false : prompt ? checkPermissions('clipboard-read', navigator.clipboard.readText()) : checkPermissions('clipboard-read')\nconst checkNotificationPermission = (prompt = false) => prompt ? checkPermissions('notifications', Notification.requestPermission()) : checkPermissions('notifications')\n\nconst askForPermission = async name => {\n    try {\n        if (name === 'clipboard-read') {\n            await navigator.clipboard.readText()\n            return true\n        }\n\n        if (name === 'notifications') {\n            const status = await Notification.requestPermission()\n            return status === 'granted' || status === 'default'\n        }\n\n        return false\n    } catch(e) {\n        console.error(`Permission ${name} blocked`);\n        return false\n    }\n}\n\nexport {\n    askForPermission,\n    checkClipboardPermission,\n    checkNotificationPermission\n}\n","import './PermissionsModal.scss'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { MdCheck, MdClose, MdOutlineCheck } from 'react-icons/md'\nimport { useModals, usePermissions } from 'hooks'\nimport { useToasts } from 'hooks/toasts'\nimport { askForPermission } from 'lib/permissions'\nimport { Modal, Toggle, Button, Checkbox, ToolTip } from 'components/common'\nimport { isFirefox } from 'lib/isFirefox'\nimport { fetchGet } from 'lib/fetch'\nimport { AiOutlineReload } from 'react-icons/ai'\nimport { BiExport } from 'react-icons/bi'\nimport accountPresets from 'consts/accountPresets'\n\nconst toastErrorMessage = name => `You blocked the ${name} permission. Check your browser permissions tab.`\n\nconst PermissionsModal = ({ relayerIdentityURL, account, onAddAccount, isCloseBtnShown, isBackupOptout }) => {\n    const { hideModal } = useModals()\n    const { isNoticationsGranted, isClipboardGranted, modalHidden, setModalHidden } = usePermissions()\n    const { addToast } = useToasts()\n    const [isEmailConfirmed, setEmailConfirmed] = useState(false)\n    const [isEmailResent, setEmailResent] = useState(false)\n    const [isJsonBackupDownloaded, setIsJsonBackupDownloaded] = useState(isBackupOptout)\n    const [resendTimeLeft, setResendTimeLeft] = useState(60000)\n\n    const days = Math.ceil(accountPresets.quickAccTimelock / 86400)\n    const areBlockedPermissions = (!isFirefox() && !isClipboardGranted) || !isNoticationsGranted\n    const isAccountNotConfirmed = account.emailConfRequired && !isEmailConfirmed\n    const buttonDisabled = isAccountNotConfirmed || (!modalHidden && areBlockedPermissions)\n    const sendConfirmationEmail = async () => {\n        try {\n            const response = await fetchGet(relayerIdentityURL + '/resend-verification-email')\n            if (!response.success) throw new Error('Relayer did not return success.')\n\n            addToast('Verification email sent!')\n            setEmailResent(true)\n        } catch(e) {\n            console.error(e)\n            addToast('Could not resend verification email.' + e.message || e, { error: true })\n            setEmailResent(false)\n        }\n    }\n    \n    const checkEmailConfirmation = useCallback(async () => {\n        try {\n            const identity = await fetchGet(relayerIdentityURL)\n            if (identity) {\n                const { emailConfirmed } = identity.meta\n                const isConfirmed = !!emailConfirmed\n                setEmailConfirmed(isConfirmed)\n\n                if (isConfirmed && account.emailConfRequired) {\n                    onAddAccount({\n                        ...account,\n                        emailConfRequired: false\n                    })\n                }\n            }\n        } catch(e) {\n            console.error(e);\n            addToast('Could not check email confirmation.', { error: true })\n        }\n    }, [relayerIdentityURL, account, onAddAccount, addToast])\n\n    const requestNotificationsPermission = async () => {\n        const status = await askForPermission('notifications')\n        if (!status) addToast(toastErrorMessage('Notifications'), { error: true })\n    }\n    \n    const requestClipboardPermission = async () => {\n        const status = await askForPermission('clipboard-read')\n        if (!status) addToast(toastErrorMessage('Clipboard'), { error: true })\n    }\n    \n    useEffect(() => {\n        !isEmailConfirmed && checkEmailConfirmation()\n        const emailConfirmationInterval = setInterval(() => !isEmailConfirmed && checkEmailConfirmation(), 3000)\n        return () => clearInterval(emailConfirmationInterval)\n    }, [isEmailConfirmed, checkEmailConfirmation])\n\n    const buttons = isJsonBackupDownloaded ? (<>\n        <Button clear small icon={<MdClose/>} disabled={isAccountNotConfirmed} onClick={hideModal}>Ignore</Button>\n        <Button small icon={<MdCheck/>} disabled={buttonDisabled} onClick={hideModal}>Done</Button>\n    </>) : (<>\n        <Button clear small icon={<MdClose/>} disabled={true} onClick={hideModal}>Ignore</Button>\n        <Button small icon={<MdCheck/>} disabled={true} onClick={hideModal}>Done</Button>\n    </>)\n\n    const downloadFile = ({ data, fileName, fileType }) => {\n        const blob = new Blob([data], { type: fileType })\n    \n        const a = document.createElement('a')\n        a.download = fileName\n        a.href = window.URL.createObjectURL(blob)\n        const clickEvt = new MouseEvent('click', {\n        view: window,\n        bubbles: true,\n        cancelable: true,\n        })\n        a.dispatchEvent(clickEvt)\n        a.remove()\n    }\n\n    const handleExportClicked = () => {\n        setIsJsonBackupDownloaded(true)\n        let copiedAcc = { ...account }\n        console.log('copiedAcc',copiedAcc)\n        if (typeof copiedAcc.emailConfRequired !== 'undefined') delete copiedAcc.emailConfRequired\n        if (typeof copiedAcc.backupOptout !== 'undefined') delete copiedAcc.backupOptout\n        if (typeof copiedAcc.cloudBackupOptout !== 'undefined') delete copiedAcc.cloudBackupOptout\n        \n        downloadFile({\n            data: JSON.stringify(copiedAcc),\n            fileName: `${copiedAcc.id}.json`,\n            fileType: 'text/json',\n        })\n        \n        onAddAccount({\n            ...account,\n            backupOptout: false\n        })\n    }\n\n    useEffect(() => {\n        const resendInterval = setInterval(() => setResendTimeLeft(resendTimeLeft => resendTimeLeft > 0 ? resendTimeLeft - 1000 : 0), 1000)\n        return () => clearTimeout(resendInterval)\n    }, [])\n\n    return (\n        <Modal id=\"permissions-modal\" title=\"We need a few things \" buttons={buttons} isCloseBtnShown={isCloseBtnShown}>\n            {\n                account.email ? \n                    <div className=\"permission\">\n                    <div className=\"details\">\n                        <div className=\"name\">Email Verification</div>\n                        <div className=\"description\">\n                            <b>Confirming your email is mandatory so that we can make sure your account can be recovered in case access is lost.</b>\n                            &nbsp;We already sent an email, please check your inbox.\n                        </div>\n                    </div>\n                    <div className=\"status\">\n                        { \n                            !isEmailConfirmed ?\n                                <label>Waiting for<br/>your confirmation</label>\n                                : \n                                <span className=\"check-icon\"><MdOutlineCheck/></span>\n                        }\n                        { \n                            !isEmailConfirmed && !isEmailResent ? \n                                <ToolTip label={`Will be available in ${resendTimeLeft / 1000} seconds`} disabled={resendTimeLeft === 0}>\n                                    <Button mini clear icon={<AiOutlineReload/>} disabled={resendTimeLeft !== 0} onClick={sendConfirmationEmail}>Resend</Button>\n                                </ToolTip>\n                                :\n                                null\n                        }\n                    </div>\n                </div>\n                :\n                null\n            }\n            <div className=\"permission\">\n                <div className=\"details\">\n                    <div className=\"name\">Notifications Permission</div>\n                    <div className=\"description\">\n                        Needed to draw your attention to Ambire Wallet when there is a transaction signing request.<br/>\n                        You can also click the notifications to go directly to the Ambire tab.<br/>\n                        We do not send any other notifications.\n                    </div>\n                </div>\n                <Toggle checked={isNoticationsGranted} onChange={() => requestNotificationsPermission()}/>\n            </div>\n            <div className={`permission ${isFirefox() ? 'disabled' : ''}`}>\n                <div className=\"details\">\n                    <div className=\"name\">Clipboard Permission { isFirefox() ? <span className=\"unavailable\">(Unavailable in Firefox)</span> : null }</div>\n                    <div className=\"description\">\n                        Needed so that dApps can be connected automatically just by copying their WalletConnect URL.\n                    </div>\n                    { \n                        isFirefox() ? \n                            <div className=\"unavailable\">\n                                Without this, you can still use Ambire, but you will have to paste URLs manually\n                            </div> : null\n                    }\n                </div>\n                <Toggle checked={isClipboardGranted} onChange={() => requestClipboardPermission()}/>\n            </div>\n            {!isBackupOptout && <div className=\"permission\">\n                <div className=\"details\">\n                    <div className=\"name\">Download a backup</div>\n                    <div className=\"description\">\n                        In case you forget your password or lose your backup, <br/>\n                        you will have to wait {days} days and pay the recovery fee to restore access to your account.\n                    </div>\n                </div>\n                <div className=\"status\">\n                    {isJsonBackupDownloaded ? \n                        (<span className=\"check-icon\"><MdOutlineCheck/></span>) : \n                        (<Button onClick={handleExportClicked} icon={<BiExport/>}>Export</Button>)\n                    }\n                </div>\n            </div>}\n            {isAccountNotConfirmed\n                ? (<></>)\n                // Not gonna show this at all if the email is not confirmed\n                : (<Checkbox\n                    label=\"I understand, do not show this again.\"\n                    checked={modalHidden}\n                    onChange={({ target }) => setModalHidden(target.checked)}/>)\n            }\n        </Modal>\n    )\n}\n\nexport default PermissionsModal\n","import './InputModal.scss'\n\nimport { createRef, useState } from 'react'\nimport { MdCheck, MdClose } from 'react-icons/md'\nimport { useModals } from 'hooks'\nimport { Modal, TextInput, Button } from \"components/common\"\n\nconst InputModal = ({ title, inputs, onClose }) => {\n    const { hideModal } = useModals()\n    const [isDisabled, setDisabled] = useState(true)\n\n    const inputsFields = inputs.map(input => ({ ...input, ref: createRef() }))\n\n    const onInput = () => {\n        const isFormValid = inputsFields\n            .map(({ ref, validate }) => ref.current.value && (validate ? validate(ref.current.value) : true))\n            .every(v => v === true)\n        setDisabled(!isFormValid)\n    }\n\n    const onConfirm = () => {\n        const values = inputsFields.map(({ ref }) => ref.current.value)\n        onClose && onClose(values)\n        hideModal()\n    }\n\n    const buttons = <>\n        <Button clear small icon={<MdClose/>} onClick={hideModal}>Cancel</Button>\n        <Button small icon={<MdCheck/>} disabled={isDisabled} onClick={onConfirm}>Confirm</Button>\n    </>\n\n    return (\n        <Modal id=\"input-modal\" title={title} buttons={buttons}>\n            {\n                inputsFields.map(({ id, label, placeholder, ref }) => (\n                    <TextInput key={id || label} label={label} placeholder={placeholder} onInput={onInput} ref={ref}/>\n                ))\n            }\n        </Modal>\n    )\n}\n\nexport default InputModal ","import './SelectSignerAccountModal.scss'\n\nimport { useState } from 'react'\nimport { useModals } from 'hooks'\nimport { Modal, Button } from 'components/common'\nimport { HiOutlineExternalLink } from 'react-icons/hi'\nimport { MdKeyboardArrowLeft, MdKeyboardArrowRight } from 'react-icons/md'\n\nconst SelectSignerAccountModal = ({\n  signersToChoose,\n  onSignerAddressClicked,\n  selectedNetwork = { explorerUrl: 'https://etherscan.io' },\n  description = '',\n  isCloseBtnShown = true\n}) => {\n  const { hideModal } = useModals()\n  const [currentPage, setCurrentPage] = useState(0)\n\n  const paginate = (arr, size) => {\n    return arr.reduce((acc, val, i) => {\n      let idx = Math.floor(i / size)\n      let page = acc[idx] || (acc[idx] = [])\n      page.push(val)\n\n      return acc\n    }, [])\n  }\n\n  let pages = []\n  const pageSize = 5\n\n  pages = paginate(signersToChoose, pageSize)\n\n  const nextPage = () => {\n    if (currentPage === pages.length - 1) return\n    setCurrentPage(prevState => prevState + 1)\n  }\n\n  const prevPage = () => {\n    if (currentPage === 0) return\n    setCurrentPage(prevState => prevState - 1)\n  }\n\n  const formatAddress = addr => {\n    return addr.slice(0, 5) + '...' + addr.slice(addr.length - 4, addr.length)\n  }\n\n  const prevBtnDisabled = currentPage === 0\n  const nextBtnDisabled = currentPage === pages.length - 1\n\n  const onAddressClicked = (addr, index) => {\n    onSignerAddressClicked({\n      address: addr,\n      index: index,\n    })\n\n    hideModal()\n  }\n\n  return (\n    <Modal id=\"select-signer-modal\" title=\"Select a signer account\" isCloseBtnShown={isCloseBtnShown}>\n      <div className=\"intro\">{description}</div>\n      <div className=\"loginSignupWrapper chooseSigners\">\n        <ul id=\"signersToChoose\">\n          {signersToChoose\n            ? pages[currentPage].map((addr, index) => (\n                <li\n                  key={addr}\n                  className={!(index % 2) ? ' odd-rows-bg' : ''}\n                  onClick={() =>\n                    onAddressClicked(addr, currentPage * pageSize + index)\n                  }\n                >\n                  <span className=\"index-row\">\n                    {currentPage * pageSize + index + 1}\n                  </span>\n                  <span>\n                    {formatAddress(addr)}\n                  </span>\n                  <a\n                    href={selectedNetwork.explorerUrl + '/address/' + addr}\n                    target='_blank'\n                    rel='noreferrer'\n                    onClick={e => e.stopPropagation()}\n                  >\n                    <HiOutlineExternalLink size={25} />\n                  </a>\n                </li>\n              ))\n            : null}\n        </ul>\n        <div className=\"pages\">\n          {currentPage + 1}/{pages.length}\n        </div>\n        <div className=\"buttons\">\n          <Button disabled={prevBtnDisabled} icon={<MdKeyboardArrowLeft/>} small clear type=\"button\" onClick={prevPage}>\n            Previous page\n          </Button>\n          <Button disabled={nextBtnDisabled} iconAfter={<MdKeyboardArrowRight/>} small clear type=\"button\" onClick={nextPage}>\n            Next page\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  )\n}\n\nexport default SelectSignerAccountModal\n","import { Bundle } from 'adex-protocol-eth'\nimport { Interface, keccak256, AbiCoder } from 'ethers/lib/utils'\nimport accountPresets from 'consts/accountPresets'\n\nconst IDENTITY_INTERFACE = new Interface(require('adex-protocol-eth/abi/Identity5.2'))\nconst { quickAccManager } = accountPresets\n\nconst buildRecoveryBundle = (identity, network, signer, newValues) => {\n    const abiCoder = new AbiCoder()\n    const { timelock, one, two } = newValues.signer\n    const newQuickAccHash = keccak256(abiCoder.encode(['tuple(uint, address, address)'], [[timelock, one, two]]))\n\n    return new Bundle({\n        identity,\n        network,\n        signer,\n        txns: [[\n            identity,\n            '0x00',\n            IDENTITY_INTERFACE.encodeFunctionData('setAddrPrivilege', [\n                quickAccManager,\n                newQuickAccHash,\n            ]),\n        ]],\n        recoveryMode: newValues\n    })\n}\n\nexport default buildRecoveryBundle","import './ResetPasswordModal.scss'\n\nimport { Wallet } from 'ethers'\nimport { id } from 'ethers/lib/utils'\nimport { useState, useMemo, createRef, useEffect, useCallback } from 'react'\nimport { Modal, Radios, Checkbox, Button, ToolTip, Loading, PasswordInput } from 'components/common'\nimport { MdOutlineCheck, MdOutlineClose, MdOutlineHelpOutline } from 'react-icons/md'\nimport { useModals } from 'hooks'\nimport { useToasts } from 'hooks/toasts'\nimport accountPresets from 'consts/accountPresets'\nimport { fetchPost } from 'lib/fetch'\nimport buildRecoveryBundle from 'lib/recoveryBundle'\n\nconst ResetPassword = ({ account, selectedNetwork, relayerURL, onAddAccount, showSendTxns }) => {\n    const { hideModal } = useModals()\n    const { addToast } = useToasts()\n\n    const [isLoading, setLoading] = useState(false)\n    const [type, setType] = useState(null)\n    const [oldPassword, setOldPassword] = useState('')\n    const [newPassword, setNewPassword] = useState('')\n    const [newPasswordConfirm, setNewPasswordConfirm] = useState('')\n    const [disabled, setDisabled] = useState(true)\n\n    const [passwordsMustMatchWarning, setPasswordsMustMatchWarning] = useState(false)\n    const [passwordsLengthWarning, setPasswordsLengthWarning] = useState(false)\n    \n    const radios = useMemo(() => [\n        {\n            label: 'Change the password on this device and Ambire Cloud. Best if you just want to routinely change the password.',\n            value: 'change',\n            disabled: !account.primaryKeyBackup\n        },\n        {\n            label: 'Reset the key and password: takes 3 days. Chose this if you\\'ve forgotten the old password.',\n            value: 'reset'\n        }\n    ], [account.primaryKeyBackup])\n\n    const checkboxes = useMemo(() => ([\n        [\n            {\n                label: \n                    <>\n                        I understand the following: the new password will be required for subsequent logins, but places where you're already logged in will work with the old password until you re-login.\n                        <ToolTip\n                            label=\"This is because, for security reasons, the encrypted key is retrieved only when logging in, so we have no way of forcing every device to update it.\n                            If you want to disable access for other devices, consider the next option.\">\n                            <MdOutlineHelpOutline/>\n                        </ToolTip>\n                    </>,\n                ref: createRef()\n            }\n        ],\n        [\n            {\n                label: <>\n                    I understand I am only changing the password on the {selectedNetwork.name} network.\n                    <ToolTip\n                        label=\"You will be able to trigger the change for other networks by switching the network\">\n                        <MdOutlineHelpOutline/>\n                    </ToolTip>\n                </>,\n                ref: createRef()\n            },\n            {\n                label: 'I understand I need to wait for 3 days for the change to be finalized.',\n                ref: createRef()\n            }\n        ]\n    ]), [selectedNetwork.name])\n\n    const onRadioChange = value => {\n        setType(value)\n        setOldPassword('')\n        setNewPassword('')\n        setNewPasswordConfirm('')\n        setPasswordsMustMatchWarning(false)\n        setPasswordsLengthWarning(false)\n    }\n\n    const changePassword = async () => {\n        setLoading(true)\n        // let react do one tick of rerendering before we block on .encrypt/.signMessage\n        await new Promise(resolve => setTimeout(resolve))\n\n        try {\n            const wallet = await Wallet.fromEncryptedJson(JSON.parse(account.primaryKeyBackup), oldPassword)\n            const primaryKeyBackup = JSON.stringify(await wallet.encrypt(newPassword, accountPresets.encryptionOpts))\n            const sig = await wallet.signMessage(JSON.stringify({ primaryKeyBackup }))\n            const resp = await fetchPost(`${relayerURL}/identity/${account.id}/modify`, { primaryKeyBackup, sig })\n\n            if (resp.success) {\n                onAddAccount({ ...account, primaryKeyBackup })\n                addToast('You password was successfully updated')\n                setLoading(false)\n                hideModal()\n            } else {\n                throw new Error(`Unable to update account: ${resp.message || 'unknown error'}`)\n            }\n        } catch(e) {\n            console.error(e)\n            addToast('Changing password error: '+(e.message || e), { error: true })\n        }\n\n        setLoading(false)\n    }\n\n    const resetPassword = async () => {\n        setLoading(true)\n        // let react do one tick of rerendering before we block on .encrypt/.signMessage\n        await new Promise(resolve => setTimeout(resolve))\n\n        try {\n            // @TODO: move extraEntropy to a util\n            const extraEntropy = id(account.email + ':' + Date.now() + ':' + Math.random() + ':' + (typeof performance === 'object' && performance.now()))\n            const firstKeyWallet = Wallet.createRandom({ extraEntropy })\n\n            const { quickAccManager, quickAccTimelock, encryptionOpts } = accountPresets\n            const signer = {\n                quickAccManager,\n                timelock: quickAccTimelock,\n                one: firstKeyWallet.address,\n                two: account.signer.two,\n                preRecovery: account.signer\n            }\n\n            const primaryKeyBackup = JSON.stringify(await firstKeyWallet.encrypt(newPassword, encryptionOpts))\n\n            const bundle = buildRecoveryBundle(account.id, selectedNetwork.id, signer.preRecovery, { signer, primaryKeyBackup })\n            hideModal()\n            showSendTxns(bundle)\n            onAddAccount({\n                ...account,\n                primaryKeyBackup,\n                signer,\n                preRecoveryPrimaryKeyBackup: account.primaryKeyBackup\n            }, { select: true })\n        } catch(e) {\n            console.error(e);\n            addToast('Reset password error: ' + (e.message || e), { error: true })\n        }\n\n        setLoading(false)\n    }\n\n    const validateForm = useCallback(() => {\n        const arePasswordsMatching = newPassword === newPasswordConfirm\n        let areFieldsNotEmpty = false\n        let isLengthValid = false\n        let areCheckboxesChecked = false\n        \n        if (type === 'change') {\n            areFieldsNotEmpty = oldPassword.length && newPassword.length && newPasswordConfirm.length\n            isLengthValid = oldPassword.length >= 8 && newPassword.length >= 8 && newPasswordConfirm.length >= 8\n            areCheckboxesChecked = checkboxes[0].every(({ ref }) => ref.current && ref.current.checked)\n        }\n\n        if (type === 'reset') {\n            areFieldsNotEmpty = newPassword.length && newPasswordConfirm.length\n            isLengthValid = newPassword.length >= 8 && newPasswordConfirm.length >= 8\n            areCheckboxesChecked = checkboxes[1].every(({ ref }) => ref.current && ref.current.checked)\n        }\n\n        setDisabled(!isLengthValid || !arePasswordsMatching || !areCheckboxesChecked)\n\n        if (areFieldsNotEmpty) {\n            setPasswordsLengthWarning(!isLengthValid)\n            setPasswordsMustMatchWarning(!arePasswordsMatching)\n        } else {\n            setPasswordsLengthWarning(false)\n            setPasswordsMustMatchWarning(false)\n        }\n    }, [checkboxes, type, oldPassword, newPassword, newPasswordConfirm])\n\n    useEffect(() => validateForm(), [isLoading, validateForm, oldPassword, newPassword, newPasswordConfirm])\n\n    const modalButtons = <>\n        <Button icon={<MdOutlineClose/>} clear onClick={() => hideModal()}>Cancel</Button>\n        <Button icon={<MdOutlineCheck/>} disabled={disabled} onClick={() => type === 'change' ? changePassword(): resetPassword()}>Confirm</Button>\n    </>\n\n    return (\n        <Modal id=\"reset-password-modal\" title=\"Reset Password\" buttons={modalButtons}>\n            {\n                isLoading ?\n                    <div id=\"loading-overlay\">\n                        <Loading/>\n                    </div>\n                    :\n                    null\n            }\n            <Radios radios={radios} onChange={onRadioChange}/>\n            {\n                type === 'change' ?\n                    <form>\n                        <PasswordInput autocomplete=\"current-password\" placeholder=\"Old Password\" onInput={value => setOldPassword(value)}/>\n                        <PasswordInput peakPassword autocomplete=\"new-password\" placeholder=\"New Password\" onInput={value => setNewPassword(value)}/>\n                        <PasswordInput autocomplete=\"new-password\" placeholder=\"Confirm New Password\" onInput={value => setNewPasswordConfirm(value)}/>\n                        {\n                            checkboxes[0].map(({ label, ref }, i) => (\n                                <Checkbox key={`checkbox-${i}`} ref={ref} label={label} onChange={() => validateForm()}/>\n                            ))\n                        }\n                    </form> : null\n            }\n            {\n                type === 'reset' ?\n                    <form>\n                        <PasswordInput peakPassword autocomplete=\"new-password\" placeholder=\"New Password\" onInput={value => setNewPassword(value)}/>\n                        <PasswordInput autocomplete=\"new-password\" placeholder=\"Confirm New Password\" onInput={value => setNewPasswordConfirm(value)}/>\n                        {\n                            checkboxes[1].map(({ label, ref }, i) => (\n                                <Checkbox key={`checkbox-${i}`} ref={ref} label={label} onChange={() => validateForm()}/>\n                            ))\n                        }\n                    </form> : null\n            }\n            <div id=\"warnings\">\n                {\n                    passwordsMustMatchWarning ?\n                        <div className=\"warning\">Passwords must match</div> : null\n                }\n                {\n                    passwordsLengthWarning ?\n                        <div className=\"warning\">Password length must be greater than 8 characters</div> : null\n                }\n            </div>\n        </Modal>\n    )\n}\n\nexport default ResetPassword","import './WalletTokenModal.scss'\n\nimport { useEffect, useMemo, useState, useCallback } from 'react'\nimport { Button, Modal, ToolTip } from 'components/common'\nimport { MdOutlineClose } from 'react-icons/md'\nimport { useModals } from 'hooks'\nimport WalletStakingPoolABI from 'consts/WalletStakingPoolABI'\nimport { getProvider } from 'lib/provider'\nimport { formatUnits, Interface } from 'ethers/lib/utils'\nimport { Contract } from 'ethers'\n\nconst WALLET_STAKING_ADDRESS = '0x47cd7e91c3cbaaf266369fe8518345fc4fc12935'\nconst WALLET_STAKING_POOL_INTERFACE = new Interface(WalletStakingPoolABI)\n\nconst provider = getProvider('ethereum')\nconst stakingWalletContract = new Contract(WALLET_STAKING_ADDRESS, WALLET_STAKING_POOL_INTERFACE, provider)\n\nconst multiplierBadges = [\n    {\n        id: 'beta-tester',\n        name: 'Beta Testers',\n        icon: '',\n        color: '#6000FF',\n        multiplier: 1.25,\n        link: 'https://blog.ambire.com/announcing-the-wallet-token-a137aeda9747'\n    },\n    {\n        id: 'lobsters',\n        name: 'Lobsters',\n        icon: '',\n        color: '#E82949',\n        multiplier: 1.50,\n        link: 'https://blog.ambire.com/ambire-wallet-to-partner-with-lobsterdao-10b57e6da0-53c59c88726b'\n    }\n]\nconst MultiplierBadges = ({ rewards }) => {\n    // Multiplier badges\n    const badges = useMemo(() => multiplierBadges.map(badge => {\n        const isUnlocked = rewards.multipliers && rewards.multipliers.map(({ name }) => name).includes(badge.id)\n        return {\n            ...badge,\n            active: isUnlocked\n        }\n    }), [rewards])\n\n    return (<div className=\"badges\">\n        {\n            badges.map(({ id, name, icon, color, multiplier, link, active }) => (\n                <a href={link} target=\"_blank\" rel=\"noreferrer\" key={id}>\n                    <ToolTip label={`You ${active ? 'are receiving' : 'do not have'} the ${name} x${multiplier} multiplier`}>\n                        <div className={`badge ${active ? 'active' : ''}`} style={{ backgroundColor: color, borderColor: color }}>\n                            <div className=\"icon\">{ icon }</div>\n                            <div className=\"multiplier\">x { multiplier }</div>\n                        </div>\n                    </ToolTip>\n                </a>\n            ))\n        }\n    </div>)\n}\n\nconst WalletTokenModal = ({ accountId, claimableWalletToken, rewards }) => {\n    const { hideModal } = useModals()\n\n    const {\n        vestingEntry,\n        currentClaimStatus,\n        claimableNow,\n        disabledReason,\n        claimDisabledReason,\n        claimEarlyRewards,\n        claimVesting\n    } = claimableWalletToken\n\n    const walletTokenAPY = rewards.walletTokenAPY ? (rewards.walletTokenAPY * 100).toFixed(2) : '...'\n    const adxTokenAPY = rewards.adxTokenAPY ? (rewards.adxTokenAPY * 100).toFixed(2) : '...'\n    const xWALLETAPY = rewards.xWALLETAPY ? (rewards.xWALLETAPY * 100).toFixed(2) : '...'\n    const walletTokenUSDPrice = rewards.walletUsdPrice || 0\n\n    const claimableNowUsd = walletTokenUSDPrice && !currentClaimStatus.loading && claimableNow ? (walletTokenUSDPrice * claimableNow).toFixed(2) : '...'\n    const mintableVestingUsd = walletTokenUSDPrice && !currentClaimStatus.loading && currentClaimStatus.mintableVesting ? (walletTokenUSDPrice * currentClaimStatus.mintableVesting).toFixed(2) : '...'\n\n    const claimeWithBurnNotice = 'This procedure will claim 70% of your outstanding rewards as $WALLET, and permanently burn the other 30%'\n    const claimWithBurn = () => {\n        const confirmed = window.confirm(`${claimeWithBurnNotice}. Are you sure?`)\n        if (confirmed) claimEarlyRewards(false)\n    }\n\n    const [stakedAmount, setStakedAmount] = useState(0)\n\n    const fetchStakedWalletData = useCallback(async () => {\n        try {\n            const [balanceOf, shareValue] = await Promise.all([\n                stakingWalletContract.balanceOf(accountId),\n                stakingWalletContract.shareValue(),\n            ])\n\n            const stakedAmount = formatUnits(balanceOf.toString(), 18).toString() * formatUnits(shareValue, 18).toString()\n            setStakedAmount(stakedAmount)\n        } catch(e) {\n            console.error(e)\n        }\n    }, [accountId])\n\n    useEffect(() => fetchStakedWalletData(), [fetchStakedWalletData])\n\n    const modalButtons = <>\n        <Button clear icon={<MdOutlineClose/>} onClick={() => hideModal()}>Close</Button>\n    </>\n    return (\n        <Modal id=\"wallet-token-modal\" title=\"WALLET token distribution\" buttons={modalButtons}>\n            <div className=\"item\">\n                <div className=\"details\">\n                    <label>Early users Incentive: Total</label>\n                    <div className=\"balance\">\n                        <div className=\"amount\"><span className=\"primary-accent\">{ rewards['balance-rewards'] }</span></div>\n                        <div className=\"amount apy\">{ walletTokenAPY } % <span>APY</span></div>\n                    </div>\n                </div>\n                <div className=\"actions\">\n                    { /* claimButton */ }\n                </div>\n            </div>\n            {/* <div className=\"item\">\n                <div className=\"details\">\n                    <label>Referral Incentive</label>\n                    <div className=\"balance\">\n                        <div className=\"amount\"><span className=\"primary-accent\">0</span></div>\n                        <div className=\"amount-dollar\"><span className=\"secondary-accent\">$</span> 0</div>\n                    </div>\n                </div>\n                <div className=\"actions\">\n                    { claimButton }\n                </div>\n            </div> */}\n            <div className=\"item\">\n                <div className=\"details\">\n                    <label>ADX Staking Bonus: Total</label>\n                    <div className=\"balance\">\n                        <div className=\"amount\"><span className=\"primary-accent\">{ rewards['adx-rewards'] }</span></div>\n                        <div className=\"amount apy\">{ adxTokenAPY } % <span>APY</span></div>\n                    </div>\n                </div>\n                <div className=\"actions\">\n                    { /* claimButton */ }\n                </div>\n            </div>\n\n            <div className=\"item\">\n                <div className=\"details\">\n                    <label>Claimable now: early users + ADX Staking bonus</label>\n                    <div className=\"balance\">\n                        <div className=\"amount\"><span className=\"primary-accent\">{\n                            currentClaimStatus.loading ? '...' : claimableNow\n                        }</span></div>\n                        <div className=\"amount usd\">\n                            <span className=\"secondary-accent\">$</span>\n                            { claimableNowUsd }\n                        </div>\n                    </div>\n                </div>\n                <div className=\"actions\">\n                    <ToolTip label={\n                            claimDisabledReason || disabledReason || claimeWithBurnNotice\n                        }>\n                        <Button className=\"claim-rewards-with-burn\" small clear onClick={() => claimWithBurn()} disabled={!!(claimDisabledReason || disabledReason)}>Claim with burn</Button>\n                    </ToolTip>\n\n                    <ToolTip label={\n                            claimDisabledReason || disabledReason || 'Claim all of your outstanding rewards as staked $WALLET (xWALLET)'\n                        }>\n                        <Button className=\"claim-rewards-x-wallet\" small clear onClick={claimEarlyRewards} disabled={!!(claimDisabledReason || disabledReason)}>CLAIM IN xWALLET</Button>\n                    </ToolTip>\n                </div>\n            </div>\n\n            {!!currentClaimStatus.mintableVesting && !!vestingEntry && (\n            <div className=\"item\">\n                <div className=\"details\">\n                    <label>Claimable early supporters vesting</label>\n                    <div className=\"balance\">\n                        <div className=\"amount\"><span className=\"primary-accent\">{\n                            currentClaimStatus.mintableVesting\n                        }</span></div>\n                        <div className=\"amount usd\">\n                            <span className=\"secondary-accent\">$</span>\n                            { mintableVestingUsd }\n                        </div>\n                    </div>\n                </div>\n                <div className=\"actions\">\n                    <ToolTip label={\n                            disabledReason || `Linearly vested over approximately ${Math.ceil((vestingEntry.end - vestingEntry.start) / 86400)} days`\n                        }>\n                        <Button small clear onClick={claimVesting} disabled={!!disabledReason}>CLAIM</Button>\n                    </ToolTip>\n                </div>\n            </div>\n            )}\n\n            {!!stakedAmount && (\n                <div className=\"item\">\n                    <div className=\"details\">\n                        <label>Staked WALLET</label>\n                        <div className=\"balance\">\n                            <div className=\"amount\"><span className=\"primary-accent\">\n                                { stakedAmount }\n                            </span></div>\n                            <div className=\"amount apy\">{ xWALLETAPY } % <span>APY</span></div>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            <MultiplierBadges rewards={rewards}/>\n            <div id=\"info\">\n                You are receiving $WALLETS for holding funds on your Ambire wallet as an early user. <a href=\"https://blog.ambire.com/announcing-the-wallet-token-a137aeda9747\" target=\"_blank\" rel=\"noreferrer\">Read More</a>\n            </div>\n        </Modal>\n    )\n}\n\nexport default WalletTokenModal\n","import './AddTokenModal.scss'\n\nimport { Contract } from 'ethers';\nimport { formatUnits, Interface } from 'ethers/lib/utils';\nimport ERC20ABI from 'adex-protocol-eth/abi/ERC20'\nimport { isValidAddress } from 'lib/address';\nimport { Button, Loading, Modal, TextInput } from 'components/common'\nimport { useState } from 'react';\nimport { useToasts } from 'hooks/toasts';\nimport { MdOutlineAdd, MdOutlineClose, MdOutlineRemove } from 'react-icons/md';\nimport { useModals } from 'hooks';\nimport { getProvider } from 'lib/provider'\nimport { getTokenIcon } from 'lib/icons'\n\nconst ERC20Interface = new Interface(ERC20ABI)\n\nconst AddTokenModal = ({ network, account, portfolio }) => {\n    const { addToast } = useToasts()\n    const { hideModal } = useModals()\n\n    const { extraTokens, onAddExtraToken, onRemoveExtraToken } = portfolio\n\n    const [loading, setLoading] = useState(false)\n    const [tokenDetails, setTokenDetails] = useState(null)\n    const [showError, setShowError] = useState(false)\n\n    const disabled = !tokenDetails || !(tokenDetails.symbol && tokenDetails.decimals)\n\n    const onInput = async address => {\n        setTokenDetails(null)\n\n        if (!isValidAddress(address)) return \n        setLoading(true)\n        setShowError(false)\n\n        try {\n            const provider = getProvider(network.id)\n            const tokenContract = new Contract(address, ERC20Interface, provider)\n            \n            const [balanceOf, name, symbol, decimals] = await Promise.all([\n                tokenContract.balanceOf(account),\n                tokenContract.name(),\n                tokenContract.symbol(),\n                tokenContract.decimals()\n            ])\n\n            const balance = formatUnits(balanceOf, decimals)\n            setTokenDetails({\n                account,\n                address: address.toLowerCase(),\n                network: network.id,\n                balance,\n                balanceRaw: balanceOf.toString(),\n                tokenImageUrl: getTokenIcon(network.id, address),\n                name,\n                symbol,\n                decimals\n            })\n        } catch(e) {\n            console.error(e)\n            addToast('Failed to load token info', { error: true })\n            setShowError(true)\n        }\n\n        setLoading(false)\n    }\n\n    const addToken = () => {\n        onAddExtraToken(tokenDetails)\n        hideModal()\n    }\n\n    const removeToken = address => {\n        onRemoveExtraToken(address)\n        hideModal()\n    }\n\n    const buttons = <>\n        <Button clear icon={<MdOutlineClose/>} onClick={() => hideModal()}>Close</Button>\n        <Button icon={<MdOutlineAdd/>} disabled={disabled} onClick={addToken}>Add</Button>\n    </>\n    const tokenStandard = network.id === 'binance-smart-chain' ? 'a BEP20' : (\n        network.id === 'ethereum'\n            ? 'an ERC20'\n            : 'a valid'\n    )\n\n    return (\n        <Modal id=\"add-token-modal\" title=\"Add Token\" buttons={buttons}>\n            <TextInput\n                label=\"Token Address\"\n                placeholder=\"0x...\"\n                onInput={value => onInput(value)}\n            />\n            {\n                showError ? \n                    <div className=\"validation-error\">\n                        The address you entered does not appear to correspond to {tokenStandard} token on { network.name }.\n                    </div>\n                    :\n                    null\n            }\n            {\n                loading ?\n                    <Loading/>\n                    :\n                        !showError && tokenDetails ? \n                            <div className=\"token-details\">\n                                <div className=\"info\">\n                                    <div className=\"icon\" style={{backgroundImage: `url(${tokenDetails.icon})`}}/>\n                                    <div className=\"name\">\n                                        { tokenDetails.name } <span>({ tokenDetails.symbol }) {tokenDetails.network.toUpperCase()}</span>\n                                    </div>\n                                </div>\n                                <div className=\"balance\">\n                                    Balance: <span>{ tokenDetails.balance }</span> <b>{ tokenDetails.symbol }</b>\n                                </div>\n                            </div>\n                            :\n                            null\n            }\n            <div className=\"extra-tokens-list\">\n                {\n                    extraTokens.map(({ address, name, symbol, tokenImageUrl, network }) => (\n                        <div className=\"extra-token\" key={address}>\n                            <div className=\"info\">\n                                <div className=\"icon\" style={{ backgroundImage: `url(${tokenImageUrl})` }}/>\n                                <div className=\"name\">{ name } <span>({ symbol }) {network.toUpperCase()}</span></div>\n                            </div>\n                            <div className=\"actions\">\n                                <Button mini clear onClick={() => removeToken(address)}>\n                                    <MdOutlineRemove/>\n                                </Button>\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </Modal>\n    )\n}\n\nexport default AddTokenModal","import { Client } from 'gridplus-sdk'\nimport { ethers } from 'ethers'\nimport { serialize } from '@ethersproject/transactions'\n\nconst crypto = require('crypto')\nconst HARDENED_OFFSET = 0x80000000\n\nconst getAddressesReqOpts = {\n    startPath: [\n        HARDENED_OFFSET + 44,\n        HARDENED_OFFSET + 60,\n        HARDENED_OFFSET,\n        0,\n        0,\n    ],\n    n: 10,\n}\n\nconst latticeInit = commKey => {\n    const clientConfig = {\n        name: 'Ambire Wallet',\n        crypto: crypto,\n        privKey: commKey,\n    }\n\n    return new Client(clientConfig)\n}\n\nconst latticeConnect = async(client, deviceId) => {\n    try {\n        const isPaired = await new Promise((resolve, reject) => {\n            client.connect(deviceId, (err, isPaired) => {\n                if (err) {\n                    reject(`Lattice connect: ${err} Or check if the DeviceID is correct.`)\n                    return\n                }\n                \n                resolve({ isPaired: !!isPaired, errConnect: false })\n            })\n        })\n        \n        return isPaired\n    } catch (err) {\n        console.error(err)\n\n        return { isPaired: false, errConnect: err }\n    }\n}\n\nconst latticePair = async(client, secret) => {\n    try {\n        const hasActiveWallet = await new Promise((resolve, reject) => {\n            client.pair(secret, (err, hasActiveWallet) => {\n                if (err) {\n                    reject(`Lattice connect: ${err}`)\n                    return\n                }\n                \n                resolve({ hasActiveWallet, errPair: false })\n            })\n        })\n        \n        return hasActiveWallet\n    } catch (err) {\n        console.error(err)\n        return { hasActiveWallet: false, errPair: err }\n    }\n}\n\nconst latticeGetAddresses = async client => {\n    try {\n        const res = await new Promise((resolve, reject) => {\n            client.getAddresses(getAddressesReqOpts, (err, res) => {\n                if (err) {\n                    reject(`Lattice get addresses: ${err}`)\n                    return\n                }\n\n                if (!res) throw new Error('Lattice could not get the addresses.')\n\n                resolve({res, errGetAddresses: false })\n            })\n        })\n\n        return res\n    } catch (err) {\n        console.error(err)\n        return { res: null, errGetAddresses: err }\n    }\n}\n\nconst latticeSignMessage = async(client, hash) => {\n    const dataMsg = {\n        protocol: 'signPersonal',\n        payload: ethers.utils.hexlify(hash),\n        signerPath: [HARDENED_OFFSET+44, HARDENED_OFFSET+60, HARDENED_OFFSET, 0, 0],\n    }\n\n    const signOptsMsg = {\n        currency: 'ETH_MSG',\n        data: dataMsg,\n    }\n\n    try {\n        const sign = await new Promise((resolve, reject) => {\n            client.sign(signOptsMsg, (err, signedTx) => {\n                if (err) {\n                    reject(err)\n                    return\n                }\n\n                if (!signedTx) throw new Error('Lattice could not sign the message.')\n                \n                resolve({ signedMsg: '0x' + signedTx.sig.r + signedTx.sig.s + signedTx.sig.v[0].toString(16), errSignMessage: false })  \n            })\n        })\n\n        return sign\n    } catch (err) {\n        console.error(err)\n        return { signedMsg: null, errSignMessage: err }\n    }\n}\n\nconst latticeSignTransaction = async(client, txn, chainId) => {\n    const { to, data, gas, gasPrice, nonce } = txn\n    const unsignedTxObj = {\n        ...txn,\n        gasLimit: txn.gasLimit || txn.gas,\n        chainId\n    }\n    delete unsignedTxObj.from\n    delete unsignedTxObj.gas\n\n    const txData = {\n        nonce,\n        gasLimit: gas,\n        gasPrice,\n        to,\n        value: 0,\n        data,\n        // -- m/44'/60'/0'/0/0\n        signerPath: [HARDENED_OFFSET+44, HARDENED_OFFSET+60, HARDENED_OFFSET, 0, 0],\n        chainId,\n        useEIP155: true,\n    }\n\n    const signOpts = {\n        currency: 'ETH',\n        data: txData,\n    }\n\n    try {\n        const signTx = await new Promise((resolve, reject) => {\n            client.sign(signOpts, (err, signedTx) => {\n                if (err) {\n                    reject(err)\n                    return\n                }\n\n                if (!signedTx) throw new Error('Lattice could not sign the message.')\n                \n                delete unsignedTxObj.v\n                const serializedSigned = serialize(unsignedTxObj, {\n                    r: '0x' + signedTx.sig.r,\n                    s: '0x' + signedTx.sig.s,\n                    v: signedTx.sig.v[0].toString(16)\n                })\n                \n                resolve({ serializedSigned, errSignTxn: false })\n            })\n        })\n\n        return signTx\n    } catch (err) {\n        console.error(err)\n        return { serializedSigned: null, errSignTxn: err }\n    }\n}\n\nexport { \n    latticeInit,\n    latticeConnect,\n    latticePair,\n    latticeGetAddresses,\n    latticeSignMessage,\n    latticeSignTransaction\n }\n","import './LatticeModal.scss'\n\nimport { Modal, Button, TextInput, Loading } from 'components/common'\nimport { useState, useEffect, useRef } from 'react'\nimport { useToasts } from 'hooks/toasts'\nimport { latticeInit, \n    latticeConnect, \n    latticePair, \n    latticeGetAddresses \n} from 'lib/lattice'\nimport crypto from 'crypto'\n\nconst SECRET_LENGTH = 8\nconst DEVICE_ID_LENGTH = 6\nconst commKey = crypto.randomBytes(32).toString('hex')\n\nconst LatticeModal = ({ addresses }) => {\n    const { addToast } = useToasts()\n    const [isLoading, setLoading] = useState(false)\n    const [deviceId, setDeviceId] = useState('')\n    const [isSecretFieldShown, setIsSecretFieldShown] = useState(false)\n    const [promiseResolve, setPromiseResolve] = useState(null)\n    const inputSecretRef = useRef(null)\n    \n    useEffect(()=> {\n        if (isSecretFieldShown) inputSecretRef.current.focus()\n    }, [isSecretFieldShown])\n\n    const client = latticeInit(commKey)\n\n    const connectToDevice = async () => {\n        setLoading(prevState => !prevState)\n\n        const { isPaired, errConnect } = await latticeConnect(client, deviceId)\n        if (errConnect) {\n            setLoading(prevState => !prevState)\n            addToast(`Lattice: ${errConnect} Or check if the Device ID is correct.`, { error: true })\n            return\n        }\n\n        if (!isPaired) {\n            setIsSecretFieldShown(prevState => !prevState)\n\n            const enteredSecret = await new Promise((resolve, reject) => { setPromiseResolve(() => resolve) })\n            if (enteredSecret !== '') { \n                setIsSecretFieldShown(prevState => !prevState)\n\n                const { hasActiveWallet, errPair } = await latticePair(client, enteredSecret)\n                if (errPair) {\n                    setLoading(prevState => !prevState)\n                    addToast(errPair, { error: true })\n                    return\n                }\n\n                if (!hasActiveWallet)  {\n                    addToast('Lattice has no active wallet!')\n                    return\n                }\n\n                const { res, errGetAddresses } = await latticeGetAddresses(client)\n                if (errGetAddresses) {\n                    setLoading(prevState => !prevState)\n                    addToast(errGetAddresses, {error: true})\n                    return\n                }\n\n                if (!!res) {\n                    addresses({ addresses: res, deviceId, commKey, isPaired: true })\n                    setLoading(false)\n                } \n            }\n        } else {\n            const { res, errGetAddresses } = await latticeGetAddresses(client)\n            if (errGetAddresses) {\n                setLoading(false)\n                addToast(`Lattice: ${errGetAddresses}`, { error: true })\n                return \n            }\n\n            if (!!res) {\n                addresses({ addresses: res, deviceId, commKey, isPaired: true })\n                setLoading(false)\n            }\n        }\n    }\n\n    const handleInputSecret = e => {\n        const inputSecret = e.toUpperCase()\n        \n        if (inputSecret.length === SECRET_LENGTH) {\n            promiseResolve(inputSecret)\n        } \n    }\n\n    const handleInputDeviceId = e => {\n        if (e.length === DEVICE_ID_LENGTH) {\n            setDeviceId(e)\n        }\n    }\n\n    return (\n        <Modal title=\"Connect to Lattice Device\">\n            <div id=\"grid-plus\">\n                <div>\n                    <p>\n                        The device ID is listed on your Lattice under{' '}\n                        <strong>Settings</strong>.\n                    </p>\n                    <h4>Device ID</h4>\n                    <TextInput\n                        disabled={isSecretFieldShown}\n                        placeholder=\"Enter the device ID\"\n                        onInput={value => handleInputDeviceId(value)}\n                    />\n                    {isSecretFieldShown && (\n                        <>\n                            <h4>Secret</h4>\n                            <TextInput\n                                ref={inputSecretRef}\n                                placeholder=\"Enter secret\"\n                                style={{ textTransform:'uppercase' }}\n                                onInput={value => handleInputSecret(value)}\n                            />\n                        </>\n                    )}\n                    {(isLoading && !isSecretFieldShown) ? (\n                        <>\n                            <h3>It may takes a while.</h3>\n                            <h3>Please wait...</h3>\n                        </>\n                    ) : (\n                        <></>\n                    )}\n                    <div className=\"buttons\">\n                        {!isLoading ? (\n                            <Button onClick={connectToDevice}>\n                                Connect to Wallet\n                            </Button>\n                        ) : (\n                            <Button disabled>\n                                <Loading />\n                            </Button>\n                        )}\n                    </div>\n                </div>\n            </div>\n        </Modal>\n    )\n}\n\nexport default LatticeModal\n","import { Button, Checkbox, Modal } from 'components/common'\nimport { useModals } from 'hooks'\nimport { useState } from 'react'\nimport { MdBrokenImage, MdClose } from 'react-icons/md'\nimport './UnsupportedDAppsModal.scss'\n\nconst UnsupportedDAppsModal = ({ connections, disconnect, advancedModeList, onContinue }) => {\n    const { hideModal } = useModals()\n    const [advancedMode, setAdvancedMode] = useState(false)\n\n    const handleCancel = () => {\n        connections.map(({ uri }) => disconnect(uri))\n        hideModal()\n    }\n\n    const handleContinue = () => {\n        onContinue([\n            ...advancedModeList,\n            ...connections.map(({ session }) => session.peerMeta.url)\n        ])\n        hideModal()\n    }\n\n    const buttons = <>\n        <Button clear icon={<MdClose/>} onClick={handleCancel}>Cancel</Button>\n        <Button disabled={!advancedMode} onClick={handleContinue}>Continue</Button>\n    </>\n\n    return (\n        <Modal\n            id=\"unsupported-dapps\"\n            title=\"Unsupported dApps\"\n            buttons={buttons}\n            isCloseBtnShown={false}\n        >\n            <div className='message'>\n                These dApps does not fully support smart wallets and/or WalletConnect:\n            </div>\n\n            <div className='dapps-list'>\n                {\n                    connections.map(({ session }, i) => (\n                        <a className='dapp' key={`dapp-${i}`} href={session.peerMeta.url} target=\"_blank\" rel=\"noreferrer\">\n                            <div className='icon' style={{ backgroundImage: `url(${session.peerMeta.icons[0]})` }}>\n                                <MdBrokenImage/>\n                            </div>\n                            <div className='name'>{ session.peerMeta.name }</div>\n                        </a>\n                    ))\n                }\n            </div>\n\n            <div className='message'>\n                For more information on why these dApps do not support Ambire, please read <a href='https://help.ambire.com/hc/en-us/articles/4415496135698-Which-dApps-are-supported-by-Ambire-Wallet-' target='_blank' rel='noreferrer'>this article</a>.\n\t    </div>\n            <div className='separator'/>\n\n            <div className='advanced-mode'>\n                <label className='advanced-mode-label'>Advanced mode:</label>\n                <Checkbox label=\"I know what I'm doing and I accept the risks\" checked={advancedMode} onChange={({ target }) => setAdvancedMode(target.checked)}/>\n            </div>\n        </Modal>\n    )\n}\n\nexport default UnsupportedDAppsModal\n","import './HideTokenModal.scss'\n\nimport { isValidAddress } from 'lib/address'\nimport { Button, Loading, Modal, TextInput } from 'components/common'\nimport { useState } from 'react'\nimport { MdVisibilityOff, MdOutlineClose, MdOutlineRemove } from 'react-icons/md'\nimport { useModals } from 'hooks'\nimport { useToasts } from 'hooks/toasts'\n\nconst ADDRESS_LENGTH = 42\nconst TOKEN_SYMBOL_MIN_LENGTH = 3\n\nconst HideTokenModel = ({ network, account, portfolio }) => {\n    const { hideModal } = useModals()\n    const { addToast } = useToasts()\n    const { hiddenTokens, onAddHiddenToken, onRemoveHiddenToken, tokens } = portfolio\n    const [loading, setLoading] = useState(false)\n    const [tokenDetails, setTokenDetails] = useState(null)\n    const [showError, setShowError] = useState(false)\n\n    const disabled = !tokenDetails\n\n    const onInput = addressOrSymbol => {\n        setTokenDetails(null)\n        setLoading(true)\n        setShowError(false)\n\n        if (addressOrSymbol.length === ADDRESS_LENGTH && !isValidAddress(addressOrSymbol)) addToast(`Invalid address: ${addressOrSymbol}`, {error: true})\n        const foundByAddressOrSymbol = tokens.find(i => (i.symbol.toLowerCase() === addressOrSymbol.toLowerCase()) ||\n            (i.address.toLowerCase() === addressOrSymbol.toLowerCase()))\n\n        if (!!foundByAddressOrSymbol) setTokenDetails(foundByAddressOrSymbol)\n        else if (addressOrSymbol.length >= TOKEN_SYMBOL_MIN_LENGTH) setShowError(true) \n \n        setLoading(false)\n    }\n\n    const addToken = () => {\n        onAddHiddenToken(tokenDetails)\n        hideModal()\n    }\n\n    const removeToken = address => {\n        onRemoveHiddenToken(address)\n        hideModal()\n    }\n\n    const buttons = <>\n        <Button clear icon={<MdOutlineClose/>} onClick={() => hideModal()}>Close</Button>\n        <Button icon={<MdVisibilityOff/>} disabled={disabled} onClick={addToken}>Hide</Button>\n    </>\n\n    return (\n        <Modal id=\"hide-token-modal\" title=\"Hide Token\" buttons={buttons}>\n            <TextInput\n                label=\"Token Address or Symbol\"\n                placeholder=\"Input token address or symbol\"\n                onInput={value => onInput(value)}\n            />\n            {showError && \n                (<div className=\"validation-error\">The address/symbol you entered does not appear to correspond to you assets list or it's already hidden.</div>)\n            }\n            {\n                loading ?\n                    <Loading/>\n                    :\n                        !showError && tokenDetails ? \n                            <div className=\"token-details\">\n                                <div className=\"info\">\n                                    <div className=\"icon\" style={{backgroundImage: `url(${tokenDetails.tokenImageUrl})`}}/>\n                                    <div className=\"name\"><span>{tokenDetails.symbol} ({tokenDetails.network.toUpperCase()})</span>\n                                    </div>\n                                </div>\n                                <div className=\"balance\">\n                                    Balance: <span>{ tokenDetails.balance }</span> <b>{ tokenDetails.symbol }</b>\n                                </div>\n                            </div>\n                            :\n                            null\n            }\n            <div className=\"extra-tokens-list\">\n                {\n                    hiddenTokens.map(({ address, symbol, tokenImageUrl, network }) => (\n                        <div className=\"extra-token\" key={address}>\n                            <div className=\"info\">\n                                <div className=\"icon\" style={{ backgroundImage: `url(${tokenImageUrl})` }}/>\n                                <div className=\"name\"><span>{ symbol } ({network.toUpperCase()})</span></div>\n                            </div>\n                            <div className=\"actions\">\n                                <Button mini clear onClick={() => removeToken(address)}>\n                                    <MdOutlineRemove/>\n                                </Button>\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </Modal>\n    )\n}\n\nexport default HideTokenModel","import './AmbireEarnDetailsModal.scss'\n\nimport { MdClose } from 'react-icons/md'\nimport { useModals } from 'hooks'\nimport { Modal, Button } from 'components/common'\nimport { ToolTip } from 'components/common' \nimport { useAmbireEarnDetails } from 'hooks'\nimport { Loading } from 'components/common'\n\nconst AmbireEarnDetailsModal = ({ title = 'Details', apy, accountId, msToDaysHours, addresses, tokenLabel }) => {\n    const { hideModal } = useModals()\n    \n    const { \n        details,\n        isLoading\n        } = useAmbireEarnDetails({accountId, addresses, tokenLabel})\n\n    const { \n        poolShare, \n        allTimeRewards, \n        totalDeposit, \n        totalWithdraws, \n        pendingToUnlock, \n        readyToWithdraw, \n        totalOutTokenValue,\n        totalInTokenValue,\n        rageLeavesReceivedWalletTotal,\n        rageLeavesWithdrawnWalletTotal,\n        totalSharesInTransfersWalletValue,\n        totalSharesOutTransfersWalletValue,\n        remainingTime, \n        currentBalanceWalletAtCurrentShareValue\n    } = details\n    const buttons = (<Button clear small icon={<MdClose />} onClick={hideModal}>Close</Button>)\n   \n    return (\n        <Modal id=\"wallet-more-details-modal\" title={title} buttons={buttons}>\n           {isLoading ? (\n           <>\n                <div className=\"wrapper\">\n                    <div>Annual Percentage Yield (APY)</div><div>{apy}%</div>\n                </div>\n                <div className=\"wrapper odd-rows-bg\">\n                    <div>Current Available Balance</div>\n                    <div>\n                        <ToolTip label=\"* Warning: The pool share value may includes your pending to unlock tokens.\">\n                            {parseFloat(currentBalanceWalletAtCurrentShareValue).toFixed(4)} {tokenLabel} (Pool share*: {(poolShare * 100).toFixed(2)}%)\n                        </ToolTip>\n                    </div>\n                </div>\n                <div className=\"wrapper\">\n                    <div>All time rewards</div><div>{parseFloat(allTimeRewards).toFixed(4)} {tokenLabel}</div>\n                </div>\n                <div className=\"wrapper odd-rows-bg\">\n                    <ToolTip label={`Deposits: ${parseFloat(totalDeposit).toFixed(4)} ${tokenLabel} \n                                    \\nTransfers in: ${parseFloat(totalSharesInTransfersWalletValue).toFixed(4)} ${tokenLabel}`}>\n                        <div>Total deposit</div><div>{parseFloat(totalInTokenValue).toFixed(4)} {tokenLabel}</div>\n                    </ToolTip>\n                </div>\n                <div className=\"wrapper\">\n                <ToolTip label={`Withdraws: ${parseFloat(totalWithdraws).toFixed(4)} ${tokenLabel}\n                                \\nTransfers out: ${parseFloat(totalSharesOutTransfersWalletValue).toFixed(4)} ${tokenLabel} \n                                \\nRage leaves: \n                                \\nReceived ${parseFloat(rageLeavesReceivedWalletTotal).toFixed(4)} ${tokenLabel} \n                                \\nWithdrawn ${parseFloat(rageLeavesWithdrawnWalletTotal).toFixed(4)} ${tokenLabel}`}>\n                    <div>Total withdraws</div><div>{parseFloat(totalOutTokenValue).toFixed(4)} {tokenLabel}</div>\n                </ToolTip>\n                </div>\n                <div className=\"wrapper odd-rows-bg\">\n                    <div>Total pending to unlock</div>\n                    <div>\n                        {remainingTime > 0 \n                            ? `${msToDaysHours(remainingTime)} until ${parseFloat(pendingToUnlock).toFixed(4)} ${tokenLabel} becomes available for withdraw.` \n                            : 'No pending unlocks'}\n                    </div>\n                </div>\n                <div className=\"wrapper\">\n                    <div>Ready to withdraw</div>\n                    <div>\n                        {parseFloat(readyToWithdraw) > 0 \n                        ? `${parseFloat(readyToWithdraw).toFixed(4)} ${tokenLabel}`\n                        : 'No amount for withdrawing'}\n                    </div>\n                </div>\n            </>): <div className='loading-wrapper'><Loading/></div>}\n        </Modal>\n    )\n}\n\nexport default AmbireEarnDetailsModal\n","import './EarnDetailsModal.scss'\n\nimport { MdClose } from 'react-icons/md'\nimport { useModals } from 'hooks'\nimport { Modal, Button } from 'components/common'\n\nconst EarnDetailsModal = ({ title = 'Details', description = '' }) => {\n    const { hideModal } = useModals()\n    const buttons = (<Button clear small icon={<MdClose />} onClick={hideModal}>Close</Button>)\n   \n    return (\n        <Modal id=\"wallet-more-details-modal\" title={title} buttons={buttons}>\n            <p>{description}</p>\n        </Modal>\n    )\n}\n\nexport default EarnDetailsModal\n","import { getAddress, hexDataLength } from 'ethers/lib/utils'\n\nconst NUMBER_STRING_REGEX = /^([0-9]+\\.?[0-9]*)$/\nconst HEX_DATA_LENGTH = 32\nconst TIME_LOCK_NUMBER_LENGTH = 6\nconst MAX_FILE_SIZE = 3072\nconst NEEDED_KEYS = [\n  'salt',\n  'identityFactoryAddr',\n  'baseIdentityAddr',\n  'bytecode',\n  'signer',\n]\n\nconst validateImportedAccountProps = acc => {\n  if (!(acc && validateAccountProps(acc))) {\n    return {\n      success: false,\n      message: 'The imported file does not contain needed account data.',\n    }\n  }\n\n  if (!(acc.id && isValidAddress(acc.id))) {\n    return { \n      success: false, \n      message: 'Failed to import JSON file: invalid id' \n    }\n  }\n\n  if (!(acc.signer && isValidAddress(acc.signer.address || acc.signer.quickAccManager))) {\n    return {\n      success: false,\n      message: 'JSON file: invalid signer address',\n    }\n  }\n\n  if (acc.signer.quickAccManager) {\n    if (!(acc.signer.timelock && isValidTimeLock(acc.signer.timelock))) {\n      return {\n        success: false,\n        message: 'Failed to import JSON file: invalid signer timelock',\n      }\n    }\n\n    if (!(acc.signer.one && isValidAddress(acc.signer.one))) {\n      return {\n        success: false,\n        message: 'Failed to import JSON file: invalid signer one',\n      }\n    }\n\n    if (!(acc.signer.two && isValidAddress(acc.signer.two))) {\n      return {\n        success: false,\n        message: 'Failed to import JSON file: invalid signer two',\n      }\n    }\n  }\n\n  if (!(acc.salt && isValidSalt(acc.salt))) {\n    return { success: false, message: 'JSON file: invalid salt' }\n  }\n\n  if (!(acc.identityFactoryAddr && isValidAddress(acc.identityFactoryAddr))) {\n    return {\n      success: false,\n      message: 'JSON file: invalid identity Factory Address',\n    }\n  }\n\n  if (!(acc.baseIdentityAddr && isValidAddress(acc.baseIdentityAddr))) {\n    return {\n      success: false,\n      message: 'JSON file: invalid base Identity Address',\n    }\n  }\n\n  return { success: true }\n}\n\nconst isValidAddress = addr => {\n  try {\n    return getAddress(addr) === addr\n  } catch (e) {\n    return false\n  }\n}\n\nconst isValidTimeLock = timelock => {\n  return NUMBER_STRING_REGEX.test(timelock) && timelock.toString().length === TIME_LOCK_NUMBER_LENGTH\n}\nconst isValidSalt = salt => hexDataLength(salt) === HEX_DATA_LENGTH\nconst validateAccountProps = acc => NEEDED_KEYS.every(key => Object.keys(acc).includes(key))\nconst fileSizeValidator = file => {\n  if (file.size > MAX_FILE_SIZE) {\n    return {\n      code: \"file-size-too-large\",\n      message: `The file size is larger than ${(MAX_FILE_SIZE / 1024).toFixed(2)} KB.`\n    }\n  }\n\n  return null\n}\n\n\nexport {\n  validateImportedAccountProps,\n  fileSizeValidator\n}\n","import './AddAccount.scss'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { Link } from 'react-router-dom'\nimport LoginOrSignup from 'components/LoginOrSignupForm/LoginOrSignupForm'\nimport TrezorConnect from 'trezor-connect'\nimport { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { hexZeroPad, AbiCoder, keccak256, id, getAddress } from 'ethers/lib/utils'\nimport { Wallet } from 'ethers'\nimport { generateAddress2 } from 'ethereumjs-util'\nimport { getProxyDeployBytecode } from 'adex-protocol-eth/js/IdentityProxyDeploy'\nimport { fetch, fetchPost } from 'lib/fetch'\nimport accountPresets from 'consts/accountPresets'\nimport { useToasts } from 'hooks/toasts'\nimport { SelectSignerAccountModal } from 'components/Modals'\nimport { useModals } from 'hooks'\nimport { Loading } from 'components/common'\nimport { ledgerGetAddresses, PARENT_HD_PATH } from 'lib/ledgerWebHID'\nimport { isFirefox } from 'lib/isFirefox'\nimport { VscJson } from 'react-icons/vsc'\nimport { useDropzone } from 'react-dropzone'\nimport { validateImportedAccountProps, fileSizeValidator } from 'lib/validations/importedAccountValidations'\nimport { LatticeModal } from 'components/Modals'\n\nTrezorConnect.manifest({\n  email: 'contactus@ambire.com',\n  appUrl: 'https://www.ambire.com'\n})\n\nexport default function AddAccount({ relayerURL, onAddAccount }) {\n  const [signersToChoose, setChooseSigners] = useState(null)\n  const [err, setErr] = useState('')\n  const [addAccErr, setAddAccErr] = useState('')\n  const [inProgress, setInProgress] = useState(false)\n  const { addToast } = useToasts()\n  const { showModal } = useModals()\n\n  const wrapProgress = async (fn, type = true) => {\n    setInProgress(type)\n    try {\n      await fn()\n    } catch (e) {\n      console.error(e)\n      setAddAccErr(`Unexpected error: ${e.message || e}`)\n    }\n    setInProgress(false)\n  }\n\n  const wrapErr = async fn => {\n    setAddAccErr('')\n    try {\n      await fn()\n    } catch (e) {\n      console.error(e)\n      setInProgress(false)\n      setAddAccErr(`Unexpected error: ${e.message || e}`)\n    }\n  }\n\n  const createQuickAcc = async (req) => {\n    setErr('')\n\n    // async hack to let React run a tick so it can re-render before the blocking Wallet.createRandom()\n    await new Promise(resolve => setTimeout(resolve, 0))\n\n    const extraEntropy = id(req.email + ':' + Date.now() + ':' + Math.random() + ':' + (typeof performance === 'object' && performance.now()))\n    const firstKeyWallet = Wallet.createRandom({ extraEntropy })\n    // 6 words is 2048**6\n    const secondKeySecret = Wallet.createRandom({ extraEntropy }).mnemonic.phrase.split(' ').slice(0, 6).join(' ') + ' ' + req.email\n\n    const secondKeyResp = await fetchPost(`${relayerURL}/second-key`, { secondKeySecret })\n    if (!secondKeyResp.address) throw new Error(`second-key returned no address, error: ${secondKeyResp.message || secondKeyResp}`)\n\n    const { salt, baseIdentityAddr, identityFactoryAddr, quickAccManager, quickAccTimelock } = accountPresets\n    const quickAccountTuple = [quickAccTimelock, firstKeyWallet.address, secondKeyResp.address]\n    const signer = {\n      quickAccManager,\n      timelock: quickAccountTuple[0],\n      one: quickAccountTuple[1],\n      two: quickAccountTuple[2]\n    }\n    const abiCoder = new AbiCoder()\n    const accHash = keccak256(abiCoder.encode(['tuple(uint, address, address)'], [quickAccountTuple]))\n    const privileges = [[quickAccManager, accHash]]\n    const bytecode = getProxyDeployBytecode(baseIdentityAddr, privileges, { privSlot: 0 })\n    const identityAddr = getAddress('0x' + generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex'))\n    const primaryKeyBackup = JSON.stringify(\n      await firstKeyWallet.encrypt(req.passphrase, accountPresets.encryptionOpts)\n    )\n\n    const createResp = await fetchPost(`${relayerURL}/identity/${identityAddr}`, {\n      email: req.email,\n      primaryKeyBackup: req.backupOptout ? undefined : primaryKeyBackup,\n      secondKeySecret,\n      salt, identityFactoryAddr, baseIdentityAddr,\n      privileges,\n      quickAccSigner: signer\n    })\n    if (createResp.message === 'EMAIL_ALREADY_USED') {\n      setErr('An account with this email already exists')\n      return\n    }\n    if (!createResp.success) {\n      console.log(createResp)\n      setErr(`Unexpected sign up error: ${createResp.message || 'unknown'}`)\n      return\n    }\n\n    onAddAccount({\n      id: identityAddr,\n      email: req.email,\n      primaryKeyBackup,\n      salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n      signer,\n      cloudBackupOptout: !!req.backupOptout,\n      // This makes the modal appear, and will be removed by the modal which will call onAddAccount to update it\n      backupOptout: !!req.backupOptout,\n      // This makes the modal appear, and will be removed by the modal which will call onAddAccount to update it\n      emailConfRequired: true\n    }, { select: true, isNew: true })\n  }\n\n  // EOA implementations\n  // Add or create accounts from Trezor/Ledger/Metamask/etc.\n  const createFromEOA = useCallback(async (addr, signerType) => {\n    const privileges = [[getAddress(addr), hexZeroPad('0x01', 32)]]\n    const { salt, baseIdentityAddr, identityFactoryAddr } = accountPresets\n    const bytecode = getProxyDeployBytecode(baseIdentityAddr, privileges, { privSlot: 0 })\n    const identityAddr = getAddress('0x' + generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex'))\n\n    if (relayerURL) {\n      const createResp = await fetchPost(`${relayerURL}/identity/${identityAddr}`, {\n        salt, identityFactoryAddr, baseIdentityAddr,\n        privileges,\n        signerType\n      })\n      if (!createResp.success && !(createResp.message && createResp.message.includes('already exists'))) throw createResp\n    }\n\n    return {\n      id: identityAddr,\n      salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n      signer: { address: getAddress(addr) }\n    }\n  }, [relayerURL])\n\n  async function connectWeb3AndGetAccounts() {\n    if (typeof window.ethereum === 'undefined') {\n      throw new Error('MetaMask not available')\n    }\n    const ethereum = window.ethereum\n    const web3Accs = await ethereum.request({ method: 'eth_requestAccounts' })\n    if (!web3Accs.length) throw new Error('No accounts connected')\n    if (web3Accs.length === 1) return onEOASelected(web3Accs[0], {type: 'Web3'})\n\n    setChooseSigners({ addresses: web3Accs, signerName: 'Web3' })\n  }\n\n  const getAccountByAddr = useCallback(async (idAddr, signerAddr) => {\n    // In principle, we need these values to be able to operate in relayerless mode,\n    // so we just store them in all cases\n    // Plus, in the future this call may be used to retrieve other things\n    const { salt, identityFactoryAddr, baseIdentityAddr, bytecode } = await fetch(`${relayerURL}/identity/${idAddr}`)\n      .then(r => r.json())\n    if (!(salt && identityFactoryAddr && baseIdentityAddr && bytecode)) throw new Error(`Incomplete data from relayer for ${idAddr}`)\n    return {\n      id: idAddr,\n      salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n      signer: { address: signerAddr }\n    }\n  }, [relayerURL])\n\n  const getOwnedByEOAs = useCallback(async (eoas) => {\n    let allUniqueOwned = {}\n\n    await Promise.all(eoas.map(\n      async signerAddr => {\n        const resp = await fetch(`${relayerURL}/identity/any/by-owner/${signerAddr}?includeFormerlyOwned=true`)\n        const privEntries = Object.entries(await resp.json())\n        // discard the privileges value, we do not need it as we wanna add all accounts EVER owned by this eoa\n        privEntries.forEach(([id, _]) => allUniqueOwned[id] = getAddress(signerAddr))\n      }\n    ))\n\n    return await Promise.all(\n      Object.entries(allUniqueOwned).map(([id, signer]) => getAccountByAddr(id, signer))\n    )\n  }, [getAccountByAddr, relayerURL])\n\n  const getGridPlusAddresses = ({ addresses, deviceId, commKey, isPaired }) => {\n    setChooseSigners({\n      addresses, signerName: 'Lattice', signerExtra: {\n        type: 'Lattice', deviceId, commKey, isPaired\n      }\n    })\n  }\n\n  async function connectGridPlusAndGetAccounts() {\n    showModal(<LatticeModal addresses={getGridPlusAddresses} />)\n  }\n\n  async function connectTrezorAndGetAccounts() {\n    /*\n    const engine = new Web3ProviderEngine({ pollingInterval: this.pollingInterval })\n    engine.addProvider(new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect, ...this.config }))\n    engine.addProvider(new CacheSubprovider())\n    engine.addProvider(new RPCSubprovider(this.url, this.requestTimeoutMs))\n    */\n    const provider = new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect })\n    const addresses = await provider.getAccountsAsync(50)\n    setChooseSigners({\n      addresses, signerName: 'Trezor', signerExtra: {\n        type: 'trezor',\n        info: JSON.parse(JSON.stringify(provider._initialDerivedKeyInfo))\n      }\n    })\n  }\n\n  async function connectLedgerAndGetAccounts() {\n    if (isFirefox()) {\n      await connectLedgerAndGetAccountsU2F()\n    } else {\n      await connectLedgerAndGetAccountsWebHID()\n    }\n  }\n\n  async function connectLedgerAndGetAccountsU2F() {\n    const provider = new LedgerSubprovider({\n      networkId: 0, // @TODO: probably not needed\n      ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n      baseDerivationPath: PARENT_HD_PATH\n    })\n    // NOTE: do not attempt to do both of these together (await Promise.all)\n    // there is a bug in the ledger subprovider (race condition), so it will think we're trying to make two connections simultaniously\n    // cause one call won't be aware of the other's attempt to connect\n    const addresses = await provider.getAccountsAsync(50)\n    const signerExtra = await provider._initialDerivedKeyInfoAsync().then(info => ({\n      type: 'ledger',\n      info: JSON.parse(JSON.stringify(info))\n    }))\n\n    setChooseSigners({ addresses, signerName: 'Ledger', signerExtra })\n  }\n\n  async function connectLedgerAndGetAccountsWebHID() {\n    let error = null\n    try {\n      const addrData = await ledgerGetAddresses()\n      if (!addrData.error) {\n        const signerExtra = { type: 'ledger', transportProtocol: 'webHID' }\n        if (addrData.addresses.length === 1) {\n            onEOASelected(addrData.addresses[0], signerExtra)\n        } else {\n            setChooseSigners({ addresses: addrData.addresses, signerName: 'Ledger', signerExtra })\n        }\n      } else {\n        error = addrData.error\n      }\n    } catch (e) {\n      console.log(e)\n      if (e.statusCode && e.id === 'InvalidChannel') {\n        error = 'Invalid channel'\n      } else if (e.statusCode && e.statusCode === 25873) {\n        error = 'Please make sure your ledger is connected and the ethereum app is open'\n      } else {\n        error = e.message\n      }\n    }\n\n    if (error) {\n      setAddAccErr(`Ledger error: ${error.message || error}`)\n    }\n  }\n\n  const onEOASelected = useCallback(async (addr, signerExtra) => {\n    const addAccount = (acc, opts) => onAddAccount({ ...acc, signerExtra }, opts)\n    // when there is no relayer, we can only add the 'default' account created from that EOA\n    // @TODO in the future, it would be nice to do getLogs from the provider here to find out which other addrs we control\n    //   ... maybe we can isolate the code for that in lib/relayerless or something like that to not clutter this code\n    if (!relayerURL) return addAccount(await createFromEOA(addr, signerExtra.type), { select: true })\n    // otherwise check which accs we already own and add them\n    const owned = await getOwnedByEOAs([addr])\n    if (!owned.length) {\n        addAccount(await createFromEOA(addr, signerExtra.type), { select: true, isNew: true })\n    } else {\n      addToast(`Found ${owned.length} existing accounts with signer ${addr}`, { timeout: 15000 })\n      owned.forEach((acc, i) => addAccount(acc, { select: i === 0 }))\n    }\n  }, [addToast, createFromEOA, getOwnedByEOAs, onAddAccount, relayerURL])\n\n  const onSignerAddressClicked = useCallback(val => {\n    wrapErr(() => onEOASelected(val.address, signersToChoose.signerExtra))\n    setChooseSigners(null)\n  }, [onEOASelected, signersToChoose])\n\n  // The UI for choosing a signer to create/add an account with, for example\n  // when connecting a hardware wallet, it has many addrs you can choose from\n  useEffect(() => {\n    if (signersToChoose) {\n      showModal(\n        <SelectSignerAccountModal\n          signersToChoose={signersToChoose.addresses}\n          onSignerAddressClicked={onSignerAddressClicked}\n          description={`Signer address is the ${signersToChoose.signerName} address you will use to sign transactions on Ambire Wallet.\n                     new account will be created using this signer if you dont have one.`}\n          isCloseBtnShown={true}\n        />\n      )\n    }\n  }, [onSignerAddressClicked, showModal, signersToChoose])\n  \n  const onDrop = useCallback((acceptedFiles, rejectedFiles) => {\n    const reader = new FileReader()\n    \n    if (rejectedFiles.length) {\n      addToast(`${rejectedFiles[0].file.path} - ${(rejectedFiles[0].file.size / 1024).toFixed(2)} KB. ${rejectedFiles[0].errors[0].message}`, { error: true })\n    }\n\n    if (acceptedFiles.length){\n      const file = acceptedFiles[0]\n\n      reader.readAsText(file,'UTF-8')\n      reader.onload = readerEvent => {\n        const content = readerEvent.target.result\n        const fileContent = JSON.parse(content)\n        const validatedFile = validateImportedAccountProps(fileContent)\n        \n        if (validatedFile.success) onAddAccount(fileContent, { select: true })\n        else addToast(validatedFile.message, { error: true})\n      }\n    }\n  }, [addToast, onAddAccount])\n\n  const { getInputProps, open } = useDropzone({\n    onDrop,\n    noClick: true,\n    noKeyboard: true,\n    accept: 'application/json',\n    maxFiles: 1,\n    validator: fileSizeValidator\n  })\n\n  // Adding accounts from existing signers\n  const addFromSignerButtons = (<>\n    <button onClick={() => wrapProgress(connectTrezorAndGetAccounts, 'hwwallet')}>\n      <div className=\"icon\" style={{ backgroundImage: 'url(./resources/trezor.png)' }}/>\n      Trezor\n    </button>\n    <button onClick={() => wrapProgress(connectLedgerAndGetAccounts, 'hwwallet')}>\n      <div className=\"icon\" style={{ backgroundImage: 'url(./resources/ledger.png)' }}/>\n      Ledger\n    </button>\n    <button onClick={() => wrapProgress(connectGridPlusAndGetAccounts, 'hwwallet')}>\n      <div className=\"icon\" style={{ backgroundImage: 'url(./resources/grid-plus.png)' }}/>\n      Grid+ Lattice1\n    </button>\n    <button onClick={() => wrapErr(connectWeb3AndGetAccounts)}>\n      <div className=\"icon\" style={{ backgroundImage: 'url(./resources/metamask.png)' }}/>\n      Metamask / Browser\n    </button>\n    <button onClick={() => wrapErr(open)}>\n      <div className=\"icon\"><VscJson size={25}/></div>\n      Import from JSON\n    </button>\n    <input {...getInputProps()} />\n  </>)\n\n  if (!relayerURL) {\n    return (<div className=\"loginSignupWrapper\">\n      <div id=\"logo\"/>\n      <section id=\"addAccount\">\n        <div id=\"loginOthers\">\n          <h3>Add an account</h3>\n          {addFromSignerButtons}\n          <h3>NOTE: You can enable email/password login by connecting to a relayer.</h3>\n          {addAccErr ? (<p className=\"error\" style={{maxWidth: '800px'}}>{addAccErr}</p>) : (<></>)}\n        </div>\n      </section>\n    </div>)\n  }\n  //TODO: Would be great to create Ambire spinners(like 1inch but simpler) (I can have a look at them if you need)\n  return (<div className=\"loginSignupWrapper\">\n      <div id=\"logo\"/>\n      <section id=\"addAccount\">\n        <div id=\"loginEmail\">\n          <h3>Create a new account</h3>\n          <LoginOrSignup\n            inProgress={inProgress === 'email'}\n            onAccRequest={req => wrapProgress(() => createQuickAcc(req), 'email')}\n            action=\"SIGNUP\"\n          ></LoginOrSignup>\n          {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n        </div>\n\n        <div id=\"loginSeparator\">\n          <div className=\"verticalLine\"></div>\n          <span>or</span>\n          <div className=\"verticalLine\"></div>\n        </div>\n        <div id=\"loginOthers\">\n          <h3>Add an account</h3>\n          {inProgress !== 'hwwallet' ? (<>\n            <Link to=\"/email-login\">\n              <button>\n                <div className=\"icon\" style={{ backgroundImage: 'url(./resources/envelope.png)' }}/>\n                Email login\n              </button>\n            </Link>\n            {addFromSignerButtons}\n            {addAccErr ? (<p className=\"error\">{addAccErr}</p>) : (<></>)}\n          </>) : (<div className=\"accountLoader\">\n            <Loading/>\n          </div>)}\n        </div>\n      </section>\n    </div>\n  )\n}\n","import './Balances.scss'\n\nimport networks from 'consts/networks'\n\nconst Balances = ({ portfolio, selectedNetwork, setNetwork, hidePrivateValue }) => {\n    const networkDetails = (network) => networks.find(({ id }) => id === network)\n    const otherBalances = portfolio.otherBalances.filter(({ network, total }) => network !== selectedNetwork.id && total.full > 0)\n\n    return (\n        <div id=\"balances\">\n            <span className=\"green-highlight\">$</span> { hidePrivateValue(portfolio.balance.total.truncated) }\n            <span className=\"green-highlight\">.{ hidePrivateValue(portfolio.balance.total.decimals) }</span>\n        \n            <div id=\"other-balances\">\n                { otherBalances.length ? <label>You also have</label> : null }\n                {\n                    otherBalances.filter(({ network }) => networkDetails(network)).map(({ network, total }, i) => (\n                        <div className=\"balance-container\" key={network}>\n                            <div className=\"other-balance\" onClick={() => setNetwork(network)}>\n                                <label>\n                                    <span className=\"purple-highlight\">$</span> { hidePrivateValue(total.truncated) }\n                                    <span className=\"purple-highlight\">.{hidePrivateValue(total.decimals)}</span>\n                                </label>\n                                on\n                                <div className=\"network\">\n                                    <div className=\"icon\" style={{backgroundImage: `url(${networkDetails(network).icon})`}}></div>\n                                    <div className=\"name\">\n                                        { networkDetails(network).name }\n                                    </div>\n                                </div>\n                            </div>\n                            { otherBalances.length - 1 !== i ? <label>and</label> : null }\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default Balances\n","import './ProtocolsPlaceholder.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { Button } from 'components/common'\nimport { MdOutlineAdd } from 'react-icons/md'\nimport { useLocalStorage } from 'hooks'\n\nconst ProtocolsPlaceholder = ({ onClickAddToken, onClickShowToken }) => {\n    const tokens = [\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0xade00c28244d5ce17d72e40330b1c318cd12b7c3.png',\n            symbol: 'ADX',\n            balance: 170027.26,\n            balanceUSD: 138880.64\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x0000000000000000000000000000000000000000.png',\n            symbol: 'ETH',\n            balance: 61.77,\n            balanceUSD: 283170.08\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x2260fac5e5542a773aa44fbcfedf7c193bc2c599.png',\n            symbol: 'WBTC',\n            balance: 0.03,\n            balanceUSD: 2227.24\n        },\n    ]\n\n    const listHiddenTokens = useLocalStorage({ key: 'hiddenTokens'})\n    let hiddenTokensCount = 0\n    \n    if (listHiddenTokens && listHiddenTokens[0] !== null) {\n        hiddenTokensCount = listHiddenTokens[0].length\n    }\n    \n    return (\n        <div id=\"protocols-placeholder\" >\n            <div className=\"placeholder-overlay\">\n                <label>\n                    Welcome! You don't have any funds on this account.\n                </label>\n                <NavLink to=\"/wallet/deposit\">\n                    <Button small icon={<GiReceiveMoney/>}>Deposit</Button>\n                </NavLink>\n                <div className=\"add-token\">\n                    <label>You have a token that's not displayed?</label>\n                    <Button mini clear icon={<MdOutlineAdd/>} onClick={onClickAddToken}>Click here to add it</Button>\n                    {hiddenTokensCount > 0 && (<label style={{ cursor: 'pointer'}} onClick={onClickShowToken}>There are also {hiddenTokensCount} hidden tokens. Click to configure</label>)}\n                </div>\n            </div>\n            <div className=\"category\">\n                <div className=\"title\">Tokens</div>\n                <div className=\"list\">\n                    {\n                        tokens.map(({ icon, symbol, balance, balanceUSD }) => (\n                            <div className=\"token\" key={symbol}>\n                                <div className=\"icon\">\n                                    <img src={icon} alt=\"Token Icon\"/>\n                                </div>\n                                <div className=\"name\">\n                                    { symbol }\n                                </div>\n                                <div className=\"separator\"></div>\n                                <div className=\"balance\">\n                                    <div className=\"currency\">\n                                        { balance } <span className=\"symbol\">{ symbol }</span>\n                                    </div>\n                                    <div className=\"dollar\">\n                                        <span className=\"symbol\">$</span> { balanceUSD }\n                                    </div>\n                                </div>\n                            </div>\n                        ))\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ProtocolsPlaceholder","import './Protocols.scss'\n\nimport { GiToken } from 'react-icons/gi'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { NavLink } from 'react-router-dom'\nimport { Button, Loading } from 'components/common'\nimport ProtocolsPlaceholder from './ProtocolsPlaceholder/ProtocolsPlaceholder'\nimport { useState } from 'react'\nimport { MdOutlineAdd, MdVisibilityOff } from 'react-icons/md'\nimport { AddTokenModal } from 'components/Modals'\nimport { useModals } from 'hooks'\nimport { HideTokenModel } from 'components/Modals'\nimport { getTokenIcon } from 'lib/icons'\nimport { formatFloatTokenAmount } from 'lib/formatters'\n\nconst Protocols = ({ portfolio, network, account, hidePrivateValue }) => {\n    const { showModal } = useModals()\n\n    const [failedImg, setFailedImg] = useState([])\n\n    const { isBalanceLoading, areProtocolsLoading, tokens, protocols } = portfolio\n    const sortedTokens = tokens.sort((a, b) => {\n        const decreasing = b.balanceUSD - a.balanceUSD\n        if (decreasing === 0) return a.symbol.localeCompare(b.symbol)\n        return decreasing\n    })\n    const otherProtocols = protocols.filter(({ label }) => label !== 'Tokens')\n    const shouldShowPlaceholder = (!isBalanceLoading && !tokens.length) && (!areProtocolsLoading && !otherProtocols.length)\n\n    const tokenItem = (index, img, symbol, balance, balanceUSD, address, send = false, network, decimals) => \n        {\n            const logo = failedImg.includes(img) ? getTokenIcon(network, address) : img\n\n            return (<div className=\"token\" key={`token-${address}-${index}`}>\n            <div className=\"icon\">\n                { \n                    failedImg.includes(logo) ?\n                        <GiToken size={20}/>\n                        :\n                        <img src={logo} draggable=\"false\" alt=\"Token Icon\" onError={() => setFailedImg(failed => [...failed, logo])}/>\n                }\n            </div>\n            <div className=\"name\">\n                { symbol }\n            </div>\n            <div className=\"separator\"></div>\n            <div className=\"balance\">\n                <div className=\"currency\">\n                    <span className=\"value\">{ hidePrivateValue(formatFloatTokenAmount(balance, true, decimals)) }</span>\n                    <span className=\"symbol\">{ symbol }</span>\n                </div>\n                <div className=\"dollar\">\n                    <span className=\"symbol\">$</span> { hidePrivateValue(balanceUSD.toFixed(2)) }\n                </div>\n            </div>\n            {\n                send ? \n                    <div className=\"actions\">\n                        <NavLink to={`/wallet/transfer/${address}`}>\n                            <Button small icon={<AiOutlineSend/>}>Send</Button>\n                        </NavLink>\n                    </div>\n                    :\n                    null\n            }\n        </div>)}\n\n    const openAddTokenModal = () => showModal(<AddTokenModal network={network} account={account} portfolio={portfolio} />)\n    const openHideTokenModal = () => showModal(<HideTokenModel network={network} account={account} portfolio={portfolio} />)\n\n    return (\n        <div id=\"protocols-table\">\n            {\n                shouldShowPlaceholder ?\n                    <ProtocolsPlaceholder onClickAddToken={openAddTokenModal} onClickShowToken={openHideTokenModal}/>\n                    :\n                    null\n            }\n            <>\n                {\n                    isBalanceLoading ?\n                        <Loading/>\n                        :\n                        !shouldShowPlaceholder && sortedTokens.length ?\n                            <div className=\"category\" key=\"category-tokens\">\n                                <div className=\"title\">\n                                    Tokens\n                                    <div className=\"wrapper-btns\">\n                                        <Button mini clear icon={<MdVisibilityOff/>} onClick={() => openHideTokenModal()}>Hide Token</Button>\n                                        <Button mini clear icon={<MdOutlineAdd/>} onClick={() => openAddTokenModal()}>Add Token</Button>\n                                    </div>\n                                </div>\n                                <div className=\"list\">\n                                    { \n                                        sortedTokens.map(({ address, symbol, tokenImageUrl, balance, balanceUSD, network, decimals }, i) =>\n                                            tokenItem(i, tokenImageUrl, symbol, balance, balanceUSD, address, true, network, decimals))\n                                    }\n                                </div>\n                            </div>\n                        :\n                        null\n                }\n                {\n                    areProtocolsLoading ?\n                        <Loading/>\n                        :\n                            otherProtocols.map(({ label, assets }, i) => (\n                                <div className=\"category\" key={`category-${i}`}>\n                                    <div className=\"title\">{ label }</div>\n                                    <div className=\"list\">\n                                        {\n                                            assets.map(({ category, symbol, tokenImageUrl, balance, balanceUSD, address }, i) => \n                                                tokenItem(i, tokenImageUrl, symbol, balance, balanceUSD, address, category !== 'claimable'))\n                                        }\n                                    </div>\n                                </div>\n                            ))\n                }\n            </>\n        </div>\n    )\n}\n\nexport default Protocols","import './CollectiblesPlaceholder.scss'\n\nconst CollectiblesPlaceholder = ({ isPrivateMode, collectiblesLength }) => {\n    const collectibles = [\n        {\n            collectionName: 'Party Bone',\n            collectionImg: 'https://lh3.googleusercontent.com/ZNc-hDBHOxgioSltBcDvh5hBfWEj623dETJj2nrEC0cLbjuULbo4Ign7OnLDX9qf2XaALrkXsZCRylRqPPHqQgzJOabJg4TRq3MDhA=s2500',\n            name: 'Party Bone #7865',\n            image: 'https://lh3.googleusercontent.com/uznp2aNVNPEhVk4MhLG2Zn-JC2sVaF6PsUcpF_CpyQkgekmv4hh4zbyebsoLFLvkY8PSV6D-TR5OaMp15RhG9zQsYd_AvDCo9SEVF4Q',\n            price: 32.16\n        },\n        {\n            collectionName: 'Pudgy Penguins',\n            collectionImg: 'https://lh3.googleusercontent.com/L9PJp0pOXCscKsTpD1_6zoALxdjG5gIKHLykS_Wk5J_yk590drEqRhM1ElTEZCaWeTjFj2isfxFw2tcFKcbCPlu6-Eu5bUuxsL-x=s2500',\n            name: 'Pudgy Penguin #8675',\n            image: 'https://lh3.googleusercontent.com/J6gQQRnzsMLAOhYiN9qIhogxr2MKn17zfGf6nQFKr3WCZ34thm6H0w9izvnJysxJclsyr8c3yo0hshOaLU73aS-IgTm-CooJb1cw1S0',\n            price: 5675.00\n        },\n        {\n            collectionName: 'Art Blocks Factory',\n            collectionImg: 'https://lh3.googleusercontent.com/sr7Y19-bJwsQsxX6n8Pj5tIaNKdUEotNlfhBsYw8McKpIsYARglTORaNlGhDZ2PrH-tO1vU6tFbpamiWwIImbidhVSh4aoIh4d310Og=s2500',\n            name: 'Transitions #4267',\n            image: 'https://lh3.googleusercontent.com/9MzvH_PSYMvlJE8Cfm5d308ltY5fZx-dooEcQizKgtKZ8g05RvJvd_5LAbqVHIzaoZbM-HOBgNSV8RKvEe_1thkLcQtE4NMMx8Kp5g',\n            price: 263.46\n        },\n        {\n            collectionName: 'Sad Frogs District',\n            collectionImg: 'https://lh3.googleusercontent.com/3U8N73XLrQOQPhJBAMNi7IPR1y3GGJ2zxmyUlit4IHCJURmKFPWClgatjbYfyz9drMk6-XSQTjSFqn7tKL0ZNoRbgvUu8OdLVREA=s2500',\n            name: '1882',\n            image: 'https://lh3.googleusercontent.com/3uwrfkdhHSfWm171BOjJHp3768tbLP9TeyTh2BnvgF6S1nIRI489SFq6EGjI9AISRUeyXXufEjB34Wj0bif_vl-y5h6GesEoJaaZcJg',\n            price: 1563.59\n        },\n        {\n            collectionName: 'GLUEWAVE',\n            collectionImg: 'https://lh3.googleusercontent.com/LheZMF6AyTLPpfwABwAGZqoC0gTWrDlYloDdT2VX2u_GZRZnP-ZpDC90huElm3RXE-eU1d1YluQi8G1uVdeDdysUNLZWJte4jXk3zeY=s2500',\n            name: '000105040307070704',\n            image: 'https://lh3.googleusercontent.com/eP_F_6aa_BXuKfYq1w2aiS6UW3bp4-gByFoeKLMXYuWAkU6Xiyi7mkm31aoewCZ_eG9RAuhas8jxFwXTxAWuxq1E3ZxYg97cLUUE',\n            price: 7107.27\n        }\n    ]\n\n    return (\n        <div id=\"collectibles-placeholder\">\n            <div className=\"placeholder-text\">\n                {isPrivateMode && collectiblesLength ? 'You can\\'t see collectibles in private mode' : 'You don\\'t have any collectibles (NFTs) yet' }\n            </div>\n            <div className=\"placeholder-overlay\"></div>\n            <div id=\"collectibles\">\n                {\n                    collectibles.map(({ collectionName, collectionImg, name, image, price}) => (\n                        <div className=\"collectible\" key={name}>\n                            <div className=\"artwork\" style={{backgroundImage: `url(${image})`}}/>\n                            <div className=\"info\">\n                                <div className=\"collection\">\n                                    <div className=\"collection-icon\" style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                    { collectionName }\n                                </div>\n                                <div className=\"details\">\n                                    <div className=\"name\">{ name }</div>\n                                    <div className=\"value\"><span className=\"purple-highlight\">$</span> { price }</div>\n                                </div>\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default CollectiblesPlaceholder","import './Collectibles.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport CollectiblesPlaceholder from './CollectiblesPlaceholder/CollectiblesPlaceholder'\nimport { Loading } from 'components/common'\n\nconst Collectibles = ({ portfolio, isPrivateMode }) => {\n    const handleUri = uri => {\n        uri = uri.startsWith('data:application/json') ? uri.replace('data:application/json;utf8,', '') : uri\n\n        if (uri.split('/')[0] === 'data:image') return uri\n        if (uri.startsWith('ipfs://')) return uri.replace(/ipfs:\\/\\/ipfs\\/|ipfs:\\/\\//g, 'https://ipfs.io/ipfs/')\n        if (uri.split('/')[2].endsWith('mypinata.cloud')) return 'https://ipfs.io/ipfs/' + uri.split('/').slice(4).join('/')\n        \n        return uri\n    }\n\n    if (portfolio.areProtocolsLoading) return <Loading />;\n\n    if (!portfolio.collectibles.length || isPrivateMode) {\n        return (\n            <CollectiblesPlaceholder\n                isPrivateMode={isPrivateMode}\n                collectiblesLength={portfolio.collectibles.length}\n            />\n        );\n    }\n\n    return (\n        <div id=\"collectibles\">\n            {\n                portfolio.collectibles.map(({ network, address, collectionName, collectionImg, assets }) => (assets || []).map(({ tokenId, assetName, assetImg, balanceUSD }) => (\n                    <div className=\"collectible\" key={tokenId}>\n                        <NavLink to={`/wallet/nft/${network}/${address}/${tokenId}`}>\n                            <div className=\"artwork\" style={{backgroundImage: `url(${handleUri(assetImg)})`}}/>\n                            <div className=\"info\">\n                                <div className=\"collection\">\n                                    <div className=\"collection-icon\" style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                    <span className=\"collection-name\">{ collectionName }</span>\n                                </div>\n                                <div className=\"details\">\n                                    <div className=\"name\">{ assetName }</div>\n                                    <div className=\"value\"><span className=\"purple-highlight\">$</span> {balanceUSD.toFixed(2) }</div>\n                                </div>\n                            </div>\n                        </NavLink>\n                    </div>\n                )))\n            }\n        </div>            \n    )\n}\n\nexport default Collectibles","import './FinalCountdown.scss'\nimport { useLayoutEffect, useState } from 'react'\nimport { RiTimerFlashLine } from 'react-icons/ri'\n\nfunction toTwoDigits(num) {\n    if (num < 10) return `0${num}`\n    return `${num}`\n}\n\nfunction getTimeDiff(diff) {\n    if (diff < 0) {\n        return {\n            days: '00',\n            hours: '00',\n            minutes: '00',\n            seconds: '00'\n        }\n    }\n\n    return {\n        days: toTwoDigits(Math.floor(diff / (1000 * 60 * 60 * 24))),\n        hours: toTwoDigits(Math.floor((diff / (1000 * 60 * 60)) % 24)),\n        minutes: toTwoDigits(Math.floor((diff / 1000 / 60) % 60)),\n        seconds: toTwoDigits(Math.floor((diff / 1000) % 60)),\n    }\n}\n\nexport default function Countdown({ endDateTime, label }) {\n\n    const [timeLeft, setTimeLeft] = useState(null)\n\n    useLayoutEffect(() => {\n        if (endDateTime) {\n\n            let interval = setInterval(\n                () => {\n                    const diff = new Date(endDateTime).getTime() - new Date().getTime()\n                    setTimeLeft(getTimeDiff(diff))\n                    if (diff < 0) {\n                        clearInterval(interval)\n                        interval = null\n                    }\n                },\n                1000\n            )\n            return () => {\n                clearInterval(interval)\n                interval = null\n            }\n        } else {\n            setTimeLeft(null)\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [endDateTime])\n\n    if (!timeLeft) return null\n\n    return (\n        <div>\n            {label && <span>{label}</span>}\n            <div className='final-countdown'>\n                <RiTimerFlashLine className='timer-icon' />\n                <div className='unit-box'>\n                    <div className='value'>\n                        {timeLeft.days}\n                    </div>\n                    <div className='unit'>\n                        days\n                    </div>\n                </div>\n                <div className='value'>:</div>\n                <div className='unit-box'>\n                    <div className='value'>\n                        {timeLeft.hours}\n                    </div>\n                    <div className='unit'>\n                        hours\n                    </div>\n                </div>\n                <div className='value'>:</div>\n                <div className='unit-box'>\n                    <div className='value'>\n                        {timeLeft.minutes}\n                    </div>\n                    <div className='unit'>\n                        minutes\n                    </div>\n                </div>\n                <div className='value'>:</div>\n                <div className='unit-box'>\n                    <div className='value'>\n                        {timeLeft.seconds}\n                    </div>\n                    <div className='unit'>\n                        seconds\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}","import './Promotions.scss'\nimport {\n    useEffect,\n    useState\n} from 'react'\nimport FinalCountdown from 'components/common/FinalCountdown/FinalCountdown'\n\nfunction Promo({\n    period,\n    text,\n    title,\n    resources = {}\n} = {}) {\n\n    if (!text) return null\n\n    const pattern = new RegExp(/\\${{(\\w+)}}/, 'gi')\n    const split = text.split(pattern)\n\n    const links = Object.entries(resources).reduce((anchors, [key, { label, href } = {}]) => {\n        const anc =\n            <a\n                key={label}\n                className=\"link\"\n                href={href}\n                target=\"_blank\"\n                rel=\"noreferrer noopener\">\n                {label}\n            </a>\n\n        anchors[key] = anc\n        return anchors\n    }, {})\n\n    return (\n        <div className=\"notice\">\n            {title &&\n                <div className='title'>\n                    {title}\n                </div>\n            }\n            <div>\n                {split.map(x => links[x] || x)}\n            </div>\n            {\n                period?.to && period?.timer &&\n                <div className='timer'>\n                    <FinalCountdown endDateTime={period.to} />\n                </div>\n            }\n        </div>\n    )\n}\n\nexport default function Promotions({ rewardsData }) {\n    const [promo, setPromo] = useState(null)\n\n    useEffect(() => {\n        if (!promo && !!rewardsData?.data?.promo) {\n            setPromo(rewardsData?.data?.promo)\n        }\n    }, [promo, rewardsData?.data?.promo])\n\n    if (!promo) return null\n    return (\n        <Promo {...promo} />\n    )\n}","import './Dashboard.scss'\n\nimport { useEffect, useLayoutEffect, useState } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\n\nimport { Chart, Loading, Segments } from 'components/common'\nimport Balances from './Balances/Balances'\nimport Protocols from './Protocols/Protocols'\nimport Collectibles from './Collectibles/Collectibles'\nimport { MdOutlineInfo } from 'react-icons/md'\nimport Promotions from './Promotions/Promotions'\n\nconst chartSegments = [\n    {\n        value: 'Tokens'\n    },\n    {\n        value: 'Protocols'\n    }\n]\n\nconst tabSegments = [\n    {\n        value: 'tokens'\n    },\n    {\n        value: 'collectibles'\n    }\n]\n\nexport default function Dashboard({ portfolio, selectedNetwork, selectedAccount, setNetwork, privateMode, rewardsData }) {\n    const history = useHistory()\n    const { tabId } = useParams()\n\n    const [chartTokensData, setChartTokensData] = useState([]);\n    const [chartProtocolsData, setChartProtocolsData] = useState([]);\n    const [chartType, setChartType] = useState([]);\n    const [tab, setTab] = useState(tabId || tabSegments[0].value);\n\n    useEffect(() => {\n        if (!tab || tab === tabSegments[0].value) return history.replace(`/wallet/dashboard`)\n        history.replace(`/wallet/dashboard/${tab}`)\n    }, [tab, history])\n\n    useLayoutEffect(() => {\n        const tokensData = portfolio.tokens\n            .map(({ label, symbol, balanceUSD }) => ({\n                label: label || symbol,\n                value: Number(((balanceUSD / portfolio.balance.total.full) * 100).toFixed(2))\n            }))\n            .filter(({ value }) => value > 0);\n\n        const totalProtocols = portfolio.protocols.map(({ assets }) => \n            assets\n                .map(({ balanceUSD }) => balanceUSD)\n                .reduce((acc, curr) => acc + curr, 0))\n            .reduce((acc, curr) => acc + curr, 0)\n\n        const protocolsData = portfolio.protocols\n            .map(({ label, assets }) => ({\n                label,\n                value: Number(((assets.map(({ balanceUSD }) => balanceUSD).reduce((acc, curr) => acc + curr, 0) / totalProtocols) * 100).toFixed(2))\n            }))\n            .filter(({ value }) => value > 0)\n\n        setChartTokensData(tokensData);\n        setChartProtocolsData(protocolsData)\n    }, [portfolio.balance, portfolio.tokens, portfolio.protocols]);\n\n    useEffect(() => portfolio.requestOtherProtocolsRefresh(), [portfolio])\n\n    return (\n        <section id=\"dashboard\">\n            <Promotions rewardsData={rewardsData} />\n            <div id=\"overview\">\n                <div id=\"balance\" className=\"panel\">\n                    <div className=\"title\">Balance</div>\n                    <div className=\"content\">\n                        {\n                            portfolio.isBalanceLoading ? \n                                <Loading/>\n                                :\n                                <Balances\n                                    portfolio={portfolio}\n                                    selectedNetwork={selectedNetwork}\n                                    setNetwork={setNetwork}\n                                    hidePrivateValue={privateMode.hidePrivateValue}\n                                />\n                        }\n                    </div>\n                </div>\n                <div id=\"chart\" className=\"panel\">\n                    <div className=\"title\">\n                        Balance by\n                        <Segments small defaultValue={chartSegments[0].value} segments={chartSegments} onChange={setChartType}/>\n                    </div>\n                    <div className=\"content\">\n                        {\n                            chartType === chartSegments[0].value ?\n                                portfolio.isBalanceLoading ?\n                                    <Loading/>\n                                    :\n                                    privateMode.hidePrivateContent(<Chart data={chartTokensData} size={200}/>)\n                                :\n                                portfolio.areProtocolsLoading ?\n                                    <Loading/>\n                                    :\n                                    privateMode.hidePrivateContent(<Chart data={chartProtocolsData} size={200}/>)\n                        }\n                    </div>\n                </div>\n            </div>\n            <div id=\"table\" className=\"panel\">\n                <div className=\"title\">\n                    Assets\n                    <Segments small defaultValue={tab} segments={tabSegments} onChange={setTab}></Segments>\n                </div>\n                <div className=\"content\">\n                    {\n                        tab === tabSegments[0].value ?\n                            <Protocols\n                                portfolio={portfolio}\n                                network={selectedNetwork}\n                                account={selectedAccount}\n                                hidePrivateValue={privateMode.hidePrivateValue}\n                            />\n                            :\n                            <Collectibles portfolio={portfolio} isPrivateMode={privateMode.isPrivateMode} />\n                    }\n                </div>\n                <div className=\"footer\">\n                    <div id=\"missing-token-notice\">\n                        <MdOutlineInfo/>\n                        <span>\n                            If you don't see a specific token that you own, please check the <a href={`${selectedNetwork.explorerUrl}/address/${selectedAccount}`} target=\"_blank\" rel=\"noreferrer\">Block Explorer</a>\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </section>\n    )\n}\n","import './Accounts.scss'\n\nimport { useState } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { AiOutlinePlus } from 'react-icons/ai'\nimport { MdOutlineContentCopy, MdLogout, MdOutlineClose, MdOutlineCheck } from 'react-icons/md'\nimport * as blockies from 'blockies-ts';\nimport { DropDown, Button } from 'components/common';\nimport { useToasts } from 'hooks/toasts';\n\nconst Accounts = ({ accounts, selectedAddress, onSelectAcc, onRemoveAccount, hidePrivateValue }) => {\n    const { addToast } = useToasts()\n    const [logoutWarning, setLogoutWarning] = useState(false)\n    const [closed, setClosed] = useState(false)\n\n    const shortenedAddress = address => address.slice(0, 5) + '...' + address.slice(-3)\n    const isActive = id => id === selectedAddress ? 'active' : ''\n    const toIcon = seed => blockies.create({ seed }).toDataURL()\n    const toIconBackgroundImage = seed => ({ backgroundImage: `url(${toIcon(seed)})`})\n    const walletType = signerExtra => {\n        if (signerExtra && signerExtra.type === 'ledger') return 'Ledger'\n        else if (signerExtra && signerExtra.type === 'trezor') return 'Trezor'\n        else return 'Web3'\n    }\n    const copyAddress = async address => {\n        await navigator.clipboard.writeText(address)\n        addToast('Copied to clipboard!')\n    }\n\n    const onSelectAccount = (id) => {\n        onSelectAcc(id)\n        setClosed(true)\n    }\n\n    return (\n        <DropDown id=\"accounts\" icon={toIcon(selectedAddress)} title={hidePrivateValue(shortenedAddress(selectedAddress))} open={closed} onOpen={() => setClosed(false)}>\n          <div className=\"list\">\n            {\n              accounts.map(({ id, email, signer, signerExtra }) => \n                logoutWarning !== id ?\n                    <div className={`account ${isActive(id)}`} key={id}>\n                        <div className=\"inner\" onClick={() => onSelectAccount(id)}>\n                            <div className=\"icon\" style={toIconBackgroundImage(id)}></div>\n                            <div className=\"details\">\n                                <div className=\"address\">{ id }</div>\n                                <label>{ email ? `Email/Password account (${email})` : `${walletType(signerExtra)} (${shortenedAddress(signer.address)})` }</label>\n                            </div>\n                        </div>\n                        <div className=\"buttons\">\n                            <div className=\"button\" onClick={() => copyAddress(id)}>\n                                <MdOutlineContentCopy/>\n                            </div>\n                            <div className=\"button\" onClick={() => setLogoutWarning(id)}>\n                                <MdLogout/>\n                            </div>\n                        </div>\n                    </div>\n                    :\n                    <div id=\"confirm-delete-account\" className={`account ${isActive(id)}`} key={id}>\n                        <div className=\"message\">\n                            Are you sure you want to log out from this account ?\n                        </div>\n                        <div className=\"buttons\">\n                            <div className=\"button danger\" onClick={() => {\n                                setLogoutWarning(false)\n                                onRemoveAccount(id)\n                            }}>\n                                <MdOutlineCheck/>\n                            </div>\n                            <div className=\"button\" onClick={() => setLogoutWarning(false)}>\n                                <MdOutlineClose/>\n                            </div>\n                        </div>\n                    </div>\n              )\n            }\n          </div>\n          <div id=\"add-account\">\n            <NavLink to=\"/add-account\">\n              <Button icon={<AiOutlinePlus/>} small>Add Account</Button>\n            </NavLink>\n          </div>\n        </DropDown>\n    )\n}\n\nexport default Accounts","import './DApps.scss'\n\nimport React, { useState, useCallback } from 'react'\nimport { FiHelpCircle } from 'react-icons/fi'\nimport { BiTransferAlt } from 'react-icons/bi'\nimport { MdBrokenImage } from 'react-icons/md'\nimport { AiOutlineDisconnect } from 'react-icons/ai'\nimport { DropDown, ToolTip, Button } from \"components/common\"\nimport { checkClipboardPermission } from 'lib/permissions'\nimport { MdOutlineWarning } from 'react-icons/md'\n\nconst DApps = ({ connections, connect, disconnect, isWcConnecting }) => {\n    const [isClipboardGranted, setClipboardGranted] = useState(false)\n\n    const checkPermission = async () => {\n        const status = await checkClipboardPermission()\n        setClipboardGranted(status)\n        return status\n    }\n\n    const readClipboard = useCallback(async () => {\n        if (isClipboardGranted) {\n            const content = await navigator.clipboard.readText()\n            if (content.startsWith('wc:')) connect({ uri: content })\n        } else {\n            const uri = prompt('Enter WalletConnect URI')\n            if (uri) connect({ uri })\n        }\n    }, [connect, isClipboardGranted])\n\n    const isLegacyWC = ({ bridge }) => /https:\\/\\/bridge.walletconnect.org/g.test(bridge)\n\n    return (\n        <DropDown id=\"dApps\" title=\"dApps\" badge={connections.length} onOpen={() => checkPermission()} isLoading={isClipboardGranted && isWcConnecting}>\n            <div id=\"connect-dapp\">\n                <div className=\"heading\">\n                    <Button small icon={<BiTransferAlt />} disabled={isClipboardGranted} onClick={readClipboard}>\n                        Connect dApp\n                    </Button>\n                    <a href='https://help.ambire.com/hc/en-us/articles/4410889965842' target='_blank' rel='noreferrer'>\n                        <FiHelpCircle size={30} />\n                    </a>\n                </div>\n                {isClipboardGranted ? (\n                    <label>\n                        Automatic connection enabled, just copy a WalletConnect URL and\n                        come back to this tab.\n                    </label>\n                ) : null}\n            </div>\n            {connections.map(({ session, uri, isOffline }) => (\n                <div className=\"item dapps-item\" key={session.key}>\n                    <div className=\"icon\">\n                        <div className=\"icon-overlay\" style={{backgroundImage: `url(${session.peerMeta.icons.filter(x => !x.endsWith('favicon.ico'))[0]})`}}/>\n                        <MdBrokenImage/>\n                    </div>\n                    <a href={session.peerMeta.url} target=\"_blank\" rel=\"noreferrer\">\n                        <div className=\"details\">\n                            {\n                                isLegacyWC(session) ?\n                                    <ToolTip className=\"session-warning\" label=\"dApp uses legacy WalletConnect bridge which is unreliable and often doesn't work. Please tell the dApp to update to the latest WalletConnect version.\">\n                                        <MdOutlineWarning/>\n                                    </ToolTip>\n                                    :\n                                    null\n                            }\n                            {\n                                isOffline ?\n                                    <ToolTip className=\"session-error\" label=\"WalletConnect connection may be offline. Check again later. If this warning persist try to disconnect and connect WalletConnect.\">\n                                        <AiOutlineDisconnect />\n                                    </ToolTip>\n                                    :\n                                    null\n                            }\n                            <div className=\"name\">{session.peerMeta.name}</div>\n                        </div>\n                    </a>\n                    <div className=\"separator\"></div>\n                    <button onClick={() => disconnect(uri)}>Disconnect</button>\n                </div>\n          ))}\n        </DropDown>\n    )\n}\n\nexport default DApps\n","import './Links.scss'\n\nimport { DropDown } from \"components/common\"\nimport { MdChatBubbleOutline, MdMenuBook, MdOutlineHelpOutline, MdOutlineLightbulb } from \"react-icons/md\";\nimport { BsDiscord, BsTelegram, BsTwitter } from \"react-icons/bs\";\nimport useLocalStorage from \"hooks/useLocalStorage\";\n\nconst Links = () => {\n    const [linksViewed, setLinksViewed] = useLocalStorage({ key: 'linksViewed', defaultValue: false })\n\n    const onOpen = () => {\n        setLinksViewed(true)\n    }\n\n    return (\n        <DropDown id=\"help-dropdown\" className={`${linksViewed ? 'viewed' : ''}`} title={<MdOutlineHelpOutline/>} onOpen={onOpen}>\n            <a className=\"item\" href='https://help.ambire.com/hc/en-us/categories/4404980091538-Ambire-Wallet' target=\"_blank\" rel=\"noreferrer\">\n                <MdMenuBook/> Help Center\n            </a>\n            <a className=\"item\" href=\"https://help.ambire.com/hc/en-us/requests/new\" target=\"_blank\" rel=\"noreferrer\">\n                <MdChatBubbleOutline/> Report an issue\n            </a>\n            <a className=\"item\" href=\"https://discord.gg/nMBGJsb\" target=\"_blank\" rel=\"noreferrer\">\n                <BsDiscord/> Discord\n            </a>\n            <a className=\"item\" href=\"https://twitter.com/AmbireWallet\" target=\"_blank\" rel=\"noreferrer\">\n                <BsTwitter/> Twitter\n            </a>\n            <a className=\"item\" href=\"https://t.me/AmbireWallet\" target=\"_blank\" rel=\"noreferrer\">\n                <BsTelegram/> Telegram\n            </a>\n            <a className=\"item\" href=\"https://www.ambire.com/Ambire%20ToS%20and%20PP%20(26%20November%202021).pdf\" target=\"_blank\" rel=\"noreferrer\">\n                <MdOutlineLightbulb/> ToS\n            </a>\n        </DropDown>\n    )\n}\n\nexport default Links\n","import { useContext, useEffect, useRef } from \"react\"\nimport { ModalContext } from \"components/ModalProvider/ModalProvider\"\n\nconst useDynamicModal = (component, props, watchProps = {}, opts) => {\n    const { showDynamicModal, updateModal } = useContext(ModalContext)\n    const previousWatchProps = useRef(watchProps)\n\n    useEffect(() => {\n        if (JSON.stringify(previousWatchProps.current) !== JSON.stringify(watchProps)) {\n            updateModal(watchProps)\n            previousWatchProps.current = watchProps\n        }\n    }, [watchProps, updateModal])\n\n    return () => showDynamicModal(component, { ...props, ...watchProps }, opts)\n}\n\nexport default useDynamicModal","import { useMemo, useState, useEffect, useCallback } from 'react'\nimport { Contract } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { getProvider } from 'lib/provider'\n\nimport WALLETVestings from 'consts/WALLETVestings'\nimport WALLETInitialClaimableRewards from 'consts/WALLETInitialClaimableRewards'\nimport WALLETSupplyControllerABI from 'consts/WALLETSupplyControllerABI'\n\nconst supplyControllerAddress = '0xc53af25f831f31ad6256a742b3f0905bc214a430'\nconst supplyControllerInterface = new Interface(WALLETSupplyControllerABI)\n\nconst useClaimableWalletToken = ({ account = {}, network, addRequest }) => {\n    const provider = useMemo(() => getProvider('ethereum'), [])\n    const supplyController = useMemo(() => new Contract(supplyControllerAddress, WALLETSupplyControllerABI, provider), [provider])\n    const initialClaimableEntry = WALLETInitialClaimableRewards.find(x => x.addr === account.id)\n    const initialClaimable = initialClaimableEntry ? initialClaimableEntry.totalClaimable / 1e18 : 0\n    const vestingEntry = WALLETVestings.find(x => x.addr === account.id)\n\n    const [currentClaimStatus, setCurrentClaimStatus] = useState({ loading: true, claimed: 0, mintableVesting: 0, error: null })\n    // by adding this to the deps, we make it refresh every 10 mins\n    const refreshSlot = Math.floor(Date.now() / 60000)\n    useEffect(() => {\n        setCurrentClaimStatus({ loading: true, claimed: 0, mintableVesting: 0, error: null });\n\n        (async () => {\n            const toNum = x => parseInt(x.toString()) / 1e18\n            const [mintableVesting, claimed] = await Promise.all([\n                vestingEntry ? await supplyController.mintableVesting(vestingEntry.addr, vestingEntry.end, vestingEntry.rate).then(toNum) : null,\n                initialClaimableEntry ? await supplyController.claimed(initialClaimableEntry.addr).then(toNum) : null,\n            ])\n\n            const claimedInitial = initialClaimableEntry \n                ? (initialClaimableEntry.fromBalanceClaimable || 0) \n                    + (initialClaimableEntry.fromADXClaimable || 0) \n                    - toNum(initialClaimableEntry.totalClaimable || 0)\n                : null\n\n            return { mintableVesting, claimed, claimedInitial  }\n        })()\n            .then(status => setCurrentClaimStatus(status))\n            .catch(e => {\n                console.error('getting claim status', e)\n                setCurrentClaimStatus({ error: e.message || e })\n            })\n    }, [supplyController, vestingEntry, initialClaimableEntry, refreshSlot])\n\n    const claimableNow = (initialClaimable - (currentClaimStatus.claimed || 0) < 0) ? 0 : (initialClaimable - (currentClaimStatus.claimed || 0))\n    const disabledReason = network.id !== 'ethereum' ? 'Switch to Ethereum to claim' : (\n        currentClaimStatus.error ? `Claim status error: ${currentClaimStatus.error}` : null\n    )\n    const claimDisabledReason = claimableNow === 0 ? 'No rewards are claimable' : null\n    const claimEarlyRewards = useCallback((withoutBurn = true) => {\n        addRequest({\n            id: 'claim_'+Date.now(),\n            chainId: network.chainId,\n            type: 'eth_sendTransaction',\n            account: account.id,\n            txn: {\n                to: supplyControllerAddress,\n                value: '0x0',\n                data: supplyControllerInterface.encodeFunctionData('claim', [\n                    initialClaimableEntry.totalClaimable,\n                    initialClaimableEntry.proof,\n                    withoutBurn ? 0 : 3000, // penalty bps, at the moment we run with 0; it's a safety feature to hardcode it\n                    '0x47cd7e91c3cbaaf266369fe8518345fc4fc12935' // staking pool addr\n                ])\n            }\n        })    \n    }, [initialClaimableEntry, network.chainId, account.id, addRequest])\n    const claimVesting = useCallback(() => {\n        addRequest({\n            id: 'claimVesting_'+Date.now(),\n            chainId: network.chainId,\n            account: account.id,\n            type: 'eth_sendTransaction',\n            txn: {\n                to: supplyControllerAddress,\n                value: '0x0',\n                data: supplyControllerInterface.encodeFunctionData('mintVesting', [vestingEntry.addr, vestingEntry.end, vestingEntry.rate])\n            }\n        })    \n    }, [vestingEntry, network.chainId, account.id, addRequest])\n\n    return {\n        vestingEntry,\n        currentClaimStatus,\n        claimableNow,\n        disabledReason,\n        claimDisabledReason,\n        claimEarlyRewards,\n        claimVesting\n    }\n}\n\nexport default useClaimableWalletToken","import { useEffect, useState } from \"react\"\nimport useDynamicModal from \"hooks/useDynamicModals\";\nimport { Button, ToolTip } from \"components/common\";\nimport { WalletTokenModal } from \"components/Modals\";\nimport useClaimableWalletToken from \"./useClaimableWalletToken\";\n\nconst WalletTokenButton = ({ rewardsData, account = {}, network, hidePrivateValue, addRequest }) => {\n    const claimableWalletToken = useClaimableWalletToken({ account, network, addRequest })\n    const { currentClaimStatus } = claimableWalletToken\n    const totalLifetimeRewards = rewardsData.data?.rewards?.map(x => x.rewards[account.id] || 0).reduce((a, b) => a + b, 0)\n    const pendingTokensTotal = (currentClaimStatus && !currentClaimStatus.loading && totalLifetimeRewards > 0)\n        ?\n            ((totalLifetimeRewards || 0) \n            - (currentClaimStatus.claimed || 0) \n            - (currentClaimStatus.claimedInitial || 0 ) \n            + (currentClaimStatus.mintableVesting || 0)).toFixed(3) \n        : '...'\n    const [rewards, setRewards] = useState({})\n    const { isLoading, data, errMsg } = rewardsData\n    \n    const showWalletTokenModal = useDynamicModal(WalletTokenModal, { claimableWalletToken, accountId: account.id }, { rewards })\n\n    useEffect(() => {\n        if (errMsg || !data || !data.success) return\n\n        const { rewards, multipliers } = data\n        if (!rewards.length) return\n\n        const rewardsDetails = Object.fromEntries(rewards.map(({ _id, rewards }) => [_id, rewards[account.id] || 0]))\n        rewardsDetails.multipliers = multipliers\n        rewardsDetails.walletTokenAPY = data.walletTokenAPY\n        rewardsDetails.adxTokenAPY = data.adxTokenAPY\n        rewardsDetails.walletUsdPrice = data.usdPrice\n        rewardsDetails.xWALLETAPY = data.xWALLETAPY\n        setRewards(rewardsDetails)\n    }, [data, errMsg, account])\n\n    return (\n        !isLoading && (errMsg || !data || currentClaimStatus.error) ?\n            <ToolTip label=\"WALLET rewards are not available without a connection to the relayer\">\n                <Button small border disabled onClick={showWalletTokenModal}>Unavailable</Button>\n            </ToolTip>\n            :\n            <Button small border disabled={isLoading} onClick={showWalletTokenModal}>{ isLoading ? '...' : hidePrivateValue(pendingTokensTotal) } WALLET</Button>\n    )\n}\n\nexport default WalletTokenButton\n","import \"./TopBar.scss\";\n\nimport React, { useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { MdOutlineArrowForward, MdOutlineClose, MdOutlineMenu, MdRemoveRedEye, MdVisibilityOff } from \"react-icons/md\";\nimport { Select } from \"components/common\";\nimport Accounts from \"./Accounts/Accounts\";\nimport DApps from \"./DApps/DApps\";\nimport * as blockies from 'blockies-ts';\nimport Links from \"./Links/Links\";\nimport WalletTokenButton from \"./WalletTokenButton/WalletTokenButton\";\n\nconst TopBar = ({\n  connections,\n  connect,\n  disconnect,\n  isWcConnecting,\n  onSelectAcc,\n  onRemoveAccount,\n  selectedAcc,\n  accounts,\n  network,\n  setNetwork,\n  allNetworks,\n  rewardsData,\n  privateMode: { isPrivateMode, togglePrivateMode, hidePrivateValue },\n  addRequest\n}) => {\n  const [isMenuOpen, setMenuOpen] = useState(false)\n\n  const networksItems = allNetworks.map(({ id, name, icon }) => ({\n    label: name,\n    value: id,\n    icon\n  }))\n\n  const account = accounts.find(({ id }) => id === selectedAcc)\n  const accountIcon = blockies.create({ seed: account ? account.id : null }).toDataURL()\n\n  return (\n    <div id=\"topbar\">\n      <div id=\"mobile-menu\" onClick={() => setMenuOpen(!isMenuOpen)}>\n        <div className=\"icon\" style={{backgroundImage: `url(${accountIcon})`}}></div>\n        <MdOutlineArrowForward/>\n        <div className=\"icon\" style={{backgroundImage: `url(${network.icon})`}}></div>\n        <div id=\"menu-button\">\n          { isMenuOpen ? <MdOutlineClose/> : <MdOutlineMenu/> }\n        </div>\n      </div>\n\n      <NavLink to={'/wallet/dashboard'}>\n        <div id=\"logo\" />\n        <div id=\"icon\" />\n      </NavLink>\n      <div className={`container ${isMenuOpen ? 'open' : ''}`}>\n        {selectedAcc && <WalletTokenButton\n          rewardsData={rewardsData}\n          account={account}\n          network={network}\n          hidePrivateValue={hidePrivateValue}\n          addRequest={addRequest}\n        />}\n        {isPrivateMode ? <MdVisibilityOff cursor=\"pointer\" size={28} onClick={togglePrivateMode} /> : <MdRemoveRedEye cursor=\"pointer\" size={28} onClick={togglePrivateMode} />}\n        <DApps connections={connections} connect={connect} disconnect={disconnect} isWcConnecting={isWcConnecting}/>\n        <Accounts accounts={accounts} selectedAddress={selectedAcc} onSelectAcc={onSelectAcc} onRemoveAccount={onRemoveAccount} hidePrivateValue={hidePrivateValue}/>\n        <Select defaultValue={network.id} items={networksItems} onChange={value => setNetwork(value)}/>\n        <Links/>\n      </div>\n    </div>\n  );\n};\n\nexport default TopBar;\n","export const GAS_SPEEDS = ['slow', 'medium', 'fast', 'ape']\n","export const ACTION_GAS_COSTS = [\n\n\t{name: 'Ambire: Claim and burn', gas: 163327},\n\t{name: 'Ambire: Claim and stake', gas: 213230},\n\t{name: 'SushiSwap: Swap', gas: 140972},\n\t{name: 'Opensea: Sale', gas: 201953},\n\t{name: 'Uniswap V3: Swap', gas: 184206},\n\t{name: 'USDT: Transfer', gas: 54000},\n\t{name: 'Curve: Swap', gas: 749187},\n\t{name: 'Balancer: Swap', gas: 196234},\n\t{name: 'Bancor: Swap', gas: 182860},\n\t{name: '1inch: Swap', gas: 141645},\n\t{name: 'KyberSwap: Swap', gas: 144084},\n\t{name: 'ERC20: Transfer', gas: 64850},\n\t{name: 'Uniswap V2: Swap', gas: 152495},\n\t{name: 'ERC721: Transfer', gas: 84785},\n\t{name: 'CoW Protocol: Swap', gas: 342673},\n\t{name: 'SuperRare: Sale', gas: 130458},\n\t{name: 'Rarible: Sale', gas: 245271},\n\t{name: 'LooksRare: Sale', gas: 326271},\n\t{name: 'SuperRare: Offer', gas: 85037},\n\t{name: 'Uniswap V3: Add Liquidity', gas: 216505},\n\t{name: 'Curve: Add Liquidity', gas: 902944},\n\t{name: 'ENS: Register Domain', gas: 266467},\n\t{name: 'Gnosis Safe: Create Multisig', gas: 287748},\n\t{name: 'Arbitrum: Deposit', gas: 90925},\n\t{name: 'Optimism: Deposit', gas: 150561},\n\t{name: 'Polygon: Deposit', gas: 148963},\n\t{name: 'Ronin: Deposit', gas: 163430},\n\t{name: 'zkSync: Deposit', gas: 143159},\n\t{name: 'Beacon Chain: Deposit', gas: 52822},\n\t{name: 'Ribbon Finance: Deposit', gas: 92860},\n\t{name: 'Ribbon Finance: Withdraw', gas: 98748},\n\t{name: 'dYdX: Borrow', gas: 173944},\n\t{name: 'MakerDAO: Borrow', gas: 232907},\n\t{name: 'Compound: Collect', gas: 1237037},\n\t{name: 'Compound: Borrow', gas: 339561},\n\t{name: 'Compound: Repay', gas: 112121},\n\t{name: 'KyberSwap: Stake', gas: 214402},\n\t{name: 'Tornado.Cash: Deposit', gas: 1012121},\n\t{name: 'Tornado.Cash: Withdraw', gas: 360168},\n\t{name: '0x: Swap', gas: 326607},\n\t{name: 'Aave: Borrow', gas: 318196},\n\t{name: 'Aave: Repay', gas: 199430},\n\t{name: 'Convex Finance: Stake', gas: 513841},\n\t{name: 'Lido: Stake', gas: 82514},\n\t{name: 'Yearn Finance: Deposit', gas: 215916},\n\t{name: 'Hop Protocol: Bridge', gas: 121374},\n\t{name: 'Multichain: Bridge', gas: 57785},\n\t{name: 'Across Protocol: Bridge', gas: 120701},\n\t{name: 'Synapse: Bridge', gas: 107664},\n\t{name: 'Lido: Stake', gas: 87477 }\n]\n\nexport const AMBIRE_OVERHEAD_COST = 5000\n","import { useModals } from 'hooks'\nimport { Modal, Button } from 'components/common'\nimport './GasDetailsModal.scss'\n\nimport { MdClose } from 'react-icons/md'\nimport { GAS_SPEEDS } from 'consts/gasSpeeds'\n\nimport { ACTION_GAS_COSTS, AMBIRE_OVERHEAD_COST } from 'consts/actionGasCosts'\n\nconst GasDetailsModal = ({ gasData }) => {\n\n  const { hideModal } = useModals()\n  const buttons = (<Button clear small icon={<MdClose/>} onClick={hideModal}>Close</Button>)\n\n  const GAS_PRICES = GAS_SPEEDS.reduce((acc, speed) => {\n    acc[speed] =\n        gasData.gasPrice.maxPriorityFeePerGas\n          ? (gasData.gasPrice.maxPriorityFeePerGas[speed] + gasData.gasPrice[speed])\n          : gasData.gasPrice[speed]\n    return acc\n  }, {})\n\n  return (\n    <Modal id='gas-details-modal' title={'Gas information'} buttons={buttons}>\n      <div className={'gas-details-date'}>\n        Last updated: { new Date(gasData.gasPrice.updated).toDateString() + ' ' + new Date(gasData.gasPrice.updated).toTimeString().substr(0, 8) }\n      </div>\n      <div className={'gas-speed-row'}>\n        {\n          GAS_SPEEDS.map((speed, index) => {\n            return (\n              <div className={'gas-speed-block'} key={index}>\n                <div className={'gas-speed-name'}>{speed}</div>\n                <div className={'gas-speed-price'}>\n                  {Math.round(GAS_PRICES[speed] / 10 ** 9)} Gwei\n                </div>\n              </div>\n            )\n          })\n        }\n      </div>\n      <h4>Estimated Cost of Transaction Actions</h4>\n      <table className={'gas-action-costs'}>\n        <thead>\n        <tr>\n          <th>Action</th>\n          {GAS_SPEEDS.map((speed, index) => <th key={index}>{speed}</th>)}\n        </tr>\n        </thead>\n        <tbody>\n        {\n          ACTION_GAS_COSTS.map((a, index) => <tr key={index}>\n            <td>{a.name}</td>\n            {GAS_SPEEDS.map((speed, rowIndex) => <td key={rowIndex}>${(GAS_PRICES[speed] * (a.gas + AMBIRE_OVERHEAD_COST) / 10 ** 18 * gasData.gasFeeAssets.native).toFixed(2)}</td>)}\n          </tr>)\n        }\n        </tbody>\n      </table>\n    </Modal>\n  )\n}\n\nexport default GasDetailsModal\n","import './GasIndicator.scss'\nimport { FaGasPump } from 'react-icons/fa'\nimport GasDetailsModal from 'components/Modals/GasDetailsModal/GasDetailsModal'\nimport networks from 'consts/networks'\nimport { useEffect, useState } from 'react'\nimport { fetchGet } from 'lib/fetch'\nimport { useModals } from 'hooks'\nimport { ACTION_GAS_COSTS, AMBIRE_OVERHEAD_COST} from 'consts/actionGasCosts'\n\nconst GAS_COST_ERC20_TRANSFER = ACTION_GAS_COSTS.find(c => c.name === 'ERC20: Transfer').gas + AMBIRE_OVERHEAD_COST\n\nconst GasIndicator = ({ selectedNetwork, relayerURL }) => {\n\n  const { showModal } = useModals()\n  const [gasData, setGasData] = useState(null)\n  const [cacheBreak, setCacheBreak] = useState(() => Date.now())\n\n  useEffect(() => {\n    if ((Date.now() - cacheBreak) > 5 * 1000) setCacheBreak(Date.now())\n    const intvl = setTimeout(() => setCacheBreak(Date.now()), 60 * 1000)\n    return () => clearTimeout(intvl)\n  }, [cacheBreak])\n\n  useEffect(() => {\n    let unmounted = false\n    const url = `${relayerURL}/gasPrice/${selectedNetwork.id}?cacheBreak=${cacheBreak}`\n\n    fetchGet(url).then(gasData => {\n      if (unmounted) return\n\n      setGasData(gasData.data)\n    }).catch(err => {\n      if (unmounted) return\n      console.log('fetch error', err)\n    })\n    return () => unmounted = true\n  }, [relayerURL, selectedNetwork, cacheBreak])\n\n  if (gasData) {\n    return (<div className={'gas-info'}>\n            <span className={'native-price'}>\n                {networks.find(n => n.id === selectedNetwork.id)?.nativeAssetSymbol}: {(Number(gasData.gasFeeAssets.native)).toLocaleString('en-US', {\n              minimumFractionDigits: 2\n            })}\n            </span>\n      <span className={'gas-price'}\n            onClick={() => {\n              showModal(<GasDetailsModal gasData={gasData}/>)\n            }\n            }>\n              <FaGasPump/> ${((gasData.gasPrice.maxPriorityFeePerGas ? (gasData.gasPrice.maxPriorityFeePerGas['medium'] + gasData.gasPrice['medium']) : gasData.gasPrice['medium']) * GAS_COST_ERC20_TRANSFER / 10 ** 18 * gasData.gasFeeAssets.native).toFixed(2)}\n            </span>\n    </div>)\n  }\n  return null\n}\n\nexport default GasIndicator\n","import './SideBar.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport { MdDashboard, MdLock, MdCompareArrows, MdHelpCenter } from 'react-icons/md'\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { BsCurrencyExchange } from 'react-icons/bs'\nimport { BsPiggyBank } from 'react-icons/bs'\nimport { BiTransfer } from 'react-icons/bi'\nimport { CgArrowsExchangeV } from 'react-icons/cg'\nimport { Loading } from 'components/common'\nimport { useCallback, useEffect, useRef, useState } from 'react'\nimport GasIndicator from 'components/Wallet/GasIndicator/GasIndicator'\n\nconst helpCenterUrl = 'https://help.ambire.com/hc/en-us/categories/4404980091538-Ambire-Wallet'\n\nconst SideBar = ({ match, portfolio, hidePrivateValue, relayerURL, selectedNetwork }) => {\n  const sidebarRef = useRef()\n  const [balanceFontSize, setBalanceFontSize] = useState(0)\n\n    const resizeBalance = useCallback(() => {\n        const balanceFontSizes = {\n            3: '2em',\n            5: '1.5em',\n            7: '1.3em',\n            9: '1.2em',\n            11: '1em',\n        }\n\n        const charLength = portfolio.balance.total.truncated.length\n        const closest = Object.keys(balanceFontSizes).reduce((prev, current) => Math.abs(current - charLength) < Math.abs(prev - charLength) ? current : prev)\n        setBalanceFontSize(balanceFontSizes[closest])\n    }, [portfolio.balance.total])\n\n    useEffect(() => resizeBalance(), [resizeBalance])\n\n  return (\n    <div id=\"sidebar\" ref={sidebarRef}>\n      <div className=\"balance\">\n        <label>Balance</label>\n        {portfolio.isBalanceLoading ? (\n          <div className={'loaderContainer'}>\n            <Loading />\n          </div>\n        ) : (\n          <div\n            className=\"balanceDollarAmount\"\n            style={{ fontSize: balanceFontSize }}\n          >\n            <span className=\"dollarSign highlight\">$</span>\n            {hidePrivateValue(portfolio.balance.total.truncated)}\n            <span className=\"highlight\">\n              .{hidePrivateValue(portfolio.balance.total.decimals)}\n            </span>\n          </div>\n        )}\n        <div>\n          <GasIndicator relayerURL={relayerURL} selectedNetwork={selectedNetwork}/>\n        </div>\n      </div>\n      <nav>\n        <NavLink to={match.url + \"/dashboard\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <MdDashboard/>Dashboard\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/deposit\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <GiReceiveMoney/>Deposit\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/transfer\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <BiTransfer/>Transfer\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/swap\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <BsCurrencyExchange/>Swap\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/cross-chain\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <CgArrowsExchangeV/>Cross-Chain\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/earn\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <BsPiggyBank/>Earn\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/transactions\"} activeClassName=\"selected\">\n          <div className=\"item\">\n                <MdCompareArrows/>Transactions\n          </div>\n        </NavLink>\n        {/* Temporarily commented OpenSea tab. */}\n        {/* <NavLink to={match.url + \"/opensea\"} activeClassName=\"selected\">\n          <div className=\"item\">\n            <div className='opensea-icon'/>OpenSea\n          </div>\n        </NavLink> */}\n        <NavLink to={match.url + \"/security\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <MdLock/>Security\n          </div>\n        </NavLink>\n        <div className=\"separator\"></div>\n        <a href={helpCenterUrl} target=\"_blank\" rel=\"noreferrer\">\n          <div className=\"item\" id=\"help-center\">\n            <MdHelpCenter/>Help Center\n          </div>\n        </a>\n      </nav>\n    </div>\n  )\n}\n\nexport default SideBar\n","export default __webpack_public_path__ + \"static/media/ramp.26a99e26.svg\";","export default __webpack_public_path__ + \"static/media/paytrie.338f7c3b.svg\";","export default __webpack_public_path__ + \"static/media/transak.e01c0265.svg\";","export default __webpack_public_path__ + \"static/media/kriptomat.4c8e4fc1.svg\";","export const popupCenter = ({ url, title, w, h }) => {\n\t// Fixes dual-screen position                             Most browsers      Firefox\n\tconst dualScreenLeft =\n\t\twindow.screenLeft !== undefined ? window.screenLeft : window.screenX\n\tconst dualScreenTop =\n\t\twindow.screenTop !== undefined ? window.screenTop : window.screenY\n\n\tconst width = window.innerWidth\n\t\t? window.innerWidth\n\t\t: document.documentElement.clientWidth\n\t\t? document.documentElement.clientWidth\n\t\t: window.screen.width\n\tconst height = window.innerHeight\n\t\t? window.innerHeight\n\t\t: document.documentElement.clientHeight\n\t\t? document.documentElement.clientHeight\n\t\t: window.screen.height\n\n\tconst systemZoom = width / window.screen.availWidth\n\tconst left = (width - w) / 2 / systemZoom + dualScreenLeft\n\tconst top = (height - h) / 2 / systemZoom + dualScreenTop\n\tconst newWindow = window.open(\n\t\turl,\n\t\ttitle,\n\t\t`\n\t\ttoolbar=no,scrollbars=no,resizable=no\n\t\twidth=${w / systemZoom}, \n\t\theight=${h / systemZoom}, \n\t\ttop=${top}, \n\t\tleft=${left},\n\t\t`\n\t)\n\n\tif (window.focus) newWindow.focus()\n}","import { RampInstantSDK } from '@ramp-network/ramp-instant-sdk'\nimport transakSDK from '@transak/transak-sdk'\nimport { popupCenter } from 'lib/popupHelper'\nimport { fetchGet } from 'lib/fetch'\nimport { useState } from 'react';\nimport { useToasts } from 'hooks/toasts'\n\nimport url from 'url'\n\nimport { RAMP_HOST_API_KEY, PAYTRIE_PARTNER_URL, TRANSAK_API_KEY, TRANSAK_ENV } from 'config'\n\nconst useProviders = ({ walletAddress, selectedNetwork, relayerURL }) => {\n\n    const [isLoading, setLoading] = useState([])\n    const { addToast } = useToasts()\n\n    const openRampNetwork = () => {\n        const assetsList = {\n            ethereum: 'ERC20_*,ETH_*',\n            polygon: 'MATIC_ERC20_*,MATIC_*',\n            avalanche: 'AVAX_*',\n            'binance-smart-chain': 'BSC_*,BSC_ERC20_*',\n        }\n\n        const widget = new RampInstantSDK({\n            hostAppName: 'Ambire',\n            hostLogoUrl: 'https://www.ambire.com/ambire-logo.png',\n            variant: 'auto',\n            swapAsset: assetsList[selectedNetwork],\n            userAddress: walletAddress,\n            hostApiKey: RAMP_HOST_API_KEY,\n        })\n        widget.show()\n    };\n    \n    const openPayTrie = async() => {\n        setLoading(prevState => ['PayTrie', ...prevState])\n        const rightSideLabels = {\n            ethereum: 'USDC',\n            polygon: 'USDC-P',\n            'binance-smart-chain': 'USDT-B',\n        }\n\n        const URL = url.parse(PAYTRIE_PARTNER_URL, true)\n        URL.search = null\n        URL.query = {\n            ...URL.query,\n            addr: walletAddress,\n            rightSideLabel: rightSideLabels[selectedNetwork]\n        }\n\n        popupCenter({\n            url: url.format(URL),\n            title: 'Paytrie Deposit',\n            w: 450,\n            h: 700,\n        })\n        setLoading(prevState => prevState.filter(n => n !== 'PayTrie'))\n    };\n\n    const openTransak = () => {\n        const networksAlias = {\n            'avalanche': 'avaxcchain',\n            'binance-smart-chain': 'bsc'\n        }\n\n        const defaultCurency = {\n            'ethereum': 'USDC',\n            'polygon': 'USDC',\n            'arbitrum': 'ETH',\n            'avalanche': 'AVAX',\n            'binance-smart-chain': 'BNB'\n        }\n\n        const transak = new transakSDK({\n            apiKey: TRANSAK_API_KEY,\n            environment: TRANSAK_ENV,\n            networks: networksAlias[selectedNetwork] || selectedNetwork,\n            defaultCryptoCurrency: defaultCurency[selectedNetwork],\n            disableWalletAddressForm: true,\n            walletAddress,\n            themeColor: '282b33',\n            email: '',\n            redirectURL: '',\n            hostURL: window.location.origin,\n            widgetHeight: 'calc(100% - 60px)',\n            widgetWidth: '100%',\n        })\n\n        transak.init()\n\n        transak.on(transak.ALL_EVENTS, data => {\n            console.log(data)\n        })\n\n        transak.on(transak.EVENTS.TRANSAK_ORDER_SUCCESSFUL, orderData => {\n            console.log(orderData)\n            transak.close()\n        })\n    }\n\n\n    const openKriptomat = async () => {\n        setLoading(prevState => ['Kriptomat', ...prevState])\n        const kriptomatResponse = await fetchGet(`${relayerURL}/kriptomat/${walletAddress}/${selectedNetwork}`)\n        if (kriptomatResponse.success && kriptomatResponse.data && kriptomatResponse.data.url) popupCenter({\n            url: url.format(kriptomatResponse.data.url),\n            title: 'Kriptomat Deposit',\n            w: 515,\n            h: 600\n        })\n        else addToast(`Error: ${kriptomatResponse.data ? kriptomatResponse.data : 'unexpected error'}`, { error: true })\n        setLoading(prevState => prevState.filter(n => n !== 'Kriptomat'))\n    }\n\n\n    return {\n        openRampNetwork,\n        openPayTrie,\n        openTransak,\n        openKriptomat,\n        isLoading\n    }\n}\n\nexport default useProviders","import './Providers.scss'\n\nimport RAMP_LOGO from 'resources/ramp.svg';\nimport PAYTRIE_LOGO from 'resources/paytrie.svg';\nimport TRANSAK_LOGO from 'resources/transak.svg';\nimport KRIPTOMAT_LOGO from 'resources/kriptomat.svg';\n\nimport { Loading } from 'components/common'\nimport useProviders from './useProviders'\n\nexport default function Providers({ walletAddress, networkDetails, relayerURL }) {\n    const { openRampNetwork, openPayTrie, openTransak, openKriptomat, isLoading } = useProviders({ walletAddress, selectedNetwork: networkDetails.id, relayerURL })\n    \n    const providers = [\n        {\n            logo: KRIPTOMAT_LOGO,\n            name: 'Kriptomat',\n            type: 'Credit Card',\n            fees: '2.45%',\n            limits: 'up to 450 EUR/day',\n            currencies: 'EUR',\n            networks: ['ethereum', 'binance-smart-chain'],\n            onClick: () => openKriptomat()\n        },\n        {\n            logo: RAMP_LOGO,\n            name: 'Ramp',\n            type: 'Bank Transfer, Credit/Debit Card, Apple Pay',\n            fees: '0.49%-2.9%',\n            limits: '10,000EUR/m',\n            currencies: 'USD, EUR, GBP',\n            networks: ['ethereum', 'polygon', 'avalanche', 'binance-smart-chain'],\n            onClick: () => openRampNetwork()\n        },\n        {\n            logo: PAYTRIE_LOGO,\n            name: 'PayTrie',\n            type: 'Bank Transfer',\n            fees: '1% (min. $2 CAD)',\n            limits: '$2,000CAD/day',\n            currencies: 'CAD',\n            networks: ['ethereum', 'polygon', 'binance-smart-chain'],\n            onClick: () => openPayTrie()\n        },\n        {\n            logo: TRANSAK_LOGO,\n            name: 'Transak',\n            type: 'Credit/Debit card and Bank Transfer (methods availability depends on location)',\n            fees: 'from 0.5%',\n            limits: 'up to 15,000 EUR/day',\n            currencies: 'GBP, EUR, USD and many more',\n            networks: ['ethereum', 'polygon', 'avalanche', 'arbitrum', 'binance-smart-chain'],\n            onClick: () => openTransak()\n        }\n    ];\n\n    const shouldBeDisabled = (networks) => {\n        return networks.includes(networkDetails.id) ? null : 'disabled'; \n    };\n\n    return (\n        <div id=\"providers\">\n            {\n                providers.map(({ logo, name, type, fees, limits, currencies, networks, onClick }) =>\n                \n                    <div className={`provider ${shouldBeDisabled(networks)}`} key={name} onClick={onClick}>\n                        <div className=\"logo\">\n                            <img src={logo} alt={name}></img>\n                        </div>\n                        { isLoading.includes(name) ? <div> <Loading/> </div> :\n                        <div className=\"details\">\n                            <div className=\"type\">\n                                { type }\n                            </div>\n                            <div className=\"fees\">\n                                Fees: { fees }\n                            </div>\n                            <div className=\"limits\">\n                                Limits: { limits }\n                            </div>\n                            <div className=\"currencies\">\n                                Currencies: { currencies }\n                            </div>\n                        </div>\n                        }\n                    </div>\n                )\n            }\n            {\n                networkDetails.id !== 'ethereum' ? \n                    <div id=\"network-warning\">\n                        <b>NOTE:</b> Some deposit methods are unavailable on <b>{networkDetails.name}</b>. Switch to Ethereum for the widest support.\n                    </div>\n                    :\n                    null\n            }\n        </div>\n    )\n}\n","import './Deposit.scss'\n\nimport { useCallback, useEffect, useState } from 'react'\nimport { MdAccountBalance, MdAccountBalanceWallet } from 'react-icons/md'\nimport QRCode from 'qrcode'\nimport TextInput from 'components/common/TextInput/TextInput'\nimport Providers from './Providers/Providers'\n\nimport networks from 'consts/networks'\n\nexport default function Deposit({ selectedAcc, selectedNetwork, relayerURL }) {\n    const networkDetails = networks.find(({ id }) => id === selectedNetwork)\n    const [qrCodeUrl, setQrCodeUrl] = useState('')\n\n    const generateQRCode = useCallback(() => {\n        QRCode.toDataURL(selectedAcc, {\n            quality: 1,\n            margin: 1\n        }, (error, url) => {\n            if (error) return console.error(error)\n            setQrCodeUrl(url)\n        })\n    }, [selectedAcc])\n\n    useEffect(() => generateQRCode(), [generateQRCode])\n\n    return (\n        <section id=\"deposit\">\n            <div className=\"panel\">\n                <div className=\"heading\">\n                     <div className=\"title\">\n                        <MdAccountBalanceWallet size={35}/>\n                        Deposit Tokens\n                    </div>\n                    <div className=\"subtitle\">\n                        Direct Deposit\n                    </div>\n                </div>\n                <div className=\"description\">\n                    <TextInput className=\"depositAddress\" label={`Send ${networkDetails.nativeAssetSymbol}, tokens or collectibles (NFTs) to this address:`} value={selectedAcc} copy/>\n                    <img id=\"qr-code\" alt=\"QR Code\" src={qrCodeUrl}></img>\n                </div>\n                <div id=\"networks\">\n                    Following networks supported on this address:\n                    <div className=\"list\">\n                        {\n                            networks.map(({ id, icon, name }) => (\n                                <div className=\"network\" key={id}>\n                                    <div className=\"icon\" style={{backgroundImage: `url(${icon})`}}></div>\n                                    <div className=\"name\">{ name }</div>\n                                </div>\n                            ))\n                        }\n                    </div>\n                </div>\n            </div>\n            <div className=\"panel\">\n                <div className=\"heading\">\n                    <div className=\"title\">\n                        <MdAccountBalance size={35}/>\n                        Fiat Currency\n                    </div>\n                    <div className=\"subtitle\">\n                        Credit Card & Bank Transfer\n                    </div>\n                </div>\n                <div className=\"description\">\n                    Deposit with credit card to your account directly using one of our partners\n                </div>\n                <Providers walletAddress={selectedAcc} networkDetails={networkDetails} relayerURL={relayerURL}/>\n            </div>\n        </section>\n    )\n}","import './GnosisSafeApps.scss'\n\nimport { useEffect, useRef, useState } from 'react'\nimport {\n    Skeleton,\n    AmbireLoading\n} from 'components/common'\n\nexport default function GnosisSafeAppIframe({\n    selectedApp = {},\n    title = 'Ambire Plugin',\n    network,\n    selectedAcc,\n    gnosisConnect,\n    gnosisDisconnect\n}) {\n\n    const { chainId } = network || {}\n    const { url } = selectedApp || {}\n    const [loading, setLoading] = useState(true)\n    const [hash, setHash] = useState('')\n    const iframeRef = useRef(null);\n\n\n    useEffect(() => {\n        const newHash = url + chainId + selectedAcc\n        setHash(newHash)\n    }, [chainId, selectedAcc, url])\n\n    useEffect(() => {\n        setLoading(true)\n    }, [hash])\n\n    useEffect(() => {\n        gnosisConnect({\n            selectedAcc,\n            iframeRef,\n            app: selectedApp\n        });\n\n        return () => {\n            gnosisDisconnect()\n        }\n\n    }, [selectedApp, network, selectedAcc, iframeRef, gnosisConnect, gnosisDisconnect])\n\n    return (\n        <div id=\"plugin-gnosis-container\">\n            {\n                loading &&\n                <div className='iframe-placeholder'>\n                    <Skeleton >\n                        <AmbireLoading />\n                    </Skeleton>\n                </div>\n            }\n\n            {\n                url &&\n                <iframe\n                    id={hash}\n                    key={hash}\n                    ref={iframeRef}\n                    title={title}\n                    src={url}\n                    onLoad={() => setLoading(false)}\n                    style={loading ? { display: 'none' } : {}}\n                />\n            }\n        </div>)\n}\n","import { SUSHI_SWAP_FRAME, SUSHI_SWAP_FRAME_EXCEPTIONS } from 'config'\nimport GnosisSafeAppIframe from 'components/Plugins/GnosisSafeApps/GnosisSafeAppIframe'\n\nconst ambireSushi = {\n    name: \"Ambire swap\",\n    url: SUSHI_SWAP_FRAME,\n    logo: 'https://www.ambire.com/ambire-logo.png',\n    desc: 'Ambire swap'\n}\n\nexport default function SushiSwap({ network, selectedAcc, gnosisConnect, gnosisDisconnect }) {\n    let ambireSushiCurrent = ambireSushi\n    if (!!SUSHI_SWAP_FRAME_EXCEPTIONS[network.id]) ambireSushiCurrent.url = SUSHI_SWAP_FRAME_EXCEPTIONS[network.id]\n    else ambireSushiCurrent.url = SUSHI_SWAP_FRAME\n    return (\n        <GnosisSafeAppIframe\n            network={network}\n            selectedAcc={selectedAcc}\n            gnosisConnect={gnosisConnect}\n            gnosisDisconnect={gnosisDisconnect}\n            selectedApp={ambireSushiCurrent}\n            title={'Ambire swap'}\n        />\n    )\n}","import './Swap.scss';\n\nimport React from 'react';\nimport SwapComponent from './SushiIframe'\n\nexport default function Swap(props) {\n    return (\n        <section id=\"swap\">     \n            <SwapComponent {...props} />  \n        </section>\n    )\n}","import { parseUnits } from 'ethers/lib/utils'\nimport { isValidAddress, isKnownTokenOrContract } from \"lib/address\"\n\nconst validateAddress = address => {\n    if (!(address && address.length)) {\n        return {\n            success: false,\n            message: ''\n        }\n    }\n\n    if (!(address && isValidAddress(address))) {\n        return {\n            success: false,\n            message: 'Invalid address.'\n        }\n    }\n\n    return { success: true }\n}\n\nconst validateAddAuthSignerAddress = (address, selectedAcc) => {\n    const isValidAddr = validateAddress(address)\n    if (!isValidAddr.success) return isValidAddr\n\n    if (address && selectedAcc && (address === selectedAcc)) {\n        return {\n            success: false,\n            message: 'The entered address should be different than the your own account address.'\n        }\n    }\n    \n    return { success: true }\n}\n\nconst validateSendTransferAddress = (address, selectedAcc, addressConfirmed, isKnownAddress) => {\n    const isValidAddr = validateAddress(address)\n    if (!isValidAddr.success) return isValidAddr\n\n    if (address && selectedAcc && (address === selectedAcc)) {\n        return {\n            success: false,\n            message: 'The entered address should be different than the your own account address.'\n        }\n    }\n    \n    if (address && isKnownTokenOrContract(address)) {\n        return {\n            success: false,\n            message: 'You are trying to send tokens to a smart contract. Doing so would burn them.'\n        }\n    }\n\n    if (address && (!isKnownAddress(address) && !addressConfirmed)) {\n        return {\n            success: false,\n            message: `You're trying to send to an unknown address. If you're really sure, confirm using the checkbox below.`\n        }\n    }\n\n    return { success: true }\n}\n\nconst validateSendTransferAmount = (amount, selectedAsset) => {\n    if (!(amount && amount.length)) {\n        return {\n            success: false,\n            message: ''\n        }\n    }\n    \n    if (!(amount && (amount > 0))) {\n        return {\n            success: false,\n            message: 'The amount must be greater than 0.'\n        }\n    }\n\n    try {\n        if (amount && selectedAsset && selectedAsset.decimals) {\n            const parsedAmount = amount.slice(0, amount.indexOf('.') + selectedAsset.decimals + 1); // Fixed decimals in case amount is bigger than selectedAsset.decimals, otherwise would cause overflow error\n            const bigNumberAmount = parseUnits(parsedAmount, selectedAsset.decimals)\n            if (bigNumberAmount && selectedAsset.balanceRaw && bigNumberAmount.gt(selectedAsset.balanceRaw)) {\n                return {\n                    success: false,\n                    message: `The amount is greater than the asset's balance: ${selectedAsset?.balance} ${selectedAsset?.symbol}.`\n                }\n            }\n        }\n    } catch(e) {\n        console.error(e);\n    }\n\n    return { success: true }\n}\n\nconst validateSendNftAddress = (address, selectedAcc, addressConfirmed, isKnownAddress, metadata, selectedNetwork, network) => {\n    const isValidAddr = validateSendTransferAddress(address, selectedAcc, addressConfirmed, isKnownAddress)\n    if (!isValidAddr.success) return isValidAddr\n\n    if (metadata && selectedAcc && (metadata.owner?.address.toLowerCase() !== selectedAcc.toLowerCase())) {\n        return {\n            success: false,\n            message: `The NFT you're trying to send is not owned by you!`\n        }\n    }\n\n    if (selectedNetwork && network && (selectedNetwork.id !== network)) {\n        return {\n            success: false,\n            message: 'The selected network is not the correct one.'\n        }\n    }\n\n    return { success: true }\n}\n\nexport {\n    validateAddAuthSignerAddress,\n    validateSendNftAddress,\n    validateSendTransferAddress,\n    validateSendTransferAmount\n}\n","import { Resolution } from '@unstoppabledomains/resolution'\nconst resolution = new Resolution();\n\nfunction getMessage(e) {\n    if (e === 'UnregisteredDomain') return 'Domain is not registered'\n    else if (e === 'RecordNotFound') return 'Crypto record is not found (or empty)'\n    else if (e === 'UnspecifiedResolver') return 'Domain is not configured (empty resolver)'\n    else if (e === 'UnsupportedDomain') return 'Domain is not supported'\n    else return 'Domain is not registered'\n}\n\nasync function resolveAddress(domain) {\n    return resolution\n        .addr(domain, 'ETH')\n        .then(addr => ({success: true, address: addr}))\n        .catch(e => ({success: false, code: e.code, message: getMessage(e.code)}))\n}\n\nasync function resolveAddressMultiChain(domain, currency, chain) {\n    return resolution\n        .multiChainAddr(domain, currency, chain)\n        .then(addr => ({success: true, address: addr}))\n        .catch(e => ({success: false, code: e.code, message: getMessage(e.code)}))\n}\n\nasync function resolveUDomain(domain, currency, chain) {\n    const [nativeUDAddress, customUDAddress] = await Promise.all([\n        resolveAddress(domain),\n        resolveAddressMultiChain(domain, currency, chain)\n    ])\n    return (customUDAddress.success ? customUDAddress.address : nativeUDAddress.success ? nativeUDAddress.address : null)\n}\n\nexport {\n    resolveUDomain\n}","import './Addresses.scss'\n\nimport { MdOutlineAdd } from 'react-icons/md'\nimport AddressList from 'components/common/AddressBook/AddressList/AddressList'\nimport { Button } from 'components/common'\nimport { isValidAddress } from 'lib/address'\nimport { InputModal } from 'components/Modals'\nimport { useModals } from 'hooks'\n\nconst Addresses = ({ addresses, addAddress, removeAddress, onSelectAddress }) => {\n    const { showModal } = useModals()\n\n    const modalInputs = [\n        { label: 'Name', placeholder: 'My Address' },\n        { label: 'Address', placeholder: '0x', validate: value => isValidAddress(value) }\n    ]\n\n    const inputModal = <InputModal title=\"Add New Address\" inputs={modalInputs} onClose={([name, address]) => addAddress(name, address)}></InputModal>\n    const showInputModal = () => showModal(inputModal)\n\n    return (\n        <div id=\"addresses\" className='panel'>\n            <div className='title'>Address Book</div>\n            <div className=\"content\">\n                <AddressList\n                    noAccounts={true}\n                    addresses={addresses}\n                    removeAddress={removeAddress}\n                    onSelectAddress={onSelectAddress}\n                />\n            </div>\n            <div className=\"separator\"></div>\n            <Button icon={<MdOutlineAdd/>} onClick={showInputModal}>Add Address</Button>\n        </div>\n    )\n}\n\nexport default Addresses","import './Transfer.scss'\n\nimport { BsXLg } from 'react-icons/bs'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { useParams, withRouter } from 'react-router'\nimport { useEffect, useMemo, useState, useRef } from 'react'\nimport { ethers } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useToasts } from 'hooks/toasts'\nimport { TextInput, NumberInput, Button, Select, Loading, AddressBook, AddressWarning, NoFundsPlaceholder, Checkbox, ToolTip } from 'components/common'\nimport { validateSendTransferAddress, validateSendTransferAmount } from 'lib/validations/formValidations'\nimport { resolveUDomain } from 'lib/unstoppableDomains'\nimport { isValidAddress } from 'lib/address'\nimport Addresses from './Addresses/Addresses'\nimport { MdInfo } from 'react-icons/md'\nimport networks from 'consts/networks'\nimport { getTokenIcon } from 'lib/icons'\nimport { formatFloatTokenAmount } from 'lib/formatters'\n\nconst ERC20 = new Interface(require('adex-protocol-eth/abi/ERC20'))\nconst unsupportedSWPlatforms = ['Binance', 'Huobi', 'KuCoin', 'Gate.io', 'FTX']\n\nconst Transfer = ({ history, portfolio, selectedAcc, selectedNetwork, addRequest, addressBook }) => {\n    const { addresses, addAddress, removeAddress, isKnownAddress } = addressBook\n\n    const { tokenAddressOrSymbol } = useParams()\n    const { addToast } = useToasts()\n\n    const tokenAddress = isValidAddress(tokenAddressOrSymbol) ? tokenAddressOrSymbol : portfolio.tokens.find(({ symbol }) => symbol === tokenAddressOrSymbol)?.address || null\n\n    const [asset, setAsset] = useState(tokenAddress)\n    const [amount, setAmount] = useState(0)\n    const [bigNumberHexAmount, setBigNumberHexAmount] = useState('')\n    const [address, setAddress] = useState('')\n    const [uDAddress, setUDAddress] = useState('')\n    const [disabled, setDisabled] = useState(true)\n    const [addressConfirmed, setAddressConfirmed] = useState(false)\n    const [sWAddressConfirmed, setSWAddressConfirmed] = useState(false)\n    const [newAddress, setNewAddress] = useState('')\n    const [validationFormMgs, setValidationFormMgs] = useState({ \n        success: { \n            amount: false,\n            address: false\n        }, \n        messages: { \n            amount: '', \n            address: ''\n        }\n    })\n    const timer = useRef(null)\n    const assetsItems = portfolio.tokens.map(({ label, symbol, address, img, tokenImageUrl, network }) => ({\n        label: label || symbol,\n        value: address,\n        icon: img || tokenImageUrl,\n        fallbackIcon: getTokenIcon(network, address)\n    }))\n\n    const selectedAsset = portfolio.tokens.find(({ address }) => address === asset)\n\n    const { maxAmount, maxAmountFormatted } = useMemo(() => {\n        if (!selectedAsset) return {maxAmount: '0', maxAmountFormatted: '0.00'};\n        const { balanceRaw, decimals, balance } = selectedAsset\n        return {\n            maxAmount: ethers.utils.formatUnits(balanceRaw, decimals),\n            maxAmountFormatted:  formatFloatTokenAmount(balance, true, decimals)\n        }\n    }, [selectedAsset])\n\n    const showSWAddressWarning = useMemo(() => \n        Number(tokenAddress) === 0 && networks.map(({ id }) => id).filter(id => id !== 'ethereum').includes(selectedNetwork.id)\n    , [tokenAddress, selectedNetwork])\n\n    const setMaxAmount = () => onAmountChange(maxAmount)\n\n    const onAmountChange = value => {\n        if (value) {\n            const { decimals } = selectedAsset\n            const bigNumberAmount = ethers.utils.parseUnits(value, decimals).toHexString()\n            setBigNumberHexAmount(bigNumberAmount)\n        }\n\n        setAmount(value)\n    }\n\n    const sendTx = () => {\n        const recipientAddress = uDAddress ? uDAddress : address\n\n        if (uDAddress) {\n            const isAlreadyAdded = addresses.find(i => i.address === uDAddress)\n\n            if (!isAlreadyAdded) {\n                addAddress(address, uDAddress)\n            }\n        }\n\n        try {\n            const txn = {\n                to: selectedAsset.address,\n                value: '0',\n                data: ERC20.encodeFunctionData('transfer', [recipientAddress, bigNumberHexAmount])\n            }\n\n            if (Number(selectedAsset.address) === 0) {\n                txn.to = recipientAddress\n                txn.value = bigNumberHexAmount\n                txn.data = '0x'\n            }\n\n            addRequest({\n                id: `transfer_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: selectedNetwork.chainId,\n                account: selectedAcc,\n                txn\n            })\n\n            setAmount(0)\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    useEffect(() => {\n        setAmount(0)\n        setBigNumberHexAmount('')\n        setSWAddressConfirmed(false)\n    }, [asset, selectedNetwork.id])\n\n    useEffect(() => {\n        if (!selectedAsset) return\n        history.replace({ pathname: `/wallet/transfer/${Number(asset) !== 0 ? asset : selectedAsset.symbol}` })\n    }, [asset, history, selectedAsset])\n\n    useEffect(() => {\n        const isValidSendTransferAmount = validateSendTransferAmount(amount, selectedAsset)\n\n        if (address.startsWith('0x') && (address.indexOf('.') === -1)) {\n            const isValidRecipientAddress = validateSendTransferAddress(address, selectedAcc, addressConfirmed, isKnownAddress)\n            \n            setValidationFormMgs({ \n                success: { \n                    amount: isValidSendTransferAmount.success, \n                    address: isValidRecipientAddress.success \n                }, \n                messages: { \n                    amount: isValidSendTransferAmount.message ?  isValidSendTransferAmount.message : '',\n                    address: isValidRecipientAddress.message ? isValidRecipientAddress.message : ''\n                }\n            })\n\n            setDisabled(!isValidRecipientAddress.success || !isValidSendTransferAmount.success || (showSWAddressWarning && !sWAddressConfirmed))\n        } else {\n            if (timer.current) {\n                clearTimeout(timer.current)\n            }\n\n            const validateForm = async() => {\n                const UDAddress =  await resolveUDomain(address, selectedAsset ? selectedAsset.symbol: null, selectedNetwork.unstoppableDomainsChain)\n                timer.current = null\n                const isValidRecipientAddress = validateSendTransferAddress(UDAddress ? UDAddress : address, selectedAcc, addressConfirmed, isKnownAddress)\n                \n                setUDAddress(UDAddress)\n                setValidationFormMgs({ \n                    success: { \n                        amount: isValidSendTransferAmount.success, \n                        address: isValidRecipientAddress.success \n                    }, \n                    messages: { \n                        amount: isValidSendTransferAmount.message ?  isValidSendTransferAmount.message : '',\n                        address: isValidRecipientAddress.message ? isValidRecipientAddress.message : ''\n                    }\n                })\n    \n                setDisabled(!isValidRecipientAddress.success || !isValidSendTransferAmount.success || (showSWAddressWarning && !sWAddressConfirmed))\n            }\n\n            timer.current = setTimeout(async() => {\n                return validateForm().catch(console.error)\n            }, 300)\n        }\n        return () => clearTimeout(timer.current)\n    }, [address, amount, selectedAcc, selectedAsset, addressConfirmed, showSWAddressWarning, sWAddressConfirmed, isKnownAddress, addToast, selectedNetwork, addAddress])\n\n    const amountLabel = <div className=\"amount-label\">Available Amount: <span>{ maxAmountFormatted } { selectedAsset?.symbol }</span></div>\n\n    return (\n        <div id=\"transfer\">\n           <div className=\"panel\">\n               <div className=\"title\">\n                   Send\n               </div>\n               {\n                    portfolio.isBalanceLoading ?\n                        <Loading/>\n                        :\n                        assetsItems.length ? \n                            <div className=\"form\">\n                                <Select searchable defaultValue={asset} items={assetsItems} onChange={(value) => setAsset(value)}/>\n                                <NumberInput\n                                    label={amountLabel}\n                                    value={amount}\n                                    precision={selectedAsset?.decimals}\n                                    onInput={onAmountChange}\n                                    button=\"MAX\"\n                                    onButtonClick={() => setMaxAmount()}\n                                />\n                                { validationFormMgs.messages.amount && \n                                    (<div className='validation-error'><BsXLg size={12}/>&nbsp;{validationFormMgs.messages.amount}</div>)}\n                                <div id=\"recipient-field\">\n                                    <TextInput\n                                        placeholder=\"Recipient\"\n                                        info=\"Please double-check the recipient address, blockchain transactions are not reversible.\"\n                                        value={address}\n                                        onInput={setAddress}\n                                    />\n                                    <ToolTip label={!uDAddress ? 'You can use Unstoppable domains' : 'Valid Unstoppable domains domain'}>\n                                        <div id=\"udomains-logo\" className={uDAddress ? 'ud-logo-active ' : ''} />\n                                    </ToolTip>\n                                    <AddressBook \n                                        addresses={addresses.filter(x => x.address !== selectedAcc)}\n                                        addAddress={addAddress}\n                                        removeAddress={removeAddress}\n                                        newAddress={newAddress}\n                                        onClose={() => setNewAddress(null)}\n                                        onSelectAddress={address => setAddress(address)}\n                                    />\n                                </div>\n                                { validationFormMgs.messages.address && \n                                    (<div className='validation-error'><BsXLg size={12}/>&nbsp;{validationFormMgs.messages.address}</div>)}\n                                <div className=\"separator\"/>\n                                <AddressWarning\n                                    address={uDAddress ? uDAddress : address}\n                                    onAddNewAddress={() => setNewAddress(uDAddress ? uDAddress : address)}\n                                    onChange={(value) => setAddressConfirmed(value)}\n                                    isKnownAddress={isKnownAddress}\n                                />\n                                {\n                                    showSWAddressWarning ? \n                                        <Checkbox \n                                            id=\"binance-address-warning\"\n                                            label={<span id=\"binance-address-warning-label\">\n                                                I confirm this address is not a { unsupportedSWPlatforms.join(' / ') } address: <br/>\n                                                These platforms do not support ${selectedAsset?.symbol} deposits from smart wallets\n                                                <a href='https://help.ambire.com/hc/en-us/articles/4415473743506-Statement-on-MATIC-BNB-deposits-to-Binance' target='_blank' rel='noreferrer'><MdInfo size={20}/></a>\n                                            </span>}\n                                            checked={sWAddressConfirmed}\n                                            onChange={({ target }) => setSWAddressConfirmed(target.checked)}\n                                        />\n                                        :\n                                        null\n                                }\n                                <Button icon={<AiOutlineSend/>} disabled={disabled} onClick={sendTx}>Send</Button>\n                            </div>\n                            :\n                            <NoFundsPlaceholder/>\n               }\n           </div>\n           <Addresses\n                addresses={addresses}\n                addAddress={addAddress}\n                removeAddress={removeAddress}\n                onSelectAddress={address => setAddress(address)}\n            />\n        </div>\n    )\n}\n\nexport default withRouter(Transfer)\n","const AAVELendingPoolAbi = [\n    \"function getLendingPool() view returns (address address)\",\n    \"function getReservesList() view returns (address[] memory)\",\n    \"function getReserveData(address asset) view returns (tuple(uint256 availableLiquidity, uint256 totalStableDebt, uint256 totalVariableDebt, uint256 liquidityRate, uint256 variableBorrowRate, uint256 stableBorrowRate, uint256 averageStableBorrowRate, uint256 liquidityIndex, uint256 variableBorrowIndex, uint40 lastUpdateTimestamp) memory)\",\n    \"function deposit(address asset, uint256 amount, address onBehalfOf, uint16 referralCode)\",\n    \"function withdraw(address asset, uint256 amount, address to)\",\n]\n\nexport default AAVELendingPoolAbi","const AAVELendingPoolProviders = {\n    ethereum: '0xb53c1a33016b2dc2ff3653530bff1848a515c8c5',\n    polygon: '0xd05e3E715d945B59290df0ae8eF85c1BdB684744',\n    avalanche: '0xb6A86025F0FE1862B372cb0ca18CE3EDe02A318f'\n}\n\nexport default AAVELendingPoolProviders","export default __webpack_public_path__ + \"static/media/aave.58aec338.svg\";","import './Card.scss'\n\nimport { Select, Segments, NumberInput, Button, Loading } from 'components/common'\nimport { useEffect, useState, useMemo, useCallback } from 'react'\nimport { BsArrowDownSquare, BsArrowUpSquare } from 'react-icons/bs'\nimport { ethers } from 'ethers'\nimport { useModals } from 'hooks'\nimport { MdOutlineInfo } from 'react-icons/md'\n\nconst segments = [{ value: 'Deposit' }, { value: 'Withdraw' }]\n\nconst Card = ({ loading, unavailable, tokensItems, icon, details, customInfo, onTokenSelect, onValidate, moreDetails }) => {    \n    const [segment, setSegment] = useState(segments[0].value)\n    const [tokens, setTokens] = useState([])\n    const [token, setToken] = useState()\n    const [amount, setAmount] = useState(0)\n    const [disabled, setDisabled] = useState(true)\n    const { showModal } = useModals()\n\n    const currentToken = tokens.find(({ value }) => value === token)\n\n    // Sort tokens items by balance\n    const getEquToken = useCallback(token => tokensItems.find((({ address, type }) => address === token.address && (token.type === 'deposit' ? type === 'withdraw' : type === 'deposit'))), [tokensItems])\n    const sortedTokenItems = useMemo(() => [...tokensItems].sort((a, b) => (b?.balance + getEquToken(b)?.balance) - (a?.balance + getEquToken(a)?.balance)), [tokensItems, getEquToken])\n\n    const getMaxAmount = () => {\n        if (!currentToken) return 0;\n        const { balanceRaw, decimals } = currentToken\n        return ethers.utils.formatUnits(balanceRaw, decimals)\n    }\n\n    const setMaxAmount = () => setAmount(getMaxAmount(amount))\n\n    const isMaxAmount = () => {\n        return amount === getMaxAmount()\n    }\n\n    useEffect(() => {\n        if (segment === segments[0].value) setTokens(sortedTokenItems.filter(({ type }) => type === 'deposit'))\n        if (segment === segments[1].value) setTokens(sortedTokenItems.filter(({ type }) => type === 'withdraw'))\n    }, [segment, sortedTokenItems])\n\n    useEffect(() => setAmount(0), [token, segment])\n\n    useEffect(() => {\n        onTokenSelect(token)\n        setDisabled(!token || !tokens.length)\n    }, [token, onTokenSelect, tokens.length])\n\n    const availableAmount = !disabled ? `${getMaxAmount()} ${currentToken?.symbol}` : '0'\n\n    const amountLabel = <div className=\"amount-label\">Available Amount: <span title={availableAmount}>{availableAmount}</span></div>\n\n    const showMoreDetails = () => {\n        if (!!moreDetails) showModal(moreDetails)\n    }\n\n    return (\n        <div className=\"card\">\n            <div className=\"title\">\n                <img src={icon} alt=\"Icon\" />\n            </div>\n            {\n                loading ?\n                    <Loading/>\n                    :\n                    unavailable ?\n                        <div className=\"unavailable\">\n                            Unavailable on this Network\n                        </div>\n                        :\n                        <div className=\"content\">\n                            <Select\n                                searchable\n                                disabled={disabled}\n                                label=\"Choose Token\"\n                                defaultValue={token}\n                                items={tokens}\n                                onChange={(value) => setToken(value)}\n                            />\n                            {\n                                !disabled ?\n                                    <ul className=\"details\">\n                                        {\n                                            details.map(([type, value]) => (\n                                                <li key={type}><b>{type}</b> {value}</li>\n                                            ))\n                                        }\n                                    </ul>\n                                    :\n                                    <div className=\"details-placeholder\">\n                                        <div/>\n                                        <div/>\n                                        <div/>\n                                    </div>\n                            }\n                            <Segments small defaultValue={segment} segments={segments} onChange={(value) => setSegment(value)}></Segments>\n                            {\n                                customInfo ? \n                                    <div className=\"info\">\n                                        { customInfo }\n                                    </div>\n                                    :\n                                    <>\n                                        <NumberInput\n                                            disabled={!currentToken?.balance}\n                                            min=\"0\"\n                                            max={currentToken?.balance}\n                                            value={amount}\n                                            label={amountLabel}\n                                            onInput={(value) => setAmount(value)}\n                                            button=\"MAX\"\n                                            onButtonClick={setMaxAmount}\n                                        />\n                                        <div className=\"separator\"></div>\n                                        <Button \n                                            disabled={disabled || amount === '' || parseFloat(amount) <= 0 || parseFloat(amount) > currentToken?.balance}\n                                            icon={segment === segments[0].value ? <BsArrowDownSquare/> : <BsArrowUpSquare/>}\n                                            onClick={() => onValidate(segment, token, amount, isMaxAmount())}>\n                                                { segment }\n                                        </Button>\n                                    </>\n                            }\n                            <div className=\"separator\"></div>\n                            {!!moreDetails && <Button clear\n                                icon={ <MdOutlineInfo/> }\n                                onClick={() => showMoreDetails()}>\n                                    See more details\n                            </Button>}\n                        </div>\n            }\n        </div>\n    )\n}\n\nexport default Card\n","import { getTokenIcon } from 'lib/icons'\n\nlet tokens = {\n    ethereum: [\n        {\n            address: '0x030ba81f1c18d280636f32af80b9aad02cf0854e',\n            symbol: 'aWETH',\n            baseTokenAddress: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n            baseTokenSymbol: 'WETH'\n        },\n        {\n            address: '0x9ff58f4ffb29fa2266ab25e75e2a8b3503311656',\n            symbol: 'aWBTC',\n            baseTokenAddress: '0x2260fac5e5542a773aa44fbcfedf7c193bc2c599',\n            baseTokenSymbol: 'WBTC'\n        },\n        {\n            address: '0xbcca60bb61934080951369a648fb03df4f96263c',\n            symbol: 'aUSDC',\n            baseTokenAddress: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',\n            baseTokenSymbol: 'USDC'\n        },\n        {\n            address: '0x3ed3b47dd13ec9a98b44e6204a523e766b225811',\n            symbol: 'aUSDT',\n            baseTokenAddress: '0xdac17f958d2ee523a2206206994597c13d831ec7',\n            baseTokenSymbol: 'USDT'\n        },\n        {\n            address: '0x028171bca77440897b824ca71d1c56cac55b68a3',\n            symbol: 'aDAI',\n            baseTokenAddress: '0x6b175474e89094c44da98b954eedeac495271d0f',\n            baseTokenSymbol: 'DAI'\n        },\n        {\n            address: '0xffc97d72e13e01096502cb8eb52dee56f74dad7b',\n            symbol: 'aAAVE',\n            baseTokenAddress: '0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9',\n            baseTokenSymbol: 'AAVE'\n        },\n        {\n            address: '0xa361718326c15715591c299427c62086f69923d9',\n            symbol: 'aBUSD',\n            baseTokenAddress: '0x4fabb145d64652a948d72533023f6e7a623c7c53',\n            baseTokenSymbol: 'BUSD'\n        }\n    ],\n    polygon: [\n        {\n            address: '0x28424507fefb6f7f8e9d3860f56504e4e5f5f390',\n            symbol: 'amWETH',\n            baseTokenAddress: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\n            baseTokenSymbol: 'WETH'\n        },\n        {\n            address: '0x5c2ed810328349100a66b82b78a1791b101c9d61',\n            symbol: 'amWBTC',\n            baseTokenAddress: '0x1bfd67037b42cf73acf2047067bd4f2c47d9bfd6',\n            baseTokenSymbol: 'WBTC'\n        },\n        {\n            address: '0x1a13f4ca1d028320a707d99520abfefca3998b7f',\n            symbol: 'amUSDC',\n            baseTokenAddress: '0x2791bca1f2de4661ed88a30c99a7a9449aa84174',\n            baseTokenSymbol: 'USDC'\n        },\n        {\n            address: '0x60d55f02a771d515e077c9c2403a1ef324885cec',\n            symbol: 'amUSDT',\n            baseTokenAddress: '0xc2132d05d31c914a87c6611c10748aeb04b58e8f',\n            baseTokenSymbol: 'USDT'\n        },\n        {\n            address: '0x27f8d03b3a2196956ed754badc28d73be8830a6e',\n            symbol: 'amDAI',\n            baseTokenAddress: '0x8f3cf7ad23cd3cadbd9735aff958023239c6a063',\n            baseTokenSymbol: 'DAI'\n        },\n        {\n            address: '0x1d2a0e5ec8e5bbdca5cb219e649b565d8e5c3360',\n            symbol: 'amAAVE',\n            baseTokenAddress: '0xd6df932a45c0f255f85145f286ea0b292b21c90b',\n            baseTokenSymbol: 'AAVE'\n        }\n    ],\n    avalanche: [\n        {\n            address: '0xe50fa9b3c56ffb159cb0fca61f5c9d750e8128c8',\n            symbol: 'aAvaWETH',\n            baseTokenAddress: '0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab',\n            baseTokenSymbol: 'WETH.e'\n        },\n        {\n            address: '0x078f358208685046a11c85e8ad32895ded33a249',\n            symbol: 'aAvaWBTC',\n            baseTokenAddress: '0x50b7545627a5162f82a992c33b87adc75187b218',\n            baseTokenSymbol: 'WBTC.e'\n        },\n        {\n            address: '0x625e7708f30ca75bfd92586e17077590c60eb4cd',\n            symbol: 'aAvaUSDC',\n            baseTokenAddress: '0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664',\n            baseTokenSymbol: 'USDC.e'\n        },\n        {\n            address: '0x6ab707aca953edaefbc4fd23ba73294241490620',\n            symbol: 'aAvaUSDT',\n            baseTokenAddress: '0xc7198437980c041c805a1edcba50c1ce5db95118',\n            baseTokenSymbol: 'USDT.e'\n        },\n        {\n            address: '0x82e64f49ed5ec1bc6e43dad4fc8af9bb3a2312ee',\n            symbol: 'aAvaDAI',\n            baseTokenAddress: '0xd586e7f844cea2f87f50152665bcbc2c279d8d70',\n            baseTokenSymbol: 'DAI.e'\n        },\n        {\n            address: '0xf329e36c7bf6e5e86ce2150875a84ce77f477375',\n            symbol: 'aAvaAAVE',\n            baseTokenAddress: '0x63a72806098bd3d9520cc43356dd78afe5d386d9',\n            baseTokenSymbol: 'AAVE.e'\n        }\n    ],\n    'binance-smart-chain': []\n}\n\nconst getDefaultTokensItems = network => {\n    if (!tokens[network]) return []\n    return [\n        ...tokens[network].map(t => ({\n            address: t.baseTokenAddress,\n            baseTokenAddress: t.baseTokenAddress,\n            symbol: t.baseTokenSymbol,\n            name: t.baseTokenSymbol,\n            img: getTokenIcon(network, t.baseTokenAddress),\n            balance: 0,\n            balanceRaw: '0',\n            type: 'deposit'\n        })) || [],\n        ...tokens[network].map(t => ({\n            address: t.address,\n            baseTokenAddress: t.baseTokenAddress,\n            symbol: t.symbol,\n            name: t.symbol,\n            img: getTokenIcon(network, t.baseTokenAddress),\n            balance: 0,\n            balanceRaw: '0',\n            type: 'withdraw'\n        })) || []\n    ]\n}\n\nexport { getDefaultTokensItems }\n","import ERC20ABI from 'adex-protocol-eth/abi/ERC20.json'\nimport { constants, Contract } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { getProvider } from './provider'\n\nconst ERC20Interface = new Interface(ERC20ABI)\n\nconst approveToken = async (scope, networkId, accountId, address, tokenAddress, addRequestTxn, addToast, bigNumberHexAmount = constants.MaxUint256) => {\n    try {\n        const prefixId = scope.toLowerCase().replace(/' '/g, '_')\n        const provider = getProvider(networkId)\n        const tokenContract = new Contract(tokenAddress, ERC20Interface, provider)\n        const allowance = await tokenContract.allowance(accountId, address)\n\n        if (allowance.lt(bigNumberHexAmount)) {\n            addRequestTxn(`${prefixId}_approve_${Date.now()}`, {\n                to: tokenAddress,\n                value: '0x0',\n                data: ERC20Interface.encodeFunctionData('approve', [address, bigNumberHexAmount])\n            })\n        }\n    } catch(e) {\n        console.error(e)\n        addToast(`${scope} Approve Error: ${e.message || e}`, { error: true })\n    }\n}\n\nexport default approveToken","import { ethers } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { useToasts } from 'hooks/toasts'\nimport AAVELendingPoolAbi from 'consts/AAVELendingPoolAbi'\nimport AAVELendingPoolProviders from 'consts/AAVELendingPoolProviders'\nimport networks from 'consts/networks'\nimport { getProvider } from 'lib/provider'\nimport { ToolTip } from \"components/common\"\nimport AAVE_ICON from 'resources/aave.svg'\nimport Card from 'components/Wallet/Earn/Card/Card'\nimport { getDefaultTokensItems } from './defaultTokens'\nimport approveToken from 'lib/approveToken'\nimport { EarnDetailsModal } from 'components/Modals'\nimport { MdInfo } from \"react-icons/md\"\n\nconst AAVELendingPool = new Interface(AAVELendingPoolAbi)\nconst RAY = 10**27\nlet lendingPoolAddress = null\n\nconst AAVECard = ({ networkId, tokens, account, addRequest }) => {\n    const { addToast } = useToasts()\n\n    const currentNetwork = useRef()\n    const [isLoading, setLoading] = useState(true)\n    const [unavailable, setUnavailable] = useState(false)\n    const [tokensItems, setTokensItems] = useState([])\n    const [details, setDetails] = useState([])\n\n    const onTokenSelect = useCallback(async (value) => {\n        const token = tokensItems.find(({ address }) => address === value)\n        if (token) {\n            setDetails([\n                [\n                    <>\n                        <ToolTip label=\"Annual Percentage Rate\">\n                            <div>APR&nbsp;<MdInfo/></div>\n                        </ToolTip>\n                    </>, \n                    `${token.apr}%`\n                ],\n                ['Lock', 'No Lock'],\n                ['Type', 'Variable Rate'],\n            ])\n        }\n    }, [tokensItems])\n\n    const networkDetails = networks.find(({ id }) => id === networkId)\n    const defaultTokens = useMemo(() => getDefaultTokensItems(networkDetails.id), [networkDetails.id])\n    const getToken = (type, address) => tokensItems.filter(token => token.type === type).find(token => token.address === address)\n    const addRequestTxn = (id, txn, extraGas = 0) => addRequest({ id, type: 'eth_sendTransaction', chainId: networkDetails.chainId, account, txn, extraGas })\n\n    const onValidate = async (type, tokenAddress, amount) => {\n        if (type === 'Deposit') {\n            const token = getToken('deposit', tokenAddress)\n            const bigNumberHexAmount = ethers.utils.parseUnits(amount.toString(), token.decimals).toHexString()\n            await approveToken('Aave Pool', networkDetails.id, account, lendingPoolAddress, tokenAddress, addRequestTxn, addToast)\n\n            try {\n                addRequestTxn(`aave_pool_deposit_${Date.now()}`, {\n                    to: lendingPoolAddress,\n                    value: '0x0',\n                    data: AAVELendingPool.encodeFunctionData('deposit', [tokenAddress, bigNumberHexAmount, account, 0])\n                }, 60000)\n            } catch(e) {\n                console.error(e)\n                addToast(`Aave Deposit Error: ${e.message || e}`, { error: true })\n            }\n        }\n        else if (type === 'Withdraw') {\n            const token = getToken('withdraw', tokenAddress)\n            const bigNumberHexAmount = ethers.utils.parseUnits(amount.toString(), token.decimals).toHexString()\n            await approveToken('Aave Pool', networkDetails.id, account, lendingPoolAddress, tokenAddress, addRequestTxn, addToast)\n\n            try {\n                addRequestTxn(`aave_pool_withdraw_${Date.now()}`, {\n                    to: lendingPoolAddress,\n                    value: '0x0',\n                    data: AAVELendingPool.encodeFunctionData('withdraw', [tokenAddress, bigNumberHexAmount, account])\n                }, 60000)\n            } catch(e) {\n                console.error(e)\n                addToast(`Aave Withdraw Error: ${e.message || e}`, { error: true })\n            }\n        }\n    }\n\n    const loadPool = useCallback(async () => {\n        const providerAddress = AAVELendingPoolProviders[networkDetails.id]\n        if (!providerAddress) {\n            setLoading(false)\n            setUnavailable(true)\n            return\n        }\n\n        try {\n            const provider = getProvider(networkDetails.id)\n            const lendingPoolProviderContract = new ethers.Contract(providerAddress, AAVELendingPool, provider)\n            lendingPoolAddress = await lendingPoolProviderContract.getLendingPool()\n        \n            const lendingPoolContract = new ethers.Contract(lendingPoolAddress, AAVELendingPool, provider)\n            const reserves = await lendingPoolContract.getReservesList()\n            const reservesAddresses = reserves.map(reserve => reserve.toLowerCase())\n\n            const withdrawTokens = tokens.filter(({ address }) => defaultTokens.filter(t => t.type === 'withdraw' && t.address === address)[0]).map(token => ({\n                ...token,\n                address: defaultTokens.filter(t => t.type === 'withdraw' && t.address === token.address)[0].baseTokenAddress,\n                type: 'withdraw'\n            })).filter(token => token)\n\n            const depositTokens = tokens.filter(({ address }) => reservesAddresses.includes(address)).map(token => ({\n                ...token,\n                type: 'deposit'\n            })).filter(token => token)\n\n            const allTokens = (await Promise.all([\n                ...withdrawTokens,\n                ...depositTokens,\n                ...defaultTokens.filter(({ type, address }) => type === 'deposit' && !depositTokens.map(({ address }) => address).includes(address)),\n                ...defaultTokens.filter(({ type, address }) => type === 'withdraw' && !withdrawTokens.map(({ address }) => address).includes(address))\n            ]))\n            \n            const uniqueTokenAddresses = [...new Set(allTokens.map(({ address }) => address))]\n            const tokensAPR = Object.fromEntries(await Promise.all(uniqueTokenAddresses.map(async address => {\n                const data = await lendingPoolContract.getReserveData(address)\n                const { liquidityRate } = data\n                const apr = ((liquidityRate / RAY) * 100).toFixed(2)\n                return [address, apr]\n            })))\n\n\n            const tokensItems = allTokens.map(token => {\n                const arp = tokensAPR[token.address] === '0.00' \n                ? tokensAPR[token.baseTokenAddress]\n                : tokensAPR[token.address]\n                return {\n                    ...token,\n                    apr: arp,\n                    icon: token.img || token.tokenImageUrl,\n                    label: `${token.symbol} (${arp}% APR)`,\n                    value: token.address\n                }\n            })\n            // Prevent race conditions\n            if (currentNetwork.current !== networkDetails.id) return\n\n            setTokensItems(tokensItems)\n            setLoading(false)\n            setUnavailable(false)\n        } catch(e) {\n            console.error(e);\n            addToast(`Aave load pool error: ${e.message || e}`, { error: true })\n        }\n    }, [addToast, tokens, defaultTokens, networkDetails])\n\n    useEffect(() => loadPool(), [loadPool])\n    useEffect(() => {\n        currentNetwork.current = networkId\n        setLoading(true)\n    }, [networkId])\n\n    return (\n        <Card \n            loading={isLoading} \n            unavailable={unavailable} \n            icon={AAVE_ICON} details={details} \n            tokensItems={tokensItems} \n            onTokenSelect={onTokenSelect} \n            onValidate={onValidate}\n            moreDetails={<EarnDetailsModal \n                title={'What is Aave'}\n                description={'Aave is an open source and non-custodial DeFi protocol for earning interest on deposits and borrowing assets. Depositors provide liquidity to the market to earn a passive income, while borrowers are able to borrow in an overcollateralized (perpetually) or undercollateralized (one-block liquidity) fashion.'}/>}\n            />\n    )\n}\n\nexport default AAVECard\n","const YearnVaultABI = [\n    \"function token() view returns (address)\",\n    \"function deposit(uint256 _amount, address recipient)\",\n    \"function withdraw(uint256 maxShares, address recipient)\",\n    \"function pricePerShare() view returns (uint256)\",\n]\n\nexport default YearnVaultABI","export default __webpack_public_path__ + \"static/media/yearn.ac5ab573.svg\";","import { useCallback, useState } from 'react'\nimport { Yearn } from '@yfi/sdk'\nimport { MdInfo } from \"react-icons/md\"\nimport { ToolTip } from \"components/common\"\n\nimport YEARN_ICON from 'resources/yearn.svg'\n\nconst v2VaultsAddresses = { ethereum: [\n    '0xdA816459F1AB5631232FE5e97a05BBBb94970c95',\n    '0xa354F35829Ae975e850e23e9615b11Da1B3dC4DE',\n    '0xdb25cA703181E7484a155DD612b06f57E12Be5F0',\n    '0xA696a63cc78DfFa1a63E9E50587C197387FF6C7E',\n    '0x7Da96a3891Add058AdA2E826306D812C638D87a7',\n    '0xB8C3B7A2A618C552C23B1E4701109a9E756Bab67',\n    '0xe11ba472F74869176652C35D30dB89854b5ae84D',\n    '0xa258C4606Ca8206D8aA700cE2143D7db854D168c',\n    '0xFBEB78a723b8087fD2ea7Ef1afEc93d35E8Bed42',\n    '0x6d765CbE5bC922694afE112C140b8878b9FB0390',\n    '0xFD0877d9095789cAF24c98F7CCe092fa8E120775',\n    '0xd9788f3931Ede4D5018184E198699dC6d66C1915',\n], fantom: [\n    '0x0DEC85e74A92c52b7F708c4B10207D9560CEFaf0',\n    '0x695A4a6e5888934828Cb97A3a7ADbfc71A70922D',\n    '0x935601c5694f23491921c14aA235c65c2ea2c4DE',\n    '0x28F2fB6730d5dbeFc4FF9eB375Bbf33BcB36e774',\n    '0x8b8b4018F1d1e28217A1c7432E729e58e1828D59',\n    '0x2C850cceD00ce2b14AA9D658b7Cad5dF659493Db',\n    '0xDf262B43bea0ACd0dD5832cf2422e0c9b2C539dc',\n    '0x637eC617c86D24E421328e6CAEa1d92114892439',\n    '0xdC9D3bB76Df8bE1e9Ca68C7BF32293a86C829D81',\n    '0xd025b85db175EF1b175Af223BD37f330dB277786',\n    '0xEF0210eB96c7EB36AF8ed1c20306462764935607',\n    '0x27a5ce447f4E581aE69061E90521da4B5b298818',\n    '0x42639b59cf9db5339C1C5cfB5738D0ba4F828F94',\n    '0x148c05caf1Bb09B5670f00D511718f733C54bC4c',\n    '0x3B9bc1f596844Ca8a30A7710Aac7155968Db7d13',\n    '0x83a5Af7540E919dE74cf2D6d5F40e47f11D3E8d1',\n    '0x0A0b23D9786963DE69CB2447dC125c49929419d8',\n    '0x8A807b5742587024783Df3Ed2F149725C197b5eE',\n    '0xD0D1f041F93c0fF1091457618E529610C67A76de',\n    '0x24BC86a808D45f0AAd8008bd3ac2D9356007e833',\n    '0x357ca46da26E1EefC195287ce9D838A6D5023ef3',\n    '0xfF8bb7261E4D51678cB403092Ae219bbEC52aa51',\n    '0xF137D22d7B23eeB1950B3e19d1f578c053ed9715',\n    '0x7ff6fe5bDa1b26fa46880dF8AF844326DAd50d13',\n    '0x0446acaB3e0242fCf33Aa526f1c95a88068d5042',\n    '0x6EEb47BBcDf0059E5F1D6Ee844Ba793D5401bF18',\n    '0xCe2Fc0bDc18BD6a4d9A725791A3DEe33F3a23BB7',\n    '0x9DF9418837281faC4C4c1166f55D35F2799A9107',\n    '0xd817A100AB8A29fE3DBd925c2EB489D67F758DA9',\n    '0x0ed5C4effED69B39C86a8D806462d709Fb96A9E4',\n    '0xD3c19eB022CAC706c898D60d756bf1535d605e1d',\n    '0x35B51a621d78609dE7Cf25BC4e0682c7DEA38799',\n    '0x1b48641D8251c3E84ecbe3f2bD76B3701401906D',\n    '0x36A1E9dF5EfdAB9694de5bFe25A9ACc23F66BCB7',\n    '0xf2d323621785A066E64282d2B407eAc79cC04966',\n    '0x1e0F7D116ffB998EeC879B96698222D1Ee8d87CB',\n    '0xde39F0148496D42cd4e16563463fA5C6504CaA00',\n    '0x0fBbf9848D969776a5Eb842EdAfAf29ef4467698',\n    '0xA36c91E38bf24E9F2df358E47D4134a8894C6a4c',\n    '0xCbCaF8cB8cbeAFA927ECEE0c5C56560F83E9B7D9',\n    '0xcF3b91D83cD5FE15269E6461098fDa7d69138570'\t\n] }\n\nconst customVaultMetadata = {\n    '0xa258C4606Ca8206D8aA700cE2143D7db854D168c': {\n        displayName: 'WETH',\n        displayIcon: 'https://etherscan.io/token/images/weth_28.png'\n    }\n}\n\nconst useYearn = ({ tokens, networkDetails, provider, currentNetwork }) => {\n    const [tokensItems, setTokensItems] = useState([])\n    const [details, setDetails] = useState([])\n\n    const getTokenFromPortfolio = useCallback(tokenAddress => tokens.find(({ address }) => address.toLowerCase() === tokenAddress.toLowerCase()) || {}, [tokens])\n\n    const loadVaults = useCallback(async () => {\n        const yearn = new Yearn(networkDetails.chainId, { provider })\n\n        const v2Vaults = await yearn.vaults.get(v2VaultsAddresses[networkDetails.id])\n        const vaults = v2Vaults.map(({ address, metadata, symbol, token, decimals }) => {\n            const { apy, displayName, displayIcon} = {\n                ...metadata,\n                ...customVaultMetadata[address] || {}\n            }\n            const formattedAPY = (apy?.net_apy * 100).toFixed(2) || 0\n\n            return {\n                vaultAddress: address,\n                apy: formattedAPY,\n                icon: displayIcon,\n                value: address,\n                token: {\n                    address: token,\n                    symbol: displayName,\n                    decimals\n                },\n                yToken: {\n                    address,\n                    symbol,\n                    decimals\n                }\n            }\n        })\n\n        const depositTokens = vaults.map(vault => {\n            const { apy, token } = vault\n            const { address, symbol, decimals } = token\n            const { balance, balanceRaw } = getTokenFromPortfolio(address)\n            return {\n                ...vault,\n                type: 'deposit',\n                label: `${symbol} (${apy}% APY)`,\n                symbol,\n                decimals,\n                tokenAddress: token.address,\n                balance: balance || 0,\n                balanceRaw: balanceRaw || '0',\n            }\n        })\n\n        const withdrawTokens = vaults.map(vault => {\n            const { apy, yToken } = vault\n            const { address, symbol, decimals } = yToken\n            const { balance, balanceRaw } = getTokenFromPortfolio(address)\n            return {\n                ...vault,\n                type: 'withdraw',\n                label: `${symbol} (${apy}% APY)`,\n                symbol,\n                decimals,\n                tokenAddress: yToken.address,\n                balance: balance || 0,\n                balanceRaw: balanceRaw || '0',\n            }\n        })\n\n        // Prevent race conditions\n        if (currentNetwork.current !== networkDetails.id) return\n\n        setTokensItems([\n            ...depositTokens,\n            ...withdrawTokens\n        ])\n    }, [getTokenFromPortfolio, provider, networkDetails, currentNetwork])\n\n    const onTokenSelect = useCallback(address => {\n        const selectedToken = tokensItems.find(t => t.tokenAddress === address)\n        if (selectedToken) setDetails([\n            [\n                <>\n                    <ToolTip label=\"Annual Percentage Yield\">\n                        <div>APY&nbsp;<MdInfo/></div>\n                    </ToolTip>\n                </>,\n             `${selectedToken.apy}%`],\n            ['Lock', 'No Lock'],\n            ['Type', 'Variable Rate'],\n        ])\n    }, [tokensItems])\n\n    return {\n        icon: YEARN_ICON,\n        loadVaults,\n        tokensItems,\n        details,\n        onTokenSelect\n    }\n}\n\nexport default useYearn\n","export default __webpack_public_path__ + \"static/media/tesseract.3da02a6d.svg\";","import { useCallback, useEffect, useState } from 'react'\nimport { Contract } from 'ethers'\nimport ERC20ABI from 'adex-protocol-eth/abi/ERC20.json'\nimport TesseractVaultABI from 'consts/YearnTesseractVaultABI'\nimport { useToasts } from 'hooks/toasts'\nimport { MdInfo } from \"react-icons/md\"\nimport { ToolTip } from \"components/common\"\n\nimport TESSERACT_ICON from 'resources/tesseract.svg'\n\nconst POLYGON_SCAN_IMAGES = 'https://polygonscan.com/token/images'\nconst VAULTS = [\n    ['tvUSDC', '0x57bDbb788d0F39aEAbe66774436c19196653C3F2', `${POLYGON_SCAN_IMAGES}/centre-usdc_32.png`],\n    ['tvDAI', '0x4c8C6379b7cd039C892ab179846CD30a1A52b125', `${POLYGON_SCAN_IMAGES}/mcdDai_32.png`],\n    ['tvWBTC', '0x6962785c731e812073948a1f5E181cf83274D7c6', `${POLYGON_SCAN_IMAGES}/wBTC_32.png`],\n    ['tvWETH', '0x3d44F03a04b08863cc8825384f834dfb97466b9B', `${POLYGON_SCAN_IMAGES}/wETH_32.png`],\n    ['tvWMATIC', '0xE11678341625cD88Bb25544e39B2c62CeDcC83f1', `${POLYGON_SCAN_IMAGES}/wMatic_32.png`],\n]\n\nconst TESR_API_ENDPOINT = 'https://prom.tesr.finance/api/v1'\n\nconst useTesseract = ({ tokens, provider, networkId, currentNetwork }) => {\n    const { addToast } = useToasts()\n\n    const [vaults, setVaults] = useState([])\n    const [tokensItems, setTokensItems] = useState([])\n    const [details, setDetails] = useState([])\n\n    const toTokensItems = useCallback((type, vaults) => {\n        return vaults.map(({ vaultAddress, token, tToken, icon, apy }) => {\n            const { address, symbol, decimals } = type === 'deposit' ? token : tToken\n            const portfolioToken = tokens.find(t => t.address.toLowerCase() === address.toLowerCase())\n            return {\n                type,\n                vaultAddress,\n                tokenAddress: address,\n                symbol,\n                decimals,\n                icon,\n                apy,\n                label: `${symbol} (${apy}% APY)`,\n                value: vaultAddress,\n                balance: portfolioToken ? portfolioToken.balance : 0,\n                balanceRaw: portfolioToken ? portfolioToken.balanceRaw : '0',\n            }\n        })\n    }, [tokens])\n\n    const fetchVaultAPY = useCallback(async ticker => {\n        try {\n            const response = await fetch(`${TESR_API_ENDPOINT}/query?query=deriv(price{network=\"matic\",ticker=\"${ticker}\",version=\"0.4.3.1\"}[10d])*60*60*24*365`)\n            const { data, status } = await response.json()\n            if (!data || status !== 'success' || !data.result.length) return 0\n            return (data.result[0]?.value[1] * 100).toFixed(2)\n        } catch(e) {\n            console.error(e)\n            addToast(`Failed to fetch ${ticker} Vault APY`, { error: true })\n        }\n    }, [addToast])\n\n    const loadVaults = useCallback(async () => {\n        const vaults = (await Promise.all(VAULTS.map(async ([ticker, address, icon]) => {\n            try {\n                const tesseractVaultContract = new Contract(address, TesseractVaultABI, provider)\n                const tokenAddress = await tesseractVaultContract.token()\n                \n                const tokenContract = new Contract(tokenAddress, ERC20ABI, provider)\n                const [symbol, decimals] = await Promise.all([\n                    await tokenContract.symbol(),\n                    await tokenContract.decimals()\n                ])\n\n                const apy = await fetchVaultAPY(ticker)\n\n                return {\n                    vaultAddress: address,\n                    token: {\n                        address: tokenAddress,\n                        decimals,\n                        symbol,\n                    },\n                    tToken: {\n                        address,\n                        decimals,\n                        symbol: `tv${symbol}`,\n                    },\n                    icon,\n                    apy\n                }\n            } catch(e) {\n                console.error(e);\n                addToast('Fetch Tesseract Vaults: ' + e.message || e, { error: true })\n                return null\n            }\n        }))).filter(v => v)\n\n        if (networkId !== currentNetwork.current) return\n        setVaults(vaults);\n    }, [networkId, currentNetwork, fetchVaultAPY, provider, addToast])\n\n    const onTokenSelect = useCallback(address => {\n        const selectedToken = tokensItems.find(t => t.tokenAddress === address)\n        if (selectedToken) setDetails([\n            [\n                <>\n                    <ToolTip label=\"Annual Percentage Yield\">\n                        <div>APY&nbsp;<MdInfo/></div>\n                    </ToolTip>\n                </>,\n                `${selectedToken.apy}%`\n            ],\n            ['Lock', 'No Lock'],\n            ['Type', 'Variable Rate'],\n        ])\n    }, [tokensItems])\n\n    useEffect(() => {\n        const depositTokenItems = toTokensItems('deposit', vaults)\n        const withdrawTokenItems = toTokensItems('withdraw', vaults)\n\n        setTokensItems([\n            ...depositTokenItems,\n            ...withdrawTokenItems\n        ])\n    }, [vaults, toTokensItems])\n\n    return {\n        icon: TESSERACT_ICON,\n        loadVaults,\n        tokensItems,\n        details,\n        onTokenSelect\n    }\n}\n\nexport default useTesseract","import Card from 'components/Wallet/Earn/Card/Card'\n\nimport { useEffect, useState, useMemo, useRef } from 'react'\nimport { Interface, parseUnits } from 'ethers/lib/utils'\nimport networks from 'consts/networks'\nimport YEARN_TESSERACT_VAULT_ABI from 'consts/YearnTesseractVaultABI'\nimport useYearn from './useYearn'\nimport useTesseract from './useTesseract'\nimport { useToasts } from 'hooks/toasts'\nimport { getProvider } from 'lib/provider'\nimport AmbireBatcherABI from 'consts/AmbireBatcherABI.json'\nimport ERC20ABI from 'adex-protocol-eth/abi/ERC20.json'\nimport { constants, Contract } from 'ethers'\nimport { EarnDetailsModal } from 'components/Modals'\n\nconst BATCHER_ADDRESS = '0x460fad03099f67391d84c9cc0ea7aa2457969cea'\nconst BATCHER_INTERFACE = new Interface(AmbireBatcherABI)\nconst ERC20_INTERFACE = new Interface(ERC20ABI)\nconst VaultInterface = new Interface(YEARN_TESSERACT_VAULT_ABI)\nconst TESSERACT_DETAILS = {\n    title: 'What is Tesseract Finance',\n    description: 'Tesseract Finance is a DeFi yield farming protocol that brings yearn.finance to selected EVM compatible chains. Tesseract Finance enables lending and borrowing opportunities on the Polygon network.'\n}\n\nconst YEARN_DETAILS = {\n    title: 'What is Yearn.finance',\n    description: 'Yearn.finance is a suite of products in DeFi that provides yield generation, lending aggregation, and more on the blockchain. The protocol is maintained by various independent developers and is governed by YFI holders.'\n}\n\nconst YearnTesseractCard = ({ networkId, accountId, tokens, addRequest }) => {\n    const { addToast } = useToasts()\n\n    const currentNetwork = useRef()\n    const [loading, setLoading] = useState([])\n\n    const unavailable = !(networkId === 'ethereum' || networkId === 'polygon' || networkId === 'fantom')\n    const name = networkId === 'ethereum' ? 'Yearn' : 'Tesseract'\n    const networkDetails = networks.find(({ id }) => id === networkId)\n    const addRequestTxn = (id, txn, extraGas = 0) => addRequest({ id, type: 'eth_sendTransaction', chainId: networkDetails.chainId, account: accountId, txn, extraGas })\n    const provider = useMemo(() => getProvider(networkDetails.id), [networkDetails.id])\n\n    const yearn = useYearn({\n        tokens,\n        provider,\n        networkDetails,\n        currentNetwork\n    })\n\n    const tesseract = useTesseract({\n        tokens,\n        provider,\n        networkId,\n        currentNetwork\n    })\n\n    const {\n        icon,\n        loadVaults,\n        tokensItems,\n        details,\n        onTokenSelect\n    } = useMemo(() => networkId === 'polygon' ? tesseract : yearn, [networkId, yearn, tesseract])\n\n    const moreDetails = {\n        title: networkId === 'polygon' ? TESSERACT_DETAILS.title: YEARN_DETAILS.title,\n        description: networkId === 'polygon' ? TESSERACT_DETAILS.description: YEARN_DETAILS.description\n    }\n\n    const onValidate = async (type, value, amount) => {\n        const item = tokensItems.find(t => t.type === type.toLowerCase() && t.value === value)\n        if (!item) return\n\n        const { tokenAddress, vaultAddress, decimals } = item\n        const parsedAmount = amount.slice(0, amount.indexOf('.') + Number(decimals) + 1);\n        const bigNumberAmount = parseUnits(parsedAmount, decimals)\n\n        // Transfer funds to batcher\n        let transferTx = {\n            to: tokenAddress,\n            value: '0x0',\n            data: ERC20_INTERFACE.encodeFunctionData('transfer', [BATCHER_ADDRESS, bigNumberAmount.toHexString()]),\n        }\n\n        if (Number(tokenAddress) === 0) {\n            transferTx = {\n                to: BATCHER_ADDRESS,\n                value: bigNumberAmount.toHexString(),\n                data: '0x'\n            }\n        }\n\n        addRequestTxn(`batcher_call_transfer_funds_${Date.now()}`, transferTx)\n\n        if (type === 'Deposit') {\n            try {\n                // Build approve and deposit tx for batcher\n                let batchCallTxn = []\n\n                const provider = getProvider(networkId)\n                const tokenContract = new Contract(tokenAddress, ERC20_INTERFACE, provider)\n                const allowance = await tokenContract.allowance(BATCHER_ADDRESS, vaultAddress)\n\n                if (allowance.lt(constants.MaxUint256)) {\n                    batchCallTxn.push({\n                        to: tokenAddress,\n                        value: '0x0',\n                        data: ERC20_INTERFACE.encodeFunctionData('approve', [vaultAddress, constants.MaxUint256])\n                    })\n                }\n\n                batchCallTxn.push({\n                    to: vaultAddress,\n                    value: '0x0',\n                    data: VaultInterface.encodeFunctionData('deposit', [bigNumberAmount.toHexString(), accountId])\n                })\n            \n                addRequestTxn(`batcher_call_vault_deposit_${Date.now()}`, {\n                    to: BATCHER_ADDRESS,\n                    value: '0x0',\n                    data: BATCHER_INTERFACE.encodeFunctionData('batchCall', [batchCallTxn])\n                })\n            } catch(e) {\n                console.error(e)\n                addToast(`${name} Deposit Error: ${e.message || e}`, { error: true })\n            }\n        } else if (type === 'Withdraw') {\n            try {\n                const batchCallTxn = [{\n                    to: vaultAddress,\n                    value: '0x0',\n                    data: VaultInterface.encodeFunctionData('withdraw', [bigNumberAmount.toHexString(), accountId])\n                }]\n\n                addRequestTxn(`batcher_call_vault_withdraw_${Date.now()}`, {\n                    to: BATCHER_ADDRESS,\n                    value: '0x0',\n                    data: BATCHER_INTERFACE.encodeFunctionData('batchCall', [batchCallTxn])\n                })\n            } catch(e) {\n                console.error(e)\n                addToast(`${name} Withdraw Error: ${e.message || e}`, { error: true })\n            }\n        }\n    }\n\n    useEffect(() => {\n        if (unavailable) {\n\t\tsetLoading(false)\n\t\treturn\n\t}\n        async function load() {\n            await loadVaults()\n            setLoading(false)\n        }\n        load()\n    }, [unavailable, loadVaults])\n\n    useEffect(() => {\n        currentNetwork.current = networkId\n        if (!unavailable) setLoading(true)\n    }, [networkId, unavailable])\n\n    return (\n        <Card\n            loading={loading}\n            icon={icon}\n            unavailable={unavailable}\n            tokensItems={tokensItems}\n            details={details}\n            onTokenSelect={onTokenSelect}\n            onValidate={onValidate}\n            moreDetails={<EarnDetailsModal \n                title={moreDetails.title}\n                description={moreDetails.description}\n            />}\n        />\n    )\n}\n\nexport default YearnTesseractCard\n","export default __webpack_public_path__ + \"static/media/logo.ab51d124.png\";","import { useState, useCallback, useMemo, useEffect } from \"react\"\nimport Card from 'components/Wallet/Earn/Card/Card'\n\nimport AMBIRE_ICON from 'resources/logo.png'\nimport { MdInfo } from \"react-icons/md\"\nimport { ToolTip, Button } from \"components/common\"\nimport { BigNumber, constants, Contract, utils } from \"ethers\"\nimport WalletStakingPoolABI from 'consts/WalletStakingPoolABI'\nimport AdexStakingPool from 'consts/AdexStakingPool.json'\nimport supplyControllerABI from 'consts/ADXSupplyController.json'\nimport { Interface, parseUnits, formatUnits } from \"ethers/lib/utils\"\nimport { getProvider } from 'lib/provider'\nimport ERC20ABI from 'adex-protocol-eth/abi/ERC20.json'\nimport networks from 'consts/networks'\nimport { AmbireEarnDetailsModal } from 'components/Modals'\nimport { getTokenIcon } from 'lib/icons'\nimport { BsArrowUpSquare } from \"react-icons/bs\"\nimport walletABI from 'consts/walletTokenABI'\n\nconst ADX_TOKEN_ADDRESS = '0xade00c28244d5ce17d72e40330b1c318cd12b7c3'\nconst ADX_STAKING_TOKEN_ADDRESS = '0xb6456b57f03352be48bf101b46c1752a0813491a'\nconst ADX_STAKING_POOL_INTERFACE = new Interface(AdexStakingPool)\nconst ADDR_ADX_SUPPLY_CONTROLLER = '0x9d47f1c6ba4d66d8aa5e19226191a8968bc9094e'\n\nconst WALLET_TOKEN_ADDRESS = '0x88800092ff476844f74dc2fc427974bbee2794ae'\nconst WALLET_STAKING_ADDRESS = '0x47cd7e91c3cbaaf266369fe8518345fc4fc12935'\nconst WALLET_STAKING_POOL_INTERFACE = new Interface(WalletStakingPoolABI)\nconst ERC20_INTERFACE = new Interface(ERC20ABI)\nconst ZERO = BigNumber.from(0)\n\nconst secondsInYear = 60 * 60 * 24 * 365\nconst PRECISION = 1_000_000_000_000\n\nconst msToDaysHours = ms => {\n    const day = 24 * 60 * 60 * 1000\n    const days = Math.floor(ms / day)\n    const hours = Math.floor((ms % day) / (60 * 60 * 1000))\n    return days < 1 ? `${hours} hours` : `${days} days`\n}\n\nconst AmbireTokensCard = ({ networkId, accountId, tokens, rewardsData, addRequest }) => {\n    const [loading, setLoading] = useState(true)\n    const [details, setDetails] = useState([])\n    const [customInfo, setCustomInfo] = useState(null)\n    const [stakingTokenContract, setStakingTokenContract] = useState(null)\n    const [shareValue, setShareValue] = useState(ZERO)\n    const [stakingTokenBalanceRaw, SetStakingTokenBalanceRaw] = useState(null)\n    const [leaveLog, setLeaveLog] = useState(null)\n    const [lockedRemainingTime, setLockedRemainingTime] = useState(0)\n    const [addresses, setAddresses] = useState({\n        tokenAddress: '',\n        stakingTokenAddress: '',\n        stakingPoolInterface: '',\n        stakingPoolAbi: '',\n        tokenAbi: ''\n    })\n    const [selectedToken, setSelectedToken] = useState({ label: ''})\n    const [adxCurrentAPY, setAdxCurrentAPY] = useState(0.00)\n\n    const unavailable = networkId !== 'ethereum'\n    const networkDetails = networks.find(({ id }) => id === networkId)\n    const addRequestTxn = useCallback((id, txn, extraGas = 0) =>\n        addRequest({ id, type: 'eth_sendTransaction', chainId: networkDetails.chainId, account: accountId, txn, extraGas })\n    , [networkDetails.chainId, accountId, addRequest])\n    \n    const walletTokenAPY = !rewardsData.isLoading && rewardsData.data ? (rewardsData.data?.xWALLETAPY * 100).toFixed(2) : 0\n\n    const walletToken = useMemo(() => tokens.find(({ address }) => address === WALLET_TOKEN_ADDRESS), [tokens])\n    const xWalletToken = useMemo(() => tokens.find(({ address }) => address === WALLET_STAKING_ADDRESS), [tokens])\n    const adexToken = useMemo(() => tokens.find(({address}) => address === ADX_TOKEN_ADDRESS), [tokens])\n    const adexStakingToken = useMemo(() => tokens.find(({address}) => address === ADX_STAKING_TOKEN_ADDRESS), [tokens])\n\n    const balanceRaw = useMemo(() => stakingTokenBalanceRaw ? (BigNumber.from(stakingTokenBalanceRaw).mul(shareValue)).div(BigNumber.from((1e18).toString())).toString() : 0,\n    [stakingTokenBalanceRaw, shareValue])\n\n    const depositTokenItems = useMemo(() => [\n        {\n            type: 'deposit',\n            icon: getTokenIcon(networkId, WALLET_TOKEN_ADDRESS),\n            label: 'WALLET',\n            value: WALLET_TOKEN_ADDRESS,\n            symbol: 'WALLET',\n            balance: (walletToken?.balanceRaw && walletToken?.decimals) ? formatUnits(walletToken?.balanceRaw, walletToken?.decimals) : 0,\n            balanceRaw: walletToken?.balanceRaw || 0,\n        },\n        {\n            type: 'deposit',\n            icon: getTokenIcon(networkId, ADX_TOKEN_ADDRESS),\n            label: 'ADX',\n            value: ADX_TOKEN_ADDRESS,\n            symbol: 'ADX',\n            balance: (adexToken?.balanceRaw && adexToken?.decimals) ? formatUnits(adexToken?.balanceRaw, adexToken?.decimals) : 0,\n            balanceRaw: adexToken?.balanceRaw || 0,\n        },\n    ], [adexToken?.balanceRaw, adexToken?.decimals, networkId, walletToken?.balanceRaw, walletToken?.decimals])\n\n    const withdrawTokenItems = useMemo(() => [   \n        {\n            type: 'withdraw',\n            icon: getTokenIcon(networkId, WALLET_TOKEN_ADDRESS),\n            label: 'WALLET',\n            value: WALLET_STAKING_ADDRESS,\n            symbol: 'WALLET',\n            balance: formatUnits(balanceRaw, xWalletToken?.decimals),\n            balanceRaw,\n        },\n        {\n            type: 'withdraw',\n            icon: getTokenIcon(networkId, ADX_TOKEN_ADDRESS),\n            label: 'ADX',\n            value: ADX_STAKING_TOKEN_ADDRESS,\n            symbol: 'ADX',\n            balance: formatUnits(balanceRaw, adexStakingToken?.decimals),\n            balanceRaw,\n        },\n    ], [adexStakingToken?.decimals, balanceRaw, networkId, xWalletToken?.decimals])\n    \n    const tokensItems = useMemo(() => [\n        ...depositTokenItems.sort((x,y) => x.value === addresses.tokenAddress ? -1 : y.value === addresses.tokenAddress ? 1 : 0),\n        ...withdrawTokenItems.sort((x,y) => x.value === addresses.stakingTokenAddress ? -1 : y.value === addresses.stakingTokenAddress ? 1 : 0)\n    ], [addresses.stakingTokenAddress, addresses.tokenAddress, depositTokenItems, withdrawTokenItems])\n\n    const onWithdraw = useCallback(() => {\n        const { shares, unlocksAt } = leaveLog\n        addRequestTxn(`withdraw_staking_pool_${Date.now()}`, {\n            to: WALLET_STAKING_ADDRESS,\n            value: '0x0',\n            data: WALLET_STAKING_POOL_INTERFACE.encodeFunctionData('withdraw', [shares.toHexString(), unlocksAt.toHexString(), false])\n        })\n    }, [leaveLog, addRequestTxn])\n\n    const onTokenSelect = useCallback(tokenAddress => {\n        setCustomInfo(null)\n\n        const token = tokensItems.find(({ value }) => value === tokenAddress)\n\n        setSelectedToken({label: token?.label}) \n        if (token && token.type === 'withdraw' && leaveLog && (parseFloat(leaveLog.walletValue) > 0)) {\n            const unbondToolTipLabelMdg = `* Because of pending to withdraw, you are not able to unstaking more ${selectedToken.label} until unbond period is end.`\n            \n            setCustomInfo(\n                <>\n                    <div className=\"info-message\">\n                        <ToolTip label={unbondToolTipLabelMdg}>\n                            <span><b>{ msToDaysHours(lockedRemainingTime) }</b> until { parseFloat(leaveLog.walletValue).toFixed(4) } {selectedToken.label} becomes available for withdraw.&nbsp;<MdInfo/></span>\n                        </ToolTip>\n                    </div>\n                    <Button \n                        disabled={lockedRemainingTime > 0}\n                        icon={<BsArrowUpSquare/>}\n                        onClick={() => onWithdraw()}\n                    >\n                        Withdraw    \n                    </Button>\n                </>\n            )\n        }\n        const apyTooltipMsg = `Annual Percentage Yield: IN ADDITION to what you earn in ${selectedToken.label}s`\n        setDetails([\n            [\n                <>\n                    <ToolTip label={apyTooltipMsg}>\n                        <div>APY&nbsp;<MdInfo/></div>\n                    </ToolTip>\n                </>,\n                selectedToken.label === 'ADX' ? `${adxCurrentAPY.toFixed(2)}%` : rewardsData.isLoading ? `...` : `${walletTokenAPY}%`\n            ],\n            ['Lock', '20 day unbond period'],\n            ['Type', 'Variable Rate'],\n        ])\n    }, [adxCurrentAPY, leaveLog, lockedRemainingTime, onWithdraw, rewardsData.isLoading, selectedToken.label, tokensItems, walletTokenAPY])\n\n    const onValidate = async (type, tokenAddress, amount, isMaxAmount) => {\n        const bigNumberAmount = parseUnits(amount, 18)\n\n        if (type === 'Deposit') {\n            const allowance = await stakingTokenContract.allowance(accountId, addresses.stakingTokenAddress)\n\n            if (allowance.lt(constants.MaxUint256)) {\n                addRequestTxn(`approve_staking_pool_${Date.now()}`, {\n                    to: addresses.tokenAddress,\n                    value: '0x0',\n                    data: ERC20_INTERFACE.encodeFunctionData('approve', [addresses.stakingTokenAddress, constants.MaxUint256])\n                })\n            }\n\n            addRequestTxn(`enter_staking_pool_${Date.now()}`, {\n                to: addresses.stakingTokenAddress,\n                value: '0x0',\n                data: addresses.stakingPoolInterface.encodeFunctionData('enter', [bigNumberAmount.toHexString()])\n            })\n        }\n\n        if (type === 'Withdraw') {\n            let xWalletAmount\n            // In case of withdrawing the max amount of xWallet tokens, get the latest balance of xWallet.\n            // Otherwise, `stakingTokenBalanceRaw` may be outdated.\n            if (isMaxAmount) {\n                xWalletAmount = await stakingTokenContract.balanceOf(accountId)\n            } else {\n                xWalletAmount = bigNumberAmount.mul(BigNumber.from((1e18).toString())).div(shareValue)\n            }\n\n            addRequestTxn(`leave_staking_pool_${Date.now()}`, {\n                to: addresses.stakingTokenAddress,\n                value: '0x0',\n                data: addresses.stakingPoolInterface.encodeFunctionData('leave', [xWalletAmount.toHexString(), false])\n            })\n        }\n    }\n\n    useEffect(() => {\n        async function init() {\n            try {\n                // Prevent init if the card is unavailable for current network\n                if (networkId !== 'ethereum') return\n\n                const provider = getProvider(networkId)\n                \n                const tokenAddress = selectedToken.label === 'ADX' ? ADX_TOKEN_ADDRESS : WALLET_TOKEN_ADDRESS\n                const stakingTokenAddress = selectedToken.label === 'ADX' ? ADX_STAKING_TOKEN_ADDRESS : WALLET_STAKING_ADDRESS\n                const stakingPoolInterface = selectedToken.label === 'ADX' ? ADX_STAKING_POOL_INTERFACE : WALLET_STAKING_POOL_INTERFACE\n                const stakingPoolAbi = selectedToken.label === 'ADX' ? AdexStakingPool : WalletStakingPoolABI\n                const tokenAbi = selectedToken.label === 'ADX' ? ERC20ABI : walletABI\n                const stakingTokenContract = new Contract(stakingTokenAddress, stakingPoolInterface, provider)\n                const tokenContract = new Contract(tokenAddress, tokenAbi, provider)\n                const supplyController = new Contract(\n                    ADDR_ADX_SUPPLY_CONTROLLER,\n                    supplyControllerABI,\n                    provider\n                )\n                setStakingTokenContract(stakingTokenContract)\n                \n                setAddresses({\n                    tokenAddress,\n                    stakingTokenAddress,\n                    stakingPoolInterface,\n                    stakingPoolAbi,\n                    tokenAbi\n                })\n                \n                const [timeToUnbond, shareValue, sharesTotalSupply, stakingTokenBalanceRaw] = await Promise.all([\n                    stakingTokenContract.timeToUnbond(),\n                    stakingTokenContract.shareValue(),\n                    stakingTokenContract.totalSupply(),\n                    stakingTokenContract.balanceOf(accountId),\n                ])\n\n                if (selectedToken.label === 'ADX') {\n                    const [incentivePerSecond, poolTotalStaked] = await Promise.all([\n                        supplyController.incentivePerSecond(ADX_STAKING_TOKEN_ADDRESS),\n                        tokenContract.balanceOf(stakingTokenAddress),\n                    ])\n                    \n                    const currentAPY = incentivePerSecond\n                        .mul(PRECISION)\n                        .mul(secondsInYear)\n                        .div(poolTotalStaked)\n                        .toNumber() / PRECISION\n                    \n                    setAdxCurrentAPY(currentAPY * 100)\n                }\n\n                setShareValue(shareValue)\n                SetStakingTokenBalanceRaw(stakingTokenBalanceRaw)\n\n                const [leaveLogs, withdrawLogs] = await Promise.all([\n                    provider.getLogs({\n                        fromBlock: 0,\n                        ...stakingTokenContract.filters.LogLeave(accountId, null, null, null)\n                    }),\n                    provider.getLogs({\n                        fromBlock: 0,\n                        ...stakingTokenContract.filters.LogWithdraw(\n                            accountId,\n                            null,\n                            null,\n                            null,\n                            null\n                        ),\n                    })\n                ])\n\n                const userWithdraws = withdrawLogs.map(log => {\n                    const parsedWithdrawLog = stakingTokenContract.interface.parseLog(log)\n                    const { shares, unlocksAt, maxTokens, receivedTokens } =\n                        parsedWithdrawLog.args\n        \n                    return {\n                        transactionHash: log.transactionHash,\n                        type: 'withdraw',\n                        shares,\n                        unlocksAt, \n                        maxTokens, \n                        receivedTokens,\n                        blockNumber: log.blockNumber,\n                    }\n                })\n                \n                const now = new Date() / 1000\n                const userLeaves = await Promise.all(\n                    leaveLogs.map(async log => {\n                        const parsedLog = stakingTokenContract.interface.parseLog(log)\n                        const { maxTokens, shares, unlocksAt } = parsedLog.args\n\n                        const withdrawTx = userWithdraws.find(\n                            event =>\n                                event.unlocksAt.toString() === unlocksAt.toString() &&\n                                event.shares.toString() === shares.toString() &&\n                                event.maxTokens.toString() === maxTokens.toString()\n                        )\n\n                        const walletValue = sharesTotalSupply.isZero()\n                        ? ZERO\n                        : await stakingTokenContract.unbondingCommitmentWorth(\n                            accountId,\n                            shares,\n                            unlocksAt\n                        )\n\n                        return {\n                            transactionHash: log.transactionHash,\n                            type: 'leave',\n                            maxTokens,\n                            shares,\n                            unlocksAt,\n                            blockNumber: log.blockNumber,\n                            walletValue,\n                            withdrawTx\n                        }\n                    })\n                )\n                const leavesPendingToUnlock = [...userLeaves].filter(\n                    event => event.unlocksAt > now\n                )\n        \n                const leavesReadyToWithdraw = [...userLeaves].filter(\n                    event => event.unlocksAt < now && !event.withdrawTx\n                )\n\n                let leavePendingToUnlockOrReadyToWithdraw = null \n                if (leavesReadyToWithdraw.length) leavePendingToUnlockOrReadyToWithdraw = leavesReadyToWithdraw[0]\n                else if (leavesPendingToUnlock.length) leavePendingToUnlockOrReadyToWithdraw = leavesPendingToUnlock[0]\n                \n                if (leavePendingToUnlockOrReadyToWithdraw) {\n                    const {\n                        maxTokens, \n                        shares, \n                        unlocksAt, \n                        blockNumber, \n                        walletValue } = leavePendingToUnlockOrReadyToWithdraw\n                \n                    setLeaveLog({\n                        tokens: maxTokens,\n                        shares,\n                        unlocksAt,\n                        walletValue: utils.formatUnits(walletValue.toString(), 18)\n                    })\n                \n                    const { timestamp } = await provider.getBlock(blockNumber)\n                    let remainingTime = (timeToUnbond.toString() * 1000) - (Date.now() - (timestamp * 1000))\n                    if (remainingTime <= 0) remainingTime = 0\n                    setLockedRemainingTime(remainingTime)    \n                } else {\n                    setLeaveLog(null)\n                }\n            } catch(e) {\n                console.error(e)\n            }\n        }\n        init()\n        return () => {\n            setShareValue(ZERO)\n        }\n    }, [networkId, accountId, selectedToken.label])\n\n    useEffect(() => setLoading(false), [])\n\n    return (\n        <Card\n            loading={loading || (!stakingTokenBalanceRaw && !unavailable)}\n            icon={AMBIRE_ICON}\n            unavailable={unavailable}\n            tokensItems={tokensItems}\n            details={details}\n            customInfo={customInfo}\n            onTokenSelect={onTokenSelect}\n            onValidate={onValidate}\n            moreDetails={!unavailable && <AmbireEarnDetailsModal \n                apy={selectedToken.label === 'ADX'? adxCurrentAPY.toFixed(2) : walletTokenAPY}\n                accountId={accountId}\n                msToDaysHours={msToDaysHours}\n                addresses={addresses}\n                tokenLabel={selectedToken.label}\n            />}\n        />\n    )\n}\n\nexport default AmbireTokensCard\n","import './Earn.scss'\nimport AAVECard from './Cards/AAVECard/AAVECard'\nimport YearnTesseractCard from './Cards/YearnTesseractCard/YearnTesseractCard'\nimport { Loading } from 'components/common'\nimport AmbireTokensCard from './Cards/AmbireTokensCard/AmbireTokensCard'\n\nconst Earn = ({ portfolio, selectedNetwork, rewardsData, selectedAcc, addRequest }) => {\n    return (\n        <div id=\"earn\">\n            {\n                portfolio.isBalanceLoading ?\n                    <Loading/>\n                    :\n                    <div className=\"cards\">\n                        <AmbireTokensCard\n                            networkId={selectedNetwork.id}\n                            accountId={selectedAcc}\n                            tokens={portfolio.tokens}\n                            rewardsData={rewardsData}\n                            addRequest={addRequest}\n                        />\n                        <AAVECard networkId={selectedNetwork.id} tokens={portfolio.tokens} account={selectedAcc} addRequest={addRequest}/>\n                        <YearnTesseractCard\n                            networkId={selectedNetwork.id}\n                            accountId={selectedAcc}\n                            tokens={portfolio.tokens}\n                            addRequest={addRequest}\n                        />\n                    </div>\n            }\n        </div>\n    )\n}\n\nexport default Earn","import './AddAuthSigner.scss'\nimport { useState, useEffect, useCallback } from 'react'\n\nimport { TextInput, Button, DropDown, Loading } from 'components/common'\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport TrezorConnect from 'trezor-connect'\nimport { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { SelectSignerAccountModal } from 'components/Modals'\nimport { useModals } from 'hooks'\nimport { isFirefox } from 'lib/isFirefox'\nimport { ledgerGetAddresses, PARENT_HD_PATH } from \"lib/ledgerWebHID\"\nimport { validateAddAuthSignerAddress } from 'lib/validations/formValidations'\nimport { BsXLg } from 'react-icons/bs'\nimport { MdOutlineAdd } from 'react-icons/md'\nimport { LatticeModal } from 'components/Modals'\nimport { latticeInit, latticeConnect, latticeGetAddresses } from 'lib/lattice'\n\nconst AddAuthSigner = ({ selectedNetwork, selectedAcc, onAddBtnClicked }) => {\n  const [signerAddress, setSignerAddress] = useState({\n    address: '',\n    index: 0,\n  })\n  const [addAccErr, setAddAccErr] = useState('')\n  const [disabled, setDisabled] = useState(true)\n  const [modalToggle, setModalToggle] = useState(true)\n  const [signersToChoose, setChooseSigners] = useState(null)\n  const [showLoading, setShowLoading] = useState(false)\n  const [textInputInfo, setTextInputInfo] = useState('')\n  const { showModal } = useModals()\n  const [validationFormMgs, setValidationFormMgs] = useState({ \n    success: false, \n    message: ''\n  })\n  \n  async function connectLedgerAndGetAccounts() {\n    if (isFirefox()) {\n      await connectLedgerAndGetAccountsU2F()\n    } else {\n      await connectLedgerAndGetAccountsWebHID()\n    }\n  }\n\n  async function connectLedgerAndGetAccountsU2F() {\n    const provider = new LedgerSubprovider({\n      networkId: 0, // @TODO: is this needed?\n      ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n      baseDerivationPath: PARENT_HD_PATH\n    })\n    // NOTE: do not attempt to do both of these together (await Promise.all)\n    // there is a bug in the ledger subprovider (race condition), so it will think we're trying to make two connections simultaniously\n    // cause one call won't be aware of the other's attempt to connect\n      const addresses = await provider.getAccountsAsync(100)\n      setChooseSigners({ addresses, signerName: 'Ledger' })\n      setModalToggle(true)\n  }\n\n  async function connectLedgerAndGetAccountsWebHID() {\n    let error = null\n    try {\n      const addrData = await ledgerGetAddresses()\n      if (!addrData.error) {\n        if (addrData.addresses.length === 1) {\n          return onSignerAddressClicked({\n            address: addrData.addresses[0],\n            index: 0,\n          })\n        } else {\n          setChooseSigners({ address: addrData.addresses, signerName: 'Ledger' })\n          setModalToggle(true)\n        }\n      } else {\n        error = addrData.error\n      }\n    } catch (e) {\n      console.log(e)\n      if (e.statusCode && e.id === 'InvalidChannel') {\n        error = \"Invalid channel\"\n      } else if (e.statusCode && e.statusCode === 25873) {\n        error = \"Please make sure your ledger is connected and the ethereum app is open\"\n      } else {\n        error = e.message\n      }\n    }\n\n    if (error) {\n      setAddAccErr(`Ledger error: ${error.message || error}`)\n    }\n  }\n\n  async function connectTrezorAndGetAccounts() {\n    /*\n      const engine = new Web3ProviderEngine({ pollingInterval: this.pollingInterval })\n      engine.addProvider(new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect, ...this.config }))\n      engine.addProvider(new CacheSubprovider())\n      engine.addProvider(new RPCSubprovider(this.url, this.requestTimeoutMs))\n      */\n    const provider = new TrezorSubprovider({\n      trezorConnectClientApi: TrezorConnect,\n    })\n    const addresses = await provider.getAccountsAsync(100)\n    setChooseSigners({ addresses, signerName: 'Trezor' })\n    setModalToggle(true)\n  }\n\n  async function connectWeb3AndGetAccounts() {\n    // @TODO: pending state; should bein the LoginORSignup (AddAccount) component\n    if (typeof window.ethereum === 'undefined') {\n      // @TODO catch this\n      throw new Error('MetaMask not available')\n    }\n    const ethereum = window.ethereum\n    const web3Accs = await ethereum.request({ method: 'eth_requestAccounts' })\n    if (!web3Accs.length) throw new Error('No accounts connected')\n    if (web3Accs.length === 1)\n      return onSignerAddressClicked({\n        address: web3Accs[0],\n        index: 0,\n      })\n\n    setChooseSigners({ addresses: web3Accs, signerName: 'Web3' })\n    setModalToggle(true)\n  }\n\n  const setLatticeAddresses = ({ addresses, deviceId, commKey, isPaired }) => {\n    setChooseSigners({\n      addresses, signerName: 'Lattice', signerExtra: {\n        type: 'Lattice',\n        deviceId: deviceId,\n        commKey: commKey,\n        isPaired: isPaired\n      }\n    })\n\n    setModalToggle(true)\n  }\n  \n  async function connectGridPlusAndGetAccounts() {\n    if (selectedAcc.signerExtra && \n      selectedAcc.signerExtra.type === 'Lattice' && \n      selectedAcc.signerExtra.isPaired) {\n        const { commKey, deviceId } = selectedAcc.signerExtra\n        const client = latticeInit(commKey)\n\n        setShowLoading(true)\n\n        const { isPaired, errConnect } = await latticeConnect(client, deviceId)\n        if (errConnect) {\n          setShowLoading(false)\n          setAddAccErr(errConnect.message || errConnect)\n\n          return\n        }\n\n        if (!isPaired) {\n          setShowLoading(false)\n          // Canceling the visualization of the secret code on the device's screen.\n          client.pair('')\n          setAddAccErr(`The Lattice device is not paired! Please re-add your account!.`, { timeout: 30000 })\n          \n          return \n        }\n\n        const { res, errGetAddresses } = await latticeGetAddresses(client)\n        if (errGetAddresses) {\n            setShowLoading(false)\n            setAddAccErr(`Lattice: ${errGetAddresses}`, { error: true })\n\n            return\n        }\n        \n        if (res) {\n          setShowLoading(false)\n          setLatticeAddresses({ addresses: res, deviceId, commKey, isPaired: true })\n        }\n      } else {\n        showModal(<LatticeModal addresses={setLatticeAddresses} />)\n      }\n  }\n\n  const modalHandler = () => {\n    setModalToggle(prevState => !prevState)\n  }\n\n  const wrapErr = async fn => {\n    setAddAccErr('')\n    try {\n      await fn()\n    } catch (e) {\n      console.error(e)\n      setAddAccErr(`Unexpected error: ${e.message || e}`)\n    }\n  }\n\n  const onSignerAddressClicked = useCallback(value => {\n    setSignerAddress(value)\n    modalHandler()\n    if (signersToChoose) setTextInputInfo(`${signersToChoose.signerName} address # ${value.index + 1}`)\n  }, [signersToChoose])\n\n  useEffect(() => {\n    if (modalToggle && signersToChoose)\n      showModal(\n        <SelectSignerAccountModal\n          signersToChoose={signersToChoose.addresses}\n          selectedNetwork={selectedNetwork}\n          onSignerAddressClicked={onSignerAddressClicked}\n          description={`You will authorize the selected ${signersToChoose.signerName} address to sign transactions for your account.`}\n        />\n      )\n  }, [modalToggle, onSignerAddressClicked, selectedNetwork, showModal, signersToChoose])\n\n  const addFromSignerButtons = (\n    <div className=\"wallet-btns-wrapper\">\n      <Button\n        onClick={() => wrapErr(connectTrezorAndGetAccounts)}\n      >\n        <div\n          className=\"icon\"\n          style={{ backgroundImage: 'url(./resources/trezor.png)' }}\n        />\n        Trezor\n      </Button>\n      <Button\n        onClick={() => wrapErr(connectLedgerAndGetAccounts)}\n      >\n        <div\n          className=\"icon\"\n          style={{ backgroundImage: 'url(./resources/ledger.png)' }}\n        />\n        Ledger\n      </Button>\n      <Button\n        onClick={() => wrapErr(connectGridPlusAndGetAccounts)}\n      >\n        <div\n          className=\"icon\"\n          style={{ backgroundImage: 'url(./resources/grid-plus.png)' }}\n        />\n        Grid+ Lattice1\n      </Button>\n      <Button\n        onClick={() => wrapErr(connectWeb3AndGetAccounts)}\n      >\n        <div\n          className=\"icon\"\n          style={{ backgroundImage: 'url(./resources/metamask.png)' }}\n        />\n        Metamask / Browser\n      </Button>\n    </div>\n  )\n\n  const onTextInput = value => {\n    if (textInputInfo.length) setTextInputInfo('')\n    setSignerAddress({ ...signerAddress, address: value })\n  }\n\n  useEffect(() => {\n    const isAddressValid = validateAddAuthSignerAddress(signerAddress.address, selectedAcc.id)\n    \n    setDisabled(!isAddressValid.success)\n\n    setValidationFormMgs({ \n      success: isAddressValid.success, \n      message: isAddressValid.message ? isAddressValid.message : ''\n    })\n\n  }, [selectedAcc, signerAddress.address])\n\n  return (\n    <div className=\"content\">\n      {showLoading && \n      (<>\n        <h3>It may takes a while.</h3>\n        <h3>Please wait...</h3>\n        <Loading />\n      </>)}\n      {!showLoading && (<div className=\"signer\">\n        <div className=\"signer-address-input\">\n          <TextInput\n            placeholder=\"Enter signer address\"\n            className=\"depositAddress\"\n            value={signerAddress.address}\n            info={textInputInfo}\n            onInput={onTextInput}\n          />\n          <DropDown\n            style={{ height: '60px' }}\n            title=\"Connect signer\"\n            closeOnClick\n          >\n            {addFromSignerButtons}\n          </DropDown>\n        </div>\n        <div className=\"btns-wrapper\">\n          <Button\n            disabled={disabled}\n            icon={<MdOutlineAdd/>}\n            onClick={() => onAddBtnClicked(signerAddress)}\n            small\n          >\n            Add\n          </Button>\n        </div>\n      </div>)}\n      { validationFormMgs.message && \n        (<div className='validation-error'><BsXLg size={12}/>&nbsp;{validationFormMgs.message}</div>) \n      }\n      {addAccErr ? <h3 className=\"error\">{addAccErr}</h3> : <></>}\n    </div>\n  )\n}\n\nexport default AddAuthSigner\n","import './OtpTwoFAModal.scss'\n\nimport { Modal, Button, TextInput, Loading } from 'components/common'\nimport { authenticator } from '@otplib/preset-default'\nimport QRCode from 'qrcode'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport { useToasts } from 'hooks/toasts'\nimport { fetchPost } from 'lib/fetch'\nimport { useModals } from 'hooks'\nimport { ethers } from 'ethers'\nimport { CountdownTimer } from 'components/common'\n\nconst TIMER_IN_SECONDS = 300\n\nconst OtpTwoFAModal = ({ relayerURL, selectedAcc, setCacheBreak }) => {\n    const { hideModal } = useModals()\n    const { addToast } = useToasts()\n\n    const secret = useMemo(() => authenticator.generateSecret(20), []) \n    \n    const [isLoading, setLoading] = useState(false)\n    const [imageURL, setImageURL] = useState(null)\n    const [receivedOtp, setReceivedOTP] = useState('')\n    const [showSecret, setShowSecret] = useState(false)\n    const [emailConfirmCode, setEmailConfirmCode] = useState('')\n    const [isTimeIsUp, setIsTimeIsUp] = useState(false)\n    const [hexSecret, setHexSecret] = useState()\n    \n    useEffect(() => {\n      setHexSecret(ethers.utils.hexlify(ethers.utils.toUtf8Bytes(JSON.stringify({ otp: secret, timestamp: new Date().getTime() }))))\n    }, [secret])\n\n    const generateQR = useCallback(() => {\n        const otpAuth = authenticator.keyuri(\n            selectedAcc.email,\n            'Ambire Wallet',\n            secret\n        )\n\n        const qrCodeOptions = {\n            quality: 1,\n            margin: 1,\n        }\n        \n        QRCode.toDataURL(otpAuth, qrCodeOptions, (error, url) => {\n            if (error) {\n                console.log(error)\n                addToast(error.message, { error: true })\n            } else {\n                setImageURL(url)\n            }\n        })\n    }, [addToast, secret, selectedAcc.email])\n\n    useEffect(generateQR, [generateQR])\n\n    const handleSubmit = e => {\n        e.preventDefault()\n        setLoading(true)\n        verifyOTP()\n    }\n\n    const sendEmail = async() => {\n        if (!relayerURL) {\n            addToast('Email/pass accounts not supported without a relayer connection', { error: true })\n            return\n        }\n        \n        const { success, confCodeRequired } = await fetchPost(\n            // network doesn't matter when signing\n            `${relayerURL}/second-key/${selectedAcc.id}/ethereum/sign`, { \n                toSign: hexSecret \n            })\n        \n        if (confCodeRequired !== 'email') addToast('Expected email verification. This should never happen, please report this on help.ambire.com', { error: true })\n        if (success && confCodeRequired === 'email') addToast('A confirmation code was sent to your email, please enter it along...')\n        \n    }\n    \n    const verifyOTP = async () => {\n        const isValid = authenticator.verify({ token: receivedOtp, secret })\n        \n        if (!isValid) {\n            addToast('Invalid or outdated OTP code entered. If you keep seeing this, please ensure your system clock is synced correctly.', { error: true })\n            setLoading(false)\n            return\n        }\n\n        try {\n            if (!emailConfirmCode.length) {\n                addToast('Please enter the code from authenticator app.')\n                return\n            }\n\n            const { success, signatureEthers, message } = await fetchPost(\n                // network doesn't matter when signing\n                `${relayerURL}/second-key/${selectedAcc.id}/ethereum/sign`, {\n                    toSign: hexSecret, \n                    code: emailConfirmCode\n                })\n            \n            if (!success) {\n                throw new Error(message || 'unknown error')\n            }\n            \n            const resp = await fetchPost(\n                `${relayerURL}/identity/${selectedAcc.id}/modify`, { \n                    otp: hexSecret, \n                    sig: signatureEthers \n                })\n\n            if (resp.success) {\n                addToast(`You have successfully enabled two-factor authentication.`)\n                setCacheBreak()\n                resetForm()\n                setLoading(false)\n                hideModal()\n            } else {\n                throw new Error(`${resp.message || 'unknown error'}`)\n            }\n        } catch (e) {\n            console.error(e)\n            addToast('OTP: ' + e.message || e, { error: true })\n            setLoading(false)\n        }\n    }\n\n    const resetForm = () => {\n        setEmailConfirmCode('')\n        setReceivedOTP('')\n    }\n\n    const handleTimeIsUp = (val) => {\n        setIsTimeIsUp(val)\n    }\n\n    return (\n        <Modal\n            title=\"Two Factor Authentication\" \n            topLeft={(<CountdownTimer seconds={TIMER_IN_SECONDS} setTimeIsUp={handleTimeIsUp}/>)}\n        >\n            <div id=\"otp-auth\">\n                {isTimeIsUp && <div className='timer-reset-msg'>Please reopen the modal to reset the session.</div>}\n                <div className=\"img-wrapper\">\n                    <img alt=\"qr-code\" src={imageURL}></img>\n                </div>\n                <div className=\"img-msg\" style={{ marginBottom: showSecret ? '0px' : '22px'}}>\n                    {!showSecret && \n                    (<span className=\"click-here\" onClick={() => { setShowSecret(prevState => !prevState) }}>\n                        Unable to scan code? Click here.\n                    </span>)}\n                    {showSecret && (<><span>Enter this OTP in your app:</span><div>{secret}</div></>)}\n                </div>\n                <form onSubmit={handleSubmit}>\n                    <div>\n                        <h4>Confirmation code sent via Email</h4>\n                        <div className='input-wrapper'>\n                            <TextInput\n                                small\n                                pattern='[0-9]+'\n                                title='Confirmation code should be 6 digits'\n                                autoComplete='nope'\n                                required minLength={6} maxLength={6}\n                                placeholder='Confirmation code'\n                                value={emailConfirmCode}\n                                onInput={value => setEmailConfirmCode(value)}\n                            ></TextInput>\n                            \n                            <Button type=\"button\" small disabled={isTimeIsUp} onClick={sendEmail}>Send Email</Button>\n                        </div>\n                        <h4>Authenticator app code</h4>\n                        <TextInput\n                            placeholder=\"Enter the code from authenticator app\"\n                            onInput={setReceivedOTP}\n                            value={receivedOtp}\n                            pattern=\"[0-9]{6}\"\n                            required\n                        />\n                    </div>\n                    <div className=\"buttons\">\n                        {!isLoading ? (<Button type=\"submit\" disabled={isTimeIsUp}>Enable 2FA</Button>) : (<Button disabled><Loading /></Button>)}\n                    </div>\n                </form>\n            </div>\n        </Modal>\n    )\n}\n\nexport default OtpTwoFAModal\n","import './OtpTwoFADisableModal.scss'\nimport { useModals } from 'hooks'\nimport { fetchPost } from 'lib/fetch'\nimport { Modal, Button, TextInput, Loading } from 'components/common'\nimport { useState, useEffect } from 'react'\nimport { useToasts } from 'hooks/toasts'\nimport { ethers } from 'ethers'\nimport { CountdownTimer } from 'components/common'\n\nconst TIMER_IN_SECONDS = 300\n\nconst OtpTwoFADisableModal = ({ relayerURL, selectedAcc, setCacheBreak }) => {\n    const { hideModal } = useModals()\n    const { addToast } = useToasts()\n    const [isLoading, setLoading] = useState(false)\n\n    const [receivedOtp, setReceivedOTP] = useState('')\n    const [isTimeIsUp, setIsTimeIsUp] = useState(false)\n    const [hexSecret, setHexSecret] = useState()\n    \n    useEffect(() => {\n      setHexSecret(ethers.utils.hexlify(ethers.utils.toUtf8Bytes(JSON.stringify({ otp: null, timestamp: new Date().getTime() }))))\n    }, [])\n\n    const handleSubmit = e => {\n      e.preventDefault()\n      setLoading(true)\n      disableOTP()\n    }\n\n    const disableOTP = async() => {\n      try {\n          const { success, signatureEthers, message } = await fetchPost(\n            // network doesn't matter when signing\n            `${relayerURL}/second-key/${selectedAcc.id}/ethereum/sign`, { \n              toSign: hexSecret, \n              code: receivedOtp \n            })\n          if (!success) {\n              throw new Error(message || 'unknown error')\n          }\n\n          const resp = await fetchPost(\n            `${relayerURL}/identity/${selectedAcc.id}/modify`, { \n              otp: hexSecret, \n              sig: signatureEthers \n            })\n\n          if (resp.success) {\n              addToast(`You have successfully disabled two-factor authentication.`)\n              setCacheBreak() \n              resetForm()\n              setLoading(false)\n              hideModal()\n          } else {\n              throw new Error(`${resp.message || 'unknown error'}`)\n          }\n      } catch (e) {\n          console.error(e)\n          addToast('OTP: ' + e.message || e, { error: true })\n          setLoading(false)\n      }\n    }\n\n    const resetForm = () => {\n      setReceivedOTP('')\n    }\n\n    const handleTimeIsUp = (val) => {\n        setIsTimeIsUp(val)\n    }\n\n    return (\n        <Modal id='disable-otp-modal' \n          title=\"Disable Two Factor Authentication\" \n          topLeft={(<CountdownTimer seconds={TIMER_IN_SECONDS} setTimeIsUp={handleTimeIsUp}/>)}\n        >\n          <form onSubmit={handleSubmit}>\n            {isTimeIsUp && <div className='timer-reset-msg'>Please reopen the modal to reset the session.</div>}\n            <div>\n              <h4>Authenticator app code</h4>\n                <TextInput\n                    placeholder=\"Enter the code from authenticator app\"\n                    onInput={setReceivedOTP}\n                    value={receivedOtp}\n                    pattern=\"[0-9]{6}\"\n                    required\n                />\n            </div>\n            <div className=\"buttons\">\n              {!isLoading ? (<Button type=\"submit\" disabled={isTimeIsUp}>Disable 2FA</Button>) : (<Button disabled><Loading /></Button>)}\n            </div>\n          </form>\n        </Modal>\n    )\n}\n\nexport default OtpTwoFADisableModal\n","import './Backup.scss'\n\nimport { BiExport, BiImport } from \"react-icons/bi\"\nimport { Button } from \"components/common\"\n\nconst Backup = ({ selectedAccount, onOpen, onAddAccount }) => {\n    const onBackupDownloaded = () => {\n        onAddAccount({\n            ...selectedAccount,\n            downloadedBackup: true\n        })\n    }\n\n    return (\n        <div id=\"backup\">\n            <div className=\"panel\">\n                <div className=\"panel-title\">Backup current account</div>\n                <div className=\"content\" id=\"export\">\n                    <a\n                        type=\"button\"\n                        href={`data:text/json;charset=utf-8,${encodeURIComponent(\n                            JSON.stringify(selectedAccount)\n                        )}`}\n                        download={`${selectedAccount.id}.json`}\n                    >\n                        <Button icon={<BiExport/>} onClick={onBackupDownloaded}>Export</Button>\n                    </a>\n                    <div style={{ fontSize: '0.9em' }}>\n                        Downloads a backup of your current account ({selectedAccount.id.slice(0, 5)}...{selectedAccount.id.slice(-3)}) encrypted with\n                        your password. It's safe to store in iCloud/Google Drive, but you cannot use it to restore your account if you forget the password.\n                        <b> You can only import this in Ambire</b>, it's not importable in other wallets.\n                    </div>\n                </div>\n            </div>\n            <div className=\"panel\">\n                <div className=\"panel-title\">Import an account from backup</div>\n                <div className=\"content\" id=\"import\">\n                    <Button icon={<BiImport/>} onClick={onOpen}>Import</Button>\n                    <p>...or you can drop an account backup JSON file on this page</p>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Backup","import { MdOutlineWarningAmber } from \"react-icons/md\"\nimport buildRecoveryBundle from 'lib/recoveryBundle'\n\nconst PendingRecoveryNotice = ({ recoveryLock, showSendTxns, selectedAccount, selectedNetwork }) => {\n    const isAlreadyInitiated = recoveryLock && recoveryLock.status !== 'requestedButNotInitiated'\n    const createRecoveryRequest = async () => {\n        if (isAlreadyInitiated) return\n        const bundle = buildRecoveryBundle(\n            selectedAccount.id,\n            selectedNetwork.id,\n            selectedAccount.signer.preRecovery,\n            { signer: selectedAccount.signer, primaryKeyBackup: selectedAccount.primaryKeyBackup }\n        )\n        showSendTxns(bundle)\n    }\n    const recoveryLockStatus = recoveryLock ? recoveryLock.status : 'requestedButNotInitiated'\n    const remainingTime = seconds => {\n        if (seconds > 86400) return `${Math.ceil(seconds / 86400)} days`\n        else return `${Math.ceil(seconds/1440)} hours`\n    }\n    const style = isAlreadyInitiated\n        ? (recoveryLockStatus === 'ready' ? { 'background-color': '#6bad6b' } : {})\n        : { cursor: 'pointer' }\n    return (\n        <div className=\"notice\" style={style} onClick={() => createRecoveryRequest()}>\n            <MdOutlineWarningAmber/>\n            {\n                recoveryLockStatus === 'requestedButNotInitiated' ?\n                    <>Password reset requested but not initiated for {selectedNetwork.name}. Click here to initiate it.</> :\n                recoveryLockStatus === 'initiationTxnPending' ?\n                    <>Initiation transaction is currently pending. Once mined, you will need to wait {remainingTime(recoveryLock.timelock)} for the reset to be done on {selectedNetwork.name}.</> :\n                recoveryLockStatus === 'waitingTimelock' ?\n                    <>Password reset on {selectedNetwork.name} is currently pending. {remainingTime(recoveryLock.remaining)} remaining.</> :\n                recoveryLockStatus === 'ready' ?\n                    <>Password reset on {selectedNetwork.name} is now complete! You can start signing transactions with your new password!</> :\n                recoveryLockStatus === 'failed' ?\n                    <>Something went wrong while resetting your password. Please contact support at help.ambire.com</> : null\n            }\n        </div>\n    )\n}\n\nexport default PendingRecoveryNotice","import './Security.scss'\n\nimport { MdOutlineRemove } from 'react-icons/md'\nimport { RiDragDropLine } from 'react-icons/ri'\nimport { useState, useEffect, useCallback } from 'react'\nimport { Loading, TextInput, Button } from 'components/common'\nimport { Interface, AbiCoder, keccak256 } from 'ethers/lib/utils'\nimport accountPresets from 'consts/accountPresets'\nimport privilegesOptions from 'consts/privilegesOptions'\nimport { useRelayerData, useModals } from 'hooks'\nimport { ResetPasswordModal } from 'components/Modals'\nimport AddAuthSigner from './AddAuthSigner/AddAuthSigner'\nimport { useToasts } from 'hooks/toasts'\nimport { useHistory } from 'react-router-dom'\nimport { useDropzone } from 'react-dropzone'\nimport { MdInfoOutline } from 'react-icons/md'\nimport { validateImportedAccountProps, fileSizeValidator } from 'lib/validations/importedAccountValidations'\nimport OtpTwoFAModal from 'components/Modals/OtpTwoFAModal/OtpTwoFAModal'\nimport OtpTwoFADisableModal from 'components/Modals/OtpTwoFADisableModal/OtpTwoFADisableModal'\nimport Backup from './Backup/Backup'\nimport PendingRecoveryNotice from './PendingRecoveryNotice/PendingRecoveryNotice'\nimport { getName } from 'lib/humanReadableTransactions'\n\nconst IDENTITY_INTERFACE = new Interface(\n  require('adex-protocol-eth/abi/Identity5.2')\n)\n\nconst REFRESH_INTVL = 40000\n\nconst Security = ({\n  relayerURL,\n  selectedAcc,\n  selectedNetwork,\n  accounts,\n  addRequest,\n  showSendTxns,\n  onAddAccount\n}) => {\n  const { showModal } = useModals()\n  const [ cacheBreak, setCacheBreak ] = useState(() => Date.now())\n  \n  useEffect(() => {\n    if (Date.now() - cacheBreak > 30000) setCacheBreak(Date.now())\n    const intvl = setTimeout(() => setCacheBreak(Date.now()), REFRESH_INTVL)\n    return () => clearTimeout(intvl)\n  }, [cacheBreak])\n\n  const url = relayerURL\n    ? `${relayerURL}/identity/${selectedAcc}/${selectedNetwork.id}/privileges?cacheBreak=${cacheBreak}`\n    : null\n  const { data, errMsg, isLoading } = useRelayerData(url)\n  const privileges = data ? data.privileges : {}\n  const otpEnabled = data ? data.otpEnabled : null\n  const recoveryLock = data && data.recoveryLock\n  const { addToast } = useToasts()\n  const history = useHistory()\n  const selectedAccount = accounts.find(x => x.id === selectedAcc)\n\n  const craftTransaction = (address, privLevel) => {\n    return {\n      to: selectedAcc,\n      data: IDENTITY_INTERFACE.encodeFunctionData('setAddrPrivilege', [\n        address,\n        privLevel,\n      ]),\n      value: '0x00',\n    }\n  }\n\n  const addTransactionToAddRequest = txn => {\n    try {\n      addRequest({\n        id: `setPriv_${txn.data}`,\n        type: 'eth_sendTransaction',\n        txn: txn,\n        chainId: selectedNetwork.chainId,\n        account: selectedAcc,\n      })\n    } catch (err) {\n      console.error(err)\n      addToast(`Error: ${err.message || err}`, { error: true })\n    }\n  }\n\n  const onRemoveBtnClicked = key => {\n    const txn = craftTransaction(key, privilegesOptions.false)\n    addTransactionToAddRequest(txn)\n  }\n\n  const onAddBtnClickedHandler = newSignerAddress => {\n    const txn = craftTransaction(\n      newSignerAddress.address,\n      privilegesOptions.true\n    )\n    addTransactionToAddRequest(txn)\n  }\n\n  const onMakeDefaultBtnClicked = async (account, address, isQuickAccount) => {\n    if (isQuickAccount) {\n      return addToast((<span>To make this signer default, please <a href='#/email-login'>please login with the email</a></span>), {url: '/#/email-login', error: true})\n    } else {\n      onAddAccount({ ...account, signer: { address: address }, signerExtra: null })\n      addToast(\n        'This signer is now the default. If it is a hardware wallet, you will have to re-add the account manually to connect it directly, otherwise you will have to add this signer address to your web3 wallet.',\n        { timeout: 30000 }\n      )\n    }\n\n    history.push('/wallet/security')\n  }\n\n  const showResetPasswordModal = () => {\n    if (!relayerURL) {\n      addToast('Unsupported without a connection to the relayer', { error: true })\n      return\n    }\n    showModal(<ResetPasswordModal\n      account={selectedAccount}\n      selectedNetwork={selectedNetwork}\n      relayerURL={relayerURL}\n      onAddAccount={onAddAccount}\n      showSendTxns={showSendTxns}\n    />)\n  }\n\n  const handleEnableOtp = () => {\n    if (!relayerURL) {\n      return addToast('Unsupported without a connection to the relayer', { error: true })\n    }\n\n    showModal(<OtpTwoFAModal \n      relayerURL={relayerURL} \n      selectedAcc={selectedAccount} \n      setCacheBreak={() => { setCacheBreak(Date.now()) }} \n      />)\n  }\n\n  const handleDisableOtp = async() => {\n    if (!relayerURL) {\n      return addToast('Unsupported without a connection to the relayer', { error: true })\n    }\n    \n    showModal(<OtpTwoFADisableModal \n      relayerURL={relayerURL} \n      selectedAcc={selectedAccount} \n      setCacheBreak={() => { setCacheBreak(Date.now()) }} \n      />)\n  }\n  \n  // JSON import\n  const onDrop = useCallback((acceptedFiles, rejectedFiles) => {\n    const reader = new FileReader()\n    \n    if (rejectedFiles.length) {\n      addToast(`${rejectedFiles[0].file.path} - ${(rejectedFiles[0].file.size / 1024).toFixed(2)} KB. ${rejectedFiles[0].errors[0].message}`, { error: true })\n    }\n\n    if (acceptedFiles.length){\n      const file = acceptedFiles[0]\n\n      reader.readAsText(file,'UTF-8')\n      reader.onload = readerEvent => {\n        const content = readerEvent.target.result\n        const fileContent = JSON.parse(content)\n        const validatedFile = validateImportedAccountProps(fileContent)\n        \n        if (validatedFile.success) onAddAccount(fileContent, { select: true })\n        else addToast(validatedFile.message, { error: true})\n      }\n    }\n  }, [addToast, onAddAccount])\n  const { getRootProps, getInputProps, open, isDragActive, isDragAccept, isDragReject } = useDropzone({\n    onDrop,\n    noClick: true,\n    noKeyboard: true,\n    accept: 'application/json',\n    maxFiles: 1,\n    validator: fileSizeValidator\n  })\n\n  // @TODO relayerless mode: it's not that hard to implement in a primitive form, we need everything as-is\n  // but rendering the initial privileges instead; or maybe using the relayerless transactions hook/service\n  // and aggregate from that\n  const accHash = signer => {\n      const abiCoder = new AbiCoder()\n      const { timelock, one, two } = signer\n      return keccak256(abiCoder.encode(['tuple(uint, address, address)'], [[timelock, one, two]]))\n  }\n  const hasPendingReset = privileges[selectedAccount.signer.quickAccManager] && (\n    (recoveryLock && recoveryLock.status && !isLoading)\n      || (\n          privileges && selectedAccount.signer.quickAccManager\n          // is or has been in recovery state\n          && selectedAccount.signer.preRecovery\n          // but that's not finalized yet\n          && accHash(selectedAccount.signer) !== privileges[selectedAccount.signer.quickAccManager]\n      )\n    )\n\n  const privList = Object.entries(privileges)\n    .map(([addr, privValue]) => {\n      if (!privValue) return null\n  \n      const addressName = getName(addr) || null\n      const isQuickAcc = addr === accountPresets.quickAccManager\n      const privText = isQuickAcc\n        ? `Email/password signer (${selectedAccount.email || 'unknown email'})`\n        : `${addr} ${addressName && addressName !== addr ? `(${addressName})` : ''}`\n      const signerAddress = isQuickAcc\n        ? selectedAccount.signer.quickAccManager\n        : selectedAccount.signer.address\n      const isSelected = signerAddress === addr\n      const canChangePassword = isQuickAcc && !hasPendingReset\n\n      return (\n        <li key={addr}>\n          <TextInput className=\"depositAddress\" value={privText} disabled />\n          <div className=\"btns-wrapper\">\n            {isQuickAcc && (otpEnabled !== null) && (otpEnabled ? \n              (<Button red onClick={handleDisableOtp} small>Disable 2FA</Button>) : \n              (<Button onClick={handleEnableOtp} small>Enable 2FA</Button>)\n            )}\n            {isQuickAcc && (<Button\n              disabled={!canChangePassword}\n              title={hasPendingReset ? 'Account recovery already in progress' : ''}\n              onClick={showResetPasswordModal} small>Change password</Button>\n            )}\n            <Button\n              disabled={isSelected}\n              title={isSelected ? 'Signer is already default' : ''}\n              onClick={() =>\n                onMakeDefaultBtnClicked(selectedAccount, addr, isQuickAcc)\n              }\n              small\n            >\n              Make default\n            </Button>\n            <Button\n              onClick={() => onRemoveBtnClicked(addr)}\n              small\n              red\n              icon={<MdOutlineRemove/>}\n              title={\n                isSelected ? 'Cannot remove the currently used signer' : ''\n              }\n              disabled={isSelected}\n            >\n              Remove\n            </Button>\n          </div>\n        </li>\n      )\n    })\n    .filter(x => x)\n\n  const showLoading = isLoading && !data\n  const signersFragment = relayerURL ? (<>\n    <div className=\"panel\" id=\"signers\">\n      {hasPendingReset && !showLoading && (<PendingRecoveryNotice\n        recoveryLock={recoveryLock}\n        showSendTxns={showSendTxns}\n        selectedAccount={selectedAccount}\n        selectedNetwork={selectedNetwork}\n      />)}\n      <div className='network-warning'>\n        <MdInfoOutline size={36}></MdInfoOutline>\n        <div>\n          Please note: signer settings are network-specific. You are currently looking at and modifying the signers on {selectedNetwork.name}.\n          &nbsp;<a href='https://help.ambire.com/hc/en-us/articles/4410885684242-Signers' target='_blank' rel='noreferrer'>Need help? Click here.</a>\n        </div>\n      </div>\n      <div className=\"panel-title\">Authorized signers</div>\n      {errMsg && (\n        <h3 className=\"error\">Error getting authorized signers: {errMsg}</h3>\n      )}\n      {showLoading && <Loading />}\n      <ul className=\"content\">{!showLoading && privList}</ul>\n    </div>\n    <div className=\"panel\">\n      <div className=\"panel-title\">Add new signer</div>\n      <AddAuthSigner\n        onAddBtnClicked={onAddBtnClickedHandler}\n        selectedNetwork={selectedNetwork}\n        selectedAcc={selectedAccount}\n      />\n    </div>\n  </>) : (\n    <div className=\"panel\">\n      <div className=\"panel-title\">Authorized signers</div>\n      <h3 className=\"error\">\n        Unsupported: not connected to a relayer.\n      </h3>\n    </div>\n  )\n  return (\n    <section id=\"security\" className={(isDragActive ? 'activeStyle ' : '') + (isDragAccept ? 'acceptStyle ' : '') + (isDragReject ? 'rejectStyle ' : '')} {...getRootProps()}>\n      {\n        (isDragAccept || isDragReject)\n        && (<div className={isDragAccept ? 'acceptStyleIcon' : 'rejectStyleIcon'}><RiDragDropLine size={100}/></div>)\n      }\n      \n      <input {...getInputProps()} />\n      {signersFragment}\n\n      <Backup \n        selectedAccount={selectedAccount}\n        onOpen={open}\n        onAddAccount={onAddAccount}\n      />\n    </section>\n  )\n}\n\nexport default Security\n","import './TxnPreview.scss'\n\nimport { useState, Fragment  } from 'react'\n\nimport { getName, getTransactionSummary, isKnown } from 'lib/humanReadableTransactions'\nimport networks from 'consts/networks'\nimport { formatUnits } from 'ethers/lib/utils'\nimport { ToolTip } from 'components/common'\nimport { HiOutlineExternalLink } from 'react-icons/hi'\nimport { MdOutlineClose } from 'react-icons/md'\nimport { BsChevronDown, BsChevronUp } from 'react-icons/bs'\nimport { getTokenIcon } from 'lib/icons'\nimport { formatFloatTokenAmount } from 'lib/formatters'\n\nfunction getNetworkSymbol(networkId) {\n  const network = networks.find(x => x.id === networkId)\n  return network ? network.nativeAssetSymbol : 'UNKNW'\n}\n\nfunction parseExtendedSummaryItem(item, i, networkDetails) {\n  if (item.length === 1) return item\n\n  if (i === 0) return (<div className={`action ${item.toLowerCase()}`} key={`item-${i}`}>{ item }</div>)\n\n  if (!item.type) return (<div className='word' key={`item-${i}`}>{ item }</div>)\n  if (item.type === 'token') {\n    return (\n    <div className='token' key={`item-${i}`}>\n      { item.amount > 0 && <span>{ formatFloatTokenAmount(item.amount, true, item.decimals) }</span> }\n      { item.decimals !== null && item.symbol ? \n        <Fragment>\n          {item.address &&\n            <div className='icon' \n              style={{ backgroundImage: `url(${getTokenIcon(networkDetails.id, item.address)})` }}>\n            </div>}\n          {item.symbol}\n        </Fragment>\n        : (item.amount > 0) ? 'units of unknown token' : null \n      }\n    </div>\n  )}\n\n  if (item.type === 'address') return (\n    <a\n      className='address'\n      key={`item-${i}`}\n      href={item.address ? `${networkDetails.explorerUrl}/address/${item.address}` : null}\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      onClick={e => e.stopPropagation()}\n    >\n      <ToolTip disabled={!item.address} label={item.address}>\n        { item.name ? item.name : item.address }\n        { item.address ? <HiOutlineExternalLink/> : null }\n      </ToolTip>\n    </a>\n  )\n\n  if (item.type === 'network') return (\n    <div className='network' key={`item-${i}`}>\n      { item.icon ? <div className='icon' style={{ backgroundImage: `url(${item.icon})` }}></div> : null }\n      { item.name }\n    </div>\n  )\n\n  if (item.type === 'erc721') {\n    const canShowLink = item.network && item.address && item.id\n    return (\n      <a\n        className='erc721'\n        key={`item-${i}`}\n        href={canShowLink ? `#/wallet/nft/${item.network}/${item.address}/${item.id}` : null}\n        target=\"_blank\"\n        rel=\"noreferrer\"\n        onClick={e => e.stopPropagation()}\n      >\n        { item.name }\n        { canShowLink ? <HiOutlineExternalLink/> : null }\n      </a>\n    )\n  }\n\n  return <></>\n}\n\nexport default function TxnPreview ({ txn, onDismiss, network, account, isFirstFailing, mined, disableExpand, disableDismiss, disableDismissLabel }) {\n  const [isExpanded, setExpanded] = useState(false)\n  const contractName = getName(txn[0], network)\n\n  const networkDetails = networks.find(({ id }) => id === network)\n  const extendedSummary = getTransactionSummary(txn, network, account, { mined, extended: true })\n\n  const summary = (extendedSummary.map(entry => Array.isArray(entry) ? entry.map((item, i) => parseExtendedSummaryItem(item, i, networkDetails)) : (entry))) // If entry is extended summary parse it\n\n  return (\n    <div className={isFirstFailing ? 'txnPreview firstFailing' : 'txnPreview'}>\n        <div className=\"heading\">\n          <div className=\"info\" onClick={() => !disableExpand && setExpanded(e => !e)}>\n            <div className=\"summary-container\">\n              {!disableExpand && (<div className='expandTxn'>\n                {isExpanded ? (<BsChevronUp/>) : (<BsChevronDown/>)}\n              </div>)}\n              <div className=\"summary\">{ summary }</div>\n            </div>\n            {isFirstFailing && (<div className='firstFailingLabel'>This is the first failing transaction.</div>)}\n              {!isFirstFailing && !mined && !isKnown(txn, account) && (<div className='unknownWarning'>Warning: interacting with an unknown contract or address.</div>)}\n          </div>\n          <div className='actionIcons'>\n            {onDismiss ? (\n              <ToolTip disabled={!disableDismiss || !disableDismissLabel} label={disableDismissLabel}>\n                <div className={`dismissTxn ${disableDismiss ? 'disabled' : ''}`} onClick={e => { e.stopPropagation(); !disableDismiss && onDismiss.apply(this, e) }}><MdOutlineClose/></div>\n              </ToolTip>\n            ) : (<></>)}\n          </div>\n        </div>\n        {\n          isExpanded ? (<div className='advanced'>\n            <div><b>Interacting with (<i>to</i>):</b> {txn[0]}{contractName ? ` (${contractName})` : ''}</div>\n            <div><b>Value to be sent (<i>value</i>):</b> {formatUnits(txn[1] || '0x0', 18)} {getNetworkSymbol(network)}</div>\n            <div><b>Data:</b> {txn[2]}</div>\n          </div>) : (<></>)\n        }\n    </div>\n  )\n}\n","import { Interface } from 'ethers/lib/utils'\nimport accountPresets from 'consts/accountPresets'\n\nconst IdentityFactory = new Interface(require('adex-protocol-eth/abi/IdentityFactory'))\n\n// Pass deploySalt (eg `id('IsAmbireIdentity')`) to deploy contracts at the same address across chains\nexport function toBundleTxn({ to, value, data, deploySalt }, from) {\n  // Transactions with no `to` are interpreted by the Ethereum network as CREATE (contract deployment) if they come from an EOA\n  // however, our accounts are not EOAs, so we will just call the factory with a user-specific nonce, that's also identifiable (0x6942)\n  if (to === '0x' || !to) {\n    const salt = deploySalt || `0x69420000000000${Date.now().toString(16).slice(1,9)}00${from.slice(2)}`\n    return [accountPresets.identityFactoryAddr, value, IdentityFactory.encodeFunctionData('deploy', [data, salt])]\n  }\n  return [to, value || '0x0', data || '0x']\n}","import './Transactions.scss'\nimport { FaSignature } from 'react-icons/fa'\nimport { BsCoin, BsCalendarWeek, BsGlobe2, BsCheck2All } from 'react-icons/bs'\nimport { MdOutlinePendingActions, MdShuffle, MdCheck } from 'react-icons/md'\nimport { useRelayerData } from 'hooks'\nimport TxnPreview from 'components/common/TxnPreview/TxnPreview'\nimport { Loading, Button } from 'components/common'\nimport accountPresets from 'consts/accountPresets'\nimport networks from 'consts/networks'\nimport { getTransactionSummary } from 'lib/humanReadableTransactions'\nimport { Bundle } from 'adex-protocol-eth'\nimport { useCallback, useEffect, useMemo, useState } from 'react'\nimport fetch from 'node-fetch'\nimport { useToasts } from 'hooks/toasts'\nimport { toBundleTxn } from 'lib/requestToBundleTxn'\nimport { HiOutlineChevronLeft, HiOutlineChevronRight } from 'react-icons/hi'\nimport { useHistory, useParams } from 'react-router-dom/cjs/react-router-dom.min'\nimport { formatFloatTokenAmount } from 'lib/formatters'\n\n// 10% in geth and most EVM chain RPCs; relayer wants 12%\nconst RBF_THRESHOLD = 1.14\n\n\nfunction Transactions ({ relayerURL, selectedAcc, selectedNetwork, showSendTxns, addRequest, eligibleRequests, setSendTxnState }) {\n  const { addToast } = useToasts()\n  const history = useHistory()\n  const params = useParams()\n\n  const [cacheBreak, setCacheBreak] = useState(() => Date.now())\n  \n  // @TODO refresh this after we submit a bundle; perhaps with the upcoming transactions service\n  // We want this pretty much on every rerender with a 5 sec debounce\n  useEffect(() => {\n    if ((Date.now() - cacheBreak) > 5000) setCacheBreak(Date.now())\n    const intvl = setTimeout(() => setCacheBreak(Date.now()), 10000)\n    return () => clearTimeout(intvl)\n  }, [cacheBreak])\n  const url = relayerURL\n    ? `${relayerURL}/identity/${selectedAcc}/${selectedNetwork.id}/transactions?cacheBreak=${cacheBreak}`\n    : null\n  const { data, errMsg, isLoading } = useRelayerData(url)\n\n  const showSendTxnsForReplacement = useCallback(bundle => {\n    bundle.txns.slice(0, -1)\n      .forEach((txn, index) => {\n        addRequest({\n          id: index,\n          chainId: selectedNetwork.chainId,\n          account: selectedAcc,\n          type: 'eth_sendTransaction',\n          txn: {\n            to: txn[0].toLowerCase(),\n            value: txn[1] === \"0x\" ? \"0x0\" : txn[1],\n            data: txn[2]\n          }\n        })\n      })\n    // Wouldn't need to be called cause it will happen autoamtically, except we need `replaceByDefault`\n    setSendTxnState({ showing: true, replaceByDefault: true })\n  }, [addRequest, selectedNetwork, selectedAcc, setSendTxnState])\n\n  const maxBundlePerPage = 10\n  const executedTransactions = data ? data.txns.filter(x => x.executed) : []\n  const maxPages = Math.ceil(executedTransactions.length / maxBundlePerPage)\n\n  const defaultPage = useMemo(() => Math.min(Math.max(Number(params.page), 1), maxPages) || 1, [params.page, maxPages])\n  const [page, setPage] = useState(defaultPage)\n\n  const bundlesList = executedTransactions.slice((page - 1) * maxBundlePerPage, page * maxBundlePerPage).map(bundle => BundlePreview({ bundle, mined: true }))\n  \n  useEffect(() => !isLoading && history.replace(`/wallet/transactions/${page}`), [page, history, isLoading])\n  useEffect(() => setPage(defaultPage), [selectedAcc, selectedNetwork, defaultPage])\n\n\n  // @TODO implement a service that stores sent transactions locally that will be used in relayerless mode\n  if (!relayerURL) return (<section id='transactions'>\n    <h3 className='validation-error'>Unsupported: not currently connected to a relayer.</h3>\n  </section>)\n\n\n  // @TODO: visualize other pending bundles\n  const firstPending = data && data.txns.find(x => !x.executed && !x.replaced)\n\n  const mapToBundle = (relayerBundle, extra = {}) => (new Bundle({\n    ...relayerBundle,\n    nonce: relayerBundle.nonce.num,\n    gasLimit: null,\n    // Instruct the relayer to abide by this minimum fee in USD per gas, to ensure we are truly replacing the txn\n    minFeeInUSDPerGas: relayerBundle.feeInUSDPerGas * RBF_THRESHOLD,\n    ...extra\n  }))\n  const cancelByReplacing = relayerBundle => showSendTxns(mapToBundle(relayerBundle, {\n    txns: [[selectedAcc, '0x0', '0x']],\n  }))\n  const cancel = relayerBundle => {\n    // @TODO relayerless\n    mapToBundle(relayerBundle).cancel({ relayerURL, fetch })\n      .then(({ success, message }) => {\n        if (!success) {\n          if (message.includes('not possible to cancel')) {\n            addToast('Transaction already picked up by the network, you will need to pay a fee to replace it with a cancellation transaction.')\n          } else {\n            addToast(`Not possible to cancel: ${message}, you will need to pay a fee to replace it with a cancellation transaction.`)\n          }\n          cancelByReplacing(relayerBundle)\n        } else {\n          addToast('Transaction cancelled successfully')\n        }\n      })\n      .catch(e => {\n        console.error(e)\n        cancelByReplacing(relayerBundle)\n      })\n  }\n\n  // @TODO: we are currently assuming the last txn is a fee; change that (detect it)\n  const speedup = relayerBundle => showSendTxns(mapToBundle(relayerBundle, { txns: relayerBundle.txns.slice(0, -1) }))\n  const replace = relayerBundle => showSendTxnsForReplacement(mapToBundle(relayerBundle))\n\n  const paginationControls = (\n    <div className='pagination-controls'>\n      <div className='pagination-title'>Page</div>\n      <Button clear mini onClick={() => page > 1 && setPage(page => page - 1)}><HiOutlineChevronLeft/></Button>\n      <div className='pagination-current'>{ page } <span>/ { maxPages }</span></div>\n      <Button clear mini onClick={() => page < maxPages && setPage(page => page + 1)}><HiOutlineChevronRight/></Button>\n    </div>\n  )\n\n  return (\n    <section id='transactions'>\n      {!!eligibleRequests.length && (<div className='panel' id=\"waiting-transactions\">\n        <div className='panel-heading'>\n          <div className='title'><FaSignature size={25}/>Waiting to be signed (current batch)</div>\n        </div>\n        <div className=\"content\">\n          <div className=\"bundle\">\n            <div className=\"bundle-list\" onClick={() => showSendTxns(null)}>\n              {eligibleRequests.map(req => (\n                <TxnPreview\n                    key={req.id}\n                    network={selectedNetwork.id}\n                    account={selectedAcc}\n                    disableExpand={true}\n                    txn={toBundleTxn(req.txn, selectedAcc)}/>\n              ))}\n            </div>\n              <div className='actions'>\n                {/*\n                <Button small className='cancel' onClick={\n                  () => resolveMany(eligibleRequests.map(x => x.id), { message: 'Ambire user rejected all requests' })\n                }>Reject all</Button>*/}\n                <Button small icon={<MdCheck/>} onClick={() => showSendTxns(null)}>Sign or reject</Button>\n              </div>\n          </div>\n        </div>\n      </div>)}\n      { !!firstPending && (<div className='panel' id=\"pending\">\n        <div className='panel-heading'>\n          <div className='title'><MdOutlinePendingActions/>Pending transaction bundle</div>\n        </div>\n        <div className=\"content\">\n          <div className=\"bundle\">\n            <BundlePreview bundle={firstPending}></BundlePreview>\n            <div className='actions'>\n              <Button small onClick={() => replace(firstPending)}>Replace or modify</Button>\n              <Button small className='cancel' onClick={() => cancel(firstPending)}>Cancel</Button>\n              <Button small onClick={() => speedup(firstPending)}>Speed up</Button>\n            </div>\n          </div>\n        </div>\n      </div>) }\n\n      <div id=\"confirmed\" className=\"panel\">\n        <div className=\"panel-heading\">\n          <div className='title'>\n            <BsCheck2All/>\n            {(data && data.txns.length === 0) ? 'No transactions yet.' : 'Confirmed transactions'}\n          </div>\n          { !bundlesList.length ? null : paginationControls }\n        </div>\n        <div className=\"content\">\n          {!relayerURL && (<h3 className='validation-error'>Unsupported: not currently connected to a relayer.</h3>)}\n          {errMsg && (<h3 className='validation-error'>Error getting list of transactions: {errMsg}</h3>)}\n          {\n            isLoading && !data ? <Loading /> :\n              !bundlesList.length ? null :\n                <>\n                  { bundlesList }\n                  { paginationControls }\n                </>\n          }\n        </div>\n      </div>\n    </section>\n  )\n}\n\nfunction BundlePreview({ bundle, mined = false }) {\n  const network = networks.find(x => x.id === bundle.network)\n  if (!Array.isArray(bundle.txns)) return (<h3 className='error'>Bundle has no transactions (should never happen)</h3>)\n  const lastTxn = bundle.txns[bundle.txns.length - 1]\n  // terribly hacky; @TODO fix\n  // all of the values are prob checksummed so we may not need toLowerCase\n  const lastTxnSummary = getTransactionSummary(lastTxn, bundle.network, bundle.identity)\n  const hasFeeMatch = lastTxnSummary.match(new RegExp(`to ${accountPresets.feeCollector}`, 'i'))\n  const txns = hasFeeMatch ? bundle.txns.slice(0, -1) : bundle.txns\n  const toLocaleDateTime = date => `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`\n\n  return (<div className='bundlePreview bundle' key={bundle._id}>\n    {txns.map((txn, i) => (<TxnPreview\n      key={i} // safe to do this, individual TxnPreviews won't change within a specific bundle\n      txn={txn} network={bundle.network} account={bundle.identity} mined={mined} />\n    ))}\n    <ul className=\"details\">\n      {\n        hasFeeMatch ?\n          <li>\n            <label><BsCoin/>Fee</label>\n            <p>{\n            lastTxnSummary\n              .slice(5, -hasFeeMatch[0].length).split(' ')\n              .map((x, i) => i === 0 ? formatFloatTokenAmount(x, true, 8) : x)\n              .join(' ') \n            }</p>\n          </li>\n          :\n          null\n      }\n      {\n        bundle.executed && !bundle.executed.success && (\n          <li>\n            <label>Error</label>\n            <p>{bundle.executed.errorMsg || 'unknown error'}</p>\n          </li>\n        )\n      }\n      <li>\n        <label><BsCalendarWeek/>Submitted on</label>\n        <p>{bundle.submittedAt && (toLocaleDateTime(new Date(bundle.submittedAt))).toString()}</p>\n      </li>\n      {\n        bundle.replacesTxId ?\n          <li>\n            <label><MdShuffle/>Replaces transaction</label>\n            <p>{bundle.replacesTxId}</p>\n          </li>\n          :\n          null\n      }\n      {\n        bundle.txId ?\n          <li>\n            <label><BsGlobe2/>Block Explorer</label>\n            <p><a href={network.explorerUrl+'/tx/'+bundle.txId} target='_blank' rel='noreferrer'>{network.explorerUrl.split('/')[2]}</a></p>\n          </li>\n          :\n          null\n      }\n    </ul>\n  </div>)\n}\n\nexport default Transactions\n","import { MdOutlineAdd, MdRemove } from 'react-icons/md'\nimport './GnosisSafeApps.scss'\nimport GnosisSafeAppIframe from './GnosisSafeAppIframe'\nimport { useLocalStorage } from 'hooks'\nimport { InputModal } from 'components/Modals'\nimport { Button } from 'components/common'\n\nimport { useModals } from 'hooks'\nimport { useCallback, useState } from 'react'\n\nconst dapps = [{\n  name: 'LocalTest',\n  url: 'http://localhost:3002',\n  logo: 'http://localhost:3002/logo-test.png',\n  desc: 'Local dapp test with some lorem ipsum stuff'\n},\n{\n  name: 'TxBuilder',\n  url: 'https://safe-apps.dev.gnosisdev.com/tx-builder/',\n  logo: 'https://safe-apps.dev.gnosisdev.com/tx-builder/logo.svg',\n  desc: 'Local dapp test with some lorem ipsum stuff'\n},\n{\n  name: 'ParaSwap',\n  url: 'https://paraswap.io',\n  logo: 'https://paraswap.io/paraswap.svg',\n  desc: 'ParaSwap allows dApps and traders to get the best DEX liquidity by aggregating multiple markets and offering the best rates'\n},\n{\n  name: '0xPlasma Finance',\n  url: 'https://apy.plasma.finance',\n  logo: 'https://apy.plasma.finance/logo.svg',\n  desc: 'Cross-chain DeFi & DEX aggregator, farming, asset management, fiat on-ramp'\n},\n{\n  name: 'MEW',\n  url: 'https://www.myetherwallet.com/wallet/sign',\n  logo: 'https://www.myetherwallet.com/wallet/sign/logo.svg',\n  desc: 'MEW as dapp'\n},\n]\n\nexport default function GnosisSafeApps({\n  network,\n  selectedAcc,\n  gnosisConnect,\n  gnosisDisconnect\n}) {\n  const { showModal } = useModals()\n  const [selectedApp, setSelectedApp] = useState(null)\n  const [customPlugins, setCustomPlugins] = useLocalStorage({ key: 'gnosisCustomApps', defaultValue: [] })\n\n  const modalInputs = [\n    { label: 'Name', placeholder: 'Plugin name', validate: value => !!value },\n    { label: 'URL', placeholder: 'https://plugyourpluginifyouwantplug', validate: value => !!value }\n  ]\n\n  const addPlugin = useCallback((name, url) => {\n    const newDapp = { name, url, customId: Date.now()  }\n    const newPlugins = [...customPlugins, newDapp]\n    setCustomPlugins(newPlugins)\n    setSelectedApp(newDapp)\n  }, [customPlugins, setCustomPlugins])\n\n  const removeCustomPlugin = useCallback((customId) => {\n    const newPlugins = [...customPlugins.filter(x => x.customId !== customId)]\n    setCustomPlugins(newPlugins)\n  }, [customPlugins, setCustomPlugins])\n\n  const inputModal =\n    <InputModal\n      title=\"Add New Address\"\n      inputs={modalInputs}\n      onClose={([name, url]) => addPlugin(name, url)}>\n    </InputModal>\n\n  const showInputModal = () => showModal(inputModal)\n\n  return (\n    <div id=\"plugin-gnosis-container\">\n      <ul id=\"dapps-container\" className={selectedApp ? 'small-thumbs' : ''}>\n        <li className='add-plugin'>\n          <Button mini icon={<MdOutlineAdd />} onClick={showInputModal}>Add plugin</Button>\n        </li>\n        {[...dapps, ...customPlugins].map((dapp, index) => (\n          <li\n            key={index}\n            onClick={() => setSelectedApp(dapp)}\n            className={(selectedApp && dapp.url === selectedApp.url) ? 'selected' : ''}\n          >\n            {dapp.customId && <Button className='remove-btn' mini red icon={<MdRemove />} onClick={() => removeCustomPlugin(dapp.customId)} />}\n            <div className=\"logo-container\" style={{ backgroundImage: `url(${dapp.logo})` }}></div>\n            <div className=\"dapp-name\">{dapp.name}</div>\n            <div className=\"dapp-desc\">{dapp.desc}</div>\n          </li>\n        ))}\n      </ul>\n      {selectedApp &&\n        <GnosisSafeAppIframe\n          network={network}\n          selectedApp={selectedApp}\n          selectedAcc={selectedAcc}\n          removeApp={removeCustomPlugin}\n          gnosisConnect={gnosisConnect}\n          gnosisDisconnect={gnosisDisconnect}\n\n        />\n      }\n    </div>\n  )\n}\n","const ERC721Abi = [\n    \"function name() view returns (string memory)\",\n    \"function tokenURI(uint256 _tokenId) view returns (string memory)\",\n    \"function uri(uint256 _tokenId) view returns (string memory)\",\n    \"function ownerOf(uint256 tokenId) view returns (address)\",\n    \"function transferFrom(address from, address to, uint256 tokenId)\"\n]\n\nexport default ERC721Abi\n","import './Collectible.scss'\n\nimport { useParams } from 'react-router-dom'\nimport { ethers } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useCallback, useEffect, useState, useRef } from 'react'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { BsFillImageFill } from 'react-icons/bs'\nimport * as blockies from 'blockies-ts';\nimport { useToasts } from 'hooks/toasts'\nimport { TextInput, Button, Loading, AddressBook, AddressWarning, ToolTip } from 'components/common'\nimport ERC721Abi from 'consts/ERC721Abi'\nimport networks from 'consts/networks'\nimport { validateSendNftAddress } from 'lib/validations/formValidations'\nimport { BsXLg } from 'react-icons/bs'\nimport { getProvider } from 'lib/provider'\nimport { VELCRO_API_ENDPOINT } from 'config'\nimport { fetchGet } from 'lib/fetch'\nimport { resolveUDomain } from 'lib/unstoppableDomains'\n\nconst ERC721 = new Interface(ERC721Abi)\n\nconst handleUri = uri => {\n    uri = uri.startsWith('data:application/json') ? uri.replace('data:application/json;utf8,', '') : uri\n\n    if (uri.startsWith('ipfs://')) return uri.replace(/ipfs:\\/\\/ipfs\\/|ipfs:\\/\\//g, 'https://ipfs.io/ipfs/')\n    if (uri.split('/')[2].endsWith('mypinata.cloud')) return 'https://ipfs.io/ipfs/' + uri.split('/').slice(4).join('/')\n        \n    return uri\n}\n\nconst Collectible = ({ selectedAcc, selectedNetwork, addRequest, addressBook }) => {\n    const { addresses, addAddress, removeAddress, isKnownAddress } = addressBook\n\n    const { addToast } = useToasts()\n    const { network, collectionAddr, tokenId } = useParams()\n    const [isLoading, setLoading] = useState(true)\n    const [metadata, setMetadata] = useState({\n        owner: {\n            address: '',\n            icon: ''\n        },\n        name: '',\n        description: '',\n        image: '',\n        collection: '',\n        explorerUrl: ''\n    })\n    const [recipientAddress, setRecipientAddress] = useState('')\n    const [uDAddress, setUDAddress] = useState('')\n    const [isTransferDisabled, setTransferDisabled] = useState(true)\n    const [addressConfirmed, setAddressConfirmed] = useState(false)\n    const [newAddress, setNewAddress] = useState(null)\n    const [validationFormMgs, setValidationFormMgs] = useState({ \n        success: false, \n        message: ''\n    })\n    const timer = useRef(null)\n\n    const sendTransferTx = () => {\n        const recipAddress = uDAddress ? uDAddress : recipientAddress\n\n        if (uDAddress) {\n            const isAlreadyAdded = addresses.find(i => i.address === uDAddress)\n\n            if (!isAlreadyAdded) {\n                addAddress(recipientAddress, uDAddress)\n            }\n        }\n\n        try {\n            addRequest({\n                id: `transfer_nft_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: selectedNetwork.chainId,\n                account: selectedAcc,\n                txn: {\n                    to: collectionAddr,\n                    value: '0',\n                    data: ERC721.encodeFunctionData('transferFrom', [metadata.owner.address, recipAddress, tokenId])\n                }\n            })\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    useEffect(() => {\n        if (recipientAddress.startsWith('0x') && (recipientAddress.indexOf('.') === -1)) { \n            const isAddressValid = validateSendNftAddress(recipientAddress, selectedAcc, addressConfirmed, isKnownAddress, metadata, selectedNetwork, network)\n\n            setTransferDisabled(!isAddressValid.success)\n            setValidationFormMgs({ \n                success: isAddressValid.success, \n                message: isAddressValid.message ? isAddressValid.message : ''\n            })\n        } else {\n            if (timer.current) {\n                clearTimeout(timer.current)\n            }\n    \n            const validateForm = async() => {\n                const UDAddress =  await resolveUDomain(recipientAddress, null, selectedNetwork.unstoppableDomainsChain)\n                timer.current = null\n                \n                const isAddressValid = validateSendNftAddress(UDAddress ? UDAddress : recipientAddress, selectedAcc, addressConfirmed, isKnownAddress, metadata, selectedNetwork, network)\n                setUDAddress(UDAddress)\n                \n                setTransferDisabled(!isAddressValid.success)\n                setValidationFormMgs({ \n                    success: isAddressValid.success, \n                    message: isAddressValid.message ? isAddressValid.message : ''\n                })\n            }\n\n            timer.current = setTimeout(async() => validateForm().catch(console.error), 300)\n        } \n\n        return () => clearTimeout(timer.current)\n    }, [recipientAddress, metadata, selectedNetwork, selectedAcc, network, addressConfirmed, isKnownAddress])\n\n    const fetchMetadata = useCallback(async () => {\n        setLoading(true)\n        setMetadata({})\n    \n        try {\n            const networkDetails = networks.find(({ id }) => id === network)\n            if (!networkDetails) throw new Error('This network is not supported')\n\n            const { explorerUrl } = networkDetails\n            const provider = getProvider(networkDetails.id)\n            const contract = new ethers.Contract(collectionAddr, ERC721Abi, provider)\n\n            const [collection, address, maybeUri1, maybeUri2] = await Promise.all([\n                contract.name(),\n                contract.ownerOf(tokenId),\n                contract.tokenURI(tokenId).then(uri => ({ uri })).catch(err => ({ err })),\n                contract.uri(tokenId).then(uri => ({ uri })).catch(err => ({ err }))\n            ])\n            const uri = maybeUri1.uri || maybeUri2.uri\n            if (!uri) throw maybeUri1.err || maybeUri2.err\n\n            let json = {}\n\n            if (uri.startsWith('data:application/json')) {\n                json = JSON.parse(uri.replace('data:application/json;utf8,', ''))\n            } else {\n                const jsonUrl = handleUri(uri)\n                const response = await fetch(jsonUrl)\n                json = await response.json()\n            }\n\n            const image = json ? handleUri(json.image) : null\n            setMetadata(metadata => ({\n                ...metadata,\n                ...json,\n                image\n            }))\n\n            setMetadata(metadata => ({\n                ...metadata,\n                collection,\n                owner: {\n                    address,\n                    icon: blockies.create({ seed: address }).toDataURL()\n                },\n                explorerUrl\n            }))\n\n            setLoading(false)\n        } catch(e) {\n            try {\n                const { success, collection, description, image, name, owner, message } = await fetchGet(\n                    `${VELCRO_API_ENDPOINT}/nftmeta/${collectionAddr}/${tokenId}?network=${network}`\n                    )                \n                if (!success) throw new Error(message)\n\n                const networkDetails = networks.find(({ id }) => id === network)\n                if (!networkDetails) throw new Error('This network is not supported')\n                \n                const { explorerUrl } = networkDetails\n                setMetadata(metadata => ({\n                    ...metadata,\n                    collection,\n                    description,\n                    image,\n                    name,\n                    owner: {\n                        address: owner,\n                        icon: blockies.create({ seed: owner }).toDataURL()\n                    },\n                    explorerUrl\n                })) \n                \n                setLoading(false)\n            } catch(e) {\n                console.error(e)\n                addToast(`Collectible error: ${e.message || e}`, { error: true })\n            }\n        }\n    }, [addToast, tokenId, collectionAddr, network])\n\n    useEffect(() => fetchMetadata(), [fetchMetadata])\n\n    return (\n        <div id=\"collectible\">\n            <div className=\"panel\">\n                <div className=\"heading\">\n                    <div className=\"title\">{ metadata.collection } #{ tokenId }</div>\n                    <div className=\"contract\">\n                        Contract address: <a className=\"address\" href={`${metadata.explorerUrl}/address/${collectionAddr}`} target=\"_blank\" rel=\"noreferrer\">{ collectionAddr }</a>\n                    </div>\n                </div>\n                {\n                    isLoading ?\n                        <Loading/>\n                        :\n                        <div className=\"metadata\">\n                            <div className=\"image\" style={{backgroundImage: `url(${handleUri(metadata.image)})`}}>\n                                { !metadata.image ? <BsFillImageFill/> : null }\n                            </div>\n                            <div className=\"info\">\n                                <div className=\"name\">\n                                    { metadata.name }\n                                </div>\n                                <div className=\"description\">\n                                    { metadata.description }\n                                </div>\n                            </div>\n                            <div className=\"owner\">\n                                Owner:\n                                <a className=\"address\" href={`${metadata.explorerUrl}/address/${metadata.owner.address}`} target=\"_blank\" rel=\"noreferrer\">\n                                    <div className=\"icon\" style={{backgroundImage: `url(${metadata.owner.icon})`}}></div>\n                                    { \n                                        metadata.owner.address === selectedAcc ? \n                                            <span>You ({ metadata.owner.address })</span>\n                                            :\n                                            metadata.owner.address\n                                    }\n                                    \n                                </a>\n                            </div>\n                        </div>\n                }\n            </div>\n            <div className=\"panel\">\n                <div className=\"title\">Transfer</div>\n                <div className=\"content\">\n                    <div id=\"recipient-address\">\n                        <TextInput placeholder=\"Recipient Address\" value={recipientAddress} onInput={(value) => setRecipientAddress(value)}/>\n                        <ToolTip label={!uDAddress ? 'You can use Unstoppable domains' : 'Valid Unstoppable domains domain'}>\n                            <div id=\"udomains-logo\" className={uDAddress ? 'ud-logo-active ' : ''} />\n                        </ToolTip>\n                        <AddressBook \n                            addresses={addresses.filter(x => x.address !== selectedAcc)}\n                            addAddress={addAddress}\n                            removeAddress={removeAddress}\n                            newAddress={newAddress}\n                            onClose={() => setNewAddress(null)}\n                            onSelectAddress={address => setRecipientAddress(address)}\n                        />\n                    </div>\n                    { validationFormMgs.message && \n                        (<div className='validation-error'><BsXLg size={12}/>&nbsp;{validationFormMgs.message}</div>) \n                    }\n                    <div className=\"separator\"></div>\n                    <AddressWarning\n                        address={uDAddress ? uDAddress : recipientAddress}\n                        onAddNewAddress={() => setNewAddress(uDAddress ? uDAddress : recipientAddress)}\n                        onChange={(value) => setAddressConfirmed(value)}\n                        isKnownAddress={isKnownAddress}\n                    />\n                    <Button icon={<AiOutlineSend/>} disabled={isTransferDisabled} onClick={sendTransferTx}>Send</Button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Collectible\n","import { useCallback } from \"react\";\nimport { fetchGet } from \"lib/fetch\";\n\nconst baseURL = 'https://backend.movr.network/v1'\nconst watcherBaseURL = 'https://watcherapi.fund.movr.network/api/v1'\n\nconst useMovr = () => {\n    const fetchChains = useCallback(async () => {\n        const response = await fetchGet(`${baseURL}/supported/chains`)\n        if (!response) return null\n        return response.result\n    }, [])\n\n    const fetchFromTokens = useCallback(async (from, to) => {\n        const response = await fetchGet(`${baseURL}/supported/from-token-list?fromChainId=${from}&toChainId=${to}`)\n        if (!response) return null\n        return response.result.map(({ token }) => token)\n    }, [])\n\n    const fetchToTokens = useCallback(async (from, to) => {\n        const response = await fetchGet(`${baseURL}/supported/to-token-list?fromChainId=${from}&toChainId=${to}`)\n        if (!response) return null\n        return response.result.map(({ token }) => token)\n    }, [])\n\n    const fetchQuotes = useCallback(async (fromAsset, fromChainId, toAsset, toChainId, amount, excludeBridges, sort = 'cheapestRoute') => {\n        const response = await fetchGet(`${baseURL}/quote?fromAsset=${fromAsset}&fromChainId=${fromChainId}&toAsset=${toAsset}&toChainId=${toChainId}&amount=${amount}&excludeBridges=${excludeBridges}&sort=${sort}`)\n        if (!response) return null\n        return response.result\n    }, [])\n\n    const checkApprovalAllowance = useCallback(async (chainID, owner, allowanceTarget, tokenAddress) => {\n        const response = await fetchGet(`${baseURL}/approval/check-allowance?chainID=${chainID}&owner=${owner}&allowanceTarget=${allowanceTarget}&tokenAddress=${tokenAddress}`)\n        if (!response) return null\n        return response.result\n    }, [])\n\n    const approvalBuildTx = useCallback(async (chainID, owner, allowanceTarget, tokenAddress, amount) => {\n        const response = await fetchGet(`${baseURL}/approval/build-tx?chainID=${chainID}&owner=${owner}&allowanceTarget=${allowanceTarget}&tokenAddress=${tokenAddress}&amount=${amount}`)\n        if (!response) return null\n        return response.result\n    }, [])\n\n    const sendBuildTx = useCallback(async (recipient, fromAsset, fromChainId, toAsset, toChainId, amount, output, routePath) => {\n        const response = await fetchGet(`${baseURL}/send/build-tx?recipient=${recipient}&fromAsset=${fromAsset}&fromChainId=${fromChainId}&toAsset=${toAsset}&toChainId=${toChainId}&amount=${amount}&output=${output}&fromAddress=${recipient}&routePath=${routePath}`)\n        if (!response) return null\n        return response.result\n    }, [])\n\n    const checkTxStatus = useCallback(async (transactionHash, fromChainId, toChainId) => {\n        const response = await fetchGet(`${watcherBaseURL}/transaction-status?transactionHash=${transactionHash}&fromChainId=${fromChainId}&toChainId=${toChainId}`)\n        if (!response) return null\n        return response.result\n    }, [])\n\n    return {\n        fetchChains,\n        fetchToTokens,\n        fetchFromTokens,\n        fetchQuotes,\n        checkApprovalAllowance,\n        approvalBuildTx,\n        sendBuildTx,\n        checkTxStatus\n    }\n}\n\nexport default useMovr","import './Quotes.scss'\n\nimport { MdOutlineArrowBack, MdOutlineArrowForward, MdOutlineCheck, MdOutlineClose } from 'react-icons/md';\nimport { Button, Loading, Radios } from 'components/common';\nimport { useState } from 'react';\nimport networks from 'consts/networks';\nimport useMovr from 'components/Wallet/CrossChain/useMovr';\nimport { useToasts } from 'hooks/toasts';\n\n\nconst formatAmount = (amount, asset) => amount / Math.pow(10, asset.decimals)\nconst formatFeeAmount = (fee, route) => {\n    const asset = fee.address === route.toAsset.address ? route.toAsset : route.fromAsset\n    return formatAmount(fee.amount, asset)\n}\nconst getNetwork = id => networks.find(({ chainId }) => chainId === id)\n\nconst Quotes = ({ addRequest, selectedAccount, fromTokensItems, quotes, onQuotesConfirmed, onCancel }) => {\n    const { addToast } = useToasts()\n    const { approvalBuildTx, sendBuildTx } = useMovr()\n\n    const { toAsset } = quotes;\n    const fromAsset = fromTokensItems.find(({ value }) => value === quotes.fromAsset.address)\n    const fromNetwork = getNetwork(quotes.fromAsset.chainId)\n    const toNetwork = getNetwork(toAsset.chainId)\n    const [selectedRoute, setSelectedRoute] = useState(null)\n    const [loading, setLoading] = useState(false)\n\n    const routes = quotes.routes.map(route => {\n        const { fees, middlewareRoute, bridgeRoute } = route\n        return {\n            ...route,\n            middlewareFee: middlewareRoute ? formatFeeAmount(fees.middlewareFee, middlewareRoute) : 0,\n            bridgeFee: bridgeRoute ? formatFeeAmount(fees.bridgeFee, bridgeRoute) : 0\n        }\n    })\n\n    const radios = routes.map(({ routePath, middlewareFee, bridgeFee, middlewareRoute, bridgeRoute }) => ({\n        label:\n            <div className=\"route\">\n                <div className=\"info\">\n                    {\n                        middlewareRoute ?\n                            <div className=\"middleware\">\n                                <div className=\"icon\" style={{backgroundImage: `url(${middlewareRoute.middlewareInfo.icon})`}}></div>\n                                <div className=\"name\">{ middlewareRoute.middlewareInfo.displayName }</div>\n                            </div>\n                            :\n                            null\n                    }\n                    <div className=\"bridge\">\n                        <div className=\"icon\" style={{backgroundImage: `url(${bridgeRoute.bridgeInfo.icon})`}}></div>\n                        <div className=\"name\">{ bridgeRoute.bridgeInfo.displayName }</div>\n                    </div>\n                </div>\n                <div className=\"summary\">\n                    <div className=\"amounts\">\n                        {\n                            middlewareRoute ?\n                                <div className=\"amount\">\n                                    { formatAmount(middlewareRoute.inputAmount, middlewareRoute.fromAsset) } { middlewareRoute.fromAsset.symbol }\n                                </div>\n                                :\n                                null\n                        }   \n                        <div className=\"amount\">\n                            { formatAmount(bridgeRoute.outputAmount, bridgeRoute.toAsset) } { bridgeRoute.toAsset.symbol }\n                        </div>\n                    </div>\n                    <div className=\"fees\">\n                        {\n                            middlewareRoute ?\n                                <div className=\"fee\">\n                                    { middlewareFee ? <>Fee: { middlewareFee } { middlewareRoute.fromAsset.symbol }</> : null }\n                                </div>\n                                :\n                                null\n                        }\n                        <div className=\"fee\">\n                            { bridgeFee ? <>Fee: { bridgeFee } { bridgeRoute.toAsset.symbol }</> : null }\n                        </div>\n                    </div>\n                </div>\n            </div>,\n        value: routePath\n    }))\n\n    const sendTx = (id, chainId, to, data, value = '0x00') => {\n        addRequest({\n            id,\n            chainId,\n            account: selectedAccount,\n            type: 'eth_sendTransaction',\n            txn: {\n                to,\n                data,\n                value\n            }\n        })\n    }\n\n    const onConfirm = async () => {\n        setLoading(true)\n\n        try {\n            const { allowanceTarget, isApprovalRequired, middlewareRoute, bridgeRoute, routePath } = routes.find(({ routePath }) => routePath === selectedRoute)\n\n            let fromAsset, inputAmount = null\n            if (middlewareRoute) {\n                fromAsset = middlewareRoute.fromAsset\n                inputAmount = middlewareRoute.inputAmount\n            } else {\n                fromAsset = bridgeRoute.fromAsset\n                inputAmount = bridgeRoute.inputAmount\n            }\n\n            const { toAsset, outputAmount, bridgeInfo } = bridgeRoute\n            \n            if (isApprovalRequired) {\n                const { to, data } = await approvalBuildTx(fromAsset.chainId, selectedAccount, allowanceTarget, fromAsset.address, inputAmount)\n                sendTx(`transfer_approval_crosschain_${Date.now()}`, fromAsset.chainId, to, data)\n            }\n\n            const { tx } = await sendBuildTx(selectedAccount, fromAsset.address, fromAsset.chainId, toAsset.address, toAsset.chainId, inputAmount, outputAmount, routePath)\n            sendTx(`transfer_send_crosschain_${Date.now()}`, fromAsset.chainId, tx.to, tx.data, tx.value.hex)\n\n            const serviceTimeMinutes = new Date((bridgeInfo?.serviceTime || 0) + (middlewareRoute?.serviceTime || 0)).getMinutes()\n            onQuotesConfirmed({\n                txData: tx.data,\n                serviceTimeMinutes,\n                to: {\n                    chainId: toAsset.chainId,\n                    asset: toAsset,\n                    amount: outputAmount\n                }\n            })\n            onCancel()\n        } catch(e) {\n            console.error(e);\n            addToast(e.message || e, { error: true })\n        }\n\n        setLoading(false)\n    }\n\n    return (\n        <div id=\"quotes\">\n            <div id=\"summary\">\n                <div className=\"path\">\n                    <div className=\"network\">\n                        <div className=\"icon\" style={{backgroundImage: `url(${fromNetwork.icon})`}}></div>\n                        <div className=\"name\">{ fromNetwork.name }</div>\n                    </div>\n                    <div className=\"token\">\n                        <div className=\"icon\" style={{backgroundImage: `url(${fromAsset.icon})`}}></div>\n                        <div className=\"name\">{ fromAsset.label }</div>\n                    </div>\n                </div>\n                <MdOutlineArrowForward/>\n                <div className=\"path\">\n                    <div className=\"network\">\n                        <div className=\"icon\" style={{backgroundImage: `url(${toNetwork.icon})`}}></div>\n                        <div className=\"name\">{ toNetwork.name }</div>\n                    </div>\n                    <div className=\"token\">\n                        <div className=\"icon\" style={{backgroundImage: `url(${toAsset.icon})`}}></div>\n                        <div className=\"name\">{ toAsset.name } ({ toAsset.symbol })</div>\n                    </div>\n                </div>\n            </div>\n\n            {\n                loading ?\n                    <Loading/>\n                    :\n                    <div id=\"routes\">\n                        <div className=\"title\">Routes</div>\n                        {\n                            !radios.length ?\n                                <div id=\"no-routes-placeholder\">\n                                    There is no routes available for this configuration at the moment.<br/>\n                                    Try increasing the amount or switching token.\n                                </div>\n                                :\n                                <Radios radios={radios} onChange={value => setSelectedRoute(value)}/>\n                        }\n                    </div>\n            }\n\n            <div className=\"separator\"></div>\n\n            <div id=\"buttons\">\n                <Button small clear icon={routes.length ? <MdOutlineClose/> : <MdOutlineArrowBack/>} disabled={loading} onClick={onCancel}>{ routes.length ? 'Cancel' : 'Go Back' }</Button>\n                { routes.length ? \n                    <Button small icon={<MdOutlineCheck/>} disabled={!selectedRoute || loading} onClick={onConfirm}>Confirm</Button>\n                : null }\n            </div>\n        </div>\n    )\n}\n\nexport default Quotes","import { abis } from 'consts/humanizerInfo'\nimport { tokens } from 'consts/humanizerInfo'\nimport { formatNativeTokenAddress, knownTokens } from 'lib/humanReadableTransactions'\nimport { Interface } from 'ethers/lib/utils'\nimport networks from 'consts/networks'\nimport { getTokenIcon } from 'lib/icons'\n\nconst MovrAnyswapInterface = new Interface(abis.MovrAnyswap)\nconst MovrRouterInterface = new Interface(abis.MovrRouter)\n\nconst getAssetInfo = address => {\n    const formattedAddress = formatNativeTokenAddress(address)\n    return tokens[formattedAddress] || knownTokens[formattedAddress] || ['Unknown', 0]\n}\n\nconst getAssetIcon = (address, chainId) => {\n    const network = networks.find(n => n.chainId === chainId)\n    return network ? getTokenIcon(network.id, formatNativeTokenAddress(address)) : null\n}\n\nconst formatTx = (fromChainId, toChainId, inputToken, outputToken, amount) => {\n    const fromAsset = getAssetInfo(inputToken)\n    const toAsset = getAssetInfo(outputToken)\n    const fromAssetIcon = getAssetIcon(inputToken, fromChainId)\n    const toAssetIcon = getAssetIcon(outputToken, fromChainId)\n\n    return {\n        from: {\n            chainId: fromChainId,\n            asset: {\n                address: inputToken,\n                symbol: fromAsset[0],\n                decimals: fromAsset[1],\n                icon: fromAssetIcon\n            },\n            amount: amount.toString()\n        },\n        to: {\n            chainId: toChainId.toNumber(),\n            asset: {\n                address: outputToken,\n                symbol: toAsset[0],\n                decimals: toAsset[1],\n                icon: toAssetIcon\n            },\n            amount: null\n        }\n    }\n}\n\nconst movrTxParser = {\n    [MovrAnyswapInterface.getSighash('outboundTransferTo')]: (value, data, currentNetwork) => {\n        const { middlewareInputToken, amount, tokenToBridge, toChainId } = MovrAnyswapInterface.parseTransaction({ data, value }).args[0]\n        return formatTx(currentNetwork.chainId, toChainId, middlewareInputToken, tokenToBridge, amount)\n    },\n    [MovrRouterInterface.getSighash('outboundTransferTo')]: (value, data, currentNetwork) => {\n        const { middlewareRequest, amount, bridgeRequest, toChainId } = MovrRouterInterface.parseTransaction({ data, value }).args[0]\n        const { inputToken } = middlewareRequest\n        const { inputToken: outputToken } = bridgeRequest\n        return formatTx(currentNetwork.chainId, toChainId, inputToken, outputToken, amount)\n    }\n}\n\nexport default movrTxParser","import './History.scss'\n\nimport { useState, useEffect, useMemo, useRef } from 'react'\nimport { MdOutlineArrowForward, MdOutlineCheck, MdOutlineClose } from 'react-icons/md'\nimport { HiOutlineExternalLink } from 'react-icons/hi'\nimport { Loading } from 'components/common'\nimport useMovr from 'components/Wallet/CrossChain/useMovr'\nimport networks from 'consts/networks'\nimport { useToasts } from 'hooks/toasts'\nimport { useRelayerData } from 'hooks'\nimport movrTxParser from './movrTxParser'\n\nconst History = ({ relayerURL, network, account, quotesConfirmed }) => {\n    const { addToast } = useToasts()\n    const { checkTxStatus } = useMovr()\n\n    const [txStatuses, setTxStatuses] = useState([])\n    const [loading, setLoading] = useState(false)\n    const [cacheBreak, setCacheBreak] = useState(() => Date.now())\n    const currentNetwork = useRef(network.id)\n\n    const getNetworkDetails = chainId => networks.find(n => n.chainId === chainId)\n    const formatAmount = (amount, asset) => amount / Math.pow(10, asset.decimals)\n\n    // @TODO refresh this after we submit a bundle; perhaps with the upcoming transactions service\n    // We want this pretty much on every rerender with a 5 sec debounce\n    useEffect(() => {\n        if ((Date.now() - cacheBreak) > 5000) setCacheBreak(Date.now())\n        const intvl = setTimeout(() => setCacheBreak(Date.now()), 10000)\n        return () => clearTimeout(intvl)\n    }, [cacheBreak])\n\n    const url = relayerURL\n        ? `${relayerURL}/identity/${account}/${network.id}/transactions?cacheBreak=${cacheBreak}`\n        : null\n\n    const { data: relayerTransactions, errMsg, isLoading: isRelayerLoading } = useRelayerData(url)\n    \n    // Return relayer txs that contains outboundTransferTo calls to Movr contracts and parse them\n    const txTransfers = useMemo(() => {\n        if (network.id !== currentNetwork.current) return []\n\n        const transactions = relayerTransactions && relayerTransactions.txns ? relayerTransactions.txns : []\n        return transactions.map(({ txId, txns }) => {\n            const outboundTransferTo = txns.map(([, value, data]) => {\n                const sigHash = data.slice(0, 10)\n                const parseOutboundTransferTo = movrTxParser[sigHash]\n                if (parseOutboundTransferTo) return {\n                    txData: data,\n                    ...parseOutboundTransferTo(value, data, network)\n                }\n                return null\n            }).filter(call => call)\n\n            return outboundTransferTo.length ? {\n                hash: txId,\n                ...outboundTransferTo[0]\n            } : null\n        }).filter(tx => tx)\n    }, [relayerTransactions, network])\n\n    useEffect(() => {\n        async function getStatuses() {\n            const statuses = await Promise.all(txTransfers.map(async ({ hash, txData, from, to }) => {\n                const storedQuote = quotesConfirmed.find(q => q.txData === txData)\n                const serviceTimeMinutes = storedQuote ? storedQuote.serviceTimeMinutes || null : null\n                const fromNetwork = getNetworkDetails(from.chainId)\n                const toNetwork = getNetworkDetails(to.chainId)\n\n                try {\n                    const status = await checkTxStatus(hash, from.chainId, to.chainId)\n                    return {\n                        ...status,\n                        from,\n                        to: storedQuote ? storedQuote.to || null : to,\n                        serviceTimeMinutes,\n                        fromNetwork,\n                        toNetwork,\n                        isPending: !(status.sourceTxStatus === 'COMPLETED' && status.destinationTxStatus === 'COMPLETED')\n                    }\n                } catch(e) {\n                    console.error(e)\n                    addToast('Cross-Chain History: Unable to fetch transfer status.', { error: true })\n                    return {\n                        sourceTx: hash,\n                        from,\n                        to,\n                        serviceTimeMinutes,\n                        fromNetwork,\n                        toNetwork,\n                        statusError: true\n                    }\n                }\n            }))\n\n            if (network.id !== currentNetwork.current) return\n            setTxStatuses(statuses)\n        }\n\n        getStatuses()\n    }, [txTransfers, quotesConfirmed, network, checkTxStatus, addToast])\n\n    useEffect(() => {\n        if (!errMsg) return\n        console.error(errMsg)\n        addToast(`Cross-Chain History: ${errMsg}`, { error: true })\n    }, [errMsg, addToast])\n\n    useEffect(() => {\n        setLoading(isRelayerLoading && !txStatuses.length)\n    }, [isRelayerLoading, txStatuses])\n\n    useEffect(() => {\n        currentNetwork.current = network.id\n        setTxStatuses([])\n        setCacheBreak(Date.now())\n    }, [network])\n\n    return (\n        <div id=\"history\" className=\"panel\">\n            <div className=\"title\">\n               History\n            </div>\n            <div>\n                {\n                    loading ?\n                        <Loading/>\n                        :\n                        !txStatuses.length ?\n                            <div>No pending transfer/swap on this network.</div>\n                            :\n                            txStatuses.map(({ sourceTx, fromNetwork, toNetwork, from, to, serviceTimeMinutes, isPending, statusError }) => (\n                                <div className=\"tx-status\" key={sourceTx}>\n                                    <div className=\"summary\">\n                                        <div className=\"path\">\n                                            <div className=\"network\">\n                                                <div className=\"icon\" style={{backgroundImage: `url(${fromNetwork.icon})`}}></div>\n                                                <div className=\"name\">{ fromNetwork.name }</div>\n                                            </div>\n                                            <div className=\"amount\">\n                                                { from.amount ? formatAmount(from.amount, from.asset) : '' }\n                                                <div className=\"asset\">\n                                                    <div className=\"icon\" style={{backgroundImage: `url(${from?.asset?.icon})`}}></div>\n                                                    <div className=\"name\">{ from?.asset?.symbol }</div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <MdOutlineArrowForward/>\n                                        <div className=\"path\">\n                                            <div className=\"network\">\n                                                <div className=\"icon\" style={{backgroundImage: `url(${toNetwork.icon})`}}></div>\n                                                <div className=\"name\">{ toNetwork.name }</div>\n                                            </div>\n\n                                            <div className=\"amount\">\n                                                { to.amount ? formatAmount(to.amount, to.asset) : '' }\n                                                <div className=\"asset\">\n                                                    <div className=\"icon\" style={{backgroundImage: `url(${to?.asset?.icon})`}}></div>\n                                                    <div className=\"name\">{ to?.asset?.symbol }</div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"details\">\n                                        <a href={`${fromNetwork.explorerUrl}/tx/${sourceTx}`} target=\"_blank\" rel=\"noreferrer\">View on Block Explorer <HiOutlineExternalLink/></a>\n                                        {\n                                            statusError ? \n                                                <div className=\"status error\">\n                                                    <MdOutlineClose/>\n                                                    Could not fetch status\n                                                </div>\n                                                :\n                                                isPending ? \n                                                    <div className=\"status pending\">\n                                                        <Loading/>\n                                                        Pending\n                                                        <span>(Usually takes { serviceTimeMinutes || 20 } minutes)</span>\n                                                    </div>\n                                                    :\n                                                    <div className=\"status confirmed\">\n                                                        <MdOutlineCheck/>\n                                                        Confirmed\n                                                    </div>\n                                        }\n                                    </div>\n                                </div>\n                            ))\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default History","import './CrossChain.scss'\n\nimport { BsArrowDown } from 'react-icons/bs'\n\nimport { useEffect, useState, useCallback, useMemo, useRef } from 'react'\nimport { ethers } from 'ethers'\nimport { parseUnits } from 'ethers/lib/utils'\nimport { NumberInput, Button, Select, Loading, NoFundsPlaceholder } from 'components/common'\nimport useMovr from './useMovr'\nimport networks from 'consts/networks'\nimport { useToasts } from 'hooks/toasts'\nimport { useLocalStorage } from 'hooks'\nimport Quotes from './Quotes/Quotes'\nimport History from './History/History'\n\nconst CrossChain = ({ addRequest, selectedAccount, portfolio, network, relayerURL }) => {\n    const { addToast } = useToasts()\n    const { fetchChains, fetchFromTokens, fetchQuotes, fetchToTokens } = useMovr()\n\n    const [disabled, setDisabled] = useState(false)\n    const [loading, setLoading] = useState(true)\n    const [loadingFromTokens, setLoadingFromTokens] = useState(false)\n    const [loadingToTokens, setLoadingToTokens] = useState(false)\n    const [loadingQuotes, setLoadingQuotes] = useState(false)\n\n    const [fromTokensItems, setFromTokenItems] = useState([])\n    const [fromToken, setFromToken] = useState(null)\n    const [amount, setAmount] = useState(0)\n    const [chainsItems, setChainsItems] = useState([])\n    const [toChain, setToChain] = useState(null)\n    const [toTokenItems, setToTokenItems] = useState([])\n    const [toToken, setToToken] = useState(null)\n    const [quotes, setQuotes] = useState(null)\n    const portfolioTokens = useRef([])\n    const [quotesConfirmed, setQuotesConfirmed] = useLocalStorage({ key: 'quotesConfirmed', defaultValue: [] })\n\n    const fromChain = useMemo(() => network.chainId, [network.chainId])\n    const formDisabled = !(fromToken && toToken && fromChain && toChain && amount > 0)\n    const hasNoFunds = !portfolio.balance.total.full\n    const getTokenFromPortofolio = useCallback(tokenAddress => portfolio.tokens\n        .map(token => ({\n            ...token,\n            address: Number(token.address) === 0 ? `0x${'e'.repeat(40)}` : token.address\n        }))\n        .find(({ address }) => address === tokenAddress), [portfolio.tokens])\n\n    const loadChains = useCallback(async () => {\n        try {\n            const chains = await fetchChains()\n            const isSupported = chains.find(({ chainId }) => chainId === fromChain)\n            setDisabled(!isSupported)\n            if (!isSupported) return\n\n            const chainsItems = chains\n                .filter(({ chainId }) => chainId !== fromChain && networks.map(({ chainId }) => chainId).includes(chainId))\n                .map(({ icon, chainId, name }) => ({\n                    icon,\n                    label: name,\n                    value: chainId\n                }))\n            setChainsItems(chainsItems)\n            setToChain(chainsItems[0].value)\n            return true\n        } catch(e) {\n            console.error(e);\n            addToast(`Error while loading chains: ${e.message || e}`, { error: true })\n            return false\n        }\n    }, [fromChain, fetchChains, addToast])\n\n    const loadFromTokens = useCallback(async () => {\n        if (!fromChain || !toChain) return\n\n        try {\n            const fromTokens = await fetchFromTokens(fromChain, toChain)\n            const filteredFromTokens = fromTokens.filter(({ name }) => name)\n            const uniqueFromTokenAddresses = [\n                ...new Set(fromTokens\n                    .filter(({ address }) => portfolioTokens.current\n                        .map(({ address }) => address)\n                        .map(address => Number(address) === 0 ? `0x${'e'.repeat(40)}` : address).includes(address))\n                    .map(({ address }) => address)\n                )\n            ]\n\n            const fromTokensItems = uniqueFromTokenAddresses\n                .map(address => filteredFromTokens.find(token => token.address === address))\n                .filter(token => token)\n                .map(({ icon, name, symbol, address }) => ({\n                    icon,\n                    label: `${name} (${symbol})`,\n                    value: address,\n                    symbol\n                }))\n            setFromTokenItems(fromTokensItems)\n            return true\n        } catch(e) {\n            console.error(e);\n            addToast(`Error while loading from tokens: ${e.message || e}`, { error: true })\n            return false\n        }\n    }, [fromChain, toChain, fetchFromTokens, addToast])\n\n    const loadToTokens = useCallback(async () => {\n        if (!fromChain || !toChain) return\n\n        try {\n            const toTokens = await fetchToTokens(fromChain, toChain)\n            const filteredToTokens = toTokens.filter(({ name }) => name)\n            const uniqueTokenAddresses = [...new Set(toTokens.map(({ address }) => address))]\n            const tokenItems = uniqueTokenAddresses\n                .map(address => filteredToTokens.find(token => token.address === address))\n                .filter(token => token)\n                .map(({ icon, name, symbol, address }) => ({\n                    icon,\n                    label: `${name} (${symbol})`,\n                    value: address,\n                    symbol\n                }))\n                .sort((a, b) => a.label.localeCompare(b.label))\n            setToTokenItems(tokenItems)\n            return true\n        } catch(e) {\n            console.error(e);\n            addToast(`Error while loading to tokens: ${e.message || e}`, { error: true })\n            return false\n        }\n    }, [fromChain, toChain, fetchToTokens, addToast])\n\n    const maxAmount = useMemo(() => {\n        try {\n            const portfolioToken = getTokenFromPortofolio(fromToken)\n            if (!portfolioToken) return 0\n            const { balanceRaw, decimals } = portfolioToken\n            return ethers.utils.formatUnits(balanceRaw, decimals)\n        } catch(e) {\n            console.error(e);\n            addToast(`Error while formating amount: ${e.message || e}`, { error: true })\n        }\n    }, [getTokenFromPortofolio, fromToken, addToast])\n\n    const getQuotes = async () => {\n        setLoadingQuotes(true)\n\n        try {\n            const portfolioToken = getTokenFromPortofolio(fromToken)\n            if (!portfolioToken) return\n            const { decimals } = portfolioToken\n            const flatAmount = parseUnits(amount, decimals).toString()\n            const quotes = await fetchQuotes(fromToken, fromChain, toToken, toChain, flatAmount, ['hyphen', 'anyswap-router-v4'])\n            setQuotes(quotes)\n        } catch(e) {\n            console.error(e);\n            addToast(`Error while loading quotes: ${e.message || e}`, { error: true })\n        }\n\n        setLoadingQuotes(false)\n    }\n\n    const onQuotesConfirmed = quoteRequest => {\n        const updatedQuotesConfirmed = [...quotesConfirmed, quoteRequest]\n        setQuotesConfirmed(updatedQuotesConfirmed)\n    }\n\n    useEffect(() => setAmount(0), [fromToken])\n    useEffect(() => {\n        const fromTokenItem = fromTokensItems.find(({ value }) => value === fromToken)\n        if (!fromTokenItem) return\n        const equivalentToken = toTokenItems.find(({ symbol }) => symbol === fromTokenItem.symbol)\n        if (equivalentToken) setToToken(equivalentToken.value)\n    }, [fromTokensItems, toTokenItems, fromToken])\n\n    const asyncLoad = async (setStateLoading, loadCallback) => {\n        setStateLoading(true)\n        const loaded = await loadCallback()\n        setStateLoading(!loaded)\n    }\n\n    useEffect(() => {\n        if (!toChain) return\n        asyncLoad(setLoadingToTokens, loadToTokens)\n    }, [toChain, loadToTokens])\n\n    useEffect(() => {\n        if (!toChain) return\n        asyncLoad(setLoadingFromTokens, loadFromTokens)\n    }, [toChain, loadFromTokens])\n\n    useEffect(() => {\n        if (!fromChain || portfolio.isBalanceLoading) return\n        setQuotes(null)\n        asyncLoad(setLoading, loadChains)\n    }, [fromChain, portfolio.isBalanceLoading, loadChains])\n\n    useEffect(() => portfolioTokens.current = portfolio.tokens, [portfolio.tokens])\n\n    const amountLabel = <div className=\"amount-label\">Available Amount: <span>{ maxAmount }</span></div>\n\n    return (\n        <div id=\"cross-chain\">\n            <div className='panel'>\n                <div className=\"title\">\n                    Cross-chain transfers/swaps\n                    <div id=\"powered\">\n                        Powered by Movr\n                    </div>\n                </div>\n                {\n                    disabled ?\n                        <div className=\"placeholder\">Not supported on this Network</div>\n                        :\n                        loading || portfolio.isBalanceLoading ?\n                            <Loading/>\n                            :\n                            hasNoFunds ?\n                                <NoFundsPlaceholder/>\n                                :\n                                !loadingFromTokens && !loadingToTokens && !fromTokensItems.length ?\n                                    <div className=\"placeholder\">You don't have any available tokens to swap</div>\n                                    :\n                                    loadingQuotes ?\n                                            <Loading/>\n                                            :\n                                            quotes ?\n                                                <Quotes\n                                                    addRequest={addRequest}\n                                                    selectedAccount={selectedAccount}\n                                                    fromTokensItems={fromTokensItems}\n                                                    quotes={quotes}\n                                                    onQuotesConfirmed={onQuotesConfirmed}\n                                                    onCancel={() => setQuotes(null)}\n                                                />\n                                                :\n                                                <div className=\"form\">\n                                                    <label>From</label>\n                                                    <div className=\"inputs\">\n                                                        { loadingFromTokens ? <Loading/> : null }\n                                                        <Select searchable defaultValue={fromToken} items={fromTokensItems} onChange={value => setFromToken(value)}/>\n                                                        <NumberInput min=\"0\" label={amountLabel} value={amount} onInput={value => setAmount(value)} button=\"MAX\" onButtonClick={() => setAmount(maxAmount)}/>\n                                                    </div>\n                                                    <div className=\"separator\">\n                                                        <BsArrowDown/>\n                                                    </div>\n                                                    <label>To</label>\n                                                    <div className=\"inputs\">\n                                                        { loadingToTokens ? <Loading/> : null }\n                                                        <Select searchable defaultValue={toChain} items={chainsItems} onChange={value => setToChain(value)}/>\n                                                        <Select searchable defaultValue={toToken} items={toTokenItems} onChange={value => setToToken(value)}/>\n                                                    </div>\n                                                    <Button disabled={formDisabled} onClick={getQuotes}>Get Quotes</Button>\n                                                </div>\n                }\n            </div>\n            <History\n                network={network}\n                account={selectedAccount}\n                quotesConfirmed={quotesConfirmed}\n                relayerURL={relayerURL}\n            />\n        </div>\n    )\n}\n\nexport default CrossChain\n","import './OpenSea.scss'\nimport { OPENSEA_FRAME_URL } from 'config'\nimport GnosisSafeAppIframe from 'components/Plugins/GnosisSafeApps/GnosisSafeAppIframe'\n\nconst ambireOpenSea = {\n    name: 'Ambire OpenSea Plugin',\n    url: OPENSEA_FRAME_URL,\n    logo: 'https://www.ambire.com/ambire-logo.png',\n    desc: 'Ambire OpenSea Plugin'\n}\n\nconst OpenSea = ({ network, selectedAcc, gnosisConnect, gnosisDisconnect }) => {\n    return (\n        <div id=\"opensea\">\n            <GnosisSafeAppIframe\n                network={network}\n                selectedAcc={selectedAcc}\n                gnosisConnect={gnosisConnect}\n                gnosisDisconnect={gnosisDisconnect}\n                selectedApp={ambireOpenSea}\n                title={'Ambire OpenSea'}\n            />\n        </div>\n    )\n}\n\nexport default OpenSea","const unsupportedDApps = [\n    'https://opensea.io',\n    'https://curve.fi',\n    'https://loopring.io',\n    'https://dydx.exchange',\n    'https://trade.dydx.exchange',\n    'https://zks.app',\n    'https://bridge.avax.network',\n    'https://app.pangolin.exchange',\n    'https://unstoppabledomains.com',\n    'https://looksrare.org',\n    'https://www.myetherwallet.com',\n    'https://snapshot.org',\n    'https://collab.land',\n    'https://app.epns.io'\n]\n\nexport default unsupportedDApps\n","import \"./Wallet.scss\"\n\nimport { Switch, Route, Redirect, useLocation  } from \"react-router-dom\"\nimport Dashboard from \"./Dashboard/Dashboard\"\nimport TopBar from \"./TopBar/TopBar\"\nimport SideBar from \"./SideBar/SideBar\"\nimport Deposit from \"./Deposit/Deposit\"\nimport Swap from \"./Swap/Swap\"\nimport Transfer from \"./Transfer/Transfer\"\nimport Earn from \"./Earn/Earn\"\nimport Security from \"./Security/Security\"\nimport Transactions from './Transactions/Transactions'\nimport PluginGnosisSafeApps from 'components/Plugins/GnosisSafeApps/GnosisSafeApps'\nimport Collectible from \"./Collectible/Collectible\"\nimport { PermissionsModal, UnsupportedDAppsModal } from 'components/Modals'\nimport { useModals, usePermissions, useLocalStorage } from 'hooks'\nimport { useCallback, useEffect, useMemo, useRef } from 'react'\nimport { isFirefox } from 'lib/isFirefox'\nimport CrossChain from \"./CrossChain/CrossChain\"\nimport OpenSea from \"./OpenSea/OpenSea\"\nimport unsupportedDApps from 'consts/unsupportedDApps'\n\nexport default function Wallet(props) {\n  const { showModal } = useModals()\n  const { isClipboardGranted, isNoticationsGranted, arePermissionsLoaded, modalHidden } = usePermissions()\n  const { pathname } = useLocation()\n  const walletContainer = useRef()\n\n  const isLoggedIn = useMemo(() => props.accounts.length > 0, [props.accounts])\n  const [advancedModeList, setAdvancedModeList] = useLocalStorage({ key: 'dAppsAdvancedMode', defaultValue: [] })\n\n  const routes = [\n    {\n      path: '/dashboard/:tabId?',\n      component: <Dashboard\n        portfolio={props.portfolio}\n        selectedNetwork={props.network}\n        selectedAccount={props.selectedAcc}\n        setNetwork={props.setNetwork}\n        privateMode={props.privateMode}\n        rewardsData={props.rewardsData}\n        relayerURL={props.relayerURL}\n      />\n    },\n    {\n      path: '/deposit',\n      component: <Deposit selectedAcc={props.selectedAcc} selectedNetwork={props.network.id} relayerURL={props.relayerURL} />\n    },\n    {\n      path: '/transfer/:tokenAddressOrSymbol?',\n      component: <Transfer\n        portfolio={props.portfolio}\n        selectedAcc={props.selectedAcc}\n        selectedNetwork={{...props.network}}\n        addRequest={props.addRequest}\n        accounts={props.accounts}\n        addressBook={props.addressBook}\n      />\n    },\n    {\n      path: '/cross-chain',\n      component: <CrossChain\n        addRequest={props.addRequest}\n        selectedAccount={props.selectedAcc}\n        portfolio={props.portfolio}\n        network={props.network}\n        relayerURL={props.relayerURL}\n      />\n    },\n    {\n      path: '/earn',\n      component: <Earn\n        portfolio={props.portfolio}\n        selectedNetwork={{ ...props.network }}\n        selectedAcc={props.selectedAcc}\n        rewardsData={props.rewardsData}\n        addRequest={props.addRequest}\n      />\n    },\n    {\n      path: '/security',\n      component: <Security\n        relayerURL={props.relayerURL}\n        selectedAcc={props.selectedAcc}\n        selectedNetwork={props.network}\n        accounts={props.accounts}\n        addRequest={props.addRequest}\n        showSendTxns={props.showSendTxns}\n        onAddAccount={props.onAddAccount}\n      />\n    },\n    {\n      path: '/transactions/:page?',\n      component: <Transactions\n        relayerURL={props.relayerURL}\n        selectedAcc={props.selectedAcc}\n        selectedNetwork={props.network}\n        addRequest={props.addRequest}\n        eligibleRequests={props.eligibleRequests}\n        showSendTxns={props.showSendTxns}\n        setSendTxnState={props.setSendTxnState}\n      />\n    },\n    {\n      path: '/swap',\n      component: <Swap\n        gnosisConnect={props.gnosisConnect}\n        gnosisDisconnect={props.gnosisDisconnect}\n        selectedAcc={props.selectedAcc}\n        network={props.network}\n      />\n    },\n    {\n      path: '/opensea',\n      component: <OpenSea\n        gnosisConnect={props.gnosisConnect}\n        gnosisDisconnect={props.gnosisDisconnect}\n        selectedAcc={props.selectedAcc}\n        network={props.network}\n      />\n    },\n    {\n      path: '/nft/:network/:collectionAddr/:tokenId',\n      component: <Collectible\n        selectedAcc={props.selectedAcc}\n        selectedNetwork={{...props.network}}\n        addRequest={props.addRequest}\n        accounts={props.accounts}\n        addressBook={props.addressBook}\n      />\n    },\n    {\n      path: '/gnosis/plugins',\n      component: <PluginGnosisSafeApps\n        gnosisConnect={props.gnosisConnect}\n        gnosisDisconnect={props.gnosisDisconnect}\n        selectedAcc={props.selectedAcc}\n        network={props.network}\n      />\n    }\n  ]\n\n  const LoggedInGuard = () => (\n    !isLoggedIn ? <Redirect to=\"/add-account\"/> : null\n  )\n\n  const handlePermissionsModal = useCallback(async () => {\n    const account = props.accounts.find(({ id }) => id === props.selectedAcc)\n    if (!account) return\n\n    const relayerIdentityURL = `${props.relayerURL}/identity/${account.id}`\n\n    const areBlockedPermissions = arePermissionsLoaded\n      && ((!isFirefox() && !isClipboardGranted) || !isNoticationsGranted)\n    const showCauseOfPermissions = areBlockedPermissions && !modalHidden\n    const showCauseOfEmail = !!account.emailConfRequired\n    const showCauseOfBackupOptout = account.backupOptout\n\n    const permissionsModal = <PermissionsModal\n      relayerIdentityURL={relayerIdentityURL}\n      account={account}\n      onAddAccount={props.onAddAccount}\n      isCloseBtnShown={!showCauseOfBackupOptout}\n      isBackupOptout={!showCauseOfBackupOptout}\n    />\n\n    if (showCauseOfEmail || showCauseOfPermissions || showCauseOfBackupOptout) showModal(permissionsModal, { disableClose: true })\n  }, [props.accounts, props.relayerURL, props.onAddAccount, props.selectedAcc, arePermissionsLoaded, isClipboardGranted, isNoticationsGranted, modalHidden, showModal])\n\n  useEffect(() => handlePermissionsModal(), [handlePermissionsModal])\n\n  useEffect(() => {\n    const scrollTimeout = setTimeout(() => walletContainer.current && walletContainer.current.scrollTo({ top: 0, behavior: 'smooth' }), 0)\n    return () => clearTimeout(scrollTimeout)\n  }, [pathname])\n\n  useEffect(() => {\n    const unsupported = props.connections\n      .filter(({ session }) => session && session.peerMeta && unsupportedDApps.includes(session.peerMeta.url) && !advancedModeList.includes(session.peerMeta.url))\n\n    if (unsupported.length) showModal(<UnsupportedDAppsModal connections={unsupported} disconnect={props.disconnect} advancedModeList={advancedModeList} onContinue={setAdvancedModeList} />)\n  }, [props.connections, props.disconnect, showModal, advancedModeList, setAdvancedModeList])\n\n  return (\n    <div id=\"wallet\">\n      <SideBar match={props.match} portfolio={props.portfolio} hidePrivateValue={props.privateMode.hidePrivateValue} relayerURL={props.relayerURL} selectedNetwork={props.network} />\n      <TopBar {...props} />\n\n      <div id=\"wallet-container\" ref={walletContainer}>\n        <div id=\"wallet-container-inner\">\n          <Switch>\n            {\n              routes.map(({ path, component }) => (\n                <Route exact path={props.match.url + path} key={path}>\n                  <LoggedInGuard/>\n                  { component ? component : null }\n                </Route>\n              ))\n            }\n            <Route path={props.match.url + '/*'}>\n              <Redirect to={props.match.url + '/dashboard'} />\n            </Route>\n            <Route path={props.match.url}>\n              <LoggedInGuard/>\n            </Route>\n          </Switch>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport TrezorConnect from 'trezor-connect'\nimport { ethers } from 'ethers'\nimport HDNode from 'hdkey'\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerSignMessage, ledgerSignTransaction } from './ledgerWebHID'\nimport { latticeInit, latticeConnect, latticeSignMessage, latticeSignTransaction } from 'lib/lattice'\n\nlet wallets = {}\n\n// opts\n// passphrase: string\n// noCache: boolean\nexport function getWallet({ signer, signerExtra, chainId }, opts = {}) {\n  const id = `${signer.address || signer.one}${chainId}`\n  if (wallets[id]) return wallets[id]\n  return wallets[id] = getWalletNew({ signer, signerExtra, chainId }, opts)\n}\n\nfunction getWalletNew({ chainId, signer, signerExtra }, opts) {\n  if (signerExtra && signerExtra.type === 'trezor') {\n    const providerTrezor = new TrezorSubprovider({\n      trezorConnectClientApi: TrezorConnect,\n      networkId: chainId\n    })\n    providerTrezor._initialDerivedKeyInfo = getInitialDerivedKeyInfo(signerExtra)\n    // for Trezor/ledger, alternatively we can shim using https://www.npmjs.com/package/web3-provider-engine and then wrap in Web3Provider\n    return {\n      signMessage: hash => providerTrezor.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n      signTransaction: params => providerTrezor.signTransactionAsync({ ...params, from: signer.address })\n    }\n  } else if (signerExtra && signerExtra.type === 'ledger') {\n    if (signerExtra.transportProtocol === 'webHID') {\n      return {\n        signMessage: hash => ledgerSignMessage(ethers.utils.hexlify(hash), signer.address),\n        signTransaction: params => ledgerSignTransaction(params, chainId)\n      }\n    } else {\n      const provider = new LedgerSubprovider({\n        networkId: chainId,\n        ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n        baseDerivationPath: signerExtra.info.baseDerivationPath\n      })\n      return {\n        signMessage: hash => provider.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n        signTransaction: params => provider.signTransactionAsync({ ...params, from: signer.address })\n      }\n    }\n  } else if (signerExtra && signerExtra.type === 'Lattice') {\n    return {\n      signMessage: async hash => {\n        try {\n          const { commKey, deviceId } = signerExtra\n          const client = latticeInit(commKey)\n          const {isPaired, errConnect } = await latticeConnect(client, deviceId)\n\n          if (errConnect) throw new Error(errConnect.message || errConnect)\n\n          if (!isPaired) {\n            // Canceling the visualization of the secret code on the device's screen.\n            client.pair('')\n            throw new Error('The Lattice device is not paired! Please re-add your account!')\n          }\n\n          const { signedMsg, errSignMessage } = await latticeSignMessage(client, hash)\n          if (errSignMessage) throw new Error(errSignMessage)\n\n          return signedMsg\n        } catch(e) {\n          console.log(e)\n          throw new Error(`Lattice: ${e}`)\n        }\n      },\n      signTransaction: async params => {\n        try {\n          const { commKey, deviceId } = signerExtra\n          const client = latticeInit(commKey)\n          const {isPaired, errConnect } = await latticeConnect(client, deviceId)\n\n          if (errConnect) throw new Error(errConnect.message || errConnect)\n\n          if (!isPaired) {\n            // Canceling the visualization of the secret code on the device's screen.\n            client.pair('')\n            throw new Error('The Lattice device is not paired! Please re-add your account!')\n          }\n\n          const { serializedSigned, errSignTxn } = await latticeSignTransaction(client, params, chainId)\n          if (errSignTxn) throw new Error(errSignTxn)\n\n          return serializedSigned\n        } catch(e) {\n          console.log(e)\n          throw new Error(`Lattice: ${e}`)\n        }\n      }\n    }\n  } else if (signer.address) {\n    if (!window.ethereum) throw new Error('No web3 support detected in your browser: if you created this account through MetaMask, please install it.')\n    // NOTE: for metamask, use `const provider = new ethers.providers.Web3Provider(window.ethereum)`\n    // 'any' is explained here: https://github.com/ethers-io/ethers.js/issues/1107\n    const provider = new ethers.providers.Web3Provider(window.ethereum, 'any')\n    return provider.getSigner(signer.address)\n  } else if (signer.one) {\n    throw new Error('getWallet not applicable for QuickAccounts: use primaryKeyBackup with the passphrase and /second-sig')\n  } else {\n    throw new Error('unknown signer type')\n  }\n}\n\nfunction getInitialDerivedKeyInfo(signerExtra) {\n  return {\n    hdKey: HDNode.fromExtendedKey(signerExtra.info.hdKey.xpub),\n    derivationPath: signerExtra.info.derivationPath,\n    baseDerivationPath: signerExtra.info.baseDerivationPath\n  }\n}\n","// It costs around 19k to send a token, if that token was interacted with before in the same transaction,\n// because of SLOAD costs - they depend on whether a slot has been read\n// however, it costs 30k if the token has not been interacted with\n// we may decrease it a bit and lean on the relayer failsafe values (cfg.gasAddedOnEstimate) later on\nconst ADDED_GAS_TOKEN = 30000\nconst ADDED_GAS_NATIVE = 12000\n\nexport function isTokenEligible(token, speed, estimation) {\n  if (!token) return false\n  const { feeInFeeToken } = getFeesData(token, estimation, speed )\n  const balanceInFeeToken = (parseInt(token.balance) / Math.pow(10, token.decimals))\n  return balanceInFeeToken > feeInFeeToken\n}\n\n// can't think of a less funny name for that\nexport function getFeePaymentConsequences(token, estimation) {\n  // Relayerless mode\n  if (!estimation?.feeInUSD || !token) return { multiplier: 1, addedGas: 0 }\n  // Relayer mode\n  const addedGas = !token?.address || token?.address === '0x0000000000000000000000000000000000000000'\n    ? ADDED_GAS_NATIVE\n    : ADDED_GAS_TOKEN\n  return {\n    // otherwise we get very long floating point numbers with trailing .999999\n    multiplier: parseFloat(((estimation.gasLimit + addedGas) / estimation.gasLimit).toFixed(4)),\n    addedGas\n  }\n}\n\nconst contractErrors = ['caller is a contract', 'contract not allowed', 'contract not supported', 'No contractz allowed', /*no */'contracts allowed', /* c or C*/'ontract is not allowed']\n\nexport function mapTxnErrMsg(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Swap expired'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Swap will suffer slippage higher than your requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'Your signer address is not authorized.'\n  if (contractErrors.find(contractMsg => msg.includes(contractMsg))) return 'This dApp does not support smart wallets.'\n  return msg\n}\n\nexport function getErrHint(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Try performing the swap again'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Try performing the swap again or increase your slippage requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'If you set a new signer for this account, try re-adding the account.'\n  if (contractErrors.find(contractMsg => msg.includes(contractMsg))) return 'Contact the dApp developers to tell them to implement smart wallet support by not blocking contract interactions and/or implementing EIP1271.'\n  return 'Sending this transaction batch would have resulted in an error, so we prevented it.'\n}\n\nexport function toHexAmount(amnt, decimals) {\n  return '0x' + Math.round(amnt * Math.pow(10, decimals)).toString(16)\n}\n\nexport function getDiscountApplied(amnt, discount = 0) {\n  if (!discount) return 0\n  if (!amnt) return 0\n  if (discount === 1) return amnt\n  return amnt / (1 - discount) * discount\n}\n\n// Returns feeToken data with all multipliers applied\nexport function getFeesData(feeToken, estimation, speed) {\n  const { addedGas, multiplier } = getFeePaymentConsequences(feeToken, estimation)\n  const discountMultiplier = 1 - (feeToken?.discount || 0)\n  const totalMultiplier = multiplier * discountMultiplier\n  const nativeRate = feeToken?.nativeRate || 1\n\n  const feeInNative = estimation.customFee\n    ? ((estimation.customFee * discountMultiplier) / nativeRate)\n    : estimation.feeInNative[speed] * totalMultiplier\n\n  const feeInUSD = !isNaN(estimation.nativeAssetPriceInUSD) ? feeInNative * estimation.nativeAssetPriceInUSD : undefined\n\n  const feeInFeeToken = feeInNative * nativeRate\n\n  return {\n    feeInNative,\n    feeInUSD,\n    feeInFeeToken,\n    addedGas, // use it bundle data\n  }\n}\n","import './FeeSelector.scss'\n\nimport { AiOutlineWarning } from 'react-icons/ai'\nimport { Loading, Select, ToolTip, Button, TextInput } from 'components/common'\nimport {\n  isTokenEligible,\n  mapTxnErrMsg,\n  getErrHint,\n  getFeesData,\n  getDiscountApplied,\n} from './helpers'\nimport { FaPercentage } from 'react-icons/fa'\nimport { MdInfoOutline } from 'react-icons/md'\nimport { NavLink } from 'react-router-dom'\nimport { MdEdit } from 'react-icons/md'\nimport { useState } from 'react'\nimport { getTokenIcon } from 'lib/icons'\nimport { formatFloatTokenAmount } from 'lib/formatters'\n\nconst SPEEDS = ['slow', 'medium', 'fast', 'ape']\nconst walletDiscountBlogpost = 'https://blog.ambire.com/move-crypto-with-ambire-pay-gas-with-wallet-and-save-30-on-fees-35dca1002697'\nconst OVERPRICED_MULTIPLIER = 1.2\n// NOTE: Order matters for for secondary fort after the one by discount\nconst DISCOUNT_TOKENS_SYMBOLS = ['WALLET', 'WALLET-STAKING', 'xWALLET']\n\nfunction getBalance(token) {\n  const { balance, decimals, priceInUSD } = token\n  return balance / decimals * priceInUSD\n}\n\nconst WalletDiscountBanner = ({ currenciesItems, tokens, estimation, onFeeCurrencyChange, onDismiss }) => {\n  if (estimation.selectedFeeToken?.symbol\n    && (DISCOUNT_TOKENS_SYMBOLS.includes(estimation.selectedFeeToken?.symbol)\n      || estimation.selectedFeeToken.discount)\n  ) {\n    return null\n  }\n  const walletDiscountTokens = [...tokens]\n    .filter(x => DISCOUNT_TOKENS_SYMBOLS.includes(x.symbol) && x.discount)\n    .sort((a, b) =>\n      b.discount - a.discount\n      || ((!parseInt(a.balance) || !parseInt(b.balance)) ? getBalance(b) - getBalance(a) : 0)\n      || DISCOUNT_TOKENS_SYMBOLS.indexOf(a.symbol) - DISCOUNT_TOKENS_SYMBOLS.indexOf(b.symbol)\n    )\n\n  if (!walletDiscountTokens.length) return null\n\n  const discountToken = walletDiscountTokens[0]\n\n  const { discount } = discountToken\n  const eligibleWalletToken = currenciesItems.find(x => x.value && (x.value === 'WALLET' || x.value === discountToken.address))\n  const action = !!eligibleWalletToken\n    ? () => onFeeCurrencyChange(eligibleWalletToken.value)\n    : null\n  //TODO: go to swap \n  const actionTxt = !!eligibleWalletToken ? `USE ${discountToken.symbol}` : `BUY ${discountToken.symbol}`\n  const showSwap = !action\n\n  return (\n    <div className='wallet-discount-banner row'>\n      <div className='row'>\n        Get {discount * 100} <FaPercentage /> fees discount with &nbsp;<strong>$WALLET</strong> &nbsp;\n        <a\n          className=\"address row\"\n          href={walletDiscountBlogpost}\n          target=\"_blank\"\n          rel=\"noreferrer noopener\">\n          <MdInfoOutline />\n        </a>\n      </div>\n      {!!action && <Button onClick={action} mini>\n        {actionTxt}\n      </Button>}\n      {showSwap && <div className='swap-info'>\n        You can get $WALLET, just use the &nbsp;\n        <NavLink className='link' to={'/wallet/swap'} onClick={onDismiss}>\n          Swap\n        </NavLink> menu on the left!\n      </div>}\n    </div>\n  )\n}\n\nexport function FeeSelector({ disabled, signer, estimation, network, setEstimation, feeSpeed, setFeeSpeed, onDismiss }) {\n  const [editCustomFee, setEditCustomFee] = useState(false)\n\n  if (!estimation) return (<Loading />)\n  // Only check for insufficient fee in relayer mode (.feeInUSD is available)\n  // Otherwise we don't care whether the user has enough for fees, their signer wallet will take care of it\n  const insufficientFee = estimation && estimation.feeInUSD\n    && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation)\n  if (estimation && !estimation.success) return (<FailingTxn\n    message={<>The current transaction batch cannot be sent because it will fail: {mapTxnErrMsg(estimation.message)}</>}\n    tooltip={getErrHint(estimation.message)}\n  />)\n\n  if (!estimation.feeInNative) return (<></>)\n  if (estimation && !estimation.feeInUSD && estimation.gasLimit < 40000) {\n    return (<div>\n      <b>WARNING:</b> Fee estimation unavailable when you're doing your first account transaction and you are not connected to a relayer. You will pay the fee from <b>{signer.address}</b>, make sure you have {network.nativeAssetSymbol} there.\n    </div>)\n  }\n  if (estimation && estimation.feeInUSD && !estimation.remainingFeeTokenBalances) {\n    return (<div className='balance-error'>Internal error: fee balances not available. This should never happen, please report this on help.ambire.com</div>)\n  }\n\n  const { nativeAssetSymbol } = network\n  const tokens = estimation.remainingFeeTokenBalances || [{ symbol: nativeAssetSymbol, decimals: 18 }]\n  const onFeeCurrencyChange = value => {\n    const token = tokens.find(({ address, symbol }) => address === value || symbol === value)\n    setEstimation({ ...estimation, selectedFeeToken: token })\n  }\n\n  const currenciesItems = tokens\n    // NOTE: filter by slowest and then will disable the higher fees speeds otherwise \n    // it will just hide the token from the select\n    .filter(token => isTokenEligible(token, SPEEDS[0], estimation))\n    .sort((a, b) => (b.discount || 0) - (a.discount || 0))\n    .map(({ address, symbol, discount }) => ({\n      icon: address ? getTokenIcon(network.id, address) : null,\n      label: symbol,\n      value: address || symbol,\n      ...(discount ? {\n        extra: <div className='discount'> - {discount * 100} <FaPercentage /> </div>\n      } : {})\n    }))\n\n  const feeCurrencySelect = estimation.feeInUSD ? (<>\n    <div className='section'>\n      <div className='section-title'>Fee Currency</div>\n      <Select\n        className=\"fee-select\"\n        disabled={disabled}\n        defaultValue={estimation.selectedFeeToken?.address || estimation.selectedFeeToken?.symbol}\n        items={currenciesItems}\n        onChange={onFeeCurrencyChange}\n      />\n    </div>\n  </>) : (<></>)\n\n  const { discount = 0, symbol, nativeRate, decimals } = estimation.selectedFeeToken || {}\n\n  const setCustomFee = value => setEstimation(prevEstimation => ({\n    ...prevEstimation,\n    customFee: value\n  }))\n\n  const selectFeeSpeed = speed => {\n    setFeeSpeed(speed)\n    setCustomFee(null)\n    setEditCustomFee(false)\n  }\n\n  if (insufficientFee) {\n    const sufficientSpeeds = SPEEDS.filter((speed, i) => isTokenEligible(estimation.selectedFeeToken, speed, estimation))\n    const highestSufficientSpeed = sufficientSpeeds[sufficientSpeeds.length - 1]\n    setFeeSpeed(highestSufficientSpeed)\n  }\n\n  const checkIsSelectorDisabled = speed => {\n    const insufficientFee = !isTokenEligible(estimation.selectedFeeToken, speed, estimation)\n    return disabled || insufficientFee\n  }\n\n  const feeAmountSelectors = SPEEDS.map(speed => {\n    const isETH = symbol === 'ETH' && nativeAssetSymbol === 'ETH'\n    const {\n      feeInFeeToken,\n      feeInUSD\n      // NOTE: get the estimation res data w/o custom fee for the speeds\n    } = getFeesData({ ...estimation.selectedFeeToken }, { ...estimation, customFee: null }, speed)\n    const discountInFeeToken = getDiscountApplied(feeInFeeToken, discount)\n    const discountInFeeInUSD = getDiscountApplied(feeInUSD, discount)\n\n    const baseFeeInFeeToken = feeInFeeToken + discountInFeeToken\n    const baseFeeInFeeUSD = feeInUSD ? feeInUSD + discountInFeeInUSD : null\n\n    const showInUSD = (nativeRate !== null) && baseFeeInFeeUSD\n\n    return (\n      <div\n        key={speed}\n        className={`feeSquare${!estimation.customFee && feeSpeed === speed ? ' selected' : ''}${checkIsSelectorDisabled(speed) ? ' disabled' : ''}`}\n        onClick={() => !checkIsSelectorDisabled(speed) && selectFeeSpeed(speed)}\n      >\n        {!!discount && <FaPercentage className='discount-badge' />}\n        <div className='speed'>{speed}</div>\n        <div className='feeEstimation'>\n          {(isETH ? ' ' : '')\n            + (showInUSD ? `$${formatFloatTokenAmount(baseFeeInFeeUSD, true, 4)}` : formatFloatTokenAmount(baseFeeInFeeToken, true, decimals))\n            + (!isETH && !showInUSD ? ` ${estimation.selectedFeeToken.symbol}` : '')\n          }\n        </div>\n        {!isETH && !showInUSD && <div className='feeEstimation symbol'>\n          {estimation.selectedFeeToken.symbol}\n        </div>}\n      </div>\n    )\n  })\n\n  const {\n    feeInFeeToken,\n    feeInUSD,\n  } = getFeesData(estimation.selectedFeeToken, estimation, feeSpeed)\n\n  const {\n    feeInFeeToken: minFee,\n    feeInUSD: minFeeUSD,\n  } = getFeesData({ ...estimation.selectedFeeToken }, { ...estimation, customFee: null }, 'slow')\n\n  const {\n    feeInFeeToken: maxFee,\n    feeInUSD: maxFeeUSD,\n  } = getFeesData({ ...estimation.selectedFeeToken }, { ...estimation, customFee: null }, 'ape')\n\n  const discountMin = getDiscountApplied(minFee, discount)\n  const discountMax = getDiscountApplied(maxFee, discount)\n\n  const discountInFeeToken = getDiscountApplied(feeInFeeToken, discount)\n  const discountInUSD = getDiscountApplied(feeInUSD, discount)\n  const discountBaseMinInUSD = getDiscountApplied(minFeeUSD, discount)\n  const discountBaseMaxInUSD = getDiscountApplied(maxFeeUSD, discount)\n\n  // Fees with no discounts applied\n  const baseFeeInFeeToken = feeInFeeToken + discountInFeeToken\n  const baseFeeInUSD = feeInUSD + discountInUSD\n  const baseMinFee = minFee + discountMin\n  const baseMaxFee = (maxFee + discountMax) * OVERPRICED_MULTIPLIER\n  const baseMinFeeUSD = minFeeUSD + discountBaseMinInUSD\n  const baseMaxFeeUSD = (maxFeeUSD + discountBaseMaxInUSD) * OVERPRICED_MULTIPLIER\n\n  const isUnderpriced = !!estimation.customFee\n    && !isNaN(parseFloat(estimation.customFee))\n    && (baseFeeInFeeToken < baseMinFee)\n\n  const isOverpriced = !!estimation.customFee\n    && !isNaN(parseFloat(estimation.customFee))\n    && (baseFeeInFeeToken > baseMaxFee)\n\n  return (<>\n    {insufficientFee ?\n      (<div className='balance-error'>Insufficient balance for the fee.<br />Accepted tokens: {(estimation.remainingFeeTokenBalances || []).map(x => x.symbol).join(', ')}</div>)\n      : feeCurrencySelect\n    }\n\n    {WalletDiscountBanner({\n      selectedFeeToken: estimation.selectedFeeToken,\n      currenciesItems,\n      tokens,\n      estimation,\n      onFeeCurrencyChange,\n      onDismiss\n    })}\n\n    <div className='section-title'>Transaction Speed</div>\n    <div className='fee-selector'>\n      <div className='section'>\n        <div id='fee-selector'>{feeAmountSelectors}</div>\n        {\n          !editCustomFee ?\n            <div id='edit-custom-fee' onClick={() => setEditCustomFee(true)}>\n              <MdEdit />Edit fee\n            </div>\n            :\n            <div id='custom-fee-selector'>\n              <div className='title'>Custom Fee ({symbol})</div>\n              <TextInput\n                small\n                placeholder='Enter amount'\n                className={`${estimation.customFee ? 'selected' : ''}`}\n                onChange={value => setCustomFee(value)}\n                value={estimation.customFee}\n              />\n              {isUnderpriced &&\n                <div className='price-warning'>\n                  <div>Custom Fee too low. You can try to \"sign and send\" the transaction but most probably it will fail.</div>\n                  <div>Min estimated fee: &nbsp;\n                    {<Button textOnly\n                      onClick={() => setCustomFee(baseMinFee)}\n                    >\n                      {baseMinFee} {symbol}\n                    </Button>}\n                    {!isNaN(baseMinFeeUSD) &&\n                      <span>&nbsp; (~${formatFloatTokenAmount(baseMinFeeUSD, true, 4)}) </span>\n                    }\n                  </div>\n                </div>\n              }\n              {isOverpriced &&\n                <div className='price-warning'>\n                  <div>Custom Fee is higher than the APE speed. You will pay more than probably needed. Make sure you know what are you doing!</div>\n                  <div>Recommended max fee: &nbsp;\n                    {<Button textOnly\n                      onClick={() => setCustomFee(baseMaxFee)}\n                    >\n                      {baseMaxFee} {symbol}\n                    </Button>}\n                    {!isNaN(baseMaxFeeUSD) &&\n                      <span>&nbsp; (~${formatFloatTokenAmount(baseMaxFeeUSD, true, 4)}) </span>\n                    }\n                  </div>\n                </div>\n              }\n            </div>\n        }\n      </div>\n\n      <div className='fees-breakdown'>\n        {(<div className='fee-row native-fee-estimation'>\n          <div>\n            Fee {!!discount && <span className='discount-label'>*</span>}\n            {!!(discount && DISCOUNT_TOKENS_SYMBOLS.includes(estimation.selectedFeeToken?.symbol)) &&\n              <a\n                className=\"address row discount-label\"\n                href={walletDiscountBlogpost}\n                target=\"_blank\"\n                rel=\"noreferrer\">\n                &nbsp;<MdInfoOutline />\n              </a>}:\n          </div>\n          <div className='fee-amounts'>\n            {!isNaN(baseFeeInUSD) &&\n              <div>\n                ~${formatFloatTokenAmount(baseFeeInUSD, true, 4)}\n              </div>\n            }\n            {!isNaN(baseFeeInFeeToken) && <div>\n              {formatFloatTokenAmount(baseFeeInFeeToken, true, decimals) + ' ' + estimation?.selectedFeeToken?.symbol}\n            </div>\n            }\n          </div>\n        </div>)}\n\n        {!!discount && (<div className='fee-row native-fee-estimation discount-label'>\n          <div>\n            You save ({discount * 100}%):\n          </div>\n          <div className='fee-amounts'>\n            <div>\n              ~${formatFloatTokenAmount(discountInUSD, true, 4)}\n            </div>\n            {/* <div>\n              {discountInFeeToken + ' ' + estimation.selectedFeeToken.symbol}\n            </div> */}\n          </div>\n        </div>)}\n\n        {!!discount && (<div className='fee-row native-fee-estimation discount-label'>\n          <div>\n            You pay:\n          </div>\n          <div className='fee-amounts'>\n            <div>\n              ~${formatFloatTokenAmount(feeInUSD, true, 4)}\n            </div>\n            {/* <div>\n              {feeInFeeToken + ' ' + estimation.selectedFeeToken.symbol}              \n            </div> */}\n          </div>\n        </div>)}\n      </div>\n    </div>\n\n    {!estimation.feeInUSD ?\n      (<span className='no-relayer-msg'><b>WARNING:</b> Paying fees in tokens other than {nativeAssetSymbol} is unavailable because you are not connected to a relayer. You will pay the fee from <b>{signer.address}</b>.</span>)\n      : (<></>)}\n  </>)\n}\n\nexport function FailingTxn({ message, tooltip = '' }) {\n  return (<div className='failingTxn'>\n    <ToolTip label={tooltip}>\n      <div className='error-title'><AiOutlineWarning></AiOutlineWarning> Warning</div>\n      <div className='error-message'>{message}</div>\n    </ToolTip>\n  </div>)\n}","import { useState, useRef, useEffect } from 'react'\nimport { Button, Loading, TextInput } from 'components/common'\nimport { isTokenEligible } from './helpers'\nimport { MdCheck, MdCheckCircle, MdOutlineCheck, MdOutlineClose } from 'react-icons/md'\n\nexport default function Actions({ estimation, feeSpeed, approveTxn, rejectTxn, cancelSigning, signingStatus }) {\n  const [quickAccCredentials, setQuickAccCredentials] = useState({ code: '', passphrase: '' })\n  // reset this every time the signing status changes\n  useEffect(() => !signingStatus && setQuickAccCredentials(prev => ({ ...prev, code: '' })), [signingStatus])\n\n  const form = useRef(null)\n\n  const rejectButton = rejectTxn && (\n    // WARNING: DO NOT remove type='button' here, it indicates that this button is not a submit button in the <form>\n    // if it is, pressing Enter will reject the transaction rather than submit it\n    <Button danger icon={<MdOutlineClose/>} type='button' className='rejectTxn' onClick={rejectTxn}>Reject</Button>\n  )\n  const insufficientFee = estimation && estimation.feeInUSD\n    && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation)\n  const willFail = (estimation && !estimation.success) || insufficientFee\n  if (willFail) {\n    return (<div className='buttons'>\n      {rejectButton}\n    </div>)\n  }\n\n  const signButtonLabel = signingStatus && signingStatus.inProgress ?\n    <><Loading/>Signing...</>\n    : <><MdOutlineCheck/>Sign and send</>\n\n  const isRecoveryMode = signingStatus && signingStatus.finalBundle && signingStatus.finalBundle.recoveryMode\n  if (signingStatus && signingStatus.quickAcc) {\n    return (<>\n      {\n        signingStatus.confCodeRequired ?\n          <div className='confirmation-code-info'>\n            <div className='confirmation-code-info-title'><MdCheckCircle/>Confirmation</div>\n            <div className='confirmation-code-info-message'>\n              {signingStatus.confCodeRequired === 'otp' ? <>Please enter your OTP code and your password.</> : null}\n              {signingStatus.confCodeRequired === 'email' ?\n                (isRecoveryMode\n                  ? <>A confirmation code was sent to your email, please enter it to initiate the recovery.</>\n                  : <>A confirmation code was sent to your email, please enter it along with your password.</>)\n                      : null\n\t      }\n            </div>\n          </div>\n          :\n          null\n      }\n  \n      <form ref={form} className='quickAccSigningForm' onSubmit={e => { e.preventDefault() }}>\n        <div className='inputs-container'>\n          <TextInput\n            small\n            password\n            required\n            minLength={3}\n            placeholder='Password'\n            value={quickAccCredentials.passphrase}\n            style={isRecoveryMode ? { visibility: 'hidden' } : {} }\n            disabled={isRecoveryMode}\n            onChange={value => setQuickAccCredentials({ ...quickAccCredentials, passphrase: value })}\n          ></TextInput>\n          {/* Changing the autoComplete prop to a random string seems to disable it in more cases */}\n          <TextInput\n            small\n            pattern='[0-9]+'\n            title='Confirmation code should be 6 digits'\n            autoComplete='nope'\n            required minLength={6} maxLength={6}\n            placeholder={signingStatus.confCodeRequired === 'otp' ? 'Authenticator OTP code' : 'Confirmation code'}\n            value={quickAccCredentials.code}\n            onChange={value => setQuickAccCredentials({ ...quickAccCredentials, code: value })}\n          ></TextInput>\n        </div>\n        <div className='buttons'>\n          <Button\n            clear\n            disabled={signingStatus && signingStatus.inProgress}\n            icon={<MdOutlineClose/>}\n            type='button'\n            className='cancelSigning'\n            onClick={cancelSigning}\n          >\n            Cancel\n          </Button>\n          <Button \n            className='confirmSigning'\n            onClick={() => {\n              if (!form.current.checkValidity()) return\n              approveTxn({ quickAccCredentials })\n            }}\n          >\n            { signingStatus && signingStatus.inProgress ? <Loading/> : <><MdCheck/> Confirm</>}\n          </Button>\n        </div>\n      </form>\n    </>)\n  }\n\n  return (<div className='buttons'>\n      {rejectButton}\n      <Button className='approveTxn' disabled={!estimation || signingStatus} onClick={approveTxn}>\n        {signButtonLabel}\n      </Button>\n  </div>)\n}\n","import { Interface, hexlify } from 'ethers/lib/utils'\nconst IdentityInterface = new Interface(require('adex-protocol-eth/abi/Identity5.2'))\nconst FactoryInterface = new Interface(require('adex-protocol-eth/abi/IdentityFactory5.2'))\n\nexport async function sendNoRelayer ({ finalBundle, account, network, wallet, estimation, feeSpeed, provider }) {\n    const { signer } = finalBundle\n    // @TODO: in case we need deploying, run using deployAndCall pipeline with signed msgs\n    // @TODO: quickAccManager\n    if (signer.quickAccManager) throw new Error('quickAccManager not supported in relayerless mode yet')\n    // currently disabled quickAccManager cause 1) we don't have a means of getting the second sig 2) we still have to sign txes so it's inconvenient\n    // if (signer.quickAccManager) await finalBundle.sign(wallet)\n    //const [to, data] = signer.quickAccManager ? [signer.quickAccManager, QuickAccManagerInterface.encodeFunctionData('send', [finalBundle.identity, [signer.timelock, signer.one, signer.two], [false, finalBundle.signature, '0x']])] :\n\n    // NOTE: just adding values to gasLimit is bad because 1) they're hardcoded estimates\n    // and 2) the fee displayed in the UI does not reflect that\n    const isDeployed = await provider.getCode(finalBundle.identity).then(code => code !== '0x')\n    let gasLimit\n    let to, data\n    if (isDeployed) {\n      gasLimit = estimation.gasLimit + 20000\n      to = finalBundle.identity\n      data = IdentityInterface.encodeFunctionData('executeBySender', [finalBundle.txns])\n    } else {\n      await finalBundle.getNonce(provider)\n      // just some hardcoded value to make the signing pass\n      finalBundle.gasLimit = 400000\n      await finalBundle.sign(wallet)\n      to = account.identityFactoryAddr\n      data = FactoryInterface.encodeFunctionData('deployAndExecute', [account.bytecode, account.salt, finalBundle.txns, finalBundle.signature])\n      gasLimit = (await provider.estimateGas({ to, data, from: signer.address })).toNumber() + 20000\n    }\n\n    const txn = {\n      from: signer.address,\n      to, data,\n      gas: hexlify(gasLimit),\n      gasPrice: hexlify(Math.floor(estimation.feeInNative[feeSpeed] / estimation.gasLimit * 1e18)),\n      nonce: hexlify(await provider.getTransactionCount(signer.address))\n    }\n    try {\n      let txId\n      if (!wallet.sendTransaction) {\n        // HW wallets which only sign\n        const signed = await wallet.signTransaction(txn)\n        txId = (await provider.sendTransaction(signed)).hash\n      } else {\n        // web3 injectors which can't sign, but can sign+send\n        // they also don't like the gas arg they fully control the chain ID\n        const { chainId } = await wallet.provider.getNetwork()\n        if (network.chainId !== chainId) throw new Error(`Connected to the wrong network: please switch to ${network.name}`)\n        txId = (await wallet.sendTransaction({ from: txn.from, to: txn.to, data: txn.data, gasPrice: txn.gasPrice, nonce: txn.nonce })).hash\n      }\n      return { success: true, txId }\n    } catch(e) {\n      if (e.code === 'INSUFFICIENT_FUNDS') throw new Error(`Insufficient gas fees: you need to have ${network.nativeAssetSymbol} on ${signer.address}`)\n      throw e\n    }\n  }\n","//import { GrInspect } from 'react-icons/gr'\n// GiObservatory is also interesting\nimport { GiGorilla } from 'react-icons/gi'\nimport { FaChevronLeft } from 'react-icons/fa'\nimport { MdOutlineInfo } from 'react-icons/md'\nimport './SendTransaction.scss'\nimport { useEffect, useState, useMemo, useRef } from 'react'\nimport { Bundle } from 'adex-protocol-eth/js'\nimport { Wallet } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport * as blockies from 'blockies-ts'\nimport { useToasts } from 'hooks/toasts'\nimport { getWallet } from 'lib/getWallet'\nimport accountPresets from 'consts/accountPresets'\nimport { FeeSelector, FailingTxn } from './FeeSelector'\nimport Actions from './Actions'\nimport TxnPreview from 'components/common/TxnPreview/TxnPreview'\nimport { sendNoRelayer } from './noRelayer'\nimport { \n  isTokenEligible, \n  // getFeePaymentConsequences, \n  getFeesData,\n  toHexAmount,\n } from './helpers'\nimport { fetchPost } from 'lib/fetch'\nimport { toBundleTxn } from 'lib/requestToBundleTxn'\nimport { getProvider } from 'lib/provider'\nimport { MdInfo } from 'react-icons/md'\nimport { useCallback } from 'react'\nimport { ToolTip } from 'components/common'\nimport { Checkbox } from 'components/common'\n\nconst ERC20 = new Interface(require('adex-protocol-eth/abi/ERC20'))\n\nconst DEFAULT_SPEED = 'fast'\nconst REESTIMATE_INTERVAL = 15000\n\nconst REJECT_MSG = 'Ambire user rejected the request'\n\nfunction makeBundle(account, networkId, requests) {\n  const bundle = new Bundle({\n    network: networkId,\n    identity: account.id,\n    txns: requests.map(({ txn }) => toBundleTxn(txn, account.id)),\n    signer: account.signer\n  })\n  bundle.extraGas = requests.map(x => x.extraGas || 0).reduce((a, b) => a + b, 0)\n  bundle.requestIds = requests.map(x => x.id)\n  return bundle\n}\n\nfunction getErrorMessage(e) {\n  if (e && e.message === 'NOT_TIME') {\n    return 'Your 72 hour recovery waiting period still hasn\\'t ended. You will be able to use your account after this lock period.'\n  } else if (e && e.message === 'WRONG_ACC_OR_NO_PRIV') {\n    return 'Unable to sign with this email/password account. Please contact support.'\n  // NOTE: is INVALID_SIGNATURE even a real error?\n  } else if (e && e.message === 'INVALID_SIGNATURE') {\n    return 'Invalid signature. This may happen if you used password/derivation path on your hardware wallet.'\n  } else if (e && e.message === 'INSUFFICIENT_PRIVILEGE') {\n    return 'Wrong signature. This may happen if you used password/derivation path on your hardware wallet.'\n  } else {\n    return e.message || e\n  }\n}\n\nexport default function SendTransaction({ relayerURL, accounts, network, selectedAcc, requests, resolveMany, replacementBundle, replaceByDefault, onBroadcastedTxn, onDismiss }) {\n  // NOTE: this can be refactored at a top level to only pass the selected account (full object)\n  // keeping it that way right now (selectedAcc, accounts) cause maybe we'll need the others at some point?\n  const account = accounts.find(x => x.id === selectedAcc)\n\n  // Also filtered in App.js, but better safe than sorry here\n  const eligibleRequests = useMemo(() => requests\n    .filter(({ type, chainId, account, txn }) =>\n      type === 'eth_sendTransaction'\n      && chainId === network.chainId\n      && account === selectedAcc\n      && txn && (!txn.from || txn.from.toLowerCase() === selectedAcc.toLowerCase())\n    // we only need to update on change of IDs\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    ), [requests.map(x => x.id).join(','), network.chainId, selectedAcc])\n  const bundle = useMemo(\n    () => replacementBundle || makeBundle(account, network.id, eligibleRequests),\n    [replacementBundle, network.id, account, eligibleRequests]\n  )\n\n  if (!account || !bundle.txns.length) return (<div id='sendTransaction'>\n    <h3 className='error'>SendTransactions: No account or no requests: should never happen.</h3>\n  </div>)\n  return (<SendTransactionWithBundle\n    relayerURL={relayerURL}\n    bundle={bundle}\n    replaceByDefault={replaceByDefault}\n    network={network}\n    account={account}\n    resolveMany={resolveMany}\n    onBroadcastedTxn={onBroadcastedTxn}\n    onDismiss={onDismiss}\n  />)\n}\n\nfunction SendTransactionWithBundle({ bundle, replaceByDefault, network, account, resolveMany, relayerURL, onBroadcastedTxn, onDismiss }) {\n\n  const [estimation, setEstimation] = useState(null)\n\n  const [replaceTx, setReplaceTx] = useState(!!replaceByDefault)\n\n  const [signingStatus, setSigningStatus] = useState(false)\n  const [feeSpeed, setFeeSpeed] = useState(DEFAULT_SPEED)\n  const { addToast } = useToasts()\n  useEffect(() => {\n    if (!bundle.txns.length) return\n    setEstimation(null)\n  }, [bundle, setEstimation])\n\n  // Estimate the bundle & reestimate periodically\n  const currentBundle = useRef(null)\n  currentBundle.current = bundle\n  useEffect(() => {    // eslint-disable-next-line react-hooks/exhaustive-deps\n    // We don't need to reestimate the fee when a signing process is in progress\n    if (signingStatus) return\n    // nor when there are no txns in the bundle, if this is even possible\n    if (!bundle.txns.length) return\n\n    // track whether the effect has been unmounted\n    let unmounted = false\n\n    // Note: currently, there's no point of getting the nonce if the bundle already has a nonce\n    // We may want to change this if we make a check if the currently replaced txn was already mined\n    const reestimate = () => (relayerURL\n        ? bundle.estimate({ relayerURL, fetch, replacing: !!bundle.minFeeInUSDPerGas, getNextNonce: isNaN(bundle.nonce) })\n        : bundle.estimateNoRelayer({ provider: getProvider(network.id) })\n    )\n      .then(estimation => {\n        if (unmounted || bundle !== currentBundle.current) return\n        estimation.selectedFeeToken = { symbol: network.nativeAssetSymbol }\n        setEstimation(prevEstimation => {\n          if (prevEstimation && prevEstimation.customFee) return prevEstimation\n          if (estimation.remainingFeeTokenBalances) {\n            // If there's no eligible token, set it to the first one cause it looks more user friendly (it's the preferred one, usually a stablecoin)\n            estimation.selectedFeeToken = (\n                prevEstimation\n                && isTokenEligible(prevEstimation.selectedFeeToken, feeSpeed, estimation)\n                && prevEstimation.selectedFeeToken\n              ) || estimation.remainingFeeTokenBalances\n              // .sort((a, b) => (b.discount || 0) - (a.discount || 0))\n              .find(token => isTokenEligible(token, feeSpeed, estimation))\n              || estimation.remainingFeeTokenBalances[0]\n          }\n          return estimation\n        })\n        if (estimation.nextNonce && !estimation.nextNonce.pendingBundle) {\n          setReplaceTx(false)\n        }\n      })\n      .catch(e => {\n        if (unmounted) return\n        console.log('estimation error', e)\n        addToast(`Estimation error: ${e.message || e}`, { error: true })\n      })\n\n    reestimate()\n    const intvl = setInterval(reestimate, REESTIMATE_INTERVAL)\n\n    return () => {\n      unmounted = true\n      clearInterval(intvl)\n    }\n  }, [bundle, setEstimation, feeSpeed, addToast, network, relayerURL, signingStatus, replaceTx, setReplaceTx])\n\n  // The final bundle is used when signing + sending it\n  // the bundle before that is used for estimating\n  const getFinalBundle = useCallback(() => {\n    if (!relayerURL) {\n      return new Bundle({\n        ...bundle,\n        gasLimit: estimation.gasLimit,\n      })\n    }\n\n    const feeToken = estimation.selectedFeeToken\n\n    const {\n      feeInNative,\n      // feeInUSD, // don't need fee in USD for stables as it will work with feeInFeeToken\n      // Also it can be stable but not in USD\n      feeInFeeToken,\n      addedGas\n    } = getFeesData(feeToken, estimation, feeSpeed)\n    const feeTxn = feeToken.symbol === network.nativeAssetSymbol\n      // TODO: check native decimals \n      ? [accountPresets.feeCollector, toHexAmount(feeInNative, 18), '0x']\n      : [feeToken.address, '0x0', ERC20.encodeFunctionData('transfer', [\n        accountPresets.feeCollector,\n        toHexAmount(feeInFeeToken, feeToken.decimals)\n    ])]\n\n    const pendingBundle = estimation.nextNonce?.pendingBundle\n    const nextFreeNonce = estimation.nextNonce?.nonce\n    const nextNonMinedNonce = estimation.nextNonce?.nextNonMinedNonce\n\n    return new Bundle({\n      ...bundle,\n      txns: [...bundle.txns, feeTxn],\n      gasLimit: estimation.gasLimit + addedGas + (bundle.extraGas || 0),\n      nonce: bundle.nonce || ((replaceTx && pendingBundle) ? nextNonMinedNonce : nextFreeNonce)\n    })\n  }, [relayerURL, bundle, estimation, feeSpeed, network.nativeAssetSymbol, replaceTx])\n\n  const approveTxnImpl = async () => {\n    if (!estimation) throw new Error('no estimation: should never happen')\n\n    const finalBundle = getFinalBundle()\n    const provider = getProvider(network.id)\n    const signer = finalBundle.signer\n\n    const wallet = getWallet({\n      signer,\n      signerExtra: account.signerExtra,\n      chainId: network.chainId\n    })\n\n    if (relayerURL) {\n      // Temporary way of debugging the fee cost\n      // const initialLimit = finalBundle.gasLimit - getFeePaymentConsequences(estimation.selectedFeeToken, estimation).addedGas\n      // finalBundle.estimate({ relayerURL, fetch }).then(estimation => console.log('fee costs: ', estimation.gasLimit - initialLimit), estimation.selectedFeeToken).catch(console.error)\n      await finalBundle.sign(wallet)\n      return await finalBundle.submit({ relayerURL, fetch })\n    } else {\n      return await sendNoRelayer({\n        finalBundle, account, network, wallet, estimation, feeSpeed, provider\n      })\n    }\n  }\n\n  const approveTxnImplQuickAcc = async ({ quickAccCredentials }) => {\n    if (!estimation) throw new Error('no estimation: should never happen')\n    if (!relayerURL) throw new Error('Email/Password account signing without the relayer is not supported yet')\n\n    const finalBundle = (signingStatus && signingStatus.finalBundle) || getFinalBundle()\n    const signer = finalBundle.signer\n\n    const { signature, success, message, confCodeRequired } = await fetchPost(\n      `${relayerURL}/second-key/${bundle.identity}/${network.id}/sign`, {\n        signer, txns: finalBundle.txns, nonce: finalBundle.nonce, gasLimit: finalBundle.gasLimit,\n        code: quickAccCredentials && quickAccCredentials.code,\n        // This can be a boolean but it can also contain the new signer/primaryKeyBackup, which instructs /second-key to update acc upon successful signature\n        recoveryMode: finalBundle.recoveryMode\n      }\n    )\n    if (!success) {\n      if (!message) throw new Error(`Secondary key: no success but no error message`)\n      if (message.includes('invalid confirmation code')) {\n        addToast('Unable to sign: wrong confirmation code', { error: true })\n        return\n      }\n      throw new Error(`Secondary key error: ${message}`)\n    }\n    if (confCodeRequired) {\n      setSigningStatus({ quickAcc: true, finalBundle, confCodeRequired })\n    } else {\n      if (!signature) throw new Error(`QuickAcc internal error: there should be a signature`)\n      if (!account.primaryKeyBackup) throw new Error(`No key backup found: you need to import the account from JSON or login again.`)\n      setSigningStatus({ quickAcc: true, inProgress: true })\n      if (!finalBundle.recoveryMode) {\n        // Make sure we let React re-render without blocking (decrypting and signing will block)\n        await new Promise(resolve => setTimeout(resolve, 0))\n        const pwd = quickAccCredentials.passphrase || alert('Enter password')\n        const wallet = await Wallet.fromEncryptedJson(JSON.parse(account.primaryKeyBackup), pwd)\n        await finalBundle.sign(wallet)\n      } else {\n        // set both .signature and .signatureTwo to the same value: the secondary signature\n        // this will trigger a timelocked txn\n        finalBundle.signature = signature\n      }\n      finalBundle.signatureTwo = signature\n      return await finalBundle.submit({ relayerURL, fetch })\n    }\n  }\n\n  const approveTxn = ({ quickAccCredentials }) => {\n    if (signingStatus && signingStatus.inProgress) return\n    setSigningStatus(signingStatus || { inProgress: true })\n\n    if (account.signerExtra && account.signerExtra.type === 'ledger') {\n      addToast('Please confirm this transaction on your Ledger device.', { timeout: 10000 })\n    }\n\n    if (account.signerExtra && account.signerExtra.type === 'Lattice') {\n      addToast('Please confirm this transaction on your Lattice device.', { timeout: 10000 })\n    }\n\n    const requestIds = bundle.requestIds\n    const approveTxnPromise = bundle.signer.quickAccManager ?\n      approveTxnImplQuickAcc({ quickAccCredentials })\n      : approveTxnImpl()\n    approveTxnPromise.then(bundleResult => {\n      // special case for approveTxnImplQuickAcc\n      if (!bundleResult) return\n\n      // be careful not to call this after onDimiss, cause it might cause state to be changed post-unmount\n      setSigningStatus(null)\n\n      // Inform everything that's waiting for the results (eg WalletConnect)\n      const skipResolve = !bundleResult.success && bundleResult.message && bundleResult.message.match(/underpriced/i)\n      if (!skipResolve && requestIds) resolveMany(requestIds, { success: bundleResult.success, result: bundleResult.txId, message: bundleResult.message })\n\n      if (bundleResult.success) {\n        onBroadcastedTxn(bundleResult.txId)\n        onDismiss()\n      } else {\n        addToast(`Transaction error: ${getErrorMessage(bundleResult)}`, { error: true })  //'unspecified error'\n      }\n    })\n    .catch(e => {\n      setSigningStatus(null)\n      console.error(e)\n      if (e && e.message.includes('must provide an Ethereum address')) {\n        addToast(`Signing error: not connected with the correct address. Make sure you're connected with ${bundle.signer.address}.`, { error: true })\n      } else if (e && e.message.includes('0x6b0c')) {\n        // not sure if that's actually the case with this hellish error, but after unlocking the device it no longer appeared\n        // however, it stopped appearing after that even if the device is locked, so I'm not sure it's related...\n        addToast(`Ledger: unknown error (0x6b0c): is your Ledger unlocked and in the Ethereum application?`, { error: true })\n      } else {\n        addToast(`Signing error: ${getErrorMessage(e)}`, { error: true })\n      }\n    })\n  }\n\n  // Not applicable when .requestIds is not defined (replacement bundle)\n  const rejectTxn = bundle.requestIds && (() => {\n    onDismiss()\n    resolveMany(bundle.requestIds, { message: REJECT_MSG })\n  })\n\n  const accountAvatar = blockies.create({ seed: account.id }).toDataURL()\n\n  return (\n    <div id='sendTransaction'>\n      <div id=\"titleBar\">\n        <div className='dismiss' onClick={onDismiss}>\n          <FaChevronLeft size={35}/>\n          back\n          <ToolTip label=\"You can go back to the main dashboard and add more transactions to this bundle in order to sign & send them all at once.\">\n            <MdOutlineInfo size={25}/>\n          </ToolTip>\n        </div>\n      </div>\n\n      <div className='container'>\n        <div id='transactionPanel' className='panel'>\n          <div className='heading'>\n            <div className='title'>{ bundle.txns.length } Transaction{ bundle.txns.length > 1 ? 's' : '' } Waiting</div>\n          </div>\n          <div className='content'>\n            <div className={`listOfTransactions${bundle.requestIds ? '' : ' frozen'}`}>\n              {bundle.txns.map((txn, i) => {\n                const isFirstFailing = estimation && !estimation.success && estimation.firstFailing === i\n                // we need to re-render twice per minute cause of DEX deadlines\n                const min = Math.floor(Date.now() / 30000)\n                return (<TxnPreview\n                  key={[...txn, i].join(':')}\n                  // pasing an unused property to make it update\n                  minute={min}\n                  onDismiss={bundle.requestIds && (() => resolveMany([bundle.requestIds[i]], { message: REJECT_MSG }))}\n                  txn={txn} network={bundle.network} account={bundle.identity}\n                  isFirstFailing={isFirstFailing}\n                  disableDismiss={!!signingStatus}\n                  disableDismissLabel={\"Cannot modify transaction bundle while a signing procedure is pending\"}\n                  />\n                )\n              })}\n            </div>\n\n            <div className='separator'></div>\n\n            <div className='transactionsNote'>\n              {\n                bundle.requestIds ?\n                  <>\n                    <b><GiGorilla size={16}/> DEGEN TIP</b>\n                    <span>You can sign multiple transactions at once. Add more transactions to this batch by interacting with a connected dApp right now. Alternatively, you may click \"Back\" to add more transactions.</span>\n                  </>\n                  :\n                  <>\n                    <b>NOTE:</b>\n                    <span>You are currently replacing a pending transaction.</span>\n                  </>\n              }\n            </div>\n          </div>\n        </div>\n\n        <div id='detailsPanel' className='panel'>\n          <div id=\"options-container\">\n            <div className='section' id=\"signing-details\">\n              <div className='section-title'>Signing With</div>\n              <div className='section-content'>\n                <div className='account'>\n                  <div className='icon' style={{ backgroundImage: `url(${accountAvatar})` }}/>\n                  <div className='address'>{ account.id }</div>\n                </div>\n                <div className='network'>\n                  on\n                  <div className='icon' style={{ backgroundImage: `url(${network.icon})` }}/>\n                  <div className='address'>{ network.name }</div>\n                </div>\n              </div>\n            </div>\n\n            <FeeSelector\n              disabled={signingStatus && signingStatus.finalBundle && !(estimation && !estimation.success)}\n              signer={bundle.signer}\n              estimation={estimation}\n              setEstimation={setEstimation}\n              network={network}\n              feeSpeed={feeSpeed}\n              setFeeSpeed={setFeeSpeed}\n              onDismiss={onDismiss}\n            ></FeeSelector>\n          </div>\n\n          {\n            // If there's `replacementBundle`, it means we're cancelling or speeding up, so this shouldn't even be visible\n            !!estimation?.nextNonce?.pendingBundle &&\n            (\n              <div>\n               <Checkbox\n                    label='Replace currently pending transaction'\n                    checked={replaceTx}\n                    onChange={({ target }) => setReplaceTx(target.checked)}\n                />\n              </div>\n            )\n          }\n\n          {\n            estimation && estimation.success && estimation.isDeployed === false && bundle.gasLimit ?\n              <div className='first-tx-note'>\n                <div className='first-tx-note-title'><MdInfo/>Note</div>\n                <div className='first-tx-note-message'>\n                  Because this is your first Ambire transaction, this fee is {(60000 / bundle.gasLimit * 100).toFixed()}% higher than usual because we have to deploy your smart wallet.\n                  Subsequent transactions will be cheaper\n                </div>\n              </div>\n              :\n              null\n          }\n\n          <div id=\"actions-container\">\n            {\n              bundle.signer.quickAccManager && !relayerURL ? \n                <FailingTxn message='Signing transactions with an email/password account without being connected to the relayer is unsupported.'></FailingTxn>\n                :\n                <div className='section' id=\"actions\">\n                  <Actions\n                    estimation={estimation}\n                    approveTxn={approveTxn}\n                    rejectTxn={rejectTxn}\n                    cancelSigning={() => setSigningStatus(null)}\n                    signingStatus={signingStatus}\n                    feeSpeed={feeSpeed}\n                  />\n                </div>\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import './SignMessage.scss'\nimport { MdBrokenImage, MdCheck, MdClose } from 'react-icons/md'\nimport { Wallet } from 'ethers'\nimport { toUtf8String, keccak256, arrayify, isHexString } from 'ethers/lib/utils'\nimport { signMsgHash } from 'adex-protocol-eth/js/Bundle'\nimport * as blockies from 'blockies-ts';\nimport { getWallet } from 'lib/getWallet'\nimport { useToasts } from 'hooks/toasts'\nimport { fetchPost } from 'lib/fetch'\nimport { useState, useEffect, useRef } from 'react'\nimport { Button, Loading, TextInput } from 'components/common'\n\nconst CONF_CODE_LENGTH = 6\n\nexport default function SignMessage ({ toSign, resolve, account, connections, relayerURL, totalRequests }) {\n  const defaultState = () => ({ codeRequired: false, passphrase: '' })\n  const { addToast } = useToasts()\n  const [signingState, setSigningState] = useState(defaultState())\n  const [isLoading, setLoading] = useState(false)\n  const [confFieldState, setConfFieldState] = useState({isShown: false,  confCodeRequired: ''})\n  const [promiseResolve, setPromiseResolve] = useState(null)\n  const inputSecretRef = useRef(null)\n\n  const connection = connections.find(({ uri }) => uri === toSign.wcUri)\n  const dApp = connection ? connection?.session?.peerMeta || null : null\n\n  useEffect(()=> {\n    if (confFieldState.isShown) inputSecretRef.current.focus()\n  }, [confFieldState])\n\n  if (!toSign || !account) return (<></>)\n  if (toSign && !isHexString(toSign.txn)) return (<div id='signMessage'>\n    <h3 className='error'>Invalid signing request: .txn has to be a hex string</h3>\n    <Button className='reject' onClick={() => resolve({ message: 'signature denied' })}>Reject</Button>\n  </div>)\n\n  const handleSigningErr = e => {\n    console.error('Signing error', e)\n    if (e && e.message.includes('must provide an Ethereum address')) {\n      addToast(`Signing error: not connected with the correct address. Make sure you're connected with ${account.signer.address}.`, { error: true })\n    } else {\n      addToast(`Signing error: ${e.message || e}`, { error: true })\n    }\n  }\n  const approveQuickAcc = async confirmationCode => {\n    if (!relayerURL) {\n      addToast('Email/pass accounts not supported without a relayer connection', { error: true })\n      return\n    }\n    if (!signingState.passphrase) {\n      addToast('Password required to unlock the account', { error: true })\n      return\n    }\n    setLoading(true)\n    try {\n      const hash = keccak256(arrayify(toSign.txn))\n\n      const { signature, success, message, confCodeRequired } = await fetchPost(\n        // network doesn't matter when signing\n        `${relayerURL}/second-key/${account.id}/ethereum/sign`, {\n          toSign: hash,\n          code: confirmationCode\n        }\n      )\n      if (!success) {\n        if (!message) throw new Error(`Secondary key: no success but no error message`)\n        if (message.includes('invalid confirmation code')) {\n          addToast('Unable to sign: wrong confirmation code', { error: true })\n        }\n        addToast(`Second signature error: ${message}`, { error: true })\n        setConfFieldState({ isShown: false, confCodeRequired: null })\n        setLoading(false)\n        return\n      }\n      if (confCodeRequired) {\n        setConfFieldState({ isShown: true, confCodeRequired })\n        const confCode = await new Promise((resolve, reject) => { setPromiseResolve(() => resolve) })\n        if (!confCode) throw new Error('You must enter a confirmation code')\n        await approveQuickAcc(confCode)\n        setLoading(false)\n        return\n      }\n\n      if (!account.primaryKeyBackup) throw new Error(`No key backup found: you need to import the account from JSON or login again.`)\n      const wallet = await Wallet.fromEncryptedJson(JSON.parse(account.primaryKeyBackup), signingState.passphrase)\n      const sig = await signMsgHash(wallet, account.id, account.signer, arrayify(hash), signature)\n      resolve({ success: true, result: sig })\n      addToast(`Successfully signed!`)\n    } catch(e) { handleSigningErr(e) }\n    setLoading(false)\n  }\n\n  const approve = async () => {\n    if (account.signer.quickAccManager) {\n      await approveQuickAcc()\n      return\n    }\n\n    setLoading(true)\n    try {\n      // if quick account, wallet = await fromEncryptedBackup\n      // and just pass the signature as secondSig to signMsgHash\n      const wallet = getWallet({\n        signer: account.signer,\n        signerExtra: account.signerExtra,\n        chainId: 1 // does not matter\n      })\n      // It would be great if we could pass the full data cause then web3 wallets/hw wallets can display the full text\n      // Unfortunately that isn't possible, because isValidSignature only takes a bytes32 hash; so to sign this with\n      // a personal message, we need to be signing the hash itself as binary data such that we match 'Ethereum signed message:\\n32<hash binary data>' on the contract\n      const hash = keccak256(arrayify(toSign.txn)) // hacky equivalent is: id(toUtf8String(toSign.txn)) \n      const sig = await signMsgHash(wallet, account.id, account.signer, arrayify(hash))\n      resolve({ success: true, result: sig })\n      addToast(`Successfully signed!`)\n    } catch(e) { handleSigningErr(e) }\n    setLoading(false)\n  }\n\n  const handleInputConfCode = e => {\n    if (e.length === CONF_CODE_LENGTH) promiseResolve(e)\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault() \n    approve()\n  }\n\n  return (<div id='signMessage'>\n    <div id='signingAccount' className='panel'>\n      <div className='title'>\n        Signing with account\n      </div>\n      <div className=\"content\">\n        <img className='icon' src={blockies.create({ seed: account.id }).toDataURL()} alt='Account Icon'/>\n        { account.id }\n      </div>\n    </div>\n    <div className='panel'>\n      <div className='title'>\n        Sign message\n      </div>\n\n      <div className='request-message'>\n        <div className='dapp-message'>\n          { \n            dApp ?\n              <a className='dapp' href={dApp.url} target=\"_blank\" rel=\"noreferrer\">\n                <div className='icon' style={{ backgroundImage: `url(${dApp.icons[0]})` }}>\n                 <MdBrokenImage/> \n                </div>\n                { dApp.name }\n              </a>\n              :\n              'A dApp '\n          }\n          is requesting your signature.\n        </div>\n        <span>{totalRequests > 1 ? `You have ${totalRequests - 1} more pending requests.` : ''}</span>\n      </div>\n      \n      <textarea\n        className='sign-message'\n        type='text'\n        value={getMessageAsText(toSign.txn)}\n        readOnly={true}\n      />\n\n      <div className='actions'>\n        <form onSubmit={handleSubmit}>\n          {account.signer.quickAccManager && (<>\n            <TextInput\n              password\n              required minLength={3}\n              placeholder='Account password'\n              value={signingState.passphrase}\n              onChange={value => setSigningState({ ...signingState, passphrase: value })}\n            ></TextInput>\n            <input type=\"submit\" hidden />\n          </>)}\n\n          {confFieldState.isShown && (    \n            <>\n              {confFieldState.confCodeRequired === 'email' &&\n              (<span>A confirmation code has been sent to your email, it is valid for 3 minutes.</span>)} \n              {confFieldState.confCodeRequired === 'otp' && (<span>Please enter your OTP code</span>)}\n              <TextInput\n                ref={inputSecretRef}\n                placeholder={confFieldState.confCodeRequired === 'otp' ? 'Authenticator OTP code' : 'Confirmation code'}\n                onInput={value => handleInputConfCode(value)}\n              />\n            </>\n            )}\n          \n          <div className=\"buttons\">\n            <Button\n              type='button'\n              danger\n              icon={<MdClose/>}\n              className='reject'\n              onClick={() => resolve({ message: 'signature denied' })}\n            >Reject</Button>\n            <Button type='submit' className='approve' disabled={isLoading}>\n              {isLoading ? (<><Loading/>Signing...</>)\n              : (<><MdCheck/> Sign</>)}\n            </Button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>)\n}\n\nfunction getMessageAsText(msg) {\n  try { return toUtf8String(msg) }\n  catch(_) { return msg }\n}","import {\n  getSDKVersion,\n  MessageFormatter,\n  Methods\n} from '@gnosis.pm/safe-apps-sdk'\n\nfunction GnosisConnector(_iframeRef, _app) {\n  this.iframeRef = _iframeRef\n  this.app = _app\n  this.handlers = {}\n\n  this.on = (method, handler) => {\n    this.handlers[method] = handler\n  }\n\n  this.isValidMessage = (msg) => {\n    // @ts-expect-error .parent doesn't exist on some possible types\n    if (!msg?.source?.parent) {\n      return false\n    }\n    const sentFromIframe = msg.source.parent === window.parent\n    const knownMethod = Object.values(Methods).includes(msg.data.method)\n\n    return sentFromIframe && knownMethod\n  }\n\n  this.canHandleMessage = (msg) => {\n    return Boolean(this.handlers[msg.data.method])\n  }\n\n  this.send = (data, requestId, error) => {\n    const sdkVersion = getSDKVersion()\n    const msg = error\n      ? MessageFormatter.makeErrorResponse(requestId, error, sdkVersion)\n      : MessageFormatter.makeResponse(requestId, data, sdkVersion)\n\n    if (this.iframeRef) {\n      //console.log(\"Posting to child\")\n      //console.log(msg)\n      this.iframeRef.current?.contentWindow?.postMessage(msg, '*')\n    } else {\n      console.log('Iframe not referenced ')\n    }\n  }\n\n  this.handleIncomingMessage = async (msg) => {\n\n    const validMessage = this.isValidMessage(msg)\n    const hasHandler = this.canHandleMessage(msg)\n\n    if (validMessage && hasHandler) {\n      const handler = this.handlers[msg.data.method]\n      try {\n        // @ts-expect-error Handler existence is checked in this.canHandleMessage\n        const response = await handler(msg)\n\n        // If response is not returned, it means the response will be send somewhere else\n        if (typeof response !== 'undefined') {\n          this.send(response, msg.data.id)\n        }\n      } catch (err) {\n        console.error(\"GS : \" + err);\n        this.send(err.message, msg.data.id, true)\n        /*trackError(Errors._901, err.message, {\n          contexts: {\n            safeApp: this.app,\n            request: msg.data,\n          },\n        })*/\n      }\n    }\n  }\n\n  this.clear = () => {\n    //console.log('removeListener...')\n    window.removeEventListener('message', this.handleIncomingMessage)\n  }\n\n  console.log('new appCommunicator')\n  window.addEventListener('message', this.handleIncomingMessage)\n}\n\nexport {GnosisConnector}\n","export default __webpack_public_path__ + \"static/media/icon.946ee983.png\";","import { useCallback, useRef, useEffect } from 'react'\nimport { getTransactionSummary } from 'lib/humanReadableTransactions'\nimport { BigNumber } from 'ethers'\nimport { formatUnits } from 'ethers/lib/utils'\nimport { useToasts } from './toasts'\nimport networks from 'consts/networks'\nimport AMBIRE_ICON from 'resources/icon.png'\nimport { getProvider } from 'lib/provider'\n\nconst REQUEST_TITLE_PREFIX = 'Ambire Wallet: '\nconst SUPPORTED_TYPES =  ['eth_sendTransaction', 'personal_sign']\nconst BALANCE_TRESHOLD = 1.00002\nlet currentNotifs = []\nlet isLastTotalBalanceInit = false\nlet lastTokensBalanceRaw = []\n\nconst getAmountReceived = (lastToken, newBalanceRaw, decimals) => {\n    try {\n        const amountRecieved = lastToken\n            ? (BigNumber.from(newBalanceRaw.toString(10)).sub(BigNumber.from(lastToken.balanceRaw.toString(10))))\n            : newBalanceRaw\n        return formatUnits(amountRecieved, decimals)\n    } catch(e) {\n        console.error('Notifications: ' + e);\n    }\n}\n\nexport default function useNotifications (requests, onShow, portfolio, selectedAcc, network, sentTxn, confirmSentTx) {\n    const { addToast } = useToasts()\n    const onShowRef = useRef({})\n    onShowRef.current.onShow = onShow\n\n    useEffect(() => {\n        // hack because for whatever reason it doesn't work when we access the ref directly\n        window.onClickNotif = req => onShowRef.current.onShow(req)\n    }, [])\n    \n    // Shared code for all notifications\n    const showNotification = useCallback(({ id, title, body, requireInteraction, request, onClick }) => {\n        const notification = new Notification(title, {\n            requireInteraction: requireInteraction || false,\n            body,\n            icon: AMBIRE_ICON,\n        })\n        //notification.onclose = \n        notification.onclick = onClick || (() => {\n            if (request && request.type === 'eth_sendTransaction') window.onClickNotif(request)\n            window.focus()\n            notification.close()\n        })\n        currentNotifs.push({ id, notification })\n    }, [])\n\n    // Signing request notifications\n    requests.forEach(request => {\n        // only requests we actually want a notification for\n        if (!request.notification) return\n        if (!SUPPORTED_TYPES.includes(request.type)) return\n        if (currentNotifs.find(n => n.id === request.id)) return\n        if (!request.txn) return\n        const isSign = request.type === 'personal_sign'\n        const network = networks.find(x => x.chainId === request.chainId)\n        const title = REQUEST_TITLE_PREFIX+(\n            isSign\n                ? 'you have a new message to sign'\n                : `new transaction request on ${network ? network.name : 'unknown network'}`\n        )\n        const body = isSign ? 'Click to preview' : getTransactionSummary([request.txn.to, request.txn.value, request.txn.data], request.chainId, request.account)\n        showNotification({\n            id: request.id,\n            title,\n            body,\n            request,\n            requireInteraction: true\n        })\n    })\n\n    // Balance notifications\n    useEffect(() => {\n        try {\n            if (!portfolio.isBalanceLoading && portfolio.balance) {\n                if (!isLastTotalBalanceInit) {\n                    isLastTotalBalanceInit = true\n                    lastTokensBalanceRaw = portfolio.tokens.map(({ address, balanceRaw }) => ({ address, balanceRaw }))\n                }\n\n                const changedAmounts = portfolio.tokens.filter(({ address, balanceRaw }) => {\n                    const lastToken = lastTokensBalanceRaw.find(token => token.address === address)\n                    const isSignificantChange = lastToken && ((balanceRaw / lastToken.balanceRaw) > BALANCE_TRESHOLD)\n                    return !lastToken || isSignificantChange\n                })\n\n                changedAmounts.forEach(({ address, symbol, decimals, balanceRaw }) => {\n                    const lastToken = lastTokensBalanceRaw.find(token => token.address === address)\n                    const amountRecieved = getAmountReceived(lastToken, balanceRaw, decimals)\n\n                    showNotification({\n                        id: `received_amount_${Date.now()}`,\n                        title: `${amountRecieved} ${symbol} Received.`,\n                        body: `Your ${symbol} balance increased by ${amountRecieved} ${symbol}`\n                    })\n\n                    lastToken ? lastTokensBalanceRaw = [\n                        ...lastTokensBalanceRaw.filter(token => token.address !== address),\n                        { address, balanceRaw }\n                    ] : lastTokensBalanceRaw.push({ address, balanceRaw })\n                })\n            }\n        } catch(e) {\n            console.error(e)\n            addToast(e.message | e, { error: true })\n        }\n    }, [portfolio, addToast, showNotification])\n\n    // Tx mined notifications\n    useEffect(() => {\n        const interval = network.id === 'ethereum' ? 30000 : 10000\n        const txStatusInterval = setInterval(() => {\n            sentTxn\n                .filter(({ confirmed }) => !confirmed)\n                .forEach(async ({ hash }) => {\n                    const provider = getProvider(network.id)\n                    try {\n                        const txReceipt = await provider.getTransactionReceipt(hash)\n                        if (!txReceipt) return\n\n                        confirmSentTx(hash)\n                        showNotification({\n                            id: `confirmed_tx_${Date.now()}`,\n                            title: `Ambire Transaction Confirmed`,\n                            body: `Your transaction was successfully confirmed!`,\n                            onClick: () => window.open(network.explorerUrl+'/tx/'+hash, '_blank')\n                        })\n                    } catch(e) {\n                        console.error(e);\n                    }\n                })\n        }, interval)\n        return () => clearInterval(txStatusInterval)\n    }, [sentTxn, network, showNotification, confirmSentTx])\n\n    useEffect(() => {\n        isLastTotalBalanceInit = false\n        lastTokensBalanceRaw = []\n    }, [selectedAcc, network])\n\n    currentNotifs = currentNotifs.filter(({ id, notification }) => {\n        if (!requests.find(r => r.id === id)) {\n            notification.close()\n            return false\n        }\n        return true\n    })\n  }\n  \n","import { useEffect, useCallback, useMemo, useState } from 'react'\nimport { useLocation } from 'react-router-dom'\nimport { useHistory } from 'react-router'\n\nexport const useOneTimeQueryParam = searchParam => {\n    const { search } = useLocation()\n    const history = useHistory()\n    const urlSearchParams = useMemo(() => new URLSearchParams(search), [search])\n    const [oneTimeQueryParam, setOneTimeQueryParam] = useState(urlSearchParams.get(searchParam))\n    const altParams = useMemo(() => new URLSearchParams(window.location.href.split('?').slice(1).join('?').split('#')[0]), [])\n\n    const deleteOneTimeQueryParam = useCallback(() => {\n        if (urlSearchParams.has(searchParam)) {\n            urlSearchParams.delete(searchParam)\n            history.replace({\n                search: urlSearchParams.toString(),\n            })\n        }\n    }, [history, urlSearchParams, searchParam])\n\n    useEffect(() => {\n        if (urlSearchParams && urlSearchParams.get(searchParam)) setOneTimeQueryParam(urlSearchParams.get(searchParam))\n        else if (altParams.get(searchParam)) setOneTimeQueryParam(altParams.get(searchParam))\n        deleteOneTimeQueryParam()\n    }, [deleteOneTimeQueryParam, urlSearchParams, altParams, searchParam])\n    \n    return oneTimeQueryParam\n}\n","import './App.scss'\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n  Prompt\n} from 'react-router-dom'\nimport { useState, useEffect, useMemo, useCallback } from 'react'\nimport EmailLogin from './components/EmailLogin/EmailLogin'\nimport AddAccount from './components/AddAccount/AddAccount'\nimport Wallet from './components/Wallet/Wallet'\nimport ToastProvider from './components/ToastProvider/ToastProvider'\nimport ModalProvider from './components/ModalProvider/ModalProvider'\nimport SendTransaction from './components/SendTransaction/SendTransaction'\nimport SignMessage from './components/SignMessage/SignMessage'\nimport useAccounts from './hooks/accounts'\nimport useNetwork from './hooks/network'\nimport useWalletConnect from './hooks/walletconnect'\nimport useGnosisSafe from './hooks/useGnosisSafe'\nimport useNotifications from './hooks/notifications'\nimport { useAttentionGrabber, usePortfolio, useAddressBook, useRelayerData, usePrivateMode, useLocalStorage } from './hooks'\nimport { useToasts } from './hooks/toasts'\nimport { useOneTimeQueryParam } from './hooks/oneTimeQueryParam'\n\nconst relayerURL = process.env.hasOwnProperty('REACT_APP_RELAYER_URL') ? process.env.REACT_APP_RELAYER_URL : 'http://localhost:1934'\n\nsetTimeout(() => {\n  //console.warn(' If you do, malicious code could steal your funds! ')\n  //console.error('Only use the console if you are an experienced developer who knows what he\\'s doing')\n  console.log(\"  Hey...! Slow down you ambitious adventurer! You want to keep your funds safe! \")\n  console.error('        DO NOT PASTE ANY CODE HERE ! ')\n  console.error(' _          ___   ___  _  _   ___  ___  ___         _')\n  console.error('| |        |   \\\\ /   \\\\| \\\\| | / __|| __|| _ \\\\       | |')\n  console.error('|_|        | |) || - || .  || (_ || _| |   /       |_|')\n  console.error('(_)        |___/ |_|_||_|\\\\_| \\\\___||___||_|_\\\\       (_)')\n  console.log('At Ambire, we care about our users . Safety is our top priority! DO NOT PASTE ANYTHING HERE or it could result in the LOSS OF YOUR FUNDS!')\n}, 4000)\n\nfunction AppInner() {\n  // basic stuff: currently selected account, all accounts, currently selected network\n  const { accounts, selectedAcc, onSelectAcc, onAddAccount, onRemoveAccount } = useAccounts(useLocalStorage)\n  const addressBook = useAddressBook({ accounts, useStorage: useLocalStorage })\n  const { network, setNetwork, allNetworks } = useNetwork({ useStorage: useLocalStorage })\n  const { addToast } = useToasts()\n  const wcUri = useOneTimeQueryParam('uri')\n\n  // Signing requests: transactions/signed msgs: all requests are pushed into .requests\n  const { connections, connect, disconnect, isConnecting, requests: wcRequests, resolveMany: wcResolveMany } = useWalletConnect({\n    account: selectedAcc,\n    chainId: network.chainId,\n    initialUri: wcUri,\n    allNetworks,\n    setNetwork,\n    useStorage: useLocalStorage\n  })\n\n  const { requests: gnosisRequests, resolveMany: gnosisResolveMany, connect: gnosisConnect, disconnect: gnosisDisconnect } = useGnosisSafe({\n    selectedAccount: selectedAcc,\n    network: network,\n    useStorage: useLocalStorage\n  }, [selectedAcc, network])\n\n  // Internal requests: eg from the Transfer page, Security page, etc. - requests originating in the wallet UI itself\n  // unlike WalletConnect or SafeSDK requests, those do not need to be persisted\n  const [internalRequests, setInternalRequests] = useState([])\n  const addRequest = req => setInternalRequests(reqs => [...reqs, req])\n\n  // Merge all requests\n  const requests = useMemo(\n    () => [...internalRequests, ...wcRequests, ...gnosisRequests]\n      .filter(({ account }) => accounts.find(({ id }) => id === account)),\n    [wcRequests, internalRequests, gnosisRequests, accounts]\n  )\n  const resolveMany = (ids, resolution) => {\n    wcResolveMany(ids, resolution)\n    gnosisResolveMany(ids, resolution)\n    setInternalRequests(reqs => reqs.filter(x => !ids.includes(x.id)))\n  }\n\n  // Portfolio: this hook actively updates the balances/assets of the currently selected user\n  const portfolio = usePortfolio({\n    currentNetwork: network.id,\n    account: selectedAcc,\n    useStorage: useLocalStorage\n  })\n\n  const privateMode = usePrivateMode(useLocalStorage)\n\n  // Show the send transaction full-screen modal if we have a new txn\n  const eligibleRequests = useMemo(() => requests\n    .filter(({ type, chainId, account }) =>\n      type === 'eth_sendTransaction'\n      && chainId === network.chainId\n      && account === selectedAcc\n    ), [requests, network.chainId, selectedAcc])\n  const [sendTxnState, setSendTxnState] = useState(() => ({ showing: !!eligibleRequests.length }))\n  useEffect(\n    () => setSendTxnState({ showing: !!eligibleRequests.length }),\n    [eligibleRequests.length]\n  )\n  const showSendTxns = bundle => setSendTxnState({ showing: true, replacementBundle: bundle })\n\n  // Network shouldn't matter here\n  const everythingToSign = useMemo(() => requests\n    .filter(({ type, account }) => (type === 'personal_sign' || type === 'eth_sign')\n      && account === selectedAcc\n    ), [requests, selectedAcc])\n\n  // When the user presses back, we first hide the SendTransactions dialog (keeping the queue)\n  // Then, signature requests will need to be dismissed one by one, starting with the oldest\n  const onPopHistory = () => {\n    if (sendTxnState.showing) {\n      setSendTxnState({ showing: false })\n      return false\n    }\n    if (everythingToSign.length) {\n      resolveMany([everythingToSign[0].id], { message: 'Ambire user rejected the signature request' })\n      return false\n    }\n    return true\n  }\n\n  // Keeping track of transactions\n  const [sentTxn, setSentTxn] = useState([])\n  const onBroadcastedTxn = hash => {\n    if (!hash) {\n      addToast('Transaction signed but not broadcasted to the network!', { timeout: 15000 })\n      return\n    }\n    setSentTxn(sentTxn => [...sentTxn, { confirmed: false, hash }])\n    addToast((\n      <span>Transaction signed and sent successfully!\n        &nbsp;Click to view on block explorer.\n      </span>\n    ), { url: network.explorerUrl + '/tx/' + hash, timeout: 15000 })\n  }\n  const confirmSentTx = txHash => setSentTxn(sentTxn => {\n    const tx = sentTxn.find(tx => tx.hash === txHash)\n    tx.confirmed = true\n    return [\n      ...sentTxn.filter(tx => tx.hash !== txHash),\n      tx\n    ]\n  })\n\n  // Show notifications for all requests\n  useNotifications(requests, request => {\n    onSelectAcc(request.account)\n    setNetwork(request.chainId)\n    setSendTxnState(state => ({ ...state, showing: true }))\n  }, portfolio, selectedAcc, network, sentTxn, confirmSentTx)\n\n  useAttentionGrabber({\n    eligibleRequests,\n    isSendTxnShowing: sendTxnState.showing,\n    onSitckyClick: useCallback(() => setSendTxnState({ showing: true }), [])\n  })\n\n  const [cacheBreak, setCacheBreak] = useState(() => Date.now())\n  useEffect(() => {\n    if ((Date.now() - cacheBreak) > 5000) setCacheBreak(Date.now())\n    const intvl = setTimeout(() => setCacheBreak(Date.now()), 30000)\n    return () => clearTimeout(intvl)\n  }, [cacheBreak])\n  const rewardsUrl = (relayerURL && selectedAcc) ? `${relayerURL}/wallet-token/rewards/${selectedAcc}?cacheBreak=${cacheBreak}` : null\n  const rewardsData = useRelayerData(rewardsUrl)\n\n  return (<>\n    <Prompt\n      message={(location, action) => {\n        if (action === 'POP') return onPopHistory()\n        return true\n      }}/>\n\n    {!!everythingToSign.length && (<SignMessage\n      selectedAcc={selectedAcc}\n      account={accounts.find(x => x.id === selectedAcc)}\n      toSign={everythingToSign[0]}\n      totalRequests={everythingToSign.length}\n      connections={connections}\n      relayerURL={relayerURL}\n      resolve={outcome => resolveMany([everythingToSign[0].id], outcome)}\n    ></SignMessage>)}\n\n    {sendTxnState.showing ? (\n      <SendTransaction\n        accounts={accounts}\n        selectedAcc={selectedAcc}\n        network={network}\n        requests={eligibleRequests}\n        resolveMany={resolveMany}\n        relayerURL={relayerURL}\n        onDismiss={() => setSendTxnState({ showing: false })}\n        replacementBundle={sendTxnState.replacementBundle}\n        replaceByDefault={sendTxnState.replaceByDefault}\n        onBroadcastedTxn={onBroadcastedTxn}\n      ></SendTransaction>\n    ) : (<></>)\n    }\n\n    <Switch>\n      <Route path=\"/add-account\">\n        <AddAccount relayerURL={relayerURL} onAddAccount={onAddAccount}></AddAccount>\n      </Route>\n\n      <Route path=\"/email-login\">\n        <EmailLogin relayerURL={relayerURL} onAddAccount={onAddAccount}></EmailLogin>\n      </Route>\n\n      {selectedAcc ?\n        <Route path=\"/wallet\">\n          <Wallet\n            match={{ url: \"/wallet\" }}\n            accounts={accounts}\n            selectedAcc={selectedAcc}\n            addressBook={addressBook}\n            portfolio={portfolio}\n            onSelectAcc={onSelectAcc}\n            onRemoveAccount={onRemoveAccount}\n            allNetworks={allNetworks}\n            network={network}\n            setNetwork={setNetwork}\n            addRequest={addRequest}\n            connections={connections}\n            // needed by the top bar to disconnect/connect dapps\n            connect={connect}\n            disconnect={disconnect}\n            isWcConnecting={isConnecting}\n            // needed by the gnosis plugins\n            gnosisConnect={gnosisConnect}\n            gnosisDisconnect={gnosisDisconnect}\n            // required for the security and transactions pages\n            relayerURL={relayerURL}\n            // required by the transactions page\n            eligibleRequests={eligibleRequests}\n            showSendTxns={showSendTxns}\n            setSendTxnState={setSendTxnState}\n            onAddAccount={onAddAccount}\n            rewardsData={rewardsData}\n            privateMode={privateMode}\n          >\n          </Wallet>\n        </Route> :\n        <Redirect to={\"/add-account\"} />\n      }\n\n      <Route path=\"/\">\n        <Redirect to={selectedAcc ? \"/wallet/dashboard\" : \"/add-account\"}/>\n      </Route>\n\n    </Switch>\n  </>)\n}\n\n// handles all the providers so that we can use provider hooks inside of AppInner\nexport default function App() {\n  return (\n    <Router>\n      <ToastProvider>\n        <ModalProvider>\n          <AppInner/>\n        </ModalProvider>\n      </ToastProvider>\n    </Router>\n  )\n}\n","import { useCallback } from 'react'\nimport { useToasts } from 'hooks/toasts'\nimport { useHistory } from 'react-router-dom'\n\nexport default function useAccounts (useStorage) {\n    const { addToast } = useToasts()\n    const history = useHistory()\n\n    const [accounts, setAccounts] = useStorage({\n      key: 'accounts',\n      defaultValue: [],\n      setInit: initialAccounts => {\n        if (!Array.isArray(initialAccounts)) {\n          console.error('accounts: incorrect format')\n\n          return []\n        }\n\n        return initialAccounts\n      }}\n    )\n    const [selectedAcc, setSelectedAcc] = useStorage({\n      key: 'selectedAcc',\n      defaultValue: '',\n      isStringStorage: true,\n      setInit: initialSelectedAcc => {\n        if (!initialSelectedAcc || !accounts.find(x => x.id === initialSelectedAcc)) {\n          return accounts[0] ? accounts[0].id : ''\n        }\n\n        return initialSelectedAcc\n    }})\n\n    const onSelectAcc = useCallback(selected => {\n      setSelectedAcc(selected)\n    }, [setSelectedAcc])\n    const onAddAccount = useCallback((acc, opts = {}) => {\n      if (!(acc.id && acc.signer)) throw new Error('account: internal err: missing ID or signer')\n\n      const existing = accounts.find(x => x.id.toLowerCase() === acc.id.toLowerCase())\n      if (existing) {\n        addToast(JSON.stringify(existing) === JSON.stringify(acc) ? 'Account already added' : 'Account updated')\n      } else if (opts.isNew) {\n        // @TODO consider something more explanatory such as \"using Trezor as a signer\", or \"this is different from your signer address\"\n        addToast(`New Ambire account created: ${acc.id}${acc.signer.address ? '. This is a fresh smart wallet address.' : ''}`, { timeout: acc.signer.address ? 15000 : 10000 })\n      }\n\n      const existingIdx = accounts.indexOf(existing)\n        if (existingIdx === -1) accounts.push(acc)\n      else accounts[existingIdx] = acc\n\n      // need to make a copy, otherwise no rerender\n      setAccounts([ ...accounts ])\n\n      if (opts.select) onSelectAcc(acc.id)\n      if (Object.keys(accounts).length) {\n        history.push('/wallet/dashboard')\n      }\n    }, [accounts, addToast, onSelectAcc, history, setAccounts])\n\n    const onRemoveAccount = useCallback(id => {\n      if (!id) throw new Error('account: internal err: missing ID/Address')\n\n      const account = accounts.find(account => account.id === id)\n      if (account && account.email && account.cloudBackupOptout && !account.downloadedBackup)\n        return addToast('You have opted out of Ambire Cloud Backup. Please backup your account before logging out.', { error: true, route: '/wallet/security' })\n\n      const clearedAccounts = accounts.filter(account => account.id !== id)\n      setAccounts([...clearedAccounts])\n\n      if (!clearedAccounts.length) history.push('/add-account')\n      else onSelectAcc(clearedAccounts[0].id)\n    }, [accounts, history, onSelectAcc, addToast, setAccounts])\n\n    return { accounts, selectedAcc, onSelectAcc, onAddAccount, onRemoveAccount }\n  }\n","import { useCallback } from 'react'\nimport networks from 'consts/networks'\n\nexport default function useNetwork ({ defaultNetwork = 'ethereum', useStorage } = {}) {\n    const [networkId, setNetworkId] = useStorage({\n        key: 'network',\n        defaultValue: defaultNetwork,\n        isStringStorage: true,\n        setInit: networkId => networks.find(n => n.id === networkId) ? networkId : defaultNetwork\n    })\n\n    const setNetwork = useCallback(networkIdentifier => {\n        const network = networks.find(n => n.id === networkIdentifier || n.name === networkIdentifier || n.chainId === networkIdentifier)\n        if (!network) throw new Error(`no network found: ${networkIdentifier}`)\n\n        setNetworkId(network.id)\n    }, [setNetworkId])\n\n    return {\n        setNetwork,\n        network: networks.find(n => n.id === networkId),\n        allNetworks: networks\n    }\n}\n","import {useCallback, useRef, useMemo} from 'react'\nimport {useToasts} from 'hooks/toasts'\n\nimport {Methods} from '@gnosis.pm/safe-apps-sdk'\nimport {GnosisConnector} from 'lib/GnosisConnector'\nimport { getProvider } from 'lib/provider'\n\nconst STORAGE_KEY = 'gnosis_safe_state'\n\nexport default function useGnosisSafe({selectedAccount, network, verbose = 0, useStorage}) {\n  // One connector at a time\n  const connector = useRef(null)\n\n  const uniqueId = useMemo(() => new Date().getTime() + ' ' + network.chainId + ' ' + selectedAccount, [selectedAccount, network])\n\n  const {addToast} = useToasts()\n\n  // This is needed cause of the Gnosis Safe event handlers (listeners)\n  const stateRef = useRef()\n  stateRef.current = {\n    selectedAccount,\n    network\n  }\n\n  const [requests, setRequests] = useStorage({\n    key: STORAGE_KEY,\n    defaultValue: [],\n    setInit: initialRequests => !Array.isArray(initialRequests) ? [] : initialRequests\n  })\n\n  const connect = useCallback(connectorOpts => {\n    verbose > 1 && console.log(\"GS: creating connector\")\n\n    try {\n      connector.current = new GnosisConnector(\n        connectorOpts.iframeRef,\n        connectorOpts.app,\n        uniqueId\n      )\n    } catch (e) {\n      addToast(`Unable to connect to ${connectorOpts.app.url}: ${e.message}`)\n      return null\n    }\n\n    // reply back to iframe with safe data\n    connector.current.on(Methods.getSafeInfo, () => {\n      return {\n        safeAddress: stateRef.current.selectedAccount,\n        network: stateRef.current.network.id,\n        chainId: stateRef.current.network.chainId,\n        owners: [stateRef.current.selectedAccount],\n        threshold: 1, //Number of confirmations (not used in ambire)\n      }\n    })\n\n    //reply back to iframe with safe data\n\n    // connector.current.on(Methods.getSafeBalances, async (msg) => {\n    //   verbose>0 && console.log(\"DApp requested getSafeBalances\") && console.log(msg)\n\n    //TODO later\n    //await portfolio.updatePortfolio(\"polygon\", selectedAccount, true)//not this because it does NOT return the updated state anyway\n    //console.log(portfolio)\n\n    //struct template\n    /*connector.current.on(Methods.getSafeBalances, () => {\n      return {\n        \"fiatTotal\": \"0.18072\",\n          \"items\": [\n          {\n            \"tokenInfo\": {\n              \"type\": \"NATIVE_TOKEN\",\n              \"address\": \"0x0000000000000000000000000000000000000000\",\n              \"decimals\": 18,\n              \"symbol\": \"MATIC\",\n              \"name\": \"Matic\",\n              \"logoUri\": \"https://safe-transaction-assets.staging.gnosisdev.com/chains/137/currency_logo.png\"\n            },\n            \"balance\": \"100000000000000000\",\n            \"fiatBalance\": \"0.18072\",\n            \"fiatConversion\": \"1.8072\"\n          }\n        ]\n      }\n     })*/\n\n    connector.current.on(Methods.rpcCall, async (msg) => {\n      verbose > 0 && console.log(\"DApp requested rpcCall\", msg)\n\n      if (!msg?.data?.params) {\n        throw new Error(\"invalid call object\")\n      }\n      const method = msg.data.params.call\n      const callTx = msg.data.params.params\n\n      const provider = getProvider(stateRef.current.network.id)\n      let result\n      if (method === \"eth_call\") {\n        result = await provider.call(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getBalance\") {\n        result = await provider.getBalance(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_blockNumber\") {\n        result = await provider.getBlockNumber().catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getBlockByNumber\" || method === \"eth_getBlockByHash\") {\n        if (callTx[1]) {\n          result = await provider.getBlockWithTransactions(callTx[0]).catch(err => {\n            throw err\n          })\n        } else {\n          result = await provider.getBlock(callTx[0]).catch(err => {\n            throw err\n          })\n        }\n      } else if (method === \"eth_getTransactionByHash\") {\n        result = await provider.getTransaction(callTx[0]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getCode\") {\n        result = await provider.getCode(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getBlockByNumber\") {\n        result = await provider.getBlock(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getTransactionReceipt\") {\n        result = await provider.getTransactionReceipt(callTx[0]).catch(err => {\n          throw err\n        })\n      //requires custom from calls from SDK but are not implemented in gnosis SDK\n      } else if (method === 'gs_multi_send' || method === 'ambire_sendBatchTransaction') {\n        //As future proof as possible (tested with a tweaked eth_call)\n        msg.data.params.txs = callTx[0]\n        await handleSendTransactions(msg).catch(err => {\n          throw err\n        })\n      } else if (method === 'personal_sign') {\n        result = await handlePersonalSign(msg).catch(err => {\n          throw err\n        })\n      } else if (method === 'eth_estimateGas') {\n        result = await provider.estimateGas(callTx).catch(err => {\n          throw err\n        })\n      } \n      else {\n        throw new Error(\"method not supported \" + method)\n      }\n      return result\n    })\n\n    connector.current.on(Methods.sendTransactions, (msg) => {\n      handleSendTransactions(msg)\n    })\n\n    const handleSendTransactions = (msg) => {\n      verbose > 0 && console.log('DApp requested sendTx', msg)\n\n      const data = msg?.data\n      if (!data) {\n        console.error('GS: no data')\n        return\n      }\n\n      const txs = data?.params?.txs\n      if (txs?.length) {\n        for (let i in txs) {\n          if (!txs[i].from) txs[i].from = stateRef.current.selectedAccount\n        }\n      } else {\n        console.error('GS: no txs in received payload')\n        return\n      }\n\n      for (let ix in txs) {\n        const id = 'gs_' + data.id + ':' + ix\n        const request = {\n          id,\n          forwardId: msg.data.id,\n          type: 'eth_sendTransaction',\n          isBatch: txs.length > 1,\n          txn: txs[ix], //if anyone finds a dapp that sends a bundle, please reach me out\n          chainId: stateRef.current.network.chainId,\n          account: stateRef.current.selectedAccount\n        }\n        //is reducer really needed here?\n        setRequests(prevRequests => prevRequests.find(x => x.id === request.id) ? prevRequests : [...prevRequests, request])\n      }\n    }\n\n    const handlePersonalSign = (msg) => {\n      verbose > 0 && console.log('DApp requested signMessage', msg)\n\n      const data = msg?.data\n      if (!data) {\n        console.error('GS: no data')\n        return\n      }\n\n      const id = 'gs_' + data.id\n      const message = data?.params?.message\n      if (!message) {\n        console.error('GS: no message in received payload')\n        return\n      }\n\n      const request = {\n        id,\n        forwardId: msg.data.id,\n        type: 'personal_sign',\n        txn: message,\n        chainId: stateRef.current.network.chainId,\n        account: stateRef.current.selectedAccount\n      }\n\n      setRequests(prevRequests => prevRequests.find(x => x.id === request.id) ? prevRequests : [...prevRequests, request])\n    }\n\n    connector.current.on(Methods.signMessage, (msg) => handlePersonalSign(msg))\n\n    connector.current.on(Methods.getTxBySafeTxHash, async (msg) => {\n      const {safeTxHash} = msg.data.params\n      const provider = getProvider(stateRef.current.network.id)\n      try {\n        const res = await provider.getTransaction(safeTxHash)\n\n        return res\n      } catch (e) {\n        console.error(\"GS: Err getting transaction \" + safeTxHash)\n        console.log(e)\n        return {}\n      }\n    })\n  }, [uniqueId, addToast, verbose, setRequests])\n\n\n  const disconnect = useCallback(() => {\n    verbose > 1 && console.log(\"GS: disconnecting connector\")\n    connector.current?.clear()\n  }, [verbose])\n\n\n  const resolveMany = (ids, resolution) => {\n    for (let req of requests.filter(x => ids.includes(x.id))) {\n      if (!req.isBatch || req.id.endsWith(':0')) {\n        const replyData = {\n          id: req.forwardId,\n          success: null,\n          txId: null,\n          error: null\n        }\n        if (!resolution) {\n          replyData.error = 'Nothing to resolve'\n          replyData.success = false\n        } else if (!resolution.success) {\n          replyData.error = resolution.message\n          replyData.success = false\n        } else { //onSuccess\n          replyData.success = true\n          replyData.txId = resolution.result\n          replyData.safeTxHash = resolution.result\n        }\n        if (!connector.current) {\n          //soft error handling: sendTransaction has issues\n          //throw new Error(\"gnosis safe connector not set\")\n          console.error('gnosis safe connector not set')\n        } else {\n          console.log('gnosis reply', replyData)\n          connector.current.send(replyData, req.forwardId, replyData.error)\n        }\n      }\n    }\n\n    setRequests(prevRequests => prevRequests.filter(x => !ids.includes(x.id)))\n  }\n\n  return {\n    requests,\n    resolveMany,\n    connect,\n    disconnect\n  }\n}\n","export default function usePrivateMode(useStorage) {\n    const [ isPrivateMode, setIsPrivateMode ] = useStorage({ key: 'isPrivateMode' })\n\n    const togglePrivateMode = () => {\n        setIsPrivateMode(!isPrivateMode)\n    }\n\n    const hidePrivateValue = (value) => isPrivateMode ?\n\t\t(typeof value === 'string' && value.startsWith('0x') ? value.replace(/./gi, '*') : '**')\n\t\t: value;\n    const hidePrivateContent = (content) => isPrivateMode ? <div className='private-content'>{content}</div> : content;\n\n    return {\n        isPrivateMode,\n        hidePrivateValue,\n        hidePrivateContent,\n        togglePrivateMode\n    }\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}