{"version":3,"sources":["lib/fetch.js","components/common/Button/Button.js","components/common/Chart/Chart.js","components/common/Checkbox/Checkbox.js","helpers/onClickOutside.js","components/common/DropDown/DropDown.js","components/common/Loading/Loading.js","components/common/Segments/Segments.js","components/common/Select/Select.js","components/ToastProvider/ToastProvider.js","hooks/toasts.js","components/common/TextInput/TextInput.js","components/common/NumberInput/NumberInput.js","components/LoginOrSignupForm/LoginOrSignupForm.js","components/EmailLogin/EmailLogin.js","consts/accountPresets.js","components/AddAccount/AddAccount.js","components/Wallet/Dashboard/Assets/AssetsPlaceholder/AssetsPlaceholder.js","components/Wallet/Dashboard/Assets/Assets.js","components/Wallet/Dashboard/Collectables/CollectablesPlaceholder/CollectablesPlaceholder.js","components/Wallet/Dashboard/Collectables/Collectables.js","consts/networks.js","components/Wallet/Dashboard/Dashboard.js","components/Wallet/TopBar/TopBar.js","components/Wallet/SideBar/SideBar.js","resources/ramp.svg","resources/paytrie.svg","resources/transak.svg","config/index.js","services/providers.js","helpers/popupHelper.js","components/Wallet/Deposit/Providers/Providers.js","resources/ethereum-logo.png","resources/polygon-logo.svg","components/Wallet/Deposit/Deposit.js","components/Wallet/Swap/SushiIframe.js","components/Wallet/Swap/Swap.js","components/Wallet/Transfer/SendPlaceholder/SendPlaceholder.js","components/Wallet/Transfer/Transfer.js","consts/privilegesOptions.js","consts/supportedProtocols.js","hooks/portfolio.js","hooks/walletconnect.js","hooks/relayerData.js","components/Wallet/Security/Security.js","lib/humanReadableTransactions.js","components/common/TxnPreview/TxnPreview.js","components/Wallet/Transactions/Transactions.js","components/Plugins/GnosisSafeApps/GnosisSafeApps.js","consts/ERC721Abi.js","components/Wallet/Collectable/Collectable.js","components/Wallet/Wallet.js","lib/getWallet.js","components/SendTransaction/helpers.js","components/SendTransaction/FeeSelector.js","components/SendTransaction/Actions.js","components/SendTransaction/noRelayer.js","components/SendTransaction/SendTransaction.js","lib/GnosisConnector.js","hooks/notifications.js","App.js","hooks/accounts.js","hooks/network.js","hooks/useGnosisSafe.js","reportWebVitals.js","index.js"],"names":["fetch","require","fetchPost","url","body","a","headers","method","JSON","stringify","r","json","fetchGet","response","status","Error","fetchCaught","params","resp","console","error","errMsg","message","Button","children","small","icon","disabled","onClick","red","title","className","Chart","data","size","useState","hoveredItem","setHoveredItem","colors","height","width","onMouseEnter","item","label","sort","b","value","sortData","startAngle","strokeColor","innerRadius","selectedOffset","legend","toggled","log","style","map","i","backgroundColor","index","length","Math","trunc","Checkbox","props","inputElem","type","checked","required","onChange","useOnClickOutside","ref","handler","useEffect","listener","event","current","contains","target","document","addEventListener","removeEventListener","DropDown","badge","closeOnClick","useRef","transitionRef","isDropDownOpen","setDropDownOpen","CSSTransition","unmountOnExit","in","timeout","classNames","nodeRef","Loading","Segments","defaultValue","segments","setValue","setSegment","useCallback","segment","Select","native","monospace","searchable","items","hiddenTextInput","isOpen","setOpen","search","setSearch","selectedItem","setSelectedItem","filteredItems","filter","toLowerCase","includes","selectItem","find","focus","ev","onInput","src","alt","ToastContext","React","createContext","id","ToastProvider","toasts","setToasts","addToast","content","options","toast","createRef","setTimeout","removeToast","t","Provider","TransitionGroup","href","rel","useToasts","useContext","TextInput","placeholder","info","copy","navigator","clipboard","writeText","NumberInput","min","max","button","onButtonClick","LoginOrSignupForm","action","onAccRequest","inProgress","passConfirmInput","email","passphrase","passphraseConfirm","state","setState","onUpdate","updates","newState","invalid","setCustomValidity","isSignup","additionalOnSignup","backupOptout","additionalInputs","minLength","e","onSubmit","preventDefault","accType","EmailLogin","relayerURL","onAddAccount","requiresEmailConfFor","setRequiresConfFor","err","setErr","setInProgress","onTryDecrypt","identityInfo","meta","primaryKeyBackup","Wallet","fromEncryptedJson","parse","wallet","_id","salt","identityFactoryAddr","baseIdentityAddr","bytecode","quickAccSigner","address","one","signer","select","attemptLogin","ignoreEmailConfirmationRequired","encodeURIComponent","authorization","localStorage","loginSessionKey","errType","requestAuthResp","sessionKey","onLoginUserAction","timer","clearTimeout","importJSONHref","class","inner","color","accountPresets","quickAccManager","feeCollector","quickAccTimelock","TrezorConnect","manifest","appUrl","generateAddress2","getProxyDeployBytecode","AddAccount","signersToChoose","setChooseSigners","addAccErr","setAddAccErr","wrapProgress","fn","wrapErr","createQuickAcc","req","Promise","resolve","firstKeyWallet","createRandom","secondKeySecret","extraEntropy","Date","now","mnemonic","phrase","split","slice","join","secondKeyResp","quickAccountTuple","timelock","two","abiCoder","AbiCoder","accHash","keccak256","encode","privileges","privSlot","identityAddr","getAddress","toString","encrypt","scrypt","N","createResp","success","createFromEOA","addr","hexZeroPad","connectWeb3AndGetAccounts","window","ethereum","request","web3Accs","onEOASelected","addresses","getOwnedByEOAs","eoas","allUniqueOwned","all","signerAddr","Object","entries","forEach","getAccountByAddr","idAddr","then","connectTrezorAndGetAccounts","provider","TrezorSubprovider","trezorConnectClientApi","getAccountsAsync","signerExtra","_initialDerivedKeyInfo","connectLedgerAndGetAccounts","LedgerSubprovider","networkId","ledgerEthereumClientFactoryAsync","ledgerEthereumBrowserClientFactoryAsync","_initialDerivedKeyInfoAsync","addAccount","acc","opts","owned","addFromSignerButtons","backgroundImage","to","AssetsPlaceholder","symbol","balance","balanceUSD","Assets","assets","tokens","collectionName","img","collectionImg","toFixed","CollectablesPlaceholder","name","image","price","Collectables","collectables","network","tokenId","assetName","assetImg","networks","chainId","rpc","nativeAssetSymbol","explorerUrl","Dashboard","portfolio","setNetwork","chartTokensData","setChartTokensData","chartAssetsData","setChartAssetsData","chartType","setChartType","tableType","setTableType","chartSegments","tableSegments","networkDetails","useLayoutEffect","tokensData","Number","total","full","totalAssets","reduce","curr","assetsData","requestOtherProtocolsRefresh","isBalanceLoading","truncated","decimals","otherBalances","areAssetsLoading","TopBar","match","connections","connect","disconnect","onSelectAcc","selectedAcc","accounts","allNetworks","isClipboardGranted","setClipboardGranted","checkPermissions","userAgent","indexOf","permissions","query","allowWithoutGesture","readClipboard","readText","startsWith","uri","prompt","accountsItems","blockies","seed","toDataURL","networksItems","session","peerMeta","icons","x","endsWith","peerId","SideBar","sidebarRef","balanceFontSize","setBalanceFontSize","resizeBalance","balanceFontSizes","charLength","closest","keys","prev","abs","fontSize","activeClassName","ZAPPER_API_KEY","process","SUSHI_SWAP_FRAME","openPayTrie","walletAddress","rightSideLabel","selectedNetwork","URL","w","h","dualScreenLeft","undefined","screenLeft","screenX","dualScreenTop","screenTop","screenY","innerWidth","documentElement","clientWidth","screen","innerHeight","clientHeight","systemZoom","availWidth","left","top","newWindow","open","popupCenter","format","Providers","providers","logo","RAMP_LOGO","fees","limits","currencies","RampInstantSDK","hostAppName","hostLogoUrl","variant","swapAsset","polygon","avalanche","userAddress","hostApiKey","show","openRampNetwork","PAYTRIE_LOGO","TRANSAK_LOGO","transak","transakSDK","apiKey","environment","defaultCryptoCurrency","disableWalletAddressForm","themeColor","redirectURL","hostURL","location","origin","widgetHeight","widgetWidth","init","on","ALL_EVENTS","EVENTS","TRANSAK_ORDER_SUCCESSFUL","orderData","close","openTransak","shouldBeDisabled","Deposit","POLYGON_LOGO","ambireSushi","desc","SushiSwap","gnosisConnect","gnosisDisconnect","iframeRef","app","Swap","SendPlaceholder","ERC20","Interface","crossChainAssets","withRouter","history","addRequest","tokenAddress","useParams","asset","setAsset","amount","setAmount","bigNumberHexAmount","setBigNumberHexAmount","setAddress","setDisabled","assetsItems","addressesItems","selectedAsset","setMaxAmount","balanceRaw","ethers","utils","formatUnits","onAmountChange","bigNumberAmount","parseUnits","toHexString","push","pathname","isAddressValid","test","isLoading","txn","encodeFunctionData","account","privilegesOptions","true","false","suportedProtocols","protocols","getBalances","protocol","tokensByNetworks","otherProtocolsByNetworks","lastOtherProcolsRefresh","noop","noopSessionStorage","setSession","getSession","removeSession","SUPPORTED_METHODS","connectors","useWalletConnect","onCallRequest","stateRef","useReducer","requests","ids","dispatch","connectorOpts","connector","WalletConnectCore","cryptoLib","sessionStorage","sessionStart","sessionTimeout","onError","payload","approveSession","from","wcUri","rejectRequest","killSession","updateConnections","updateSession","wcConnect","URLSearchParams","get","clipboardError","isFirefox","tryReadClipboard","result","catch","runInitEffects","resolveMany","resolution","approveRequest","useRelayerData","setLoading","setData","updateData","unloaded","IDENTITY_INTERFACE","Security","onRemoveBtnClicked","key","privLevel","addTransactionToAddRequest","selectedAccount","privList","isQuickAcc","privText","isSelected","ERC20ABI","TRANSFER_SIGHASH","getSighash","getFunction","getTransactionSummary","accountAddr","callSummary","sendSummary","contractKey","contractInfo","verifiedContracts","tokenInfo","nativeAsset","parseInt","decodeFunctionData","token","pow","parsed","abi","parseTransaction","tokenAddr","args","path","output","amountOutMin","contractNote","recipientNote","getNetworkSymbol","TxnPreview","onDismiss","isFirstFailing","isExpanded","setExpanded","contractName","getContractName","MinedBundle","bundle","Array","isArray","txns","lastTxn","hasFee","identity","submittedAt","txId","Transactions","eligibleRequests","showSendTxns","firstPending","executed","mined","dapps","GnosisSafeApps","selectedApp","setSelectedApp","dapp","ERC721Abi","ERC721","handleUri","replace","Collectable","collectionAddr","owner","description","collection","metadata","setMetadata","recipientAddress","setRecipientAddress","isTransferDisabled","setTransferDisabled","fetchMetadata","getDefaultProvider","contract","Contract","ownerOf","tokenURI","jsonUrl","routes","component","wallets","getWallet","getWalletNew","providerTrezor","hdKey","HDNode","fromExtendedKey","xpub","derivationPath","baseDerivationPath","getInitialDerivedKeyInfo","signMessage","hash","signPersonalMessageAsync","hexlify","signTransaction","signTransactionAsync","Web3Provider","getSigner","isTokenEligible","speed","estimation","isStable","feeInUSD","feeInNative","getFeePaymentConsequences","multiplier","addedGas","gasLimit","mapTxnErrMsg","msg","getErrHint","SPEEDS","FeeSelector","setEstimation","feeSpeed","setFeeSpeed","insufficientFee","selectedFeeToken","remainingFeeTokenBalances","FailingTxn","tooltip","feeCurrencySelect","marginTop","feeAmountSelectors","Actions","approveTxn","rejectTxn","signingStatus","code","quickAccCredentials","setQuickAccCredentials","form","rejectButton","signButtonLabel","quickAcc","confCodeRequired","pattern","autoComplete","maxLength","checkValidity","IdentityInterface","FactoryInterface","sendNoRelayer","finalBundle","getCode","getNonce","sign","signature","estimateGas","toNumber","floor","getTransactionCount","gas","gasPrice","nonce","sendTransaction","signed","getNetwork","SendTransaction","replacementBundle","useMemo","Bundle","requestIds","makeBundle","SendTransactionWithBundle","setSigningStatus","unmounted","reestimate","estimate","estimateNoRelayer","eligibleToken","intvl","setInterval","clearInterval","getFinalBundle","feeToken","toHexAmount","amnt","round","feeTxn","approveTxnImpl","submit","approveTxnImplQuickAcc","pwd","alert","signatureTwo","firstFailing","blockExplorerUrl","bundleResult","GnosisConnector","_iframeRef","_app","this","handlers","isValidMessage","source","parent","sentFromIframe","knownMethod","values","Methods","canHandleMessage","Boolean","send","requestId","sdkVersion","getSDKVersion","MessageFormatter","makeErrorResponse","makeResponse","contentWindow","postMessage","handleIncomingMessage","validMessage","hasHandler","clear","currentNotifs","hasOwnProperty","AppInner","useHistory","accs","setAccounts","initialSelectedAcc","setSelectedAcc","selected","existingIdx","findIndex","useAccounts","defaultNetwork","n","setNetworkId","networkNameOrKey","useNetwork","wcRequests","wcResolveMany","verbose","uniqueId","getTime","setRequests","getSafeInfo","safeAddress","owners","threshold","rpcCall","call","callTx","getBalance","getBlockNumber","getBlockWithTransactions","getBlock","getTransaction","getTransactionReceipt","sendTransactions","txs","forwardId","prevRequests","getTxBySafeTxHash","safeTxHash","res","replyData","useGnosisSafe","gnosisRequests","gnosisResolveMany","currentNetwork","balanceByNetworks","setBalanceByNetworks","setBalanceLoading","setAssetsLoading","setBalance","setOtherBalances","setAssets","setCollectables","updateStates","otherProtocols","products","fetchBalances","failedRequests","requestsCount","toLocaleString","flat","fetchOtherProtocols","refreshBalanceIfFocused","hasFocus","loadBalance","loadProtocols","refreshInterval","usePortfolio","internalRequests","setInternalRequests","Notification","permission","requestPermission","notification","requireInteraction","onclick","useNotifications","sendTxnsShowing","setSendTxnsShowing","reqs","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.94887403.chunk.js","sourcesContent":["export const fetch = require('node-fetch')\n\nexport async function fetchPost (url, body) {\n\tconst r = await fetch(url, {\n\t\theaders: { 'content-type': 'application/json' },\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(body)\n\t})\n\treturn r.json()\n}\n\nexport const fetchGet = async url => {\n  const response = await fetch(url, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (response.status !== 200) throw new Error('Failed to fetch')\n  return response.json()\n}\n\nexport async function fetchCaught (url, params) {\n    let resp\n    try {\n      resp = await fetch(url, params)\n    } catch (e) {\n      console.error(e)\n      return { errMsg: `Unexpected error: ${e && e.message}` }\n    }\n    let body\n    try {\n      body = await resp.json()\n    } catch(e) {\n      console.error(e)\n      return { errMsg: `Unexpected error: ${resp.status}, ${e && e.message}`, resp }\n    }\n    return { body, resp, errMsg: '' }\n}","import './Button.scss'\n\nconst Button = ({ children, small, icon, disabled, onClick, red, title }) => {\n    return (\n        <button onClick={onClick} className={`buttonComponent ${small ? 'small' : ''} ${red ? 'red' : ''}`} disabled={disabled} title={title}>\n            { icon ? <div className=\"icon-button\">{ icon }</div> : null }\n            { children }\n        </button>\n    )\n}\n\nexport default Button\n","import './Chart.scss';\n\nimport DonutChart from \"react-donut-chart\";\nimport { useState } from 'react';\n\nconst Chart = ({ data, size }) => {\n    const [hoveredItem, setHoveredItem] = useState({});\n\n    const colors = [\n        \"#AA6AFF\",\n        \"#80FFDB\",\n        \"#8088FF\",\n        \"#E680FF\",\n        \"#A5FF80\",\n        \"#E6FF80\",\n        \"#FFC480\",\n        \"#FF8080\",\n    ];\n    \n    const strokeColor = \"transparent\";\n    const innerRadius = 0.5;\n    const selectedOffset = 0.05;\n\n    const onMouseEnter = (item) => {\n        setHoveredItem(item.label);\n    };\n\n    const onClick = (item, toggled) => {\n        if (toggled) {\n            console.log(item);\n        }\n    };\n\n    const sortData = data => {\n        return data.sort((a, b) => b.value - a.value);\n    };\n\n    const getItemColor = index => {\n        const colorCount = colors.length - 1;\n        return index > colorCount ? colors[index - (colors.length * Math.trunc(index / colors.length))] : colors[index];\n    };\n\n    return (\n        <div className=\"chart\">\n            <DonutChart\n                className=\"donut\"\n                height={size}\n                width={size}\n                onMouseEnter={(item) => onMouseEnter(item)}\n                data={sortData(data)}\n                colors={colors}\n                startAngle={-90}\n                strokeColor={strokeColor}\n                innerRadius={innerRadius}\n                selectedOffset={selectedOffset}\n                legend={false}\n                onClick={(item, toggled) => onClick(item, toggled)}\n            />\n            <div className=\"legend\" style={{height: size}}>\n                {\n                    data.map((item, i) => (\n                        <div className={`item ${hoveredItem === item.label ? 'active' : ''}`} key={item.label}>\n                            <div className=\"color\" style={{backgroundColor: getItemColor(i)}}/>\n                            <label>{ item.label }</label>\n                            <div className=\"separator\"></div>\n                            <div className=\"percent\">\n                                { item.value }%\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default Chart;","import React from 'react';\nimport './Checkbox.scss'\n\nfunction Checkbox(props) {\n    const inputElem =  (\n        <input type=\"checkbox\" checked={props.checked} required={props.required} onChange={props.onChange}/>\n    )\n\n    return props.label ? (<label className=\"checkbox-container\">\n        {inputElem}\n        <div className=\"checkbox-mark\"></div>\n        <div className=\"checkbox-label\">{props.label}</div>\n    </label>) : (<>\n        {inputElem}\n        <div className=\"checkbox-mark\"></div>\n    </>)\n}\n\nexport { Checkbox as default }","import { useEffect } from 'react';\n\nexport default function useOnClickOutside(ref, handler) {\n    useEffect(\n        () => {\n            const listener = (event) => {\n                if (!ref.current || ref.current.contains(event.target)) {\n                    return;\n                }\n                handler(event);\n            };\n            document.addEventListener(\"mousedown\", listener);\n            document.addEventListener(\"touchstart\", listener);\n                return () => {\n                    document.removeEventListener(\"mousedown\", listener);\n                    document.removeEventListener(\"touchstart\", listener);\n                };\n        },\n        [ref, handler]\n    );\n}","import './DropDown.scss'\n\nimport { useRef, useState } from 'react';\nimport { BsChevronUp, BsChevronDown } from 'react-icons/bs'\nimport { CSSTransition } from 'react-transition-group';\nimport useOnClickOutside from '../../../helpers/onClickOutside';\n\nexport default function DropDown({ children, title, badge, closeOnClick }) {\n    const ref = useRef();\n    const transitionRef = useRef();\n    const [isDropDownOpen, setDropDownOpen] = useState(false);\n\n    useOnClickOutside(ref, () => setDropDownOpen(false));\n\n    return (\n        <div className=\"dropdown\" ref={ref}>\n            <div className=\"content\" onClick={() => setDropDownOpen(!isDropDownOpen)}>\n                <div className=\"title\">{ title }</div>\n                {\n                    badge ? \n                        <div className=\"badge\">\n                            { badge > 9 ? '9+' : badge }\n                        </div>\n                        :\n                        null\n                }\n                <div className=\"handle\">\n                    {\n                        isDropDownOpen ? \n                            <BsChevronUp size={20}></BsChevronUp>\n                            :\n                            <BsChevronDown size={20}></BsChevronDown>\n                    }\n                </div>\n            </div>\n            <CSSTransition unmountOnExit in={isDropDownOpen} timeout={200} classNames=\"fade\" nodeRef={transitionRef}>\n                <div className=\"list\" ref={transitionRef} onClick={closeOnClick ? () => setDropDownOpen(false) : null}>\n                    { children }\n                </div>\n            </CSSTransition>\n        </div>\n    )\n}","import './Loading.scss';\n\nimport { AiOutlineLoading } from 'react-icons/ai';\n\nconst Loading = () => {\n    return (\n        <div className=\"loading\">\n            <div className=\"icon\">\n                <AiOutlineLoading size={35}/>\n            </div>\n        </div>\n    );\n};\n\nexport default Loading;","import { useCallback, useEffect, useState } from 'react'\nimport './Segments.scss'\n\nconst Segments = ({ small, defaultValue, segments, onChange }) => {\n    const [value, setValue] = useState(defaultValue);\n\n    const setSegment = useCallback(value => {\n        setValue(value)\n        onChange(value)\n    }, [onChange])\n\n    useEffect(() => {\n        setSegment(defaultValue)\n    }, [defaultValue, setSegment])\n\n    return (\n        <div className={`segments ${small ? 'small': ''}`}>\n            {\n                segments.map(segment => (\n                    <div className={`segment ${segment.value === value ? 'active' : ''}`} key={segment.value} onClick={() => setSegment(segment.value)}>\n                        {\n                            segment.icon ?\n                                <div className=\"icon\">{ segment.icon }</div>\n                                :\n                                null\n                        }\n                        { segment.value }\n                    </div>\n                ))\n            }\n        </div>\n    )\n}\n\nexport default Segments","import './Select.scss';\n\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { BsChevronUp, BsChevronDown } from 'react-icons/bs'\nimport { CSSTransition } from 'react-transition-group';\nimport useOnClickOutside from '../../../helpers/onClickOutside';\n\nconst Select = ({ children, native, monospace, searchable, defaultValue, items, onChange }) => {\n    const ref = useRef();\n    const hiddenTextInput = useRef();\n    const transitionRef = useRef();\n    const [isOpen, setOpen] = useState();\n    const [search, setSearch] = useState('');\n    const [selectedItem, setSelectedItem] = useState({\n        label: null,\n        value: null,\n        icon: null,\n    });\n\n    const filteredItems = search.length ? items.filter(({ label }) => label.toLowerCase().includes(search.toLowerCase())) : items\n\n    const selectItem = useCallback(item => {\n        setSelectedItem(item);\n        onChange(item.value);\n    }, [onChange])\n\n    useEffect(() => {\n        if (items.length) selectItem(items.find(item => item.value === defaultValue) || items[0])\n    }, [defaultValue, items, selectItem]);\n\n    useEffect(() => {\n        if (isOpen && searchable) {\n            hiddenTextInput.current.focus()\n            setSearch('')\n        }\n    }, [isOpen, searchable])\n\n    useOnClickOutside(ref, () => setOpen(false));\n\n    return (\n        !native ? \n            <div className={`select ${monospace ? 'monospace': ''}`} onClick={() => setOpen(!isOpen)} ref={ref}>\n                {\n                    searchable ? \n                        <input type=\"text\" className=\"search-input\" value={search} ref={hiddenTextInput} onInput={({ target }) => setSearch(target.value)}/>\n                        :\n                        null\n                }\n                {\n                    selectedItem ? \n                        <div className=\"value\">\n                            <div className=\"icon\">\n                                {\n                                    selectedItem.icon ? \n                                        <img src={selectedItem.icon} alt=\"Icon\" />\n                                        :\n                                        null\n                                }\n                            </div>\n                            { selectedItem.label || selectedItem.value }\n                            <div className=\"separator\"></div>\n                            <div className=\"handle\">\n                                {\n                                    isOpen ? \n                                        <BsChevronUp size={20}></BsChevronUp>\n                                        :\n                                        <BsChevronDown size={20}></BsChevronDown>\n                                }\n                            </div>\n                        </div>\n                        :\n                        null\n                }\n                {\n                    <CSSTransition unmountOnExit in={isOpen} timeout={200} classNames=\"fade\" nodeRef={transitionRef}>\n                        <div className=\"list\" ref={transitionRef}>\n                            {\n                                filteredItems.map(item => (\n                                    <div className={`option ${item.value === selectedItem.value ? 'active' : ''}`} key={item.value} onClick={() => selectItem(item)}>\n                                        <div className=\"icon\">\n                                            {\n                                                item.icon ? \n                                                    <img src={item.icon} alt=\"Icon\" />\n                                                    :\n                                                    null\n                                            }\n                                        </div>\n                                        { item.label || item.value }\n                                    </div>\n                                ))\n                            }\n                            { children }\n                        </div>\n                    </CSSTransition>\n                }\n            </div>\n            :\n            <select className=\"select\" onChange={ev => onChange(ev.target.value)} defaultValue={defaultValue}>\n                {\n                    items.map(item => (\n                        <option key={item.value} value={item.value}>\n                            { item.label || item.value }\n                        </option>\n                    ))\n                }\n            </select>\n    );\n};\n\nexport default Select;","import './ToastProvider.scss';\n\nimport React, { createRef, useState } from \"react\";\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport { useCallback } from 'react';\n\nconst ToastContext = React.createContext(null);\n\nlet id = 0\n\nconst ToastProvider = ({ children }) => {\n    const [toasts, setToasts] = useState([]);\n\n    const addToast = useCallback((content, options) => {\n        const { timeout, error, url } = {\n            timeout: 8000,\n            error: false,\n            url: null,\n            ...options\n        }\n\n        const toast = {\n            id: id++,\n            content,\n            error,\n            url,\n            ref: createRef()\n        }\n        \n        setToasts(toasts => [\n            ...toasts,\n            toast\n        ]);\n        setTimeout(() => removeToast(toast.id), timeout);\n    }, [setToasts]);\n\n    const removeToast = id => {\n        setToasts(toasts => toasts.filter(t => t.id !== id));\n    };\n    \n    return (\n        <ToastContext.Provider\n            value={{\n                addToast,\n                removeToast\n            }}\n        >\n            \n                <div id=\"toast-container\">\n                    <TransitionGroup className=\"transition-group\">\n                    {\n                        toasts.map(toast => (\n                            <CSSTransition timeout={200} classNames=\"slide-fade\" key={toast.id} nodeRef={toast.ref}>\n                                <a href={toast.url} target=\"_blank\" rel=\"noreferrer\">\n                                    <div className={`toast ${toast.error ? 'error' : ''}`} ref={toast.ref} onClick={() => removeToast(toast.id)}>\n                                        { toast.content }\n                                    </div>\n                                </a>\n                            </CSSTransition>\n                        ))\n                    }\n                    </TransitionGroup>\n                </div>\n            \n            { children }\n        </ToastContext.Provider>\n    );\n};\n\nexport { ToastContext };\nexport default ToastProvider;","import { useContext } from 'react';\nimport { ToastContext } from '../components/ToastProvider/ToastProvider';\n\nconst useToasts = () => {\n    return useContext(ToastContext);\n};\n\nexport { useToasts };","import './TextInput.scss'\n\nimport { MdContentCopy } from 'react-icons/md';\nimport { useToasts } from '../../../hooks/toasts';\n\nexport default function TextInput({ value, placeholder, info, label, disabled, copy, onInput }) {\n    const { addToast } = useToasts();\n\n    const onClick = async () => {\n        await navigator.clipboard.writeText(value);\n        addToast(\"Copied to clipboard!\");\n    };\n\n    return (\n        <div className={`text-input ${copy ? 'copy' : ''}`}>\n            {\n                label ?\n                    <label>{ label }</label>\n                    :\n                    null\n            }\n            <div className=\"text-input-container\" onClick={copy ? onClick : null}>\n                <input value={value} type=\"text\" placeholder={placeholder} disabled={copy || disabled} onInput={ev => onInput(ev.target.value)}/>\n                {\n                    copy ?\n                        <div className=\"icon\">\n                            <MdContentCopy size={20}/>\n                        </div>\n                        :\n                        null\n                }\n            </div>\n            {\n                info ?\n                    <div className=\"info\">\n                        { info }\n                    </div>\n                    :\n                    null\n            }\n        </div>\n    )\n}","import './NumberInput.scss'\n\nconst NumberInput = ({ min, max, value, button, onButtonClick, onInput }) => {\n    return (\n        <div className=\"number-input\">\n            <input type=\"number\" value={value} min={min} max={max} onInput={({ target }) => onInput(target.value)}/>\n            {\n                button ?\n                    <div className=\"button\" onClick={onButtonClick}>\n                        { button }\n                    </div>\n                    :\n                    null\n            }\n        </div>\n    )\n}\n\nexport default NumberInput","import { useState, useRef } from 'react'\nimport { Checkbox } from \"../common\"\n\nexport default function LoginOrSignupForm({ action = 'LOGIN', onAccRequest, inProgress }) {\n    const passConfirmInput = useRef(null)\n    const [state, setState] = useState({\n      email: '', passphrase: '', passphraseConfirm: '', action\n    })\n    const onSubmit = e => {\n      e.preventDefault()\n      onAccRequest({\n        action: state.action,\n        accType: 'QUICK',\n        email: state.email,\n        passphrase: state.passphrase,\n        backupOptout: state.backupOptout,\n      })\n    }\n    const onUpdate = updates => {\n      const newState = { ...state, ...updates }\n      setState(newState)\n      const shouldValidate = newState.action === 'SIGNUP'\n      const invalid = shouldValidate && (\n        newState.passphrase !== newState.passphraseConfirm\n      )\n      // @TODO translation string\n      if (passConfirmInput.current) {\n          passConfirmInput.current.setCustomValidity(invalid ? 'Passphrase must match' : '')\n      }\n    }\n    const minPwdLen = 8\n    const isSignup = state.action === 'SIGNUP'\n    const additionalOnSignup = state.backupOptout ? (\n      <Checkbox label=\"I understand that losing this backup means I will have to trigger account recovery.\" required={true}></Checkbox>\n    ) : (<></>)\n    const additionalInputs = isSignup ?\n      (<>\n        <input\n          ref={passConfirmInput}\n          required\n          minLength={minPwdLen}\n          type=\"password\"\n          placeholder=\"Confirm passphrase\"\n          value={state.passphraseConfirm}\n          onChange={e => onUpdate({ passphraseConfirm: e.target.value })}></input>\n        <Checkbox label=\"I agree to to the Terms of Use and Privacy policy.\" required={true}></Checkbox>\n        <Checkbox label=\"Backup on Ambire Cloud.\" checked={!state.backupOptout} onChange={e => onUpdate({ backupOptout: !e.target.checked })}></Checkbox>\n        {additionalOnSignup}\n      </>) : (<></>)\n\n    return (\n      <form onSubmit={onSubmit}>\n        <input type=\"email\" required placeholder=\"Email\" value={state.email} onChange={e => onUpdate({ email: e.target.value })}></input>\n        <input type=\"password\" required minLength={minPwdLen} placeholder=\"Passphrase\" value={state.passphrase} onChange={e => onUpdate({ passphrase: e.target.value })}></input>\n        {additionalInputs}\n        <input type=\"submit\" disabled={inProgress} value={isSignup ?\n          (inProgress ? \"Signing up...\" : \"Sign up\")\n          : (inProgress ? \"Logging in...\" : \"Log in\")}></input>\n      </form>\n    )\n}\n","import './EmailLogin.scss'\n\nimport { useState, useEffect } from 'react'\nimport { MdEmail } from 'react-icons/md'\nimport { Wallet } from 'ethers'\n\nimport { fetch, fetchCaught } from '../../lib/fetch'\n\nimport LoginOrSignup from '../LoginOrSignupForm/LoginOrSignupForm'\n\n// NOTE: the same polling that we do here with the setEffect should be used for txns\n// that require email confirmation\nexport default function EmailLogin({ relayerURL, onAddAccount }) {\n    const [requiresEmailConfFor, setRequiresConfFor] = useState(null)\n    const [err, setErr] = useState('')\n    const [inProgress, setInProgress] = useState(false)\n  \n    const EMAIL_VERIFICATION_RECHECK = 3000\n  \n    const onTryDecrypt = async (identityInfo, passphrase) => {\n      if (!identityInfo.meta.primaryKeyBackup) {\n        setErr('No account key backup: you either disabled email login or you have to import it from JSON')\n        return\n      }\n      // NOTE: fromEncryptedJson can give us the exact progress,\n      // but for now we're handling this simply by showing progress in a different way (button shows 'Logging in...')\n      try {\n        const wallet = await Wallet.fromEncryptedJson(JSON.parse(identityInfo.meta.primaryKeyBackup), passphrase)\n        const { _id, salt, identityFactoryAddr, baseIdentityAddr, bytecode } = identityInfo\n        const { quickAccSigner } = identityInfo.meta\n        if (wallet.address !== quickAccSigner.one) {\n            setErr('Decrypted wallet address does not match quick account')\n            return\n        }\n        onAddAccount({\n          id: _id,\n          email: identityInfo.meta.email,\n          primaryKeyBackup: identityInfo.meta.primaryKeyBackup,\n          salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n          signer: quickAccSigner\n        }, { select: true })\n      } catch (e) {\n        if (e.message.includes('invalid password')) setErr('Invalid passphrase')\n        else {\n          setErr(`Unexpected login error: ${e.message}`)\n          console.error(e)\n        }\n      }\n    }\n  \n    const attemptLogin = async ({ email, passphrase }, ignoreEmailConfirmationRequired) => {\n      // try by-email first: if this returns data we can just move on to decrypting\n      // does not matter which network we request\n      const { resp, body, errMsg } = await fetchCaught(`${relayerURL}/identity/by-email/${encodeURIComponent(email)}`, { headers: {\n          authorization: localStorage.loginSessionKey ? `Bearer ${localStorage.loginSessionKey}` : null\n      } })\n      if (errMsg) {\n        setErr(errMsg)\n        return\n      }\n    \n      if (resp.status === 401 && body.errType === 'UNAUTHORIZED') {\n        if (ignoreEmailConfirmationRequired) {\n          // we still have to call this to make sure the state is consistent and to force a re-render (to trigger the effect again)\n          setRequiresConfFor({ email, passphrase })\n          return\n        }\n        const requestAuthResp = await fetch(`${relayerURL}/identity/by-email/${encodeURIComponent(email)}/request-confirm-login`, { method: 'POST' })\n        if (requestAuthResp.status !== 200) {\n          setErr(`Email confirmation needed but unable to request: ${requestAuthResp.status}`)\n          return\n        }\n        localStorage.loginSessionKey = (await requestAuthResp.json()).sessionKey\n        setRequiresConfFor({ email, passphrase })\n        return\n      }\n      // If we make it beyond this point, it means no email confirmation will be required\n      // however, we're putting `setRequiresConfFor(null)` after onTryDecrypt in order to wait for the decryption period\n      if (resp.status === 404 && body.errType === 'DOES_NOT_EXIST') {\n        setRequiresConfFor(null)\n        setErr('Account does not exist')\n        return\n      }\n  \n      if (resp.status === 200) {\n        await onTryDecrypt(body, passphrase)\n      } else {\n        setErr(body.message ? `Relayer error: ${body.message}` : `Unknown no-message error: ${resp.status}`)\n      }\n      setRequiresConfFor(null)\n    }\n  \n    const onLoginUserAction = async ({ email, passphrase }) => {\n      setErr('')\n      setRequiresConfFor(null)\n      setInProgress(true)\n      try {\n        await attemptLogin({ email, passphrase })\n      } catch (e) {\n          setErr(`Unexpected error: ${e.message || e}`)\n      }\n      setInProgress(false)\n    }\n  \n    // try logging in once after EMAIL_VERIFICATION_RECHECK\n    useEffect(() => {\n      if (requiresEmailConfFor) {\n        const timer = setTimeout(async () => {\n            setInProgress(true)\n            await attemptLogin(requiresEmailConfFor, true)\n            setInProgress(false)\n        }, EMAIL_VERIFICATION_RECHECK)\n        return () => clearTimeout(timer)\n      }\n    })\n\n    // @TODO import from JSON; maybe without a URL, as we'll just pop a file selector and then import the JSON\n    const importJSONHref = `/#/json-import`\n\n    if (!relayerURL) {\n        return (<section className=\"loginSignupWrapper\" id=\"emailLoginSection\">\n            <div id=\"logo\"/>\n            <h3 class=\"error\">Email login not supported without the relayer.</h3>\n            <a href={importJSONHref}><button>Import JSON</button></a>\n        </section>)\n    }\n\n    const inner = requiresEmailConfFor ?\n      (<div id=\"loginEmail\" className=\"emailConf\">\n        <h3><MdEmail size={25} color=\"white\"/>Email confirmation required</h3>\n        <p>This is the first log-in from this browser, email confirmation is required.<br/><br/>\n        We sent an email to {requiresEmailConfFor.email}, please check your inbox and click \"Confirm\".\n        </p>\n        {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n      </div>)\n      : (<div id=\"loginEmail\">\n        <LoginOrSignup onAccRequest={onLoginUserAction} inProgress={inProgress}></LoginOrSignup>\n  \n        {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n  \n        <a href=\"/#/\">I forgot my passphrase</a>\n        <a href={importJSONHref}>Import JSON</a>\n      </div>)\n      \n    return (\n      <section className=\"loginSignupWrapper\" id=\"emailLoginSection\">\n      <div id=\"logo\"/>\n      {inner}\n    </section>\n    )\n  }","// @TODO update those pre-launch\n// NOTE: those should only apply to new accounts, never for existing accounts, since some existing accounts may be on older versions of those\nconst accountPresets = {\n    salt: '0x0000000000000000000000000000000000000000000000000000000000000001',\n    identityFactoryAddr: '0xBf07a0Df119Ca234634588fbDb5625594E2a5BCA',\n    baseIdentityAddr: '0x2A2b85EB1054d6f0c6c2E37dA05eD3E5feA684EF',\n    quickAccManager: '0xfF3f6D14DF43c112aB98834Ee1F82083E07c26BF',\n    feeCollector: '0x942f9CE5D9a33a82F88D233AEb3292E680230348',\n    quickAccTimelock: 259200 // 3 days\n}\nexport default accountPresets","import './AddAccount.scss'\n\nimport { useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport LoginOrSignup from '../LoginOrSignupForm/LoginOrSignupForm'\nimport TrezorConnect from 'trezor-connect'\nimport { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { hexZeroPad, AbiCoder, keccak256, id, getAddress } from 'ethers/lib/utils'\nimport { fetch, fetchPost } from '../../lib/fetch'\nimport accountPresets from '../../consts/accountPresets'\n\nTrezorConnect.manifest({\n  email: 'contactus@ambire.com',\n  appUrl: 'https://www.ambire.com'\n})\n\n\n// @TODO REFACTOR: use import for these\nconst { generateAddress2 } = require('ethereumjs-util')\nconst { getProxyDeployBytecode } = require('adex-protocol-eth/js/IdentityProxyDeploy')\nconst { Wallet } = require('ethers')\n\n// NOTE: This is a compromise, but we can afford it cause QuickAccs require a secondary key\n// Consider more\nconst SCRYPT_ITERATIONS = 131072/8\n\nexport default function AddAccount ({ relayerURL, onAddAccount }) {\n    const [signersToChoose, setChooseSigners] = useState(null)\n    const [err, setErr] = useState('')\n    const [addAccErr, setAddAccErr] = useState('')\n    const [inProgress, setInProgress] = useState(false)\n\n    const wrapProgress = async fn => {\n        setInProgress(true)\n        try {\n            await fn()\n        } catch(e) {\n            console.error(e)\n            setAddAccErr(`Unexpected error: ${e.message || e}`)\n        }\n        setInProgress(false)\n    }\n\n    const wrapErr = async fn => {\n        setAddAccErr('')\n        try {\n            await fn()\n        } catch(e) {\n            console.error(e)\n            setAddAccErr(`Unexpected error: ${e.message || e}`)\n        }\n    }\n\n    const createQuickAcc = async (req) => {\n        setErr('')\n\n        // async hack to let React run a tick so it can re-render before the blocking Wallet.createRandom()\n        await new Promise(resolve => setTimeout(resolve, 0))\n\n        const firstKeyWallet = Wallet.createRandom()\n        // @TODO fix this hack, use another source of randomness\n        // 6 words is 2048**6\n        const secondKeySecret = Wallet.createRandom({\n            extraEntropy: id(req.email+':'+Date.now())\n        }).mnemonic.phrase.split(' ').slice(0, 6).join(' ') + ' ' + req.email\n\n        const secondKeyResp = await fetchPost(`${relayerURL}/second-key`, { secondKeySecret })\n        if (!secondKeyResp.address) throw new Error(`second-key returned no address, error: ${secondKeyResp.message || secondKeyResp}`)\n\n        const { salt, baseIdentityAddr, identityFactoryAddr, quickAccManager, quickAccTimelock } = accountPresets\n        const quickAccountTuple = [quickAccTimelock, firstKeyWallet.address, secondKeyResp.address]\n        const signer = { quickAccManager, timelock: quickAccountTuple[0], one: quickAccountTuple[1], two: quickAccountTuple[2] }\n        const abiCoder = new AbiCoder()\n        const accHash = keccak256(abiCoder.encode(['tuple(uint, address, address)'], [quickAccountTuple]))\n        const privileges = [[quickAccManager, accHash]]\n        const bytecode = getProxyDeployBytecode(baseIdentityAddr, privileges, { privSlot: 0 })\n        const identityAddr = getAddress('0x' + generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex'))\n        const primaryKeyBackup = JSON.stringify(\n            await firstKeyWallet.encrypt(req.passphrase, { scrypt: { N: SCRYPT_ITERATIONS } })\n        )\n\n        const createResp = await fetchPost(`${relayerURL}/identity/${identityAddr}`, {\n            email: req.email,\n            primaryKeyBackup: req.backupOptout ? null : primaryKeyBackup,\n            secondKeySecret,\n            salt, identityFactoryAddr, baseIdentityAddr,\n            privileges,\n            quickAccSigner: signer\n        })\n        if (createResp.message === 'EMAIL_ALREADY_USED') {\n            setErr('An account with this email already exists')\n            return\n        }\n        if (!createResp.success) {\n            console.log(createResp)\n            setErr(`Unexpected sign up error: ${createResp.message || 'unknown'}`)\n            return\n        }\n\n        await onAddAccount({\n            id: identityAddr,\n            email: req.email,\n            primaryKeyBackup,\n            salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n            signer\n        }, { select: true })\n    }\n\n    // EOA implementations\n    // Add or create accounts from Trezor/Ledger/Metamask/etc.\n\n    // @TODO refactor into create with privileges perhaps?\n    // only if we can have the whitelisted* stuff in advance; we can hardcode them\n    async function createFromEOA (addr) {\n        const privileges = [[getAddress(addr), hexZeroPad('0x01', 32)]]\n        const { salt, baseIdentityAddr, identityFactoryAddr } = accountPresets\n        const bytecode = getProxyDeployBytecode(baseIdentityAddr, privileges, { privSlot: 0 })\n        const identityAddr = getAddress('0x' + generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex'))\n\n        if (relayerURL) {\n            const createResp = await fetchPost(`${relayerURL}/identity/${identityAddr}`, {\n                salt, identityFactoryAddr, baseIdentityAddr,\n                privileges\n            })\n            if (!createResp.success && !(createResp.message && createResp.message.includes('already exists'))) throw createResp\n        }\n\n        return {\n            id: identityAddr,\n            salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n            signer: { address: getAddress(addr) }\n        }\n    }\n\n    async function connectWeb3AndGetAccounts () {\n        // @TODO: pending state; should bein the LoginORSignup (AddAccount) component\n        if (typeof window.ethereum === 'undefined') {\n            // @TODO catch this\n            throw new Error('MetaMask not available')\n        }\n        const ethereum = window.ethereum\n        const web3Accs = await ethereum.request({ method: 'eth_requestAccounts' })\n        if (!web3Accs.length) throw new Error('No accounts connected')\n        if (web3Accs.length === 1) return onEOASelected(web3Accs[0])\n        setChooseSigners({ addresses: web3Accs })\n    }\n\n    async function getOwnedByEOAs(eoas) {\n        let allUniqueOwned = {}\n\n        await Promise.all(eoas.map(\n            async signerAddr => {\n                const resp = await fetch(`${relayerURL}/identity/any/by-owner/${signerAddr}?includeFormerlyOwned=true`)\n                const privEntries = Object.entries(await resp.json())\n                // discard the privileges value, we do not need it as we wanna add all accounts EVER owned by this eoa\n                privEntries.forEach(([id, _]) => allUniqueOwned[id] = getAddress(signerAddr))\n            }\n        ))\n\n        return await Promise.all(\n            Object.entries(allUniqueOwned).map(([id, signer]) => getAccountByAddr(id, signer))\n        )\n    }\n\n    async function getAccountByAddr (idAddr, signerAddr) {\n        // In principle, we need these values to be able to operate in relayerless mode,\n        // so we just store them in all cases\n        // Plus, in the future this call may be used to retrieve other things\n        const { salt, identityFactoryAddr, baseIdentityAddr, bytecode } = await fetch(`${relayerURL}/identity/${idAddr}`)\n            .then(r => r.json())\n        if (!(salt && identityFactoryAddr && baseIdentityAddr && bytecode)) throw new Error(`Incomplete data from relayer for ${idAddr}`)\n        return {\n            id: idAddr,\n            salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n            signer: { address: signerAddr }\n        }\n    }\n\n    async function connectTrezorAndGetAccounts () {\n        /*\n        const engine = new Web3ProviderEngine({ pollingInterval: this.pollingInterval })\n        engine.addProvider(new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect, ...this.config }))\n        engine.addProvider(new CacheSubprovider())\n        engine.addProvider(new RPCSubprovider(this.url, this.requestTimeoutMs))\n        */\n        const provider = new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect })\n        const addresses = await provider.getAccountsAsync(50)\n        setChooseSigners({ addresses, signerExtra: {\n            type: 'trezor',\n            info: JSON.parse(JSON.stringify(provider._initialDerivedKeyInfo))\n        } })\n    }\n\n    async function connectLedgerAndGetAccounts () {\n        const provider = new LedgerSubprovider({\n            networkId: 0, // @TODO: is this needed?\n            ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n            //baseDerivationPath: this.baseDerivationPath\n        })\n        // NOTE: do not attempt to do both of these together (await Promise.all)\n        // there is a bug in the ledger subprovider (race condition), so it will think we're trying to make two connections simultaniously\n        // cause one call won't be aware of the other's attempt to connect\n        const addresses = await provider.getAccountsAsync(50)\n        const signerExtra = await provider._initialDerivedKeyInfoAsync().then(info => ({ type: 'ledger', info: JSON.parse(JSON.stringify(info)) }))\n        setChooseSigners({ addresses, signerExtra })\n    }\n\n    async function onEOASelected (addr, signerExtra) {\n        const addAccount = (acc, opts) => onAddAccount({ ...acc, signerExtra }, opts)\n        // when there is no relayer, we can only add the 'default' account created from that EOA\n        // @TODO in the future, it would be nice to do getLogs from the provider here to find out which other addrs we control\n        //   ... maybe we can isolate the code for that in lib/relayerless or something like that to not clutter this code\n        if (!relayerURL) return addAccount(await createFromEOA(addr), { select: true })\n        // otherwise check which accs we already own and add them\n        const owned = await getOwnedByEOAs([addr])\n        if (!owned.length) return addAccount(await createFromEOA(addr), { select: true })\n        else owned.forEach((acc, i) => addAccount(acc , { select: i === 0 }))\n    }\n\n    // The UI for choosing a signer to create/add an account with, for example\n    // when connecting a hardware wallet, it has many addrs you can choose from\n    if (signersToChoose) {\n        return (<div className=\"loginSignupWrapper chooseSigners\">\n            <h3>Choose a signer</h3>\n            <ul id=\"signersToChoose\">\n                {signersToChoose.addresses.map(addr =>\n                    (<li key={addr} onClick={() => wrapErr(() => onEOASelected(addr, signersToChoose.signerExtra))}>{addr}</li>)\n                )}\n            </ul>\n        </div>)\n    }\n\n    // Adding accounts from existing signers\n    // @TODO: progress indicators for those\n    const addFromSignerButtons = (<>\n        <button onClick={() => wrapErr(connectTrezorAndGetAccounts)}><div className=\"icon\" style={{ backgroundImage: 'url(./resources/trezor.png)' }}/>Trezor</button>\n        <button onClick={() => wrapErr(connectLedgerAndGetAccounts)}><div className=\"icon\" style={{ backgroundImage: 'url(./resources/ledger.png)' }}/>Ledger</button>\n        <button onClick={() => wrapErr(connectWeb3AndGetAccounts)}><div className=\"icon\" style={{ backgroundImage: 'url(./resources/metamask.png)' }}/>Metamask / Browser</button>\n    </>)\n\n    if (!relayerURL) {\n        return (<div className=\"loginSignupWrapper\">\n            <div id=\"logo\"/>\n            <section id=\"addAccount\">\n            <div id=\"loginOthers\">\n                <h3>Add an account</h3>\n                {addFromSignerButtons}\n                <h3>NOTE: You can enable email/passphrase login by connecting to a relayer.</h3>\n            </div>\n            </section>\n        </div>)\n    }\n\n    return (<div className=\"loginSignupWrapper\">\n        <div id=\"logo\"/>\n        <section id=\"addAccount\">\n          <div id=\"loginEmail\">\n            <h3>Create a new account</h3>\n            <LoginOrSignup\n                inProgress={inProgress}\n                onAccRequest={req => wrapProgress(() => createQuickAcc(req))}\n                action=\"SIGNUP\"\n            ></LoginOrSignup>\n            {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n          </div>\n    \n          <div id=\"loginSeparator\">\n            <div className=\"verticalLine\"></div>\n            <span>or</span>\n            <div className=\"verticalLine\"></div>\n          </div>\n    \n          <div id=\"loginOthers\">\n            <h3>Add an account</h3>\n            <Link to=\"/email-login\">\n              <button><div className=\"icon\" style={{ backgroundImage: 'url(./resources/envelope.png)' }}/>Email</button>\n            </Link>\n            {addFromSignerButtons}\n            {addAccErr ? (<p className=\"error\">{addAccErr}</p>) : (<></>)}\n          </div>\n        </section>\n      </div>\n    )\n}","import './AssetsPlaceholder.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { Button } from '../../../../common'\n\nconst AssetsPlaceholder = () => {\n    const tokens = [\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0xade00c28244d5ce17d72e40330b1c318cd12b7c3.png',\n            symbol: 'ADX',\n            balance: 170027.26,\n            balanceUSD: 138880.64\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x0000000000000000000000000000000000000000.png',\n            symbol: 'ETH',\n            balance: 61.77,\n            balanceUSD: 283170.08\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x2260fac5e5542a773aa44fbcfedf7c193bc2c599.png',\n            symbol: 'WBTC',\n            balance: 0.03,\n            balanceUSD: 2227.24\n        },\n    ]\n\n    return (\n        <div id=\"assets-placeholder\" >\n            <div className=\"placeholder-overlay\">\n                <label>\n                    Welcome! You don't have any funds on this account.\n                </label>\n                <NavLink to=\"/wallet/deposit\">\n                    <Button small icon={<GiReceiveMoney/>}>Deposit</Button>\n                </NavLink>\n            </div>\n            <div className=\"category\">\n                <div className=\"title\">Tokens</div>\n                <div className=\"list\">\n                    {\n                        tokens.map(({ icon, symbol, balance, balanceUSD }) => (\n                            <div className=\"token\" key={symbol}>\n                                <div className=\"icon\">\n                                    <img src={icon} alt=\"Token Icon\"/>\n                                </div>\n                                <div className=\"name\">\n                                    { symbol }\n                                </div>\n                                <div className=\"separator\"></div>\n                                <div className=\"balance\">\n                                    <div className=\"currency\">\n                                        { balance } <span className=\"symbol\">{ symbol }</span>\n                                    </div>\n                                    <div className=\"dollar\">\n                                        <span className=\"symbol\">$</span> { balanceUSD }\n                                    </div>\n                                </div>\n                            </div>\n                        ))\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default AssetsPlaceholder","import './Assets.scss'\n\nimport { GiToken } from 'react-icons/gi'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { NavLink } from 'react-router-dom'\nimport { Button } from '../../../common'\nimport AssetsPlaceholder from './AssetsPlaceholder/AssetsPlaceholder'\n\nconst Assets = ({ assets }) => {\n    return (\n        <div id=\"assets-table\">\n            {\n                !assets.length ?\n                    <AssetsPlaceholder/>\n                    :\n                    assets.map(({ label, assets }, i) => (\n                            <div className=\"category\" key={`category-${i}`}>\n                                <div className=\"title\">{ label }</div>\n                                <div className=\"list\">\n                                    {\n                                        assets.map(({ tokens }) => \n                                            tokens.map(({ label, collectionName, symbol, img, collectionImg, balance, balanceUSD, address }, i) => (\n                                                <div className=\"token\" key={`token-${i}`}>\n                                                    <div className=\"icon\">\n                                                        {\n                                                            img || collectionImg ? \n                                                                <img src={img || collectionImg} alt=\"Token Icon\"/>\n                                                                :\n                                                                <GiToken size={20}/>\n                                                        }\n                                                    </div>\n                                                    <div className=\"name\">\n                                                        { label || collectionName || symbol }\n                                                    </div>\n                                                    <div className=\"separator\"></div>\n                                                    <div className=\"balance\">\n                                                        <div className=\"currency\">\n                                                            { balance } <span className=\"symbol\">{ symbol }</span>\n                                                        </div>\n                                                        <div className=\"dollar\">\n                                                            <span className=\"symbol\">$</span> { balanceUSD.toFixed(2) }\n                                                        </div>\n                                                    </div>\n                                                    <div className=\"actions\">\n                                                        <NavLink to={`/wallet/transfer/${address}`}>\n                                                            <Button small icon={<AiOutlineSend/>}>Send</Button>\n                                                        </NavLink>\n                                                    </div>\n                                                </div>\n                                            ))\n                                        )\n                                    }\n                                </div>\n                            </div>\n                        ))\n            }\n        </div>\n    )\n}\n\nexport default Assets","import './CollectablesPlaceholder.scss'\n\nconst CollectablesPlaceholder = () => {\n    const collectables = [\n        {\n            collectionName: 'Party Bone',\n            collectionImg: 'https://lh3.googleusercontent.com/ZNc-hDBHOxgioSltBcDvh5hBfWEj623dETJj2nrEC0cLbjuULbo4Ign7OnLDX9qf2XaALrkXsZCRylRqPPHqQgzJOabJg4TRq3MDhA=s2500',\n            name: 'Party Bone #7865',\n            image: 'https://lh3.googleusercontent.com/uznp2aNVNPEhVk4MhLG2Zn-JC2sVaF6PsUcpF_CpyQkgekmv4hh4zbyebsoLFLvkY8PSV6D-TR5OaMp15RhG9zQsYd_AvDCo9SEVF4Q',\n            price: 32.16\n        },\n        {\n            collectionName: 'Pudgy Penguins',\n            collectionImg: 'https://lh3.googleusercontent.com/L9PJp0pOXCscKsTpD1_6zoALxdjG5gIKHLykS_Wk5J_yk590drEqRhM1ElTEZCaWeTjFj2isfxFw2tcFKcbCPlu6-Eu5bUuxsL-x=s2500',\n            name: 'Pudgy Penguin #8675',\n            image: 'https://lh3.googleusercontent.com/J6gQQRnzsMLAOhYiN9qIhogxr2MKn17zfGf6nQFKr3WCZ34thm6H0w9izvnJysxJclsyr8c3yo0hshOaLU73aS-IgTm-CooJb1cw1S0',\n            price: 5675.00\n        },\n        {\n            collectionName: 'Art Blocks Factory',\n            collectionImg: 'https://lh3.googleusercontent.com/sr7Y19-bJwsQsxX6n8Pj5tIaNKdUEotNlfhBsYw8McKpIsYARglTORaNlGhDZ2PrH-tO1vU6tFbpamiWwIImbidhVSh4aoIh4d310Og=s2500',\n            name: 'Transitions #4267',\n            image: 'https://lh3.googleusercontent.com/9MzvH_PSYMvlJE8Cfm5d308ltY5fZx-dooEcQizKgtKZ8g05RvJvd_5LAbqVHIzaoZbM-HOBgNSV8RKvEe_1thkLcQtE4NMMx8Kp5g',\n            price: 263.46\n        },\n        {\n            collectionName: 'Sad Frogs District',\n            collectionImg: 'https://lh3.googleusercontent.com/3U8N73XLrQOQPhJBAMNi7IPR1y3GGJ2zxmyUlit4IHCJURmKFPWClgatjbYfyz9drMk6-XSQTjSFqn7tKL0ZNoRbgvUu8OdLVREA=s2500',\n            name: '1882',\n            image: 'https://lh3.googleusercontent.com/3uwrfkdhHSfWm171BOjJHp3768tbLP9TeyTh2BnvgF6S1nIRI489SFq6EGjI9AISRUeyXXufEjB34Wj0bif_vl-y5h6GesEoJaaZcJg',\n            price: 1563.59\n        },\n        {\n            collectionName: 'GLUEWAVE',\n            collectionImg: 'https://lh3.googleusercontent.com/LheZMF6AyTLPpfwABwAGZqoC0gTWrDlYloDdT2VX2u_GZRZnP-ZpDC90huElm3RXE-eU1d1YluQi8G1uVdeDdysUNLZWJte4jXk3zeY=s2500',\n            name: '000105040307070704',\n            image: 'https://lh3.googleusercontent.com/eP_F_6aa_BXuKfYq1w2aiS6UW3bp4-gByFoeKLMXYuWAkU6Xiyi7mkm31aoewCZ_eG9RAuhas8jxFwXTxAWuxq1E3ZxYg97cLUUE',\n            price: 7107.27\n        }\n    ]\n\n    return (\n        <div id=\"collectables-placeholder\">\n            <div className=\"placeholder-overlay\">\n                You don't have any collectables (NFTs) yet\n            </div>\n            <div id=\"collectables\">\n                {\n                    collectables.map(({ collectionName, collectionImg, name, image, price}) => (\n                        <div className=\"collectable\" key={name}>\n                            <div className=\"artwork\" style={{backgroundImage: `url(${image})`}}/>\n                            <div className=\"info\">\n                                <div className=\"collection\">\n                                    <div className=\"collection-icon\" style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                    { collectionName }\n                                </div>\n                                <div className=\"details\">\n                                    <div className=\"name\">{ name }</div>\n                                    <div className=\"value\"><span className=\"purple-highlight\">$</span> { price }</div>\n                                </div>\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default CollectablesPlaceholder","import './Collectables.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport CollectablesPlaceholder from './CollectablesPlaceholder/CollectablesPlaceholder'\n\nconst Collectables = ({ collectables }) => {\n    return (\n        !collectables.length ?\n            <CollectablesPlaceholder/>\n            :\n            <div id=\"collectables\">\n                {\n                    collectables.map(({ tokens }) => tokens.map(({ network, address, collectionName, collectionImg, assets }) => assets.map(({ tokenId, assetName, assetImg, balanceUSD }) => (\n                        <div className=\"collectable\" key={tokenId}>\n                            <NavLink to={`/wallet/nft/${network}/${address}/${tokenId}`}>\n                                <div className=\"artwork\" style={{backgroundImage: `url(${assetImg})`}}/>\n                                <div className=\"info\">\n                                    <div className=\"collection\">\n                                        <div className=\"collection-icon\" style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                        { collectionName }\n                                    </div>\n                                    <div className=\"details\">\n                                        <div className=\"name\">{ assetName }</div>\n                                        <div className=\"value\"><span className=\"purple-highlight\">$</span> { balanceUSD.toFixed(2) }</div>\n                                    </div>\n                                </div>\n                            </NavLink>\n                        </div>\n                    ))))\n                }\n            </div>\n    )\n}\n\nexport default Collectables","const networks = [{\n\t\tid: 'ethereum',\n\t\tchainId: 1,\n\t\trpc: 'https://mainnet.infura.io/v3/3d22938fd7dd41b7af4197752f83e8a1',\n\t\tnativeAssetSymbol: 'ETH',\n\t\tname: 'Ethereum',\n\t\ticon: '/resources/networks/ethereum.png',\n\t\texplorerUrl: 'https://etherscan.io/'\n\t},  {\n\t\tid: 'polygon',\n\t\tchainId: 137,\n\t\trpc: 'https://polygon-rpc.com/rpc',\n\t\tnativeAssetSymbol: 'MATIC',\n\t\tname: 'Polygon',\n\t\ticon: '/resources/networks/polygon.png',\n\t\texplorerUrl: 'https://polygonscan.com/'\n\t}, {\n\t\tid: 'avalanche',\n\t\tchainId: 43114,\n\t\trpc: 'https://api.avax.network/ext/bc/C/rpc',\n\t\tnativeAssetSymbol: 'AVAX',\n\t\tname: 'Avalanche',\n\t\ticon: '/resources/networks/avalanche.png',\n\t\texplorerUrl: 'https://cchain.explorer.avax.network/'\n\t}, {\n\t\tid: 'arbitrum',\n\t\tchainId: 42161,\n\t\trpc: 'https://arb1.arbitrum.io/rpc',\n\t\tnativeAssetSymbol: 'AETH',\n\t\tname: 'Arbitrum',\n\t\ticon: '/resources/networks/arbitrum.svg',\n\t\texplorerUrl: 'https://explorer.offchainlabs.com/'\n}]\n\nexport default networks\n","import './Dashboard.scss'\n\nimport { useEffect, useLayoutEffect, useState } from 'react'\n\nimport { Chart, Loading, Segments } from '../../common'\nimport Assets from './Assets/Assets'\nimport Collectables from './Collectables/Collectables'\nimport networks from '../../../consts/networks'\n\nexport default function Dashboard({ portfolio, setNetwork }) {\n    const [chartTokensData, setChartTokensData] = useState([]);\n    const [chartAssetsData, setChartAssetsData] = useState([]);\n    const [chartType, setChartType] = useState([]);\n    const [tableType, setTableType] = useState([]);\n\n    const chartSegments = [\n        {\n            value: 'By Token'\n        },\n        {\n            value: 'By Asset'\n        }\n    ]\n\n    const tableSegments = [\n        {\n            value: 'Tokens'\n        },\n        {\n            value: 'Collectables'\n        }\n    ]\n\n    const networkDetails = (network) => networks.find(({ id }) => id === network)\n\n    useLayoutEffect(() => {\n        const tokensData = portfolio.balance.tokens\n            .map(({ label, balanceUSD }) => ({\n                label,\n                value: Number(((balanceUSD / portfolio.balance.total.full) * 100).toFixed(2))\n            }))\n            .filter(({ value }) => value > 0);\n\n        const totalAssets = portfolio.assets.map(({ assets }) => \n            assets\n                .map(({ balanceUSD }) => balanceUSD)\n                .reduce((acc, curr) => acc + curr, 0))\n            .reduce((acc, curr) => acc + curr, 0)\n\n        const assetsData = portfolio.assets\n            .map(({ label, assets }) => ({\n                label,\n                value: Number(((assets.map(({ balanceUSD }) => balanceUSD).reduce((acc, curr) => acc + curr, 0) / totalAssets) * 100).toFixed(2))\n            }))\n            .filter(({ value }) => value > 0)\n\n        setChartTokensData(tokensData);\n        setChartAssetsData(assetsData)\n    }, [portfolio.balance, portfolio.assets]);\n\n    useEffect(() => portfolio.requestOtherProtocolsRefresh(), [portfolio])\n\n    return (\n        <section id=\"dashboard\">\n            <div id=\"overview\">\n                <div id=\"balance\" className=\"panel\">\n                    <div className=\"title\">Balance</div>\n                    <div className=\"content\">\n                        {\n                            portfolio.isBalanceLoading ? \n                                <Loading/>\n                                :\n                                <div id=\"total\">\n                                    <span className=\"green-highlight\">$</span> { portfolio.balance.total.truncated }\n                                    <span className=\"green-highlight\">.{ portfolio.balance.total.decimals }</span>\n                                    <div id=\"other-balances\">\n                                        {\n                                            portfolio.otherBalances.map(({ network, total }) => (\n                                                total.full > 0 ?\n                                                    <div className=\"other-balance\" key={network} onClick={() => setNetwork(network)}>\n                                                        You also have <span className=\"purple-highlight\">$</span> { total.truncated }\n                                                        <span className=\"purple-highlight\">.{total.decimals}</span> on { networkDetails(network).name }\n                                                    </div>\n                                                    :\n                                                    null\n                                            ))\n                                        }\n                                    </div>\n                                </div>\n                        }\n                    </div>\n                </div>\n                <div id=\"chart\" className=\"panel\">\n                    <div className=\"title\">\n                        Balance by\n                        <Segments small defaultValue={chartSegments[0].value} segments={chartSegments} onChange={setChartType}/>\n                    </div>\n                    <div className=\"content\">\n                        {\n                            chartType === chartSegments[0].value ?\n                                portfolio.isBalanceLoading ?\n                                    <Loading/>\n                                    :\n                                    <Chart data={chartTokensData} size={200}/>\n                                :\n                                portfolio.areAssetsLoading ?\n                                    <Loading/>\n                                    :\n                                    <Chart data={chartAssetsData} size={200}/>\n                        }\n                    </div>\n                </div>\n            </div>\n            <div id=\"table\" className=\"panel\">\n                <div className=\"title\">\n                    Assets\n                    <Segments small defaultValue={tableSegments[0].value} segments={tableSegments} onChange={setTableType}></Segments>\n                </div>\n                <div className=\"content\">\n                    {\n                        portfolio.areAssetsLoading ?\n                            <Loading/>\n                            :\n                            tableType === tableSegments[0].value ?\n                                <Assets assets={portfolio.assets}/>\n                                :\n                                <Collectables collectables={portfolio.collectables}/>\n                    }\n                </div>\n                {\n                    portfolio.areAssetsLoading || !portfolio.assets.length ?\n                        null\n                        :\n                        <div className=\"powered\">\n                            Powered by Zapper\n                        </div>\n                }\n            </div>\n        </section>\n    )\n}","import \"./TopBar.scss\";\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { FiHelpCircle } from \"react-icons/fi\";\nimport { AiOutlinePlus } from \"react-icons/ai\";\nimport * as blockies from 'blockies-ts';\nimport { DropDown, Select, Button } from \"../../common\";\n\nconst TopBar = ({\n  match,\n  connections,\n  connect,\n  disconnect,\n  onSelectAcc,\n  selectedAcc,\n  accounts,\n  network,\n  setNetwork,\n  allNetworks,\n}) => {\n  const [isClipboardGranted, setClipboardGranted] = useState(false);\n\n  const checkPermissions = async () => {\n    let status = false;\n    var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1\n    if (isFirefox) {\n      return\n    }\n    try {\n      const response = await navigator.permissions.query({\n        name: \"clipboard-read\",\n        allowWithoutGesture: false,\n      });\n      status = response.state === 'granted'\n    } catch (e) {\n      console.log('non-fatal clipboard error', e);\n    }\n    setClipboardGranted(status);\n    return status;\n  };\n\n  const readClipboard = useCallback(async () => {\n    if (await checkPermissions()) {\n      const content = await navigator.clipboard.readText();\n      if (content.startsWith('wc:')) connect({ uri: content });\n    } else {\n      const uri = prompt(\"Enter WalletConnect URI\");\n      if (uri) connect({ uri });\n    }\n  }, [connect]);\n\n  const accountsItems = accounts.map(({ id }) => ({\n    value: id,\n    icon: blockies.create({ seed: id }).toDataURL()\n  }))\n  const networksItems = allNetworks.map(({ id, name, icon }) => ({\n    label: name,\n    value: id,\n    icon\n  }))\n\n  useEffect(() => checkPermissions(), []);\n\n  return (\n    <div id=\"topbar\">\n      <div className=\"container\">\n        <DropDown title=\"dApps\" badge={connections.length}>\n          <div id=\"connect-dapp\">\n            <div className=\"heading\">\n              <button disabled={isClipboardGranted} onClick={readClipboard}>\n                Connect dApp\n              </button>\n              <FiHelpCircle size={30} />\n            </div>\n            {isClipboardGranted ? (\n              <label>\n                Automatic connection enabled, just copy a WalletConnect URL and\n                come back to this tab.\n              </label>\n            ) : null}\n          </div>\n          {connections.map(({ session, uri }) => (\n            <div className=\"item dapps-item\" key={session.peerId}>\n              <div className=\"icon\">\n                <img\n                  src={session.peerMeta.icons.filter(x => !x.endsWith('favicon.ico'))[0]}\n                  alt={session.peerMeta.name}\n                ></img>\n              </div>\n              <a href={session.peerMeta.url} target=\"_blank\" rel=\"noreferrer\">\n                <div className=\"name\">{session.peerMeta.name}</div>\n              </a>\n              <div className=\"separator\"></div>\n              <button onClick={() => disconnect(uri)}>Disconnect</button>\n            </div>\n          ))}\n        </DropDown>\n\n        <Select monospace defaultValue={selectedAcc} items={accountsItems} onChange={value => onSelectAcc(value)}>\n          <div id=\"add-account\">\n            <NavLink to=\"/add-account\">\n              <Button icon={<AiOutlinePlus/>} small>Add Account</Button>\n            </NavLink>\n          </div>\n        </Select>\n        <Select defaultValue={network.id} items={networksItems} onChange={value => setNetwork(value)}/>\n      </div>\n    </div>\n  );\n};\n\nexport default TopBar;\n","import \"./SideBar.scss\"\n\nimport { NavLink } from 'react-router-dom'\nimport { MdDashboard, MdLock, MdCompareArrows, } from 'react-icons/md'\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { BsCurrencyExchange } from 'react-icons/bs'\nimport { BsPiggyBank } from 'react-icons/bs'\nimport { BiTransfer } from 'react-icons/bi'\nimport { Loading } from \"../../common\"\nimport { useCallback, useEffect, useRef, useState } from \"react\"\n\nconst SideBar = ({match, portfolio}) => {\n    const sidebarRef = useRef()\n    const [balanceFontSize, setBalanceFontSize] = useState(0)\n\n    const resizeBalance = useCallback(() => {\n        const balanceFontSizes = {\n            3: '2em',\n            5: '1.5em',\n            7: '1.3em',\n            9: '1.2em',\n            11: '1em',\n        }\n\n        if (portfolio.balance.total.truncated) {\n            const charLength = portfolio.balance.total.truncated.length\n            const closest = Object.keys(balanceFontSizes).reduce((prev, current) => Math.abs(current - charLength) < Math.abs(prev - charLength) ? current : prev)\n            setBalanceFontSize(balanceFontSizes[closest])\n        }\n    }, [portfolio.balance.total])\n\n    useEffect(() => resizeBalance(), [resizeBalance])\n\n    return (\n        <div id=\"sidebar\" ref={sidebarRef}>\n                <NavLink to={match.url + \"/dashboard\"}>\n                    <div id=\"logo\" />\n                    <div id=\"icon\" />\n                </NavLink>\n\n                <div className=\"balance\">\n                    <label>Balance</label>\n                    {\n                        portfolio.isBalanceLoading ?\n                            <Loading/>\n                            :\n                            <div className=\"balanceDollarAmount\" style={{fontSize: balanceFontSize}}>\n                                <span className=\"dollarSign highlight\">$</span>{ portfolio.balance.total.truncated }<span className=\"highlight\">.{ portfolio.balance.total.decimals }</span>\n                            </div>\n                    }\n                </div>\n\n                {/* TODO proper navi, programmatic selected class */}\n                <NavLink to={match.url + \"/dashboard\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <MdDashboard size={30}/>Dashboard\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/deposit\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <GiReceiveMoney size={30}/>Deposit\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/transfer\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <BiTransfer size={30}/>Transfer\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/swap\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <BsCurrencyExchange size={30}/>Swap\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/earn\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <BsPiggyBank size={30}/>Earn\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/transactions\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <MdCompareArrows size={30}/>Transactions\n                    </div>\n                </NavLink>\n                <NavLink to={match.url + \"/security\"} activeClassName=\"selected\">\n                    <div className=\"item\">\n                        <MdLock size={30}/>Security\n                    </div>\n                </NavLink>\n            </div>\n    )\n}\n\nexport default SideBar","export default __webpack_public_path__ + \"static/media/ramp.781246d0.svg\";","export default __webpack_public_path__ + \"static/media/paytrie.089717f3.svg\";","export default __webpack_public_path__ + \"static/media/transak.e01c0265.svg\";","export const RAMP_HOST_API_KEY = process.env.REACT_APP_RAMP_HOST_API_KEY;\nexport const PAYTRIE_PARTNER_URL = process.env.REACT_APP_PAYTRIE_PARTNER_URL;\nexport const TRANSAK_API_KEY = process.env.REACT_APP_TRANSAK_API_KEY;\nexport const TRANSAK_ENV = process.env.REACT_APP_TRANSAK_ENV;\nexport const ZAPPER_API_KEY = process.env.REACT_APP_ZAPPER_API_KEY;\nexport const ZAPPER_API_ENDPOINT = process.env.REACT_APP_ZAPPER_API_ENDPOINT;\nexport const SUSHI_SWAP_FRAME = process.env.REACT_APP_SUSHI_SWAP_FRAME_URL;","import { RampInstantSDK } from '@ramp-network/ramp-instant-sdk'\nimport transakSDK from '@transak/transak-sdk'\nimport { popupCenter } from '../helpers/popupHelper'\nimport url from 'url'\n\nimport { RAMP_HOST_API_KEY, PAYTRIE_PARTNER_URL, TRANSAK_API_KEY, TRANSAK_ENV } from '../config'\n\nexport const openRampNetwork = ({ walletAddress, selectedNetwork }) => {\n    const assetsList = {\n        ethereum: 'ERC20_*,ETH_*',\n        polygon: 'MATIC_ERC20_*,MATIC_*',\n        avalanche: 'AVAX_*',\n    }\n\n    const widget = new RampInstantSDK({\n        hostAppName: 'Ambire',\n        hostLogoUrl: 'https://www.ambire.com/ambire-logo.png',\n        variant: 'auto',\n        swapAsset: assetsList[selectedNetwork],\n        userAddress: walletAddress,\n        hostApiKey: RAMP_HOST_API_KEY,\n    })\n    widget.show()\n};\n\nexport const openPayTrie = ({ walletAddress, selectedNetwork }) => {\n    const rightSideLabel = selectedNetwork === 'polygon' ? 'USDC-P' : 'USDC'\n\n    const URL = url.parse(PAYTRIE_PARTNER_URL, true)\n    URL.search = null\n    URL.query = {\n        ...URL.query,\n        addr: walletAddress,\n        rightSideLabel\n    }\n\n    popupCenter({\n        url: url.format(URL),\n        title: 'Paytrie Deposit',\n        w: 450,\n        h: 700,\n    })\n};\n\nexport const openTransak = ({ walletAddress, selectedNetwork }) => {\n    let networks = selectedNetwork === 'avalanche' ? 'avaxcchain' : selectedNetwork\n    let defaultCurency = {\n        'ethereum': 'USDC',\n        'polygon': 'USDC',\n        'arbitrum': 'ETH',\n        'avaxcchain': 'AVAX'\n    }\n\n    const transak = new transakSDK({\n        apiKey: TRANSAK_API_KEY,\n        environment: TRANSAK_ENV,\n        networks,\n        defaultCryptoCurrency: defaultCurency[networks],\n        disableWalletAddressForm: true,\n        walletAddress,\n        themeColor: '282b33',\n        email: '',\n        redirectURL: '',\n        hostURL: window.location.origin,\n        widgetHeight: 'calc(100% - 60px)',\n        widgetWidth: '100%',\n    })\n\n    transak.init()\n\n    transak.on(transak.ALL_EVENTS, data => {\n        console.log(data)\n    })\n\n    transak.on(transak.EVENTS.TRANSAK_ORDER_SUCCESSFUL, orderData => {\n        console.log(orderData)\n        transak.close()\n    })\n}","export const popupCenter = ({ url, title, w, h }) => {\n\t// Fixes dual-screen position                             Most browsers      Firefox\n\tconst dualScreenLeft =\n\t\twindow.screenLeft !== undefined ? window.screenLeft : window.screenX\n\tconst dualScreenTop =\n\t\twindow.screenTop !== undefined ? window.screenTop : window.screenY\n\n\tconst width = window.innerWidth\n\t\t? window.innerWidth\n\t\t: document.documentElement.clientWidth\n\t\t? document.documentElement.clientWidth\n\t\t: window.screen.width\n\tconst height = window.innerHeight\n\t\t? window.innerHeight\n\t\t: document.documentElement.clientHeight\n\t\t? document.documentElement.clientHeight\n\t\t: window.screen.height\n\n\tconst systemZoom = width / window.screen.availWidth\n\tconst left = (width - w) / 2 / systemZoom + dualScreenLeft\n\tconst top = (height - h) / 2 / systemZoom + dualScreenTop\n\tconst newWindow = window.open(\n\t\turl,\n\t\ttitle,\n\t\t`\n\t\ttoolbar=no,scrollbars=no,resizable=no\n\t\twidth=${w / systemZoom}, \n\t\theight=${h / systemZoom}, \n\t\ttop=${top}, \n\t\tleft=${left},\n\t\t`\n\t)\n\n\tif (window.focus) newWindow.focus()\n}","import './Providers.scss'\n\nimport RAMP_LOGO from '../../../../resources/ramp.svg';\nimport PAYTRIE_LOGO from '../../../../resources/paytrie.svg';\nimport TRANSAK_LOGO from '../../../../resources/transak.svg';\n\nimport { openRampNetwork, openPayTrie, openTransak } from '../../../../services/providers'\n\nexport default function Providers({ walletAddress, networkDetails }) {\n    const providers = [\n        {\n            logo: RAMP_LOGO,\n            name: 'Ramp',\n            type: 'Bank Transfer, Credit/Debit Card, Apple Pay',\n            fees: '0.49%-2.9%',\n            limits: '10,000EUR/m',\n            currencies: 'USD, EUR, GBP',\n            networks: ['ethereum', 'polygon', 'avalanche'],\n            onClick: () => openRampNetwork({walletAddress, selectedNetwork: networkDetails.id})\n        },\n        {\n            logo: PAYTRIE_LOGO,\n            name: 'PayTrie',\n            type: 'Bank Transfer',\n            fees: '1% (min. $2 CAD)',\n            limits: '$2,000CAD/day',\n            currencies: 'CAD',\n            networks: ['ethereum', 'polygon'],\n            onClick: () => openPayTrie({walletAddress, selectedNetwork: networkDetails.id})\n        },\n        {\n            logo: TRANSAK_LOGO,\n            name: 'Transak',\n            type: 'Credit/Debit card and Bank Transfer (methods availability depends on location)',\n            fees: 'from 0.5%',\n            limits: 'up to 15,000 EUR/day',\n            currencies: 'GBP, EUR, USD and many more',\n            networks: ['ethereum', 'polygon', 'avalanche', 'arbitrum'],\n            onClick: () => openTransak({walletAddress, selectedNetwork: networkDetails.id})\n        }\n    ];\n\n    const shouldBeDisabled = (networks) => {\n        return networks.includes(networkDetails.id) ? null : 'disabled'; \n    };\n\n    return (\n        <div id=\"providers\">\n            {\n                providers.map(({ logo, name, type, fees, limits, currencies, networks, onClick }) =>\n                    <div className={`provider ${shouldBeDisabled(networks)}`} key={name} onClick={onClick}>\n                        <div className=\"logo\">\n                            <img src={logo} alt={name}></img>\n                        </div>\n                        <div className=\"details\">\n                            <div className=\"type\">\n                                { type }\n                            </div>\n                            <div className=\"fees\">\n                                Fees: { fees }\n                            </div>\n                            <div className=\"limits\">\n                                Limits: { limits }\n                            </div>\n                            <div className=\"currencies\">\n                                Currencies: { currencies }\n                            </div>\n                        </div>\n                    </div>\n                )\n            }\n            {\n                networkDetails.id !== 'ethereum' ? \n                    <div id=\"network-warning\">\n                        <b>NOTE:</b> Some deposit methods are unavailable on <b>{networkDetails.name}</b>. Switch to Ethereum for the widest support.\n                    </div>\n                    :\n                    null\n            }\n        </div>\n    )\n}\n","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/polygon-logo.d08b26bd.svg\";","import './Deposit.scss'\n\nimport { MdAccountBalance, MdAccountBalanceWallet } from 'react-icons/md'\nimport TextInput from '../../common/TextInput/TextInput'\nimport Providers from './Providers/Providers'\n\nimport ETHEREUM_LOGO from '../../../resources/ethereum-logo.png'\nimport POLYGON_LOGO from '../../../resources/polygon-logo.svg'\nimport networks from '../../../consts/networks'\n\nexport default function Deposit({ selectedAcc, selectedNetwork }) {\n    const networkDetails = networks.find(({ id }) => id === selectedNetwork)\n\n    return (\n        <section id=\"deposit\">\n            <div className=\"panel\">\n                <div className=\"heading\">\n                     <div className=\"title\">\n                        <MdAccountBalanceWallet size={35}/>\n                        Deposit Tokens\n                    </div>\n                    <div className=\"subtitle\">\n                        Direct Deposit\n                    </div>\n                </div>\n                <div className=\"description\">\n                    <TextInput className=\"depositAddress\" label=\"Send tokens or collectables (NFTs) to this address:\" value={selectedAcc} copy/>\n                </div>\n                <div id=\"networks\">\n                    Following networks supported:\n                    <div className=\"logos\">\n                        <img src={ETHEREUM_LOGO} alt=\"Ethereum\"/>\n                        <img src={POLYGON_LOGO} alt=\"Polygon\"/>\n                    </div>\n                </div>\n            </div>\n            <div className=\"panel\">\n                <div className=\"heading\">\n                    <div className=\"title\">\n                        <MdAccountBalance size={35}/>\n                        Fiat Currency\n                    </div>\n                    <div className=\"subtitle\">\n                        Credit Card & Bank Transfer\n                    </div>\n                </div>\n                <div className=\"description\">\n                    Deposit with credit card to your account directly using one of our partners\n                </div>\n                <Providers walletAddress={selectedAcc} networkDetails={networkDetails}/>\n            </div>\n        </section>\n    )\n}","import './SushiFrame.scss';\n\nimport React, { useEffect, useRef } from 'react'\n\nimport { SUSHI_SWAP_FRAME } from '../../../config'\n\nconst ambireSushi = {\n    name: \"Ambire swap\",\n    url: SUSHI_SWAP_FRAME,\n    logo: 'https://www.ambire.com/ambire-logo.png',\n    desc: 'Ambire swap'\n}\n\nexport default function SushiSwap({ network, selectedAcc, gnosisConnect, gnosisDisconnect }) {\n    const iframeRef = useRef(null);\n\n    const genHash = () => {\n        return ambireSushi.url + network.chainId + selectedAcc\n    }\n\n    useEffect(() => {\n        gnosisConnect({\n            selectedAcc,\n            iframeRef,\n            app: ambireSushi\n        });\n\n        return () => {\n            gnosisDisconnect()\n        }\n\n    }, [network, selectedAcc, iframeRef, gnosisConnect, gnosisDisconnect])\n\n    return (\n        <div className='iframe-container'>\n            <iframe id='swap-frame' ref={iframeRef} key={genHash()} title='sushi-swap' src={SUSHI_SWAP_FRAME} />\n        </div>\n    )\n}","import './Swap.scss';\n\nimport React from 'react';\nimport SwapComponent from './SushiIframe'\n\nexport default function Swap(props) {\n    return (\n        <section id=\"swap\">     \n            <SwapComponent {...props} />  \n        </section>\n    )\n}","import './SendPlaceholder.scss'\n\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { NavLink } from 'react-router-dom'\nimport { Button } from '../../../common'\n\nconst SendPlaceholder = () => {\n    return (\n        <div id=\"send-placeholder\">\n            <label>You don't have any funds on this account.</label>\n            <NavLink to=\"/wallet/deposit\">\n                <Button small icon={<GiReceiveMoney/>}>Deposit</Button>\n            </NavLink>\n        </div>\n    )\n}\n\nexport default SendPlaceholder","import './Transfer.scss'\n\nimport { BsArrowDown } from 'react-icons/bs'\nimport { FaAddressCard } from 'react-icons/fa'\nimport { useParams, withRouter } from 'react-router'\nimport { useEffect, useState } from 'react'\nimport { ethers } from 'ethers'\nimport SendPlaceholder from './SendPlaceholder/SendPlaceholder'\nimport { Interface } from 'ethers/lib/utils'\nimport { useToasts } from '../../../hooks/toasts'\nimport { TextInput, NumberInput, Button, Select, Loading, DropDown } from '../../common'\n\nconst ERC20 = new Interface(require('adex-protocol-eth/abi/ERC20'))\nconst crossChainAssets = [\n    {\n        label: 'USD Coin (Polygon)',\n        value: 'USDC-polygon',\n        icon: 'https://raw.githubusercontent.com/sushiswap/assets/master/blockchains/polygon/assets/0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174/logo.png'\n    },\n    {\n        label: 'Tether USD (Polygon)',\n        value: 'USDT-polygon',\n        icon: 'https://raw.githubusercontent.com/sushiswap/assets/master/blockchains/polygon/assets/0xc2132D05D31c914a87C6611C10748AEb04B58e8F/logo.png'\n    }\n]\n\nconst Transfer = ({ history, portfolio, selectedAcc, selectedNetwork, accounts, addRequest }) => {\n    const { addToast } = useToasts()\n    const { tokenAddress } = useParams()\n    const [asset, setAsset] = useState(tokenAddress)\n    const [amount, setAmount] = useState(0)\n    const [bigNumberHexAmount, setBigNumberHexAmount] = useState('')\n    const [address, setAddress] = useState('')\n    const [disabled, setDisabled] = useState(true)\n\n    const assetsItems = portfolio.balance.tokens.map(({ label, address, img }) => ({\n        label,\n        value: address,\n        icon: img\n    }))\n\n    const addressesItems = accounts\n        .filter(({ id }) => id !== selectedAcc)\n        .map(({ id }) => id)\n\n    const selectedAsset = portfolio.balance.tokens.find(({ address }) => address === asset)\n\n    const setMaxAmount = () => {\n        const { balanceRaw, decimals } = selectedAsset\n        const amount = ethers.utils.formatUnits(balanceRaw, decimals)\n        onAmountChange(amount)\n    }\n\n    const onAmountChange = (value) => {\n        const amount = value || '0'\n        const { decimals } = selectedAsset\n        const bigNumberAmount = ethers.utils.parseUnits(amount, decimals).toHexString()\n        setAmount(amount)\n        setBigNumberHexAmount(bigNumberAmount)\n    }\n\n    const sendTx = () => {\n        try {\n            const txn = {\n                to: tokenAddress,\n                value: '0',\n                data: ERC20.encodeFunctionData('transfer', [address, bigNumberHexAmount])\n            }\n\n            if (Number(tokenAddress) === 0) {\n                txn.to = address\n                txn.value = bigNumberHexAmount\n                txn.data = '0x'\n            }\n\n            addRequest({\n                id: `transfer_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: selectedNetwork.chainId,\n                account: selectedAcc,\n                txn\n            })\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    useEffect(() => {\n        setAmount(0)\n        setBigNumberHexAmount('')\n        history.push({ pathname: `/wallet/transfer/${asset}` })\n    }, [asset, history])\n\n    useEffect(() => {\n        const isAddressValid = /^0x[a-fA-F0-9]{40}$/.test(address)\n        setDisabled(!isAddressValid || !(amount > 0))\n    }, [address, amount])\n\n    return (\n        <div id=\"transfer\">\n           <div className=\"panel\">\n               <div className=\"title\">\n                   Send\n               </div>\n               {\n                    portfolio.isLoading ?\n                        <Loading/>\n                        :\n                        assetsItems.length ? \n                            <div className=\"form\">\n                                <Select searchable defaultValue={asset} items={assetsItems} onChange={(value) => setAsset(value)}/>\n                                <NumberInput value={amount} min=\"0\" onInput={onAmountChange} button=\"MAX\" onButtonClick={() => setMaxAmount()}/>\n                                <div id=\"recipient-field\">\n                                    <TextInput\n                                        placeholder=\"Recipient\"\n                                        info=\"Please double-check the recipient address, blockchain transactions are not reversible.\"\n                                        value={address}\n                                        onInput={setAddress}\n                                    />\n                                    {\n                                        addressesItems.length ? \n                                            <DropDown title={<FaAddressCard/>} closeOnClick={true}>\n                                                <label>Select from your accounts:</label>\n                                                {\n                                                    addressesItems.map(id => (\n                                                        <div className={`item ${id === address ? 'active' : ''}`} key={id} onClick={() => setAddress(id)}>\n                                                            { id }\n                                                        </div>\n                                                    ))\n                                                }\n                                            </DropDown>\n                                            :\n                                            null\n                                    }\n                                </div>\n                                <div className=\"separator\"/>\n                                <Button disabled={disabled} onClick={sendTx}>Send</Button>\n                            </div>\n                            :\n                            <SendPlaceholder/>\n               }\n           </div>\n           <div className=\"panel\">\n               <div className=\"placeholder-overlay\">\n                    Coming Soon...\n               </div>\n               <div className=\"title blurred\">\n                   Cross-chain\n               </div>\n               <div className=\"form blurred\">\n                    <label>From</label>\n                    <Select searchable defaultValue={asset} items={assetsItems} onChange={value => setAsset(value)}/>\n                    <NumberInput value={amount} min=\"0\" onInput={value => setAmount(value)} button=\"MAX\" onButtonClick={() => setMaxAmount()}/>\n                    <div className=\"separator\">\n                        <BsArrowDown/>\n                    </div>\n                    <label>To</label>\n                    <Select searchable defaultValue={asset} items={crossChainAssets} onChange={() => {}}/>\n                    <NumberInput value={0} min=\"0\" onInput={() => {}} button=\"MAX\" onButtonClick={() => {}}/>\n                    <Button>Transfer</Button>\n                </div>\n           </div>\n        </div>\n    )\n}\n\nexport default withRouter(Transfer)\n","const privilegesOptions = {\n  true: '0x0000000000000000000000000000000000000000000000000000000000000001',\n  false: '0x0000000000000000000000000000000000000000000000000000000000000000',\n}\nexport default privilegesOptions\n","// List of all supported protocols by networks: https://api.zapper.fi/v1/protocols/balances/supported?api_key=5d1237c2-3840-4733-8e92-c5a58fe81b88\n\nconst suportedProtocols = [\n    {\n        network: 'ethereum',\n        protocols: ['1inch', 'aave-v2', 'alchemix', 'badger', 'balancer-v2', 'compound', 'cream', 'curve', 'sushiswap', 'uniswap-v2', 'uniswap-v3', 'nft']\n    },\n    {\n        network: 'polygon',\n        protocols: ['aave-v2', 'quickswap', 'sushiswap']\n    }\n]\n\nexport default suportedProtocols","import { useCallback, useEffect, useState } from 'react';\n\nimport { ZAPPER_API_KEY } from '../config';\nimport { fetchGet } from '../lib/fetch';\nimport { ZAPPER_API_ENDPOINT } from '../config'\nimport suportedProtocols from '../consts/supportedProtocols';\nimport { useToasts } from '../hooks/toasts'\n\nconst getBalances = (apiKey, network, protocol, address) => fetchGet(`${ZAPPER_API_ENDPOINT}/protocols/${protocol}/balances?addresses[]=${address}&network=${network}&api_key=${apiKey}&newBalances=true`)\n\nlet tokensByNetworks = []\nlet otherProtocolsByNetworks = []\nlet lastOtherProcolsRefresh = null\n\nexport default function usePortfolio({ currentNetwork, account }) {\n    const { addToast } = useToasts()\n    const [balanceByNetworks, setBalanceByNetworks] = useState([]);\n    const [isBalanceLoading, setBalanceLoading] = useState(true);\n    const [areAssetsLoading, setAssetsLoading] = useState(true);\n    const [balance, setBalance] = useState({\n        total: {\n            full: 0,\n            truncated: 0,\n            decimals: '00'\n        },\n        tokens: []\n    });\n    const [otherBalances, setOtherBalances] = useState([]);\n    const [assets, setAssets] = useState([]);\n    const [collectables, setCollectables] = useState([]);\n\n    const updateStates = useCallback((currentNetwork) => {\n        const balance = balanceByNetworks.find(({ network }) => network === currentNetwork)\n        if (balance) {\n            setBalance(balance)\n            setOtherBalances(balanceByNetworks.filter(({ network }) => network !== currentNetwork))\n        }\n\n        const tokens = tokensByNetworks.find(({ network }) => network === currentNetwork)\n        const otherProtocols = otherProtocolsByNetworks.find(({ network }) => network === currentNetwork)\n        if (tokens && otherProtocols) {\n            setAssets([\n                ...tokens.products,\n                ...otherProtocols.protocols.filter(({ label }) => label !== 'NFTs')\n            ])\n            setCollectables(otherProtocols.protocols.find(({ label }) => label === 'NFTs')?.assets || [])\n        }\n    }, [balanceByNetworks])\n\n    const fetchBalances = useCallback(async (account) => {\n        try {\n            let failedRequests = 0\n            const requestsCount = suportedProtocols.length\n\n            tokensByNetworks = (await Promise.all(suportedProtocols.map(async ({ network }) => {\n                try {\n                    const balance = await getBalances(ZAPPER_API_KEY, network, 'tokens', account)\n                    if (!balance) return null\n\n                    const { meta, products } = Object.values(balance)[0]\n                    return {\n                        network,\n                        meta,\n                        products\n                    }\n                } catch(_) {\n                    failedRequests++\n                }\n            }))).filter(data => data)\n\n            if (failedRequests >= requestsCount) throw new Error('Failed to fetch Tokens from Zapper API')\n\n            setBalanceByNetworks(tokensByNetworks.map(({ network, meta, products }) => {\n                const balanceUSD = meta.find(({ label }) => label === 'Total').value + meta.find(({ label }) => label === 'Debt').value\n                const [truncated, decimals] = Number(balanceUSD.toString()).toFixed(2).split('.')\n                return {\n                    network,\n                    total: {\n                        full: balanceUSD,\n                        truncated: Number(truncated).toLocaleString('en-US'),\n                        decimals\n                    },\n                    tokens: products.map(({ assets }) => assets.map(({ tokens }) => tokens)).flat(2)\n                }\n            }))\n\n            return true\n        } catch (error) {\n            console.error(error)\n            addToast(error.message, { error: true })\n            return false\n        }\n    }, [addToast])\n\n    const fetchOtherProtocols = useCallback(async (account) => {\n        try {\n            let failedRequests = 0\n            const requestsCount = suportedProtocols.reduce((acc, curr) => curr.protocols.length + acc, 0)\n\n            otherProtocolsByNetworks = (await Promise.all(suportedProtocols.map(async ({ network, protocols }) => {\n                const all = (await Promise.all(protocols.map(async protocol => {\n                    try {\n                        const balance = await getBalances(ZAPPER_API_KEY, network, protocol, account)\n                        return balance ? Object.values(balance)[0] : null\n                    } catch(_) {\n                        failedRequests++\n                    }\n                }))).filter(data => data).flat()\n\n                return all.length ? {\n                    network,\n                    protocols: all.map(({ products }) => products).flat(2)\n                } : null\n            }))).filter(data => data)\n            \n            lastOtherProcolsRefresh = Date.now()\n\n            if (failedRequests >= requestsCount) throw new Error('Failed to fetch other Protocols from Zapper API')\n            return true\n        } catch (error) {\n            console.error(error)\n            addToast(error.message, { error: true })\n            return false\n        }\n    }, [addToast])\n\n    const refreshBalanceIfFocused = useCallback(() => {\n        if (!account) return\n        if (document.hasFocus() && !isBalanceLoading) fetchBalances(account)\n    }, [isBalanceLoading, account, fetchBalances])\n\n    const requestOtherProtocolsRefresh = async () => {\n        if (!account) return\n        if ((Date.now() - lastOtherProcolsRefresh) > 30000 && !areAssetsLoading) await fetchOtherProtocols(account)\n    }\n\n    // Fetch balances and protocols on account change\n    useEffect(() => {\n        tokensByNetworks = []\n        otherProtocolsByNetworks = []\n\n        async function loadBalance() {\n            if (!account) return\n            setBalanceLoading(true)\n            if (await fetchBalances(account)) setBalanceLoading(false)\n        }\n\n        async function loadProtocols() {\n            if (!account) return\n            setAssetsLoading(true)\n            if (await fetchOtherProtocols(account)) setAssetsLoading(false)\n        }\n\n        loadBalance()\n        loadProtocols()\n    }, [account, fetchBalances, fetchOtherProtocols])\n\n    // Update states on network change\n    useEffect(() => updateStates(currentNetwork), [updateStates, balanceByNetworks, areAssetsLoading, currentNetwork])\n\n    // Refresh balance periodically\n    useEffect(() => {\n        const refreshInterval = setInterval(refreshBalanceIfFocused, 20000)\n        return () => clearInterval(refreshInterval)\n    }, [refreshBalanceIfFocused])\n\n    // Refresh balance when window is focused\n    useEffect(() => {\n        window.addEventListener('focus', refreshBalanceIfFocused)\n        return () => window.removeEventListener('focus', refreshBalanceIfFocused)\n    }, [refreshBalanceIfFocused])\n\n    return {\n        isBalanceLoading,\n        areAssetsLoading,\n        balance,\n        otherBalances,\n        assets,\n        collectables,\n        requestOtherProtocolsRefresh\n        //updatePortfolio//TODO find a non dirty way to be able to reply to getSafeBalances from the dapps, after the first refresh\n    }\n}\n","import { useCallback, useEffect, useReducer, useRef } from 'react'\nimport { useToasts } from '../hooks/toasts'\n\nimport WalletConnectCore from '@walletconnect/core'\nimport * as cryptoLib from '@walletconnect/iso-crypto'\n\nconst noop = () => null\nconst noopSessionStorage = { setSession: noop, getSession: noop, removeSession: noop }\n\nconst STORAGE_KEY = 'wc1_state'\nconst SUPPORTED_METHODS = ['eth_sendTransaction', 'gs_multi_send', 'personal_sign', 'eth_sign']\nconst SESSION_TIMEOUT = 6000\n\nconst getDefaultState = () => ({ connections: [], requests: [] })\n\nlet connectors = {}\n\nexport default function useWalletConnect ({ account, chainId, onCallRequest }) {\n    const { addToast } = useToasts()\n\n    // This is needed cause of the WalletConnect event handlers\n    const stateRef = useRef()\n    stateRef.current = { account, chainId }\n\n    const [state, dispatch] = useReducer((state, action) => {\n        if (action.type === 'updateConnections') return { ...state, connections: action.connections }\n        if (action.type === 'connectedNewSession') {\n            return {\n                ...state,\n                connections: [...state.connections, { uri: action.uri, session: action.session }]\n            }\n        }\n        if (action.type === 'disconnected') {\n            return {\n                ...state,\n                connections: state.connections.filter(x => x.uri !== action.uri)\n            }\n        }\n        if (action.type === 'requestAdded') {\n            if (state.requests.find(({ id }) => id === action.request.id)) return { ...state }\n            return { ...state, requests: [...state.requests, action.request] }\n        }\n        if (action.type === 'requestsResolved') {\n            return {\n                ...state,\n                requests: state.requests.filter(x => !action.ids.includes(x.id))\n            }\n        }\n        return { ...state }\n    }, null, () => {\n        const json = localStorage[STORAGE_KEY]\n        if (!json) return getDefaultState()\n        try {\n            return {\n                ...getDefaultState(),\n                ...JSON.parse(json)\n            }\n        } catch(e) {\n            console.error(e)\n            return getDefaultState()\n        }\n    })\n\n    const connect = useCallback(connectorOpts => {\n        if (connectors[connectorOpts.uri]) {\n            addToast('dApp already connected')\n            return connectors[connectorOpts.uri]\n        }\n        let connector\n        try {\n            connector = connectors[connectorOpts.uri] = new WalletConnectCore({\n                connectorOpts,\n                cryptoLib,\n                sessionStorage: noopSessionStorage\n            })\n        } catch(e) {\n            addToast(`Unable to connect to ${connectorOpts.uri}: ${e.message}`, { error: true })\n            return null\n        }\n\n        const onError = err => {\n            addToast(`WalletConnect error: ${(connector.session && connector.session.peerMeta && connector.session.peerMeta.name)} ${err.message || err}`, { error: true })\n            console.error('WalletConnect error', err)\n        }\n\n        let sessionStart\n        let sessionTimeout\n        if (!connector.session.peerMeta) sessionTimeout = setTimeout(() => {\n            if (!connector.session.peerMeta) addToast('Unable to get session from dApp - perhaps the link has expired?', { error: true })\n        }, SESSION_TIMEOUT)\n\n        connector.on('session_request', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n\n            sessionStart = Date.now()\n            clearTimeout(sessionTimeout)\n\n            connector.approveSession({\n                accounts: [stateRef.current.account],\n                chainId: stateRef.current.chainId,\n            })\n            // It's safe to read .session right after approveSession because 1) approveSession itself normally stores the session itself\n            // 2) connector.session is a getter that re-reads private properties of the connector; those properties are updated immediately at approveSession\n            dispatch({ type: 'connectedNewSession', uri: connectorOpts.uri, session: connector.session })\n\n            addToast('Successfully connected to '+connector.session.peerMeta.name)\n        })\n\n        connector.on('call_request', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n            if (!SUPPORTED_METHODS.includes(payload.method)) {\n                connector.rejectRequest({ id: payload.id, error: { message: 'METHOD_NOT_SUPPORTED' }})\n                return\n            }\n            if (\n                payload.method === 'eth_sendTransaction' && payload.params[0] && payload.params[0].from\n                && payload.params[0].from.toLowerCase() !== connector.session.accounts[0].toLowerCase()\n            ) {\n                addToast(`dApp sent a request for the wrong account: ${payload.params[0].from}`, { error: true })\n                return\n            }\n            dispatch({ type: 'requestAdded', request: {\n                id: payload.id,\n                type: payload.method,\n                wcUri: connectorOpts.uri,\n                txn: payload.params[0],\n                chainId: connector.session.chainId,\n                account: connector.session.accounts[0]\n            } })\n        })\n\n        connector.on('disconnect', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n\n            clearTimeout(sessionTimeout)\n            // NOTE the dispatch() will cause double rerender when we trigger a disconnect,\n            // cause we will call it once on disconnect() and once when the event arrives\n            // we can prevent this by checking if (!connectors[...]) but we'd rather stay safe and ensure\n            // the connection is removed\n            dispatch({ type: 'disconnected', uri: connectorOpts.uri })\n            connectors[connectorOpts.uri] = null\n\n            // NOTE: this event might be invoked 2 times when the dApp itself disconnects\n            // currently we don't dedupe that\n            if (sessionStart && (Date.now() - sessionStart) < SESSION_TIMEOUT) {\n                addToast('dApp disconnected immediately - perhaps it does not support the current network?', { error: true })\n            } else {\n                addToast(`${connector.session.peerMeta.name} disconnected: ${payload.params[0].message}`)\n            }\n        })\n\n        connector.on('error', onError)\n\n        return connector\n    }, [addToast])\n\n    const disconnect = useCallback(uri => {\n        // connector might not be there, either cause we disconnected before,\n        // or cause we failed to connect in the first place\n        if (connectors[uri]) {\n            connectors[uri].killSession()\n            connectors[uri] = null\n        }\n        dispatch({ type: 'disconnected', uri })\n    }, [])\n\n    const resolveMany = (ids, resolution) => {\n        state.requests.forEach(({ id, wcUri }) => {\n            if (ids.includes(id)) {\n                const connector = connectors[wcUri]\n                if (!connector) return\n                if (resolution.success) connector.approveRequest({ id, result: resolution.result })\n                else connector.rejectRequest({ id, error: { message: resolution.message } })\n            }\n        })\n        dispatch({ type: 'requestsResolved', ids })\n    }\n\n    // Side effects on init\n    useEffect(() => {\n        state.connections.forEach(({ uri, session }) => {\n            if (!connectors[uri]) connect({ uri, session })\n        })\n    // we specifically want to run this only once despite depending on state\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [connect])\n\n    // Side effects that will run on every state change/rerender\n    useEffect(() => {\n        // restore connectors and update the ones that are stale\n        let updateConnections = false\n        state.connections.forEach(({ uri, session }) => {\n            if (connectors[uri]) {\n                const connector = connectors[uri]\n                const session = connector.session\n                if (session.accounts[0] !== account || session.chainId !== chainId) {\n                    connector.updateSession({ accounts: [account], chainId })\n                    updateConnections = true\n                }\n            }\n        })\n        \n        localStorage[STORAGE_KEY] = JSON.stringify(state)\n\n        if (updateConnections) dispatch({\n            type: 'updateConnections',\n            connections: state.connections\n                .filter(({ uri }) => connectors[uri])\n                .map(({ uri }) => ({ uri, session: connectors[uri].session }))\n        })\n    }, [state, account, chainId, connect])\n\n    // Initialization effects\n    useEffect(() => runInitEffects(connect), [connect])\n\n    return {\n        connections: state.connections,\n        requests: state.requests,\n        resolveMany,\n        connect, disconnect\n    }\n}\n\n// Initialization side effects\n// Connect to the URL, read from clipboard, etc.\nfunction runInitEffects(wcConnect) {\n    const query = new URLSearchParams(window.location.href.split('?').slice(1).join('?'))\n    const wcUri = query.get('uri')\n    if (wcUri) wcConnect({ uri: wcUri })\n\n    // hax\n    window.wcConnect = uri => wcConnect({ uri })\n\n    // @TODO on focus and on user action\n    const clipboardError = e => console.log('non-fatal clipboard err', e)\n    const isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1\n    const tryReadClipboard = () => {\n        if (isFirefox) return\n        navigator.permissions.query({ name: 'clipboard-read' }).then(result => {\n            if (result.state === 'granted' || result.state === 'prompt') {\n                navigator.clipboard.readText().then(clipboard => {\n                    if (clipboard.startsWith('wc:') && !connectors[clipboard]) wcConnect({ uri: clipboard })\n                }).catch(clipboardError)\n            }\n        }).catch(clipboardError)\n    }\n    tryReadClipboard()\n    window.addEventListener('focus', tryReadClipboard)\n    return () => window.removeEventListener('focus', tryReadClipboard)\n}\n","import { useEffect, useCallback, useState } from 'react'\nimport { fetchCaught } from '../lib/fetch'\n\nexport default function useRelayerData(url) {\n  const [isLoading, setLoading] = useState(true)\n  const [data, setData] = useState(null)\n  const [err, setErr] = useState(null)\n\n  const updateData = useCallback(async () => {\n    const { resp, body, errMsg } = await fetchCaught(url)\n\n    if (resp && resp.status === 200) {\n      return body\n    } else {\n      console.log('relayerData error', { resp, body, errMsg })\n      throw new Error(errMsg || `status code ${resp && resp.status}`)\n    }\n  }, [url])\n\n  useEffect(() => {\n    if (!url) return\n    let unloaded = false\n    setLoading(true)\n    setErr(null)\n    updateData()\n      .then(data => !unloaded && setData(data))\n      .catch(e => !unloaded && setErr(e.message || e))\n      .then(() => !unloaded && setLoading(false))\n    return () => unloaded = true\n  }, [url, updateData])\n\n  return { data, isLoading, errMsg: err }\n}\n","import './Security.scss'\n\nimport { Loading, TextInput, Button } from '../../common'\nimport { Interface } from 'ethers/lib/utils'\nimport accountPresets from '../../../consts/accountPresets'\nimport privilegesOptions from '../../../consts/privilegesOptions'\nimport { useRelayerData } from '../../../hooks'\n\nconst IDENTITY_INTERFACE = new Interface(\n  require('adex-protocol-eth/abi/Identity5.2')\n)\n\nconst Security = ({ relayerURL, selectedAcc, selectedNetwork, accounts, addRequest }) => {\n  const { data, errMsg, isLoading } = useRelayerData(relayerURL ? `${relayerURL}/identity/${selectedAcc}/${selectedNetwork.id}/privileges` : null)\n  const privileges = data ? data.privileges : {}\n\n  const craftTransaction = (address, privLevel) => {\n    return {\n      to: selectedAcc,\n      data: IDENTITY_INTERFACE.encodeFunctionData('setAddrPrivilege', [\n        address,\n        privLevel,\n      ]),\n      value: '0x',\n    }\n  }\n\n  const addTransactionToAddRequest = txn => {\n    addRequest({\n      id: `setPriv_${txn.data}`,\n      txn: txn,\n      chainId: selectedNetwork.chainId,\n      account: selectedAcc,\n    })\n  }\n\n  const onMakeDefaultBtnClicked = key => {\n    // @TODO\n  }\n\n  const onRemoveBtnClicked = key => {\n    const txn = craftTransaction(key, privilegesOptions.false)\n    addTransactionToAddRequest(txn)\n  }\n\n  const selectedAccount = accounts.find(x => x.id === selectedAcc)\n\n  const privList = Object.entries(privileges).map(([addr, privValue]) => {\n    if (!privValue) return null\n    const isQuickAcc = addr === accountPresets.quickAccManager\n    const privText = isQuickAcc\n      ? `Email/passphrase signer (${selectedAccount.email})`\n      : addr\n    const signerAddress = isQuickAcc\n      ? selectedAccount.signer.quickAccManager\n      : selectedAccount.signer.address\n    const isSelected = signerAddress === addr\n\n    return (\n      <li key={addr}>\n        <TextInput className='depositAddress' value={privText} disabled />\n        <div className='btns-wrapper'>\n          <Button disabled={isSelected} onClick={() => onMakeDefaultBtnClicked(addr)} small>\n            {isSelected ? 'Current signer' : 'Make default'}\n          </Button>\n          <Button\n            onClick={() => onRemoveBtnClicked(addr)}\n            small\n            red\n            title={isSelected ? 'Cannot remove the currently used signer' : ''}\n            disabled={isSelected}\n          >\n            Remove\n          </Button>\n        </div>\n      </li>\n    )\n  }).filter(x => x)\n\n  // @TODO relayerless mode: it's not that hard to implement in a primitive form, we need everything as-is\n  // but rendering the initial privileges instead; or maybe using the relayerless transactions hook/service\n  // and aggregate from that\n  if (!relayerURL) return (<section id='security'>\n    <h3 className='error'>Unsupported: not currently connected to a relayer.</h3>\n  </section>)\n  return (\n    <section id='security'>\n      <div className='panel'>\n        <div className='title'>Authorized signers</div>\n        {errMsg && (<h3 className='error'>Error getting authorized signers: {errMsg}</h3>)}\n        {isLoading && <Loading />}\n        <ul className='content'>{!isLoading && privList}</ul>\n      </div>\n    </section>\n  )\n}\n\nexport default Security\n","import { Interface, getAddress, formatUnits } from 'ethers/lib/utils'\n\nimport { verifiedContracts, tokens } from '../consts/verifiedContracts'\nimport networks from '../consts/networks'\nimport ERC20ABI from 'adex-protocol-eth/abi/ERC20'\n\nconst ERC20 = new Interface(ERC20ABI)\nconst TRANSFER_SIGHASH = ERC20.getSighash(ERC20.getFunction('transfer').format())\n\n// @TODO custom parsing for univ2 contracts, exact output, etc.\nexport function getTransactionSummary(txn, networkId, accountAddr) {\n    const [, value, data] = txn\n    const to = getAddress(txn[0])\n    let callSummary, sendSummary\n    const network = networks.find(x => x.id === networkId || x.chainId === networkId)\n    if (!network) return 'Unknown newtork (unable to parse'\n\n    const contractKey = network.id + ':' + getAddress(to)\n    const contractInfo = verifiedContracts[contractKey]\n    const tokenInfo = tokens[to]\n\n    const nativeAsset = network ? network.nativeAssetSymbol : 'unknown native token'\n    if (parseInt(value) > 0) sendSummary = `send ${(parseInt(value)/1e18).toFixed(4)} ${nativeAsset} to ${contractInfo ? contractInfo.name : to}`\n    if (data !== '0x') {\n        if (data.startsWith(TRANSFER_SIGHASH)) {\n            const [to, amount] = ERC20.decodeFunctionData('transfer', data)\n            const token = tokens[getAddress(to)]\n            if (token) {\n                callSummary = `send ${(amount/Math.pow(10, token[1])).toFixed(4)} ${token[0]} to ${to}`\n            } else {\n                // @TODO: maybe we can call the contract and get detailed data\n                callSummary = `send ${amount/1e18} unknown token to ${to}`\n            }\n        } else if (contractInfo) {\n            const iface = new Interface(contractInfo.abi)\n            const parsed = iface.parseTransaction({ data, value })\n            // @TODO: some elegant way to try-catch potential issues here\n            if (parsed.name === 'swapExactETHForTokens') {\n                const tokenAddr = parsed.args.path[parsed.args.path.length - 1]\n                const token = tokens[getAddress(tokenAddr)]\n                const output = token ? `${formatUnits(parsed.args.amountOutMin, token[1])} ${token[0]}` : `${parsed.args.amountOutMin} of token ${tokenAddr}`\n                const contractNote = ` on ${contractInfo.name}`\n                const recipientNote = parsed.args.to.toLowerCase() === accountAddr.toLowerCase() ? `` : ` and send it to ${parsed.args.to}`\n                return `Swap ${formatUnits(value, 18)} ${nativeAsset} for at least ${output}${contractNote}${recipientNote}`\n            } else {\n                callSummary = `Interaction with ${contractInfo.name}: ${parsed.name}`\n            }\n        } else callSummary = `unknown call to ${contractInfo ? contractInfo.name : (tokenInfo ? tokenInfo[0] : to)}`\n    }\n    return [callSummary, sendSummary].filter(x => x).join(', ')\n}\n\nexport function getContractName(txn, networkId) {\n    const [to] = txn\n    const network = networks.find(x => x.id === networkId || x.chainId === networkId)\n    const contractKey = network.id + ':' + getAddress(to)\n    const contractInfo = verifiedContracts[contractKey]\n    return contractInfo ? contractInfo.name : null\n}\n","import './TxnPreview.css'\n\nimport { useState } from 'react'\nimport { FaTimes, FaChevronDown, FaChevronUp } from 'react-icons/fa'\n\nimport { getContractName, getTransactionSummary } from '../../../lib/humanReadableTransactions'\nimport networks from '../../../consts/networks'\nimport { formatUnits } from 'ethers/lib/utils'\n\nfunction getNetworkSymbol(networkId) {\n  const network = networks.find(x => x.id === networkId)\n  return network ? network.nativeAssetSymbol : 'UNKNW'\n}\nexport default function TxnPreview ({ txn, onDismiss, network, account, isFirstFailing }) {\n  const [isExpanded, setExpanded] = useState(false)\n  const contractName = getContractName(txn, network)\n  return (\n    <div className={isFirstFailing ? 'txnPreview firstFailing' : 'txnPreview'}>\n        <div>{getTransactionSummary(txn, network, account)}</div>\n        {isFirstFailing ? (<div className='firstFailingLabel'>This is the first failing transaction.</div>) : (<></>)}\n\n        {\n          isExpanded ? (<div className='advanced'>\n            <div><b>Interacting with (<i>to</i>):</b> {txn[0]}{contractName ? ` (${contractName})` : ''}</div>\n            <div><b>{getNetworkSymbol(network)} to be sent (<i>value</i>):</b> {formatUnits(txn[1] || '0x0', 18)}</div>\n            <div><b>Data:</b> {txn[2]}</div>\n          </div>) : (<></>)\n        }\n\n        <div className='actionIcons'>\n          <span className='expandTxn' onClick={() => setExpanded(e => !e)}>\n            {isExpanded ? (<FaChevronUp/>) : (<FaChevronDown/>)}\n          </span>\n          {onDismiss ? (<span className='dismissTxn' onClick={onDismiss}><FaTimes/></span>) : (<></>)}\n        </div>\n    </div>\n  )\n}\n","import './Transactions.scss'\nimport { FaSignature } from 'react-icons/fa'\nimport { useRelayerData } from '../../../hooks'\nimport TxnPreview from '../../common/TxnPreview/TxnPreview'\nimport { Loading } from '../../common'\nimport accountPresets from '../../../consts/accountPresets'\nimport networks from '../../../consts/networks'\n\nfunction Transactions ({ relayerURL, selectedAcc, selectedNetwork, eligibleRequests, showSendTxns }) {\n  // @TODO refresh this after we submit a bundle; perhaps with the service\n  // we can just append a cache break to the URL - that way we force the hook to refresh, and we have a cachebreak just in case\n  const url = relayerURL\n    ? `${relayerURL}/identity/${selectedAcc}/${selectedNetwork.id}/transactions`\n    : null\n  const { data, errMsg, isLoading } = useRelayerData(url)\n\n  // @TODO implement a service that stores sent transactions locally that will be used in relayerless mode\n  if (!relayerURL) return (<section id='transactions'>\n    <h3 className='error'>Unsupported: not currently connected to a relayer.</h3>\n  </section>)\n\n  // @TODO: visualize others\n  const firstPending = data && data.txns.find(x => !x.executed)\n\n  return (\n    <section id='transactions'>\n      {!!eligibleRequests.length && (<div onClick={showSendTxns} className='panel'>\n        <div className='title'><FaSignature size={25}/>&nbsp;&nbsp;&nbsp;Waiting to be signed</div>\n        {eligibleRequests.map(req => (\n          <TxnPreview\n              key={req.id}\n              network={selectedNetwork.id}\n              account={selectedAcc}\n              txn={[req.txn.to, req.txn.value || '0x0', req.txn.data || '0x' ]}/>\n        ))}\n      </div>)}\n      { !!firstPending && (<div className='panel'>\n        <div className='title'>Pending transaction bundle</div>\n        {firstPending && (<MinedBundle bundle={firstPending}></MinedBundle>)}\n      </div>) }\n\n      <h2>{(data && data.txns.length === 0) ? 'No transactions yet.' : 'Confirmed transactions'}</h2>\n      {!relayerURL && (<h3 className='error'>Unsupported: not currently connected to a relayer.</h3>)}\n      {errMsg && (<h3 className='error'>Error getting list of transactions: {errMsg}</h3>)}\n      {isLoading && <Loading />}\n      {\n          // @TODO respect the limit and implement pagination\n          !isLoading && data && data.txns.filter(x => x.executed && x.executed.mined).map(MinedBundle)\n      }\n    </section>\n  )\n}\n\nfunction MinedBundle(bundle) {\n  const network = networks.find(x => x.id === bundle.network)\n  if (!Array.isArray(bundle.txns)) return (<h3 className='error'>Bundle has no transactions (should never happen)</h3>)\n  const lastTxn = bundle.txns[bundle.txns.length - 1]\n  // terribly hacky; @TODO fix\n  // all of the values are prob checksummed so we may not need toLowerCase\n  const hasFee = lastTxn[0].toLowerCase() === accountPresets.feeCollector.toLowerCase()\n    || lastTxn[2].toLowerCase().includes(accountPresets.feeCollector.toLowerCase().slice(2))\n  const txns = hasFee ? bundle.txns.slice(0, -1) : bundle.txns\n\n  return (<div className='minedBundle' key={bundle._id}>\n    {txns.map((txn, i) => (<TxnPreview\n      key={i} // safe to do this, individual TxnPreviews won't change within a specific bundle\n      txn={txn} network={bundle.network} account={bundle.identity}/>\n    ))}\n    {hasFee && (<div className='fee'><b>Fee:</b> </div>)}\n    <div><b>Submitted at:</b> {bundle.submittedAt && (new Date(bundle.submittedAt)).toString()}</div>\n    { bundle.txId && (<div\n      ><b>Block explorer:</b> <a href={network.explorerUrl+'/tx/'+bundle.txId} target='_blank' rel='noreferrer'>{network.explorerUrl.split('/')[2]}</a>\n    </div>) }\n\n  </div>)\n}\n\nexport default Transactions\n","import './GnosisSafeApps.scss'\n\nimport {useEffect, useRef, useState} from 'react'\n\nconst dapps = [{\n  name: 'LocalTest',\n  url: 'http://localhost:3003',\n  logo: 'http://localhost:3003/logo-test.png',\n  desc: 'Local dapp test with some lorem ipsum stuff'\n},\n  {\n    name: 'ParaSwap',\n    url: 'https://paraswap.io',\n    logo: 'https://paraswap.io/paraswap.svg',\n    desc: 'ParaSwap allows dApps and traders to get the best DEX liquidity by aggregating multiple markets and offering the best rates'\n  },\n  {\n    name: '0xPlasma Finance',\n    url: 'https://apy.plasma.finance',\n    logo: 'https://apy.plasma.finance/logo.svg',\n    desc: 'Cross-chain DeFi & DEX aggregator, farming, asset management, fiat on-ramp'\n  }\n]\n\nexport default function GnosisSafeApps({network, selectedAcc, gnosisConnect, gnosisDisconnect}) {\n\n  const iframeRef = useRef(null)\n  const [selectedApp, setSelectedApp] = useState(null)\n\n  //to refresh iframe\n  const genHash = () => {\n    return selectedApp?.url + network.chainId + selectedAcc\n  }\n\n  useEffect(() => {\n    if (selectedApp) {\n      gnosisConnect({\n        selectedAcc: selectedAcc,\n        iframeRef: iframeRef,\n        app: selectedApp\n      })\n    }\n\n    return () => {\n      gnosisDisconnect()\n    }\n  }, [selectedApp, network, selectedAcc, iframeRef, gnosisConnect, gnosisDisconnect])\n\n  return (\n    <div id=\"plugin-gnosis-conainer\">\n      {selectedApp ? (\n        <iframe title='Ambire Plugin' key={genHash()} ref={iframeRef} src={selectedApp.url}/>\n      ) : (\n        <ul id=\"dapps-container\">\n          {dapps.map((dapp, index) => (\n            <li key={index} onClick={() => setSelectedApp(dapp)}>\n              <div className=\"logo-container\" style={{backgroundImage: `url(${dapp.logo})`}}></div>\n              <div className=\"dapp-name\">{dapp.name}</div>\n              <div className=\"dapp-desc\">{dapp.desc}</div>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>)\n}\n","const ERC721Abi = [\n    \"function name() view returns (string memory)\",\n    \"function tokenURI(uint256 _tokenId) view returns (string memory)\",\n    \"function ownerOf(uint256 tokenId) view returns (address)\",\n    \"function transferFrom(address from, address to, uint256 tokenId)\"\n]\n\nexport default ERC721Abi","import './Collectable.scss'\n\nimport { useParams } from 'react-router-dom'\nimport { ethers, getDefaultProvider } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useCallback, useEffect, useState } from 'react'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { BsFillImageFill } from 'react-icons/bs'\nimport * as blockies from 'blockies-ts';\nimport { useToasts } from '../../../hooks/toasts'\nimport { TextInput, Button, Loading } from '../../common'\nimport ERC721Abi from '../../../consts/ERC721Abi'\nimport networks from '../../../consts/networks'\n\nconst ERC721 = new Interface(ERC721Abi)\n\nconst handleUri = uri => {\n    uri = uri.startsWith('data:application/json') ? uri.replace('data:application/json;utf8,', '') : uri\n    return uri.startsWith('ipfs://') ? uri.replace(/ipfs:\\/\\/ipfs\\/|ipfs:\\/\\//g, 'https://ipfs.io/ipfs/') : uri\n}\n\nconst Collectable = ({ selectedAcc, selectedNetwork, addRequest }) => {\n    const { addToast } = useToasts()\n    const { network, collectionAddr, tokenId } = useParams()\n    const [isLoading, setLoading] = useState(true)\n    const [metadata, setMetadata] = useState({\n        owner: {\n            address: '',\n            icon: ''\n        },\n        name: '',\n        description: '',\n        image: '',\n        collection: '',\n        explorerUrl: ''\n    })\n    const [recipientAddress, setRecipientAddress] = useState('')\n    const [isTransferDisabled, setTransferDisabled] = useState(true)\n\n    const sendTransferTx = () => {\n        try {\n            addRequest({\n                id: `transfer_nft_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: selectedNetwork.chainId,\n                account: selectedAcc,\n                txn: {\n                    to: collectionAddr,\n                    value: '0',\n                    data: ERC721.encodeFunctionData('transferFrom', [metadata.owner.address, recipientAddress, tokenId])\n                }\n            })\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    useEffect(() => {\n        const isAddressValid = /^0x[a-fA-F0-9]{40}$/.test(recipientAddress)\n        setTransferDisabled(!isAddressValid || selectedAcc === recipientAddress || metadata.owner.address !== selectedAcc || selectedNetwork.id !== network)\n    }, [recipientAddress, metadata, selectedNetwork, selectedAcc, network])\n\n    const fetchMetadata = useCallback(async () => {\n        setLoading(true)\n        setMetadata({})\n    \n        try {\n            const networkDetails = networks.find(({ id }) => id === network)\n            if (!networkDetails) throw new Error('This network is not supported')\n\n            const { rpc, explorerUrl } = networkDetails\n            const provider = getDefaultProvider(rpc)\n            const contract = new ethers.Contract(collectionAddr, ERC721Abi, provider)\n\n            const [collection, address, uri] = await Promise.all([\n                contract.name(),\n                contract.ownerOf(tokenId),\n                contract.tokenURI(tokenId)\n            ])\n\n            try {\n                let json = {}\n\n                if (uri.startsWith('data:application/json')) {\n                    json = JSON.parse(uri.replace('data:application/json;utf8,', ''))\n                } else {\n                    const jsonUrl = handleUri(uri)\n                    const response = await fetch(jsonUrl)\n                    json = await response.json()\n                }\n\n                setMetadata(metadata => ({\n                    ...metadata,\n                    ...json,\n                    image: json ? handleUri(json.image) : null\n                }))\n            } catch(e) {\n                throw e\n            }\n\n            setMetadata(metadata => ({\n                ...metadata,\n                collection,\n                owner: {\n                    address,\n                    icon: blockies.create({ seed: address }).toDataURL()\n                },\n                explorerUrl\n            }))\n\n            setLoading(false)\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }, [addToast, tokenId, collectionAddr, network])\n\n    useEffect(() => fetchMetadata(), [fetchMetadata])\n\n    return (\n        <div id=\"collectable\">\n            <div className=\"panel\">\n                <div className=\"title\">\n                    { metadata.collection } #{ tokenId }\n                    <div className=\"contract\">\n                        Contract address: <a className=\"address\" href={`${metadata.explorerUrl}/address/${collectionAddr}`} target=\"_blank\" rel=\"noreferrer\">{ collectionAddr }</a>\n                    </div>\n                </div>\n                {\n                    isLoading ?\n                        <Loading/>\n                        :\n                        <div className=\"metadata\">\n                            <div className=\"image\" style={{backgroundImage: `url(${metadata.image})`}}>\n                                { !metadata.image ? <BsFillImageFill/> : null }\n                            </div>\n                            <div className=\"info\">\n                                <div className=\"name\">\n                                    { metadata.name }\n                                </div>\n                                <div className=\"description\">\n                                    { metadata.description }\n                                </div>\n                            </div>\n                            <div className=\"owner\">\n                                Owner:\n                                <a className=\"address\" href={`${metadata.explorerUrl}/address/${metadata.owner.address}`} target=\"_blank\" rel=\"noreferrer\">\n                                    <div className=\"icon\" style={{backgroundImage: `url(${metadata.owner.icon})`}}></div>\n                                    { \n                                        metadata.owner.address === selectedAcc ? \n                                            <span>You ({ metadata.owner.address })</span>\n                                            :\n                                            metadata.owner.address\n                                    }\n                                    \n                                </a>\n                            </div>\n                        </div>\n                }\n            </div>\n            <div className=\"panel\">\n                <div className=\"title\">Transfer</div>\n                <div className=\"content\">\n                    <TextInput placeholder=\"Recipient Address\" onInput={(value) => setRecipientAddress(value)}/>\n                    <div className=\"separator\"></div>\n                    <Button icon={<AiOutlineSend/>} disabled={isTransferDisabled} onClick={sendTransferTx}>Send</Button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Collectable","import \"./Wallet.scss\"\n\nimport { Switch, Route, Redirect } from \"react-router-dom\"\nimport Dashboard from \"./Dashboard/Dashboard\"\nimport TopBar from \"./TopBar/TopBar\"\nimport SideBar from \"./SideBar/SideBar\"\nimport Deposit from \"./Deposit/Deposit\"\nimport Swap from \"./Swap/Swap\"\nimport Transfer from \"./Transfer/Transfer\"\nimport Security from \"./Security/Security\"\nimport Transactions from './Transactions/Transactions'\nimport PluginGnosisSafeApps from \"../Plugins/GnosisSafeApps/GnosisSafeApps\"\nimport Collectable from \"./Collectable/Collectable\"\n\nexport default function Wallet(props) {\n  const routes = [\n    {\n      path: '/dashboard',\n      component: <Dashboard portfolio={props.portfolio} setNetwork={props.setNetwork} />\n    },\n    {\n      path: '/deposit',\n      component: <Deposit selectedAcc={props.selectedAcc} selectedNetwork={props.network.id} />\n    },\n    {\n      path: '/transfer/:tokenAddress?',\n      component: <Transfer portfolio={props.portfolio} selectedAcc={props.selectedAcc} selectedNetwork={{...props.network}} accounts={props.accounts} addRequest={props.addRequest}/>\n    },\n    {\n      path: '/security',\n      component: <Security relayerURL={props.relayerURL} selectedAcc={props.selectedAcc} selectedNetwork={props.network} accounts={props.accounts} addRequest={props.addRequest}/>\n    },\n    {\n      path: '/transactions',\n      component: <Transactions relayerURL={props.relayerURL} selectedAcc={props.selectedAcc} selectedNetwork={props.network} addRequest={props.addRequest} eligibleRequests={props.eligibleRequests} showSendTxns={props.showSendTxns}/>\n    },\n    {\n      path: '/swap',\n      component: <Swap\n        gnosisConnect={props.gnosisConnect}\n        gnosisDisconnect={props.gnosisDisconnect}\n        selectedAcc={props.selectedAcc}\n        network={props.network}\n      />\n    },\n    {\n      path: '/earn'\n    },\n    {\n      path: '/nft/:network/:collectionAddr/:tokenId',\n      component: <Collectable selectedAcc={props.selectedAcc} selectedNetwork={{...props.network}} addRequest={props.addRequest}/>\n    },\n    {\n      path: '/gnosis/plugins',\n      component: <PluginGnosisSafeApps\n        gnosisConnect={props.gnosisConnect}\n        gnosisDisconnect={props.gnosisDisconnect}\n        selectedAcc={props.selectedAcc}\n        network={props.network}\n      />\n    }\n  ]\n\n  return (\n    <div id=\"wallet\">\n      <TopBar {...props} />\n      <SideBar match={props.match} portfolio={props.portfolio} />\n      <div id=\"wallet-container\">\n        <Switch>\n          {\n            routes.map(({ path, component }) => (\n              <Route path={props.match.url + path} key={path}>\n                {component ? component : null}\n              </Route>\n            ))\n          }\n          <Route path={props.match.url + \"/\"}>\n            <Redirect to={props.match.url + \"/dashboard\"} />\n          </Route>\n        </Switch >\n      </div >\n    </div >\n  );\n}\n","import { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport TrezorConnect from 'trezor-connect'\nimport { ethers } from 'ethers'\nimport HDNode from 'hdkey'\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\n\nlet wallets = {}\n\n// opts\n// passphrase: string\n// noCache: boolean\nexport function getWallet ({ signer, signerExtra, chainId }, opts = {}) {\n    const id = `${signer.address || signer.one}${chainId}`\n    if (wallets[id]) return wallets[id]\n    return wallets[id] = getWalletNew({ signer, signerExtra, chainId }, opts)\n}\n\nfunction getWalletNew ({ chainId, signer, signerExtra }, opts) {\n    if (signerExtra && signerExtra.type === 'trezor') {\n        const providerTrezor = new TrezorSubprovider({\n            trezorConnectClientApi: TrezorConnect,\n            networkId: chainId\n        })\n        providerTrezor._initialDerivedKeyInfo = getInitialDerivedKeyInfo(signerExtra)\n        // for Trezor/ledger, alternatively we can shim using https://www.npmjs.com/package/web3-provider-engine and then wrap in Web3Provider\n        return {\n            signMessage: hash => providerTrezor.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n            signTransaction: params => providerTrezor.signTransactionAsync({ ...params, from: signer.address })\n        }\n    } else if (signerExtra && signerExtra.type === 'ledger') {\n        const provider = new LedgerSubprovider({\n            networkId: chainId,\n            ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n            baseDerivationPath: signerExtra.info.baseDerivationPath\n        })\n        return {\n            signMessage: hash => provider.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n            signTransaction: params => provider.signTransactionAsync({ ...params, from: signer.address })\n        }\n    } else if (signer.address) {\n        if (!window.ethereum) throw new Error('No web3 support detected in your browser: if you created this account through MetaMask, please install it.')\n        // NOTE: for metamask, use `const provider = new ethers.providers.Web3Provider(window.ethereum)`\n        // 'any' is explained here: https://github.com/ethers-io/ethers.js/issues/1107\n        const provider = new ethers.providers.Web3Provider(window.ethereum, 'any')\n        return provider.getSigner(signer.address)\n    } else if (signer.one) {\n        // @TODO quickAccounts\n    } else {\n        throw new Error('unknown signer type')\n    }\n}\n\nfunction getInitialDerivedKeyInfo (signerExtra) {\n    return {\n        hdKey: HDNode.fromExtendedKey(signerExtra.info.hdKey.xpub),\n        derivationPath: signerExtra.info.derivationPath,\n        baseDerivationPath: signerExtra.info.baseDerivationPath\n    }\n}","const ADDED_GAS_TOKEN = 24000\nconst ADDED_GAS_NATIVE = 13000\n\nexport function isTokenEligible (token, speed, estimation) {\n  const min = token.isStable ? estimation.feeInUSD[speed] : estimation.feeInNative[speed]\n  return parseInt(token.balance) / Math.pow(10, token.decimals) > min\n}\n\n// can't think of a less funny name for that\nexport function getFeePaymentConsequences (token, estimation) {\n  // Relayerless mode\n  if (!estimation.feeInUSD) return { multiplier: 1, addedGas: 0 }\n  // Relayer mode\n  const addedGas = !token.address || token.address === '0x0000000000000000000000000000000000000000'\n    ? ADDED_GAS_NATIVE\n    : ADDED_GAS_TOKEN\n  return {\n    multiplier: (estimation.gasLimit + addedGas) / estimation.gasLimit,\n    addedGas\n  }\n}\n\nexport function mapTxnErrMsg(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Swap expired'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Swap will suffer slippage higher than your requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'Your signer address is no longer authorized.'\n  return msg\n}\n\nexport function getErrHint(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Try performing the swap again'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Try performing the swap again or increase your slippage requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'If you set a new signer for this account, try re-adding the account.'\n  return 'Sending this transaction batch will result in an error.'\n}","import { AiOutlineWarning } from 'react-icons/ai'\nimport { FiHelpCircle } from 'react-icons/fi'\nimport { Loading } from '../common'\nimport { isTokenEligible, getFeePaymentConsequences, mapTxnErrMsg, getErrHint } from './helpers'\n\nconst SPEEDS = ['slow', 'medium', 'fast', 'ape']\n\nexport function FeeSelector ({ disabled, signer, estimation, network, setEstimation, feeSpeed, setFeeSpeed }) {\n    if (!estimation) return (<Loading/>)\n  \n    const insufficientFee = estimation && estimation.feeInUSD\n      && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation)\n    const willFail = (estimation && !estimation.success) || insufficientFee\n    if (willFail) return insufficientFee ?\n        (<h3 className='error'>Insufficient balance for the fee. Accepted tokens: {(estimation.remainingFeeTokenBalances || []).map(x => x.symbol).join(', ')}</h3>)\n        : (<FailingTxn\n            message={<>The current transaction batch cannot be sent because it will fail: {mapTxnErrMsg(estimation.message)}</>}\n            tooltip={getErrHint(estimation.message)}\n        />)\n  \n    if (!estimation.feeInNative) return (<></>)\n    if (estimation && !estimation.feeInUSD && estimation.gasLimit < 40000) {\n      return (<div>\n        <b>WARNING:</b> Fee estimation unavailable when you're doing your first account transaction and you are not connected to a relayer. You will pay the fee from <b>{signer.address}</b>, make sure you have {network.nativeAssetSymbol} there.\n      </div>)\n    }\n  \n    const { nativeAssetSymbol } = network\n    const tokens = estimation.remainingFeeTokenBalances || ({ symbol: nativeAssetSymbol, decimals: 18 })\n    const onFeeCurrencyChange = e => {\n      const token = tokens.find(({ symbol }) => symbol === e.target.value)\n      setEstimation({ ...estimation, selectedFeeToken: token })\n    }\n    const feeCurrencySelect = estimation.feeInUSD ? (<>\n      <span style={{ marginTop: '1em' }}>Fee currency</span>\n      <select disabled={disabled} defaultValue={estimation.selectedFeeToken.symbol} onChange={onFeeCurrencyChange}>\n        {tokens.map(token => \n          (<option\n            disabled={!isTokenEligible(token, feeSpeed, estimation)}\n            key={token.symbol}>\n              {token.symbol}\n            </option>\n          )\n        )}\n      </select>\n    </>) : (<></>)\n  \n    const { isStable } = estimation.selectedFeeToken\n    const { multiplier } = getFeePaymentConsequences(estimation.selectedFeeToken, estimation)\n    const feeAmountSelectors = SPEEDS.map(speed => (\n      <div \n        key={speed}\n        className={`feeSquare${feeSpeed === speed ? ' selected' : ''}${disabled ? ' disabled' : ''}`}\n        onClick={() => !disabled && setFeeSpeed(speed)}\n      >\n        <div className='speed'>{speed}</div>\n        <div className='feeEstimation'>\n          {isStable\n            ? '$'+(estimation.feeInUSD[speed] * multiplier)\n            : (\n              nativeAssetSymbol === 'ETH' ?\n                ' '+(estimation.feeInNative[speed] * multiplier)\n                : (estimation.feeInNative[speed] * multiplier)+' '+nativeAssetSymbol\n            )\n          }\n        </div>\n      </div>\n    ))\n  \n    return (<>\n      {feeCurrencySelect}\n      <div className='feeAmountSelectors'>\n        {feeAmountSelectors}\n      </div>\n      {!estimation.feeInUSD ?\n        (<span><b>WARNING:</b> Paying fees in tokens other than {nativeAssetSymbol} is unavailable because you are not connected to a relayer. You will pay the fee from <b>{signer.address}</b>.</span>)\n        : (<></>)}\n    </>)\n}\n\nexport function FailingTxn ({ message, tooltip = '' }) {\n    return (<div className='failingTxn'>\n        <AiOutlineWarning></AiOutlineWarning>\n        <h3 className='error'>{message}</h3>\n        <FiHelpCircle title={tooltip}></FiHelpCircle>\n    </div>)\n}","import { useState, useRef } from 'react'\nimport { Loading } from '../common'\nimport { isTokenEligible } from './helpers'\n\nexport default function Actions({ estimation, feeSpeed, approveTxn, rejectTxn, signingStatus }) {\n  const [quickAccCredentials, setQuickAccCredentials] = useState({ code: '', passphrase: '' })\n  const form = useRef(null)\n\n  const rejectButton = (\n    <button type='button' className='rejectTxn' onClick={rejectTxn}>Reject</button>\n  )\n  const insufficientFee = estimation && estimation.feeInUSD\n    && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation)\n  const willFail = (estimation && !estimation.success) || insufficientFee\n  if (willFail) {\n    return (<div className='buttons'>\n      {rejectButton}\n    </div>)\n  }\n\n  const signButtonLabel = signingStatus && signingStatus.inProgress ?\n    (<><Loading/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Signing...</>)\n    : (<>Sign and send</>)\n\n  if (signingStatus && signingStatus.quickAcc) {\n    return (<>\n      <div>\n        {signingStatus.confCodeRequired === 'otp' ? (<b>Please enter your OTP code and your passphrase.</b>) : (<></>)}\n        {signingStatus.confCodeRequired === 'email' ? (<b>A confirmation code was sent to your email, please enter it along with your passphrase.</b>) : (<></>)}\n      </div>\n      <input type='password' required minLength={8} placeholder='Passphrase' value={quickAccCredentials.passphrase} onChange={e => setQuickAccCredentials({ ...quickAccCredentials, passphrase: e.target.value })}></input>\n      <form ref={form} className='quickAccSigningForm' onSubmit={e => { e.preventDefault() }}>\n        {/* Changing the autoComplete prop to a random string seems to disable it more often */}\n        <input\n          type='text' pattern='[0-9]+'\n          title='Confirmation code should be 6 digits'\n          autoComplete='nope'\n          required minLength={6} maxLength={6}\n          placeholder='Confirmation code'\n          value={quickAccCredentials.code}\n          onChange={e => setQuickAccCredentials({ ...quickAccCredentials, code: e.target.value })}\n        ></input>\n        {rejectButton}\n        <button className='approveTxn'\n          onClick={() => {\n            if (!form.current.checkValidity()) return\n            approveTxn({ quickAccCredentials })\n          }}\n        >\n          {signButtonLabel}\n        </button>\n      </form>\n    </>)\n  }\n\n  return (<div className='buttons'>\n      {rejectButton}\n      <button className='approveTxn' disabled={!estimation || signingStatus} onClick={approveTxn}>\n        {signButtonLabel}\n      </button>\n  </div>)\n}\n","import { Interface, hexlify } from 'ethers/lib/utils'\nconst IdentityInterface = new Interface(require('adex-protocol-eth/abi/Identity5.2'))\nconst FactoryInterface = new Interface(require('adex-protocol-eth/abi/IdentityFactory5.2'))\n\nexport async function sendNoRelayer ({ finalBundle, account, network, wallet, estimation, feeSpeed, provider, nativeAssetSymbol }) {\n    const { signer } = finalBundle\n    // @TODO: in case we need deploying, run using deployAndCall pipeline with signed msgs\n    // @TODO: quickAccManager\n    if (signer.quickAccManager) throw new Error('quickAccManager not supported in relayerless mode yet')\n    // currently disabled quickAccManager cause 1) we don't have a means of getting the second sig 2) we still have to sign txes so it's inconvenient\n    // if (signer.quickAccManager) await finalBundle.sign(wallet)\n    //const [to, data] = signer.quickAccManager ? [signer.quickAccManager, QuickAccManagerInterface.encodeFunctionData('send', [finalBundle.identity, [signer.timelock, signer.one, signer.two], [false, finalBundle.signature, '0x']])] :\n  \n    // NOTE: just adding values to gasLimit is bad because 1) they're hardcoded estimates\n    // and 2) the fee displayed in the UI does not reflect that\n    const isDeployed = await provider.getCode(finalBundle.identity).then(code => code !== '0x')\n\n    let gasLimit\n    let to, data\n    if (isDeployed) {\n      gasLimit = estimation.gasLimit + 20000\n      to = finalBundle.identity\n      data = IdentityInterface.encodeFunctionData('executeBySender', [finalBundle.txns])\n    } else {\n      await finalBundle.getNonce(provider)\n      // just some hardcoded value to make the signing pass\n      finalBundle.gasLimit = 400000\n      await finalBundle.sign(wallet)\n      to = account.identityFactoryAddr\n      data = FactoryInterface.encodeFunctionData('deployAndExecute', [account.bytecode, account.salt, finalBundle.txns, finalBundle.signature])\n      gasLimit = (await provider.estimateGas({ to, data, from: signer.address })).toNumber() + 20000\n    }\n  \n    const txn = {\n      from: signer.address,\n      to, data,\n      gas: hexlify(gasLimit),\n      gasPrice: hexlify(Math.floor(estimation.feeInNative[feeSpeed] / estimation.gasLimit * 1e18)),\n      nonce: hexlify(await provider.getTransactionCount(signer.address))\n    }\n    try {\n      let txId\n      if (!wallet.sendTransaction) {\n        // HW wallets which only sign\n        const signed = await wallet.signTransaction(txn)\n        txId = (await provider.sendTransaction(signed)).hash\n      } else {\n        // web3 injectors which can't sign, but can sign+send\n        // they also don't like the gas arg they fully control the chain ID\n        const { chainId } = await wallet.provider.getNetwork()\n        if (network.chainId !== chainId) throw new Error(`Connected to the wrong network: please switch to ${network.name}`)\n        txId = (await wallet.sendTransaction({ from: txn.from, to: txn.to, data: txn.data, gasPrice: txn.gasPrice, nonce: txn.nonce })).hash\n      }\n      return { success: true, txId }\n    } catch(e) {\n      if (e.code === 'INSUFFICIENT_FUNDS') throw new Error(`Insufficient gas fees: you need to have ${nativeAssetSymbol} on ${signer.address}`)\n      throw e\n    }\n  }","//import { GrInspect } from 'react-icons/gr'\n// GiObservatory is also interesting\nimport { GiTakeMyMoney, GiSpectacles } from 'react-icons/gi'\nimport { FaSignature, FaChevronLeft } from 'react-icons/fa'\nimport { MdOutlineAccountCircle } from 'react-icons/md'\nimport './SendTransaction.css'\nimport { useEffect, useState, useMemo } from 'react'\nimport fetch from 'node-fetch'\nimport { Bundle } from 'adex-protocol-eth/js'\nimport { getDefaultProvider, Wallet } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport * as blockies from 'blockies-ts';\nimport { useToasts } from '../../hooks/toasts'\nimport { getWallet } from '../../lib/getWallet'\nimport accountPresets from '../../consts/accountPresets'\nimport { FeeSelector, FailingTxn } from './FeeSelector'\nimport Actions from './Actions'\nimport TxnPreview from '../common/TxnPreview/TxnPreview'\nimport { sendNoRelayer } from './noRelayer'\nimport { isTokenEligible, getFeePaymentConsequences } from './helpers'\nimport { fetchPost } from '../../lib/fetch'\n\nconst ERC20 = new Interface(require('adex-protocol-eth/abi/ERC20'))\n\nconst DEFAULT_SPEED = 'fast'\nconst REESTIMATE_INTERVAL = 15000\n\nfunction toBundleTxn({ to, value, data }) {\n  return [to, value || '0x0', data || '0x']\n}\n\nfunction makeBundle(account, networkId, requests) {\n  const bundle = new Bundle({\n    network: networkId,\n    identity: account.id,\n    txns: requests.map(({ txn }) => toBundleTxn(txn)),\n    signer: account.signer\n  })\n  bundle.requestIds = requests.map(x => x.id)\n  return bundle\n}\n\nexport default function SendTransaction({ relayerURL, accounts, network, selectedAcc, requests, resolveMany, replacementBundle, onDismiss }) {\n  const account = accounts.find(x => x.id === selectedAcc)\n\n  // Also filtered in App.js, but better safe than sorry here\n  const eligibleRequests = useMemo(() => requests\n    .filter(({ type, chainId, account, txn }) =>\n      type === 'eth_sendTransaction'\n      && chainId === network.chainId\n      && account === selectedAcc\n      && txn && (!txn.from || txn.from.toLowerCase() === selectedAcc.toLowerCase())\n    // we only need to update on change of IDs\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    ), [requests.map(x => x.id).join(','), network.chainId, selectedAcc])\n  const bundle = useMemo(\n    () => replacementBundle || makeBundle(account, network.id, eligibleRequests),\n    [replacementBundle, network.id, account, eligibleRequests]\n  )\n\n  if (!account || !eligibleRequests.length) return (<div id='sendTransaction'>\n      <h3 className='error'>No account or no requests: should never happen.</h3>\n  </div>)\n  return (<SendTransactionWithBundle\n      relayerURL={relayerURL}\n      bundle={bundle}\n      network={network}\n      account={account}\n      resolveMany={resolveMany}\n      onDismiss={onDismiss}\n  />)\n}\n\nfunction SendTransactionWithBundle ({ bundle, network, account, resolveMany, relayerURL, replacementBundle, onDismiss }) {\n  const [estimation, setEstimation] = useState(null)\n  const [signingStatus, setSigningStatus] = useState(false)\n  const [feeSpeed, setFeeSpeed] = useState(DEFAULT_SPEED)\n  const { addToast } = useToasts()\n  useEffect(() => {\n    if (!bundle.txns.length) return\n    setEstimation(null)\n  }, [bundle, setEstimation])\n  useEffect(() => {    // eslint-disable-next-line react-hooks/exhaustive-deps\n    if (!bundle.txns.length) return\n\n    let unmounted = false\n\n    // get latest estimation\n    const reestimate = () => (relayerURL\n      ? bundle.estimate({ relayerURL, fetch })\n      : bundle.estimateNoRelayer({ provider: getDefaultProvider(network.rpc) })\n    )\n      .then(estimation => {\n        if (unmounted) return\n        estimation.selectedFeeToken = { symbol: network.nativeAssetSymbol }\n        if (estimation.remainingFeeTokenBalances) {\n          const eligibleToken = estimation.remainingFeeTokenBalances\n            .find(token => isTokenEligible(token, feeSpeed, estimation))\n          // If there's no eligibleToken, set it to the first one cause it looks more user friendly (it's the preferred one, usually a stablecoin)\n          estimation.selectedFeeToken = eligibleToken || estimation.remainingFeeTokenBalances[0]\n        }\n        setEstimation(estimation)\n      })\n      .catch(e => {\n        if (unmounted) return\n        console.log('estimation error', e)\n        addToast(`Estimation error: ${e.message || e}`, { error: true })\n      })\n\n    reestimate()\n    const intvl = setInterval(reestimate, REESTIMATE_INTERVAL)\n\n    return () => {\n      unmounted = true\n      clearInterval(intvl)\n    }\n  }, [bundle, setEstimation, feeSpeed, addToast, network, relayerURL])\n\n\n  const { nativeAssetSymbol } = network\n\n  const getFinalBundle = () => {\n    if (!relayerURL) return new Bundle({\n      ...bundle,\n      gasLimit: estimation.gasLimit\n      // set nonce here when we implement \"replace current pending transaction\"\n    })\n\n    const feeToken = estimation.selectedFeeToken\n    const { addedGas, multiplier } = getFeePaymentConsequences(feeToken, estimation)\n    const toHexAmount = amnt => '0x'+Math.round(amnt).toString(16)\n    const feeTxn = feeToken.symbol === nativeAssetSymbol \n      ? [accountPresets.feeCollector, toHexAmount(estimation.feeInNative[feeSpeed]*multiplier*1e18), '0x']\n      : [feeToken.address, '0x0', ERC20.encodeFunctionData('transfer', [\n        accountPresets.feeCollector,\n        toHexAmount(\n          (feeToken.isStable ? estimation.feeInUSD[feeSpeed] : estimation.feeInNative[feeSpeed])\n          * multiplier\n          * Math.pow(10, feeToken.decimals)\n        )\n    ])]\n    return new Bundle({\n      ...bundle,\n      txns: [...bundle.txns, feeTxn],\n      gasLimit: estimation.gasLimit + addedGas\n    })\n  }\n\n  const approveTxnImpl = async () => {\n    if (!estimation) throw new Error('no estimation: should never happen')\n\n    const finalBundle = getFinalBundle()\n    const provider = getDefaultProvider(network.rpc)\n    const signer = finalBundle.signer\n\n    const wallet = getWallet({\n      signer,\n      signerExtra: account.signerExtra,\n      chainId: network.chainId\n    })\n    if (relayerURL) {\n      if (typeof finalBundle.nonce !== 'number') await finalBundle.getNonce(provider)\n      await finalBundle.sign(wallet)\n      return await finalBundle.submit({ relayerURL, fetch })\n    } else {\n      return await sendNoRelayer({\n        finalBundle, account, network, wallet, estimation, feeSpeed, provider, nativeAssetSymbol\n      })\n    }\n  }\n\n  const approveTxnImplQuickAcc = async ({ quickAccCredentials }) => {\n    if (!estimation) throw new Error('no estimation: should never happen')\n    if (!relayerURL) throw new Error('Email/passphrase account signing without the relayer is not supported yet')\n\n    const finalBundle = (signingStatus && signingStatus.finalBundle) || getFinalBundle()\n    const signer = finalBundle.signer\n\n    if (typeof finalBundle.nonce !== 'number') {\n      await finalBundle.getNonce(getDefaultProvider(network.rpc))\n    }\n\n    const { signature, success, message, confCodeRequired } = await fetchPost(\n      `${relayerURL}/second-key/${bundle.identity}/${network.id}/sign`, {\n        signer, txns: finalBundle.txns, nonce: finalBundle.nonce, gasLimit: finalBundle.gasLimit,\n        code: quickAccCredentials && quickAccCredentials.code\n      }\n    )\n    if (!success) {\n      if (!message) throw new Error(`Secondary key: no success but no error message`)\n      if (message.includes('invalid confirmation code')) {\n        addToast('Unable to sign: wrong confirmation code', { error: true })\n        return\n      }\n      throw new Error(`Secondary key error: ${message}`)\n    }\n    if (confCodeRequired) {\n      setSigningStatus({ quickAcc: true, finalBundle, confCodeRequired })\n    } else {\n      if (!signature) throw new Error(`QuickAcc internal error: there should be a signature`)\n      if (!account.primaryKeyBackup) throw new Error(`No key backup found: perhaps you need to import the account via JSON?`)\n      setSigningStatus({ quickAcc: true, inProgress: true })\n      const pwd = quickAccCredentials.passphrase || alert('Enter passphrase')\n      const wallet = await Wallet.fromEncryptedJson(JSON.parse(account.primaryKeyBackup), pwd)\n      await finalBundle.sign(wallet)\n      finalBundle.signatureTwo = signature\n      return await finalBundle.submit({ relayerURL, fetch })\n    }\n  }\n\n  const approveTxn = ({ quickAccCredentials }) => {\n    if (signingStatus && signingStatus.inProgress) return\n    setSigningStatus(signingStatus || { inProgress: true })\n\n    const requestIds = bundle.requestIds\n    const blockExplorerUrl = network.explorerUrl\n    const approveTxnPromise = bundle.signer.quickAccManager ?\n      approveTxnImplQuickAcc({ quickAccCredentials })\n      : approveTxnImpl()\n    approveTxnPromise.then(bundleResult => {\n      // special case for approveTxnImplQuickAcc\n      if (!bundleResult) return\n\n      // be careful not to call this after onDimiss, cause it might cause state to be changed post-unmount\n      setSigningStatus(null)\n\n      // Inform everything that's waiting for the results (eg WalletConnect)\n      const skipResolve = !bundleResult.success && bundleResult.message && bundleResult.message.match(/underpriced/i)\n      if (!skipResolve && requestIds) resolveMany(requestIds, { success: bundleResult.success, result: bundleResult.txId, message: bundleResult.message })\n\n      if (bundleResult.success) {\n        addToast((\n          <span>Transaction signed and sent successfully!\n            &nbsp;Click to view on block explorer.\n          </span>), { url: blockExplorerUrl+'/tx/'+bundleResult.txId })\n        onDismiss()\n      } else addToast(`Transaction error: ${bundleResult.message || 'unspecified error'}`, { error: true })\n    })\n    .catch(e => {\n      setSigningStatus(null)\n      console.error(e)\n      if (e && e.message.includes('must provide an Ethereum address')) {\n        addToast(`Signing error: not connected with the correct address. Make sure you're connected with ${bundle.signer.address}.`, { error: true })\n      } else if (e && e.message.includes('0x6b0c')) {\n        // not sure if that's actually the case with this hellish error, but after unlocking the device it no longer appeared\n        // however, it stopped appearing after that even if the device is locked, so I'm not sure it's related...\n        addToast(`Ledger: unknown error (0x6b0c): is your Ledger unlocked and in the Ethereum application?`, { error: true })\n      } else {\n        console.log(e.message)\n        addToast(`Signing error: ${e.message || e}`, { error: true })\n      }\n    })\n  }\n\n  // Not applicable when .requestIds is not defined (replacement bundle)\n  const rejectTxn = bundle.requestIds && (() => {\n    resolveMany(bundle.requestIds, { message: 'user rejected' })\n  })\n\n  return (<div id='sendTransaction'>\n      <div className='dismiss' onClick={onDismiss}>\n        <FaChevronLeft size={35}/><span>back</span>\n      </div>\n      <h2>Pending transactions: {bundle.txns.length}</h2>\n      <div className='container'>\n        <div id='topPanel' className='panel'>\n          <div className='title'>\n            <MdOutlineAccountCircle/>\n            Signing with account:\n          </div>\n          <div className=\"content\">\n            <div className='account'>\n              <img className='icon' src={blockies.create({ seed: account.id }).toDataURL()} alt='Account Icon'/>\n              { account.id }\n            </div>\n            on\n            <div className='network'>\n              <img className='icon' src={network.icon} alt='Network Icon'/>\n              { network.name }\n            </div>\n          </div>\n        </div>\n        <div id='panelHolder'>\n          <div className='panel'>\n              <div className='heading'>\n                      <div className='title'>\n                          <GiSpectacles size={35}/>\n                          Transaction summary\n                      </div>\n                      <div className='listOfTransactions'>\n                          {bundle.txns.map((txn, i) => {\n                            const isFirstFailing = estimation && !estimation.success && estimation.firstFailing === i\n                            return (<TxnPreview\n                              key={txn.join(':')}\n                              onDismiss={bundle.requestIds && (() => resolveMany([bundle.requestIds[i]], { message: 'rejected' }))}\n                              txn={txn} network={bundle.network} account={bundle.identity}\n                              isFirstFailing={isFirstFailing}/>\n                            )\n                          })}\n                      </div>\n                      <div className='batchingNote'>\n                          <b>DEGEN TIP:</b> You can sign multiple transactions at once. Add more transactions to this batch by interacting with a connected dApp right now.\n                      </div>\n              </div>\n          </div>\n          <div className='secondaryPanel'>\n              <div className='panel feePanel'>\n                  <div className='heading'>\n                          <div className='title'>\n                              <GiTakeMyMoney size={35}/>\n                              Fee\n                          </div>\n                          <FeeSelector\n                            disabled={signingStatus && signingStatus.finalBundle && !(estimation && !estimation.success)}\n                            signer={bundle.signer}\n                            estimation={estimation}\n                            setEstimation={setEstimation}\n                            network={network}\n                            feeSpeed={feeSpeed}\n                            setFeeSpeed={setFeeSpeed}\n                          ></FeeSelector>\n                  </div>\n              </div>\n              <div className='panel actions'>\n                  <div className='heading'>\n                      <div className='title'>\n                          <FaSignature size={35}/>\n                          Sign\n                      </div>\n                  </div>\n                  {(bundle.signer.quickAccManager && !relayerURL) ? (\n                    <FailingTxn message='Signing transactions with an email/passphrase account without being connected to the relayer is unsupported.'></FailingTxn>\n                  ) : (\n                      <Actions\n                        estimation={estimation}\n                        approveTxn={approveTxn}\n                        rejectTxn={rejectTxn}\n                        signingStatus={signingStatus}\n                        feeSpeed={feeSpeed}\n                      />\n                  )}\n              </div>\n          </div>\n        </div>\n      </div>\n  </div>)\n}","import {\n  getSDKVersion,\n  MessageFormatter,\n  Methods\n} from '@gnosis.pm/safe-apps-sdk'\n\nfunction GnosisConnector(_iframeRef, _app) {\n  this.iframeRef = _iframeRef\n  this.app = _app\n  this.handlers = {}\n\n  this.on = (method, handler) => {\n    this.handlers[method] = handler\n  }\n\n  this.isValidMessage = (msg) => {\n    // @ts-expect-error .parent doesn't exist on some possible types\n    if (!msg?.source?.parent) {\n      return false\n    }\n    const sentFromIframe = msg.source.parent === window.parent\n    const knownMethod = Object.values(Methods).includes(msg.data.method)\n\n    return sentFromIframe && knownMethod\n  }\n\n  this.canHandleMessage = (msg) => {\n    return Boolean(this.handlers[msg.data.method])\n  }\n\n  this.send = (data, requestId, error) => {\n    const sdkVersion = getSDKVersion()\n    const msg = error\n      ? MessageFormatter.makeErrorResponse(requestId, error, sdkVersion)\n      : MessageFormatter.makeResponse(requestId, data, sdkVersion)\n\n    if (this.iframeRef) {\n      //console.log(\"Posting to child\")\n      //console.log(msg)\n      this.iframeRef.current?.contentWindow?.postMessage(msg, '*')\n    } else {\n      console.log('Iframe not referenced ')\n    }\n  }\n\n  this.handleIncomingMessage = async (msg) => {\n\n    const validMessage = this.isValidMessage(msg)\n    const hasHandler = this.canHandleMessage(msg)\n\n    if (validMessage && hasHandler) {\n      const handler = this.handlers[msg.data.method]\n      try {\n        // @ts-expect-error Handler existence is checked in this.canHandleMessage\n        const response = await handler(msg)\n\n        // If response is not returned, it means the response will be send somewhere else\n        if (typeof response !== 'undefined') {\n          this.send(response, msg.data.id)\n        }\n      } catch (err) {\n        console.error(\"GS : \" + err);\n        this.send(err.message, msg.data.id, true)\n        /*trackError(Errors._901, err.message, {\n          contexts: {\n            safeApp: this.app,\n            request: msg.data,\n          },\n        })*/\n      }\n    }\n  }\n\n  this.clear = () => {\n    //console.log('removeListener...')\n    window.removeEventListener('message', this.handleIncomingMessage)\n  }\n\n  console.log('new appCommunicator')\n  window.addEventListener('message', this.handleIncomingMessage)\n}\n\nexport {GnosisConnector}\n","import { useEffect } from 'react'\nimport { getTransactionSummary } from '../lib/humanReadableTransactions'\n\nconst REQUEST_TITLE = 'Ambire Wallet: new transaction request'\nlet currentNotifs = []\n\nexport default function useNotifications (requests) {\n    useEffect(() => {\n        if (window.Notification && Notification.permission !== 'denied') {\n            Notification.requestPermission(() => {\n                // @TODO: perhaps warn the user in some way\n            })\n        }\n    }, [])\n\n    requests.forEach(request => {\n        if (currentNotifs.find(n => n.id === request.id)) return\n        // @TODO: other request types, eg signature\n        if (!request.txn) return\n        // @TODO network name\n        const notification = new Notification(REQUEST_TITLE, {\n            requireInteraction: true,\n            body: getTransactionSummary([request.txn.to, request.txn.value, request.txn.data], request.chainId, request.account),\n            icon: 'public/logo192.png',\n        })\n        //notification.onclose = \n        notification.onclick = () => {\n            window.focus()\n            notification.close()\n        }\n        currentNotifs.push({ id: request.id, notification })\n    })\n\n    currentNotifs = currentNotifs.filter(({ id, notification }) => {\n        if (!requests.find(r => r.id === id)) {\n            notification.close()\n            return false\n        }\n        return true\n    })\n  }\n  ","import './App.scss'\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from 'react-router-dom'\nimport { useState, useEffect, useMemo } from 'react'\nimport EmailLogin from './components/EmailLogin/EmailLogin'\nimport AddAccount from './components/AddAccount/AddAccount'\nimport Wallet from './components/Wallet/Wallet'\nimport ToastProvider from './components/ToastProvider/ToastProvider'\nimport SendTransaction from './components/SendTransaction/SendTransaction'\nimport useAccounts from './hooks/accounts'\nimport useNetwork from './hooks/network'\nimport useWalletConnect from './hooks/walletconnect'\nimport useGnosisSafe from './hooks/useGnosisSafe'\nimport useNotifications from './hooks/notifications'\nimport { usePortfolio } from './hooks'\n\nconst relayerURL = process.env.hasOwnProperty('REACT_APP_RELAYER_URL') ? process.env.REACT_APP_RELAYER_URL : 'http://localhost:1934'\n\nfunction AppInner () {\n  const { accounts, selectedAcc, onSelectAcc, onAddAccount } = useAccounts()\n  const { network, setNetwork, allNetworks } = useNetwork()\n  const { connections, connect, disconnect, requests: wcRequests, resolveMany: wcResolveMany } = useWalletConnect({\n    account: selectedAcc,\n    chainId: network.chainId\n  })\n  const { requests: gnosisRequests, resolveMany: gnosisResolveMany, connect: gnosisConnect, disconnect: gnosisDisconnect } = useGnosisSafe({\n\t  selectedAccount: selectedAcc,\n\t  network: network,\n    verbose: 1\n\t}, [selectedAcc, network])\n\n  const portfolio = usePortfolio({\n    currentNetwork: network.id,\n    account: selectedAcc\n  })\n\n  // Internal requests: eg from the Transfer page, Security page, etc. - requests originating in the wallet UI itself\n  // unlike WalletConnect or SafeSDK requests, those do not need to be persisted\n  const [internalRequests, setInternalRequests] = useState([])\n  const addRequest = req => setInternalRequests(reqs => [...reqs, req])\n\n  // Merge all requests\n  const requests = useMemo(() => [...internalRequests, ...wcRequests, ...gnosisRequests], [wcRequests, internalRequests, gnosisRequests])\n  const resolveMany = (ids, resolution) => {\n    wcResolveMany(ids, resolution)\n    gnosisResolveMany(ids, resolution)\n    setInternalRequests(reqs => reqs.filter(x => !ids.includes(x.id)))\n  }\n\n  // Show notifications for all requests\n  useNotifications(requests)\n\n  // Navigate to the send transaction dialog if we have a new txn\n  const eligibleRequests = useMemo(() => requests\n    .filter(({ type, chainId, account }) =>\n      type === 'eth_sendTransaction'\n      && chainId === network.chainId\n      && account === selectedAcc\n    ), [requests, network.chainId, selectedAcc])\n  const [sendTxnsShowing, setSendTxnsShowing] = useState(() => !!eligibleRequests.length)\n  useEffect(\n    () => setSendTxnsShowing(!!eligibleRequests.length),\n    [eligibleRequests.length]\n  )\n  const dismissSendTxns = () => setSendTxnsShowing(false)\n\n  return (<>\n    {sendTxnsShowing ? (\n      <SendTransaction accounts={accounts} selectedAcc={selectedAcc} network={network} requests={eligibleRequests} resolveMany={resolveMany} relayerURL={relayerURL} onDismiss={dismissSendTxns}>\n      </SendTransaction>\n      ) : (<></>)\n    }\n    <Switch>\n      <Route path=\"/add-account\">\n        <AddAccount relayerURL={relayerURL} onAddAccount={onAddAccount}></AddAccount>\n      </Route>\n\n      <Route path=\"/email-login\">\n        <EmailLogin relayerURL={relayerURL} onAddAccount={onAddAccount}></EmailLogin>\n      </Route>\n\n      <Route path=\"/wallet\">\n        <Wallet\n          match={{ url: \"/wallet\" }}\n          accounts={accounts}\n          selectedAcc={selectedAcc}\n          portfolio={portfolio}\n          onSelectAcc={onSelectAcc}\n          allNetworks={allNetworks}\n          network={network}\n          setNetwork={setNetwork}\n          addRequest={addRequest}\n          connections={connections}\n          // needed by the top bar to disconnect/connect dapps\n          connect={connect}\n          disconnect={disconnect}\n          // needed by the gnosis plugins\n          gnosisConnect={gnosisConnect}\n          gnosisDisconnect={gnosisDisconnect}\n          // required for the security and transactions pages\n          relayerURL={relayerURL}\n          // required by the transactions page\n          eligibleRequests={eligibleRequests}\n          showSendTxns={() => setSendTxnsShowing(true)}\n        >\n        </Wallet>\n      </Route>\n\n      <Route path=\"/\">\n        <Redirect to={selectedAcc ? \"/wallet/dashboard\" : \"/add-account\" }/>\n      </Route>\n\n    </Switch>\n  </>)\n}\n\n// handles all the providers so that we can use provider hooks inside of AppInner\nexport default function App() {\n  return (\n    <ToastProvider>\n      <Router>\n        <AppInner/>\n      </Router>\n    </ToastProvider>\n  )\n}\n","import { useState, useCallback } from 'react'\nimport { useToasts } from '../hooks/toasts'\nimport { useHistory } from 'react-router-dom'\n\nexport default function useAccounts () {\n    const { addToast } = useToasts()\n    const history = useHistory()\n\n    const [accounts, setAccounts] = useState(() => {\n      try {\n        const accs = JSON.parse(localStorage.accounts || '[]')\n        if (!Array.isArray(accs)) throw new Error('accounts: incorrect format')\n        return accs\n      } catch (e) {\n        console.error('accounts parsing failure', e)\n        return []\n      }\n    })\n    const [selectedAcc, setSelectedAcc] = useState(() => {\n      const initialSelectedAcc = localStorage.selectedAcc\n      if (!initialSelectedAcc || !accounts.find(x => x.id === initialSelectedAcc)) {\n        return accounts[0] ? accounts[0].id : ''\n      }\n      return initialSelectedAcc\n    })\n  \n    const onSelectAcc = selected => {\n      localStorage.selectedAcc = selected\n      setSelectedAcc(selected)\n    }\n    const onAddAccount = useCallback((acc, opts = {}) => {\n      if (!(acc.id && acc.signer)) throw new Error('account: internal err: missing ID or signer')\n\n      const existingIdx = accounts\n        .findIndex(x => x.id.toLowerCase() === acc.id.toLowerCase())\n  \n      if (existingIdx !== -1) addToast('Account already added')\n\n      if (existingIdx === -1) accounts.push(acc)\n      else accounts[existingIdx] = acc\n  \n      // need to make a copy, otherwise no rerender\n      setAccounts([ ...accounts ])\n  \n      localStorage.accounts = JSON.stringify(accounts)\n  \n      if (opts.select) onSelectAcc(acc.id)\n      if (Object.keys(accounts).length) {\n        history.push('/wallet/dashboard')\n      }\n    }, [accounts, addToast, history])\n    return { accounts, selectedAcc, onSelectAcc, onAddAccount }\n  }","import { useState, useCallback } from 'react'\nimport networks from '../consts/networks'\n\nexport default function useNetwork ({ defaultNetwork = 'ethereum' } = {}) {\n    const [networkId, setNetworkId] = useState(() =>\n        networks.find(n => n.id === localStorage.network) ? localStorage.network : defaultNetwork\n    )\n    const setNetwork = useCallback(networkNameOrKey => {\n        const network = networks.find(n => n.id === networkNameOrKey || n.name === networkNameOrKey)\n        if (!network) throw new Error(`no network found: ${networkNameOrKey}`)\n        localStorage.network = network.id\n        setNetworkId(network.id)\n    }, [setNetworkId])\n\n    return {\n        setNetwork,\n        network: networks.find(n => n.id === networkId),\n        allNetworks: networks\n    }\n}","import {useCallback, useEffect, useState, useRef, useMemo} from 'react'\nimport {useToasts} from '../hooks/toasts'\n\nimport {Methods} from '@gnosis.pm/safe-apps-sdk'\nimport {GnosisConnector} from '../lib/GnosisConnector'\nimport {getDefaultProvider} from 'ethers'\n\nconst STORAGE_KEY = 'gnosis_safe_state'\n\nexport default function useGnosisSafe({ selectedAccount, network, verbose = 1 }) {\n  // One connector at a time\n  const connector = useRef(null)\n\n  const uniqueId = useMemo(() => new Date().getTime() + ' ' + network.chainId + ' ' + selectedAccount, [selectedAccount, network])\n\n  const { addToast } = useToasts()\n\n  // This is needed cause of the Gnosis Safe event handlers (listeners)\n  const stateRef = useRef()\n  stateRef.current = {\n    selectedAccount,\n    network\n  }\n\n  const [requests, setRequests] = useState(() => {\n    const json = localStorage[STORAGE_KEY]\n    if (!json) return []\n    try {\n      const parsed = JSON.parse(json)\n      return Array.isArray(parsed) ? parsed : []\n    } catch (e) {\n      console.error(e)\n      return []\n    }\n  })\n\n  const connect = useCallback(connectorOpts => {\n    verbose>1 && console.log(\"GS: creating connector\")\n\n    try {\n      connector.current = new GnosisConnector(\n        connectorOpts.iframeRef,\n        connectorOpts.app,\n        uniqueId\n      )\n    } catch (e) {\n      addToast(`Unable to connect to ${connectorOpts.app.url}: ${e.message}`)\n      return null\n    }\n\n    // reply back to iframe with safe data\n    connector.current.on(Methods.getSafeInfo, () => {\n      return {\n        safeAddress: stateRef.current.selectedAccount,\n        network: stateRef.current.network.id,\n        chainId: stateRef.current.network.chainId,\n        owners: [stateRef.current.selectedAccount],\n        threshold: 1, //Number of confirmations (not used in ambire)\n      }\n    })\n\n    //reply back to iframe with safe data\n\n    // connector.current.on(Methods.getSafeBalances, async (msg) => {\n    //   verbose>0 && console.log(\"DApp requested getSafeBalances\") && console.log(msg)\n\n    //TODO later\n      //await portfolio.updatePortfolio(\"polygon\", selectedAccount, true)//not this because it does NOT return the updated state anyway\n      //console.log(portfolio)\n\n      //struct template\n    /*connector.current.on(Methods.getSafeBalances, () => {\n      return {\n        \"fiatTotal\": \"0.18072\",\n          \"items\": [\n          {\n            \"tokenInfo\": {\n              \"type\": \"NATIVE_TOKEN\",\n              \"address\": \"0x0000000000000000000000000000000000000000\",\n              \"decimals\": 18,\n              \"symbol\": \"MATIC\",\n              \"name\": \"Matic\",\n              \"logoUri\": \"https://safe-transaction-assets.staging.gnosisdev.com/chains/137/currency_logo.png\"\n            },\n            \"balance\": \"100000000000000000\",\n            \"fiatBalance\": \"0.18072\",\n            \"fiatConversion\": \"1.8072\"\n          }\n        ]\n      }\n     })*/\n\n    connector.current.on(Methods.rpcCall, async (msg) => {\n      verbose > 0 && console.log(\"DApp requested rpcCall\", msg)\n\n      if (!msg?.data?.params){\n        throw new Error(\"invalid call object\")\n      }\n      const method = msg.data.params.call//0 == tx, 1 == blockNum\n      const callTx = msg.data.params.params//0 == tx, 1 == blockNum\n\n      const provider = getDefaultProvider(stateRef.current.network.rpc)\n      let result\n      if (method === \"eth_call\") {\n        result = await provider.call(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if(method === \"eth_getBalance\") {\n        result = await provider.getBalance(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if(method === \"eth_blockNumber\") {\n        result = await provider.getBlockNumber().catch(err => {\n          throw err\n        })\n      } else if(method === \"eth_getBlockByNumber\" || method === \"eth_getBlockByHash\") {\n        if(callTx[1]) {\n          result = await provider.getBlockWithTransactions(callTx[0]).catch(err => {\n            throw err\n          })\n        } else {\n          result = await provider.getBlock(callTx[0]).catch(err => {\n            throw err\n          })\n        }\n      } else if(method === \"eth_getTransactionByHash\") {\n        result = await provider.getTransaction(callTx[0]).catch(err => {\n          throw err\n        })\n      } else if(method === \"eth_getCode\") {\n        result = await provider.getCode(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if(method === \"eth_getBlockByNumber\") {\n        result = await provider.getBlock(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if(method === \"eth_getTransactionReceipt\") {\n        result = await provider.getTransactionReceipt(callTx[0]).catch(err => {\n          throw err\n        })\n      } else {\n        throw new Error(\"method not supported \" + method)\n      }\n      return result\n    })\n\n    connector.current.on(Methods.sendTransactions, (msg) => {\n      verbose>0 && console.log(\"DApp requested sendTx\") && console.log(msg)\n\n      const data = msg?.data\n      if (!data) {\n        console.error('GS: no data')\n        return\n      }\n\n      const id = 'gs_' + data.id\n      const txs = data?.params?.txs\n      if (txs?.length) {\n        for (let i in txs) {\n          if (!txs[i].from) txs[i].from = stateRef.current.selectedAccount\n        }\n      } else {\n        console.error('GS: no txs in received payload')\n        return\n      }\n\n      const request = {\n        id,\n        forwardId: msg.data.id,\n        type: 'eth_sendTransaction',\n        txn: txs[0], //if anyone finds a dapp that sends a bundle, please reach me out\n        chainId: stateRef.current.network.chainId,\n        account: stateRef.current.selectedAccount\n      }\n\n      setRequests(prevRequests => prevRequests.find(x => x.id === request.id) ? prevRequests : [...prevRequests, request])\n    })\n\n    connector.current.on(Methods.getTxBySafeTxHash, async (msg) => {\n      const { safeTxHash } = msg.data.params\n      const provider = getDefaultProvider(stateRef.current.network.rpc)\n      try{\n        const res = await provider.getTransaction(safeTxHash)\n        return {\n          gasPrice: res.gasPrice.toString(),\n          gasLimit: res.gasLimit.toString(),\n          value: res.value.toString(),\n          ...res\n        }\n      }catch(e){\n        console.error(\"GS: Err getting transaction \" + safeTxHash);\n        console.log(e);\n        return {};\n      }\n    })\n\n  }, [uniqueId, addToast, verbose])\n\n\n  const disconnect = useCallback(() => {\n    verbose>1 && console.log(\"GS: disconnecting connector\")\n    connector.current?.clear()\n  }, [verbose])\n\n  const resolveMany = (ids, resolution) => {\n    for (let req of requests.filter(x => ids.includes(x.id))) {\n      const replyData = {\n        id: req.forwardId,\n        success: null,\n        txId: null,\n        error: null\n      }\n      if (!resolution) {\n        replyData.error = 'Nothing to resolve'\n        replyData.success = false\n      } else if(!resolution.success) {\n        replyData.error = resolution.message\n        replyData.success = false\n      } else { //onSuccess\n        replyData.success = true\n        replyData.txId = resolution.result\n        replyData.safeTxHash = resolution.result\n      }\n      if (!connector.current) {\n        //soft error handling: sendTransaction has issues\n        //throw new Error(\"gnosis safe connector not set\")\n        console.error(\"gnosis safe connector not set\");\n      }else{\n\t\t  console.log('replyData', replyData)\n        connector.current.send(replyData, req.forwardId, replyData.error)\n      }\n    }\n\n    setRequests(prevRequests => prevRequests.filter(x => !ids.includes(x.id)))\n  }\n\n  // Side effects that will run on every state change/rerender\n  useEffect(() => {\n    localStorage[STORAGE_KEY] = JSON.stringify(requests)\n  }, [requests, selectedAccount, network])\n\n  return {\n    requests,\n    resolveMany,\n    connect,\n    disconnect\n  }\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}