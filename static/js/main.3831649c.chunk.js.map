{"version":3,"sources":["lib/ledgerWebHID.js","lib/fetch.js","components/common/AddressBook/AddressList/AddressList.js","components/common/AddressBook/AddressBook.js","helpers/address.js","components/common/AddressWarning/AddressWarning.js","components/common/Button/Button.js","components/common/Chart/Chart.js","components/common/Checkbox/Checkbox.js","helpers/onClickOutside.js","components/common/DropDown/DropDown.js","components/common/Loading/Loading.js","components/common/Loading/AmbireLoading.js","components/common/Loading/Skeleton.js","components/ToastProvider/ToastProvider.js","hooks/toasts.js","consts/networks.js","config/index.js","hooks/portfolio.js","consts/supportedProtocols.js","lib/isFirefox.js","hooks/walletconnect.js","hooks/relayerData.js","lib/humanizers/UniRouters.js","lib/humanizers/ERC20.js","lib/humanizers/AaveLendingPoolV2.js","lib/humanizers/ERC721.js","lib/humanizers/WETH.js","consts/accountPresets.js","consts/privilegesOptions.js","lib/humanizers/AmbireIdentity.js","lib/humanizers/AmbireFactory.js","lib/humanizers/index.js","lib/humanReadableTransactions.js","hooks/addressBook.js","hooks/attentionGrabber.js","components/ModalProvider/ModalProvider.js","hooks/modals.js","hooks/permissions.js","components/common/Modal/Modal.js","components/common/Segments/Segments.js","components/common/Select/Select.js","components/common/TextInput/TextInput.js","components/common/NumberInput/NumberInput.js","components/common/Toggle/Toggle.js","components/common/ToolTip/ToolTip.js","components/LoginOrSignupForm/LoginOrSignupForm.js","components/EmailLogin/EmailLogin.js","helpers/permissions.js","components/Modals/PermissionsModal/PermissionsModal.js","components/Modals/InputModal/InputModal.js","components/Modals/SelectSignerAccountModal/SelectSignerAccountModal.js","components/AddAccount/AddAccount.js","components/Wallet/Dashboard/Balances/Balances.js","components/Wallet/Dashboard/Protocols/ProtocolsPlaceholder/ProtocolsPlaceholder.js","components/Wallet/Dashboard/Protocols/Protocols.js","components/Wallet/Dashboard/Collectibles/CollectiblesPlaceholder/CollectiblesPlaceholder.js","components/Wallet/Dashboard/Collectibles/Collectibles.js","components/Wallet/Dashboard/Dashboard.js","components/Wallet/TopBar/Accounts/Accounts.js","components/Wallet/TopBar/DApps/DApps.js","components/Wallet/TopBar/TopBar.js","components/Wallet/SideBar/SideBar.js","resources/ramp.svg","resources/paytrie.svg","resources/transak.svg","services/providers.js","helpers/popupHelper.js","components/Wallet/Deposit/Providers/Providers.js","resources/ethereum-logo.png","resources/polygon-logo.svg","components/Wallet/Deposit/Deposit.js","components/Plugins/GnosisSafeApps/GnosisSafeAppIframe.js","components/Wallet/Swap/SushiIframe.js","components/Wallet/Swap/Swap.js","components/Wallet/Transfer/SendPlaceholder/SendPlaceholder.js","components/Wallet/Transfer/Transfer.js","consts/AAVELendingPoolAbi.js","consts/AAVELendingPoolProviders.js","resources/aave.svg","components/Wallet/Earn/Cards/Card/Card.js","components/Wallet/Earn/Cards/AAVECard/defaultTokens.js","components/Wallet/Earn/Cards/AAVECard/AAVECard.js","components/Wallet/Earn/Earn.js","components/Wallet/Security/AddAuthSigner/AddAuthSigner.js","components/Wallet/Security/Security.js","components/common/TxnPreview/TxnPreview.js","components/Wallet/Transactions/Transactions.js","components/Plugins/GnosisSafeApps/GnosisSafeApps.js","consts/ERC721Abi.js","components/Wallet/Collectible/Collectible.js","components/Wallet/Wallet.js","lib/getWallet.js","components/SendTransaction/helpers.js","components/SendTransaction/FeeSelector.js","components/SendTransaction/Actions.js","components/SendTransaction/noRelayer.js","lib/requestToBundleTxn.js","components/SendTransaction/SendTransaction.js","components/SignMessage/SignMessage.js","lib/GnosisConnector.js","hooks/notifications.js","App.js","hooks/accounts.js","hooks/network.js","hooks/useGnosisSafe.js","reportWebVitals.js","index.js"],"names":["ethUtil","require","HDNode","connectedDevices","PARENT_HD_PATH","getTransport","a","TransportWebHID","list","length","opened","request","Error","ledgerGetAddresses","returnData","error","addresses","catch","err","transport","getAccounts","accountsData","close","accounts","map","address","parentKeyDerivationPath","getAddressInternal","then","o","statusCode","message","ledgerResponse","console","log","hdKey","publicKey","Buffer","from","chainCode","mainAddress","addressOfHDKey","initialDerivedKeyInfo","derivationPath","baseDerivationPath","calculateDerivedHDKeyInfos","appEth","AppEth","ledgerTimeout","Promise","resolve","reject","timeoutHandle","setTimeout","race","getAddress","res","clearTimeout","ledgerSignTransaction","txn","chainId","fromAddr","unsignedTxObj","gasLimit","gas","serializedUnsigned","serialize","toLowerCase","signTransaction","substr","rsvResponse","intV","parseInt","v","Math","floor","serializedSigned","r","s","ledgerSignMessage","hash","signerAddress","account","signPersonalMessage","rsvReply","signedMsg","toString","count","derivedKeys","i","fullDerivationPath","path","derive","derivedKey","baseDerivationPathh","push","derivedPublicKey","ethereumAddressUnprefixed","publicToAddress","addHexPrefix","fetch","fetchPost","url","body","headers","method","JSON","stringify","json","fetchGet","response","status","fetchCaught","params","resp","errMsg","AddressList","noAccounts","onSelectAddress","removeAddress","items","filter","isAccount","className","icon","name","onClick","style","backgroundImage","AddressBook","addAddress","newAddress","onClose","useState","setAddress","setName","isOpen","setOpenMenu","openAddAddress","setOpenAddAddress","isAddAddressFormValid","test","onAddAddress","useCallback","onMenuClose","useEffect","title","open","id","type","autoComplete","placeholder","defaultValue","onInput","target","value","disabled","isValidAddress","isKnownTokenOrContract","addressToLowerCase","tokensAddresses","Object","keys","tokens","contractsAddresses","names","includes","AddressWarning","onChange","onAddNewAddress","isKnownAddress","confirmed","setConfirmed","unknownWarning","useMemo","smartContractWarning","label","checked","Button","children","small","iconAfter","red","clear","Chart","data","size","hoveredItem","setHoveredItem","colors","height","width","onMouseEnter","item","sort","b","sortData","startAngle","strokeColor","innerRadius","selectedOffset","legend","toggled","backgroundColor","index","trunc","Checkbox","props","inputElem","required","useOnClickOutside","ref","handler","listener","event","current","contains","document","addEventListener","removeEventListener","DropDown","badge","closeOnClick","onOpen","useRef","transitionRef","isMenuOpen","setMenuOpen","CSSTransition","unmountOnExit","in","timeout","classNames","nodeRef","Loading","AmbireLoading","Skeleton","ToastContext","React","createContext","ToastProvider","toasts","setToasts","removeToast","t","addToast","content","options","toast","createRef","position","sticky","Provider","TransitionGroup","href","rel","useToasts","useContext","networks","rpc","nativeAssetSymbol","explorerUrl","hidden","visibilityChange","ZAPPER_API_KEY","process","suportedProtocols","network","protocols","getBalances","apiKey","protocol","msHidden","webkitHidden","lastOtherProcolsRefresh","isFirefox","navigator","userAgent","noop","noopSessionStorage","setSession","getSession","removeSession","SUPPORTED_METHODS","connectors","useWalletConnect","onCallRequest","stateRef","useReducer","state","action","connections","uri","session","x","requests","find","ids","localStorage","parse","e","dispatch","connect","connectorOpts","connector","WalletConnectCore","cryptoLib","sessionStorage","sessionStart","sessionTimeout","onError","peerMeta","suggestion","bridge","on","payload","Date","now","approveSession","wcUri","notification","rejectRequest","disconnect","killSession","forEach","updateConnections","updateSession","wcConnect","URLSearchParams","window","location","split","slice","join","get","clipboardError","tryReadClipboard","clipboard","readText","startsWith","runInitEffects","resolveMany","resolution","success","approveRequest","result","useRelayerData","isLoading","setLoading","setData","setErr","prevUrl","updateData","resetDataTimer","stripQuery","unloaded","iface","Interface","abis","UniV2Router","recipientText","recipient","txnFrom","deadlineText","deadlineSecs","mined","minute","diff","uniV2Mapping","getSighash","opts","parseTransaction","args","amountIn","amountOutMin","to","deadline","outputAsset","token","amountOut","amountInMax","nativeToken","tokenA","tokenB","amountADesired","amountBDesired","amountTokenDesired","amountAMin","amountBMin","amountTokenMin","amountETHMin","ifaceV3","UniV3Router","parsePath","pathBytes","uniV3Mapping","humanizer","flat","tokenIn","tokenOut","amountOutMinimum","amountInMaximum","amountMin","mapping","ERC20","ERC20Mapping","approvedAddress","amount","getName","tokenName","eq","constants","MaxUint256","AaveLendingPoolV2","onBehalfText","onBehalf","AaveMapping","asset","ERC721","fromText","ERC721Mapping","tokenId","WETH","WETHMapping","accountPresets","salt","identityFactoryAddr","baseIdentityAddr","quickAccManager","feeCollector","quickAccTimelock","privilegesOptions","true","false","IdentityMapping","addr","privLevel","isQuickAccManager","FactoryMapping","code","generateAddress2","hexConcat","all","UniRouters","AmbireIdentity","AmbireFactory","knownAliases","getTransactionSummary","networkId","accountAddr","callSummary","sendSummary","tokenInfo","sigHash","humanizers","actions","assetInfo","formatUnits","accountType","email","signerExtra","walletType","toIcon","seed","blockies","toDataURL","useAddressBook","selectedAcc","addressList","Array","isArray","entry","setAddresses","updateAddresses","newAddresses","documentTitle","flashingTitleInterval","stickyIds","removeFlashingTitle","clearInterval","useAttentionGrabber","eligibleRequests","isSendTxnShowing","onSitckyClick","removeStickyToasts","Notification","permission","setInterval","showFlashingTitle","ModalContext","ModalProvider","modal","setModal","showModal","element","disableClose","hideModal","useModals","onPermissionChange","permissions","query","onchange","usePermissions","arePermissionsLoaded","setPermissionsLoaded","isClipboardGranted","setClipboardGranted","isNoticationsGranted","setNotificationsGranted","permissionsModalHidden","modalHidden","setModalHidden","checkForPermissions","clipboardState","notificationsState","Modal","isCloseBtnShown","Segments","segments","setValue","setSegment","segment","Select","native","monospace","searchable","hiddenTextInput","setOpen","search","setSearch","selectedItem","setSelectedItem","filteredItems","selectItem","focus","ev","src","alt","TextInput","forwardRef","info","copy","writeText","NumberInput","precision","button","onButtonClick","afterDecimals","Toggle","defaultChecked","ToolTip","y","mousePosition","setMousePosition","onMouseMove","clientY","clientX","top","left","LoginOrSignupForm","onAccRequest","inProgress","passConfirmInput","passphrase","passphraseConfirm","setState","onUpdate","updates","newState","invalid","setCustomValidity","isSignup","additionalOnSignup","backupOptout","Link","stopPropagation","additionalInputs","minLength","onSubmit","preventDefault","accType","display","EmailLogin","relayerURL","onAddAccount","requiresEmailConfFor","setRequiresConfFor","setInProgress","attemptLogin","ignoreEmailConfirmationRequired","encodeURIComponent","authorization","loginSessionKey","errType","requestAuthResp","sessionKey","_id","identityInfo","bytecode","meta","quickAccSigner","primaryKeyBackup","signer","select","onLoginUserAction","timer","class","inner","color","checkPermissions","onPrompt","allowWithoutGesture","checkClipboardPermission","prompt","askForPermission","requestPermission","toastErrorMessage","PermissionsModal","relayerIdentityURL","isEmailConfirmed","setEmailConfirmed","areBlockedPermissions","isAccountNotConfirmed","emailConfRequired","buttonDisabled","checkEmailConfirmation","identity","emailConfirmed","isConfirmed","requestNotificationsPermission","requestClipboardPermission","emailConfirmationInterval","InputModal","inputs","isDisabled","setDisabled","inputsFields","input","isFormValid","validate","every","values","SelectSignerAccountModal","signersToChoose","onSignerAddressClicked","selectedNetwork","description","currentPage","setCurrentPage","pages","reduce","acc","val","idx","formatAddress","prevBtnDisabled","nextBtnDisabled","onAddressClicked","prevState","TrezorConnect","manifest","appUrl","AddAccount","setChooseSigners","addAccErr","setAddAccErr","wrapProgress","fn","wrapErr","createQuickAcc","req","extraEntropy","random","performance","firstKeyWallet","Wallet","createRandom","secondKeySecret","mnemonic","phrase","secondKeyResp","quickAccountTuple","timelock","one","two","abiCoder","AbiCoder","accHash","keccak256","encode","privileges","getProxyDeployBytecode","privSlot","identityAddr","encrypt","scrypt","N","createResp","isNew","createFromEOA","hexZeroPad","connectWeb3AndGetAccounts","ethereum","web3Accs","onEOASelected","signerName","getAccountByAddr","idAddr","signerAddr","getOwnedByEOAs","eoas","allUniqueOwned","entries","connectTrezorAndGetAccounts","provider","TrezorSubprovider","trezorConnectClientApi","getAccountsAsync","_initialDerivedKeyInfo","connectLedgerAndGetAccounts","connectLedgerAndGetAccountsU2F","connectLedgerAndGetAccountsWebHID","LedgerSubprovider","ledgerEthereumClientFactoryAsync","ledgerEthereumBrowserClientFactoryAsync","_initialDerivedKeyInfoAsync","addrData","transportProtocol","addAccount","owned","addFromSignerButtons","Balances","portfolio","setNetwork","networkDetails","otherBalances","total","full","balance","truncated","decimals","ProtocolsPlaceholder","symbol","balanceUSD","Protocols","assets","collectionName","img","collectionImg","toFixed","CollectiblesPlaceholder","image","price","Collectibles","collectibles","assetName","assetImg","Dashboard","chartTokensData","setChartTokensData","chartProtocolsData","setChartProtocolsData","chartType","setChartType","tableType","setTableType","chartSegments","tableSegments","useLayoutEffect","tokensData","Number","totalProtocols","curr","protocolsData","requestOtherProtocolsRefresh","isBalanceLoading","areProtocolsLoading","Accounts","selectedAddress","onSelectAcc","onRemoveAccount","accountWarning","setAccountWarning","closed","setClosed","shortenedAddress","isActive","copyAddress","onSelectAccount","DApps","checkPermission","readClipboard","isLegacyWC","icons","endsWith","peerId","TopBar","networksItems","allNetworks","SideBar","match","sidebarRef","balanceFontSize","setBalanceFontSize","resizeBalance","balanceFontSizes","charLength","closest","prev","abs","fontSize","activeClassName","openPayTrie","walletAddress","rightSideLabel","URL","w","h","dualScreenLeft","undefined","screenLeft","screenX","dualScreenTop","screenTop","screenY","innerWidth","documentElement","clientWidth","screen","innerHeight","clientHeight","systemZoom","availWidth","newWindow","popupCenter","format","Providers","providers","logo","RAMP_LOGO","fees","limits","currencies","RampInstantSDK","hostAppName","hostLogoUrl","variant","swapAsset","polygon","avalanche","userAddress","hostApiKey","show","openRampNetwork","PAYTRIE_LOGO","TRANSAK_LOGO","transak","transakSDK","environment","defaultCryptoCurrency","disableWalletAddressForm","themeColor","redirectURL","hostURL","origin","widgetHeight","widgetWidth","init","ALL_EVENTS","EVENTS","TRANSAK_ORDER_SUCCESSFUL","orderData","openTransak","shouldBeDisabled","Deposit","POLYGON_LOGO","GnosisSafeAppIframe","selectedApp","gnosisConnect","gnosisDisconnect","loading","setHash","iframeRef","app","onLoad","ambireSushi","desc","SushiSwap","Swap","SendPlaceholder","crossChainAssets","withRouter","history","addRequest","addressBook","tokenAddress","useParams","setAsset","setAmount","bigNumberHexAmount","setBigNumberHexAmount","addressConfirmed","setAddressConfirmed","setNewAddress","assetsItems","selectedAsset","getMaxAmount","balanceRaw","ethers","utils","setMaxAmount","onAmountChange","bigNumberAmount","parseUnits","toHexString","replace","pathname","encodeFunctionData","min","AAVELendingPoolAbi","AAVELendingPoolProviders","Card","unavailable","tokensItems","details","onTokenSelect","onValidate","setTokens","setToken","currentToken","max","ERC20Interface","ERC20Abi","AAVELendingPool","RAY","lendingPoolAddress","AAVECard","currentNetwork","setUnavailable","setTokensItems","setDetails","apr","defaultTokens","getDefaultTokensItems","getToken","addRequestTxn","extraGas","approveToken","ZERO","BigNumber","getDefaultProvider","tokenContract","Contract","allowance","lt","gt","loadPool","providerAddress","lendingPoolProviderContract","getLendingPool","lendingPoolContract","getReservesList","reserves","reservesAddresses","reserve","withdrawTokens","depositTokens","allTokens","uniqueTokenAddresses","Set","getReserveData","liquidityRate","tokensAPR","fromEntries","getEquToken","AAVE_ICON","Earn","AddAuthSigner","setSignerAddress","modalToggle","setModalToggle","textInputInfo","setTextInputInfo","isAddressValid","justifyContent","onAddBtnClicked","IDENTITY_INTERFACE","Security","cacheBreak","setCacheBreak","intvl","useHistory","craftTransaction","addTransactionToAddRequest","onMakeDefaultBtnClicked","isQuickAccount","selectedAccount","privList","isQuickAcc","privText","isSelected","key","onRemoveBtnClicked","modalInputs","inputModal","showLoading","newSignerAddress","getNetworkSymbol","TxnPreview","onDismiss","isFirstFailing","isExpanded","setExpanded","contractName","BundlePreview","bundle","txns","date","lastTxnSummary","hasFeeMatch","RegExp","executed","errorMsg","submittedAt","toLocaleDateString","toLocaleTimeString","replacesTxId","txId","Transactions","showSendTxns","firstPending","replaced","mapToBundle","relayerBundle","extra","Bundle","nonce","num","cancelByReplacing","cancel","dapps","GnosisSafeApps","setSelectedApp","dapp","ERC721Abi","handleUri","Collectible","collectionAddr","owner","collection","metadata","setMetadata","recipientAddress","setRecipientAddress","isTransferDisabled","setTransferDisabled","fetchMetadata","contract","ownerOf","tokenURI","jsonUrl","isLoggedIn","routes","component","handlePermissionsModal","permissionsModal","showCauseOfPermissions","exact","wallets","getWallet","getWalletNew","providerTrezor","fromExtendedKey","xpub","getInitialDerivedKeyInfo","signMessage","signPersonalMessageAsync","hexlify","signTransactionAsync","Web3Provider","getSigner","isTokenEligible","speed","estimation","isStable","feeInUSD","feeInNative","pow","getFeePaymentConsequences","multiplier","addedGas","parseFloat","mapTxnErrMsg","msg","getErrHint","SPEEDS","FeeSelector","setEstimation","feeSpeed","setFeeSpeed","insufficientFee","selectedFeeToken","remainingFeeTokenBalances","FailingTxn","tooltip","feeCurrencySelect","marginTop","feeAmountSelectors","nativeAssetPriceInUSD","Actions","approveTxn","rejectTxn","signingStatus","quickAccCredentials","setQuickAccCredentials","form","rejectButton","signButtonLabel","quickAcc","confCodeRequired","pattern","maxLength","checkValidity","IdentityInterface","FactoryInterface","sendNoRelayer","finalBundle","wallet","getCode","getNonce","sign","signature","estimateGas","toNumber","getTransactionCount","gasPrice","sendTransaction","signed","getNetwork","IdentityFactory","REJECT_MSG","makeBundle","toBundleTxn","requestIds","SendTransaction","replacementBundle","SendTransactionWithBundle","setSigningStatus","unmounted","reestimate","estimate","estimateNoRelayer","prevEstimation","getFinalBundle","feeToken","toHexAmount","amnt","round","feeTxn","approveTxnImpl","submit","approveTxnImplQuickAcc","pwd","alert","fromEncryptedJson","signatureTwo","firstFailing","blockExplorerUrl","bundleResult","SignMessage","toSign","totalRequests","codeRequired","signingState","setSigningState","isHexString","handleSigningErr","approveQuickAcc","confirmationCode","arrayify","confCode","signMsgHash","sig","approve","getMessageAsText","readOnly","toUtf8String","_","GnosisConnector","_iframeRef","_app","this","handlers","isValidMessage","source","parent","sentFromIframe","knownMethod","Methods","canHandleMessage","Boolean","send","requestId","sdkVersion","getSDKVersion","MessageFormatter","makeErrorResponse","makeResponse","contentWindow","postMessage","handleIncomingMessage","validMessage","hasHandler","SUPPORTED_TYPES","currentNotifs","isLastTotalBalanceInit","lastTokensBalanceRaw","useNotifications","onShow","onShowRef","onClickNotif","showNotification","requireInteraction","onclick","n","isSign","lastToken","isSignificantChange","amountRecieved","newBalanceRaw","getAmountReceived","hasOwnProperty","AppInner","accs","setAccounts","initialSelectedAcc","setSelectedAcc","selected","existing","existingIdx","indexOf","clearedAccounts","useAccounts","defaultNetwork","setNetworkId","networkIdentifier","useNetwork","wcRequests","wcResolveMany","verbose","uniqueId","getTime","parsed","setRequests","getSafeInfo","safeAddress","owners","threshold","rpcCall","call","callTx","getBalance","getBlockNumber","getBlockWithTransactions","getBlock","getTransaction","getTransactionReceipt","handlePersonalSign","sendTransactions","txs","forwardId","prevRequests","getTxBySafeTxHash","safeTxHash","replyData","useGnosisSafe","gnosisRequests","gnosisResolveMany","internalRequests","setInternalRequests","reqs","currentAccount","setBalanceLoading","setProtocolsLoading","tokensByNetworks","setTokensByNetworks","otherProtocolsByNetworks","setOtherProtocolsByNetworks","setBalance","setOtherBalances","setProtocols","setCollectibles","fetchTokens","supportedProtocols","failedRequests","requestsCount","products","updatedTokens","updatedNetworks","fetchOtherProtocols","updatedProtocols","protocolsByNetworks","refreshTokensIfVisible","loadBalance","loadProtocols","balanceByNetworks","toLocaleString","otherProtocols","refreshInterval","refreshIfHidden","usePortfolio","showing","sendTxnState","setSendTxnState","everythingToSign","outcome","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3831649c.chunk.js","sourcesContent":["import TransportWebHID from '@ledgerhq/hw-transport-webhid'\nimport AppEth from '@ledgerhq/hw-app-eth'\nimport { serialize } from '@ethersproject/transactions'\n\nconst EIP_155_CONSTANT = 35\n\nconst ethUtil = require('ethereumjs-util')\nconst HDNode = require('hdkey')\n\nlet connectedDevices = null\n\nexport const PARENT_HD_PATH = \"44'/60'/0'/0\"\n\nasync function getTransport() {\n  connectedDevices = await TransportWebHID.list()\n  if (connectedDevices.length && connectedDevices[0].opened) {\n    return new TransportWebHID(connectedDevices[0])\n  } else {\n    try {\n      return await TransportWebHID.request()\n    } catch (e) {\n      throw new Error('Could not request WebHID ledger')\n    }\n  }\n}\n\n\nexport async function ledgerGetAddresses() {\n  const returnData = {\n    error: null,\n    addresses: []\n  }\n\n  const transport = await getTransport().catch(err => {\n    returnData.error = err\n  })\n  if (!transport) return returnData\n\n  const accountsData = await getAccounts(transport)\n\n  transport.close()\n\n  if (accountsData.error) {\n    returnData.error = accountsData.error\n  } else {\n    returnData.addresses = accountsData.accounts.map(a => a.address)\n  }\n\n  return returnData\n}\n\nasync function getAccounts(transport) {\n  const parentKeyDerivationPath = `m/${PARENT_HD_PATH}`\n  const returnData = {\n    error: null,\n    accounts: []\n  }\n  let ledgerResponse\n  try {\n    ledgerResponse = await getAddressInternal(transport, parentKeyDerivationPath).then(o => o).catch(err => {\n      if (err.statusCode === 25871 || err.statusCode === 27404) {\n        returnData.error = 'Please make sure your ledger is unlocked and running the Ethereum app. ' + err.message\n      } else {\n        returnData.error = 'Could not get address from ledger : ' + err\n      }\n    })\n  } catch (e) {\n    console.log(e)\n  }\n\n  if (!ledgerResponse) {\n    return returnData\n  }\n\n  const hdKey = new HDNode()\n  hdKey.publicKey = Buffer.from(ledgerResponse.publicKey, 'hex')\n  hdKey.chainCode = Buffer.from(ledgerResponse.chainCode, 'hex')\n  const mainAddress = addressOfHDKey(hdKey)\n\n  const initialDerivedKeyInfo = {\n    hdKey,\n    address: mainAddress,\n    derivationPath: parentKeyDerivationPath,\n    baseDerivationPath: PARENT_HD_PATH,\n  }\n\n  // currently we can't get addrs to match with what appears in MM/Ledger live so only one is derived\n  returnData.accounts = calculateDerivedHDKeyInfos(initialDerivedKeyInfo, 1)\n  return returnData\n}\n\n\nasync function getAddressInternal(transport, parentKeyDerivationPath) {\n  let timeoutHandle\n  const appEth = new AppEth(transport)\n\n  const ledgerTimeout = new Promise((resolve, reject) => {\n    timeoutHandle = setTimeout(() => {\n      return reject(new Error('Device took too long to respond...'))\n    }, 10000)\n  })\n\n  return Promise.race([\n    appEth.getAddress(parentKeyDerivationPath, false, true),\n    ledgerTimeout\n  ]).then((res) => {\n    clearTimeout(timeoutHandle)\n    return res\n  })\n}\n\nexport async function ledgerSignTransaction(txn, chainId) {\n  const transport = await getTransport().catch(err => {\n    throw err\n  })\n\n  const fromAddr = txn.from\n\n  const unsignedTxObj = {\n    ...txn,\n    gasLimit: txn.gasLimit || txn.gas,\n    chainId: chainId\n  }\n  delete unsignedTxObj.from\n  delete unsignedTxObj.gas\n\n  let serializedUnsigned = serialize(unsignedTxObj)\n  const accountsData = await getAccounts(transport)\n  if (accountsData.error) {\n    throw new Error(accountsData.error)\n  }\n\n  //Managing only 1 addr for now\n  const address = accountsData.accounts[0].address\n\n  let serializedSigned\n  if (address.toLowerCase() === fromAddr.toLowerCase()) {\n    let rsvResponse\n    try {\n      rsvResponse = await new AppEth(transport).signTransaction(accountsData.accounts[0].derivationPath, serializedUnsigned.substr(2))\n    } catch (e) {\n      throw new Error('Could not sign transaction ' + e)\n    }\n\n    const intV = parseInt(rsvResponse.v, 16)\n    const signedChainId = Math.floor((intV - EIP_155_CONSTANT) / 2)\n\n    if (signedChainId !== chainId) {\n      throw new Error('Invalid returned V 0x' + rsvResponse.v)\n    }\n\n    delete unsignedTxObj.v\n    serializedSigned = serialize(unsignedTxObj, {\n      r: '0x' + rsvResponse.r,\n      s: '0x' + rsvResponse.s,\n      v: intV\n    })\n  } else {\n    throw new Error('Incorrect address. Are you using the correct account/ledger?')\n  }\n\n  transport.close()\n\n  return serializedSigned\n}\n\nexport async function ledgerSignMessage(hash, signerAddress) {\n  const transport = await getTransport().catch(err => {\n    throw err\n  })\n\n  const accountsData = await getAccounts(transport)\n  if (accountsData.error) {\n    throw new Error(accountsData.error)\n  }\n\n  //TODO for multiple accs?\n  const account = accountsData.accounts[0]\n\n  let signedMsg\n  if (account.address.toLowerCase() === signerAddress.toLowerCase()) {\n    try {\n      const rsvReply = await new AppEth(transport).signPersonalMessage(account.derivationPath, hash.substr(2))\n      signedMsg = '0x' + rsvReply.r + rsvReply.s + rsvReply.v.toString(16)\n    } catch (e) {\n      throw new Error('Signature denied ' + e.message)\n    }\n  } else {\n    throw new Error('Incorrect address. Are you using the correct account/ledger?')\n  }\n  transport.close()\n  return signedMsg\n}\n\nfunction calculateDerivedHDKeyInfos(initialDerivedKeyInfo, count) {\n  const derivedKeys = []\n  for (let i = 0; i < count; i++) {\n\n    const fullDerivationPath = `m/${initialDerivedKeyInfo.baseDerivationPath}/${i}`\n    const path = `m/${i}`\n    const hdKey = initialDerivedKeyInfo.hdKey.derive(path)\n    const address = addressOfHDKey(hdKey)\n    const derivedKey = {\n      address,\n      hdKey,\n      baseDerivationPath: initialDerivedKeyInfo.baseDerivationPathh,\n      derivationPath: fullDerivationPath,\n    }\n\n    derivedKeys.push(derivedKey)\n  }\n  return derivedKeys\n}\n\nexport function addressOfHDKey(hdKey) {\n  const shouldSanitizePublicKey = true\n  const derivedPublicKey = hdKey.publicKey\n  const ethereumAddressUnprefixed = ethUtil\n    .publicToAddress(derivedPublicKey, shouldSanitizePublicKey)\n    .toString('hex')\n  return ethUtil.addHexPrefix(ethereumAddressUnprefixed).toLowerCase()\n}\n","export const fetch = require('node-fetch')\n\nexport async function fetchPost (url, body) {\n\tconst r = await fetch(url, {\n\t\theaders: { 'content-type': 'application/json' },\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(body)\n\t})\n\treturn r.json()\n}\n\nexport const fetchGet = async url => {\n  const response = await fetch(url, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (response.status !== 200) throw new Error('Failed to fetch')\n  return response.json()\n}\n\nexport async function fetchCaught (url, params) {\n    let resp\n    try {\n      resp = await fetch(url, params)\n    } catch (e) {\n      console.error(e)\n      return { errMsg: `Unexpected error: ${e && e.message}` }\n    }\n    let body\n    try {\n      body = await resp.json()\n    } catch(e) {\n      console.error(e)\n      return { errMsg: `Unexpected error: ${resp.status}, ${e && e.message}`, resp }\n    }\n    return { body, resp, errMsg: '' }\n}","import './AddressList.scss'\n\nimport { MdOutlineDelete } from 'react-icons/md'\n\nconst AddressList = ({ noAccounts, addresses, onSelectAddress, removeAddress }) => {\n    const items = addresses.filter(({ isAccount }) => !(isAccount && noAccounts))\n\n    return (\n        <div className=\"address-list\">\n            {\n                !items.length ?\n                    <div className=\"placeholder\">Your Address Book is empty</div>\n                    :\n                    items.map(({ isAccount, icon, name, address }) => (\n                        <div className=\"item\" key={address + name}>\n                            <div className=\"inner\" onClick={() => onSelectAddress && onSelectAddress(address)}>\n                                <div className=\"icon\" style={{ backgroundImage: `url(${icon})`}}></div>\n                                <div className=\"details\">\n                                    <label>{ name }</label>\n                                    <div className=\"address\">{ address }</div>\n                                </div>\n                            </div>\n                            {\n                                !isAccount ? \n                                    <div className=\"button\" onClick={() => removeAddress(name, address)}>\n                                        <MdOutlineDelete/>\n                                    </div>\n                                    :\n                                    null\n                            }\n                        </div>\n                    ))\n            }\n        </div>\n    )\n}\n\nexport default AddressList","import './AddressBook.scss'\n\nimport { FaAddressCard } from 'react-icons/fa'\nimport { MdOutlineAdd, MdClose } from 'react-icons/md'\nimport { DropDown } from '..'\nimport { useCallback, useEffect, useState } from 'react'\nimport AddressList from './AddressList/AddressList'\n\nconst AddressBook = ({ addresses, addAddress, removeAddress, newAddress, onClose, onSelectAddress }) => {\n    const [address, setAddress] = useState('')\n    const [name, setName] = useState('')\n    const [isOpen, setOpenMenu] = useState(false)\n    const [openAddAddress, setOpenAddAddress] = useState(false)\n\n    const selectAddress = address => onSelectAddress ? onSelectAddress(address) : null\n    \n    const isAddAddressFormValid = address.length && name.length && /^0x[a-fA-F0-9]{40}$/.test(address)\n    const onAddAddress = useCallback(() => {\n        setOpenAddAddress(false)\n        addAddress(name, address)\n    }, [name, address, addAddress])\n\n    const onMenuClose = useCallback(() => {\n        setName('')\n        setAddress('')\n        setOpenMenu(false)\n    }, [])\n\n    useEffect(() => !isOpen && onClose ? onClose() : null, [isOpen, onClose])\n\n    useEffect(() => {\n        if (newAddress) {\n            setAddress(newAddress)\n            setOpenMenu(true)\n            setOpenAddAddress(true)\n        }\n    }, [newAddress])\n\n    return (\n        <DropDown title={<><FaAddressCard/>Address Book</>} className=\"address-book\" open={isOpen} onClose={onMenuClose}>\n            <div className=\"heading\">\n                <div className=\"title\">\n                    <FaAddressCard/> Address Book\n                </div>\n                {\n                    !openAddAddress ?\n                        <div className=\"button\" onClick={() => setOpenAddAddress(true)}>\n                            <MdOutlineAdd/>\n                        </div>\n                        :\n                        <div className=\"button\" onClick={() => setOpenAddAddress(false)}>\n                            <MdClose/>\n                        </div>\n                }\n            </div>\n            {\n                openAddAddress ?\n                    <div id=\"add-address\" className=\"content\">\n                        <div className=\"fields\">\n                            <input type=\"text\" autoComplete=\"nope\" placeholder=\"Name\" defaultValue={name} onInput={({ target }) => setName(target.value)}/>\n                            <input type=\"text\" autoComplete=\"nope\" placeholder=\"Address\" defaultValue={address} onInput={({ target }) => setAddress(target.value)}/>\n                        </div>\n                        <button className=\"button\" disabled={!isAddAddressFormValid} onClick={onAddAddress}>\n                            <MdOutlineAdd/> Add Address\n                        </button>\n                    </div>\n                    :\n                    !addresses.length ?\n                        <div className=\"content\">\n                            Your Address Book is empty.\n                        </div>\n                        :\n                        <div className=\"content\">\n                            <AddressList\n                                addresses={addresses}\n                                onSelectAddress={selectAddress}\n                                removeAddress={removeAddress}\n                            />\n                        </div>\n            }\n        </DropDown>\n    )\n}\n\nexport default AddressBook","import { names, tokens } from '../consts/humanizerInfo'\n\nconst isValidAddress = address => /^0x[a-fA-F0-9]{40}$/.test(address)\n\nconst isKnownTokenOrContract = address => {\n    const addressToLowerCase = address.toLowerCase()\n    const tokensAddresses = Object.keys(tokens)\n    const contractsAddresses = Object.keys(names)\n    return tokensAddresses.includes(addressToLowerCase) || contractsAddresses.includes(addressToLowerCase)\n}\n\nexport {\n    isValidAddress,\n    isKnownTokenOrContract\n}","import './AddressWarning.scss'\n\nimport { MdOutlineAdd } from 'react-icons/md'\nimport { AiOutlineWarning } from 'react-icons/ai'\nimport { Checkbox } from '..'\nimport { useEffect, useMemo, useState } from 'react'\nimport { isValidAddress, isKnownTokenOrContract } from '../../../helpers/address';\n\nconst AddressWarning = ({ address, onChange, onAddNewAddress, isKnownAddress }) => {\n    const [confirmed, setConfirmed] = useState(false)\n    const unknownWarning = useMemo(() => isValidAddress(address) && !isKnownAddress(address), [address, isKnownAddress])\n    const smartContractWarning = useMemo(() => isKnownTokenOrContract(address), [address])\n\n    useEffect(() => {\n        if (onChange) onChange(confirmed)\n    }, [confirmed, onChange])\n\n    return (\n        <>\n            {\n                !smartContractWarning && unknownWarning ?\n                    <div id=\"unknown-address-warning\">\n                        <Checkbox\n                            label=\"Confirm sending to a previously unknown address\"\n                            checked={confirmed}\n                            onChange={({ target }) => setConfirmed(target.checked)}\n                        />\n                        <div className=\"button\" onClick={onAddNewAddress}>\n                            <MdOutlineAdd/>\n                            Add it to the address book\n                        </div>\n                    </div>\n                    :\n                    null\n            }\n            {\n                smartContractWarning ? \n                    <div id=\"smart-contract-warning\">\n                        <AiOutlineWarning/>\n                        You are trying to send tokens to a smart contract. Doing so would burn them.\n                    </div>\n                    :\n                    null\n            }\n        </>\n    )\n}\n\nexport default AddressWarning","import './Button.scss'\n\nconst Button = ({ children, small, icon, iconAfter, disabled, onClick, red, clear, title }) => {\n    return (\n        <button onClick={onClick} className={`buttonComponent ${small ? 'small' : ''} ${red ? 'red' : ''} ${clear ? 'clear' : ''}`} disabled={disabled} title={title}>\n            { icon ? <div className=\"icon-button\">{ icon }</div> : null }\n            { children }\n            { iconAfter ? <div className=\"icon-button\">{ iconAfter }</div> : null }\n        </button>\n    )\n}\n\nexport default Button\n","import './Chart.scss';\n\nimport DonutChart from \"react-donut-chart\";\nimport { useState } from 'react';\n\nconst Chart = ({ data, size }) => {\n    const [hoveredItem, setHoveredItem] = useState({});\n\n    const colors = [\n        \"#AA6AFF\",\n        \"#80FFDB\",\n        \"#8088FF\",\n        \"#E680FF\",\n        \"#A5FF80\",\n        \"#E6FF80\",\n        \"#FFC480\",\n        \"#FF8080\",\n    ];\n    \n    const strokeColor = \"transparent\";\n    const innerRadius = 0.5;\n    const selectedOffset = 0.05;\n\n    const onMouseEnter = (item) => {\n        setHoveredItem(item.label);\n    };\n\n    const onClick = (item, toggled) => {\n        if (toggled) {\n            console.log(item);\n        }\n    };\n\n    const sortData = data => {\n        return data.sort((a, b) => b.value - a.value);\n    };\n\n    const getItemColor = index => {\n        const colorCount = colors.length - 1;\n        return index > colorCount ? colors[index - (colors.length * Math.trunc(index / colors.length))] : colors[index];\n    };\n\n    return (\n        <div className=\"chart\">\n            <DonutChart\n                className=\"donut\"\n                height={size}\n                width={size}\n                onMouseEnter={(item) => onMouseEnter(item)}\n                data={sortData(data)}\n                colors={colors}\n                startAngle={-90}\n                strokeColor={strokeColor}\n                innerRadius={innerRadius}\n                selectedOffset={selectedOffset}\n                legend={false}\n                onClick={(item, toggled) => onClick(item, toggled)}\n            />\n            <div className=\"legend\" style={{height: size}}>\n                {\n                    data.map((item, i) => (\n                        <div className={`item ${hoveredItem === item.label ? 'active' : ''}`} key={item.label}>\n                            <div className=\"color\" style={{backgroundColor: getItemColor(i)}}/>\n                            <label>{ item.label }</label>\n                            <div className=\"separator\"></div>\n                            <div className=\"percent\">\n                                { item.value }%\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default Chart;","import React from 'react';\nimport './Checkbox.scss'\n\nfunction Checkbox(props) {\n    const inputElem =  (\n        <input type=\"checkbox\" checked={props.checked} required={props.required} onChange={props.onChange}/>\n    )\n\n    return props.label ? (<label className={`checkbox-container ${props.disabled ? 'disabled': ''}`}>\n        {inputElem}\n        <div className=\"checkbox-mark\"></div>\n        <div className=\"checkbox-label\">{props.label}</div>\n    </label>) : (<>\n        {inputElem}\n        <div className=\"checkbox-mark\"></div>\n    </>)\n}\n\nexport { Checkbox as default }","import { useEffect } from 'react';\n\nexport default function useOnClickOutside(ref, handler) {\n    useEffect(\n        () => {\n            const listener = (event) => {\n                if (!ref.current || ref.current.contains(event.target)) {\n                    return;\n                }\n                handler(event);\n            };\n            document.addEventListener(\"mousedown\", listener);\n            document.addEventListener(\"touchstart\", listener);\n                return () => {\n                    document.removeEventListener(\"mousedown\", listener);\n                    document.removeEventListener(\"touchstart\", listener);\n                };\n        },\n        [ref, handler]\n    );\n}","import './DropDown.scss'\n\nimport { useEffect, useRef, useState } from 'react';\nimport { BsChevronDown } from 'react-icons/bs'\nimport { CSSTransition } from 'react-transition-group';\nimport useOnClickOutside from '../../../helpers/onClickOutside';\n\nexport default function DropDown({ children, id, icon, className, title, badge, open, closeOnClick, onOpen, onClose, style }) {\n    const ref = useRef();\n    const transitionRef = useRef();\n    const [isMenuOpen, setMenuOpen] = useState(false);\n\n    useEffect(() => setMenuOpen(open), [open]);\n    useEffect(() => onClose && !isMenuOpen ? onClose() : null, [isMenuOpen, onClose]);\n    useEffect(() => onOpen && isMenuOpen ? onOpen(true) : null, [isMenuOpen, onOpen])\n    useOnClickOutside(ref, () => setMenuOpen(false));\n\n    return (\n        <div id={id} style={style} className={`dropdown ${className}`} ref={ref}>\n            <div className=\"content\" onClick={() => setMenuOpen(!isMenuOpen)}>\n                {\n                    icon ?\n                        <div className=\"icon\" style={{backgroundImage: `url(${icon})`}} />\n                        :\n                        null\n                }\n                <div className=\"title\">{ title }</div>\n                {\n                    badge ? \n                        <div className=\"badge\">\n                            { badge > 9 ? '9+' : badge }\n                        </div>\n                        :\n                        null\n                }\n                <div className={`handle ${isMenuOpen ? 'open' : ''}`}>\n                    <BsChevronDown size={20}></BsChevronDown>\n                </div>\n            </div>\n            <CSSTransition unmountOnExit in={isMenuOpen} timeout={200} classNames=\"fade\" nodeRef={transitionRef}>\n                <div className=\"menu\" ref={transitionRef} onClick={closeOnClick ? () => setMenuOpen(false) : null}>\n                    { children }\n                </div>\n            </CSSTransition>\n        </div>\n    )\n}","import './Loading.scss';\n\nimport { AiOutlineLoading } from 'react-icons/ai';\n\nconst Loading = () => {\n    return (\n        <div className=\"loading\">\n            <div className=\"icon\">\n                <AiOutlineLoading size={35}/>\n            </div>\n        </div>\n    );\n};\n\nexport default Loading;","import './Loading.scss';\n\nconst AmbireLoading = () => {\n    return (\n        <div className=\"ambire-loading-animation-128\">\n        </div>\n    );\n};\n\nexport default AmbireLoading;","import './Loading.scss';\n\nconst Skeleton = ({children}) => {\n    return (\n        <div className=\"Skeleton\">\n            <div className=\"\">\n                {children}\n            </div>\n        </div>\n    );\n};\n\nexport default Skeleton;","import './ToastProvider.scss';\n\nimport React, { createRef, useState, useCallback } from \"react\";\nimport { MdOutlineClose } from 'react-icons/md';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\n\nconst ToastContext = React.createContext(null);\n\nlet id = 0\n\nconst ToastProvider = ({ children }) => {\n    const [toasts, setToasts] = useState([]);\n\n    const removeToast = useCallback(id => {\n        setToasts(toasts => toasts.filter(t => t.id !== id));\n    }, []);\n\n    const addToast = useCallback((content, options) => {\n        const defaultOptions = {\n            timeout: 8000,\n            error: false,\n            position: 'center',\n            sticky: false,\n            badge: null,\n            onClick: null,\n            url: null,\n        }\n\n        const toast = {\n            id: id++,\n            content,\n            ref: createRef(),\n            ...defaultOptions,\n            ...options\n        }\n        \n        setToasts(toasts => [\n            ...toasts,\n            toast\n        ]);\n\n        !toast.sticky && setTimeout(() => removeToast(toast.id), toast.timeout)\n\n        return toast.id;\n    }, [setToasts, removeToast]);\n    \n    return (\n        <ToastContext.Provider\n            value={{\n                addToast,\n                removeToast\n            }}\n        >\n            <div id=\"toast-container\">\n                <TransitionGroup className=\"transition-group\">\n                {\n                    toasts.map(({ id, ref, url, error, sticky, badge, position, content, onClick }) => (\n                        <CSSTransition timeout={200} classNames=\"slide-fade\" key={id} nodeRef={ref}>\n                            <a href={url} target=\"_blank\" rel=\"noreferrer\">\n                                <div className={`toast ${error ? 'error' : ''} ${sticky ? 'sticky' : ''} ${position ? position : ''}`} ref={ref}>\n                                    <div className=\"inner\" onClick={() => onClick ? onClick() : removeToast(id)}>\n                                        { badge ? <div className=\"badge\">{ badge }</div> : null }\n                                        { content }\n                                    </div>\n                                    {\n                                        sticky ? \n                                            <div className=\"close\" onClick={() => removeToast(id)}>\n                                                <MdOutlineClose/>\n                                            </div>\n                                            :\n                                            null\n                                    }\n                                </div>\n                            </a>\n                        </CSSTransition>\n                    ))\n                }\n                </TransitionGroup>\n            </div>\n            { children }\n        </ToastContext.Provider>\n    );\n};\n\nexport { ToastContext };\nexport default ToastProvider;","import { useContext } from 'react';\nimport { ToastContext } from '../components/ToastProvider/ToastProvider';\n\nconst useToasts = () => {\n    return useContext(ToastContext);\n};\n\nexport { useToasts };","const networks = [{\n\t\tid: 'ethereum',\n\t\tchainId: 1,\n\t\trpc: 'https://mainnet.infura.io/v3/3d22938fd7dd41b7af4197752f83e8a1',\n\t\tnativeAssetSymbol: 'ETH',\n\t\tname: 'Ethereum',\n\t\ticon: '/resources/networks/ethereum.png',\n\t\texplorerUrl: 'https://etherscan.io'\n\t},  {\n\t\tid: 'polygon',\n\t\tchainId: 137,\n\t\trpc: 'https://polygon-rpc.com/rpc',\n\t\tnativeAssetSymbol: 'MATIC',\n\t\tname: 'Polygon',\n\t\ticon: '/resources/networks/polygon.png',\n\t\texplorerUrl: 'https://polygonscan.com'\n\t}, {\n\t\tid: 'avalanche',\n\t\tchainId: 43114,\n\t\trpc: 'https://api.avax.network/ext/bc/C/rpc',\n\t\tnativeAssetSymbol: 'AVAX',\n\t\tname: 'Avalanche',\n\t\ticon: '/resources/networks/avalanche.png',\n\t\texplorerUrl: 'https://snowtrace.io'\n\t}, {\n\t\t// to match the zapper ID\n\t\tid: 'binance-smart-chain',\n\t\tchainId: 56,\n\t\trpc: 'https://bsc-dataseed.binance.org/',\n\t\tnativeAssetSymbol: 'BNB',\n\t\tname: 'Binance Smart Chain',\n\t\ticon: '/resources/networks/bsc.png',\n\t\texplorerUrl: 'https://bscscan.com'\n\t}/*, {\n\t\tid: 'arbitrum',\n\t\tchainId: 42161,\n\t\trpc: 'https://arb1.arbitrum.io/rpc',\n\t\tnativeAssetSymbol: 'AETH',\n\t\tname: 'Arbitrum',\n\t\ticon: '/resources/networks/arbitrum.svg',\n\t\texplorerUrl: 'https://arbiscan.io'\n}*/]\n\nexport default networks\n","export const RAMP_HOST_API_KEY = process.env.REACT_APP_RAMP_HOST_API_KEY;\nexport const PAYTRIE_PARTNER_URL = process.env.REACT_APP_PAYTRIE_PARTNER_URL;\nexport const TRANSAK_API_KEY = process.env.REACT_APP_TRANSAK_API_KEY;\nexport const TRANSAK_ENV = process.env.REACT_APP_TRANSAK_ENV;\nexport const ZAPPER_API_KEY = process.env.REACT_APP_ZAPPER_API_KEY;\nexport const ZAPPER_API_ENDPOINT = process.env.REACT_APP_ZAPPER_API_ENDPOINT;\nexport const SUSHI_SWAP_FRAME = process.env.REACT_APP_SUSHI_SWAP_FRAME_URL;","import { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { ZAPPER_API_KEY } from '../config';\nimport { fetchGet } from '../lib/fetch';\nimport { ZAPPER_API_ENDPOINT } from '../config'\nimport supportedProtocols from '../consts/supportedProtocols';\nimport { useToasts } from '../hooks/toasts'\n\nconst getBalances = (apiKey, network, protocol, address) => fetchGet(`${ZAPPER_API_ENDPOINT}/protocols/${protocol}/balances?addresses[]=${address}&network=${network}&api_key=${apiKey}&newBalances=true`)\n\nlet hidden, visibilityChange;\nif (typeof document.hidden !== 'undefined') {\n    hidden = 'hidden';\n    visibilityChange = 'visibilitychange';\n} else if (typeof document.msHidden !== 'undefined') {\n    hidden = 'msHidden';\n    visibilityChange = 'msvisibilitychange';\n} else if (typeof document.webkitHidden !== 'undefined') {\n    hidden = 'webkitHidden';\n    visibilityChange = 'webkitvisibilitychange';\n}\nlet lastOtherProcolsRefresh = null\n\nexport default function usePortfolio({ currentNetwork, account }) {\n    const { addToast } = useToasts()\n\n    const currentAccount = useRef();\n    const [isBalanceLoading, setBalanceLoading] = useState(true);\n    const [areProtocolsLoading, setProtocolsLoading] = useState(true);\n\n    const [tokensByNetworks, setTokensByNetworks] = useState([])\n    const [otherProtocolsByNetworks, setOtherProtocolsByNetworks] = useState([])\n\n    const [balance, setBalance] = useState({\n        total: {\n            full: 0,\n            truncated: 0,\n            decimals: '00'\n        },\n        tokens: []\n    });\n    const [otherBalances, setOtherBalances] = useState([]);\n    const [tokens, setTokens] = useState([]);\n    const [protocols, setProtocols] = useState([]);\n    const [collectibles, setCollectibles] = useState([]);\n\n    const fetchTokens = useCallback(async (account, currentNetwork = false) => {\n        try {\n            const networks = currentNetwork ? [currentNetwork] : supportedProtocols.map(({ network }) => network)\n\n            let failedRequests = 0\n            const requestsCount = networks.length\n\n            const updatedTokens = (await Promise.all(networks.map(async network => {\n                try {\n                    const balance = await getBalances(ZAPPER_API_KEY, network, 'tokens', account)\n                    if (!balance) return null\n\n                    const { meta, products } = Object.values(balance)[0]\n                    return {\n                        network,\n                        meta,\n                        products\n                    }\n                } catch(_) {\n                    failedRequests++\n                }\n            }))).filter(data => data)\n            const updatedNetworks = updatedTokens.map(({ network }) => network)\n\n            // Prevent race conditions\n            if (currentAccount.current !== account) return\n\n            setTokensByNetworks(tokensByNetworks => ([\n                ...tokensByNetworks.filter(({ network }) => !updatedNetworks.includes(network)),\n                ...updatedTokens\n            ]))\n\n            if (failedRequests >= requestsCount) throw new Error('Failed to fetch Tokens from Zapper API')\n            return true\n        } catch (error) {\n            console.error(error)\n            addToast(error.message, { error: true })\n            return false\n        }\n    }, [addToast])\n\n    const fetchOtherProtocols = useCallback(async (account, currentNetwork = false) => {\n        try {\n            const protocols = currentNetwork ? [supportedProtocols.find(({ network }) => network === currentNetwork)] : supportedProtocols\n\n            let failedRequests = 0\n            const requestsCount = protocols.reduce((acc, curr) => curr.protocols.length + acc, 0)\n\n            const updatedProtocols = (await Promise.all(protocols.map(async ({ network, protocols }) => {\n                const all = (await Promise.all(protocols.map(async protocol => {\n                    try {\n                        const balance = await getBalances(ZAPPER_API_KEY, network, protocol, account)\n                        return balance ? Object.values(balance)[0] : null\n                    } catch(_) {\n                        failedRequests++\n                    }\n                }))).filter(data => data).flat()\n\n                return all.length ? {\n                    network,\n                    protocols: all.map(({ products }) => products).flat(2)\n                } : null\n            }))).filter(data => data)\n            const updatedNetworks = updatedProtocols.map(({ network }) => network)\n\n            // Prevent race conditions\n            if (currentAccount.current !== account) return\n\n            setOtherProtocolsByNetworks(protocolsByNetworks => ([\n                ...protocolsByNetworks.filter(({ network }) => !updatedNetworks.includes(network)),\n                ...updatedProtocols\n            ]))\n            \n            lastOtherProcolsRefresh = Date.now()\n\n            if (failedRequests >= requestsCount) throw new Error('Failed to fetch other Protocols from Zapper API')\n            return true\n        } catch (error) {\n            console.error(error)\n            addToast(error.message, { error: true })\n            return false\n        }\n    }, [addToast])\n\n    const refreshTokensIfVisible = useCallback(() => {\n        if (!account) return\n        if (!document[hidden] && !isBalanceLoading) fetchTokens(account, currentNetwork)\n    }, [isBalanceLoading, account, fetchTokens, currentNetwork])\n\n    const requestOtherProtocolsRefresh = async () => {\n        if (!account) return\n        if ((Date.now() - lastOtherProcolsRefresh) > 30000 && !areProtocolsLoading) await fetchOtherProtocols(account, currentNetwork)\n    }\n\n    // Fetch balances and protocols on account change\n    useEffect(() => {\n        currentAccount.current = account\n\n        async function loadBalance() {\n            if (!account) return\n            setBalanceLoading(true)\n            if (await fetchTokens(account)) setBalanceLoading(false)\n        }\n\n        async function loadProtocols() {\n            if (!account) return\n            setProtocolsLoading(true)\n            if (await fetchOtherProtocols(account)) setProtocolsLoading(false)\n        }\n\n        loadBalance()\n        loadProtocols()\n    }, [account, fetchTokens, fetchOtherProtocols])\n\n    // Update states on network, tokens and ohterProtocols change\n    useEffect(() => {\n        try {\n            const balanceByNetworks = tokensByNetworks.map(({ network, meta }) => {\n                const balanceUSD = meta.find(({ label }) => label === 'Total')?.value + meta.find(({ label }) => label === 'Debt')?.value\n                if (!balanceUSD) return {\n                    network,\n                    total: {\n                        full: 0,\n                        truncated: 0,\n                        decimals: '00'\n                    }\n                }\n\n                const [truncated, decimals] = Number(balanceUSD.toString()).toFixed(2).split('.')\n                return {\n                    network,\n                    total: {\n                        full: balanceUSD,\n                        truncated: Number(truncated).toLocaleString('en-US'),\n                        decimals\n                    }\n                }\n            })\n\n            const balance = balanceByNetworks.find(({ network }) => network === currentNetwork)\n            if (balance) {\n                setBalance(balance)\n                setOtherBalances(balanceByNetworks.filter(({ network }) => network !== currentNetwork))\n            }\n\n            const tokens = tokensByNetworks.find(({ network }) => network === currentNetwork)\n            if (tokens) setTokens(tokens.products.map(({ assets }) => assets.map(({ tokens }) => tokens)).flat(2))\n\n            const otherProtocols = otherProtocolsByNetworks.find(({ network }) => network === currentNetwork)\n            if (tokens && otherProtocols) {\n                setProtocols([\n                    ...tokens.products,\n                    ...otherProtocols.protocols.filter(({ label }) => label !== 'NFTs')\n                ])\n                setCollectibles(otherProtocols.protocols.find(({ label }) => label === 'NFTs')?.assets || [])\n            }\n        } catch(e) {\n            console.error(e);\n            addToast(e.message | e, { error: true })\n        }\n    }, [currentNetwork, tokensByNetworks, otherProtocolsByNetworks, addToast])\n\n    // Refresh tokens on network change\n    useEffect(() => {\n        refreshTokensIfVisible()\n    }, [currentNetwork, refreshTokensIfVisible])\n\n    // Refresh balance every 20s if visible\n    useEffect(() => {\n        const refreshInterval = setInterval(refreshTokensIfVisible, 20000)\n        return () => clearInterval(refreshInterval)\n    }, [refreshTokensIfVisible])\n\n    // Refresh balance every 60s if hidden\n    useEffect(() => {\n        const refreshIfHidden = document[hidden] && !isBalanceLoading ? fetchTokens(account, currentNetwork) : null\n        const refreshInterval = setInterval(refreshIfHidden, 60000)\n        return () => clearInterval(refreshInterval)\n    }, [account, currentNetwork, isBalanceLoading, fetchTokens])\n\n    // Refresh balance when window is focused\n    useEffect(() => {\n        document.addEventListener(visibilityChange, refreshTokensIfVisible, false);\n        return () => document.removeEventListener(visibilityChange, refreshTokensIfVisible, false);\n    }, [refreshTokensIfVisible])\n\n    return {\n        isBalanceLoading,\n        areProtocolsLoading,\n        balance,\n        otherBalances,\n        tokens,\n        protocols,\n        collectibles,\n        requestOtherProtocolsRefresh\n        //updatePortfolio//TODO find a non dirty way to be able to reply to getSafeBalances from the dapps, after the first refresh\n    }\n}\n","// List of all supported protocols by networks: https://api.zapper.fi/v1/protocols/balances/supported?api_key=5d1237c2-3840-4733-8e92-c5a58fe81b88\n\nconst suportedProtocols = [\n    {\n        network: 'ethereum',\n        protocols: ['1inch', 'aave-v2', 'alchemix', 'badger', 'balancer-v2', 'compound', 'cream', 'curve', 'sushiswap', 'uniswap-v2', 'uniswap-v3', 'nft']\n    },\n    {\n        network: 'polygon',\n        protocols: ['aave-v2', 'quickswap', 'sushiswap']\n    },\n    {\n        network: 'avalanche',\n        protocols: ['aave-v2']\n    },\n    {\n        network: 'binance-smart-chain',\n        protocols: ['pancakeswap']\n    }\n]\n\nexport default suportedProtocols\n","export function isFirefox() {\n  return typeof (navigator) !== 'undefined' && navigator.userAgent.toLowerCase().includes('firefox')\n}\n","import { useCallback, useEffect, useReducer, useRef } from 'react'\nimport { useToasts } from '../hooks/toasts'\nimport { isFirefox } from '../lib/isFirefox'\n\nimport WalletConnectCore from '@walletconnect/core'\nimport * as cryptoLib from '@walletconnect/iso-crypto'\n\nconst noop = () => null\nconst noopSessionStorage = { setSession: noop, getSession: noop, removeSession: noop }\n\nconst STORAGE_KEY = 'wc1_state'\nconst SUPPORTED_METHODS = ['eth_sendTransaction', 'gs_multi_send', 'personal_sign', 'eth_sign']\nconst SESSION_TIMEOUT = 6000\n\nconst getDefaultState = () => ({ connections: [], requests: [] })\n\nlet connectors = {}\n\nexport default function useWalletConnect ({ account, chainId, onCallRequest }) {\n    const { addToast } = useToasts()\n\n    // This is needed cause of the WalletConnect event handlers\n    const stateRef = useRef()\n    stateRef.current = { account, chainId }\n\n    const [state, dispatch] = useReducer((state, action) => {\n        if (action.type === 'updateConnections') return { ...state, connections: action.connections }\n        if (action.type === 'connectedNewSession') {\n            return {\n                ...state,\n                connections: [...state.connections, { uri: action.uri, session: action.session }]\n            }\n        }\n        if (action.type === 'disconnected') {\n            return {\n                ...state,\n                connections: state.connections.filter(x => x.uri !== action.uri)\n            }\n        }\n        if (action.type === 'requestAdded') {\n            if (state.requests.find(({ id }) => id === action.request.id)) return { ...state }\n            return { ...state, requests: [...state.requests, action.request] }\n        }\n        if (action.type === 'requestsResolved') {\n            return {\n                ...state,\n                requests: state.requests.filter(x => !action.ids.includes(x.id))\n            }\n        }\n        return { ...state }\n    }, null, () => {\n        const json = localStorage[STORAGE_KEY]\n        if (!json) return getDefaultState()\n        try {\n            return {\n                ...getDefaultState(),\n                ...JSON.parse(json)\n            }\n        } catch(e) {\n            console.error(e)\n            return getDefaultState()\n        }\n    })\n\n    const connect = useCallback(connectorOpts => {\n        if (connectors[connectorOpts.uri]) {\n            addToast('dApp already connected')\n            return connectors[connectorOpts.uri]\n        }\n        let connector\n        try {\n            connector = connectors[connectorOpts.uri] = new WalletConnectCore({\n                connectorOpts,\n                cryptoLib,\n                sessionStorage: noopSessionStorage\n            })\n        } catch(e) {\n            addToast(`Unable to connect to ${connectorOpts.uri}: ${e.message}`, { error: true })\n            return null\n        }\n\n        const onError = err => {\n            addToast(`WalletConnect error: ${(connector.session && connector.session.peerMeta && connector.session.peerMeta.name)} ${err.message || err}`, { error: true })\n            console.error('WalletConnect error', err)\n        }\n\n        let sessionStart\n        let sessionTimeout\n        if (!connector.session.peerMeta) sessionTimeout = setTimeout(() => {\n            const suggestion = /https:\\/\\/bridge.walletconnect.org/g.test(connector.session.bridge)\n                // @TODO: 'or try an alternative connection method' when we implement one\n                ? 'this dApp is using an old version of WalletConnect - please tell them to upgrade!'\n                : 'perhaps the link has expired?'\n            if (!connector.session.peerMeta) addToast(`Unable to get session from dApp - ${suggestion}`, { error: true })\n        }, SESSION_TIMEOUT)\n\n        connector.on('session_request', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n\n            sessionStart = Date.now()\n            clearTimeout(sessionTimeout)\n\n            connector.approveSession({\n                accounts: [stateRef.current.account],\n                chainId: stateRef.current.chainId,\n            })\n            // It's safe to read .session right after approveSession because 1) approveSession itself normally stores the session itself\n            // 2) connector.session is a getter that re-reads private properties of the connector; those properties are updated immediately at approveSession\n            dispatch({ type: 'connectedNewSession', uri: connectorOpts.uri, session: connector.session })\n\n            addToast('Successfully connected to '+connector.session.peerMeta.name)\n        })\n\n        connector.on('call_request', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n            if (!SUPPORTED_METHODS.includes(payload.method)) {\n                // @TODO: if the dapp is in a \"allow list\" of dApps that have fallbacks, ignore certain messages\n                // eg uni has a fallback for eth_signTypedData_v4\n                addToast(`dApp requested unsupported method: ${payload.method}`, { error: true })\n                connector.rejectRequest({ id: payload.id, error: { message: 'METHOD_NOT_SUPPORTED' }})\n                return\n            }\n            if (\n                payload.method === 'eth_sendTransaction' && payload.params[0] && payload.params[0].from\n                && payload.params[0].from.toLowerCase() !== connector.session.accounts[0].toLowerCase()\n            ) {\n                addToast(`dApp sent a request for the wrong account: ${payload.params[0].from}`, { error: true })\n                return\n            }\n            dispatch({ type: 'requestAdded', request: {\n                id: payload.id,\n                type: payload.method,\n                wcUri: connectorOpts.uri,\n                txn: payload.params[0],\n                chainId: connector.session.chainId,\n                account: connector.session.accounts[0],\n                notification: true\n            } })\n        })\n\n        connector.on('disconnect', (error, payload) => {\n            if (error) {\n                onError(error)\n                return\n            }\n\n            clearTimeout(sessionTimeout)\n            // NOTE the dispatch() will cause double rerender when we trigger a disconnect,\n            // cause we will call it once on disconnect() and once when the event arrives\n            // we can prevent this by checking if (!connectors[...]) but we'd rather stay safe and ensure\n            // the connection is removed\n            dispatch({ type: 'disconnected', uri: connectorOpts.uri })\n            connectors[connectorOpts.uri] = null\n\n            // NOTE: this event might be invoked 2 times when the dApp itself disconnects\n            // currently we don't dedupe that\n            if (sessionStart && (Date.now() - sessionStart) < SESSION_TIMEOUT) {\n                addToast('dApp disconnected immediately - perhaps it does not support the current network?', { error: true })\n            } else {\n                addToast(`${connector.session.peerMeta.name} disconnected: ${payload.params[0].message}`)\n            }\n        })\n\n        connector.on('error', onError)\n\n        return connector\n    }, [addToast])\n\n    const disconnect = useCallback(uri => {\n        // connector might not be there, either cause we disconnected before,\n        // or cause we failed to connect in the first place\n        if (connectors[uri]) {\n            connectors[uri].killSession()\n            connectors[uri] = null\n        }\n        dispatch({ type: 'disconnected', uri })\n    }, [])\n\n    const resolveMany = (ids, resolution) => {\n        state.requests.forEach(({ id, wcUri }) => {\n            if (ids.includes(id)) {\n                const connector = connectors[wcUri]\n                if (!connector) return\n                if (resolution.success) connector.approveRequest({ id, result: resolution.result })\n                else connector.rejectRequest({ id, error: { message: resolution.message } })\n            }\n        })\n        dispatch({ type: 'requestsResolved', ids })\n    }\n\n    // Side effects on init\n    useEffect(() => {\n        state.connections.forEach(({ uri, session }) => {\n            if (!connectors[uri]) connect({ uri, session })\n        })\n    // we specifically want to run this only once despite depending on state\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [connect])\n\n    // Side effects that will run on every state change/rerender\n    useEffect(() => {\n        // restore connectors and update the ones that are stale\n        let updateConnections = false\n        state.connections.forEach(({ uri, session }) => {\n            if (connectors[uri]) {\n                const connector = connectors[uri]\n                const session = connector.session\n                if (session.accounts[0] !== account || session.chainId !== chainId) {\n                    connector.updateSession({ accounts: [account], chainId })\n                    updateConnections = true\n                }\n            }\n        })\n        \n        localStorage[STORAGE_KEY] = JSON.stringify(state)\n\n        if (updateConnections) dispatch({\n            type: 'updateConnections',\n            connections: state.connections\n                .filter(({ uri }) => connectors[uri])\n                .map(({ uri }) => ({ uri, session: connectors[uri].session }))\n        })\n    }, [state, account, chainId, connect])\n\n    // Initialization effects\n    useEffect(() => runInitEffects(connect, account), [connect, account])\n\n    return {\n        connections: state.connections,\n        requests: state.requests,\n        resolveMany,\n        connect, disconnect\n    }\n}\n\n// Initialization side effects\n// Connect to the URL, read from clipboard, etc.\nfunction runInitEffects(wcConnect, account) {\n    const query = new URLSearchParams(window.location.href.split('?').slice(1).join('?'))\n    const wcUri = query.get('uri')\n    if (wcUri) wcConnect({ uri: wcUri })\n\n    // hax\n    window.wcConnect = uri => wcConnect({ uri })\n\n    // @TODO on focus and on user action\n    const clipboardError = e => console.log('non-fatal clipboard/walletconnect err:', e.message)\n    const tryReadClipboard = async () => {\n        if (!account) return\n        if (isFirefox()) return\n        try {\n            const clipboard = await navigator.clipboard.readText()\n            if (clipboard.startsWith('wc:') && !connectors[clipboard]) wcConnect({ uri: clipboard })\n        } catch(e) { clipboardError(e) }\n    }\n\n    tryReadClipboard()\n    window.addEventListener('focus', tryReadClipboard)\n    return () => window.removeEventListener('focus', tryReadClipboard)\n}\n","import { useEffect, useCallback, useState, useRef } from 'react'\nimport { fetchCaught } from '../lib/fetch'\n\n// 250ms after we've triggered a load of another URL, we will clear the data\n//  so that the component that uses this hook cann display the loading spinner\nconst RESET_DATA_AFTER = 250\n\nexport default function useRelayerData(url) {\n  const [isLoading, setLoading] = useState(true)\n  const [data, setData] = useState(null)\n  const [err, setErr] = useState(null)\n  const prevUrl = useRef('')\n\n  const updateData = useCallback(async () => {\n    const { resp, body, errMsg } = await fetchCaught(url)\n\n    if (resp && resp.status === 200) {\n      return body\n    } else {\n      console.log('relayerData error', { resp, body, errMsg })\n      throw new Error(errMsg || `status code ${resp && resp.status}`)\n    }\n  }, [url])\n\n  useEffect(() => {\n    if (!url) return\n\n    // Data reset: if some time passes before we load the next piece of data, and the URL is different,\n    // we will reset the data so that the UI knows to display a loading indicator\n    let resetDataTimer = null\n    const stripQuery = x => x.split('?')[0]\n    if (stripQuery(prevUrl.current) !== stripQuery(url)) {\n      resetDataTimer = setTimeout(() => setData(null), RESET_DATA_AFTER)\n    }\n    prevUrl.current = url\n\n    let unloaded = false\n    setLoading(true)\n    setErr(null)\n    updateData()\n      .then(data => !unloaded && prevUrl.current === url && setData(data))\n      .catch(e => !unloaded && setErr(e.message || e))\n      .then(() => {\n        clearTimeout(resetDataTimer)\n        !unloaded && setLoading(false)\n      })\n    return () => {\n      unloaded = true\n      clearTimeout(resetDataTimer)\n    }\n  }, [url, updateData])\n\n  return { data, isLoading, errMsg: err }\n}\n","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { nativeToken, token } from '../humanReadableTransactions'\n\nconst iface = new Interface(abis.UniV2Router)\nconst recipientText = (recipient, txnFrom) => recipient.toLowerCase() === txnFrom.toLowerCase()\n  ? `` : ` and send it to ${recipient}`\nconst deadlineText = (deadlineSecs, mined) => {\n  const minute = 60000\n  const deadline = deadlineSecs * 1000\n  const diff = deadline - Date.now()\n  if (diff < 0 && diff > -minute*2) return `, expired just now`\n  // Disabled this: this is a bit of a hack cause we don't want it to show for mined txns\n  // we don't really need it for pending ones, simply because we'll show the big error message instead\n  //if (diff < 0) return `, expired ${Math.floor(-diff / minute)} minutes ago`\n  if (diff < 0) return ''\n  if (!mined && diff < minute) return `, expires in less than a minute`\n  if (!mined && diff < 10*minute) return `, expires in ${Math.floor(diff / minute)} minutes`\n  return ''\n}\n\nconst uniV2Mapping = {\n  // ordered in the same order as the router\n  [iface.getSighash('swapExactTokensForTokens')]: (txn, network, opts = {}) => {\n    const [ amountIn, amountOutMin, path, to, deadline ] = iface.parseTransaction(txn).args\n    const outputAsset = path[path.length - 1]\n    return [`Swap ${token(path[0], amountIn)} for at least ${token(outputAsset, amountOutMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('swapTokensForExactTokens')]: (txn, network, opts = {}) => {\n    const [ amountOut, amountInMax, path, to, deadline ] = iface.parseTransaction(txn).args\n    const outputAsset = path[path.length - 1]\n    return [`Swap up to ${token(path[0], amountInMax)} for ${token(outputAsset, amountOut)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('swapExactETHForTokens')]: (txn, network, opts = {}) => {\n    const { args, value } = iface.parseTransaction(txn)\n    const [ amountOutMin, path, to, deadline ] = args\n    const outputAsset = path[path.length - 1]\n    return [`Swap ${nativeToken(network, value)} for at least ${token(outputAsset, amountOutMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('swapTokensForExactETH')]: (txn, network, opts = {}) => {\n    const [ amountOut, amountInMax, path, to, deadline ] = iface.parseTransaction(txn).args\n    return [`Swap up to ${token(path[0], amountInMax)} for ${nativeToken(network, amountOut)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('swapExactTokensForETH')]: (txn, network, opts = {}) => {\n    const [ amountIn, amountOutMin, path, to, deadline ] = iface.parseTransaction(txn).args\n    return [`Swap ${token(path[0], amountIn)} for at least ${nativeToken(network, amountOutMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('swapETHForExactTokens')]: (txn, network, opts = {}) => {\n    const { args, value } = iface.parseTransaction(txn)\n    const [ amountOut, path, to, deadline ] = args\n    const outputAsset = path[path.length - 1]\n    return [`Swap up to ${nativeToken(network, value)} for ${token(outputAsset, amountOut)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  // Liquidity\n  [iface.getSighash('addLiquidity')]: (txn, network, opts = {}) => {\n    const [tokenA, tokenB, amountADesired, amountBDesired, /*amountAMin*/, /*amountBMin*/, to, deadline] =  iface.parseTransaction(txn).args\n    return [`Add liquidity: ${token(tokenA, amountADesired)} and ${token(tokenB, amountBDesired)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('addLiquidityETH')]: (txn, network, opts = {}) => {\n    const { args, value } = iface.parseTransaction(txn)\n    const [token, amountTokenDesired, /*amountTokenMin*/, /*amountETHMin*/, to, deadline] = args\n    return [`Add liquidity: ${token(token, amountTokenDesired)} and ${nativeToken(network, value)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('removeLiquidity')]: (txn, network, opts = {}) => {\n    const [tokenA, tokenB, /*liquidity*/, amountAMin, amountBMin, to, deadline] =  iface.parseTransaction(txn).args\n    return [`Remove liquidity: at least ${token(tokenA, amountAMin)} and ${token(tokenB, amountBMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  [iface.getSighash('removeLiquidityETH')]: (txn, network, opts = {}) => {\n    const [token, /*liquidity*/, amountTokenMin, amountETHMin, to, deadline] =  iface.parseTransaction(txn).args\n    return [`Remove liquidity: at least ${token(token, amountTokenMin)} and ${nativeToken(network, amountETHMin)}${recipientText(to, txn.from)}${deadlineText(deadline, opts.mined)}`]\n  },\n  // NOTE: We currently do not support *WithPermit functions cause they require an ecrecover signature\n  // Uniswap will detect we don't support it cause it will fail on requesting eth_signTypedData_v4\n}\n\nconst ifaceV3 = new Interface(abis.UniV3Router)\nconst parsePath = pathBytes => {\n    // some decodePacked fun\n    // can we do this with Ethers AbiCoder? probably not\n    let path = []\n    // address, uint24\n    for (let i = 2; i < pathBytes.length; i += 46) {\n      path.push('0x' + pathBytes.substr(i, 40))\n    }\n    return path\n}\nconst uniV3Mapping = {\n  [ifaceV3.getSighash('multicall')]: (txn, network) => {\n    const [ calls ] = ifaceV3.parseTransaction(txn).args\n    // @TODO: Multicall that outputs ETH should be detected as such and displayed as one action\n    // the current verbosity of \"Swap ..., unwrap WETH to ETH\" will be a nice pedantic quirk\n    return calls.map(data => {\n      const humanizer = uniV3Mapping[data.slice(0, 10)]\n      return humanizer ? humanizer({ ...txn, data }, network) : null\n    }).flat().filter(x => x)\n  },\n  // NOTE: selfPermit is not supported cause it requires an ecrecover signature\n  [ifaceV3.getSighash('exactInputSingle')]: (txn, network) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    // @TODO: consider fees\n    return [`Swap ${token(params.tokenIn, params.amountIn)} for at least ${token(params.tokenOut, params.amountOutMinimum)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline)}`]\n  },\n  [ifaceV3.getSighash('exactInput')]: (txn, network) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    const path = parsePath(params.path)\n    return [`Swap ${token(path[0], params.amountIn)} for at least ${token(path[path.length - 1], params.amountOutMinimum)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline)}`]\n  },\n  [ifaceV3.getSighash('exactOutputSingle')]: (txn, network) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    return [`Swap up to ${token(params.tokenIn, params.amountInMaximum)} for ${token(params.tokenOut, params.amountOut)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline)}`]\n  },\n  [ifaceV3.getSighash('exactOutput')]: (txn, network) => {\n    const [ params ] = ifaceV3.parseTransaction(txn).args\n    const path = parsePath(params.path)\n    return [`Swap up to ${token(path[0], params.amountInMaximum)} for ${token(path[path.length - 1], params.amountOut)}${recipientText(params.recipient, txn.from)}${deadlineText(params.deadline)}`]\n  },\n  [ifaceV3.getSighash('unwrapWETH9')]: (txn, network) => {\n    const [ amountMin, recipient ] = ifaceV3.parseTransaction(txn).args\n    return [`Unwrap at least ${nativeToken(network, amountMin)}${recipientText(recipient, txn.from)}`]\n  },\n}\n\nconst mapping = { ...uniV2Mapping, ...uniV3Mapping }\nexport default mapping","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { token, getName } from '../humanReadableTransactions'\nimport { constants } from 'ethers'\n\nconst iface = new Interface(abis.ERC20)\n\nconst ERC20Mapping = {\n  [iface.getSighash('approve')]: (txn, network) => {\n    const [ approvedAddress, amount ] = iface.parseTransaction(txn).args\n    const name = getName(approvedAddress, network)\n    const tokenName = getName(txn.to, network)\n    if (amount.eq(0)) return [`Revoke approval for ${name} to use ${tokenName}`]\n    if (amount.eq(constants.MaxUint256)) return [`Approve ${name} to use your ${tokenName}`]\n    return [`Approve ${name} to use ${token(txn.to, amount)}`]\n  },\n  [iface.getSighash('transfer')]: (txn, network) => {\n    const [ to, amount ] = iface.parseTransaction(txn).args\n    return [`Send ${token(txn.to, amount)} to ${getName(to, network)}`]\n  },\n  /*\n  // HACK: since this conflicts with ERC721 in terms of sigHash, but ERC721 is more likely to use this function from a user perspective, do not define this one\n  [iface.getSighash('transferFrom')]: (txn, network) => {\n    const [ from, to, amount ] = iface.parseTransaction(txn).args\n    return [`Send ${token(txn.to, amount)} from ${getName(from, network)} to ${getName(to, network)}`]\n  },*/\n}\nexport default ERC20Mapping\n","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { token } from '../humanReadableTransactions'\n\nconst iface = new Interface(abis.AaveLendingPoolV2)\nconst onBehalfText = (onBehalf, txnFrom) => onBehalf.toLowerCase() !== txnFrom.toLowerCase()\n  ? ' on behalf of '+onBehalf\n  : ''\n\nconst AaveMapping = {\n  [iface.getSighash('deposit')]: (txn, network) => {\n    const [ asset, amount, onBehalf ] = iface.parseTransaction(txn).args\n    return [`Deposit ${token(asset, amount)} to Aave lending pool${onBehalfText(onBehalf, txn.from)}`]\n  },\n  [iface.getSighash('withdraw')]: (txn, network) => {\n    const [ asset, amount, onBehalf ] = iface.parseTransaction(txn).args\n    return [`Withdraw ${token(asset, amount)} from Aave lending pool${onBehalfText(onBehalf, txn.from)}`]\n  },\n  [iface.getSighash('repay')]: (txn, network) => {\n    const [ asset, amount, onBehalf ] = iface.parseTransaction(txn).args\n    return [`Repay ${token(asset, amount)} to Aave lending pool${onBehalfText(onBehalf, txn.from)}`]\n  },\n  [iface.getSighash('borrow')]: (txn, network) => {\n    const [ asset, amount ] = iface.parseTransaction(txn).args\n    return [`Borrow ${token(asset, amount)} from Aave lending pool`]\n  },\n}\nexport default AaveMapping","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { getName } from '../humanReadableTransactions'\n\nconst iface = new Interface(abis.ERC721)\nconst fromText = (from, txnFrom) => from.toLowerCase() !== txnFrom.toLowerCase() ? ` from ${from}` : ''\n\nconst ERC721Mapping = {\n  [iface.getSighash('transferFrom')]: (txn, network) => {\n    const [ from, to, tokenId ] = iface.parseTransaction(txn).args\n    return [`Send token #${tokenId.toString(10)}${fromText(from, txn.from)} to ${getName(to, network)}`]\n  },\n  [iface.getSighash('safeTransferFrom(address,address,uint256)')]: (txn, network) => {\n    const [ from, to, tokenId ] = iface.parseTransaction(txn).args\n    return [`Send token #${tokenId.toString(10)}${fromText(from, txn.from)} to ${getName(to, network)}`]\n  }\n}\nexport default ERC721Mapping","import { abis } from '../../consts/humanizerInfo'\nimport { Interface } from 'ethers/lib/utils'\nimport { nativeToken } from '../humanReadableTransactions'\n\nconst iface = new Interface(abis.WETH)\nconst WETHMapping = {\n  [iface.getSighash('deposit')]: (txn, network) => {\n    const { value } = iface.parseTransaction(txn)\n    return [`Wrap ${nativeToken(network, value)}`]\n  },\n  [iface.getSighash('withdraw')]: (txn, network) => {\n    const [ amount ] = iface.parseTransaction(txn).args\n    return [`Unwrap ${nativeToken(network, amount)}`]\n  },\n}\nexport default WETHMapping","// @TODO update those pre-launch\n// NOTE: those should only apply to new accounts, never for existing accounts, since some existing accounts may be on older versions of those\nconst accountPresets = {\n    salt: '0x0000000000000000000000000000000000000000000000000000000000000001',\n    identityFactoryAddr: '0xBf07a0Df119Ca234634588fbDb5625594E2a5BCA',\n    baseIdentityAddr: '0x2A2b85EB1054d6f0c6c2E37dA05eD3E5feA684EF',\n    quickAccManager: '0xfF3f6D14DF43c112aB98834Ee1F82083E07c26BF',\n    feeCollector: '0x942f9CE5D9a33a82F88D233AEb3292E680230348',\n    quickAccTimelock: 259200 // 3 days\n}\nexport default accountPresets","const privilegesOptions = {\n  true: '0x0000000000000000000000000000000000000000000000000000000000000001',\n  false: '0x0000000000000000000000000000000000000000000000000000000000000000',\n}\nexport default privilegesOptions\n","import { Interface } from 'ethers/lib/utils'\nimport { getName } from '../humanReadableTransactions'\nimport accountPresets from '../../consts/accountPresets'\nimport privilegesOptions from '../../consts/privilegesOptions'\n\nconst iface = new Interface(require('adex-protocol-eth/abi/Identity5.2'))\n\nconst IdentityMapping = {\n  [iface.getSighash('setAddrPrivilege')]: (txn, network) => {\n    const [ addr, privLevel ] = iface.parseTransaction(txn).args\n    const name = getName(addr, network)\n    const isQuickAccManager = addr.toLowerCase() === accountPresets.quickAccManager.toLowerCase()\n    if (privLevel === privilegesOptions.false) {\n      if (isQuickAccManager) return [`Revoke email/password access`]\n      else return [`Revoke access for signer ${name}`]\n    } else if (privLevel === privilegesOptions.true) {\n      if (isQuickAccManager) return [`INVALID PROCEDURE - DO NOT SIGN`]\n      return [`Authorize signer ${name}`]\n    } else {\n      if (isQuickAccManager) return [`Add a new email/password signer`]\n      return [`Set special authorization for ${name}`]\n    }\n  }\n}\nexport default IdentityMapping\n","import { Interface, getAddress, hexConcat } from 'ethers/lib/utils'\nimport { generateAddress2 } from 'ethereumjs-util'\n\n// the factory can be used for deploying contracts from Ambire\nconst iface = new Interface(require('adex-protocol-eth/abi/IdentityFactory'))\n\nconst FactoryMapping = {\n  [iface.getSighash('deploy')]: (txn, network) => {\n    const [ code, salt ] = iface.parseTransaction(txn).args\n    const addr = getAddress('0x' + generateAddress2(txn.to, hexConcat([salt]), code).toString('hex'))\n    return [`Deploy contract with address ${addr}`]\n  }\n}\nexport default FactoryMapping\n","import UniRouters from './UniRouters'\nimport ERC20 from './ERC20'\nimport AaveLendingPoolV2 from './AaveLendingPoolV2'\nimport ERC721 from './ERC721'\nimport WETH from './WETH'\nimport AmbireIdentity from './AmbireIdentity'\nimport AmbireFactory from './AmbireFactory'\n\nconst all = {\n\t...UniRouters,\n\t...AaveLendingPoolV2,\n\t...ERC20,\n\t...ERC721,\n\t...WETH,\n\t...AmbireIdentity,\n\t...AmbireFactory,\n}\nexport default all","import { formatUnits } from 'ethers/lib/utils'\nimport { constants } from 'ethers'\nimport { names, tokens } from '../consts/humanizerInfo'\nimport networks from '../consts/networks'\nimport humanizers from './humanizers'\n\n// address (lwoercase) => name\nconst knownAliases = {}\n\nexport function getTransactionSummary(txn, networkId, accountAddr, opts = {}) {\n    const [to, value, data = '0x'] = txn\n    const network = networks.find(x => x.id === networkId || x.chainId === networkId)\n    if (!network) return 'Unknown network (unable to parse)'\n\n    if (to === '0x' || !to) {\n        return 'Deploy contract'\n    }\n\n    const tokenInfo = tokens[to.toLowerCase()]\n    const name = names[to.toLowerCase()]\n\n    if (data === '0x' && to.toLowerCase() === accountAddr.toLowerCase()) {\n        // Doesn't matter what the value is, this is always a no-op\n        return `Transaction cancellation`\n    }\n\n    let callSummary, sendSummary\n    if (parseInt(value) > 0) sendSummary = `send ${nativeToken(network, value)} to ${name || to}`\n    if (data !== '0x') {\n        callSummary = `Unknown interaction with ${name || (tokenInfo ? tokenInfo[0] : to)}`\n\n        const sigHash = data.slice(0, 10)\n        const humanizer = humanizers[sigHash]\n        if (humanizer) {\n            try {\n                const actions = humanizer({ to, value, data, from: accountAddr }, network, opts)\n                return actions.join(', ')\n            } catch (e) {\n                callSummary += ' (unable to parse)'\n                console.error('internal tx humanization error', e)\n            }\n        }\n    }\n    return [callSummary, sendSummary].filter(x => x).join(', ')\n}\n\n// Currently takes network because one day we may be seeing the same addresses used on different networks\nexport function getName(addr, network) {\n    const address = addr.toLowerCase()\n    if (knownAliases[address]) return `${knownAliases[address]} (${addr})`\n    return names[address] || (tokens[address] ? tokens[address][0] + ' token' : null) || addr\n}\n\nexport function token(addr, amount) {\n    const address = addr.toLowerCase()\n    const assetInfo = tokens[address]\n    if (assetInfo) {\n        if (constants.MaxUint256.eq(amount)) return `maximum ${assetInfo[0]}`\n        return `${formatUnits(amount, assetInfo[1])} ${assetInfo[0]}`\n    } else {\n        return `${formatUnits(amount, 0)} units of unknown token`\n    }\n}\n\nexport function nativeToken(network, amount) {\n    // All EVM chains use a 18 decimal native asset\n    if (network) {\n        return `${formatUnits(amount, 18)} ${network.nativeAssetSymbol}`\n    } else {\n        return `${formatUnits(amount, 18)} unknown native token`\n    }\n}\n\nexport function setKnownAddresses(addrs) {\n    addrs.forEach(({ address, name }) => knownAliases[address.toLowerCase()] = name)\n}\n\n// @TODO\n// export function getMethodName(txn)","import { useCallback, useEffect, useMemo, useState } from 'react'\nimport { useToasts } from './toasts'\nimport * as blockies from 'blockies-ts'\nimport { isValidAddress, isKnownTokenOrContract } from '../helpers/address'\nimport { setKnownAddresses } from '../lib/humanReadableTransactions'\n\nconst accountType = ({ email, signerExtra }) => {\n    const walletType = signerExtra && signerExtra.type === 'ledger' ? 'Ledger' : signerExtra && signerExtra.type === 'trezor' ? 'Trezor' : 'Web3'\n    return email ? `Ambire account for ${email}` : `Ambire account (${walletType})`\n}\nconst toIcon = seed => blockies.create({ seed }).toDataURL()\n\nconst useAddressBook = ({ accounts, selectedAcc }) => {\n    const { addToast } = useToasts()\n\n    const addressList = useMemo(() => {\n        try {\n            const addresses = JSON.parse(localStorage.addresses || '[]')\n            if (!Array.isArray(addresses)) throw new Error('Address Book: incorrect format')\n            return [\n                ...accounts.filter(({ id }) => id !== selectedAcc).map(account => ({\n                    isAccount: true,\n                    name: accountType(account),\n                    address: account.id,\n                    icon: toIcon(account.id)\n                })),\n                ...addresses.map(entry => ({\n                    ...entry,\n                    icon: toIcon(entry.address)\n                }))\n            ]\n        } catch (e) {\n            console.error('Address Book parsing failure', e)\n            return []\n        }\n    }, [accounts, selectedAcc])\n\n    // a bit of a 'cheat': update the humanizer with the latest known addresses\n    // this is breaking the react patterns cause the humanizer has a 'global' state, but that's fine since it simply constantly learns new addr aliases,\n    // so there's no 'inconsistent state' there, the more the better\n    setKnownAddresses(addressList)\n\n    const [addresses, setAddresses] = useState(() => addressList)\n\n    const updateAddresses = addresses => {\n        setAddresses(addresses.map(entry => ({\n            ...entry,\n            icon: toIcon(entry.address)\n        })))\n        localStorage.addresses = JSON.stringify(addresses.filter(({ isAccount }) => !isAccount))\n    }\n\n    const isKnownAddress = useCallback(address => [\n        ...addresses.map(({ address }) => address),\n        ...accounts.map(({ id }) => id)\n    ].includes(address), [addresses, accounts])\n\n    const addAddress = useCallback((name, address) => {\n        if (!name || !address) throw new Error('Address Book: invalid arguments supplied')\n        if (!isValidAddress(address)) throw new Error('Address Book: invalid address format')\n        if (isKnownTokenOrContract(address)) return addToast('The address you\\'re trying to add is a smart contract.', { error: true })\n\n        const newAddresses = [\n            ...addresses,\n            {\n                name,\n                address\n            }\n        ]\n\n        updateAddresses(newAddresses)\n\n        addToast(`${address} added to your Address Book.`)\n    }, [addresses, addToast])\n\n    const removeAddress = useCallback((name, address) => {\n        if (!name || !address) throw new Error('Address Book: invalid arguments supplied')\n        if (!isValidAddress(address)) throw new Error('Address Book: invalid address format')\n\n        const newAddresses = addresses\n            .filter(a => !(a.name === name && a.address === address))\n\n        updateAddresses(newAddresses)\n\n        addToast(`${address} removed from your Address Book.`)\n    }, [addresses, addToast])\n\n    useEffect(() => setAddresses(addressList), [accounts, selectedAcc, addressList])\n\n    return {\n        addresses,\n        addAddress,\n        removeAddress,\n        isKnownAddress\n    }\n}\n\nexport default useAddressBook","import { useEffect, useCallback } from 'react'\nimport { useToasts} from './toasts'\n\nlet documentTitle = document.title\nlet flashingTitleInterval = null\nlet stickyIds = []\n\nconst showFlashingTitle = () => {\n    let count = 0\n    clearInterval(flashingTitleInterval)\n    flashingTitleInterval = setInterval(() => {\n        document.title = (count % 2 === 0 ? '' : '') + ' PENDING SIGNING REQUEST'\n        count++\n    }, 500)\n}\n\nconst removeFlashingTitle = () => {\n    clearInterval(flashingTitleInterval)\n    document.title = documentTitle\n}\n\nconst useAttentionGrabber = ({ eligibleRequests, isSendTxnShowing, onSitckyClick }) => {\n    const { addToast, removeToast } = useToasts()\n\n    const removeStickyToasts = useCallback(() => stickyIds.forEach(id => removeToast(id)), [removeToast])\n    \n    useEffect(() => {\n        if (eligibleRequests.length) {\n            if (isSendTxnShowing) removeStickyToasts()\n            else {\n                stickyIds.push(addToast('Transactions waiting to be signed', {\n                    position: 'right',\n                    sticky: true,\n                    badge: eligibleRequests.length,\n                    onClick: () => onSitckyClick()\n                }))\n            }\n\n            !(window.Notification && Notification.permission !== 'denied') ? showFlashingTitle() : removeFlashingTitle()\n        } else {\n            removeStickyToasts()\n            removeFlashingTitle()\n        }\n\n        return () => clearInterval(flashingTitleInterval)\n    }, [removeStickyToasts, eligibleRequests, isSendTxnShowing, onSitckyClick, addToast, removeToast])\n}\n\nexport default useAttentionGrabber\n\n","import { createContext, useCallback, useState } from 'react'\nimport './ModalProvider.scss'\n\nconst ModalContext = createContext(null)\n\nconst ModalProvider = ({ children }) => {\n    const [modal, setModal] = useState(null)\n    \n    const showModal = useCallback((element, opts = { disableClose: false }) => setModal({element, opts}), [])\n    const hideModal = useCallback(() => setModal(null), [])\n    \n    return (\n        <ModalContext.Provider value={{ showModal, hideModal }}>\n            { \n                modal ? \n                    <div id=\"modal-container\">\n                        <div className=\"backdrop\" onClick={modal.opts.disableClose ? null : hideModal }></div>\n                        { modal.element }\n                    </div>\n                    :\n                    null\n            }\n            { children }\n        </ModalContext.Provider>\n    )\n}\n\nexport { ModalContext }\nexport default ModalProvider","import { useContext } from 'react'\nimport { ModalContext } from '../components/ModalProvider/ModalProvider'\n\nconst useModals = () => useContext(ModalContext)\nexport default useModals","import { useEffect, useState } from 'react'\nimport { isFirefox } from '../lib/isFirefox'\n\nconst onPermissionChange = async (name, listener) => {\n    try {\n        const status = await navigator.permissions.query({ name })\n        status.onchange = () => listener(status.state === 'granted')\n        return status.state === 'granted'\n    } catch(e) {\n        console.error(e);\n        return false\n    }\n}\n\nconst usePermissions = () => {\n    const [arePermissionsLoaded, setPermissionsLoaded] = useState(false)\n    const [isClipboardGranted, setClipboardGranted] = useState(false)\n    const [isNoticationsGranted, setNotificationsGranted] = useState(false)\n    const [modalHidden, setModalHidden] = useState(() => localStorage.permissionsModalHidden === 'true')\n\n    const checkForPermissions = async () => {\n\tif (isFirefox()) {\n\t\tsetClipboardGranted(false)\n\t} else {\n\t\tconst clipboardState = await onPermissionChange('clipboard-read', state => setClipboardGranted(state))\n\t\tsetClipboardGranted(clipboardState)\n\t}\n\n        const notificationsState = await onPermissionChange('notifications', state => setNotificationsGranted(state))\n        setNotificationsGranted(notificationsState)\n\n        setPermissionsLoaded(true)\n    }\n\n    useEffect(() => localStorage.permissionsModalHidden = modalHidden, [modalHidden])\n    useEffect(() => checkForPermissions(), [])\n\n    return {\n        isClipboardGranted,\n        isNoticationsGranted,\n        arePermissionsLoaded,\n        modalHidden,\n        setModalHidden\n    }\n}\n\nexport default usePermissions\n","import './Modal.scss'\n\nimport { MdClose } from 'react-icons/md'\nimport { useModals } from '../../../hooks'\n\nconst Modal = ({ children, id, title, isCloseBtnShown = true }) => {\n    const { hideModal } = useModals()\n\n    return (\n        <div id={id} className=\"modal\">\n            <div className=\"heading\">\n                <div className=\"title\">{ title }</div>\n                {isCloseBtnShown ? (<div className=\"close\" onClick={hideModal}>\n                    <MdClose/>\n                </div>) : <></>}\n            </div>\n            <div className=\"content\">{ children }</div>\n        </div>\n    )\n}\n\nexport default Modal\n","import { useCallback, useEffect, useState } from 'react'\nimport './Segments.scss'\n\nconst Segments = ({ small, defaultValue, segments, onChange }) => {\n    const [value, setValue] = useState(defaultValue);\n\n    const setSegment = useCallback(value => {\n        setValue(value)\n        onChange(value)\n    }, [onChange])\n\n    useEffect(() => {\n        setSegment(defaultValue)\n    }, [defaultValue, setSegment])\n\n    return (\n        <div className={`segments ${small ? 'small': ''}`}>\n            {\n                segments.map(segment => (\n                    <div className={`segment ${segment.value === value ? 'active' : ''}`} key={segment.value} onClick={() => setSegment(segment.value)}>\n                        {\n                            segment.icon ?\n                                <div className=\"icon\">{ segment.icon }</div>\n                                :\n                                null\n                        }\n                        { segment.value }\n                    </div>\n                ))\n            }\n        </div>\n    )\n}\n\nexport default Segments","import './Select.scss';\n\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { BsChevronDown } from 'react-icons/bs'\nimport { CSSTransition } from 'react-transition-group';\nimport useOnClickOutside from '../../../helpers/onClickOutside';\n\nconst Select = ({ children, native, monospace, searchable, disabled, label, defaultValue, items, onChange }) => {\n    const ref = useRef();\n    const hiddenTextInput = useRef();\n    const transitionRef = useRef();\n    const [isOpen, setOpen] = useState();\n    const [search, setSearch] = useState('');\n    const [selectedItem, setSelectedItem] = useState({\n        label: null,\n        value: null,\n        icon: null,\n    });\n\n    const filteredItems = search.length ? items.filter(({ label }) => label.toLowerCase().includes(search.toLowerCase())) : items\n\n    const selectItem = useCallback(item => {\n        setSelectedItem(item);\n        onChange(item.value);\n    }, [onChange])\n\n    useEffect(() => {\n        if (items.length) selectItem(items.find(item => item.value === defaultValue) || items[0])\n        else setSelectedItem({})\n    }, [defaultValue, items, selectItem]);\n\n    useEffect(() => {\n        if (isOpen && searchable) {\n            hiddenTextInput.current.focus()\n            setSearch('')\n        }\n    }, [isOpen, searchable])\n\n    useOnClickOutside(ref, () => setOpen(false));\n\n    return (\n        !native ? \n            <div className={`select ${monospace ? 'monospace': ''} ${disabled ? 'disabled' : ''}`} ref={ref}>\n                {\n                    searchable ? \n                        <input type=\"text\" className=\"search-input\" disabled={disabled} value={search} ref={hiddenTextInput} onInput={({ target }) => setSearch(target.value)}/>\n                        :\n                        null\n                }\n                {\n                    label ? \n                        <label>{ label }</label>\n                        :\n                        null\n                }\n                {\n                    selectedItem ? \n                        <div className=\"input\" onClick={() => setOpen(!isOpen)}>\n                            {\n                                selectedItem.icon ? \n                                    <div className=\"icon\">\n                                        <img src={selectedItem.icon} alt=\"Icon\" />\n                                    </div>\n                                    :\n                                    null\n                            }\n                            { selectedItem.label || selectedItem.value }\n                            <div className=\"separator\"></div>\n                            <div className={`handle ${isOpen ? 'open' : ''}`}>\n                                <BsChevronDown size={20}></BsChevronDown>\n                            </div>\n                            {\n                                <CSSTransition unmountOnExit in={isOpen} timeout={200} classNames=\"fade\" nodeRef={transitionRef}>\n                                    <div className=\"list\" ref={transitionRef}>\n                                        {\n                                            filteredItems.map(item => (\n                                                <div className={`option ${item.value === selectedItem.value ? 'active' : ''}`} key={item.value} onClick={() => selectItem(item)}>\n                                                    <div className=\"icon\">\n                                                        {\n                                                            item.icon ? \n                                                                <img src={item.icon} alt=\"Icon\" />\n                                                                :\n                                                                null\n                                                        }\n                                                    </div>\n                                                    { item.label || item.value }\n                                                </div>\n                                            ))\n                                        }\n                                        { children }\n                                    </div>\n                                </CSSTransition>\n                            }\n                        </div>\n                        :\n                        null\n                }\n            </div>\n            :\n            <select className=\"select\" disabled={disabled} onChange={ev => onChange(ev.target.value)} defaultValue={defaultValue}>\n                {\n                    items.map(item => (\n                        <option key={item.value} value={item.value}>\n                            { item.label || item.value }\n                        </option>\n                    ))\n                }\n            </select>\n    );\n};\n\nexport default Select;","import './TextInput.scss'\n\nimport { forwardRef } from 'react';\nimport { MdContentCopy } from 'react-icons/md';\nimport { useToasts } from '../../../hooks/toasts';\n\nconst TextInput = forwardRef(({ value, placeholder, info, label, disabled, copy, onInput }, ref) => {\n    const { addToast } = useToasts();\n\n    const onClick = async () => {\n        await navigator.clipboard.writeText(value);\n        addToast(\"Copied to clipboard!\");\n    };\n\n    return (\n        <div className={`text-input ${copy ? 'copy' : ''}`}>\n            {\n                label ?\n                    <label>{ label }</label>\n                    :\n                    null\n            }\n            <div className=\"text-input-container\" onClick={copy ? onClick : null}>\n                <input value={value} type=\"text\" placeholder={placeholder} disabled={copy || disabled} onInput={ev => onInput(ev.target.value)} ref={ref}/>\n                {\n                    copy ?\n                        <div className=\"icon\">\n                            <MdContentCopy size={20}/>\n                        </div>\n                        :\n                        null\n                }\n            </div>\n            {\n                info ?\n                    <div className=\"info\">\n                        { info }\n                    </div>\n                    :\n                    null\n            }\n        </div>\n    )\n})\n\nexport default TextInput","import './NumberInput.scss'\n\nconst NumberInput = ({ disabled, precision, label, value, button, onButtonClick, onInput }) => {\n    const onInputValue = ({ target }) => {\n        if (!onInput) return\n        if (!target.value.length) return onInput('')\n\n        const afterDecimals = target.value.split('.')[1] \n        if (afterDecimals && afterDecimals.length > precision) return\n\n        const isIntOrFloat = /^[0-9]+\\.{0,1}[0-9]*$/g.test(target.value)\n        isIntOrFloat && onInput(target.value)\n    }\n\n    return (\n        <div className={`number-input ${disabled ? 'disabled' : ''}`}>\n            {\n                label ?\n                    <label>{ label }</label>\n                    :\n                    null\n            }\n            <div className=\"input\">\n                <input\n                    type=\"text\"\n                    disabled={disabled}\n                    value={value}\n                    onInput={onInputValue}\n                />\n                {\n                    button ?\n                        <div className=\"button\" onClick={onButtonClick}>\n                            { button }\n                        </div>\n                        :\n                        null\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default NumberInput","import './Toggle.scss'\n\nconst Toggle = ({ defaultChecked, checked, onChange }) => {\n    return (\n        <label className=\"toggle\">\n            <input type=\"checkbox\" defaultChecked={defaultChecked} checked={checked} onChange={onChange}/>\n            <span className=\"slider\"></span>\n        </label>\n    )\n}\n\nexport default Toggle","import { useState } from 'react';\nimport './ToolTip.scss'\n\nconst ToolTip = ({ children, label, className }) => {\n    const [mousePosition, setMousePosition] = useState({ x: 0, y: 0})\n\n    const onMouseMove = ({ clientY, clientX }) => setMousePosition({ x: clientX + 15, y: clientY + 15 })\n\n    return (\n        <div className={`tooltip ${className}`} onMouseMove={onMouseMove}>\n            { children }\n            <label style={{top: mousePosition.y, left: mousePosition.x}}>{ label }</label>\n        </div>\n    )\n}\n\nexport default ToolTip","import { useState, useRef } from 'react'\nimport { Checkbox } from \"../common\"\n\nexport default function LoginOrSignupForm({ action = 'LOGIN', onAccRequest, inProgress }) {\n    const passConfirmInput = useRef(null)\n    const [state, setState] = useState({\n      email: '', passphrase: '', passphraseConfirm: '', action\n    })\n    const onSubmit = e => {\n      e.preventDefault()\n      onAccRequest({\n        action: state.action,\n        accType: 'QUICK',\n        email: state.email,\n        passphrase: state.passphrase,\n        backupOptout: state.backupOptout,\n      })\n    }\n    const onUpdate = updates => {\n      const newState = { ...state, ...updates }\n      setState(newState)\n      const shouldValidate = newState.action === 'SIGNUP'\n      const invalid = shouldValidate && (\n        newState.passphrase !== newState.passphraseConfirm\n      )\n      // @TODO translation string\n      if (passConfirmInput.current) {\n          passConfirmInput.current.setCustomValidity(invalid ? 'Passwords must match' : '')\n      }\n    }\n    const minPwdLen = 8\n    const isSignup = state.action === 'SIGNUP'\n    const additionalOnSignup = state.backupOptout ? (\n      <Checkbox label=\"I understand that losing this backup means I will have to trigger account recovery.\" required={true}></Checkbox>\n    ) : (<></>)\n    const Link = ({href, label}) => (<a href={href} target='_blank' rel='noreferrer' onClick={e => e.stopPropagation()}>{label}</a>)\n    const additionalInputs = isSignup ?\n      (<>\n        <input\n          type=\"password\"\n          required\n          minLength={minPwdLen}\n          placeholder=\"Password\"\n          value={state.passphrase}\n          onChange={e => onUpdate({ passphrase: e.target.value })}\n        ></input>\n        <input\n          ref={passConfirmInput}\n          required\n          minLength={minPwdLen}\n          type=\"password\"\n          placeholder=\"Confirm password\"\n          value={state.passphraseConfirm}\n          onChange={e => onUpdate({ passphraseConfirm: e.target.value })}></input>\n        <Checkbox\n          label={<>I agree to the <Link href='https://www.ambire.com/Ambire%20ToS%20and%20PP%20(26%20November%202021).pdf' label='Terms of Service and Privacy policy'></Link>.</>}\n          required={true}\n        ></Checkbox>\n        <Checkbox\n          label={<>Backup on <Link href='https://help.ambire.com/hc/en-us/articles/4410892186002-What-is-Ambire-Cloud-' label='Ambire Cloud'></Link>.</>}\n          checked={!state.backupOptout}\n          onChange={e => onUpdate({ backupOptout: !e.target.checked })}\n        ></Checkbox>\n        {additionalOnSignup}\n      </>) : (<></>)\n\n    return (\n      <form onSubmit={onSubmit}>\n        <input type=\"email\" required placeholder=\"Email\" value={state.email} onChange={e => onUpdate({ email: e.target.value })}></input>\n        {\n          // Trick the password manager into putting in the email\n          !isSignup ? (<input type=\"password\" style={{ display: \"none\" }}></input>): (<></>)\n        }\n        {additionalInputs}\n        <input type=\"submit\" disabled={inProgress} value={isSignup ?\n          (inProgress ? \"Signing up...\" : \"Sign up\")\n          : (inProgress ? \"Logging in...\" : \"Log in\")}></input>\n      </form>\n    )\n}\n","import './EmailLogin.scss'\n\nimport { useState, useEffect } from 'react'\nimport { MdEmail } from 'react-icons/md'\n\nimport { fetch, fetchCaught } from '../../lib/fetch'\n\nimport LoginOrSignup from '../LoginOrSignupForm/LoginOrSignupForm'\n\n// NOTE: the same polling that we do here with the setEffect should be used for txns\n// that require email confirmation\nexport default function EmailLogin({ relayerURL, onAddAccount }) {\n    const [requiresEmailConfFor, setRequiresConfFor] = useState(null)\n    const [err, setErr] = useState('')\n    const [inProgress, setInProgress] = useState(false)\n  \n    const EMAIL_VERIFICATION_RECHECK = 3000\n  \n    const attemptLogin = async ({ email, passphrase }, ignoreEmailConfirmationRequired) => {\n      // try by-email first: if this returns data we can just move on to decrypting\n      // does not matter which network we request\n      const { resp, body, errMsg } = await fetchCaught(`${relayerURL}/identity/by-email/${encodeURIComponent(email)}`, { headers: {\n          authorization: localStorage.loginSessionKey ? `Bearer ${localStorage.loginSessionKey}` : null\n      } })\n      if (errMsg) {\n        setErr(errMsg)\n        return\n      }\n    \n      if (resp.status === 401 && body.errType === 'UNAUTHORIZED') {\n        if (ignoreEmailConfirmationRequired) {\n          // we still have to call this to make sure the state is consistent and to force a re-render (to trigger the effect again)\n          setRequiresConfFor({ email, passphrase })\n          return\n        }\n        const requestAuthResp = await fetch(`${relayerURL}/identity/by-email/${encodeURIComponent(email)}/request-confirm-login`, { method: 'POST' })\n        if (requestAuthResp.status !== 200) {\n          setErr(`Email confirmation needed but unable to request: ${requestAuthResp.status}`)\n          return\n        }\n        localStorage.loginSessionKey = (await requestAuthResp.json()).sessionKey\n        setRequiresConfFor({ email, passphrase })\n        return\n      }\n      // If we make it beyond this point, it means no email confirmation will be required\n      if (resp.status === 404 && body.errType === 'DOES_NOT_EXIST') {\n        setRequiresConfFor(null)\n        setErr('Account does not exist')\n        return\n      }\n  \n      if (resp.status === 200) {\n        const identityInfo = body\n        const { _id, salt, identityFactoryAddr, baseIdentityAddr, bytecode } = identityInfo\n        const { quickAccSigner, primaryKeyBackup } = identityInfo.meta\n        if (!primaryKeyBackup) {\n          setErr('Account is not backed up on Ambire Cloud. The only way to login is to import a JSON file.')\n          setRequiresConfFor(null)\n          return\n        }\n        onAddAccount({\n          id: _id,\n          email: identityInfo.meta.email,\n          primaryKeyBackup,\n          salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n          signer: quickAccSigner\n        }, { select: true })\n\n        // Delete the key so that it can't be used anymore on this browser\n        delete localStorage.loginSessionKey\n      } else {\n        setErr(body.message ? `Relayer error: ${body.message}` : `Unknown no-message error: ${resp.status}`)\n      }\n      setRequiresConfFor(null)\n    }\n  \n    const onLoginUserAction = async ({ email, passphrase }) => {\n      setErr('')\n      setRequiresConfFor(null)\n      setInProgress(true)\n      try {\n        await attemptLogin({ email, passphrase })\n      } catch (e) {\n          setErr(`Unexpected error: ${e.message || e}`)\n      }\n      setInProgress(false)\n    }\n  \n    // try logging in once after EMAIL_VERIFICATION_RECHECK\n    useEffect(() => {\n      if (requiresEmailConfFor) {\n        const timer = setTimeout(async () => {\n            setInProgress(true)\n            await attemptLogin(requiresEmailConfFor, true)\n            setInProgress(false)\n        }, EMAIL_VERIFICATION_RECHECK)\n        return () => clearTimeout(timer)\n      }\n    })\n\n    // @TODO import from JSON; maybe without a URL, as we'll just pop a file selector and then import the JSON\n    const importJSONHref = `/#/json-import`\n\n    if (!relayerURL) {\n        return (<section className=\"loginSignupWrapper\" id=\"emailLoginSection\">\n            <div id=\"logo\"/>\n            <h3 class=\"error\">Email login not supported without the relayer.</h3>\n            <a href={importJSONHref}><button>Import JSON</button></a>\n        </section>)\n    }\n\n    const inner = requiresEmailConfFor ?\n      (<div id=\"loginEmail\" className=\"emailConf\">\n        <h3><MdEmail size={25} color=\"white\"/>Email confirmation required</h3>\n        <p>\n        We sent an email to {requiresEmailConfFor.email}, please check your inbox and click \"<b>Authorize New Device</b>\".\n        </p>\n        {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n      </div>)\n      : (<div id=\"loginEmail\">\n        <LoginOrSignup onAccRequest={onLoginUserAction} inProgress={inProgress}></LoginOrSignup>\n        <div className='magicLink'>A password will not be required, we will send a magic login link to your email.</div>\n  \n        {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n  \n        {/*<a href={importJSONHref}>Import JSON</a>*/}\n      </div>)\n      \n    return (\n      <section className=\"loginSignupWrapper\" id=\"emailLoginSection\">\n      <div id=\"logo\"/>\n      {inner}\n    </section>\n    )\n  }","import { isFirefox } from '../lib/isFirefox'\n\nconst checkPermissions = async (name, onPrompt) => {\n    let status = false;\n\n    try {\n        const { state } = await navigator.permissions.query({\n            name,\n            allowWithoutGesture: false,\n        })\n        if (state === 'granted') return true\n        if (state === 'prompt') {\n            if (onPrompt) {\n                await onPrompt\n                return checkPermissions(name)\n            } else return false\n        }\n    } catch (e) {\n        console.error('Error while trying to query permissions', e)\n    }\n\n    return status;\n}\n\nconst checkClipboardPermission = (prompt = false) => isFirefox() ? false : prompt ? checkPermissions('clipboard-read', navigator.clipboard.readText()) : checkPermissions('clipboard-read')\nconst checkNotificationPermission = (prompt = false) => prompt ? checkPermissions('notifications', Notification.requestPermission()) : checkPermissions('notifications')\n\nconst askForPermission = async name => {\n    try {\n        if (name === 'clipboard-read') {\n            await navigator.clipboard.readText()\n            return true\n        }\n\n        if (name === 'notifications') {\n            const status = await Notification.requestPermission()\n            return status === 'granted' || status === 'default'\n        }\n\n        return false\n    } catch(e) {\n        console.error(`Permission ${name} blocked`);\n        return false\n    }\n}\n\nexport {\n    askForPermission,\n    checkClipboardPermission,\n    checkNotificationPermission\n}\n","import './PermissionsModal.scss'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { MdCheck, MdClose } from 'react-icons/md'\nimport { useModals, usePermissions } from '../../../hooks'\nimport { useToasts } from '../../../hooks/toasts'\nimport { askForPermission } from '../../../helpers/permissions'\nimport { Modal, Toggle, Button, Checkbox } from '../../common'\nimport { isFirefox } from '../../../lib/isFirefox'\nimport { fetchGet } from '../../../lib/fetch'\n\nconst toastErrorMessage = name => `You blocked the ${name} permission. Check your browser permissions tab.`\n\nconst PermissionsModal = ({ relayerIdentityURL, account, onAddAccount }) => {\n    const { hideModal } = useModals()\n    const { isNoticationsGranted, isClipboardGranted, modalHidden, setModalHidden } = usePermissions()\n    const { addToast } = useToasts()\n    const [isEmailConfirmed, setEmailConfirmed] = useState(false)\n\n    const areBlockedPermissions = (!isFirefox() && !isClipboardGranted) || !isNoticationsGranted\n    const isAccountNotConfirmed = account.emailConfRequired && !isEmailConfirmed\n    const buttonDisabled = isAccountNotConfirmed || (!modalHidden && areBlockedPermissions)\n    const showEmailSentToast = () => addToast('Confirmation email already sent', { error: true })\n    \n    const checkEmailConfirmation = useCallback(async () => {\n        const identity = await fetchGet(relayerIdentityURL)\n        if (identity) {\n            const { emailConfirmed } = identity.meta\n            const isConfirmed = !!emailConfirmed\n            setEmailConfirmed(isConfirmed)\n\n            if (isConfirmed && account.emailConfRequired) {\n                onAddAccount({\n                    ...account,\n                    emailConfRequired: false\n                })\n            }\n        }\n    }, [relayerIdentityURL, account, onAddAccount])\n    \n    const requestNotificationsPermission = async () => {\n        const status = await askForPermission('notifications')\n        if (!status) addToast(toastErrorMessage('Notifications'), { error: true })\n    }\n    \n    const requestClipboardPermission = async () => {\n        const status = await askForPermission('clipboard-read')\n        if (!status) addToast(toastErrorMessage('Clipboard'), { error: true })\n    }\n    \n    useEffect(() => {\n        !isEmailConfirmed && checkEmailConfirmation()\n        const emailConfirmationInterval = setInterval(() => !isEmailConfirmed && checkEmailConfirmation(), 3000)\n        return () => clearInterval(emailConfirmationInterval)\n    }, [isEmailConfirmed, checkEmailConfirmation])\n\n    return (\n        <Modal id=\"permissions-modal\" title=\"We need a few things \">\n            {\n                account.email ? \n                    <div className=\"permission\">\n                    <div className=\"details\">\n                        <div className=\"name\">Email Verification</div>\n                        <div className=\"description\">\n                            <b>Confirming your email is mandatory so that we can make sure your account can be recovered in case access is lost.</b>\n                            &nbsp;We already sent an email, please check your inbox.\n                        </div>\n                    </div>\n                    <Toggle checked={isEmailConfirmed} onChange={() => showEmailSentToast()}/>\n                </div>\n                :\n                null\n            }\n            <div className=\"permission\">\n                <div className=\"details\">\n                    <div className=\"name\">Notifications Permission</div>\n                    <div className=\"description\">\n                        Needed to draw your attention to Ambire Wallet when there is a transaction signing request.<br/>\n                        You can also click the notifications to go directly to the Ambire tab.<br/>\n                        We do not send any other notifications.\n                    </div>\n                </div>\n                <Toggle checked={isNoticationsGranted} onChange={() => requestNotificationsPermission()}/>\n            </div>\n            <div className={`permission ${isFirefox() ? 'disabled' : ''}`}>\n                <div className=\"details\">\n                    <div className=\"name\">Clipboard Permission { isFirefox() ? <span className=\"unavailable\">(Unavailable in Firefox)</span> : null }</div>\n                    <div className=\"description\">\n                        Needed so that dApps can be connected automatically just by copying their WalletConnect URL.\n                    </div>\n                    { \n                        isFirefox() ? \n                            <div className=\"unavailable\">\n                                Without this, you can still use Ambire, but you will have to paste URLs manually\n                            </div> : null\n                    }\n                </div>\n                <Toggle checked={isClipboardGranted} onChange={() => requestClipboardPermission()}/>\n            </div>\n            {isAccountNotConfirmed\n                ? (<></>)\n                // Not gonna show this at all if the email is not confirmed\n                : (<Checkbox\n                    label=\"I understand, do not show this again.\"\n                    checked={modalHidden}\n                    onChange={({ target }) => setModalHidden(target.checked)}/>)\n            }\n            <div className=\"buttons\">\n                <Button clear small icon={<MdClose/>} disabled={isAccountNotConfirmed} onClick={hideModal}>Ignore</Button>\n                <Button small icon={<MdCheck/>} disabled={buttonDisabled} onClick={hideModal}>Done</Button>\n            </div>\n        </Modal>\n    )\n}\n\nexport default PermissionsModal\n","import './InputModal.scss'\n\nimport { createRef, useState } from 'react'\nimport { MdCheck, MdClose } from 'react-icons/md'\nimport { useModals } from '../../../hooks'\nimport { Modal, TextInput, Button } from \"../../common\"\n\nconst InputModal = ({ title, inputs, onClose }) => {\n    const { hideModal } = useModals()\n    const [isDisabled, setDisabled] = useState(true)\n\n    const inputsFields = inputs.map(input => ({ ...input, ref: createRef() }))\n\n    const onInput = () => {\n        const isFormValid = inputsFields\n            .map(({ ref, validate }) => ref.current.value && (validate ? validate(ref.current.value) : true))\n            .every(v => v === true)\n        setDisabled(!isFormValid)\n    }\n\n    const onConfirm = () => {\n        const values = inputsFields.map(({ ref }) => ref.current.value)\n        onClose && onClose(values)\n        hideModal()\n    }\n\n    return (\n        <Modal id=\"input-modal\" title={title}>\n            {\n                inputsFields.map(({ id, label, placeholder, ref }) => (\n                    <TextInput key={id || label} label={label} placeholder={placeholder} onInput={onInput} ref={ref}/>\n                ))\n            }\n            <div className=\"buttons\">\n                <Button clear small icon={<MdClose/>} onClick={hideModal}>Cancel</Button>\n                <Button small icon={<MdCheck/>} disabled={isDisabled} onClick={onConfirm}>Confirm</Button>\n            </div>\n        </Modal>\n    )\n}\n\nexport default InputModal ","import './SelectSignerAccountModal.scss'\n\nimport { useState } from 'react'\nimport { useModals } from '../../../hooks'\nimport { Modal, Button } from '../../common'\nimport { HiOutlineExternalLink } from 'react-icons/hi'\nimport { MdKeyboardArrowLeft, MdKeyboardArrowRight } from 'react-icons/md'\n\nconst SelectSignerAccountModal = ({\n  signersToChoose,\n  onSignerAddressClicked,\n  selectedNetwork = { explorerUrl: 'https://etherscan.io' },\n  description = '',\n  isCloseBtnShown = true\n}) => {\n  const { hideModal } = useModals()\n  const [currentPage, setCurrentPage] = useState(0)\n\n  const paginate = (arr, size) => {\n    return arr.reduce((acc, val, i) => {\n      let idx = Math.floor(i / size)\n      let page = acc[idx] || (acc[idx] = [])\n      page.push(val)\n\n      return acc\n    }, [])\n  }\n\n  let pages = []\n  const pageSize = 5\n\n  pages = paginate(signersToChoose, pageSize)\n\n  const nextPage = () => {\n    if (currentPage === pages.length - 1) return\n    setCurrentPage(prevState => prevState + 1)\n  }\n\n  const prevPage = () => {\n    if (currentPage === 0) return\n    setCurrentPage(prevState => prevState - 1)\n  }\n\n  const formatAddress = addr => {\n    return addr.slice(0, 5) + '...' + addr.slice(addr.length - 4, addr.length)\n  }\n\n  const prevBtnDisabled = currentPage === 0\n  const nextBtnDisabled = currentPage === pages.length - 1\n\n  const onAddressClicked = (addr, index) => {\n    onSignerAddressClicked({\n      address: addr,\n      index: index,\n    })\n\n    hideModal()\n  }\n\n  return (\n    <Modal id=\"select-signer-modal\" title=\"Select a signer account\" isCloseBtnShown={isCloseBtnShown}>\n      <div className=\"intro\">{description}</div>\n      <div className=\"loginSignupWrapper chooseSigners\">\n        <ul id=\"signersToChoose\">\n          {signersToChoose\n            ? pages[currentPage].map((addr, index) => (\n                <li\n                  key={addr}\n                  className={!(index % 2) ? ' odd-rows-bg' : ''}\n                  onClick={() =>\n                    onAddressClicked(addr, currentPage * pageSize + index)\n                  }\n                >\n                  <span className=\"index-row\">\n                    {currentPage * pageSize + index + 1}\n                  </span>\n                  <span>\n                    {formatAddress(addr)}\n                  </span>\n                  <a\n                    href={selectedNetwork.explorerUrl + '/address/' + addr}\n                    target='_blank'\n                    rel='noreferrer'\n                    onClick={e => e.stopPropagation()}\n                  >\n                    <HiOutlineExternalLink size={25} />\n                  </a>\n                </li>\n              ))\n            : null}\n        </ul>\n        <div className=\"pages\">\n          {currentPage + 1}/{pages.length}\n        </div>\n        <div className=\"buttons\">\n          <Button disabled={prevBtnDisabled} icon={<MdKeyboardArrowLeft/>} small clear type=\"button\" onClick={prevPage}>\n            Previous page\n          </Button>\n          <Button disabled={nextBtnDisabled} iconAfter={<MdKeyboardArrowRight/>} small clear type=\"button\" onClick={nextPage}>\n            Next page\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  )\n}\n\nexport default SelectSignerAccountModal\n","import './AddAccount.scss'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { Link } from 'react-router-dom'\nimport LoginOrSignup from '../LoginOrSignupForm/LoginOrSignupForm'\nimport TrezorConnect from 'trezor-connect'\nimport { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { hexZeroPad, AbiCoder, keccak256, id, getAddress } from 'ethers/lib/utils'\nimport { Wallet } from 'ethers'\nimport { generateAddress2 } from 'ethereumjs-util'\nimport { getProxyDeployBytecode } from 'adex-protocol-eth/js/IdentityProxyDeploy'\nimport { fetch, fetchPost } from '../../lib/fetch'\nimport accountPresets from '../../consts/accountPresets'\nimport { useToasts } from '../../hooks/toasts'\nimport { SelectSignerAccountModal } from '../Modals'\nimport { useModals } from '../../hooks'\nimport { Loading } from '../common'\nimport { ledgerGetAddresses, PARENT_HD_PATH } from '../../lib/ledgerWebHID'\nimport { isFirefox } from '../../lib/isFirefox'\n\n\nTrezorConnect.manifest({\n  email: 'contactus@ambire.com',\n  appUrl: 'https://www.ambire.com'\n})\n\n// NOTE: This is a compromise, but we can afford it cause QuickAccs require a secondary key\n// Consider more\nconst SCRYPT_ITERATIONS = 131072 / 8\n\nexport default function AddAccount({ relayerURL, onAddAccount }) {\n  const [signersToChoose, setChooseSigners] = useState(null)\n  const [err, setErr] = useState('')\n  const [addAccErr, setAddAccErr] = useState('')\n  const [inProgress, setInProgress] = useState(false)\n  const { addToast } = useToasts()\n  const { showModal } = useModals()\n\n  const wrapProgress = async (fn, type = true) => {\n    setInProgress(type)\n    try {\n      await fn()\n    } catch (e) {\n      console.error(e)\n      setAddAccErr(`Unexpected error: ${e.message || e}`)\n    }\n    setInProgress(false)\n  }\n\n  const wrapErr = async fn => {\n    setAddAccErr('')\n    try {\n      await fn()\n    } catch (e) {\n      console.error(e)\n      setInProgress(false)\n      setAddAccErr(`Unexpected error: ${e.message || e}`)\n    }\n  }\n\n  const createQuickAcc = async (req) => {\n    setErr('')\n\n    // async hack to let React run a tick so it can re-render before the blocking Wallet.createRandom()\n    await new Promise(resolve => setTimeout(resolve, 0))\n\n    const extraEntropy = id(req.email + ':' + Date.now() + ':' + Math.random() + ':' + (typeof performance === 'object' && performance.now()))\n    const firstKeyWallet = Wallet.createRandom({ extraEntropy })\n    // 6 words is 2048**6\n    const secondKeySecret = Wallet.createRandom({ extraEntropy }).mnemonic.phrase.split(' ').slice(0, 6).join(' ') + ' ' + req.email\n\n    const secondKeyResp = await fetchPost(`${relayerURL}/second-key`, { secondKeySecret })\n    if (!secondKeyResp.address) throw new Error(`second-key returned no address, error: ${secondKeyResp.message || secondKeyResp}`)\n\n    const { salt, baseIdentityAddr, identityFactoryAddr, quickAccManager, quickAccTimelock } = accountPresets\n    const quickAccountTuple = [quickAccTimelock, firstKeyWallet.address, secondKeyResp.address]\n    const signer = {\n      quickAccManager,\n      timelock: quickAccountTuple[0],\n      one: quickAccountTuple[1],\n      two: quickAccountTuple[2]\n    }\n    const abiCoder = new AbiCoder()\n    const accHash = keccak256(abiCoder.encode(['tuple(uint, address, address)'], [quickAccountTuple]))\n    const privileges = [[quickAccManager, accHash]]\n    const bytecode = getProxyDeployBytecode(baseIdentityAddr, privileges, { privSlot: 0 })\n    const identityAddr = getAddress('0x' + generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex'))\n    const primaryKeyBackup = JSON.stringify(\n      await firstKeyWallet.encrypt(req.passphrase, { scrypt: { N: SCRYPT_ITERATIONS } })\n    )\n\n    const createResp = await fetchPost(`${relayerURL}/identity/${identityAddr}`, {\n      email: req.email,\n      primaryKeyBackup: req.backupOptout ? null : primaryKeyBackup,\n      secondKeySecret,\n      salt, identityFactoryAddr, baseIdentityAddr,\n      privileges,\n      quickAccSigner: signer\n    })\n    if (createResp.message === 'EMAIL_ALREADY_USED') {\n      setErr('An account with this email already exists')\n      return\n    }\n    if (!createResp.success) {\n      console.log(createResp)\n      setErr(`Unexpected sign up error: ${createResp.message || 'unknown'}`)\n      return\n    }\n\n    await onAddAccount({\n      id: identityAddr,\n      email: req.email,\n      primaryKeyBackup,\n      salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n      signer,\n      // This makes the modal appear, and will be removed by the modal which will call onAddAccount to update it\n      emailConfRequired: true\n    }, { select: true, isNew: true })\n  }\n\n  // EOA implementations\n  // Add or create accounts from Trezor/Ledger/Metamask/etc.\n  const createFromEOA = useCallback(async (addr) => {\n    const privileges = [[getAddress(addr), hexZeroPad('0x01', 32)]]\n    const { salt, baseIdentityAddr, identityFactoryAddr } = accountPresets\n    const bytecode = getProxyDeployBytecode(baseIdentityAddr, privileges, { privSlot: 0 })\n    const identityAddr = getAddress('0x' + generateAddress2(identityFactoryAddr, salt, bytecode).toString('hex'))\n\n    if (relayerURL) {\n      const createResp = await fetchPost(`${relayerURL}/identity/${identityAddr}`, {\n        salt, identityFactoryAddr, baseIdentityAddr,\n        privileges\n      })\n      if (!createResp.success && !(createResp.message && createResp.message.includes('already exists'))) throw createResp\n    }\n\n    return {\n      id: identityAddr,\n      salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n      signer: { address: getAddress(addr) }\n    }\n  }, [relayerURL])\n\n  async function connectWeb3AndGetAccounts() {\n    if (typeof window.ethereum === 'undefined') {\n      throw new Error('MetaMask not available')\n    }\n    const ethereum = window.ethereum\n    const web3Accs = await ethereum.request({ method: 'eth_requestAccounts' })\n    if (!web3Accs.length) throw new Error('No accounts connected')\n    if (web3Accs.length === 1) return onEOASelected(web3Accs[0])\n\n    setChooseSigners({ addresses: web3Accs, signerName: 'Web3' })\n  }\n\n  const getAccountByAddr = useCallback(async (idAddr, signerAddr) => {\n    // In principle, we need these values to be able to operate in relayerless mode,\n    // so we just store them in all cases\n    // Plus, in the future this call may be used to retrieve other things\n    const { salt, identityFactoryAddr, baseIdentityAddr, bytecode } = await fetch(`${relayerURL}/identity/${idAddr}`)\n      .then(r => r.json())\n    if (!(salt && identityFactoryAddr && baseIdentityAddr && bytecode)) throw new Error(`Incomplete data from relayer for ${idAddr}`)\n    return {\n      id: idAddr,\n      salt, identityFactoryAddr, baseIdentityAddr, bytecode,\n      signer: { address: signerAddr }\n    }\n  }, [relayerURL])\n\n  const getOwnedByEOAs = useCallback(async (eoas) => {\n    let allUniqueOwned = {}\n\n    await Promise.all(eoas.map(\n      async signerAddr => {\n        const resp = await fetch(`${relayerURL}/identity/any/by-owner/${signerAddr}?includeFormerlyOwned=true`)\n        const privEntries = Object.entries(await resp.json())\n        // discard the privileges value, we do not need it as we wanna add all accounts EVER owned by this eoa\n        privEntries.forEach(([id, _]) => allUniqueOwned[id] = getAddress(signerAddr))\n      }\n    ))\n\n    return await Promise.all(\n      Object.entries(allUniqueOwned).map(([id, signer]) => getAccountByAddr(id, signer))\n    )\n  }, [getAccountByAddr, relayerURL])\n\n  async function connectTrezorAndGetAccounts() {\n    /*\n    const engine = new Web3ProviderEngine({ pollingInterval: this.pollingInterval })\n    engine.addProvider(new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect, ...this.config }))\n    engine.addProvider(new CacheSubprovider())\n    engine.addProvider(new RPCSubprovider(this.url, this.requestTimeoutMs))\n    */\n    const provider = new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect })\n    const addresses = await provider.getAccountsAsync(50)\n    setChooseSigners({\n      addresses, signerName: 'Trezor', signerExtra: {\n        type: 'trezor',\n        info: JSON.parse(JSON.stringify(provider._initialDerivedKeyInfo))\n      }\n    })\n  }\n\n  async function connectLedgerAndGetAccounts() {\n    if (isFirefox()) {\n      await connectLedgerAndGetAccountsU2F()\n    } else {\n      await connectLedgerAndGetAccountsWebHID()\n    }\n  }\n\n  async function connectLedgerAndGetAccountsU2F() {\n    const provider = new LedgerSubprovider({\n      networkId: 0, // @TODO: probably not needed\n      ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n      baseDerivationPath: PARENT_HD_PATH\n    })\n    // NOTE: do not attempt to do both of these together (await Promise.all)\n    // there is a bug in the ledger subprovider (race condition), so it will think we're trying to make two connections simultaniously\n    // cause one call won't be aware of the other's attempt to connect\n    const addresses = await provider.getAccountsAsync(50)\n    const signerExtra = await provider._initialDerivedKeyInfoAsync().then(info => ({\n      type: 'ledger',\n      info: JSON.parse(JSON.stringify(info))\n    }))\n\n    setChooseSigners({ addresses, signerName: 'Ledger', signerExtra })\n  }\n\n  async function connectLedgerAndGetAccountsWebHID() {\n    let error = null\n    try {\n      const addrData = await ledgerGetAddresses()\n      if (!addrData.error) {\n        const signerExtra = { type: 'ledger', transportProtocol: 'webHID' }\n        if (addrData.addresses.length === 1) {\n            onEOASelected(addrData.addresses[0], signerExtra)\n        } else {\n            setChooseSigners({ addresses: addrData.addresses, signerName: 'Ledger', signerExtra })\n        }\n      } else {\n        error = addrData.error\n      }\n    } catch (e) {\n      console.log(e)\n      if (e.statusCode && e.id === 'InvalidChannel') {\n        error = 'Invalid channel'\n      } else if (e.statusCode && e.statusCode === 25873) {\n        error = 'Please make sure your ledger is connected and the ethereum app is open'\n      } else {\n        error = e.message\n      }\n    }\n\n    if (error) {\n      setAddAccErr(`Ledger error: ${error.message || error}`)\n    }\n  }\n\n  const onEOASelected = useCallback(async (addr, signerExtra) => {\n    const addAccount = (acc, opts) => onAddAccount({ ...acc, signerExtra }, opts)\n    // when there is no relayer, we can only add the 'default' account created from that EOA\n    // @TODO in the future, it would be nice to do getLogs from the provider here to find out which other addrs we control\n    //   ... maybe we can isolate the code for that in lib/relayerless or something like that to not clutter this code\n    if (!relayerURL) return addAccount(await createFromEOA(addr), { select: true })\n    // otherwise check which accs we already own and add them\n    const owned = await getOwnedByEOAs([addr])\n    if (!owned.length) {\n        addAccount(await createFromEOA(addr), { select: true, isNew: true })\n    } else {\n      addToast(`Found ${owned.length} existing accounts with signer ${addr}`, { timeout: 15000 })\n      owned.forEach((acc, i) => addAccount(acc, { select: i === 0 }))\n    }\n  }, [addToast, createFromEOA, getOwnedByEOAs, onAddAccount, relayerURL])\n\n  const onSignerAddressClicked = useCallback(val => {\n    wrapErr(() => onEOASelected(val.address, signersToChoose.signerExtra))\n    setChooseSigners(null)\n  }, [onEOASelected, signersToChoose])\n\n  // The UI for choosing a signer to create/add an account with, for example\n  // when connecting a hardware wallet, it has many addrs you can choose from\n  useEffect(() => {\n    if (signersToChoose) {\n      showModal(\n        <SelectSignerAccountModal\n          signersToChoose={signersToChoose.addresses}\n          onSignerAddressClicked={onSignerAddressClicked}\n          description={`Signer address is the ${signersToChoose.signerName} address you will use to sign transactions on Ambire Wallet.\n                     new account will be created using this signer if you dont have one.`}\n          isCloseBtnShown={true}\n        />\n      )\n    }\n  }, [onSignerAddressClicked, showModal, signersToChoose])\n\n  // Adding accounts from existing signers\n  const addFromSignerButtons = (<>\n    <button onClick={() => wrapProgress(connectTrezorAndGetAccounts, 'hwwallet')}>\n      <div className=\"icon\" style={{ backgroundImage: 'url(./resources/trezor.png)' }}/>\n      Trezor\n    </button>\n    <button onClick={() => wrapProgress(connectLedgerAndGetAccounts, 'hwwallet')}>\n      <div className=\"icon\" style={{ backgroundImage: 'url(./resources/ledger.png)' }}/>\n      Ledger\n    </button>\n    <button onClick={() => wrapErr(connectWeb3AndGetAccounts)}>\n      <div className=\"icon\" style={{ backgroundImage: 'url(./resources/metamask.png)' }}/>\n      Metamask / Browser\n    </button>\n  </>)\n\n  if (!relayerURL) {\n    return (<div className=\"loginSignupWrapper\">\n      <div id=\"logo\"/>\n      <section id=\"addAccount\">\n        <div id=\"loginOthers\">\n          <h3>Add an account</h3>\n          {addFromSignerButtons}\n          <h3>NOTE: You can enable email/password login by connecting to a relayer.</h3>\n        </div>\n      </section>\n    </div>)\n  }\n  //TODO: Would be great to create Ambire spinners(like 1inch but simpler) (I can have a look at them if you need)\n  return (<div className=\"loginSignupWrapper\">\n      <div id=\"logo\"/>\n      <section id=\"addAccount\">\n        <div id=\"loginEmail\">\n          <h3>Create a new account</h3>\n          <LoginOrSignup\n            inProgress={inProgress === 'email'}\n            onAccRequest={req => wrapProgress(() => createQuickAcc(req), 'email')}\n            action=\"SIGNUP\"\n          ></LoginOrSignup>\n          {err ? (<p className=\"error\">{err}</p>) : (<></>)}\n        </div>\n\n        <div id=\"loginSeparator\">\n          <div className=\"verticalLine\"></div>\n          <span>or</span>\n          <div className=\"verticalLine\"></div>\n        </div>\n        <div id=\"loginOthers\">\n          <h3>Add an account</h3>\n          {inProgress !== 'hwwallet' ? (<>\n            <Link to=\"/email-login\">\n              <button>\n                <div className=\"icon\" style={{ backgroundImage: 'url(./resources/envelope.png)' }}/>\n                Email login\n              </button>\n            </Link>\n            {addFromSignerButtons}\n            {addAccErr ? (<p className=\"error\">{addAccErr}</p>) : (<></>)}\n          </>) : (<div className=\"accountLoader\">\n            <Loading/>\n          </div>)}\n        </div>\n      </section>\n    </div>\n  )\n}\n","import './Balances.scss'\n\nimport networks from '../../../../consts/networks'\n\nconst Balances = ({ portfolio, selectedNetwork, setNetwork }) => {\n    const networkDetails = (network) => networks.find(({ id }) => id === network)\n    const otherBalances = portfolio.otherBalances.filter(({ network, total }) => network !== selectedNetwork.id && total.full > 0)\n\n    return (\n        <div id=\"balances\">\n            <span className=\"green-highlight\">$</span> { portfolio.balance.total.truncated }\n            <span className=\"green-highlight\">.{ portfolio.balance.total.decimals }</span>\n            <div id=\"other-balances\">\n                { otherBalances.length ? <label>You also have</label> : null }\n                {\n                    otherBalances.map(({ network, total }, i) => (\n                        <div className=\"balance-container\" key={network}>\n                            <div className=\"other-balance\" onClick={() => setNetwork(network)}>\n                                <label>\n                                    <span className=\"purple-highlight\">$</span> { total.truncated }\n                                    <span className=\"purple-highlight\">.{total.decimals}</span>\n                                </label>\n                                on\n                                <div className=\"network\">\n                                    <div className=\"icon\" style={{backgroundImage: `url(${networkDetails(network).icon})`}}></div>\n                                    <div className=\"name\">\n                                        { networkDetails(network).name }\n                                    </div>\n                                </div>\n                            </div>\n                            { otherBalances.length - 1 !== i ? <label>and</label> : null }\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default Balances","import './ProtocolsPlaceholder.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { Button } from '../../../../common'\n\nconst ProtocolsPlaceholder = () => {\n    const tokens = [\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0xade00c28244d5ce17d72e40330b1c318cd12b7c3.png',\n            symbol: 'ADX',\n            balance: 170027.26,\n            balanceUSD: 138880.64\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x0000000000000000000000000000000000000000.png',\n            symbol: 'ETH',\n            balance: 61.77,\n            balanceUSD: 283170.08\n        },\n        {\n            icon: 'https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x2260fac5e5542a773aa44fbcfedf7c193bc2c599.png',\n            symbol: 'WBTC',\n            balance: 0.03,\n            balanceUSD: 2227.24\n        },\n    ]\n\n    return (\n        <div id=\"protocols-placeholder\" >\n            <div className=\"placeholder-overlay\">\n                <label>\n                    Welcome! You don't have any funds on this account.\n                </label>\n                <NavLink to=\"/wallet/deposit\">\n                    <Button small icon={<GiReceiveMoney/>}>Deposit</Button>\n                </NavLink>\n            </div>\n            <div className=\"category\">\n                <div className=\"title\">Tokens</div>\n                <div className=\"list\">\n                    {\n                        tokens.map(({ icon, symbol, balance, balanceUSD }) => (\n                            <div className=\"token\" key={symbol}>\n                                <div className=\"icon\">\n                                    <img src={icon} alt=\"Token Icon\"/>\n                                </div>\n                                <div className=\"name\">\n                                    { symbol }\n                                </div>\n                                <div className=\"separator\"></div>\n                                <div className=\"balance\">\n                                    <div className=\"currency\">\n                                        { balance } <span className=\"symbol\">{ symbol }</span>\n                                    </div>\n                                    <div className=\"dollar\">\n                                        <span className=\"symbol\">$</span> { balanceUSD }\n                                    </div>\n                                </div>\n                            </div>\n                        ))\n                    }\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ProtocolsPlaceholder","import './Protocols.scss'\n\nimport { GiToken } from 'react-icons/gi'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { NavLink } from 'react-router-dom'\nimport { Button } from '../../../common'\nimport ProtocolsPlaceholder from './ProtocolsPlaceholder/ProtocolsPlaceholder'\n\nconst Protocols = ({ protocols }) => {\n    return (\n        <div id=\"protocols-table\">\n            {\n                !protocols.length ?\n                    <ProtocolsPlaceholder/>\n                    :\n                    protocols.map(({ label, assets }, i) => (\n                            <div className=\"category\" key={`category-${i}`}>\n                                <div className=\"title\">{ label }</div>\n                                <div className=\"list\">\n                                    {\n                                        assets.map(({ type, tokens }) => \n                                            tokens.map(({ label, collectionName, symbol, img, collectionImg, balance, balanceUSD, address }, i) => (\n                                                <div className=\"token\" key={`token-${i}`}>\n                                                    <div className=\"icon\">\n                                                        {\n                                                            img || collectionImg ? \n                                                                <img src={img || collectionImg} alt=\"Token Icon\"/>\n                                                                :\n                                                                <GiToken size={20}/>\n                                                        }\n                                                    </div>\n                                                    <div className=\"name\">\n                                                        { label || collectionName || symbol }\n                                                    </div>\n                                                    <div className=\"separator\"></div>\n                                                    <div className=\"balance\">\n                                                        <div className=\"currency\">\n                                                            { balance } <span className=\"symbol\">{ symbol }</span>\n                                                        </div>\n                                                        <div className=\"dollar\">\n                                                            <span className=\"symbol\">$</span> { balanceUSD.toFixed(2) }\n                                                        </div>\n                                                    </div>\n                                                    {\n                                                        type === 'wallet' ?\n                                                            <div className=\"actions\">\n                                                                <NavLink to={`/wallet/transfer/${address}`}>\n                                                                    <Button small icon={<AiOutlineSend/>}>Send</Button>\n                                                                </NavLink>\n                                                            </div>\n                                                            :\n                                                            null\n                                                     }\n                                                </div>\n                                            ))\n                                        )\n                                    }\n                                </div>\n                            </div>\n                        ))\n            }\n        </div>\n    )\n}\n\nexport default Protocols","import './CollectiblesPlaceholder.scss'\n\nconst CollectiblesPlaceholder = () => {\n    const collectibles = [\n        {\n            collectionName: 'Party Bone',\n            collectionImg: 'https://lh3.googleusercontent.com/ZNc-hDBHOxgioSltBcDvh5hBfWEj623dETJj2nrEC0cLbjuULbo4Ign7OnLDX9qf2XaALrkXsZCRylRqPPHqQgzJOabJg4TRq3MDhA=s2500',\n            name: 'Party Bone #7865',\n            image: 'https://lh3.googleusercontent.com/uznp2aNVNPEhVk4MhLG2Zn-JC2sVaF6PsUcpF_CpyQkgekmv4hh4zbyebsoLFLvkY8PSV6D-TR5OaMp15RhG9zQsYd_AvDCo9SEVF4Q',\n            price: 32.16\n        },\n        {\n            collectionName: 'Pudgy Penguins',\n            collectionImg: 'https://lh3.googleusercontent.com/L9PJp0pOXCscKsTpD1_6zoALxdjG5gIKHLykS_Wk5J_yk590drEqRhM1ElTEZCaWeTjFj2isfxFw2tcFKcbCPlu6-Eu5bUuxsL-x=s2500',\n            name: 'Pudgy Penguin #8675',\n            image: 'https://lh3.googleusercontent.com/J6gQQRnzsMLAOhYiN9qIhogxr2MKn17zfGf6nQFKr3WCZ34thm6H0w9izvnJysxJclsyr8c3yo0hshOaLU73aS-IgTm-CooJb1cw1S0',\n            price: 5675.00\n        },\n        {\n            collectionName: 'Art Blocks Factory',\n            collectionImg: 'https://lh3.googleusercontent.com/sr7Y19-bJwsQsxX6n8Pj5tIaNKdUEotNlfhBsYw8McKpIsYARglTORaNlGhDZ2PrH-tO1vU6tFbpamiWwIImbidhVSh4aoIh4d310Og=s2500',\n            name: 'Transitions #4267',\n            image: 'https://lh3.googleusercontent.com/9MzvH_PSYMvlJE8Cfm5d308ltY5fZx-dooEcQizKgtKZ8g05RvJvd_5LAbqVHIzaoZbM-HOBgNSV8RKvEe_1thkLcQtE4NMMx8Kp5g',\n            price: 263.46\n        },\n        {\n            collectionName: 'Sad Frogs District',\n            collectionImg: 'https://lh3.googleusercontent.com/3U8N73XLrQOQPhJBAMNi7IPR1y3GGJ2zxmyUlit4IHCJURmKFPWClgatjbYfyz9drMk6-XSQTjSFqn7tKL0ZNoRbgvUu8OdLVREA=s2500',\n            name: '1882',\n            image: 'https://lh3.googleusercontent.com/3uwrfkdhHSfWm171BOjJHp3768tbLP9TeyTh2BnvgF6S1nIRI489SFq6EGjI9AISRUeyXXufEjB34Wj0bif_vl-y5h6GesEoJaaZcJg',\n            price: 1563.59\n        },\n        {\n            collectionName: 'GLUEWAVE',\n            collectionImg: 'https://lh3.googleusercontent.com/LheZMF6AyTLPpfwABwAGZqoC0gTWrDlYloDdT2VX2u_GZRZnP-ZpDC90huElm3RXE-eU1d1YluQi8G1uVdeDdysUNLZWJte4jXk3zeY=s2500',\n            name: '000105040307070704',\n            image: 'https://lh3.googleusercontent.com/eP_F_6aa_BXuKfYq1w2aiS6UW3bp4-gByFoeKLMXYuWAkU6Xiyi7mkm31aoewCZ_eG9RAuhas8jxFwXTxAWuxq1E3ZxYg97cLUUE',\n            price: 7107.27\n        }\n    ]\n\n    return (\n        <div id=\"collectibles-placeholder\">\n            <div className=\"placeholder-overlay\">\n                You don't have any collectibles (NFTs) yet\n            </div>\n            <div id=\"collectibles\">\n                {\n                    collectibles.map(({ collectionName, collectionImg, name, image, price}) => (\n                        <div className=\"collectible\" key={name}>\n                            <div className=\"artwork\" style={{backgroundImage: `url(${image})`}}/>\n                            <div className=\"info\">\n                                <div className=\"collection\">\n                                    <div className=\"collection-icon\" style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                    { collectionName }\n                                </div>\n                                <div className=\"details\">\n                                    <div className=\"name\">{ name }</div>\n                                    <div className=\"value\"><span className=\"purple-highlight\">$</span> { price }</div>\n                                </div>\n                            </div>\n                        </div>\n                    ))\n                }\n            </div>\n        </div>\n    )\n}\n\nexport default CollectiblesPlaceholder","import './Collectibles.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport CollectiblesPlaceholder from './CollectiblesPlaceholder/CollectiblesPlaceholder'\n\nconst Collectibles = ({ collectibles }) => {\n    return (\n        !collectibles.length ?\n            <CollectiblesPlaceholder/>\n            :\n            <div id=\"collectibles\">\n                {\n                    collectibles.map(({ tokens }) => tokens.map(({ network, address, collectionName, collectionImg, assets }) => assets.map(({ tokenId, assetName, assetImg, balanceUSD }) => (\n                        <div className=\"collectible\" key={tokenId}>\n                            <NavLink to={`/wallet/nft/${network}/${address}/${tokenId}`}>\n                                <div className=\"artwork\" style={{backgroundImage: `url(${assetImg})`}}/>\n                                <div className=\"info\">\n                                    <div className=\"collection\">\n                                        <div className=\"collection-icon\" style={{backgroundImage: `url(${collectionImg})`}}></div>\n                                        <span className=\"collection-name\">{ collectionName }</span>\n                                    </div>\n                                    <div className=\"details\">\n                                        <div className=\"name\">{ assetName }</div>\n                                        <div className=\"value\"><span className=\"purple-highlight\">$</span> { balanceUSD.toFixed(2) }</div>\n                                    </div>\n                                </div>\n                            </NavLink>\n                        </div>\n                    ))))\n                }\n            </div>\n    )\n}\n\nexport default Collectibles","import './Dashboard.scss'\n\nimport { useEffect, useLayoutEffect, useState } from 'react'\n\nimport { Chart, Loading, Segments } from '../../common'\nimport Balances from './Balances/Balances'\nimport Protocols from './Protocols/Protocols'\nimport Collectibles from './Collectibles/Collectibles'\n\nexport default function Dashboard({ portfolio, selectedNetwork, setNetwork }) {\n\n    const [chartTokensData, setChartTokensData] = useState([]);\n    const [chartProtocolsData, setChartProtocolsData] = useState([]);\n    const [chartType, setChartType] = useState([]);\n    const [tableType, setTableType] = useState([]);\n\n    const chartSegments = [\n        {\n            value: 'Tokens'\n        },\n        {\n            value: 'Protocols'\n        }\n    ]\n\n    const tableSegments = [\n        {\n            value: 'Tokens'\n        },\n        {\n            value: 'Collectibles'\n        }\n    ]\n\n    useLayoutEffect(() => {\n        const tokensData = portfolio.tokens\n            .map(({ label, balanceUSD }) => ({\n                label,\n                value: Number(((balanceUSD / portfolio.balance.total.full) * 100).toFixed(2))\n            }))\n            .filter(({ value }) => value > 0);\n\n        const totalProtocols = portfolio.protocols.map(({ assets }) => \n            assets\n                .map(({ balanceUSD }) => balanceUSD)\n                .reduce((acc, curr) => acc + curr, 0))\n            .reduce((acc, curr) => acc + curr, 0)\n\n        const protocolsData = portfolio.protocols\n            .map(({ label, assets }) => ({\n                label,\n                value: Number(((assets.map(({ balanceUSD }) => balanceUSD).reduce((acc, curr) => acc + curr, 0) / totalProtocols) * 100).toFixed(2))\n            }))\n            .filter(({ value }) => value > 0)\n\n        setChartTokensData(tokensData);\n        setChartProtocolsData(protocolsData)\n    }, [portfolio.balance, portfolio.tokens, portfolio.protocols]);\n\n    useEffect(() => portfolio.requestOtherProtocolsRefresh(), [portfolio])\n\n    return (\n        <section id=\"dashboard\">\n            <div id=\"overview\">\n                <div id=\"balance\" className=\"panel\">\n                    <div className=\"title\">Balance</div>\n                    <div className=\"content\">\n                        {\n                            portfolio.isBalanceLoading ? \n                                <Loading/>\n                                :\n                                <Balances\n                                    portfolio={portfolio}\n                                    selectedNetwork={selectedNetwork}\n                                    setNetwork={setNetwork}\n                                />\n                        }\n                    </div>\n                </div>\n                <div id=\"chart\" className=\"panel\">\n                    <div className=\"title\">\n                        Balance by\n                        <Segments small defaultValue={chartSegments[0].value} segments={chartSegments} onChange={setChartType}/>\n                    </div>\n                    <div className=\"content\">\n                        {\n                            chartType === chartSegments[0].value ?\n                                portfolio.isBalanceLoading ?\n                                    <Loading/>\n                                    :\n                                    <Chart data={chartTokensData} size={200}/>\n                                :\n                                portfolio.areProtocolsLoading ?\n                                    <Loading/>\n                                    :\n                                    <Chart data={chartProtocolsData} size={200}/>\n                        }\n                    </div>\n                </div>\n            </div>\n            <div id=\"table\" className=\"panel\">\n                <div className=\"title\">\n                    Assets\n                    <Segments small defaultValue={tableSegments[0].value} segments={tableSegments} onChange={setTableType}></Segments>\n                </div>\n                <div className=\"content\">\n                    {\n                        portfolio.areProtocolsLoading ?\n                            <Loading/>\n                            :\n                            tableType === tableSegments[0].value ?\n                                <Protocols protocols={portfolio.protocols}/>\n                                :\n                                <Collectibles collectibles={portfolio.collectibles}/>\n                    }\n                </div>\n                {\n                    portfolio.areProtocolsLoading || !portfolio.protocols.length ?\n                        null\n                        :\n                        <div className=\"powered\">\n                            Powered by Zapper\n                        </div>\n                }\n            </div>\n        </section>\n    )\n}","import './Accounts.scss'\n\nimport { useState } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { AiOutlinePlus } from 'react-icons/ai'\nimport { MdOutlineContentCopy, MdLogout, MdOutlineClose, MdOutlineCheck } from 'react-icons/md'\nimport * as blockies from 'blockies-ts';\nimport { DropDown, Button } from '../../../common';\nimport { useToasts } from '../../../../hooks/toasts';\n\nconst Accounts = ({ accounts, selectedAddress, onSelectAcc, onRemoveAccount }) => {\n    const { addToast } = useToasts()\n    const [accountWarning, setAccountWarning] = useState(false)\n    const [closed, setClosed] = useState(false)\n\n    const shortenedAddress = address => address.slice(0, 5) + '...' + address.slice(-3)\n    const isActive = id => id === selectedAddress ? 'active' : ''\n    const toIcon = seed => blockies.create({ seed }).toDataURL()\n    const toIconBackgroundImage = seed => ({ backgroundImage: `url(${toIcon(seed)})`})\n    const walletType = signerExtra => {\n        if (signerExtra && signerExtra.type === 'ledger') return 'Ledger'\n        else if (signerExtra && signerExtra.type === 'trezor') return 'Trezor'\n        else return 'Web3'\n    }\n    const copyAddress = async address => {\n        await navigator.clipboard.writeText(address)\n        addToast('Copied to clipboard!')\n    }\n\n    const onSelectAccount = (id) => {\n        onSelectAcc(id)\n        setClosed(true)\n    }\n\n    return (\n        <DropDown id=\"accounts\" icon={toIcon(selectedAddress)} title={shortenedAddress(selectedAddress)} closed={closed} onOpen={() => setClosed(false)}>\n          <div className=\"list\">\n            {\n              accounts.map(({ id, email, signer, signerExtra }) => \n                accountWarning !== id ?\n                    <div className={`account ${isActive(id)}`} key={id}>\n                        <div className=\"inner\" onClick={() => onSelectAccount(id)}>\n                            <div className=\"icon\" style={toIconBackgroundImage(id)}></div>\n                            <div className=\"details\">\n                                <div className=\"address\">{ id }</div>\n                                <label>{ email ? `Email/Password account (${email})` : `${walletType(signerExtra)} (${shortenedAddress(signer.address)})` }</label>\n                            </div>\n                        </div>\n                        <div className=\"buttons\">\n                            <div className=\"button\" onClick={() => copyAddress(id)}>\n                                <MdOutlineContentCopy/>\n                            </div>\n                            <div className=\"button\" onClick={() => setAccountWarning(id)}>\n                                <MdLogout/>\n                            </div>\n                        </div>\n                    </div>\n                    :\n                    <div id=\"confirm-delete-account\" className={`account ${isActive(id)}`} key={id}>\n                        <div className=\"message\">\n                            Are you sure you want to log out from this account ?\n                        </div>\n                        <div className=\"buttons\">\n                            <div className=\"button danger\" onClick={() => onRemoveAccount(id)}>\n                                <MdOutlineCheck/>\n                            </div>\n                            <div className=\"button\" onClick={() => setAccountWarning(false)}>\n                                <MdOutlineClose/>\n                            </div>\n                        </div>\n                    </div>\n              )\n            }\n          </div>\n          <div id=\"add-account\">\n            <NavLink to=\"/add-account\">\n              <Button icon={<AiOutlinePlus/>} small>Add Account</Button>\n            </NavLink>\n          </div>\n        </DropDown>\n    )\n}\n\nexport default Accounts","import './DApps.scss'\n\nimport React, { useState, useCallback } from 'react'\nimport { FiHelpCircle } from 'react-icons/fi'\nimport { DropDown, ToolTip } from \"../../../common\"\nimport { checkClipboardPermission } from '../../../../helpers/permissions'\nimport { MdOutlineWarning } from 'react-icons/md'\n\nconst DApps = ({ connections, connect, disconnect }) => {\n    const [isClipboardGranted, setClipboardGranted] = useState(false)\n\n    const checkPermission = async () => {\n        const status = await checkClipboardPermission()\n        setClipboardGranted(status)\n        return status\n    }\n\n    const readClipboard = useCallback(async () => {\n        if (isClipboardGranted) {\n            const content = await navigator.clipboard.readText()\n            if (content.startsWith('wc:')) connect({ uri: content })\n        } else {\n            const uri = prompt('Enter WalletConnect URI')\n            if (uri) connect({ uri })\n        }\n    }, [connect, isClipboardGranted])\n\n    const isLegacyWC = ({ bridge }) => /https:\\/\\/bridge.walletconnect.org/g.test(bridge)\n\n    return (\n        <DropDown id=\"dApps\" title=\"dApps\" badge={connections.length} onOpen={() => checkPermission()}>\n            <div id=\"connect-dapp\">\n                <div className=\"heading\">\n                    <button disabled={isClipboardGranted} onClick={readClipboard}>\n                        Connect dApp\n                    </button>\n                    <a href='https://help.ambire.com/hc/en-us/articles/4410889965842' target='_blank' rel='noreferrer'>\n                        <FiHelpCircle size={30} />\n                    </a>\n                </div>\n                {isClipboardGranted ? (\n                    <label>\n                        Automatic connection enabled, just copy a WalletConnect URL and\n                        come back to this tab.\n                    </label>\n                ) : null}\n            </div>\n            {connections.map(({ session, uri }) => (\n                <div className=\"item dapps-item\" key={session.peerId}>\n                    <div className=\"icon\">\n                        <img\n                            src={session.peerMeta.icons.filter(x => !x.endsWith('favicon.ico'))[0]}\n                            alt={session.peerMeta.name}\n                        ></img>\n                    </div>\n                    <a href={session.peerMeta.url} target=\"_blank\" rel=\"noreferrer\">\n                        <div className=\"details\">\n                            { \n                                isLegacyWC(session) ? \n                                    <ToolTip className=\"session-warning\" label=\"dApp uses legacy WalletConnect bridge which is unreliable and often doesn't work. Please tell the dApp to update to the latest WalletConnect version.\">\n                                        <MdOutlineWarning/>\n                                    </ToolTip>\n                                    :\n                                    null\n                            }\n                            <div className=\"name\">{session.peerMeta.name}</div>\n                        </div>\n                    </a>\n                    <div className=\"separator\"></div>\n                    <button onClick={() => disconnect(uri)}>Disconnect</button>\n                </div>\n          ))}\n        </DropDown>\n    )\n}\n\nexport default DApps","import \"./TopBar.scss\";\n\nimport React from \"react\";\nimport { Select } from \"../../common\";\nimport Accounts from \"./Accounts/Accounts\";\nimport DApps from \"./DApps/DApps\";\n\nconst TopBar = ({\n  connections,\n  connect,\n  disconnect,\n  onSelectAcc,\n  onRemoveAccount,\n  selectedAcc,\n  accounts,\n  network,\n  setNetwork,\n  allNetworks,\n}) => {\n  const networksItems = allNetworks.map(({ id, name, icon }) => ({\n    label: name,\n    value: id,\n    icon\n  }))\n\n  return (\n    <div id=\"topbar\">\n      <div className=\"container\">\n        <DApps connections={connections} connect={connect} disconnect={disconnect}/>\n        <Accounts accounts={accounts} selectedAddress={selectedAcc} onSelectAcc={onSelectAcc} onRemoveAccount={onRemoveAccount}/>\n        <Select defaultValue={network.id} items={networksItems} onChange={value => setNetwork(value)}/>\n      </div>\n    </div>\n  );\n};\n\nexport default TopBar;\n","import './SideBar.scss'\n\nimport { NavLink } from 'react-router-dom'\nimport { MdDashboard, MdLock, MdCompareArrows } from 'react-icons/md'\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { BsCurrencyExchange } from 'react-icons/bs'\nimport { BsPiggyBank } from 'react-icons/bs'\nimport { BiTransfer } from 'react-icons/bi'\nimport { Loading } from '../../common'\nimport { useCallback, useEffect, useRef, useState } from 'react'\n\nconst SideBar = ({ match, portfolio }) => {\n  const sidebarRef = useRef()\n  const [balanceFontSize, setBalanceFontSize] = useState(0)\n    const resizeBalance = useCallback(() => {\n        const balanceFontSizes = {\n            3: '2em',\n            5: '1.5em',\n            7: '1.3em',\n            9: '1.2em',\n            11: '1em',\n        }\n\n        const charLength = portfolio.balance.total.truncated.length\n        const closest = Object.keys(balanceFontSizes).reduce((prev, current) => Math.abs(current - charLength) < Math.abs(prev - charLength) ? current : prev)\n        setBalanceFontSize(balanceFontSizes[closest])\n    }, [portfolio.balance.total])\n\n    useEffect(() => resizeBalance(), [resizeBalance])\n\n  return (\n    <div id=\"sidebar\" ref={sidebarRef}>\n      <NavLink to={match.url + '/dashboard'}>\n        <div id=\"logo\" />\n        <div id=\"icon\" />\n      </NavLink>\n\n      <div className=\"balance\">\n        <label>Balance</label>\n        {portfolio.isBalanceLoading ? (\n          <Loading />\n        ) : (\n          <div\n            className=\"balanceDollarAmount\"\n            style={{ fontSize: balanceFontSize }}\n          >\n            <span className=\"dollarSign highlight\">$</span>\n            {portfolio.balance.total.truncated}\n            <span className=\"highlight\">\n              .{portfolio.balance.total.decimals}\n            </span>\n          </div>\n        )}\n      </div>\n      <nav>\n        <NavLink to={match.url + \"/dashboard\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <MdDashboard size={30}/>Dashboard\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/deposit\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <GiReceiveMoney size={30}/>Deposit\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/transfer\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <BiTransfer size={30}/>Transfer\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/swap\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <BsCurrencyExchange size={30}/>Swap\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/earn\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <BsPiggyBank size={30}/>Earn\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/transactions\"} activeClassName=\"selected\">\n          <div className=\"item\">\n                <MdCompareArrows size={30}/>Transactions\n          </div>\n        </NavLink>\n        <NavLink to={match.url + \"/security\"} activeClassName=\"selected\">\n          <div className=\"item\">\n              <MdLock size={30}/>Security\n          </div>\n        </NavLink>\n      </nav>\n    </div>\n  )\n}\n\nexport default SideBar\n","export default __webpack_public_path__ + \"static/media/ramp.26a99e26.svg\";","export default __webpack_public_path__ + \"static/media/paytrie.338f7c3b.svg\";","export default __webpack_public_path__ + \"static/media/transak.e01c0265.svg\";","import { RampInstantSDK } from '@ramp-network/ramp-instant-sdk'\nimport transakSDK from '@transak/transak-sdk'\nimport { popupCenter } from '../helpers/popupHelper'\nimport url from 'url'\n\nimport { RAMP_HOST_API_KEY, PAYTRIE_PARTNER_URL, TRANSAK_API_KEY, TRANSAK_ENV } from '../config'\n\nexport const openRampNetwork = ({ walletAddress, selectedNetwork }) => {\n    const assetsList = {\n        ethereum: 'ERC20_*,ETH_*',\n        polygon: 'MATIC_ERC20_*,MATIC_*',\n        avalanche: 'AVAX_*',\n    }\n\n    const widget = new RampInstantSDK({\n        hostAppName: 'Ambire',\n        hostLogoUrl: 'https://www.ambire.com/ambire-logo.png',\n        variant: 'auto',\n        swapAsset: assetsList[selectedNetwork],\n        userAddress: walletAddress,\n        hostApiKey: RAMP_HOST_API_KEY,\n    })\n    widget.show()\n};\n\nexport const openPayTrie = ({ walletAddress, selectedNetwork }) => {\n    const rightSideLabel = selectedNetwork === 'polygon' ? 'USDC-P' : 'USDC'\n\n    const URL = url.parse(PAYTRIE_PARTNER_URL, true)\n    URL.search = null\n    URL.query = {\n        ...URL.query,\n        addr: walletAddress,\n        rightSideLabel\n    }\n\n    popupCenter({\n        url: url.format(URL),\n        title: 'Paytrie Deposit',\n        w: 450,\n        h: 700,\n    })\n};\n\nexport const openTransak = ({ walletAddress, selectedNetwork }) => {\n    let networks = selectedNetwork === 'avalanche' ? 'avaxcchain' : selectedNetwork\n    let defaultCurency = {\n        'ethereum': 'USDC',\n        'polygon': 'USDC',\n        'arbitrum': 'ETH',\n        'avaxcchain': 'AVAX'\n    }\n\n    const transak = new transakSDK({\n        apiKey: TRANSAK_API_KEY,\n        environment: TRANSAK_ENV,\n        networks,\n        defaultCryptoCurrency: defaultCurency[networks],\n        disableWalletAddressForm: true,\n        walletAddress,\n        themeColor: '282b33',\n        email: '',\n        redirectURL: '',\n        hostURL: window.location.origin,\n        widgetHeight: 'calc(100% - 60px)',\n        widgetWidth: '100%',\n    })\n\n    transak.init()\n\n    transak.on(transak.ALL_EVENTS, data => {\n        console.log(data)\n    })\n\n    transak.on(transak.EVENTS.TRANSAK_ORDER_SUCCESSFUL, orderData => {\n        console.log(orderData)\n        transak.close()\n    })\n}\n","export const popupCenter = ({ url, title, w, h }) => {\n\t// Fixes dual-screen position                             Most browsers      Firefox\n\tconst dualScreenLeft =\n\t\twindow.screenLeft !== undefined ? window.screenLeft : window.screenX\n\tconst dualScreenTop =\n\t\twindow.screenTop !== undefined ? window.screenTop : window.screenY\n\n\tconst width = window.innerWidth\n\t\t? window.innerWidth\n\t\t: document.documentElement.clientWidth\n\t\t? document.documentElement.clientWidth\n\t\t: window.screen.width\n\tconst height = window.innerHeight\n\t\t? window.innerHeight\n\t\t: document.documentElement.clientHeight\n\t\t? document.documentElement.clientHeight\n\t\t: window.screen.height\n\n\tconst systemZoom = width / window.screen.availWidth\n\tconst left = (width - w) / 2 / systemZoom + dualScreenLeft\n\tconst top = (height - h) / 2 / systemZoom + dualScreenTop\n\tconst newWindow = window.open(\n\t\turl,\n\t\ttitle,\n\t\t`\n\t\ttoolbar=no,scrollbars=no,resizable=no\n\t\twidth=${w / systemZoom}, \n\t\theight=${h / systemZoom}, \n\t\ttop=${top}, \n\t\tleft=${left},\n\t\t`\n\t)\n\n\tif (window.focus) newWindow.focus()\n}","import './Providers.scss'\n\nimport RAMP_LOGO from '../../../../resources/ramp.svg';\nimport PAYTRIE_LOGO from '../../../../resources/paytrie.svg';\nimport TRANSAK_LOGO from '../../../../resources/transak.svg';\n\nimport { openRampNetwork, openPayTrie, openTransak } from '../../../../services/providers'\n\nexport default function Providers({ walletAddress, networkDetails }) {\n    const providers = [\n        {\n            logo: RAMP_LOGO,\n            name: 'Ramp',\n            type: 'Bank Transfer, Credit/Debit Card, Apple Pay',\n            fees: '0.49%-2.9%',\n            limits: '10,000EUR/m',\n            currencies: 'USD, EUR, GBP',\n            networks: ['ethereum', 'polygon', 'avalanche'],\n            onClick: () => openRampNetwork({walletAddress, selectedNetwork: networkDetails.id})\n        },\n        {\n            logo: PAYTRIE_LOGO,\n            name: 'PayTrie',\n            type: 'Bank Transfer',\n            fees: '1% (min. $2 CAD)',\n            limits: '$2,000CAD/day',\n            currencies: 'CAD',\n            networks: ['ethereum', 'polygon'],\n            onClick: () => openPayTrie({walletAddress, selectedNetwork: networkDetails.id})\n        },\n        {\n            logo: TRANSAK_LOGO,\n            name: 'Transak',\n            type: 'Credit/Debit card and Bank Transfer (methods availability depends on location)',\n            fees: 'from 0.5%',\n            limits: 'up to 15,000 EUR/day',\n            currencies: 'GBP, EUR, USD and many more',\n            networks: ['ethereum', 'polygon', 'avalanche', 'arbitrum'],\n            onClick: () => openTransak({walletAddress, selectedNetwork: networkDetails.id})\n        }\n    ];\n\n    const shouldBeDisabled = (networks) => {\n        return networks.includes(networkDetails.id) ? null : 'disabled'; \n    };\n\n    return (\n        <div id=\"providers\">\n            {\n                providers.map(({ logo, name, type, fees, limits, currencies, networks, onClick }) =>\n                    <div className={`provider ${shouldBeDisabled(networks)}`} key={name} onClick={onClick}>\n                        <div className=\"logo\">\n                            <img src={logo} alt={name}></img>\n                        </div>\n                        <div className=\"details\">\n                            <div className=\"type\">\n                                { type }\n                            </div>\n                            <div className=\"fees\">\n                                Fees: { fees }\n                            </div>\n                            <div className=\"limits\">\n                                Limits: { limits }\n                            </div>\n                            <div className=\"currencies\">\n                                Currencies: { currencies }\n                            </div>\n                        </div>\n                    </div>\n                )\n            }\n            {\n                networkDetails.id !== 'ethereum' ? \n                    <div id=\"network-warning\">\n                        <b>NOTE:</b> Some deposit methods are unavailable on <b>{networkDetails.name}</b>. Switch to Ethereum for the widest support.\n                    </div>\n                    :\n                    null\n            }\n        </div>\n    )\n}\n","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/polygon-logo.d08b26bd.svg\";","import './Deposit.scss'\n\nimport { MdAccountBalance, MdAccountBalanceWallet } from 'react-icons/md'\nimport TextInput from '../../common/TextInput/TextInput'\nimport Providers from './Providers/Providers'\n\nimport ETHEREUM_LOGO from '../../../resources/ethereum-logo.png'\nimport POLYGON_LOGO from '../../../resources/polygon-logo.svg'\nimport networks from '../../../consts/networks'\n\nexport default function Deposit({ selectedAcc, selectedNetwork }) {\n    const networkDetails = networks.find(({ id }) => id === selectedNetwork)\n\n    return (\n        <section id=\"deposit\">\n            <div className=\"panel\">\n                <div className=\"heading\">\n                     <div className=\"title\">\n                        <MdAccountBalanceWallet size={35}/>\n                        Deposit Tokens\n                    </div>\n                    <div className=\"subtitle\">\n                        Direct Deposit\n                    </div>\n                </div>\n                <div className=\"description\">\n                    <TextInput className=\"depositAddress\" label=\"Send tokens or collectibles (NFTs) to this address:\" value={selectedAcc} copy/>\n                </div>\n                <div id=\"networks\">\n                    Following networks supported:\n                    <div className=\"logos\">\n                        <img src={ETHEREUM_LOGO} alt=\"Ethereum\"/>\n                        <img src={POLYGON_LOGO} alt=\"Polygon\"/>\n                    </div>\n                </div>\n            </div>\n            <div className=\"panel\">\n                <div className=\"heading\">\n                    <div className=\"title\">\n                        <MdAccountBalance size={35}/>\n                        Fiat Currency\n                    </div>\n                    <div className=\"subtitle\">\n                        Credit Card & Bank Transfer\n                    </div>\n                </div>\n                <div className=\"description\">\n                    Deposit with credit card to your account directly using one of our partners\n                </div>\n                <Providers walletAddress={selectedAcc} networkDetails={networkDetails}/>\n            </div>\n        </section>\n    )\n}","import './GnosisSafeApps.scss'\n\nimport { useEffect, useRef, useState } from 'react'\nimport {\n    Skeleton,\n    AmbireLoading\n} from '../../common'\n\nexport default function GnosisSafeAppIframe({\n    selectedApp = {},\n    title = 'Ambire Plugin',\n    network,\n    selectedAcc,\n    gnosisConnect,\n    gnosisDisconnect\n}) {\n\n    const { chainId } = network || {}\n    const { url } = selectedApp || {}\n    const [loading, setLoading] = useState(true)\n    const [hash, setHash] = useState('')\n    const iframeRef = useRef(null);\n\n\n    useEffect(() => {\n        const newHash = url + chainId + selectedAcc\n        setHash(newHash)\n    }, [chainId, selectedAcc, url])\n\n    useEffect(() => {\n        setLoading(true)\n    }, [hash])\n\n    useEffect(() => {\n        gnosisConnect({\n            selectedAcc,\n            iframeRef,\n            app: selectedApp\n        });\n\n        return () => {\n            gnosisDisconnect()\n        }\n\n    }, [selectedApp, network, selectedAcc, iframeRef, gnosisConnect, gnosisDisconnect])\n\n    return (\n        <div id=\"plugin-gnosis-container\">\n            {\n                loading &&\n                <div className='iframe-placeholder'>\n                    <Skeleton >\n                        <AmbireLoading />\n                    </Skeleton>\n                </div>\n            }\n\n            {\n                url &&\n                <iframe\n                    id={hash}\n                    key={hash}\n                    ref={iframeRef}\n                    title={title}\n                    src={url}\n                    onLoad={() => setLoading(false)}\n                    style={loading ? { display: 'none' } : {}}\n                />\n            }\n        </div>)\n}\n","import { SUSHI_SWAP_FRAME } from '../../../config'\nimport GnosisSafeAppIframe from '../../Plugins/GnosisSafeApps/GnosisSafeAppIframe'\n\nconst ambireSushi = {\n    name: \"Ambire swap\",\n    url: SUSHI_SWAP_FRAME,\n    logo: 'https://www.ambire.com/ambire-logo.png',\n    desc: 'Ambire swap'\n}\n\nexport default function SushiSwap({ network, selectedAcc, gnosisConnect, gnosisDisconnect }) {\n    return (\n        <GnosisSafeAppIframe\n            network={network}\n            selectedAcc={selectedAcc}\n            gnosisConnect={gnosisConnect}\n            gnosisDisconnect={gnosisDisconnect}\n            selectedApp={ambireSushi}\n            title={'Ambire swap'}\n        />\n    )\n}","import './Swap.scss';\n\nimport React from 'react';\nimport SwapComponent from './SushiIframe'\n\nexport default function Swap(props) {\n    return (\n        <section id=\"swap\">     \n            <SwapComponent {...props} />  \n        </section>\n    )\n}","import './SendPlaceholder.scss'\n\nimport { GiReceiveMoney } from 'react-icons/gi'\nimport { NavLink } from 'react-router-dom'\nimport { Button } from '../../../common'\n\nconst SendPlaceholder = () => {\n    return (\n        <div id=\"send-placeholder\">\n            <label>You don't have any funds on this account.</label>\n            <NavLink to=\"/wallet/deposit\">\n                <Button small icon={<GiReceiveMoney/>}>Deposit</Button>\n            </NavLink>\n        </div>\n    )\n}\n\nexport default SendPlaceholder","import './Transfer.scss'\n\nimport { BsArrowDown } from 'react-icons/bs'\nimport { useParams, withRouter } from 'react-router'\nimport { useEffect, useState } from 'react'\nimport { ethers } from 'ethers'\nimport SendPlaceholder from './SendPlaceholder/SendPlaceholder'\nimport { Interface } from 'ethers/lib/utils'\nimport { useToasts } from '../../../hooks/toasts'\nimport { TextInput, NumberInput, Button, Select, Loading, AddressBook, AddressWarning } from '../../common'\nimport { isValidAddress, isKnownTokenOrContract } from '../../../helpers/address';\n\nconst ERC20 = new Interface(require('adex-protocol-eth/abi/ERC20'))\nconst crossChainAssets = [\n    {\n        label: 'USD Coin (Polygon)',\n        value: 'USDC-polygon',\n        icon: 'https://raw.githubusercontent.com/sushiswap/assets/master/blockchains/polygon/assets/0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174/logo.png'\n    },\n    {\n        label: 'Tether USD (Polygon)',\n        value: 'USDT-polygon',\n        icon: 'https://raw.githubusercontent.com/sushiswap/assets/master/blockchains/polygon/assets/0xc2132D05D31c914a87C6611C10748AEb04B58e8F/logo.png'\n    }\n]\n\nconst Transfer = ({ history, portfolio, selectedAcc, selectedNetwork, addRequest, addressBook }) => {\n    const { addresses, addAddress, removeAddress, isKnownAddress } = addressBook\n\n    const { tokenAddress } = useParams()\n    const { addToast } = useToasts()\n\n    const [asset, setAsset] = useState(tokenAddress)\n    const [amount, setAmount] = useState(0)\n    const [bigNumberHexAmount, setBigNumberHexAmount] = useState('')\n    const [address, setAddress] = useState('')\n    const [disabled, setDisabled] = useState(true)\n    const [addressConfirmed, setAddressConfirmed] = useState(false)\n    const [newAddress, setNewAddress] = useState('')\n\n    const assetsItems = portfolio.tokens.map(({ label, address, img }) => ({\n        label,\n        value: address,\n        icon: img\n    }))\n\n    const selectedAsset = portfolio.tokens.find(({ address }) => address === asset)\n\n    const getMaxAmount = () => {\n        if (!selectedAsset) return 0;\n        const { balanceRaw, decimals } = selectedAsset\n        return ethers.utils.formatUnits(balanceRaw, decimals)\n    }\n\n    const setMaxAmount = () => onAmountChange(getMaxAmount(amount))\n\n    const onAmountChange = value => {\n        if (value) {\n            const { decimals } = selectedAsset\n            const bigNumberAmount = ethers.utils.parseUnits(value, decimals).toHexString()\n            setBigNumberHexAmount(bigNumberAmount)\n        }\n\n        setAmount(value)\n    }\n\n    const sendTx = () => {\n        try {\n            const txn = {\n                to: tokenAddress,\n                value: '0',\n                data: ERC20.encodeFunctionData('transfer', [address, bigNumberHexAmount])\n            }\n\n            if (Number(tokenAddress) === 0) {\n                txn.to = address\n                txn.value = bigNumberHexAmount\n                txn.data = '0x'\n            }\n\n            addRequest({\n                id: `transfer_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: selectedNetwork.chainId,\n                account: selectedAcc,\n                txn\n            })\n\n            setAmount(0)\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    useEffect(() => {\n        setAmount(0)\n        setBigNumberHexAmount('')\n        history.replace({ pathname: `/wallet/transfer/${asset}` })\n    }, [asset, history])\n\n    useEffect(() => {\n        setDisabled(isKnownTokenOrContract(address) || !isValidAddress(address) || !(amount > 0) || !(amount <= selectedAsset?.balance) || address === selectedAcc || (!isKnownAddress(address) && !addressConfirmed))\n    }, [address, amount, selectedAcc, selectedAsset, addressConfirmed, isKnownAddress])\n\n    return (\n        <div id=\"transfer\">\n           <div className=\"panel\">\n               <div className=\"title\">\n                   Send\n               </div>\n               {\n                    portfolio.isBalanceLoading ?\n                        <Loading/>\n                        :\n                        assetsItems.length ? \n                            <div className=\"form\">\n                                <Select searchable defaultValue={asset} items={assetsItems} onChange={(value) => setAsset(value)}/>\n                                <NumberInput\n                                    label={`Available Amount: ${getMaxAmount()} ${selectedAsset?.symbol}`}\n                                    value={amount}\n                                    precision={selectedAsset?.decimals}\n                                    onInput={onAmountChange}\n                                    button=\"MAX\"\n                                    onButtonClick={() => setMaxAmount()}\n                                />\n                                <div id=\"recipient-field\">\n                                    <TextInput\n                                        placeholder=\"Recipient\"\n                                        info=\"Please double-check the recipient address, blockchain transactions are not reversible.\"\n                                        value={address}\n                                        onInput={setAddress}\n                                    />\n                                    <AddressBook \n                                        addresses={addresses}\n                                        addAddress={addAddress}\n                                        removeAddress={removeAddress}\n                                        newAddress={newAddress}\n                                        onClose={() => setNewAddress(null)}\n                                        onSelectAddress={address => setAddress(address)}\n                                    />\n                                </div>\n                                <div className=\"separator\"/>\n                                <AddressWarning\n                                    address={address}\n                                    onAddNewAddress={() => setNewAddress(address)}\n                                    onChange={(value) => setAddressConfirmed(value)}\n                                    isKnownAddress={isKnownAddress}\n                                />\n                                <Button disabled={disabled} onClick={sendTx}>Send</Button>\n                            </div>\n                            :\n                            <SendPlaceholder/>\n               }\n           </div>\n           <div className=\"panel\">\n               <div className=\"placeholder-overlay\">\n                    Coming Soon...\n               </div>\n               <div className=\"title\">\n                   Cross-chain\n               </div>\n               <div className=\"form\">\n                    <label>From</label>\n                    <Select searchable items={assetsItems} onChange={() => {}}/>\n                    <NumberInput value={0} min=\"0\" onInput={() => {}} button=\"MAX\" onButtonClick={() => setMaxAmount()}/>\n                    <div className=\"separator\">\n                        <BsArrowDown/>\n                    </div>\n                    <label>To</label>\n                    <Select searchable items={crossChainAssets} onChange={() => {}}/>\n                    <NumberInput value={0} min=\"0\" onInput={() => {}} button=\"MAX\" onButtonClick={() => {}}/>\n                    <Button>Transfer</Button>\n                </div>\n           </div>\n        </div>\n    )\n}\n\nexport default withRouter(Transfer)\n","const AAVELendingPoolAbi = [\n    \"function getLendingPool() view returns (address address)\",\n    \"function getReservesList() view returns (address[] memory)\",\n    \"function getReserveData(address asset) view returns (tuple(uint256 availableLiquidity, uint256 totalStableDebt, uint256 totalVariableDebt, uint256 liquidityRate, uint256 variableBorrowRate, uint256 stableBorrowRate, uint256 averageStableBorrowRate, uint256 liquidityIndex, uint256 variableBorrowIndex, uint40 lastUpdateTimestamp) memory)\",\n    \"function deposit(address asset, uint256 amount, address onBehalfOf, uint16 referralCode)\",\n    \"function withdraw(address asset, uint256 amount, address to)\",\n]\n\nexport default AAVELendingPoolAbi","const AAVELendingPoolProviders = {\n    ethereum: '0xb53c1a33016b2dc2ff3653530bff1848a515c8c5',\n    polygon: '0xd05e3E715d945B59290df0ae8eF85c1BdB684744',\n    avalanche: '0xb6A86025F0FE1862B372cb0ca18CE3EDe02A318f'\n}\n\nexport default AAVELendingPoolProviders","export default __webpack_public_path__ + \"static/media/aave.58aec338.svg\";","import './Card.scss'\n\nimport { Select, Segments, NumberInput, Button, Loading } from '../../../../common'\nimport { useEffect, useState } from 'react'\nimport { BsArrowDownSquare, BsArrowUpSquare } from 'react-icons/bs'\nimport { ethers } from 'ethers'\n\nconst segments = [{ value: 'Deposit' }, { value: 'Withdraw' }]\n\nconst Card = ({ loading, unavailable, tokensItems, icon, details, onTokenSelect, onValidate }) => {    \n    const [segment, setSegment] = useState(segments[0].value)\n    const [tokens, setTokens] = useState([])\n    const [token, setToken] = useState()\n    const [amount, setAmount] = useState(0)\n    const [disabled, setDisabled] = useState(true)\n\n    const currentToken = tokens.find(({ value }) => value === token)\n\n    const getMaxAmount = () => {\n        if (!currentToken) return 0;\n        const { balanceRaw, decimals } = currentToken\n        return ethers.utils.formatUnits(balanceRaw, decimals)\n    }\n\n    const setMaxAmount = () => setAmount(getMaxAmount(amount))\n\n    useEffect(() => {\n        if (segment === segments[0].value) setTokens(tokensItems.filter(({ type }) => type === 'deposit'))\n        if (segment === segments[1].value) setTokens(tokensItems.filter(({ type }) => type === 'withdraw'))\n    }, [segment, tokensItems])\n\n    useEffect(() => setAmount(0), [segment])\n\n    useEffect(() => {\n        onTokenSelect(token)\n        setDisabled(!token || !tokens.length)\n    }, [token, onTokenSelect, tokens.length])\n\n    return (\n        <div className=\"card\">\n            <div className=\"title\">\n                <img src={icon} alt=\"Icon\" />\n            </div>\n            {\n                loading ?\n                    <Loading/>\n                    :\n                    unavailable ?\n                        <div className=\"unavailable\">\n                            Unavailable on this Network\n                        </div>\n                        :\n                        <div className=\"content\">\n                            <Select\n                                searchable\n                                disabled={disabled}\n                                label=\"Choose Token\"\n                                defaultValue={token}\n                                items={tokens}\n                                onChange={(value) => setToken(value)}\n                            />\n                            {\n                                !disabled ? \n                                    <ul className=\"details\">\n                                        {\n                                            details.map(([type, value]) => (\n                                                <li key={type}><b>{type}</b> {value}</li>\n                                            ))\n                                        }\n                                    </ul>\n                                    :\n                                    <div className=\"details-placeholder\">\n                                        <div/>\n                                        <div/>\n                                        <div/>\n                                    </div>\n                            }\n                            <Segments small defaultValue={segment} segments={segments} onChange={(value) => setSegment(value)}></Segments>\n                            <NumberInput\n                                disabled={!currentToken?.balance}\n                                min=\"0\"\n                                max={currentToken?.balance}\n                                value={amount}\n                                label={`Available Amount: ${!disabled ? `${getMaxAmount()} ${currentToken?.symbol}` : '0'}`}\n                                onInput={(value) => setAmount(value)}\n                                button=\"MAX\"\n                                onButtonClick={setMaxAmount}\n                            />\n                            <Button \n                                disabled={disabled || amount <= 0 || amount > currentToken?.balance}\n                                icon={segment === segments[0].value ? <BsArrowDownSquare/> : <BsArrowUpSquare/>}\n                                onClick={() => onValidate(segment, token, amount)}>\n                                    { segment }\n                            </Button>\n                        </div>\n            }\n        </div>\n    )\n}\n\nexport default Card","let zapperStorage = 'https://storage.googleapis.com/zapper-fi-assets/tokens'\nlet tokens = {\n    ethereum: [\n        {\n            address: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n            symbol: 'WETH'\n        },\n        {\n            address: '0x2260fac5e5542a773aa44fbcfedf7c193bc2c599',\n            symbol: 'WBTC'\n        },\n        {\n            address: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48',\n            symbol: 'USDC'\n        },\n        {\n            address: '0xdac17f958d2ee523a2206206994597c13d831ec7',\n            symbol: 'USDT'\n        },\n        {\n            address: '0x6b175474e89094c44da98b954eedeac495271d0f',\n            symbol: 'DAI'\n        },\n        {\n            address: '0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9',\n            symbol: 'AAVE'\n        },\n    ],\n    polygon: [\n        {\n            address: '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619',\n            symbol: 'WETH'\n        },\n        {\n            address: '0x1bfd67037b42cf73acf2047067bd4f2c47d9bfd6',\n            symbol: 'WBTC'\n        },\n        {\n            address: '0x2791bca1f2de4661ed88a30c99a7a9449aa84174',\n            symbol: 'USDC'\n        },\n        {\n            address: '0xc2132d05d31c914a87c6611c10748aeb04b58e8f',\n            symbol: 'USDT'\n        },\n        {\n            address: '0x8f3cf7ad23cd3cadbd9735aff958023239c6a063',\n            symbol: 'DAI'\n        },\n        {\n            address: '0xd6df932a45c0f255f85145f286ea0b292b21c90b',\n            symbol: 'AAVE'\n        },\n    ],\n    avalanche: [\n        {\n            address: '0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab',\n            symbol: 'WETH.e'\n        },\n        {\n            address: '0x50b7545627a5162f82a992c33b87adc75187b218',\n            symbol: 'WBTC.e'\n        },\n        {\n            address: '0xa7d7079b0fead91f3e65f86e8915cb59c1a4c664',\n            symbol: 'USDC.e'\n        },\n        {\n            address: '0xc7198437980c041c805a1edcba50c1ce5db95118',\n            symbol: 'USDT.e'\n        },\n        {\n            address: '0xd586e7f844cea2f87f50152665bcbc2c279d8d70',\n            symbol: 'DAI.e'\n        },\n        {\n            address: '0x63a72806098bd3d9520cc43356dd78afe5d386d9',\n            symbol: 'AAVE.e'\n        },\n    ],\n    'binance-smart-chain': []\n}\n\nconst getDefaultTokensItems = network => {\n    const items = (tokens[network] || []).map(token => ({\n        ...token,\n        img: `${zapperStorage}/${network}/${token.address}.png`,\n        balance: 0,\n        balanceRaw: '0',\n    })) || []\n\n    return [\n        ...items.map(token => ({ ...token, type: 'deposit' })),\n        ...items.map(token => ({ ...token, type: 'withdraw', symbol: `a${token.symbol}` }))\n    ]\n}\n\nexport { getDefaultTokensItems }\n","import { ethers, getDefaultProvider } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { useToasts } from '../../../../../hooks/toasts'\nimport ERC20Abi from 'adex-protocol-eth/abi/ERC20.json'\nimport AAVELendingPoolAbi from '../../../../../consts/AAVELendingPoolAbi'\nimport AAVELendingPoolProviders from '../../../../../consts/AAVELendingPoolProviders'\nimport networks from '../../../../../consts/networks'\n\nimport AAVE_ICON from '../../../../../resources/aave.svg'\nimport Card from '../Card/Card'\nimport { getDefaultTokensItems } from './defaultTokens'\n\nconst ERC20Interface = new Interface(ERC20Abi)\nconst AAVELendingPool = new Interface(AAVELendingPoolAbi)\nconst RAY = 10**27\nlet lendingPoolAddress = null\n\nconst AAVECard = ({ networkId, tokens, protocols, account, addRequest }) => {\n    const { addToast } = useToasts()\n\n    const currentNetwork = useRef()\n    const [isLoading, setLoading] = useState(true)\n    const [unavailable, setUnavailable] = useState(false)\n    const [tokensItems, setTokensItems] = useState([])\n    const [details, setDetails] = useState([])\n\n    const onTokenSelect = useCallback(async (value) => {\n        const token = tokensItems.find(({ address }) => address === value)\n        if (token) {\n            setDetails([\n                ['Annual Percentage Rate (APR)', `${token.apr}%`],\n                ['Lock', 'No Lock'],\n                ['Type', 'Variable Rate'],\n            ])\n        }\n    }, [tokensItems])\n\n    const networkDetails = networks.find(({ id }) => id === networkId)\n    const defaultTokens = useMemo(() => getDefaultTokensItems(networkDetails.id), [networkDetails.id])\n    const getToken = (type, address) => tokensItems.filter(token => token.type === type).find(token => token.address === address)\n    const addRequestTxn = (id, txn, extraGas = 0) => addRequest({ id, type: 'eth_sendTransaction', chainId: networkDetails.chainId, account, txn, extraGas })\n\n    const approveToken = async (tokenAddress, bigNumberHexAmount) => {\n        try {\n            const ZERO = ethers.BigNumber.from(0)\n            const provider = getDefaultProvider(networkDetails.rpc)\n            const tokenContract = new ethers.Contract(tokenAddress, ERC20Interface, provider)\n            const allowance = await tokenContract.allowance(account, tokenAddress)\n\n            if (allowance.lt(bigNumberHexAmount)) {\n                if (allowance.gt(ZERO)) {\n                    addRequestTxn(`aave_pool_approve_${Date.now()}`, {\n                        to: lendingPoolAddress,\n                        value: bigNumberHexAmount,\n                        data: '0x'\n                    })\n                }\n                addRequestTxn(`aave_pool_approve_${Date.now()}`, {\n                    to: tokenAddress,\n                    value: '0x0',\n                    data: ERC20Interface.encodeFunctionData('approve', [lendingPoolAddress, bigNumberHexAmount])\n                })\n            }\n        } catch(e) {\n            console.error(e)\n            addToast(`Aave Approve Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    const onValidate = async (type, tokenAddress, amount) => {\n        if (type === 'Deposit') {\n            const token = getToken('deposit', tokenAddress)\n            const bigNumberHexAmount = ethers.utils.parseUnits(amount.toString(), token.decimals).toHexString()\n            await approveToken(tokenAddress, bigNumberHexAmount)\n\n            try {\n                addRequestTxn(`aave_pool_deposit_${Date.now()}`, {\n                    to: lendingPoolAddress,\n                    value: '0x0',\n                    data: AAVELendingPool.encodeFunctionData('deposit', [tokenAddress, bigNumberHexAmount, account, 0])\n                }, 60000)\n            } catch(e) {\n                console.error(e)\n                addToast(`Aave Deposit Error: ${e.message || e}`, { error: true })\n            }\n        }\n        else if (type === 'Withdraw') {\n            const token = getToken('withdraw', tokenAddress)\n            const bigNumberHexAmount = ethers.utils.parseUnits(amount.toString(), token.decimals).toHexString()\n            await approveToken(tokenAddress, bigNumberHexAmount)\n\n            try {\n                addRequestTxn(`aave_pool_withdraw_${Date.now()}`, {\n                    to: lendingPoolAddress,\n                    value: '0x0',\n                    data: AAVELendingPool.encodeFunctionData('withdraw', [tokenAddress, bigNumberHexAmount, account])\n                }, 60000)\n            } catch(e) {\n                console.error(e)\n                addToast(`Aave Withdraw Error: ${e.message || e}`, { error: true })\n            }\n        }\n    }\n\n    const loadPool = useCallback(async () => {\n        const providerAddress = AAVELendingPoolProviders[networkDetails.id]\n        if (!providerAddress) {\n            setLoading(false)\n            setUnavailable(true)\n            return\n        }\n\n        try {\n            const provider = getDefaultProvider(networkDetails.rpc)\n            const lendingPoolProviderContract = new ethers.Contract(providerAddress, AAVELendingPool, provider)\n            lendingPoolAddress = await lendingPoolProviderContract.getLendingPool()\n        \n            const lendingPoolContract = new ethers.Contract(lendingPoolAddress, AAVELendingPool, provider)\n            const reserves = await lendingPoolContract.getReservesList()\n            const reservesAddresses = reserves.map(reserve => reserve.toLowerCase())\n\n            const withdrawTokens = (protocols.find(({ label }) => label === 'Aave V2')?.assets || [])\n                .map(({ tokens }) => tokens && tokens.map(({ img, symbol, tokens }) => tokens && tokens.map(token => ({\n                    ...token,\n                    img,\n                    symbol,\n                    type: 'withdraw'\n                }))))\n                .flat(2)\n                .filter(token => token)\n\n            const depositTokens = tokens.filter(({ address }) => reservesAddresses.includes(address)).map(token => ({\n                ...token,\n                type: 'deposit'\n            })).filter(token => token)\n\n            const allTokens = (await Promise.all([\n                ...defaultTokens.filter(({ type, address }) => type === 'deposit' && !depositTokens.map(({ address }) => address).includes(address)),\n                ...defaultTokens.filter(({ type, address }) => type === 'withdraw' && !withdrawTokens.map(({ address }) => address).includes(address)),\n                ...withdrawTokens,\n                ...depositTokens\n            ]))\n            \n            const uniqueTokenAddresses = [...new Set(allTokens.map(({ address }) => address))]\n            const tokensAPR = Object.fromEntries(await Promise.all(uniqueTokenAddresses.map(async address => {\n                const data = await lendingPoolContract.getReserveData(address)\n                const { liquidityRate } = data\n                const apr = ((liquidityRate / RAY) * 100).toFixed(2)\n                return [address, apr]\n            })))\n\n            const getEquToken = token => allTokens.find((({ address, type }) => address === token.address && (token.type === 'deposit' ? type === 'withdraw' : type === 'deposit')))\n            const tokensItems = allTokens.map(token => ({\n                ...token,\n                apr: tokensAPR[token.address],\n                icon: token.img,\n                label: `${token.symbol} (${tokensAPR[token.address]}% APR)`,\n                value: token.address\n            })).sort((a, b) => (b?.balance + getEquToken(b)?.balance) - (a?.balance + getEquToken(a)?.balance))\n\n            // Prevent race conditions\n            if (currentNetwork.current !== networkDetails.id) return\n\n            setTokensItems(tokensItems)\n            setLoading(false)\n            setUnavailable(false)\n        } catch(e) {\n            console.error(e);\n            addToast(`Aave load pool error: ${e.message || e}`, { error: true })\n        }\n    }, [addToast, protocols, tokens, defaultTokens, networkDetails])\n\n    useEffect(() => loadPool(), [loadPool])\n    useEffect(() => {\n        currentNetwork.current = networkId\n        setLoading(true)\n    }, [networkId])\n\n    return (\n        <Card loading={isLoading} unavailable={unavailable} icon={AAVE_ICON} details={details} tokensItems={tokensItems} onTokenSelect={onTokenSelect} onValidate={onValidate}/>\n    )\n}\n\nexport default AAVECard\n","import './Earn.scss'\nimport AAVECard from './Cards/AAVECard/AAVECard'\nimport { Loading } from '../../common'\n\nconst Earn = ({ portfolio, selectedNetwork, selectedAcc, addRequest }) => {\n    return (\n        <div id=\"earn\">\n            {\n                portfolio.isBalanceLoading ?\n                    <Loading/>\n                    :\n                    <AAVECard networkId={selectedNetwork.id} tokens={portfolio.tokens} protocols={portfolio.protocols} account={selectedAcc} addRequest={addRequest}/>\n            }\n        </div>\n    )\n}\n\nexport default Earn","import './AddAuthSigner.scss'\nimport { useState, useEffect, useCallback } from 'react'\n\nimport { TextInput, Button, DropDown } from '../../../common'\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport TrezorConnect from 'trezor-connect'\nimport { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { SelectSignerAccountModal } from '../../../Modals'\nimport { useModals } from '../../../../hooks'\nimport { isFirefox } from '../../../../lib/isFirefox'\nimport { ledgerGetAddresses, PARENT_HD_PATH } from \"../../../../lib/ledgerWebHID\"\n\nconst AddAuthSigner = props => {\n  const [signerAddress, setSignerAddress] = useState({\n    address: '',\n    index: 0,\n  })\n  const [addAccErr, setAddAccErr] = useState('')\n  const [disabled, setDisabled] = useState(true)\n  const [modalToggle, setModalToggle] = useState(true)\n  const [signersToChoose, setChooseSigners] = useState(null)\n  const [textInputInfo, setTextInputInfo] = useState('')\n  const { showModal } = useModals()\n\n\n  async function connectLedgerAndGetAccounts() {\n    if (isFirefox()) {\n      await connectLedgerAndGetAccountsU2F()\n    } else {\n      await connectLedgerAndGetAccountsWebHID()\n    }\n  }\n\n  async function connectLedgerAndGetAccountsU2F() {\n    const provider = new LedgerSubprovider({\n      networkId: 0, // @TODO: is this needed?\n      ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n      baseDerivationPath: PARENT_HD_PATH\n    })\n    // NOTE: do not attempt to do both of these together (await Promise.all)\n    // there is a bug in the ledger subprovider (race condition), so it will think we're trying to make two connections simultaniously\n    // cause one call won't be aware of the other's attempt to connect\n      const addresses = await provider.getAccountsAsync(100)\n      setChooseSigners({ addresses, signerName: 'Ledger' })\n      setModalToggle(true)\n  }\n\n  async function connectLedgerAndGetAccountsWebHID() {\n    let error = null\n    try {\n      const addrData = await ledgerGetAddresses()\n      if (!addrData.error) {\n        if (addrData.addresses.length === 1) {\n          return onSignerAddressClicked({\n            address: addrData.addresses[0],\n            index: 0,\n          })\n        } else {\n          setChooseSigners({ address: addrData.addresses, signerName: 'Ledger' })\n          setModalToggle(true)\n        }\n      } else {\n        error = addrData.error\n      }\n    } catch (e) {\n      console.log(e)\n      if (e.statusCode && e.id === 'InvalidChannel') {\n        error = \"Invalid channel\"\n      } else if (e.statusCode && e.statusCode === 25873) {\n        error = \"Please make sure your ledger is connected and the ethereum app is open\"\n      } else {\n        error = e.message\n      }\n    }\n\n    if (error) {\n      setAddAccErr(`Ledger error: ${error.message || error}`)\n    }\n  }\n\n  async function connectTrezorAndGetAccounts() {\n    /*\n      const engine = new Web3ProviderEngine({ pollingInterval: this.pollingInterval })\n      engine.addProvider(new TrezorSubprovider({ trezorConnectClientApi: TrezorConnect, ...this.config }))\n      engine.addProvider(new CacheSubprovider())\n      engine.addProvider(new RPCSubprovider(this.url, this.requestTimeoutMs))\n      */\n    const provider = new TrezorSubprovider({\n      trezorConnectClientApi: TrezorConnect,\n    })\n    const addresses = await provider.getAccountsAsync(100)\n    setChooseSigners({ addresses, signerName: 'Trezor' })\n    setModalToggle(true)\n  }\n\n  async function connectWeb3AndGetAccounts() {\n    // @TODO: pending state; should bein the LoginORSignup (AddAccount) component\n    if (typeof window.ethereum === 'undefined') {\n      // @TODO catch this\n      throw new Error('MetaMask not available')\n    }\n    const ethereum = window.ethereum\n    const web3Accs = await ethereum.request({ method: 'eth_requestAccounts' })\n    if (!web3Accs.length) throw new Error('No accounts connected')\n    if (web3Accs.length === 1)\n      return onSignerAddressClicked({\n        address: web3Accs[0],\n        index: 0,\n      })\n\n    setChooseSigners({ addresses: web3Accs, signerName: 'Web3' })\n    setModalToggle(true)\n  }\n\n  const modalHandler = () => {\n    setModalToggle(prevState => !prevState)\n  }\n\n  const wrapErr = async fn => {\n    setAddAccErr('')\n    try {\n      await fn()\n    } catch (e) {\n      console.error(e)\n      setAddAccErr(`Unexpected error: ${e.message || e}`)\n    }\n  }\n\n  const onSignerAddressClicked = useCallback(value => {\n    setSignerAddress(value)\n    modalHandler()\n    if (signersToChoose) setTextInputInfo(`${signersToChoose.signerName} address # ${value.index + 1}`)\n  }, [signersToChoose])\n\n  useEffect(() => {\n    if (modalToggle && signersToChoose)\n      showModal(\n        <SelectSignerAccountModal\n          signersToChoose={signersToChoose.addresses}\n          selectedNetwork={props.selectedNetwork}\n          onSignerAddressClicked={onSignerAddressClicked}\n          description={`You will authorize the selected ${signersToChoose.signerName} address to sign transactions for your account.`}\n        />\n      )\n  }, [modalToggle, onSignerAddressClicked, props.selectedNetwork, showModal, signersToChoose])\n\n  const addFromSignerButtons = (\n    <div className=\"wallet-btns-wrapper\">\n      <button\n        className=\"button\"\n        onClick={() => wrapErr(connectTrezorAndGetAccounts)}\n      >\n        <div\n          className=\"icon\"\n          style={{ backgroundImage: 'url(./resources/trezor.png)' }}\n        />\n        Trezor\n      </button>\n      <button\n        className=\"button\"\n        onClick={() => wrapErr(connectLedgerAndGetAccounts)}\n      >\n        <div\n          className=\"icon\"\n          style={{ backgroundImage: 'url(./resources/ledger.png)' }}\n        />\n        Ledger\n      </button>\n      <button\n        className=\"button\"\n        onClick={() => wrapErr(connectWeb3AndGetAccounts)}\n      >\n        <div\n          className=\"icon\"\n          style={{ backgroundImage: 'url(./resources/metamask.png)' }}\n        />\n        Metamask / Browser\n      </button>\n    </div>\n  )\n\n  const onTextInput = value => {\n    if (textInputInfo.length) setTextInputInfo('')\n    setSignerAddress({ ...signerAddress, address: value })\n  }\n\n  useEffect(() => {\n    const isAddressValid = /^0x[a-fA-F0-9]{40}$/.test(signerAddress.address)\n    setDisabled(!isAddressValid)\n  }, [signerAddress.address])\n\n  return (\n    <div className=\"content\">\n      <div\n        style={{\n          display: 'flex',\n          // alignItems: 'center',\n          justifyContent: 'space-between',\n        }}\n      >\n        <TextInput\n          placeholder=\"Enter signer address\"\n          className=\"depositAddress\"\n          value={signerAddress.address}\n          info={textInputInfo}\n          onInput={onTextInput}\n        />\n        <DropDown\n          style={{ height: '60px' }}\n          title=\"Connect signer\"\n          closeOnClick\n        >\n          {addFromSignerButtons}\n        </DropDown>\n        <div className=\"btns-wrapper\">\n          <Button\n            disabled={disabled}\n            onClick={() => props.onAddBtnClicked(signerAddress)}\n            small\n          >\n            Add\n          </Button>\n        </div>\n      </div>\n      {addAccErr ? <h3 className=\"error\">{addAccErr}</h3> : <></>}\n    </div>\n  )\n}\n\nexport default AddAuthSigner\n","import './Security.scss'\n\nimport { MdOutlineAdd } from 'react-icons/md'\nimport { useState, useEffect } from 'react'\nimport { Loading, TextInput, Button } from '../../common'\nimport { Interface } from 'ethers/lib/utils'\nimport accountPresets from '../../../consts/accountPresets'\nimport privilegesOptions from '../../../consts/privilegesOptions'\nimport { useRelayerData, useModals } from '../../../hooks'\nimport { InputModal } from '../../Modals';\nimport AddressList from '../../common/AddressBook/AddressList/AddressList'\nimport { isValidAddress } from '../../../helpers/address';\nimport AddAuthSigner from './AddAuthSigner/AddAuthSigner'\nimport { useToasts } from '../../../hooks/toasts'\nimport { useHistory } from 'react-router-dom'\nimport { MdInfoOutline } from 'react-icons/md'\n\nconst IDENTITY_INTERFACE = new Interface(\n  require('adex-protocol-eth/abi/Identity5.2')\n)\n\nconst Security = ({\n  relayerURL,\n  selectedAcc,\n  selectedNetwork,\n  accounts,\n  addressBook,\n  addRequest,\n  onAddAccount,\n}) => {\n  const { addresses, addAddress, removeAddress } = addressBook\n\n  const { showModal } = useModals()\n  const [ cacheBreak, setCacheBreak ] = useState(() => Date.now())\n  \n  useEffect(() => {\n    if (Date.now() - cacheBreak > 30000) setCacheBreak(Date.now())\n    const intvl = setTimeout(() => setCacheBreak(Date.now()), 35000)\n    return () => clearTimeout(intvl)\n  }, [cacheBreak])\n\n  const url = relayerURL\n    ? `${relayerURL}/identity/${selectedAcc}/${selectedNetwork.id}/privileges?cacheBreak=${cacheBreak}`\n    : null\n  const { data, errMsg, isLoading } = useRelayerData(url)\n  const privileges = data ? data.privileges : {}\n  const { addToast } = useToasts()\n  const history = useHistory()\n\n  const craftTransaction = (address, privLevel) => {\n    return {\n      to: selectedAcc,\n      data: IDENTITY_INTERFACE.encodeFunctionData('setAddrPrivilege', [\n        address,\n        privLevel,\n      ]),\n      value: '0x00',\n    }\n  }\n\n  const addTransactionToAddRequest = txn => {\n    try {\n      addRequest({\n        id: `setPriv_${txn.data}`,\n        type: 'eth_sendTransaction',\n        txn: txn,\n        chainId: selectedNetwork.chainId,\n        account: selectedAcc,\n      })\n    } catch (err) {\n      console.error(err)\n      addToast(`Error: ${err.message || err}`, { error: true })\n    }\n  }\n\n  const onRemoveBtnClicked = key => {\n    const txn = craftTransaction(key, privilegesOptions.false)\n    addTransactionToAddRequest(txn)\n  }\n\n  const onAddBtnClickedHandler = newSignerAddress => {\n    const txn = craftTransaction(\n      newSignerAddress.address,\n      privilegesOptions.true\n    )\n    addTransactionToAddRequest(txn)\n  }\n\n  const onMakeDefaultBtnClicked = async (account, address, isQuickAccount) => {\n    if (isQuickAccount) {\n      return addToast((<span>To make this signer default, please <a href='#/email-login'>please login with the email</a></span>), {url: '/#/email-login', error: true})\n    } else {\n      onAddAccount({ ...account, signer: { address: address } })\n      addToast(\n        'This signer is now the default. If it is a hardware wallet, you will have to re-add the account manually to connect it directly, otherwise you will have to add this signer address to your web3 wallet.',\n        { timeout: 30000 }\n      )\n    }\n\n    history.push('/wallet/security')\n  }\n\n  const selectedAccount = accounts.find(x => x.id === selectedAcc)\n\n  const privList = Object.entries(privileges)\n    .map(([addr, privValue]) => {\n      if (!privValue) return null\n      const isQuickAcc = addr === accountPresets.quickAccManager\n      const privText = isQuickAcc\n        ? `Email/passphrase signer (${selectedAccount.email || 'unknown email'})`\n        : addr\n      const signerAddress = isQuickAcc\n        ? selectedAccount.signer.quickAccManager\n        : selectedAccount.signer.address\n      const isSelected = signerAddress === addr\n\n      return (\n        <li key={addr}>\n          <TextInput className=\"depositAddress\" value={privText} disabled />\n          <div className=\"btns-wrapper\">\n            <Button\n              disabled={isSelected}\n              title={isSelected ? 'Signer is already default' : ''}\n              onClick={() =>\n                onMakeDefaultBtnClicked(selectedAccount, addr, isQuickAcc)\n              }\n              small\n            >\n              {isSelected ? 'Current signer' : 'Make default'}\n            </Button>\n            <Button\n              onClick={() => onRemoveBtnClicked(addr)}\n              small\n              red\n              title={\n                isSelected ? 'Cannot remove the currently used signer' : ''\n              }\n              disabled={isSelected}\n            >\n              Remove\n            </Button>\n          </div>\n        </li>\n      )\n    })\n    .filter(x => x)\n\n  const modalInputs = [{ label: 'Name', placeholder: 'My Address' }, { label: 'Address', placeholder: '0x', validate: value => isValidAddress(value) }] \n  const inputModal = <InputModal title=\"Add New Address\" inputs={modalInputs} onClose={([name, address]) => addAddress(name, address)}></InputModal>\n  const showInputModal = () => showModal(inputModal)\n\n  // @TODO relayerless mode: it's not that hard to implement in a primitive form, we need everything as-is\n  // but rendering the initial privileges instead; or maybe using the relayerless transactions hook/service\n  // and aggregate from that\n  if (!relayerURL)\n    return (\n      <section id=\"security\">\n        <h3 className=\"error\">\n          Unsupported: not currently connected to a relayer.\n        </h3>\n      </section>\n    )\n  const showLoading = isLoading && !data\n  return (\n    <section id=\"security\">\n      <div className=\"panel\">\n        <div className='network-warning'>\n          <MdInfoOutline size={36}></MdInfoOutline>\n          <div>\n            Please note: signer settings are network-specific. You are currently looking at and modifying the signers on {selectedNetwork.name}.\n            &nbsp;<a href='https://help.ambire.com/hc/en-us/articles/4410885684242-Signers' target='_blank' rel='noreferrer'>Need help? Click here.</a>\n          </div>\n        </div>\n\n        <div className=\"panel-title\">Authorized signers</div>\n\n        {errMsg && (\n          <h3 className=\"error\">Error getting authorized signers: {errMsg}</h3>\n        )}\n        {showLoading && <Loading />}\n        <ul className=\"content\">{!showLoading && privList}</ul>\n        <div className=\"panel-title\">Add new signer</div>\n        <AddAuthSigner\n          onAddBtnClicked={onAddBtnClickedHandler}\n          selectedNetwork={selectedNetwork}\n        />\n      </div>\n  \n      <div id=\"addresses\" className='panel'>\n        <div className='title'>Address Book</div>\n        <div className=\"content\">\n          <AddressList\n            noAccounts={true}\n            addresses={addresses}\n            removeAddress={removeAddress}\n          />\n          <Button small icon={<MdOutlineAdd/>} onClick={showInputModal}>Add Address</Button>\n        </div>\n      </div>\n    </section>\n  )\n}\n\nexport default Security\n","import './TxnPreview.scss'\n\nimport { useState } from 'react'\nimport { FaTimes, FaChevronDown, FaChevronUp } from 'react-icons/fa'\n\nimport { getName, getTransactionSummary } from '../../../lib/humanReadableTransactions'\nimport networks from '../../../consts/networks'\nimport { formatUnits } from 'ethers/lib/utils'\n\nfunction getNetworkSymbol(networkId) {\n  const network = networks.find(x => x.id === networkId)\n  return network ? network.nativeAssetSymbol : 'UNKNW'\n}\nexport default function TxnPreview ({ txn, onDismiss, network, account, isFirstFailing, mined }) {\n  const [isExpanded, setExpanded] = useState(false)\n  const contractName = getName(txn[0], network)\n  return (\n    <div className={isFirstFailing ? 'txnPreview firstFailing' : 'txnPreview'}>\n        <div className=\"heading\" onClick={() => setExpanded(e => !e)}>\n          <div className=\"info\">\n            <div className=\"summary-container\">\n              <div className='expandTxn'>\n                {isExpanded ? (<FaChevronDown/>) : (<FaChevronUp/>)}\n              </div>\n              <div className=\"summary\">{getTransactionSummary(txn, network, account, { mined })}</div>\n            </div>\n            {isFirstFailing ? (<div className='firstFailingLabel'>This is the first failing transaction.</div>) : (<></>)}\n          </div>\n          <div className='actionIcons'>\n              {onDismiss ? (<span className='dismissTxn' onClick={onDismiss}><FaTimes/></span>) : (<></>)}\n            </div>\n        </div>\n        {\n          isExpanded ? (<div className='advanced'>\n            <div><b>Interacting with (<i>to</i>):</b> {txn[0]}{contractName ? ` (${contractName})` : ''}</div>\n            <div><b>{getNetworkSymbol(network)} to be sent (<i>value</i>):</b> {formatUnits(txn[1] || '0x0', 18)}</div>\n            <div><b>Data:</b> {txn[2]}</div>\n          </div>) : (<></>)\n        }\n    </div>\n  )\n}\n","import './Transactions.scss'\nimport { BsCoin, BsCalendarWeek, BsGlobe2, BsCheck2All } from 'react-icons/bs'\nimport { MdOutlinePendingActions } from 'react-icons/md'\nimport { useRelayerData } from '../../../hooks'\nimport TxnPreview from '../../common/TxnPreview/TxnPreview'\nimport { Loading } from '../../common'\nimport accountPresets from '../../../consts/accountPresets'\nimport networks from '../../../consts/networks'\nimport { getTransactionSummary } from '../../../lib/humanReadableTransactions'\nimport { Bundle } from 'adex-protocol-eth'\nimport { useEffect, useState } from 'react'\nimport fetch from 'node-fetch'\nimport { useToasts } from '../../../hooks/toasts'\n\nfunction Transactions ({ relayerURL, selectedAcc, selectedNetwork, showSendTxns }) {\n  const { addToast } = useToasts()\n  const [cacheBreak, setCacheBreak] = useState(() => Date.now())\n  // @TODO refresh this after we submit a bundle; perhaps with the upcoming transactions service\n  // We want this pretty much on every rerender with a 5 sec debounce\n  useEffect(() => {\n    if ((Date.now() - cacheBreak) > 5000) setCacheBreak(Date.now())\n    const intvl = setTimeout(() => setCacheBreak(Date.now()), 10000)\n    return () => clearTimeout(intvl)\n  }, [cacheBreak])\n  const url = relayerURL\n    ? `${relayerURL}/identity/${selectedAcc}/${selectedNetwork.id}/transactions?cacheBreak=${cacheBreak}`\n    : null\n  const { data, errMsg, isLoading } = useRelayerData(url)\n\n  // @TODO implement a service that stores sent transactions locally that will be used in relayerless mode\n  if (!relayerURL) return (<section id='transactions'>\n    <h3 className='error'>Unsupported: not currently connected to a relayer.</h3>\n  </section>)\n\n  // @TODO: visualize other pending bundles\n  const firstPending = data && data.txns.find(x => !x.executed && !x.replaced)\n\n  const mapToBundle = (relayerBundle, extra = {}) => (new Bundle({\n    ...relayerBundle,\n    nonce: relayerBundle.nonce.num,\n    gasLimit: null,\n    ...extra\n  }))\n  const cancelByReplacing = relayerBundle => showSendTxns(mapToBundle(relayerBundle, { txns: [[selectedAcc, '0x0', '0x']] }))\n  const cancel = relayerBundle => {\n    // @TODO relayerless\n    mapToBundle(relayerBundle).cancel({ relayerURL, fetch })\n      .then(({ success }) => {\n        if (!success) {\n          addToast('Transaction already picked up by the network, you will need to pay a fee to replace it with a cancellation transaction.')\n          cancelByReplacing(relayerBundle)\n        } else {\n          addToast('Transaction cancelled successfully')\n        }\n      })\n      .catch(e => {\n        console.error(e)\n        cancelByReplacing(relayerBundle)\n      })\n  }\n\n  // @TODO: we are currently assuming the last txn is a fee; change that (detect it)\n  const speedup = relayerBundle => showSendTxns(mapToBundle(relayerBundle, { txns: relayerBundle.txns.slice(0, -1) }))\n\n  return (\n    <section id='transactions'>\n      { !!firstPending && (<div className='panel'>\n        <div className='title'><MdOutlinePendingActions/>Pending transaction bundle</div>\n        <div className=\"content\">\n          <div className=\"bundle\">\n            <BundlePreview bundle={firstPending}></BundlePreview>\n            <div className='actions'>\n              <button className='cancel' onClick={() => cancel(firstPending)}>Cancel</button>\n              <button onClick={() => speedup(firstPending)}>Speed up</button>\n            </div>\n          </div>\n        </div>\n      </div>) }\n\n      <div id=\"confirmed\" className=\"panel\">\n        <div className=\"title\">\n          <BsCheck2All/>\n          {(data && data.txns.length === 0) ? 'No transactions yet.' : 'Confirmed transactions'}\n        </div>\n        <div className=\"content\">\n          {!relayerURL && (<h3 className='error'>Unsupported: not currently connected to a relayer.</h3>)}\n          {errMsg && (<h3 className='error'>Error getting list of transactions: {errMsg}</h3>)}\n          {(isLoading && !data) && <Loading />}\n          {\n              // @TODO respect the limit and implement pagination\n              data && data.txns.filter(x => x.executed).map(bundle => BundlePreview({ bundle, mined: true }))\n          }\n        </div>\n      </div>\n    </section>\n  )\n}\n\nfunction BundlePreview({ bundle, mined = false }) {\n  const network = networks.find(x => x.id === bundle.network)\n  if (!Array.isArray(bundle.txns)) return (<h3 className='error'>Bundle has no transactions (should never happen)</h3>)\n  const lastTxn = bundle.txns[bundle.txns.length - 1]\n  // terribly hacky; @TODO fix\n  // all of the values are prob checksummed so we may not need toLowerCase\n  const lastTxnSummary = getTransactionSummary(lastTxn, bundle.network, bundle.identity)\n  const hasFeeMatch = lastTxnSummary.match(new RegExp(`to ${accountPresets.feeCollector}`, 'i'))\n  const txns = hasFeeMatch ? bundle.txns.slice(0, -1) : bundle.txns\n  const toLocaleDateTime = date => `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`\n\n  return (<div className='bundlePreview bundle' key={bundle._id}>\n    {txns.map((txn, i) => (<TxnPreview\n      key={i} // safe to do this, individual TxnPreviews won't change within a specific bundle\n      txn={txn} network={bundle.network} account={bundle.identity} mined={mined} />\n    ))}\n    <ul className=\"details\">\n      {\n        hasFeeMatch ?\n          <li>\n            <label><BsCoin/>Fee</label>\n            <p>{lastTxnSummary.slice(5, -hasFeeMatch[0].length)}</p>\n          </li>\n          :\n          null\n      }\n      {\n        bundle.executed && !bundle.executed.success && (\n          <li>\n            <label>Error</label>\n            <p>{bundle.executed.errorMsg || 'unknown error'}</p>\n          </li>\n        )\n      }\n      <li>\n        <label><BsCalendarWeek/>Submitted on</label>\n        <p>{bundle.submittedAt && (toLocaleDateTime(new Date(bundle.submittedAt))).toString()}</p>\n      </li>\n      {\n        bundle.replacesTxId ?\n          <li>\n            <label>Replaces transaction</label>\n            <p>{bundle.replacesTxId}</p>\n          </li>\n          :\n          null\n      }\n      {\n        bundle.txId ?\n          <li>\n            <label><BsGlobe2/>Block Explorer</label>\n            <p><a href={network.explorerUrl+'/tx/'+bundle.txId} target='_blank' rel='noreferrer'>{network.explorerUrl.split('/')[2]}</a></p>\n          </li>\n          :\n          null\n      }\n    </ul>\n  </div>)\n}\n\nexport default Transactions\n","import './GnosisSafeApps.scss'\nimport GnosisSafeAppIframe from './GnosisSafeAppIframe'\n\nimport { useState } from 'react'\n\nconst dapps = [{\n  name: 'LocalTest',\n  url: 'http://localhost:3002',\n  logo: 'http://localhost:3002/logo-test.png',\n  desc: 'Local dapp test with some lorem ipsum stuff'\n},\n{\n  name: 'ParaSwap',\n  url: 'https://paraswap.io',\n  logo: 'https://paraswap.io/paraswap.svg',\n  desc: 'ParaSwap allows dApps and traders to get the best DEX liquidity by aggregating multiple markets and offering the best rates'\n},\n{\n  name: '0xPlasma Finance',\n  url: 'https://apy.plasma.finance',\n  logo: 'https://apy.plasma.finance/logo.svg',\n  desc: 'Cross-chain DeFi & DEX aggregator, farming, asset management, fiat on-ramp'\n},\n{\n  name: 'MEW',\n  url: 'https://www.myetherwallet.com/wallet/sign',\n  logo: 'https://www.myetherwallet.com/wallet/sign/logo.svg',\n  desc: 'MEW as dapp'\n},\n]\n\nexport default function GnosisSafeApps({\n  network,\n  selectedAcc,\n  gnosisConnect,\n  gnosisDisconnect\n}) {\n\n  const [selectedApp, setSelectedApp] = useState(null)\n\n  return (\n    <div id=\"plugin-gnosis-container\">\n      <ul id=\"dapps-container\" className={selectedApp ? 'small-thumbs' : ''}>\n        {dapps.map((dapp, index) => (\n          <li\n            key={index}\n            onClick={() => setSelectedApp(dapp)}\n            className={(selectedApp && dapp.url === selectedApp.url) ? 'selected' : ''}\n          >\n            <div className=\"logo-container\" style={{ backgroundImage: `url(${dapp.logo})` }}></div>\n            <div className=\"dapp-name\">{dapp.name}</div>\n            <div className=\"dapp-desc\">{dapp.desc}</div>\n          </li>\n        ))}\n      </ul>\n      {selectedApp &&\n        <GnosisSafeAppIframe\n          network={network}\n          selectedApp={selectedApp}\n          selectedAcc={selectedAcc}\n          gnosisConnect={gnosisConnect}\n          gnosisDisconnect={gnosisDisconnect}\n\n        />\n      }\n    </div>)\n}\n","const ERC721Abi = [\n    \"function name() view returns (string memory)\",\n    \"function tokenURI(uint256 _tokenId) view returns (string memory)\",\n    \"function ownerOf(uint256 tokenId) view returns (address)\",\n    \"function transferFrom(address from, address to, uint256 tokenId)\"\n]\n\nexport default ERC721Abi","import './Collectible.scss'\n\nimport { useParams } from 'react-router-dom'\nimport { ethers, getDefaultProvider } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport { useCallback, useEffect, useState } from 'react'\nimport { AiOutlineSend } from 'react-icons/ai'\nimport { BsFillImageFill } from 'react-icons/bs'\nimport * as blockies from 'blockies-ts';\nimport { useToasts } from '../../../hooks/toasts'\nimport { TextInput, Button, Loading, AddressBook, AddressWarning } from '../../common'\nimport ERC721Abi from '../../../consts/ERC721Abi'\nimport networks from '../../../consts/networks'\nimport { isValidAddress, isKnownTokenOrContract } from '../../../helpers/address';\n\nconst ERC721 = new Interface(ERC721Abi)\n\nconst handleUri = uri => {\n    uri = uri.startsWith('data:application/json') ? uri.replace('data:application/json;utf8,', '') : uri\n    return uri.startsWith('ipfs://') ? uri.replace(/ipfs:\\/\\/ipfs\\/|ipfs:\\/\\//g, 'https://ipfs.io/ipfs/') : uri\n}\n\nconst Collectible = ({ selectedAcc, selectedNetwork, addRequest, addressBook }) => {\n    const { addresses, addAddress, removeAddress, isKnownAddress } = addressBook\n\n    const { addToast } = useToasts()\n    const { network, collectionAddr, tokenId } = useParams()\n    const [isLoading, setLoading] = useState(true)\n    const [metadata, setMetadata] = useState({\n        owner: {\n            address: '',\n            icon: ''\n        },\n        name: '',\n        description: '',\n        image: '',\n        collection: '',\n        explorerUrl: ''\n    })\n    const [recipientAddress, setRecipientAddress] = useState('')\n    const [isTransferDisabled, setTransferDisabled] = useState(true)\n    const [addressConfirmed, setAddressConfirmed] = useState(false)\n    const [newAddress, setNewAddress] = useState(null)\n\n    const sendTransferTx = () => {\n        try {\n            addRequest({\n                id: `transfer_nft_${Date.now()}`,\n                type: 'eth_sendTransaction',\n                chainId: selectedNetwork.chainId,\n                account: selectedAcc,\n                txn: {\n                    to: collectionAddr,\n                    value: '0',\n                    data: ERC721.encodeFunctionData('transferFrom', [metadata.owner.address, recipientAddress, tokenId])\n                }\n            })\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }\n\n    useEffect(() => {\n        setTransferDisabled(isKnownTokenOrContract(recipientAddress) || !isValidAddress(recipientAddress) || selectedAcc === recipientAddress || metadata.owner?.address !== selectedAcc || selectedNetwork.id !== network || (!isKnownAddress(recipientAddress) && !addressConfirmed))\n    }, [recipientAddress, metadata, selectedNetwork, selectedAcc, network, addressConfirmed, isKnownAddress])\n\n    const fetchMetadata = useCallback(async () => {\n        setLoading(true)\n        setMetadata({})\n    \n        try {\n            const networkDetails = networks.find(({ id }) => id === network)\n            if (!networkDetails) throw new Error('This network is not supported')\n\n            const { rpc, explorerUrl } = networkDetails\n            const provider = getDefaultProvider(rpc)\n            const contract = new ethers.Contract(collectionAddr, ERC721Abi, provider)\n\n            const [collection, address, uri] = await Promise.all([\n                contract.name(),\n                contract.ownerOf(tokenId),\n                contract.tokenURI(tokenId)\n            ])\n\n            try {\n                let json = {}\n\n                if (uri.startsWith('data:application/json')) {\n                    json = JSON.parse(uri.replace('data:application/json;utf8,', ''))\n                } else {\n                    const jsonUrl = handleUri(uri)\n                    const response = await fetch(jsonUrl)\n                    json = await response.json()\n                }\n\n                setMetadata(metadata => ({\n                    ...metadata,\n                    ...json,\n                    image: json ? handleUri(json.image) : null\n                }))\n            } catch(e) {\n                throw e\n            }\n\n            setMetadata(metadata => ({\n                ...metadata,\n                collection,\n                owner: {\n                    address,\n                    icon: blockies.create({ seed: address }).toDataURL()\n                },\n                explorerUrl\n            }))\n\n            setLoading(false)\n        } catch(e) {\n            console.error(e)\n            addToast(`Error: ${e.message || e}`, { error: true })\n        }\n    }, [addToast, tokenId, collectionAddr, network])\n\n    useEffect(() => fetchMetadata(), [fetchMetadata])\n\n    return (\n        <div id=\"collectible\">\n            <div className=\"panel\">\n                <div className=\"title\">\n                    { metadata.collection } #{ tokenId }\n                    <div className=\"contract\">\n                        Contract address: <a className=\"address\" href={`${metadata.explorerUrl}/address/${collectionAddr}`} target=\"_blank\" rel=\"noreferrer\">{ collectionAddr }</a>\n                    </div>\n                </div>\n                {\n                    isLoading ?\n                        <Loading/>\n                        :\n                        <div className=\"metadata\">\n                            <div className=\"image\" style={{backgroundImage: `url(${metadata.image})`}}>\n                                { !metadata.image ? <BsFillImageFill/> : null }\n                            </div>\n                            <div className=\"info\">\n                                <div className=\"name\">\n                                    { metadata.name }\n                                </div>\n                                <div className=\"description\">\n                                    { metadata.description }\n                                </div>\n                            </div>\n                            <div className=\"owner\">\n                                Owner:\n                                <a className=\"address\" href={`${metadata.explorerUrl}/address/${metadata.owner.address}`} target=\"_blank\" rel=\"noreferrer\">\n                                    <div className=\"icon\" style={{backgroundImage: `url(${metadata.owner.icon})`}}></div>\n                                    { \n                                        metadata.owner.address === selectedAcc ? \n                                            <span>You ({ metadata.owner.address })</span>\n                                            :\n                                            metadata.owner.address\n                                    }\n                                    \n                                </a>\n                            </div>\n                        </div>\n                }\n            </div>\n            <div className=\"panel\">\n                <div className=\"title\">Transfer</div>\n                <div className=\"content\">\n                    <div id=\"recipient-address\">\n                        <TextInput placeholder=\"Recipient Address\" value={recipientAddress} onInput={(value) => setRecipientAddress(value)}/>\n                        <AddressBook \n                            addresses={addresses}\n                            addAddress={addAddress}\n                            removeAddress={removeAddress}\n                            newAddress={newAddress}\n                            onClose={() => setNewAddress(null)}\n                            onSelectAddress={address => setRecipientAddress(address)}\n                        />\n                    </div>\n                    <div className=\"separator\"></div>\n                    <AddressWarning\n                        address={recipientAddress}\n                        onAddNewAddress={() => setNewAddress(recipientAddress)}\n                        onChange={(value) => setAddressConfirmed(value)}\n                        isKnownAddress={isKnownAddress}\n                    />\n                    <Button icon={<AiOutlineSend/>} disabled={isTransferDisabled} onClick={sendTransferTx}>Send</Button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default Collectible","import \"./Wallet.scss\"\n\nimport { Switch, Route, Redirect } from \"react-router-dom\"\nimport Dashboard from \"./Dashboard/Dashboard\"\nimport TopBar from \"./TopBar/TopBar\"\nimport SideBar from \"./SideBar/SideBar\"\nimport Deposit from \"./Deposit/Deposit\"\nimport Swap from \"./Swap/Swap\"\nimport Transfer from \"./Transfer/Transfer\"\nimport Earn from \"./Earn/Earn\"\nimport Security from \"./Security/Security\"\nimport Transactions from './Transactions/Transactions'\nimport PluginGnosisSafeApps from '../Plugins/GnosisSafeApps/GnosisSafeApps'\nimport Collectible from \"./Collectible/Collectible\"\nimport { PermissionsModal } from '../Modals'\nimport { useModals, usePermissions } from '../../hooks'\nimport { useCallback, useEffect, useMemo } from 'react'\nimport { isFirefox } from '../../lib/isFirefox'\n\nexport default function Wallet(props) {\n  const { showModal } = useModals()\n  const { isClipboardGranted, isNoticationsGranted, arePermissionsLoaded, modalHidden } = usePermissions()\n\n  const isLoggedIn = useMemo(() => props.accounts.length > 0, [props.accounts])\n\n  const routes = [\n    {\n      path: '/dashboard',\n      component: <Dashboard\n        portfolio={props.portfolio}\n        selectedNetwork={props.network}\n        setNetwork={props.setNetwork}\n      />\n    },\n    {\n      path: '/deposit',\n      component: <Deposit selectedAcc={props.selectedAcc} selectedNetwork={props.network.id} />\n    },\n    {\n      path: '/transfer/:tokenAddress?',\n      component: <Transfer\n        portfolio={props.portfolio}\n        selectedAcc={props.selectedAcc}\n        selectedNetwork={{...props.network}}\n        addRequest={props.addRequest}\n        accounts={props.accounts}\n        addressBook={props.addressBook}\n      />\n    },\n    {\n      path: '/earn',\n      component: <Earn portfolio={props.portfolio} selectedNetwork={{ ...props.network }} selectedAcc={props.selectedAcc} addRequest={props.addRequest} />\n    },\n    {\n      path: '/security',\n      component: <Security\n        relayerURL={props.relayerURL}\n        selectedAcc={props.selectedAcc}\n        selectedNetwork={props.network}\n        accounts={props.accounts}\n        addressBook={props.addressBook}\n        addRequest={props.addRequest}\n        onAddAccount={props.onAddAccount}\n      />\n    },\n    {\n      path: '/transactions',\n      component: <Transactions relayerURL={props.relayerURL} selectedAcc={props.selectedAcc} selectedNetwork={props.network} addRequest={props.addRequest} eligibleRequests={props.eligibleRequests} showSendTxns={props.showSendTxns} />\n    },\n    {\n      path: '/swap',\n      component: <Swap\n        gnosisConnect={props.gnosisConnect}\n        gnosisDisconnect={props.gnosisDisconnect}\n        selectedAcc={props.selectedAcc}\n        network={props.network}\n      />\n    },\n    {\n      path: '/nft/:network/:collectionAddr/:tokenId',\n      component: <Collectible\n        selectedAcc={props.selectedAcc}\n        selectedNetwork={{...props.network}}\n        addRequest={props.addRequest}\n        accounts={props.accounts}\n        addressBook={props.addressBook}\n      />\n    },\n    {\n      path: '/gnosis/plugins',\n      component: <PluginGnosisSafeApps\n        gnosisConnect={props.gnosisConnect}\n        gnosisDisconnect={props.gnosisDisconnect}\n        selectedAcc={props.selectedAcc}\n        network={props.network}\n      />\n    }\n  ]\n\n  const handlePermissionsModal = useCallback(async () => {\n    const account = props.accounts.find(({ id }) => id === props.selectedAcc)\n    if (!account) return\n\n    const relayerIdentityURL = `${props.relayerURL}/identity/${account.id}`\n\n    const permissionsModal = <PermissionsModal relayerIdentityURL={relayerIdentityURL} account={account} onAddAccount={props.onAddAccount}/>\n    const areBlockedPermissions = arePermissionsLoaded\n      && ((!isFirefox() && !isClipboardGranted) || !isNoticationsGranted)\n    const showCauseOfPermissions = areBlockedPermissions && !modalHidden\n    const showCauseOfEmail = !!account.emailConfRequired\n    if (showCauseOfEmail || showCauseOfPermissions) showModal(permissionsModal, { disableClose: true })\n  }, [props.relayerURL, props.accounts, props.selectedAcc, props.onAddAccount, showModal, isClipboardGranted, isNoticationsGranted, arePermissionsLoaded, modalHidden])\n\n  useEffect(() => handlePermissionsModal(), [handlePermissionsModal])\n\n  return (\n    <div id=\"wallet\">\n\n      <SideBar match={props.match} portfolio={props.portfolio} />\n      <div id=\"wallet-layout\">\n\n        <TopBar {...props} />\n        <div id=\"wallet-container\">\n          <Switch>\n            {\n              routes.map(({ path, component }) => (\n                <Route exact path={props.match.url + path} key={path}>\n                  {\n                    !isLoggedIn ?\n                      <Redirect to=\"/add-account\" />\n                      :\n                      component ? component : null\n                  }\n                </Route>\n              ))\n            }\n            <Route path={props.match.url + '/*'}>\n              <Redirect to={props.match.url + '/dashboard'} />\n            </Route>\n          </Switch>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { TrezorSubprovider } from '@0x/subproviders/lib/src/subproviders/trezor' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport TrezorConnect from 'trezor-connect'\nimport { ethers } from 'ethers'\nimport HDNode from 'hdkey'\nimport { LedgerSubprovider } from '@0x/subproviders/lib/src/subproviders/ledger' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerEthereumBrowserClientFactoryAsync } from '@0x/subproviders/lib/src' // https://github.com/0xProject/0x-monorepo/issues/1400\nimport { ledgerSignMessage, ledgerSignTransaction } from './ledgerWebHID'\n\nlet wallets = {}\n\n// opts\n// passphrase: string\n// noCache: boolean\nexport function getWallet({ signer, signerExtra, chainId }, opts = {}) {\n  const id = `${signer.address || signer.one}${chainId}`\n  if (wallets[id]) return wallets[id]\n  return wallets[id] = getWalletNew({ signer, signerExtra, chainId }, opts)\n}\n\nfunction getWalletNew({ chainId, signer, signerExtra }, opts) {\n  if (signerExtra && signerExtra.type === 'trezor') {\n    const providerTrezor = new TrezorSubprovider({\n      trezorConnectClientApi: TrezorConnect,\n      networkId: chainId\n    })\n    providerTrezor._initialDerivedKeyInfo = getInitialDerivedKeyInfo(signerExtra)\n    // for Trezor/ledger, alternatively we can shim using https://www.npmjs.com/package/web3-provider-engine and then wrap in Web3Provider\n    return {\n      signMessage: hash => providerTrezor.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n      signTransaction: params => providerTrezor.signTransactionAsync({ ...params, from: signer.address })\n    }\n  } else if (signerExtra && signerExtra.type === 'ledger') {\n    if (signerExtra.transportProtocol === 'webHID') {\n      return {\n        signMessage: hash => ledgerSignMessage(ethers.utils.hexlify(hash), signer.address),\n        signTransaction: params => ledgerSignTransaction(params, chainId)\n      }\n    } else {\n      const provider = new LedgerSubprovider({\n        networkId: chainId,\n        ledgerEthereumClientFactoryAsync: ledgerEthereumBrowserClientFactoryAsync,\n        baseDerivationPath: signerExtra.info.baseDerivationPath\n      })\n      return {\n        signMessage: hash => provider.signPersonalMessageAsync(ethers.utils.hexlify(hash), signer.address),\n        signTransaction: params => provider.signTransactionAsync({ ...params, from: signer.address })\n      }\n    }\n  } else if (signer.address) {\n    if (!window.ethereum) throw new Error('No web3 support detected in your browser: if you created this account through MetaMask, please install it.')\n    // NOTE: for metamask, use `const provider = new ethers.providers.Web3Provider(window.ethereum)`\n    // 'any' is explained here: https://github.com/ethers-io/ethers.js/issues/1107\n    const provider = new ethers.providers.Web3Provider(window.ethereum, 'any')\n    return provider.getSigner(signer.address)\n  } else if (signer.one) {\n    throw new Error('getWallet not applicable for QuickAccounts: use primaryKeyBackup with the passphrase and /second-sig')\n  } else {\n    throw new Error('unknown signer type')\n  }\n}\n\nfunction getInitialDerivedKeyInfo(signerExtra) {\n  return {\n    hdKey: HDNode.fromExtendedKey(signerExtra.info.hdKey.xpub),\n    derivationPath: signerExtra.info.derivationPath,\n    baseDerivationPath: signerExtra.info.baseDerivationPath\n  }\n}\n","// It costs around 19k to send a token, if that token was interacted with before in the same transaction,\n// because of SLOAD costs - they depend on whether a slot has been read\n// however, it costs 30k if the token has not been interacted with\n// we may decrease it a bit and lean on the relayer failsafe values (cfg.gasAddedOnEstimate) later on\nconst ADDED_GAS_TOKEN = 30000\nconst ADDED_GAS_NATIVE = 12000\n\nexport function isTokenEligible (token, speed, estimation) {\n  const min = token.isStable ? estimation.feeInUSD[speed] : estimation.feeInNative[speed]\n  return parseInt(token.balance) / Math.pow(10, token.decimals) > min\n}\n\n// can't think of a less funny name for that\nexport function getFeePaymentConsequences (token, estimation) {\n  // Relayerless mode\n  if (!estimation.feeInUSD) return { multiplier: 1, addedGas: 0 }\n  // Relayer mode\n  const addedGas = !token.address || token.address === '0x0000000000000000000000000000000000000000'\n    ? ADDED_GAS_NATIVE\n    : ADDED_GAS_TOKEN\n  return {\n    // otherwise we get very long floating point numbers with trailing .999999\n    multiplier: parseFloat(((estimation.gasLimit + addedGas) / estimation.gasLimit).toFixed(4)),\n    addedGas\n  }\n}\n\nexport function mapTxnErrMsg(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Swap expired'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Swap will suffer slippage higher than your requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'Your signer address is not authorized.'\n  return msg\n}\n\nexport function getErrHint(msg) {\n  if (!msg) return\n  if (msg.includes('Router: EXPIRED')) return 'Try performing the swap again'\n  if (msg.includes('Router: INSUFFICIENT_OUTPUT_AMOUNT')) return 'Try performing the swap again or increase your slippage requirements'\n  if (msg.includes('INSUFFICIENT_PRIVILEGE')) return 'If you set a new signer for this account, try re-adding the account.'\n  return 'Sending this transaction batch will result in an error.'\n}\n","import { AiOutlineWarning } from 'react-icons/ai'\nimport { FiHelpCircle } from 'react-icons/fi'\nimport { Loading } from '../common'\nimport { isTokenEligible, getFeePaymentConsequences, mapTxnErrMsg, getErrHint } from './helpers'\n\nconst SPEEDS = ['slow', 'medium', 'fast', 'ape']\n\nexport function FeeSelector ({ disabled, signer, estimation, network, setEstimation, feeSpeed, setFeeSpeed }) {\n    if (!estimation) return (<Loading/>)\n  \n    const insufficientFee = estimation && estimation.feeInUSD\n      && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation)\n    const willFail = (estimation && !estimation.success) || insufficientFee\n    if (willFail) return insufficientFee ?\n        (<h3 className='error'>Insufficient balance for the fee. Accepted tokens: {(estimation.remainingFeeTokenBalances || []).map(x => x.symbol).join(', ')}</h3>)\n        : (<FailingTxn\n            message={<>The current transaction batch cannot be sent because it will fail: {mapTxnErrMsg(estimation.message)}</>}\n            tooltip={getErrHint(estimation.message)}\n        />)\n  \n    if (!estimation.feeInNative) return (<></>)\n    if (estimation && !estimation.feeInUSD && estimation.gasLimit < 40000) {\n      return (<div>\n        <b>WARNING:</b> Fee estimation unavailable when you're doing your first account transaction and you are not connected to a relayer. You will pay the fee from <b>{signer.address}</b>, make sure you have {network.nativeAssetSymbol} there.\n      </div>)\n    }\n  \n    const { nativeAssetSymbol } = network\n    const tokens = estimation.remainingFeeTokenBalances || ({ symbol: nativeAssetSymbol, decimals: 18 })\n    const onFeeCurrencyChange = e => {\n      const token = tokens.find(({ symbol }) => symbol === e.target.value)\n      setEstimation({ ...estimation, selectedFeeToken: token })\n    }\n    const feeCurrencySelect = estimation.feeInUSD ? (<>\n      <span style={{ marginTop: '1em' }}>Fee currency</span>\n      <select disabled={disabled} value={estimation.selectedFeeToken.symbol} onChange={onFeeCurrencyChange}>\n        {tokens.map(token => \n          (<option\n            disabled={!isTokenEligible(token, feeSpeed, estimation)}\n            key={token.symbol}>\n              {token.symbol}\n            </option>\n          )\n        )}\n      </select>\n    </>) : (<></>)\n  \n    const { isStable } = estimation.selectedFeeToken\n    const { multiplier } = getFeePaymentConsequences(estimation.selectedFeeToken, estimation)\n    const feeAmountSelectors = SPEEDS.map(speed => (\n      <div \n        key={speed}\n        className={`feeSquare${feeSpeed === speed ? ' selected' : ''}${disabled ? ' disabled' : ''}`}\n        onClick={() => !disabled && setFeeSpeed(speed)}\n      >\n        <div className='speed'>{speed}</div>\n        <div className='feeEstimation'>\n          {isStable\n            ? '$'+(estimation.feeInUSD[speed] * multiplier)\n            : (\n              nativeAssetSymbol === 'ETH' ?\n                ' '+(estimation.feeInNative[speed] * multiplier)\n                : (estimation.feeInNative[speed] * multiplier)+' '+nativeAssetSymbol\n            )\n          }\n        </div>\n      </div>\n    ))\n  \n    return (<>\n      {feeCurrencySelect}\n      <div className='feeAmountSelectors'>\n        {feeAmountSelectors}\n      </div>\n      { // Visualize the fee once again with a USD estimation if in native currency\n      !isStable && (<div>\n        Fee: {(estimation.feeInNative[feeSpeed] * multiplier)+' '+nativeAssetSymbol}\n        &nbsp;(~ ${(estimation.feeInNative[feeSpeed] * multiplier * estimation.nativeAssetPriceInUSD).toFixed(2)})\n      </div>)}\n      {!estimation.feeInUSD ?\n        (<span><b>WARNING:</b> Paying fees in tokens other than {nativeAssetSymbol} is unavailable because you are not connected to a relayer. You will pay the fee from <b>{signer.address}</b>.</span>)\n        : (<></>)}\n    </>)\n}\n\nexport function FailingTxn ({ message, tooltip = '' }) {\n    return (<div className='failingTxn'>\n        <AiOutlineWarning></AiOutlineWarning>\n        <h3 className='error'>{message}</h3>\n        <FiHelpCircle title={tooltip}></FiHelpCircle>\n    </div>)\n}","import { useState, useRef } from 'react'\nimport { Loading } from '../common'\nimport { isTokenEligible } from './helpers'\n\nexport default function Actions({ estimation, feeSpeed, approveTxn, rejectTxn, signingStatus }) {\n  const [quickAccCredentials, setQuickAccCredentials] = useState({ code: '', passphrase: '' })\n  const form = useRef(null)\n\n  const rejectButton = rejectTxn && (\n    <button type='button' className='rejectTxn' onClick={rejectTxn}>Reject</button>\n  )\n  const insufficientFee = estimation && estimation.feeInUSD\n    && !isTokenEligible(estimation.selectedFeeToken, feeSpeed, estimation)\n  const willFail = (estimation && !estimation.success) || insufficientFee\n  if (willFail) {\n    return (<div className='buttons'>\n      {rejectButton}\n    </div>)\n  }\n\n  const signButtonLabel = signingStatus && signingStatus.inProgress ?\n    (<><Loading/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Signing...</>)\n    : (<>Sign and send</>)\n\n  // @TODO make this common\n  if (signingStatus && signingStatus.quickAcc) {\n    return (<>\n      <div>\n        {signingStatus.confCodeRequired === 'otp' ? (<b>Please enter your OTP code and your password.</b>) : (<></>)}\n        {signingStatus.confCodeRequired === 'email' ? (<b>A confirmation code was sent to your email, please enter it along with your password.</b>) : (<></>)}\n      </div>\n      <input type='password' required minLength={3} placeholder='Password' value={quickAccCredentials.passphrase} onChange={e => setQuickAccCredentials({ ...quickAccCredentials, passphrase: e.target.value })}></input>\n      <form ref={form} className='quickAccSigningForm' onSubmit={e => { e.preventDefault() }}>\n        {/* Changing the autoComplete prop to a random string seems to disable it more often */}\n        <input\n          type='text' pattern='[0-9]+'\n          title='Confirmation code should be 6 digits'\n          autoComplete='nope'\n          required minLength={6} maxLength={6}\n          placeholder='Confirmation code'\n          value={quickAccCredentials.code}\n          onChange={e => setQuickAccCredentials({ ...quickAccCredentials, code: e.target.value })}\n        ></input>\n        {rejectButton}\n        <button className='approveTxn'\n          onClick={() => {\n            if (!form.current.checkValidity()) return\n            approveTxn({ quickAccCredentials })\n          }}\n        >\n          {signButtonLabel}\n        </button>\n      </form>\n    </>)\n  }\n\n  return (<div className='buttons'>\n      {rejectButton}\n      <button className='approveTxn' disabled={!estimation || signingStatus} onClick={approveTxn}>\n        {signButtonLabel}\n      </button>\n  </div>)\n}\n","import { Interface, hexlify } from 'ethers/lib/utils'\nconst IdentityInterface = new Interface(require('adex-protocol-eth/abi/Identity5.2'))\nconst FactoryInterface = new Interface(require('adex-protocol-eth/abi/IdentityFactory5.2'))\n\nexport async function sendNoRelayer ({ finalBundle, account, network, wallet, estimation, feeSpeed, provider }) {\n    const { signer } = finalBundle\n    // @TODO: in case we need deploying, run using deployAndCall pipeline with signed msgs\n    // @TODO: quickAccManager\n    if (signer.quickAccManager) throw new Error('quickAccManager not supported in relayerless mode yet')\n    // currently disabled quickAccManager cause 1) we don't have a means of getting the second sig 2) we still have to sign txes so it's inconvenient\n    // if (signer.quickAccManager) await finalBundle.sign(wallet)\n    //const [to, data] = signer.quickAccManager ? [signer.quickAccManager, QuickAccManagerInterface.encodeFunctionData('send', [finalBundle.identity, [signer.timelock, signer.one, signer.two], [false, finalBundle.signature, '0x']])] :\n\n    // NOTE: just adding values to gasLimit is bad because 1) they're hardcoded estimates\n    // and 2) the fee displayed in the UI does not reflect that\n    const isDeployed = await provider.getCode(finalBundle.identity).then(code => code !== '0x')\n    let gasLimit\n    let to, data\n    if (isDeployed) {\n      gasLimit = estimation.gasLimit + 20000\n      to = finalBundle.identity\n      data = IdentityInterface.encodeFunctionData('executeBySender', [finalBundle.txns])\n    } else {\n      await finalBundle.getNonce(provider)\n      // just some hardcoded value to make the signing pass\n      finalBundle.gasLimit = 400000\n      await finalBundle.sign(wallet)\n      to = account.identityFactoryAddr\n      data = FactoryInterface.encodeFunctionData('deployAndExecute', [account.bytecode, account.salt, finalBundle.txns, finalBundle.signature])\n      gasLimit = (await provider.estimateGas({ to, data, from: signer.address })).toNumber() + 20000\n    }\n\n    const txn = {\n      from: signer.address,\n      to, data,\n      gas: hexlify(gasLimit),\n      gasPrice: hexlify(Math.floor(estimation.feeInNative[feeSpeed] / estimation.gasLimit * 1e18)),\n      nonce: hexlify(await provider.getTransactionCount(signer.address))\n    }\n    try {\n      let txId\n      if (!wallet.sendTransaction) {\n        // HW wallets which only sign\n        const signed = await wallet.signTransaction(txn)\n        txId = (await provider.sendTransaction(signed)).hash\n      } else {\n        // web3 injectors which can't sign, but can sign+send\n        // they also don't like the gas arg they fully control the chain ID\n        const { chainId } = await wallet.provider.getNetwork()\n        if (network.chainId !== chainId) throw new Error(`Connected to the wrong network: please switch to ${network.name}`)\n        txId = (await wallet.sendTransaction({ from: txn.from, to: txn.to, data: txn.data, gasPrice: txn.gasPrice, nonce: txn.nonce })).hash\n      }\n      return { success: true, txId }\n    } catch(e) {\n      if (e.code === 'INSUFFICIENT_FUNDS') throw new Error(`Insufficient gas fees: you need to have ${network.nativeAssetSymbol} on ${signer.address}`)\n      throw e\n    }\n  }\n","import { Interface } from 'ethers/lib/utils'\nimport accountPresets from '../consts/accountPresets'\n\nconst IdentityFactory = new Interface(require('adex-protocol-eth/abi/IdentityFactory'))\n\nexport function toBundleTxn({ to, value, data }, from) {\n  // Transactions with no `to` are interpreted by the Ethereum network as CREATE (contract deployment) if they come from an EOA\n  // however, our accounts are not EOAs, so we will just call the factory with a user-specific nonce, that's also identifiable (0x6942)\n  if (to === '0x' || !to) {\n    const salt = `0x69420000000000${Date.now().toString(16).slice(1,9)}00${from.slice(2)}`\n    return [accountPresets.identityFactoryAddr, value, IdentityFactory.encodeFunctionData('deploy', [data, salt])]\n  }\n  return [to, value || '0x0', data || '0x']\n}","//import { GrInspect } from 'react-icons/gr'\n// GiObservatory is also interesting\nimport { GiTakeMyMoney, GiSpectacles, GiGorilla } from 'react-icons/gi'\nimport { FaSignature, FaChevronLeft } from 'react-icons/fa'\nimport { MdOutlineAccountCircle } from 'react-icons/md'\nimport './SendTransaction.css'\nimport { useEffect, useState, useMemo } from 'react'\nimport fetch from 'node-fetch'\nimport { Bundle } from 'adex-protocol-eth/js'\nimport { getDefaultProvider, Wallet } from 'ethers'\nimport { Interface } from 'ethers/lib/utils'\nimport * as blockies from 'blockies-ts';\nimport { useToasts } from '../../hooks/toasts'\nimport { getWallet } from '../../lib/getWallet'\nimport accountPresets from '../../consts/accountPresets'\nimport { FeeSelector, FailingTxn } from './FeeSelector'\nimport Actions from './Actions'\nimport TxnPreview from '../common/TxnPreview/TxnPreview'\nimport { sendNoRelayer } from './noRelayer'\nimport { isTokenEligible, getFeePaymentConsequences } from './helpers'\nimport { fetchPost } from '../../lib/fetch'\nimport { toBundleTxn } from '../../lib/requestToBundleTxn'\n\nconst ERC20 = new Interface(require('adex-protocol-eth/abi/ERC20'))\n\nconst DEFAULT_SPEED = 'fast'\nconst REESTIMATE_INTERVAL = 15000\n\nconst REJECT_MSG = 'Ambire user rejected the request'\n\nfunction makeBundle(account, networkId, requests) {\n  const bundle = new Bundle({\n    network: networkId,\n    identity: account.id,\n    txns: requests.map(({ txn }) => toBundleTxn(txn, account.id)),\n    signer: account.signer\n  })\n  bundle.extraGas = requests.map(x => x.extraGas || 0).reduce((a, b) => a + b, 0)\n  bundle.requestIds = requests.map(x => x.id)\n  return bundle\n}\n\nexport default function SendTransaction({ relayerURL, accounts, network, selectedAcc, requests, resolveMany, replacementBundle, onDismiss }) {\n  // NOTE: this can be refactored at a top level to only pass the selected account (full object)\n  // keeping it that way right now (selectedAcc, accounts) cause maybe we'll need the others at some point?\n  const account = accounts.find(x => x.id === selectedAcc)\n\n  // Also filtered in App.js, but better safe than sorry here\n  const eligibleRequests = useMemo(() => requests\n    .filter(({ type, chainId, account, txn }) =>\n      type === 'eth_sendTransaction'\n      && chainId === network.chainId\n      && account === selectedAcc\n      && txn && (!txn.from || txn.from.toLowerCase() === selectedAcc.toLowerCase())\n    // we only need to update on change of IDs\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    ), [requests.map(x => x.id).join(','), network.chainId, selectedAcc])\n  const bundle = useMemo(\n    () => replacementBundle || makeBundle(account, network.id, eligibleRequests),\n    [replacementBundle, network.id, account, eligibleRequests]\n  )\n\n  if (!account || !bundle.txns.length) return (<div id='sendTransaction'>\n      <h3 className='error'>SendTransactions: No account or no requests: should never happen.</h3>\n  </div>)\n  return (<SendTransactionWithBundle\n      relayerURL={relayerURL}\n      bundle={bundle}\n      network={network}\n      account={account}\n      resolveMany={resolveMany}\n      onDismiss={onDismiss}\n  />)\n}\n\nfunction SendTransactionWithBundle ({ bundle, network, account, resolveMany, relayerURL, replacementBundle, onDismiss }) {\n  const [estimation, setEstimation] = useState(null)\n  const [signingStatus, setSigningStatus] = useState(false)\n  const [feeSpeed, setFeeSpeed] = useState(DEFAULT_SPEED)\n  const { addToast } = useToasts()\n  useEffect(() => {\n    if (!bundle.txns.length) return\n    setEstimation(null)\n  }, [bundle, setEstimation])\n\n  // Estimate the bundle & reestimate periodically\n  useEffect(() => {    // eslint-disable-next-line react-hooks/exhaustive-deps\n    if (!bundle.txns.length) return\n\n    let unmounted = false\n\n    // get latest estimation\n    const reestimate = () => (relayerURL\n      ? bundle.estimate({ relayerURL, fetch })\n      : bundle.estimateNoRelayer({ provider: getDefaultProvider(network.rpc) })\n    )\n      .then(estimation => {\n        if (unmounted) return\n        estimation.selectedFeeToken = { symbol: network.nativeAssetSymbol }\n        setEstimation(prevEstimation => {\n          if (estimation.remainingFeeTokenBalances) {\n            // If there's no eligible token, set it to the first one cause it looks more user friendly (it's the preferred one, usually a stablecoin)\n            estimation.selectedFeeToken = (prevEstimation && prevEstimation.selectedFeeToken)\n              || estimation.remainingFeeTokenBalances.find(token => isTokenEligible(token, feeSpeed, estimation))\n              || estimation.remainingFeeTokenBalances[0]\n          }\n          return estimation\n        })\n      })\n      .catch(e => {\n        if (unmounted) return\n        console.log('estimation error', e)\n        addToast(`Estimation error: ${e.message || e}`, { error: true })\n      })\n\n    reestimate()\n    const intvl = setInterval(reestimate, REESTIMATE_INTERVAL)\n\n    return () => {\n      unmounted = true\n      clearInterval(intvl)\n    }\n  }, [bundle, setEstimation, feeSpeed, addToast, network, relayerURL])\n\n  const getFinalBundle = () => {\n    if (!relayerURL) return new Bundle({\n      ...bundle,\n      gasLimit: estimation.gasLimit\n      // set nonce here when we implement \"replace current pending transaction\"\n    })\n\n    const feeToken = estimation.selectedFeeToken\n    const { addedGas, multiplier } = getFeePaymentConsequences(feeToken, estimation)\n    const toHexAmount = amnt => '0x'+Math.round(amnt).toString(16)\n    const feeTxn = feeToken.symbol === network.nativeAssetSymbol\n      ? [accountPresets.feeCollector, toHexAmount(estimation.feeInNative[feeSpeed]*multiplier*1e18), '0x']\n      : [feeToken.address, '0x0', ERC20.encodeFunctionData('transfer', [\n        accountPresets.feeCollector,\n        toHexAmount(\n          (feeToken.isStable ? estimation.feeInUSD[feeSpeed] : estimation.feeInNative[feeSpeed])\n          * multiplier\n          * Math.pow(10, feeToken.decimals)\n        )\n    ])]\n    return new Bundle({\n      ...bundle,\n      txns: [...bundle.txns, feeTxn],\n      gasLimit: estimation.gasLimit + addedGas + (bundle.extraGas || 0)\n    })\n  }\n\n  const approveTxnImpl = async () => {\n    if (!estimation) throw new Error('no estimation: should never happen')\n\n    const finalBundle = getFinalBundle()\n    const provider = getDefaultProvider(network.rpc)\n    const signer = finalBundle.signer\n\n    const wallet = getWallet({\n      signer,\n      signerExtra: account.signerExtra,\n      chainId: network.chainId\n    })\n\n    if (relayerURL) {\n      // Temporary way of debugging the fee cost\n      // const initialLimit = finalBundle.gasLimit - getFeePaymentConsequences(estimation.selectedFeeToken, estimation).addedGas\n      // finalBundle.estimate({ relayerURL, fetch }).then(estimation => console.log('fee costs: ', estimation.gasLimit - initialLimit), estimation.selectedFeeToken).catch(console.error)\n      if (typeof finalBundle.nonce !== 'number') await finalBundle.getNonce(provider)\n      await finalBundle.sign(wallet)\n      return await finalBundle.submit({ relayerURL, fetch })\n    } else {\n      return await sendNoRelayer({\n        finalBundle, account, network, wallet, estimation, feeSpeed, provider\n      })\n    }\n  }\n\n  const approveTxnImplQuickAcc = async ({ quickAccCredentials }) => {\n    if (!estimation) throw new Error('no estimation: should never happen')\n    if (!relayerURL) throw new Error('Email/Password account signing without the relayer is not supported yet')\n\n    const finalBundle = (signingStatus && signingStatus.finalBundle) || getFinalBundle()\n    const signer = finalBundle.signer\n\n    if (typeof finalBundle.nonce !== 'number') {\n      await finalBundle.getNonce(getDefaultProvider(network.rpc))\n    }\n\n    const { signature, success, message, confCodeRequired } = await fetchPost(\n      `${relayerURL}/second-key/${bundle.identity}/${network.id}/sign`, {\n        signer, txns: finalBundle.txns, nonce: finalBundle.nonce, gasLimit: finalBundle.gasLimit,\n        code: quickAccCredentials && quickAccCredentials.code\n      }\n    )\n    if (!success) {\n      if (!message) throw new Error(`Secondary key: no success but no error message`)\n      if (message.includes('invalid confirmation code')) {\n        addToast('Unable to sign: wrong confirmation code', { error: true })\n        return\n      }\n      throw new Error(`Secondary key error: ${message}`)\n    }\n    if (confCodeRequired) {\n      setSigningStatus({ quickAcc: true, finalBundle, confCodeRequired })\n    } else {\n      if (!signature) throw new Error(`QuickAcc internal error: there should be a signature`)\n      if (!account.primaryKeyBackup) throw new Error(`No key backup found: perhaps you need to import the account via JSON?`)\n      setSigningStatus({ quickAcc: true, inProgress: true })\n      const pwd = quickAccCredentials.passphrase || alert('Enter password')\n      const wallet = await Wallet.fromEncryptedJson(JSON.parse(account.primaryKeyBackup), pwd)\n      await finalBundle.sign(wallet)\n      finalBundle.signatureTwo = signature\n      return await finalBundle.submit({ relayerURL, fetch })\n    }\n  }\n\n  const approveTxn = ({ quickAccCredentials }) => {\n    if (signingStatus && signingStatus.inProgress) return\n    setSigningStatus(signingStatus || { inProgress: true })\n\n    if (account.signerExtra && account.signerExtra.type === 'ledger') {\n      addToast('Please confirm this transaction on your Ledger device.', { timeout: 10000 })\n    }\n\n    const requestIds = bundle.requestIds\n    const blockExplorerUrl = network.explorerUrl\n    const approveTxnPromise = bundle.signer.quickAccManager ?\n      approveTxnImplQuickAcc({ quickAccCredentials })\n      : approveTxnImpl()\n    approveTxnPromise.then(bundleResult => {\n      // special case for approveTxnImplQuickAcc\n      if (!bundleResult) return\n\n      // be careful not to call this after onDimiss, cause it might cause state to be changed post-unmount\n      setSigningStatus(null)\n\n      // Inform everything that's waiting for the results (eg WalletConnect)\n      const skipResolve = !bundleResult.success && bundleResult.message && bundleResult.message.match(/underpriced/i)\n      if (!skipResolve && requestIds) resolveMany(requestIds, { success: bundleResult.success, result: bundleResult.txId, message: bundleResult.message })\n\n      if (bundleResult.success) {\n        addToast((\n          <span>Transaction signed and sent successfully!\n            &nbsp;Click to view on block explorer.\n          </span>), { url: blockExplorerUrl+'/tx/'+bundleResult.txId, timeout: 15000 })\n        onDismiss()\n      } else addToast(`Transaction error: ${bundleResult.message || 'unspecified error'}`, { error: true })\n    })\n    .catch(e => {\n      setSigningStatus(null)\n      console.error(e)\n      if (e && e.message.includes('must provide an Ethereum address')) {\n        addToast(`Signing error: not connected with the correct address. Make sure you're connected with ${bundle.signer.address}.`, { error: true })\n      } else if (e && e.message.includes('0x6b0c')) {\n        // not sure if that's actually the case with this hellish error, but after unlocking the device it no longer appeared\n        // however, it stopped appearing after that even if the device is locked, so I'm not sure it's related...\n        addToast(`Ledger: unknown error (0x6b0c): is your Ledger unlocked and in the Ethereum application?`, { error: true })\n      } else {\n        console.log(e.message)\n        addToast(`Signing error: ${e.message || e}`, { error: true })\n      }\n    })\n  }\n\n  // Not applicable when .requestIds is not defined (replacement bundle)\n  const rejectTxn = bundle.requestIds && (() => {\n    onDismiss()\n    resolveMany(bundle.requestIds, { message: REJECT_MSG })\n  })\n\n  return (<div id='sendTransaction'>\n      <div className='dismiss' onClick={onDismiss}>\n        <FaChevronLeft size={35}/><span>back</span>\n      </div>\n      <h2>Pending transactions: {bundle.txns.length}</h2>\n      <div className='container'>\n        <div id='topPanel' className='panel'>\n          <div className='title'>\n            <MdOutlineAccountCircle/>\n            Signing with account:\n          </div>\n          <div className=\"content\">\n            <div className='account'>\n              <img className='icon' src={blockies.create({ seed: account.id }).toDataURL()} alt='Account Icon'/>\n              { account.id }\n            </div>\n            on\n            <div className='network'>\n              <img className='icon' src={network.icon} alt='Network Icon'/>\n              { network.name }\n            </div>\n          </div>\n        </div>\n        <div id='panelHolder'>\n          <div className='panel'>\n              <div className='heading'>\n                      <div className='title'>\n                          <GiSpectacles size={35}/>\n                          Transaction summary\n                      </div>\n              </div>\n              <div className=\"content\">\n                <div className={`listOfTransactions${bundle.requestIds ? '' : ' frozen'}`}>\n                    {bundle.txns.map((txn, i) => {\n                      const isFirstFailing = estimation && !estimation.success && estimation.firstFailing === i\n                      // we need to re-render twice per minute cause of DEX deadlines\n                      const min = Math.floor(Date.now() / 30000)\n                      return (<TxnPreview\n                        key={[...txn, i, min].join(':')}\n                        onDismiss={bundle.requestIds && (() => resolveMany([bundle.requestIds[i]], { message: REJECT_MSG }))}\n                        txn={txn} network={bundle.network} account={bundle.identity}\n                        isFirstFailing={isFirstFailing}/>\n                      )\n                    })}\n                </div>\n                <div className='transactionsNote'>\n                  {bundle.requestIds ? (<>\n                    <b><GiGorilla size={16}/> DEGEN TIP:</b> You can sign multiple transactions at once. Add more transactions to this batch by interacting with a connected dApp right now.\n                  </>) : (<><b>NOTE:</b> You are currently replacing a pending transaction.</>)}\n                </div>\n              </div>\n          </div>\n          <div className='secondaryPanel'>\n              <div className='panel feePanel'>\n                  <div className='heading'>\n                          <div className='title'>\n                              <GiTakeMyMoney size={35}/>\n                              Fee\n                          </div>\n                          <FeeSelector\n                            disabled={signingStatus && signingStatus.finalBundle && !(estimation && !estimation.success)}\n                            signer={bundle.signer}\n                            estimation={estimation}\n                            setEstimation={setEstimation}\n                            network={network}\n                            feeSpeed={feeSpeed}\n                            setFeeSpeed={setFeeSpeed}\n                          ></FeeSelector>\n                  </div>\n              </div>\n              <div className='panel actions'>\n                  <div className='heading'>\n                      <div className='title'>\n                          <FaSignature size={35}/>\n                          Sign\n                      </div>\n                  </div>\n                  {(bundle.signer.quickAccManager && !relayerURL) ? (\n                    <FailingTxn message='Signing transactions with an email/password account without being connected to the relayer is unsupported.'></FailingTxn>\n                  ) : (\n                      <Actions\n                        estimation={estimation}\n                        approveTxn={approveTxn}\n                        rejectTxn={rejectTxn}\n                        signingStatus={signingStatus}\n                        feeSpeed={feeSpeed}\n                      />\n                  )}\n              </div>\n          </div>\n        </div>\n      </div>\n  </div>)\n}\n","import './SignMessage.scss'\nimport { FaSignature } from 'react-icons/fa'\nimport { MdOutlineAccountCircle } from 'react-icons/md'\nimport { Wallet } from 'ethers'\nimport { toUtf8String, keccak256, arrayify, isHexString } from 'ethers/lib/utils'\nimport { signMsgHash } from 'adex-protocol-eth/js/Bundle'\nimport * as blockies from 'blockies-ts';\nimport { getWallet } from '../../lib/getWallet'\nimport { useToasts } from '../../hooks/toasts'\nimport { fetchPost } from '../../lib/fetch'\nimport { useState } from 'react'\nimport { Loading } from '../common'\n\nexport default function SignMessage ({ toSign, resolve, account, relayerURL, totalRequests }) {\n  const defaultState = () => ({ codeRequired: false, passphrase: '' })\n  const { addToast } = useToasts()\n  const [signingState, setSigningState] = useState(defaultState())\n  const [isLoading, setLoading] = useState(false)\n\n  if (!toSign || !account) return (<></>)\n  if (toSign && !isHexString(toSign.txn)) return (<div id='signMessage'>\n    <h3 className='error'>Invalid signing request: .txn has to be a hex string</h3>\n    <button type='button' className='reject' onClick={() => resolve({ message: 'signature denied' })}>Reject</button>\n  </div>)\n\n  const handleSigningErr = e => {\n    console.error('Signing error', e)\n    if (e && e.message.includes('must provide an Ethereum address')) {\n      addToast(`Signing error: not connected with the correct address. Make sure you're connected with ${account.id}.`, { error: true })\n    } else {\n      addToast(`Signing error: ${e.message || e}`, { error: true })\n    }\n  }\n  const approveQuickAcc = async confirmationCode => {\n    if (!relayerURL) {\n      addToast('Email/pass accounts not supported without a relayer connection', { error: true })\n      return\n    }\n    if (!signingState.passphrase) {\n      addToast('Password required to unlock the account', { error: true })\n      return\n    }\n    setLoading(true)\n    try {\n      const hash = keccak256(arrayify(toSign.txn))\n\n      const { signature, success, message, confCodeRequired } = await fetchPost(\n        // network doesn't matter when signing\n        `${relayerURL}/second-key/${account.id}/ethereum/sign`, {\n          toSign: hash,\n          code: confirmationCode\n        }\n      )\n      if (!success) {\n        if (!message) throw new Error(`Secondary key: no success but no error message`)\n        if (message.includes('invalid confirmation code')) {\n          addToast('Unable to sign: wrong confirmation code', { error: true })\n        }\n        addToast(`Second signature error: ${message}`, { error: true })\n        return\n      }\n      if (confCodeRequired) {\n        const confCode = prompt('A confirmation code has been sent to your email, it is valid for 3 minutes. Please enter it here:')\n        if (!confCode) throw new Error('You must enter a confirmation code')\n        await approveQuickAcc(confCode)\n        return\n      }\n\n      const wallet = await Wallet.fromEncryptedJson(JSON.parse(account.primaryKeyBackup), signingState.passphrase)\n      const sig = await signMsgHash(wallet, account.id, account.signer, arrayify(hash), signature)\n      resolve({ success: true, result: sig })\n      addToast(`Successfully signed!`)\n    } catch(e) { handleSigningErr(e) }\n    setLoading(false)\n  }\n\n  const approve = async () => {\n    if (account.signer.quickAccManager) {\n      await approveQuickAcc()\n      return\n    }\n\n    setLoading(true)\n    try {\n      // if quick account, wallet = await fromEncryptedBackup\n      // and just pass the signature as secondSig to signMsgHash\n      const wallet = getWallet({\n        signer: account.signer,\n        signerExtra: account.signerExtra,\n        chainId: 1 // does not matter\n      })\n      // It would be great if we could pass the full data cause then web3 wallets/hw wallets can display the full text\n      // Unfortunately that isn't possible, because isValidSignature only takes a bytes32 hash; so to sign this with\n      // a personal message, we need to be signing the hash itself as binary data such that we match 'Ethereum signed message:\\n32<hash binary data>' on the contract\n      const hash = keccak256(arrayify(toSign.txn)) // hacky equivalent is: id(toUtf8String(toSign.txn)) \n      const sig = await signMsgHash(wallet, account.id, account.signer, arrayify(hash))\n      resolve({ success: true, result: sig })\n      addToast(`Successfully signed!`)\n    } catch(e) { handleSigningErr(e) }\n    setLoading(false)\n  }\n\n  return (<div id='signMessage'>\n    <div id='signingAccount' className='panel'>\n      <div className='title'>\n        <MdOutlineAccountCircle/>\n        Signing with account\n      </div>\n      <div className=\"content\">\n        <img className='icon' src={blockies.create({ seed: account.id }).toDataURL()} alt='Account Icon'/>\n        { account.id }\n      </div>\n    </div>\n    <div className='panel'>\n        <div className='heading'>\n            <div className='title'>\n                <FaSignature size={35}/>\n                Sign message\n            </div>\n            <div style={{ marginTop: 20 }}>\n              <b>A dApp is requesting your signature.</b>{totalRequests > 1 ? ` You have ${totalRequests - 1} more pending requests.` : ''}\n            </div>\n        </div>\n\n        <textarea\n          className='message'\n          type='text'\n          value={getMessageAsText(toSign.txn)}\n          readOnly={true}\n        />\n\n        <div className='actions'>\n          <form onSubmit={e => { e.preventDefault() }}>\n            {account.signer.quickAccManager && (<>\n              <input type='password'\n                required minLength={3}\n                placeholder='Account password'\n                value={signingState.passphrase}\n                onChange={e => setSigningState({ ...signingState, passphrase: e.target.value })}\n              ></input>\n            </>)}\n\n            <button type='button' className='reject' onClick={() => resolve({ message: 'signature denied' })}>Reject</button>\n            <button className='approve' onClick={approve} disabled={isLoading}>\n                {isLoading ? (<><Loading/>&nbsp;&nbsp;&nbsp;&nbsp;Signing...</>)\n                : (<>Sign</>)}\n            </button>\n          </form>\n        </div>\n    </div>\n  </div>)\n}\n\nfunction getMessageAsText(msg) {\n  try { return toUtf8String(msg) }\n  catch(_) { return msg }\n}","import {\n  getSDKVersion,\n  MessageFormatter,\n  Methods\n} from '@gnosis.pm/safe-apps-sdk'\n\nfunction GnosisConnector(_iframeRef, _app) {\n  this.iframeRef = _iframeRef\n  this.app = _app\n  this.handlers = {}\n\n  this.on = (method, handler) => {\n    this.handlers[method] = handler\n  }\n\n  this.isValidMessage = (msg) => {\n    // @ts-expect-error .parent doesn't exist on some possible types\n    if (!msg?.source?.parent) {\n      return false\n    }\n    const sentFromIframe = msg.source.parent === window.parent\n    const knownMethod = Object.values(Methods).includes(msg.data.method)\n\n    return sentFromIframe && knownMethod\n  }\n\n  this.canHandleMessage = (msg) => {\n    return Boolean(this.handlers[msg.data.method])\n  }\n\n  this.send = (data, requestId, error) => {\n    const sdkVersion = getSDKVersion()\n    const msg = error\n      ? MessageFormatter.makeErrorResponse(requestId, error, sdkVersion)\n      : MessageFormatter.makeResponse(requestId, data, sdkVersion)\n\n    if (this.iframeRef) {\n      //console.log(\"Posting to child\")\n      //console.log(msg)\n      this.iframeRef.current?.contentWindow?.postMessage(msg, '*')\n    } else {\n      console.log('Iframe not referenced ')\n    }\n  }\n\n  this.handleIncomingMessage = async (msg) => {\n\n    const validMessage = this.isValidMessage(msg)\n    const hasHandler = this.canHandleMessage(msg)\n\n    if (validMessage && hasHandler) {\n      const handler = this.handlers[msg.data.method]\n      try {\n        // @ts-expect-error Handler existence is checked in this.canHandleMessage\n        const response = await handler(msg)\n\n        // If response is not returned, it means the response will be send somewhere else\n        if (typeof response !== 'undefined') {\n          this.send(response, msg.data.id)\n        }\n      } catch (err) {\n        console.error(\"GS : \" + err);\n        this.send(err.message, msg.data.id, true)\n        /*trackError(Errors._901, err.message, {\n          contexts: {\n            safeApp: this.app,\n            request: msg.data,\n          },\n        })*/\n      }\n    }\n  }\n\n  this.clear = () => {\n    //console.log('removeListener...')\n    window.removeEventListener('message', this.handleIncomingMessage)\n  }\n\n  console.log('new appCommunicator')\n  window.addEventListener('message', this.handleIncomingMessage)\n}\n\nexport {GnosisConnector}\n","import { useCallback, useRef, useEffect } from 'react'\nimport { getTransactionSummary } from '../lib/humanReadableTransactions'\nimport { ethers } from 'ethers'\nimport { useToasts } from './toasts'\nimport networks from '../consts/networks'\n\nconst REQUEST_TITLE_PREFIX = 'Ambire Wallet: '\nconst SUPPORTED_TYPES =  ['eth_sendTransaction', 'personal_sign']\nconst BALANCE_TRESHOLD = 1.00001\nlet currentNotifs = []\nlet isLastTotalBalanceInit = false\nlet lastTokensBalanceRaw = []\n\nconst getAmountReceived = (lastToken, newBalanceRaw, decimals) => {\n    const amountRecieved = lastToken ? newBalanceRaw - lastToken.balanceRaw : newBalanceRaw\n    return ethers.utils.formatUnits(amountRecieved.toString(), decimals)\n}\n\nexport default function useNotifications (requests, onShow, portfolio, selectedAcc, network) {\n    const { addToast } = useToasts()\n    const onShowRef = useRef({})\n    onShowRef.current.onShow = onShow\n\n    useEffect(() => {\n        // hack because for whatever reason it doesn't work when we access the ref directly\n        window.onClickNotif = req => onShowRef.current.onShow(req)\n    }, [])\n    \n    const showNotification = useCallback(({ id, title, body, requireInteraction, request }) => {\n        const notification = new Notification(title, {\n            requireInteraction: requireInteraction || false,\n            body,\n            icon: 'public/logo192.png',\n        })\n        //notification.onclose = \n        notification.onclick = () => {\n            if (request.type === 'eth_sendTransaction') window.onClickNotif(request)\n            window.focus()\n            notification.close()\n        }\n        currentNotifs.push({ id, notification })\n    }, [])\n\n    requests.forEach(request => {\n        // only requests we actually want a notification for\n        if (!request.notification) return\n        if (!SUPPORTED_TYPES.includes(request.type)) return\n        if (currentNotifs.find(n => n.id === request.id)) return\n        if (!request.txn) return\n        const isSign = request.type === 'personal_sign'\n        const network = networks.find(x => x.chainId === request.chainId)\n        const title = REQUEST_TITLE_PREFIX+(\n            isSign\n                ? 'you have a new message to sign'\n                : `new transaction request on ${network ? network.name : 'unknown network'}`\n        )\n        const body = isSign ? 'Click to preview' : getTransactionSummary([request.txn.to, request.txn.value, request.txn.data], request.chainId, request.account)\n        showNotification({\n            id: request.id,\n            title,\n            body,\n            request,\n            requireInteraction: true\n        })\n    })\n\n    useEffect(() => {\n        try {\n            if (!portfolio.isBalanceLoading && !portfolio.areProtocolsLoading && portfolio.balance) {\n                if (!isLastTotalBalanceInit) {\n                    isLastTotalBalanceInit = true\n                    lastTokensBalanceRaw = portfolio.tokens.map(({ address, balanceRaw }) => ({ address, balanceRaw }))\n                }\n\n                const changedAmounts = portfolio.tokens.filter(({ address, balanceRaw }) => {\n                    const lastToken = lastTokensBalanceRaw.find(token => token.address === address)\n                    const isSignificantChange = lastToken && ((balanceRaw / lastToken.balanceRaw) > BALANCE_TRESHOLD)\n                    return !lastToken || isSignificantChange\n                })\n\n                changedAmounts.forEach(({ address, symbol, decimals, balanceRaw }) => {\n                    const lastToken = lastTokensBalanceRaw.find(token => token.address === address)\n                    const amountRecieved = getAmountReceived(lastToken, balanceRaw, decimals)\n\n                    showNotification({\n                        id: `received_amount_${Date.now()}`,\n                        title: `${amountRecieved} ${symbol} Received.`,\n                        body: `Your ${symbol} balance increased by ${amountRecieved} ${symbol}`\n                    })\n\n                    lastToken ? lastTokensBalanceRaw = [\n                        ...lastTokensBalanceRaw.filter(token => token.address !== address),\n                        { address, balanceRaw }\n                    ] : lastTokensBalanceRaw.push({ address, balanceRaw })\n                })\n            }\n        } catch(e) {\n            console.error(e)\n            addToast(e.message | e, { error: true })\n        }\n    }, [portfolio, addToast, showNotification])\n\n    useEffect(() => {\n        isLastTotalBalanceInit = false\n        lastTokensBalanceRaw = []\n    }, [selectedAcc, network])\n\n    currentNotifs = currentNotifs.filter(({ id, notification }) => {\n        if (!requests.find(r => r.id === id)) {\n            notification.close()\n            return false\n        }\n        return true\n    })\n  }\n  \n","import './App.scss'\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n  Prompt\n} from 'react-router-dom'\nimport { useState, useEffect, useMemo, useCallback } from 'react'\nimport EmailLogin from './components/EmailLogin/EmailLogin'\nimport AddAccount from './components/AddAccount/AddAccount'\nimport Wallet from './components/Wallet/Wallet'\nimport ToastProvider from './components/ToastProvider/ToastProvider'\nimport ModalProvider from './components/ModalProvider/ModalProvider'\nimport SendTransaction from './components/SendTransaction/SendTransaction'\nimport SignMessage from './components/SignMessage/SignMessage'\nimport useAccounts from './hooks/accounts'\nimport useNetwork from './hooks/network'\nimport useWalletConnect from './hooks/walletconnect'\nimport useGnosisSafe from './hooks/useGnosisSafe'\nimport useNotifications from './hooks/notifications'\nimport { useAttentionGrabber, usePortfolio, useAddressBook } from './hooks'\n\nconst relayerURL = process.env.hasOwnProperty('REACT_APP_RELAYER_URL') ? process.env.REACT_APP_RELAYER_URL : 'http://localhost:1934'\n\nsetTimeout(() => {\n  //console.warn(' If you do, malicious code could steal your funds! ')\n  //console.error('Only use the console if you are an experienced developer who knows what he\\'s doing')\n  console.log(\"  Hey...! Slow down you ambitious adventurer! You want to keep your funds safe! \")\n  console.error('        DO NOT PASTE ANY CODE HERE ! ')\n  console.error(' _          ___   ___  _  _   ___  ___  ___         _')\n  console.error('| |        |   \\\\ /   \\\\| \\\\| | / __|| __|| _ \\\\       | |')\n  console.error('|_|        | |) || - || .  || (_ || _| |   /       |_|')\n  console.error('(_)        |___/ |_|_||_|\\\\_| \\\\___||___||_|_\\\\       (_)')\n  console.log('At Ambire, we care about our users . Safety is our top priority! DO NOT PASTE ANYTHING HERE or it could result in the LOSS OF YOUR FUNDS!')\n}, 4000);\n\nfunction AppInner () {\n  // basic stuff: currently selected account, all accounts, currently selected network\n  const { accounts, selectedAcc, onSelectAcc, onAddAccount, onRemoveAccount } = useAccounts()\n  const addressBook = useAddressBook({ accounts, selectedAcc })\n  const { network, setNetwork, allNetworks } = useNetwork()\n\n  // Signing requests: transactions/signed msgs: all requests are pushed into .requests\n  const { connections, connect, disconnect, requests: wcRequests, resolveMany: wcResolveMany } = useWalletConnect({\n    account: selectedAcc,\n    chainId: network.chainId\n  })\n  const { requests: gnosisRequests, resolveMany: gnosisResolveMany, connect: gnosisConnect, disconnect: gnosisDisconnect } = useGnosisSafe({\n\t  selectedAccount: selectedAcc,\n\t  network: network\n\t}, [selectedAcc, network])\n\n  // Internal requests: eg from the Transfer page, Security page, etc. - requests originating in the wallet UI itself\n  // unlike WalletConnect or SafeSDK requests, those do not need to be persisted\n  const [internalRequests, setInternalRequests] = useState([])\n  const addRequest = req => setInternalRequests(reqs => [...reqs, req])\n\n  // Merge all requests\n  const requests = useMemo(\n    () => [...internalRequests, ...wcRequests, ...gnosisRequests]\n      .filter(({ account }) => accounts.find(({ id }) => id === account)),\n    [wcRequests, internalRequests, gnosisRequests, accounts]\n  )\n  const resolveMany = (ids, resolution) => {\n    wcResolveMany(ids, resolution)\n    gnosisResolveMany(ids, resolution)\n    setInternalRequests(reqs => reqs.filter(x => !ids.includes(x.id)))\n  }\n\n  // Portfolio: this hook actively updates the balances/assets of the currently selected user\n  const portfolio = usePortfolio({\n    currentNetwork: network.id,\n    account: selectedAcc\n  })\n\n  // Show the send transaction full-screen modal if we have a new txn\n  const eligibleRequests = useMemo(() => requests\n    .filter(({ type, chainId, account }) =>\n      type === 'eth_sendTransaction'\n      && chainId === network.chainId\n      && account === selectedAcc\n    ), [requests, network.chainId, selectedAcc])\n  const [sendTxnState, setSendTxnState] = useState(() => ({ showing: !!eligibleRequests.length }))\n  useEffect(\n    () => setSendTxnState({ showing: !!eligibleRequests.length }),\n    [eligibleRequests.length]\n  )\n\n  // Network shouldn't matter here\n  const everythingToSign = useMemo(() => requests\n    .filter(({ type, account }) => type === 'personal_sign'\n      && account === selectedAcc\n    ), [requests, selectedAcc])\n\n  // When the user presses back, we first hide the SendTransactions dialog (keeping the queue)\n  // Then, signature requests will need to be dismissed one by one, starting with the oldest\n  const onPopHistory = () => {\n    if (sendTxnState.showing) {\n      setSendTxnState({ showing: false })\n      return false\n    }\n    if (everythingToSign.length) {\n      resolveMany([everythingToSign[0].id], { message: 'Ambire user rejected the signature request' })\n      return false\n    }\n    return true\n  }\n\n  // Show notifications for all requests\n  useNotifications(requests, request => {\n    onSelectAcc(request.account)\n    setNetwork(request.chainId)\n    setSendTxnState(state => ({ ...state, showing: true }))\n  }, portfolio, selectedAcc, network)\n\n  useAttentionGrabber({\n    eligibleRequests,\n    isSendTxnShowing: sendTxnState.showing,\n    onSitckyClick: useCallback(() => setSendTxnState({ showing: true }), [])\n  })\n\n  return (<>\n    <Prompt\n      message={(location, action) => {\n        if (action === 'POP') return onPopHistory()\n        return true\n    }}/>\n\n    {!!everythingToSign.length && (<SignMessage\n      selectedAcc={selectedAcc}\n      account={accounts.find(x => x.id === selectedAcc)}\n      toSign={everythingToSign[0]}\n      totalRequests={everythingToSign.length}\n      relayerURL={relayerURL}\n      resolve={outcome => resolveMany([everythingToSign[0].id], outcome)}\n    ></SignMessage>)}\n\n    {sendTxnState.showing ? (\n      <SendTransaction\n          accounts={accounts}\n          selectedAcc={selectedAcc}\n          network={network}\n          requests={eligibleRequests}\n          resolveMany={resolveMany}\n          relayerURL={relayerURL}\n          onDismiss={() => setSendTxnState({ showing: false })}\n          replacementBundle={sendTxnState.replacementBundle}\n      ></SendTransaction>\n      ) : (<></>)\n    }\n\n    <Switch>\n      <Route path=\"/add-account\">\n        <AddAccount relayerURL={relayerURL} onAddAccount={onAddAccount}></AddAccount>\n      </Route>\n\n      <Route path=\"/email-login\">\n        <EmailLogin relayerURL={relayerURL} onAddAccount={onAddAccount}></EmailLogin>\n      </Route>\n\n      <Route path=\"/wallet\">\n        <Wallet\n          match={{ url: \"/wallet\" }}\n          accounts={accounts}\n          selectedAcc={selectedAcc}\n          addressBook={addressBook}\n          portfolio={portfolio}\n          onSelectAcc={onSelectAcc}\n          onRemoveAccount={onRemoveAccount}\n          allNetworks={allNetworks}\n          network={network}\n          setNetwork={setNetwork}\n          addRequest={addRequest}\n          connections={connections}\n          // needed by the top bar to disconnect/connect dapps\n          connect={connect}\n          disconnect={disconnect}\n          // needed by the gnosis plugins\n          gnosisConnect={gnosisConnect}\n          gnosisDisconnect={gnosisDisconnect}\n          // required for the security and transactions pages\n          relayerURL={relayerURL}\n          // required by the transactions page\n          eligibleRequests={eligibleRequests}\n          showSendTxns={bundle => setSendTxnState({ showing: true, replacementBundle: bundle })}\n          onAddAccount={onAddAccount}\n        >\n        </Wallet>\n      </Route>\n\n      <Route path=\"/\">\n        <Redirect to={selectedAcc ? \"/wallet/dashboard\" : \"/add-account\" }/>\n      </Route>\n\n    </Switch>\n  </>)\n}\n\n// handles all the providers so that we can use provider hooks inside of AppInner\nexport default function App() {\n  return (\n    <ToastProvider>\n      <ModalProvider>\n        <Router>\n          <AppInner/>\n        </Router>\n      </ModalProvider>\n    </ToastProvider>\n  )\n}\n","import { useState, useCallback } from 'react'\nimport { useToasts } from '../hooks/toasts'\nimport { useHistory } from 'react-router-dom'\n\nexport default function useAccounts () {\n    const { addToast } = useToasts()\n    const history = useHistory()\n\n    const [accounts, setAccounts] = useState(() => {\n      try {\n        const accs = JSON.parse(localStorage.accounts || '[]')\n        if (!Array.isArray(accs)) throw new Error('accounts: incorrect format')\n        return accs\n      } catch (e) {\n        console.error('accounts parsing failure', e)\n        return []\n      }\n    })\n    const [selectedAcc, setSelectedAcc] = useState(() => {\n      const initialSelectedAcc = localStorage.selectedAcc\n      if (!initialSelectedAcc || !accounts.find(x => x.id === initialSelectedAcc)) {\n        return accounts[0] ? accounts[0].id : ''\n      }\n      return initialSelectedAcc\n    })\n  \n    const onSelectAcc = useCallback(selected => {\n      localStorage.selectedAcc = selected\n      setSelectedAcc(selected)\n    }, [setSelectedAcc])\n    const onAddAccount = useCallback((acc, opts = {}) => {\n      if (!(acc.id && acc.signer)) throw new Error('account: internal err: missing ID or signer')\n\n      const existing = accounts.find(x => x.id.toLowerCase() === acc.id.toLowerCase())\n      if (existing) {\n        addToast(JSON.stringify(existing) === JSON.stringify(acc) ? 'Account already added' : 'Account updated')\n      } else if (opts.isNew) {\n        // @TODO consider something more explanatory such as \"using Trezor as a signer\", or \"this is different from your signer address\"\n        addToast(`New Ambire account created: ${acc.id}${acc.signer.address ? '. This is a fresh smart wallet address.' : ''}`, { timeout: acc.signer.address ? 15000 : 10000 })\n      }\n\n      const existingIdx = accounts.indexOf(existing)\n        if (existingIdx === -1) accounts.push(acc)\n      else accounts[existingIdx] = acc\n  \n      // need to make a copy, otherwise no rerender\n      setAccounts([ ...accounts ])\n  \n      localStorage.accounts = JSON.stringify(accounts)\n  \n      if (opts.select) onSelectAcc(acc.id)\n      if (Object.keys(accounts).length) {\n        history.push('/wallet/dashboard')\n      }\n    }, [accounts, addToast, onSelectAcc, history])\n  \n    const onRemoveAccount = useCallback(id => {\n      if (!id) throw new Error('account: internal err: missing ID/Address')\n\n      const clearedAccounts = accounts.filter(account => account.id !== id)\n      setAccounts([...clearedAccounts])\n      localStorage.accounts = JSON.stringify(clearedAccounts)\n      \n      if (!clearedAccounts.length) history.push('/add-account')\n      else onSelectAcc(clearedAccounts[0].id)\n    }, [accounts, history, onSelectAcc])\n\n    return { accounts, selectedAcc, onSelectAcc, onAddAccount, onRemoveAccount }\n  }\n","import { useState, useCallback } from 'react'\nimport networks from '../consts/networks'\n\nexport default function useNetwork ({ defaultNetwork = 'ethereum' } = {}) {\n    const [networkId, setNetworkId] = useState(() =>\n        networks.find(n => n.id === localStorage.network) ? localStorage.network : defaultNetwork\n    )\n    const setNetwork = useCallback(networkIdentifier => {\n        const network = networks.find(n => n.id === networkIdentifier || n.name === networkIdentifier || n.chainId === networkIdentifier)\n        if (!network) throw new Error(`no network found: ${networkIdentifier}`)\n        localStorage.network = network.id\n        setNetworkId(network.id)\n    }, [setNetworkId])\n\n    return {\n        setNetwork,\n        network: networks.find(n => n.id === networkId),\n        allNetworks: networks\n    }\n}","import {useCallback, useEffect, useState, useRef, useMemo} from 'react'\nimport {useToasts} from '../hooks/toasts'\n\nimport {Methods} from '@gnosis.pm/safe-apps-sdk'\nimport {GnosisConnector} from '../lib/GnosisConnector'\nimport {getDefaultProvider} from 'ethers'\n\nconst STORAGE_KEY = 'gnosis_safe_state'\n\nexport default function useGnosisSafe({selectedAccount, network, verbose = 0}) {\n  // One connector at a time\n  const connector = useRef(null)\n\n  const uniqueId = useMemo(() => new Date().getTime() + ' ' + network.chainId + ' ' + selectedAccount, [selectedAccount, network])\n\n  const {addToast} = useToasts()\n\n  // This is needed cause of the Gnosis Safe event handlers (listeners)\n  const stateRef = useRef()\n  stateRef.current = {\n    selectedAccount,\n    network\n  }\n\n  const [requests, setRequests] = useState(() => {\n    const json = localStorage[STORAGE_KEY]\n    if (!json) return []\n    try {\n      const parsed = JSON.parse(json)\n      return Array.isArray(parsed) ? parsed : []\n    } catch (e) {\n      console.error(e)\n      return []\n    }\n  })\n\n  const connect = useCallback(connectorOpts => {\n    verbose > 1 && console.log(\"GS: creating connector\")\n\n    try {\n      connector.current = new GnosisConnector(\n        connectorOpts.iframeRef,\n        connectorOpts.app,\n        uniqueId\n      )\n    } catch (e) {\n      addToast(`Unable to connect to ${connectorOpts.app.url}: ${e.message}`)\n      return null\n    }\n\n    // reply back to iframe with safe data\n    connector.current.on(Methods.getSafeInfo, () => {\n      return {\n        safeAddress: stateRef.current.selectedAccount,\n        network: stateRef.current.network.id,\n        chainId: stateRef.current.network.chainId,\n        owners: [stateRef.current.selectedAccount],\n        threshold: 1, //Number of confirmations (not used in ambire)\n      }\n    })\n\n    //reply back to iframe with safe data\n\n    // connector.current.on(Methods.getSafeBalances, async (msg) => {\n    //   verbose>0 && console.log(\"DApp requested getSafeBalances\") && console.log(msg)\n\n    //TODO later\n    //await portfolio.updatePortfolio(\"polygon\", selectedAccount, true)//not this because it does NOT return the updated state anyway\n    //console.log(portfolio)\n\n    //struct template\n    /*connector.current.on(Methods.getSafeBalances, () => {\n      return {\n        \"fiatTotal\": \"0.18072\",\n          \"items\": [\n          {\n            \"tokenInfo\": {\n              \"type\": \"NATIVE_TOKEN\",\n              \"address\": \"0x0000000000000000000000000000000000000000\",\n              \"decimals\": 18,\n              \"symbol\": \"MATIC\",\n              \"name\": \"Matic\",\n              \"logoUri\": \"https://safe-transaction-assets.staging.gnosisdev.com/chains/137/currency_logo.png\"\n            },\n            \"balance\": \"100000000000000000\",\n            \"fiatBalance\": \"0.18072\",\n            \"fiatConversion\": \"1.8072\"\n          }\n        ]\n      }\n     })*/\n\n    connector.current.on(Methods.rpcCall, async (msg) => {\n      verbose > 0 && console.log(\"DApp requested rpcCall\", msg)\n\n      if (!msg?.data?.params) {\n        throw new Error(\"invalid call object\")\n      }\n      const method = msg.data.params.call//0 == tx, 1 == blockNum\n      const callTx = msg.data.params.params//0 == tx, 1 == blockNum\n\n      const provider = getDefaultProvider(stateRef.current.network.rpc)\n      let result\n      if (method === \"eth_call\") {\n        result = await provider.call(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getBalance\") {\n        result = await provider.getBalance(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_blockNumber\") {\n        result = await provider.getBlockNumber().catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getBlockByNumber\" || method === \"eth_getBlockByHash\") {\n        if (callTx[1]) {\n          result = await provider.getBlockWithTransactions(callTx[0]).catch(err => {\n            throw err\n          })\n        } else {\n          result = await provider.getBlock(callTx[0]).catch(err => {\n            throw err\n          })\n        }\n      } else if (method === \"eth_getTransactionByHash\") {\n        result = await provider.getTransaction(callTx[0]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getCode\") {\n        result = await provider.getCode(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getBlockByNumber\") {\n        result = await provider.getBlock(callTx[0], callTx[1]).catch(err => {\n          throw err\n        })\n      } else if (method === \"eth_getTransactionReceipt\") {\n        result = await provider.getTransactionReceipt(callTx[0]).catch(err => {\n          throw err\n        })\n      } else if (method === \"personal_sign\") {\n        result = await handlePersonalSign(msg).catch(err => {\n          throw err\n        })\n      } else {\n        throw new Error(\"method not supported \" + method)\n      }\n      return result\n    })\n\n    connector.current.on(Methods.sendTransactions, (msg) => {\n      verbose > 0 && console.log(\"DApp requested sendTx\") && console.log(msg)\n\n      const data = msg?.data\n      if (!data) {\n        console.error('GS: no data')\n        return\n      }\n\n      const id = 'gs_' + data.id\n      const txs = data?.params?.txs\n      if (txs?.length) {\n        for (let i in txs) {\n          if (!txs[i].from) txs[i].from = stateRef.current.selectedAccount\n        }\n      } else {\n        console.error('GS: no txs in received payload')\n        return\n      }\n\n      const request = {\n        id,\n        forwardId: msg.data.id,\n        type: 'eth_sendTransaction',\n        txn: txs[0], //if anyone finds a dapp that sends a bundle, please reach me out\n        chainId: stateRef.current.network.chainId,\n        account: stateRef.current.selectedAccount\n      }\n\n      setRequests(prevRequests => prevRequests.find(x => x.id === request.id) ? prevRequests : [...prevRequests, request])\n    })\n\n    const handlePersonalSign = (msg) => {\n      verbose > 0 && console.log(\"DApp requested signMessage\") && console.log(msg)\n\n      console.log(msg);\n\n      const data = msg?.data\n      if (!data) {\n        console.error('GS: no data')\n        return\n      }\n\n      const id = 'gs_' + data.id\n      const message = data?.params?.message\n      if (!message) {\n        console.error('GS: no message in received payload')\n        return\n      }\n\n      const request = {\n        id,\n        forwardId: msg.data.id,\n        type: 'personal_sign',\n        txn: message,\n        chainId: stateRef.current.network.chainId,\n        account: stateRef.current.selectedAccount\n      }\n\n      setRequests(prevRequests => prevRequests.find(x => x.id === request.id) ? prevRequests : [...prevRequests, request])\n    }\n\n    connector.current.on(Methods.signMessage, (msg) => {\n        return handlePersonalSign(msg)\n    })\n\n    connector.current.on(Methods.getTxBySafeTxHash, async (msg) => {\n      const {safeTxHash} = msg.data.params\n      const provider = getDefaultProvider(stateRef.current.network.rpc)\n      try {\n        const res = await provider.getTransaction(safeTxHash)\n\n        return res\n      } catch (e) {\n        console.error(\"GS: Err getting transaction \" + safeTxHash)\n        console.log(e)\n        return {}\n      }\n    })\n  }, [uniqueId, addToast, verbose])\n\n\n  const disconnect = useCallback(() => {\n    verbose > 1 && console.log(\"GS: disconnecting connector\")\n    connector.current?.clear()\n  }, [verbose])\n\n  const resolveMany = (ids, resolution) => {\n    for (let req of requests.filter(x => ids.includes(x.id))) {\n      const replyData = {\n        id: req.forwardId,\n        success: null,\n        txId: null,\n        error: null\n      }\n      if (!resolution) {\n        replyData.error = 'Nothing to resolve'\n        replyData.success = false\n      } else if (!resolution.success) {\n        replyData.error = resolution.message\n        replyData.success = false\n      } else { //onSuccess\n        replyData.success = true\n        replyData.txId = resolution.result\n        replyData.safeTxHash = resolution.result\n      }\n      if (!connector.current) {\n        //soft error handling: sendTransaction has issues\n        //throw new Error(\"gnosis safe connector not set\")\n        console.error('gnosis safe connector not set')\n      } else {\n        connector.current.send(replyData, req.forwardId, replyData.error)\n      }\n    }\n\n    setRequests(prevRequests => prevRequests.filter(x => !ids.includes(x.id)))\n  }\n\n  // Side effects that will run on every state change/rerender\n  useEffect(() => {\n    localStorage[STORAGE_KEY] = JSON.stringify(requests)\n  }, [requests, selectedAccount, network])\n\n  return {\n    requests,\n    resolveMany,\n    connect,\n    disconnect\n  }\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}