(this["webpackJsonpambire-wallet"]=this["webpackJsonpambire-wallet"]||[]).push([[10,4,5],{1533:function(e,t,n){},1534:function(e,t,n){},1535:function(e,t,n){},1536:function(e,t,n){},1537:function(e,t,n){},1538:function(e,t,n){},1539:function(e,t,n){},1540:function(e,t,n){},1541:function(e,t,n){},1542:function(e,t,n){},1602:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return X}));var r=n(8),a=(n(1533),n(3)),s=n(30),c=n(79),i=(n(1534),n(37)),o=n(229),u=n(60),l=n(4),d=function(e){var t=e.portfolio,n=e.selectedNetwork,a=e.setNetwork,d=e.hidePrivateValue,f=e.relayerURL,p=e.selectedAccount,b=(e.match,Object(s.useHistory)()),m=function(e){return u.a.find((function(t){return t.id===e}))},h=t.otherBalances.filter((function(e){var t=e.network,r=e.total;return t!==n.id&&r.full>0})),j=Object.entries(t.balancesByNetworksLoading).find((function(e){return e[0]!==n.id&&e[1]})),g=f?"".concat(f,"/gas-tank/").concat(p,"/getBalance"):null,y=Object(i.j)({url:g}),v=y.data,x=y.isLoading,O=v&&v.length&&v.map((function(e){return e.balanceInUSD})).reduce((function(e,t){return e+t}),0),w=O?Number(O.toString()).toFixed(2).split("."):[0,0],k=Object(r.a)(w,2),T=k[0],N={label:"Gas Tank",total:{full:O||0,decimals:k[1],truncated:T}};return Object(l.jsx)("div",{id:"balances",children:t.isCurrNetworkBalanceLoading&&j?Object(l.jsx)(c.m,{}):Object(l.jsxs)(l.Fragment,{children:[t.isCurrNetworkBalanceLoading?Object(l.jsx)(c.m,{}):Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{className:"green-highlight",children:"$"})," ",d(t.balance.total.truncated),Object(l.jsxs)("span",{className:"green-highlight",children:[".",d(t.balance.total.decimals)]})]}),Object(l.jsx)("div",{id:"other-balances",children:j?Object(l.jsx)(c.m,{}):Object(l.jsxs)(l.Fragment,{children:[h.length?Object(l.jsx)("label",{children:"You also have"}):null,h.filter((function(e){var t=e.network;return m(t)})).map((function(e,t){var n=e.network,r=e.total;return Object(l.jsxs)("div",{className:"balance-container",children:[Object(l.jsxs)("div",{className:"other-balance",onClick:function(){return a(n)},children:[Object(l.jsxs)("label",{children:[Object(l.jsx)("span",{className:"purple-highlight",children:"$"})," ",d(r.truncated),Object(l.jsxs)("span",{className:"purple-highlight",children:[".",d(r.decimals)]})]}),"on",Object(l.jsxs)("div",{className:"network",children:[Object(l.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(m(n).icon,")")}}),Object(l.jsx)("div",{className:"name",children:m(n).name})]})]}),h.length-(N.total.full>0?0:1)!==t?Object(l.jsx)("label",{children:"and"}):null]},n)})),N&&N.total.full>0&&!x&&Object(l.jsx)("div",{className:"balance-container",children:Object(l.jsxs)("div",{className:"other-balance",onClick:function(){return b.push("/wallet/gas-tank")},children:[Object(l.jsxs)("label",{children:[Object(l.jsx)("span",{className:"purple-highlight",children:"$"})," ",d(N.total.truncated),Object(l.jsxs)("span",{className:"purple-highlight",children:[".",d(N.total.decimals)]})]}),"on",Object(l.jsxs)("div",{className:"network",children:[Object(l.jsx)("div",{className:"icon-svg",children:Object(l.jsx)(o.a,{size:20})}),Object(l.jsx)("div",{className:"name",children:N.label})]})]})})]})})]})})},f=n(17),p=n(12),b=n(7),m=(n(1535),n(230)),h=n(69),j=(n(1536),n(36)),g=function(e){var t=e.onClickAddToken,n=e.onClickShowToken,r=Object(i.e)({key:"hiddenTokens"}),a=0;return r&&null!==r[0]&&(a=r[0].length),Object(l.jsxs)("div",{id:"protocols-placeholder",children:[Object(l.jsxs)("div",{className:"placeholder-overlay",children:[Object(l.jsx)("label",{children:"Welcome! You don't have any funds on this account."}),Object(l.jsx)(h.c,{to:"/wallet/deposit",children:Object(l.jsx)(c.e,{small:!0,icon:Object(l.jsx)(o.c,{}),children:"Deposit"})}),Object(l.jsxs)("div",{className:"add-token",children:[Object(l.jsx)("label",{children:"You have a token that's not displayed?"}),Object(l.jsx)(c.e,{mini:!0,clear:!0,icon:Object(l.jsx)(j.C,{}),onClick:t,children:"Click here to add it"}),a>0&&Object(l.jsxs)("label",{style:{cursor:"pointer"},onClick:n,children:["There are also ",a," hidden tokens. Click to configure"]})]})]}),Object(l.jsxs)("div",{className:"category",children:[Object(l.jsx)("div",{className:"title",children:"Tokens"}),Object(l.jsx)("div",{className:"list",children:[{icon:"https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0xade00c28244d5ce17d72e40330b1c318cd12b7c3.png",symbol:"ADX",balance:170027.26,balanceUSD:138880.64},{icon:"https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x0000000000000000000000000000000000000000.png",symbol:"ETH",balance:61.77,balanceUSD:283170.08},{icon:"https://storage.googleapis.com/zapper-fi-assets/tokens/ethereum/0x2260fac5e5542a773aa44fbcfedf7c193bc2c599.png",symbol:"WBTC",balance:.03,balanceUSD:2227.24}].map((function(e){var t=e.icon,n=e.symbol,r=e.balance,a=e.balanceUSD;return Object(l.jsxs)("div",{className:"token",children:[Object(l.jsx)("div",{className:"icon",children:Object(l.jsx)("img",{src:t,alt:"Token Icon"})}),Object(l.jsx)("div",{className:"name",children:n}),Object(l.jsx)("div",{className:"separator"}),Object(l.jsxs)("div",{className:"balance",children:[Object(l.jsxs)("div",{className:"currency",children:[r," ",Object(l.jsx)("span",{className:"symbol",children:n})]}),Object(l.jsxs)("div",{className:"dollar",children:[Object(l.jsx)("span",{className:"symbol",children:"$"})," ",a]})]})]},n)}))})]})]})},y=n(2),v=n.n(y),x=n(11),O=(n(1537),n(95)),w=n(21),k=n(605),T=n(92),N=n(44),S=n(70),C=n(595),A=new w.Interface(k),E=function(e){var t=e.network,n=e.account,s=e.portfolio,o=Object(N.a)().addToast,u=Object(i.f)().hideModal,d=s.extraTokens,f=s.onAddExtraToken,p=s.onRemoveExtraToken,b=Object(a.useState)(!1),m=Object(r.a)(b,2),h=m[0],g=m[1],y=Object(a.useState)(null),k=Object(r.a)(y,2),E=k[0],M=k[1],P=Object(a.useState)(!1),I=Object(r.a)(P,2),L=I[0],D=I[1],F=!E||!(E.symbol&&E.decimals),B=function(){var e=Object(x.a)(v.a.mark((function e(a){var s,c,i,u,l,d,f,p,b;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M(null),Object(T.b)(a)){e.next=3;break}return e.abrupt("return");case 3:return g(!0),D(!1),e.prev=5,s=Object(S.a)(t.id),c=new O.Contract(a,A,s),e.next=10,Promise.all([c.balanceOf(n),c.name(),c.symbol(),c.decimals()]);case 10:i=e.sent,u=Object(r.a)(i,4),l=u[0],d=u[1],f=u[2],p=u[3],b=Object(w.formatUnits)(l,p),M({account:n,address:a.toLowerCase(),network:t.id,balance:b,balanceRaw:l.toString(),tokenImageUrl:Object(C.a)(t.id,a),name:d,symbol:f,decimals:p}),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(5),console.error(e.t0),o("Failed to load token info",{error:!0}),D(!0);case 25:g(!1);case 26:case"end":return e.stop()}}),e,null,[[5,20]])})));return function(t){return e.apply(this,arguments)}}(),_=Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(c.e,{clear:!0,icon:Object(l.jsx)(j.I,{}),onClick:function(){return u()},children:"Close"}),Object(l.jsx)(c.e,{icon:Object(l.jsx)(j.C,{}),disabled:F,onClick:function(){f(E),u()},children:"Add"})]}),R="binance-smart-chain"===t.id?"a BEP20":"ethereum"===t.id?"an ERC20":"a valid";return Object(l.jsxs)(c.n,{id:"add-token-modal",title:"Add Token",buttons:_,children:[Object(l.jsx)(c.w,{label:"Token Address",placeholder:"0x...",onInput:function(e){return B(e)}}),L?Object(l.jsxs)("div",{className:"validation-error",children:["The address you entered does not appear to correspond to ",R," token on ",t.name,"."]}):null,h?Object(l.jsx)(c.m,{}):!L&&E?Object(l.jsxs)("div",{className:"token-details",children:[Object(l.jsxs)("div",{className:"info",children:[Object(l.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(E.icon,")")}}),Object(l.jsxs)("div",{className:"name",children:[E.name," ",Object(l.jsxs)("span",{children:["(",E.symbol,") ",E.network.toUpperCase()]})]})]}),Object(l.jsxs)("div",{className:"balance",children:["Balance: ",Object(l.jsx)("span",{children:E.balance})," ",Object(l.jsx)("b",{children:E.symbol})]})]}):null,Object(l.jsx)("div",{className:"extra-tokens-list",children:d.map((function(e){var t=e.address,n=e.name,r=e.symbol,a=e.tokenImageUrl,s=e.network;return Object(l.jsxs)("div",{className:"extra-token",children:[Object(l.jsxs)("div",{className:"info",children:[Object(l.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(a,")")}}),Object(l.jsxs)("div",{className:"name",children:[n," ",Object(l.jsxs)("span",{children:["(",r,") ",s.toUpperCase()]})]})]}),Object(l.jsx)("div",{className:"actions",children:Object(l.jsx)(c.e,{mini:!0,clear:!0,onClick:function(){return function(e){p(e),u()}(t)},children:Object(l.jsx)(j.T,{})})})]},t)}))})]})},M=(n(1538),function(e){var t=e.token,n=e.button;return Object(l.jsxs)("div",{className:"extra-token",children:[Object(l.jsxs)("div",{className:"info",children:[Object(l.jsx)("div",{className:"icon",style:{backgroundImage:"url(".concat(t.tokenImageUrl,")")}}),Object(l.jsx)("div",{className:"name",children:Object(l.jsxs)("span",{children:[t.symbol," (",t.network.toUpperCase(),")"]})})]}),n]},t.address)}),P=function(e){var t=e.portfolio,n=e.account,r=e.network,s=e.userSorting,o=e.sortType,u=e.setIsHideTokenModalOpen,d=Object(i.f)().hideModal,p=t.hiddenTokens,b=t.onAddHiddenToken,m=t.onRemoveHiddenToken,h=t.tokens,g=Object(a.useMemo)((function(){var e=h.concat(p).sort((function(e,t){var a,c,i;if("custom"===o&&(null===(a=s.tokens)||void 0===a||null===(c=a.items)||void 0===c||null===(i=c["".concat(n,"-").concat(r.chainId)])||void 0===i?void 0:i.length))return s.tokens.items["".concat(n,"-").concat(r.chainId)].indexOf(e.address)-s.tokens.items["".concat(n,"-").concat(r.chainId)].indexOf(t.address);var u=t.balanceUSD-e.balanceUSD;return 0===u?e.symbol.localeCompare(t.symbol):u}));return Object(f.a)(new Map(e.map((function(e){return[e.address,e]}))).values())}),[h,p,s,o,n,r.chainId]);return Object(l.jsxs)(c.n,{id:"hide-token-modal",title:"Hide Token",children:[Object(l.jsx)("div",{className:"extra-tokens-list",children:g.map((function(e){return Object(l.jsx)(M,{token:e,button:e.isHidden?Object(l.jsx)(j.cb,{className:"extra-token-icon",color:"#f98689",onClick:function(){return function(e){return m(e.address)}(e)}}):Object(l.jsx)(j.Z,{className:"extra-token-icon",color:"#36c979",onClick:function(){return function(e){return b(e)}(e)}})},e.address)}))}),Object(l.jsx)("div",{className:"modalBottom",children:Object(l.jsx)(c.e,{clear:!0,icon:Object(l.jsx)(j.I,{}),onClick:function(){u(!1),d()},children:"Close"})})]})},I=n(604),L=function(e){var t,n=e.portfolio,s=e.network,u=e.account,d=e.hidePrivateValue,y=e.userSorting,v=e.setUserSorting,x=Object(i.f)().showModal,O=Object(a.useState)([]),w=Object(r.a)(O,2),k=w[0],T=w[1],N=Object(a.useState)(!1),S=Object(r.a)(N,2),A=S[0],M=S[1],L=n.isCurrNetworkBalanceLoading,D=n.isCurrNetworkProtocolsLoading,F=n.tokens,B=n.protocols,_=(null===(t=y.tokens)||void 0===t?void 0:t.sortType)||"decreasing",R=Object(i.c)(),U=Object(i.d)("address",(function(e){v((function(t){var n;return Object(b.a)(Object(b.a)({},t),{},{tokens:{sortType:"custom",items:Object(b.a)(Object(b.a)({},null===(n=t.tokens)||void 0===n?void 0:n.items),{},Object(p.a)({},"".concat(u,"-").concat(s.chainId),e))}})}))})),H=U.dragStart,W=U.dragEnter,z=U.target,q=U.handle,G=U.dragTarget,V=U.drop,K=F.sort((function(e,t){var n,r,a;if("custom"===_&&(null===(n=y.tokens)||void 0===n||null===(r=n.items)||void 0===r||null===(a=r["".concat(u,"-").concat(s.chainId)])||void 0===a?void 0:a.length))return y.tokens.items["".concat(u,"-").concat(s.chainId)].indexOf(e.address)-y.tokens.items["".concat(u,"-").concat(s.chainId)].indexOf(t.address);var c=t.balanceUSD-e.balanceUSD;return 0===c?e.symbol.localeCompare(t.symbol):c})),Y=B.filter((function(e){return"Tokens"!==e.label})),Q=!L&&!F.length&&!D&&!Y.length,J=function(e,t,n,r,a,s){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7?arguments[7]:void 0,p=arguments.length>8?arguments[8]:void 0,b=arguments.length>9?arguments[9]:void 0,g=arguments.length>10?arguments[10]:void 0,y=k.includes(t)?Object(C.a)(u,s):t;return Object(l.jsxs)("div",{className:"token",draggable:"tokens"===b&&g>1&&"custom"===_&&!R,onDragStart:function(t){q.current===z.current||q.current.contains(z.current)?H(t,e):t.preventDefault()},onMouseDown:function(t){return G(t,e)},onDragEnter:function(t){return W(t,e)},onDragEnd:function(){return V(K)},onDragOver:function(e){return e.preventDefault()},children:[g>1&&"custom"===_&&!R&&Object(l.jsx)(j.n,{size:20,className:"drag-handle",onClick:function(t){return H(t,e)},id:"".concat(e,"-handle")}),Object(l.jsx)("div",{className:"icon",children:k.includes(y)?Object(l.jsx)(o.d,{size:20}):Object(l.jsx)("img",{src:y,draggable:"false",alt:"Token Icon",onError:function(){return T((function(e){return[].concat(Object(f.a)(e),[y])}))}})}),Object(l.jsx)("div",{className:"name",children:n}),Object(l.jsx)("div",{className:"separator"}),Object(l.jsxs)("div",{className:"balance",children:[Object(l.jsxs)("div",{className:"currency",children:[Object(l.jsx)("span",{className:"value",children:d(Object(I.a)(r,!0,p))}),Object(l.jsx)("span",{className:"symbol",children:n})]}),Object(l.jsxs)("div",{className:"dollar",children:[Object(l.jsx)("span",{className:"symbol",children:"$"})," ",d(a.toFixed(2))]})]}),i?Object(l.jsx)("div",{className:"actions",children:Object(l.jsx)(h.c,{to:"/wallet/transfer/".concat(s),children:Object(l.jsx)(c.e,{small:!0,icon:Object(l.jsx)(m.i,{}),children:"Send"})})}):null]},"token-".concat(s,"-").concat(e))},$=function(){return x(Object(l.jsx)(E,{network:s,account:u,portfolio:n}))},X=function(){return M(!0)};return Object(a.useEffect)((function(){A&&x(Object(l.jsx)(P,{portfolio:n,account:u,userSorting:y,sortType:_,network:s,setIsHideTokenModalOpen:M}))}),[n,A,x,u,s,_,y]),Object(l.jsxs)("div",{id:"protocols-table",children:[Q?Object(l.jsx)(g,{onClickAddToken:$,onClickShowToken:X}):null,Object(l.jsxs)(l.Fragment,{children:[L?Object(l.jsx)(c.m,{}):!Q&&K.length?Object(l.jsxs)("div",{className:"category",children:[Object(l.jsxs)("div",{className:"title",children:[Object(l.jsxs)("div",{className:"sort-holder",children:["Tokens",K.length>1&&!R&&Object(l.jsxs)("div",{className:"sort-buttons",children:[Object(l.jsx)(c.y,{label:"Sorted tokens by drag and drop",children:Object(l.jsx)(j.n,{color:"custom"===_?"#80ffdb":"",cursor:"pointer",onClick:function(){return v((function(e){return Object(b.a)(Object(b.a)({},e),{},{tokens:Object(b.a)(Object(b.a)({},e.tokens),{},{sortType:"custom"})})}))}})}),Object(l.jsx)(c.y,{label:"Sorted tokens by DESC balance",children:Object(l.jsx)(j.W,{color:"decreasing"===_?"#80ffdb":"",cursor:"pointer",onClick:function(){return v((function(e){return Object(b.a)(Object(b.a)({},e),{},{tokens:Object(b.a)(Object(b.a)({},e.tokens),{},{sortType:"decreasing"})})}))}})})]})]}),Object(l.jsxs)("div",{className:"wrapper-btns",children:[Object(l.jsx)(c.e,{mini:!0,clear:!0,icon:Object(l.jsx)(j.cb,{}),onClick:function(){return X()},children:"Hide Token"}),Object(l.jsx)(c.e,{mini:!0,clear:!0,icon:Object(l.jsx)(j.C,{}),onClick:function(){return $()},children:"Add Token"})]})]}),Object(l.jsx)("div",{className:"list",children:K.map((function(e,t){var n=e.address,r=e.symbol,a=e.tokenImageUrl,s=e.balance,c=e.balanceUSD,i=e.network,o=e.decimals;return J(t,a,r,s,c,n,!0,i,o,"tokens",K.length)}))})]},"category-tokens"):null,D?Object(l.jsx)(c.m,{}):Y.map((function(e,t){var n=e.label,r=e.assets;return Object(l.jsxs)("div",{className:"category",children:[Object(l.jsx)("div",{className:"title",children:n}),Object(l.jsx)("div",{className:"list",children:r.map((function(e,t){var n=e.category,r=e.symbol,a=e.tokenImageUrl,s=e.balance,c=e.balanceUSD,i=e.address;return J(t,a,r,s,c,i,"claimable"!==n,"protocols")}))})]},"category-".concat(t))}))]})]})},D=(n(1539),n(1540),function(e){var t=e.isPrivateMode,n=e.collectiblesLength;return Object(l.jsxs)("div",{id:"collectibles-placeholder",children:[Object(l.jsx)("div",{className:"placeholder-text",children:t&&n?"You can't see collectibles in private mode":"You don't have any collectibles (NFTs) yet"}),Object(l.jsx)("div",{className:"placeholder-overlay"}),Object(l.jsx)("div",{id:"collectibles",children:Object(l.jsx)("div",{className:"collectibles-wrapper",children:[{collectionName:"Party Bone",collectionImg:"https://lh3.googleusercontent.com/ZNc-hDBHOxgioSltBcDvh5hBfWEj623dETJj2nrEC0cLbjuULbo4Ign7OnLDX9qf2XaALrkXsZCRylRqPPHqQgzJOabJg4TRq3MDhA=s2500",name:"Party Bone #7865",image:"https://lh3.googleusercontent.com/uznp2aNVNPEhVk4MhLG2Zn-JC2sVaF6PsUcpF_CpyQkgekmv4hh4zbyebsoLFLvkY8PSV6D-TR5OaMp15RhG9zQsYd_AvDCo9SEVF4Q",price:32.16},{collectionName:"Pudgy Penguins",collectionImg:"https://lh3.googleusercontent.com/L9PJp0pOXCscKsTpD1_6zoALxdjG5gIKHLykS_Wk5J_yk590drEqRhM1ElTEZCaWeTjFj2isfxFw2tcFKcbCPlu6-Eu5bUuxsL-x=s2500",name:"Pudgy Penguin #8675",image:"https://lh3.googleusercontent.com/J6gQQRnzsMLAOhYiN9qIhogxr2MKn17zfGf6nQFKr3WCZ34thm6H0w9izvnJysxJclsyr8c3yo0hshOaLU73aS-IgTm-CooJb1cw1S0",price:5675},{collectionName:"Art Blocks Factory",collectionImg:"https://lh3.googleusercontent.com/sr7Y19-bJwsQsxX6n8Pj5tIaNKdUEotNlfhBsYw8McKpIsYARglTORaNlGhDZ2PrH-tO1vU6tFbpamiWwIImbidhVSh4aoIh4d310Og=s2500",name:"Transitions #4267",image:"https://lh3.googleusercontent.com/9MzvH_PSYMvlJE8Cfm5d308ltY5fZx-dooEcQizKgtKZ8g05RvJvd_5LAbqVHIzaoZbM-HOBgNSV8RKvEe_1thkLcQtE4NMMx8Kp5g",price:263.46},{collectionName:"Sad Frogs District",collectionImg:"https://lh3.googleusercontent.com/3U8N73XLrQOQPhJBAMNi7IPR1y3GGJ2zxmyUlit4IHCJURmKFPWClgatjbYfyz9drMk6-XSQTjSFqn7tKL0ZNoRbgvUu8OdLVREA=s2500",name:"1882",image:"https://lh3.googleusercontent.com/3uwrfkdhHSfWm171BOjJHp3768tbLP9TeyTh2BnvgF6S1nIRI489SFq6EGjI9AISRUeyXXufEjB34Wj0bif_vl-y5h6GesEoJaaZcJg",price:1563.59},{collectionName:"GLUEWAVE",collectionImg:"https://lh3.googleusercontent.com/LheZMF6AyTLPpfwABwAGZqoC0gTWrDlYloDdT2VX2u_GZRZnP-ZpDC90huElm3RXE-eU1d1YluQi8G1uVdeDdysUNLZWJte4jXk3zeY=s2500",name:"000105040307070704",image:"https://lh3.googleusercontent.com/eP_F_6aa_BXuKfYq1w2aiS6UW3bp4-gByFoeKLMXYuWAkU6Xiyi7mkm31aoewCZ_eG9RAuhas8jxFwXTxAWuxq1E3ZxYg97cLUUE",price:7107.27}].map((function(e){var t=e.collectionName,n=e.collectionImg,r=e.name,a=e.image,s=e.price;return Object(l.jsxs)("div",{className:"collectible",children:[Object(l.jsx)("div",{className:"artwork",style:{backgroundImage:"url(".concat(a,")")}}),Object(l.jsxs)("div",{className:"info",children:[Object(l.jsxs)("div",{className:"collection",children:[Object(l.jsx)("div",{className:"collection-icon",style:{backgroundImage:"url(".concat(n,")")}}),t]}),Object(l.jsxs)("div",{className:"details",children:[Object(l.jsx)("div",{className:"name",children:r}),Object(l.jsxs)("div",{className:"value",children:[Object(l.jsx)("span",{className:"purple-highlight",children:"$"})," ",s]})]})]})]},r)}))})})]})}),F=n(791),B=n(625),_=function(e){var t=e.portfolio,n=e.isPrivateMode,s=Object(F.useParams)(),i=Object(F.useHistory)(),o=Math.ceil(t.collectibles.length/15),u=Object(a.useMemo)((function(){return Math.min(Math.max(Number(s.page),1),o)||1}),[s.page,o]),d=Object(a.useState)(u),f=Object(r.a)(d,2),p=f[0],b=f[1],m=t.collectibles.slice(15*(p-1),15*p),j=Object(l.jsxs)("div",{className:"pagination-controls",children:[Object(l.jsx)("div",{className:"pagination-title",children:"Page"}),Object(l.jsx)(c.e,{clear:!0,mini:!0,onClick:function(){return p>1&&b((function(e){return e-1}))},children:Object(l.jsx)(B.a,{})}),Object(l.jsxs)("div",{className:"pagination-current",children:[p," ",Object(l.jsxs)("span",{children:["/ ",o]})]}),Object(l.jsx)(c.e,{clear:!0,mini:!0,onClick:function(){return p<o&&b((function(e){return e+1}))},children:Object(l.jsx)(B.b,{})})]});Object(a.useEffect)((function(){return i.replace("/wallet/dashboard/collectibles/".concat(p))}),[p,i]),Object(a.useEffect)((function(){return b(u)}),[u]);return t.isCurrNetworkProtocolsLoading?Object(l.jsx)(c.m,{}):!t.collectibles.length||n?Object(l.jsx)(D,{isPrivateMode:n,collectiblesLength:t.collectibles.length}):Object(l.jsxs)("div",{id:"collectibles",children:[Object(l.jsx)("div",{className:"collectibles-wrapper",children:m.map((function(e){var t=e.network,n=e.address,r=e.collectionName,a=e.collectionImg;return(e.assets||[]).map((function(e){var s,c=e.tokenId,i=e.assetName,o=e.assetImg,u=e.balanceUSD;return Object(l.jsx)("div",{className:"collectible",children:Object(l.jsxs)(h.c,{to:"/wallet/nft/".concat(t,"/").concat(n,"/").concat(c),children:[Object(l.jsx)("div",{className:"artwork",style:{backgroundImage:"url(".concat((s=o,s?"data:image"===(s=s.startsWith("data:application/json")?s.replace("data:application/json;utf8,",""):s).split("/")[0]?s:s.startsWith("ipfs://")?s.replace(/ipfs:\/\/ipfs\/|ipfs:\/\//g,"https://ipfs.io/ipfs/"):s.split("/")[2].endsWith("mypinata.cloud")?"https://ipfs.io/ipfs/"+s.split("/").slice(4).join("/"):s:""),")")}}),Object(l.jsxs)("div",{className:"info",children:[Object(l.jsxs)("div",{className:"collection",children:[Object(l.jsx)("div",{className:"collection-icon",style:{backgroundImage:"url(".concat(a,")")}}),Object(l.jsx)("span",{className:"collection-name",children:r})]}),Object(l.jsxs)("div",{className:"details",children:[Object(l.jsx)("div",{className:"name",children:i}),Object(l.jsxs)("div",{className:"value",children:[Object(l.jsx)("span",{className:"purple-highlight",children:"$"})," ",u.toFixed(2)]})]})]})]})},c)}))}))}),j]})},R=n(692),U=(n(1541),n(1542),n(792));function H(e){return e<10?"0".concat(e):"".concat(e)}function W(e){var t=e.endDateTime,n=e.label,s=Object(a.useState)(null),c=Object(r.a)(s,2),i=c[0],o=c[1];return Object(a.useLayoutEffect)((function(){if(t){var e=setInterval((function(){var n=new Date(t).getTime()-(new Date).getTime();o(function(e){return e<0?{days:"00",hours:"00",minutes:"00",seconds:"00"}:{days:H(Math.floor(e/864e5)),hours:H(Math.floor(e/36e5%24)),minutes:H(Math.floor(e/1e3/60%60)),seconds:H(Math.floor(e/1e3%60))}}(n)),n<0&&(clearInterval(e),e=null)}),1e3);return function(){clearInterval(e),e=null}}o(null)}),[t]),i?Object(l.jsxs)("div",{children:[n&&Object(l.jsx)("span",{children:n}),Object(l.jsxs)("div",{className:"final-countdown",children:[Object(l.jsx)(U.b,{className:"timer-icon"}),Object(l.jsxs)("div",{className:"unit-box",children:[Object(l.jsx)("div",{className:"value",children:i.days}),Object(l.jsx)("div",{className:"unit",children:"days"})]}),Object(l.jsx)("div",{className:"value",children:":"}),Object(l.jsxs)("div",{className:"unit-box",children:[Object(l.jsx)("div",{className:"value",children:i.hours}),Object(l.jsx)("div",{className:"unit",children:"hours"})]}),Object(l.jsx)("div",{className:"value",children:":"}),Object(l.jsxs)("div",{className:"unit-box",children:[Object(l.jsx)("div",{className:"value",children:i.minutes}),Object(l.jsx)("div",{className:"unit",children:"minutes"})]}),Object(l.jsx)("div",{className:"value",children:":"}),Object(l.jsxs)("div",{className:"unit-box",children:[Object(l.jsx)("div",{className:"value",children:i.seconds}),Object(l.jsx)("div",{className:"unit",children:"seconds"})]})]})]}):null}var z=n(242),q=["emojies","color","background"];function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.period,a=e.text,s=e.title,c=e.resources,i=void 0===c?{}:c,o=e.togglePromo,u=e.minimized;if(!a)return null;var d=new RegExp(/\${{(\w+)}}/,"gi"),f=a.split(d),p=i.emojies,h=i.color,g=i.background,y=Object(R.a)(i,q),v=Object.entries(y).reduce((function(e,t){var n=Object(r.a)(t,2),a=n[0],s=n[1],c=(s=void 0===s?{}:s).label,i=s.href,o=Object(l.jsx)("a",{className:"link",href:i,target:"_blank",rel:"noreferrer noopener",children:c},a);return e[a]=o,e}),{}),x=Object.entries(Object(b.a)({},p)).reduce((function(e,t){var n=Object(r.a)(t,2),a=n[0],s=n[1],c=(s=void 0===s?{}:s).text,i=s.size,o=Object(l.jsx)("span",{className:"emoji",style:{fontSize:i},children:c},a);return e[a]=o,e}),{});return Object(l.jsxs)("div",{className:"notice ".concat(u?"minimized":""),style:Object(b.a)(Object(b.a)({},g?{backgroundColor:g}:{}),h?{color:h}:{}),children:[!u&&Object(l.jsxs)("div",{children:[s&&Object(l.jsx)("div",{className:"title",children:s}),Object(l.jsx)("div",{children:f.map((function(e){return v[e]||x[e]||e}))}),(null===n||void 0===n?void 0:n.to)&&(null===n||void 0===n?void 0:n.timer)&&Object(l.jsx)("div",{className:"timer",children:Object(l.jsx)(W,{endDateTime:n.to})})]}),t?u?Object(l.jsx)(j.O,{className:"close-btn",onClick:function(){return o(t)}}):Object(l.jsx)("div",{children:Object(l.jsx)(m.h,{className:"close-btn",onClick:function(){return o(t)}})}):null]})}function V(e){var t=e.rewardsData.rewards.promo,n=Object(z.a)({key:"closedPromos",defaultValue:[]}),s=Object(r.a)(n,2),c=s[0],i=s[1],o=Object(a.useCallback)((function(e){var t=Object(f.a)(c),n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e),i(t)}),[c,i]);return t?Object(l.jsx)(G,Object(b.a)(Object(b.a)({},t),{},{togglePromo:o,minimized:c.includes(t.id)})):null}var K=n(816),Y=n(793);var Q=function(e){var t=e.selectedAccount,n=e.selectedNetwork;return Object(l.jsxs)("div",{className:"notification-hollow warning",children:[Object(l.jsx)("h4",{children:"Dashboard balances could appear incomplete or outdated."}),Object(l.jsxs)("p",{children:["We are currently experiencing technical difficulties with our third party services, so what you see on the dashboard may be incomplete or outdated. You can check ",Object(l.jsx)("a",{href:n.explorerUrl+"/address/"+t,target:"_blank",rel:"noreferrer",children:n.explorerUrl.split("/")[2]})," to see your current balances. However, you can use Ambire normally with any connected dApp."]})]})},J=[{value:"Tokens"},{value:"Protocols"}],$=[{value:"tokens"},{value:"collectibles"}];function X(e){var t=e.portfolio,n=e.selectedNetwork,o=e.selectedAccount,u=e.setNetwork,f=e.privateMode,p=e.rewardsData,m=e.userSorting,h=e.setUserSorting,g=e.accounts,y=e.addRequest,v=e.relayerURL,x=e.useStorage,O=e.match,k=e.showSendTxns,T=Object(s.useHistory)(),N=Object(s.useParams)(),S=N.tabId,C=N.page,A=void 0===C?1:C,E=Object(a.useState)([]),M=Object(r.a)(E,2),P=M[0],I=M[1],D=Object(a.useState)([]),F=Object(r.a)(D,2),B=F[0],R=F[1],U=Object(a.useState)([]),H=Object(r.a)(U,2),W=H[0],z=H[1],q=Object(a.useState)(S||$[0].value),G=Object(r.a)(q,2),X=G[0],Z=G[1],ee=g.find((function(e){return e.id.toLowerCase()===o.toLowerCase()})),te=function(e,t,n){var s=Object(a.useState)((function(){return Date.now()})),c=Object(r.a)(s,2),o=c[0],u=c[1],l=Object(a.useState)(null),d=Object(r.a)(l,2),f=d[0],p=d[1],m=Object(a.useState)(null),h=Object(r.a)(m,2),j=h[0],g=h[1],y=Object(a.useState)(null),v=Object(r.a)(y,2),x=v[0],O=v[1],k=Object(a.useState)(null),T=Object(r.a)(k,2),N=T[0],S=T[1];Object(a.useEffect)((function(){Date.now()-o>3e4&&u(Date.now());var e=setTimeout((function(){return u(Date.now())}),3e4);return function(){return clearTimeout(e)}}),[o,t,n]);var C=e?"".concat(e,"/identity/").concat(t.id,"/").concat(n.id,"/privileges?cacheBreak=").concat(o):null,A=Object(i.j)({url:C}),E=A.data,M=A.errMsg,P=A.isLoading;return Object(a.useEffect)((function(){var e=E?E.privileges:{},r=E&&E.recoveryLock,a=e[t.signer.quickAccManager]&&(r&&r.status&&!P||e&&t.signer.quickAccManager&&t.signer.preRecovery&&function(e){var t=new w.AbiCoder,n=e.timelock,r=e.one,a=e.two;return Object(w.keccak256)(t.encode(["tuple(uint, address, address)"],[[n,r,a]]))}(t.signer)!==e[t.signer.quickAccManager]);p({hasPendingReset:a,errMsg:M,recoveryLock:r}),P?O(!N&&P):j===(null===t||void 0===t?void 0:t.id)+n.id?(S(!0),O(!1)):(g((null===t||void 0===t?void 0:t.id)+n.id),S(!1))}),[E,M,P,t,j,n.id,N]),Object(b.a)({data:E,isPasswordRecoveryCheckLoading:x},f)}(v,ee,n),ne=te.hasPendingReset,re=te.recoveryLock,ae=te.isPasswordRecoveryCheckLoading,se=!!t.cachedBalancesByNetworks.length&&t.cachedBalancesByNetworks.find((function(e){return e.network===n.id}));return Object(a.useEffect)((function(){if(!X||X===$[0].value)return T.replace("/wallet/dashboard");T.replace("/wallet/dashboard/".concat(X).concat(X===$[1].value?"/".concat(A):""))}),[X,T,A]),Object(a.useLayoutEffect)((function(){var e=t.tokens.map((function(e){var n=e.label,r=e.symbol,a=e.balanceUSD;return{label:n||r,value:Number((a/t.balance.total.full*100).toFixed(2))}})).filter((function(e){return e.value>0})),n=t.protocols.map((function(e){return e.assets.map((function(e){return e.balanceUSD})).reduce((function(e,t){return e+t}),0)})).reduce((function(e,t){return e+t}),0),r=t.protocols.map((function(e){var t=e.label,r=e.assets;return{label:t,value:Number((r.map((function(e){return e.balanceUSD})).reduce((function(e,t){return e+t}),0)/n*100).toFixed(2))}})).filter((function(e){return e.value>0}));I(e),R(r)}),[t.balance,t.tokens,t.protocols]),Object(a.useEffect)((function(){return t.requestOtherProtocolsRefresh()}),[t]),Object(l.jsxs)("section",{id:"dashboard",children:[se&&Object(l.jsx)(Q,{selectedNetwork:n,selectedAccount:o}),Object(l.jsx)(V,{rewardsData:p}),Object(l.jsx)(K.a,{selectedNetwork:n,selectedAccount:o,accounts:g,addRequest:y,closeable:!0,relayerURL:v,portfolio:t,useStorage:x}),ne&&!ae&&Object(l.jsx)(Y.a,{recoveryLock:re,showSendTxns:k,selectedAccount:ee,selectedNetwork:n}),Object(l.jsxs)("div",{id:"overview",children:[Object(l.jsxs)("div",{id:"balance",className:"panel",children:[Object(l.jsx)("div",{className:"title",children:"Balance"}),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)(d,{portfolio:t,selectedNetwork:n,setNetwork:u,hidePrivateValue:f.hidePrivateValue,relayerURL:v,selectedAccount:o,match:O})})]}),Object(l.jsxs)("div",{id:"chart",className:"panel",children:[Object(l.jsxs)("div",{className:"title",children:["Balance by",Object(l.jsx)(c.s,{small:!0,defaultValue:J[0].value,segments:J,onChange:z})]}),Object(l.jsx)("div",{className:"content",children:W===J[0].value?t.isCurrNetworkBalanceLoading?Object(l.jsx)(c.m,{}):f.hidePrivateContent(Object(l.jsx)(c.f,{data:P,size:200})):t.isCurrNetworkProtocolsLoading?Object(l.jsx)(c.m,{}):f.hidePrivateContent(Object(l.jsx)(c.f,{data:B,size:200}))})]})]}),Object(l.jsxs)("div",{id:"table",className:"panel",children:[Object(l.jsxs)("div",{className:"title",children:["Assets",Object(l.jsx)(c.s,{small:!0,defaultValue:X,segments:$,onChange:Z})]}),Object(l.jsx)("div",{className:"content",children:X===$[0].value?Object(l.jsx)(L,{portfolio:t,network:n,account:o,hidePrivateValue:f.hidePrivateValue,userSorting:m,setUserSorting:h}):Object(l.jsx)(_,{portfolio:t,isPrivateMode:f.isPrivateMode})}),Object(l.jsx)("div",{className:"footer",children:Object(l.jsxs)("div",{id:"missing-token-notice",children:[Object(l.jsx)(j.M,{}),Object(l.jsxs)("span",{children:["If you don't see a specific token that you own, please check the ",Object(l.jsx)("a",{href:"".concat(n.explorerUrl,"/address/").concat(o),target:"_blank",rel:"noreferrer",children:"Block Explorer"})]})]})})]})]})}},187:function(e,t,n){"use strict";n.r(t);t.default=function(e,t){}},592:function(e,t,n){(function(t){var r=n(608).BN;function a(e){if("string"!==typeof e||42!==e.length||!e.startsWith("0x"))throw new Error("invalid address: must start with a 0x and be 42 characters long");return e}function s(e){if("string"===typeof e&&e.startsWith("0x")&&66===e.length)return t.from(e.slice(2),"hex");if(32!==e.length||!t.isBuffer(e))throw new Error("32 byte Buffer expected");return e}e.exports={Uint256:function(e){var t=new r(e,10);if(t.isNeg())throw new Error("uint256 expected, negative number given");return t},Bytes32:s,Address:a,Bytes:function(e){if("string"===typeof e&&e.startsWith("0x"))return t.from(e.slice(2),"hex");if(!t.isBuffer(e))throw new Error("Buffer expected");return e},Bytes32Array:function(e,t){return(-1===t||void 0===t||e.length===t)&&e.map((function(e){return s(e)}))},Channel:function(e){return a(e.leader),a(e.follower),a(e.guardian),a(e.tokenAddr),s(e.nonce),e}}}).call(this,n(25).Buffer)},595:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r={"0xb468a1e5596cfbcdf561f21a10490d99b4bb7b68":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg/220px-Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg","0x88800092ff476844f74dc2fc427974bbee2794ae":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/ambire_logo_white_bg_250x250.png","0x47cd7e91c3cbaaf266369fe8518345fc4fc12935":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png","0xb6456b57f03352be48bf101b46c1752a0813491a":"https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/vaporwave-adex-2.png","0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c":"https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/ADX-loyalty%40256x256.png","0xec3b10ce9cabab5dbf49f946a623e294963fbb4e":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png","0xe9415e904143e42007865e6864f7f632bd054a08":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/Ambire_logo_250x250.png","0xade00c28244d5ce17d72e40330b1c318cd12b7c3":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/official-logos/Ambire-AdEx/Ambire_AdEx_Symbol_color_white_bg.png"},a="https://storage.googleapis.com/zapper-fi-assets/tokens";function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.toLowerCase(),s=e.toLowerCase();return r[n]||"".concat(a,"/").concat(s,"/").concat(n,".png")}},604:function(e,t,n){"use strict";function r(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18;if(isNaN(e)||isNaN(parseFloat(e))||"number"!==typeof e&&"string"!==typeof e)return e;try{var r=Math.min(2,n||0);return("number"===typeof e?e:parseFloat(e)).toLocaleString(void 0,{useGrouping:t,maximumFractionDigits:Math.max(r,n),minimumFractionDigits:r})}catch(a){return console.error(a),e}}n.d(t,"a",(function(){return r}))},605:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},611:function(e,t,n){},613:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return y}));var r=n(7),a=n(2),s=n.n(a),c=n(11),i=n(626),o=n(52),u=n(616),l=n(612),d=2147483648,f={startPath:[2147483692,2147483708,d,0,0],n:10},p=function(e){var t={name:"Ambire Wallet",crypto:l,privKey:e};return new i.Client(t)},b=function(){var e=Object(c.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){t.connect(n,(function(t,n){t?r("Lattice connect: ".concat(t," Or check if the DeviceID is correct.")):e({isPaired:!!n,errConnect:!1})}))})).catch((function(e){return console.error(e),{isPaired:!1,errConnect:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){t.pair(n,(function(t,n){t?r("Lattice connect: ".concat(t)):e({hasActiveWallet:n,errPair:!1})}))})).catch((function(e){return console.error(e),{hasActiveWallet:!1,errPair:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){t.getAddresses(f,(function(t,r){if(t)n("Lattice get addresses: ".concat(t));else{if(!r)throw new Error("Lattice could not get the addresses.");e({res:r,errGetAddresses:!1})}}))})).catch((function(e){return console.error(e),{res:null,errGetAddresses:e}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={protocol:"signPersonal",payload:o.ethers.utils.hexlify(n),signerPath:[2147483692,2147483708,d,0,0]},a={currency:"ETH_MSG",data:r},e.next=4,new Promise((function(e,n){t.sign(a,(function(t,r){if(t)n(t);else{if(!r)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+r.sig.r+r.sig.s+r.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={currency:"ETH_MSG",data:{signerPath:[2147483692,2147483708,d,0,0],protocol:"eip712",payload:n}},e.next=3,new Promise((function(e,n){t.sign(r,(function(t,r){if(t)n(t);else{if(!r)throw new Error("Lattice could not sign the message.");e({signedMsg:"0x"+r.sig.r+r.sig.s+r.sig.v[0].toString(16),errSignMessage:!1})}}))})).catch((function(e){return console.error(e),{signedMsg:null,errSignMessage:e}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(c.a)(s.a.mark((function e(t,n,a){var c,i,o,l,f,p,b,m,h,j;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.to,i=n.data,o=n.gas,l=n.gasPrice,f=n.nonce,p=n.value,b=void 0===p?0:p,delete(m=Object(r.a)(Object(r.a)({},n),{},{gasLimit:n.gasLimit||n.gas,chainId:a})).from,delete m.gas,h={nonce:f,gasLimit:o||n.gasLimit,gasPrice:l,to:c,value:b,data:i||"",signerPath:[2147483692,2147483708,d,0,0],chainId:a,useEIP155:!0},j={currency:"ETH",data:h},e.next=8,new Promise((function(e,n){t.sign(j,(function(t,r){if(t)n(t);else{if(!r)throw new Error("Lattice could not sign the message.");delete m.v;var a=Object(u.a)(m,{r:"0x"+r.sig.r,s:"0x"+r.sig.s,v:r.sig.v[0].toString(16)});e({serializedSigned:a,errSignTxn:!1})}}))})).catch((function(e){return console.error(e),{serializedSigned:null,errSignTxn:e}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},614:function(e,t,n){var r=n(603);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},615:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(2),a=n.n(r),s=n(11),c=n(7),i=n(651),o=n(670),u=n.n(o),l=n(52),d=n(606),f=n.n(d),p=n(662),b=n(684),m=n(620),h=n(613),j=n(21),g=n(70),y=n(60),v={};function x(e){var t=e.signer,n=e.signerExtra,r=e.chainId,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(t.address||t.one).concat(r);return v[s]?v[s]:v[s]=O({signer:t,signerExtra:n,chainId:r},a)}function O(e,t){var n=e.chainId,r=e.signer,o=e.signerExtra;if(o&&"trezor"===o.type){var d=new i.TrezorSubprovider({trezorConnectClientApi:u.a,networkId:n});return d._initialDerivedKeyInfo=function(e){return{hdKey:f.a.fromExtendedKey(e.info.hdKey.xpub),derivationPath:e.info.derivationPath,baseDerivationPath:e.info.baseDerivationPath}}(o),{signMessage:function(e){return d.signPersonalMessageAsync(l.ethers.utils.hexlify(e),r.address)},signTransaction:function(e){return d.signTransactionAsync(Object(c.a)(Object(c.a)({},e),{},{from:r.address}))},sendTransaction:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.a.find((function(e){return e.chainId===t.chainId}))){e.next=3;break}throw Error("no network found for chainId : "+t.chainId);case 3:return e.next=5,Object(g.a)(n.id);case 5:if(r=e.sent){e.next=8;break}throw Error("no provider found for network : "+n.id);case 8:return e.t0=l.ethers.utils,e.next=11,r.getTransactionCount(t.from);case 11:return e.t1=e.sent,t.nonce=e.t0.hexlify.call(e.t0,e.t1),s=l.ethers.utils.hexlify(t.gas||t.gasLimit),t.gasPrice=l.ethers.utils.hexlify(t.gasPrice),t=Object(c.a)(Object(c.a)({},t),{},{gas:s}),e.next=18,d.signTransactionAsync(t);case 18:return i=e.sent,e.abrupt("return",r.sendTransaction(i));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getAccountsAsync(100);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return e.toLowerCase()})).includes(t.toLowerCase()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_signTypedData:function(){var e=Object(s.a)(a.a.mark((function e(t,n,s){var c,i,o,u,l,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=j._TypedDataEncoder.hashDomain(t),i=j._TypedDataEncoder.hashStruct(j._TypedDataEncoder.getPrimaryType(n),n,s),o=j._TypedDataEncoder.getPayload(t,n,s),e.next=5,d._initialDerivedKeyInfoAsync();case 5:return u=e.sent,l=d._findDerivedKeyInfoForAddress(u,r.address),f=l.derivationPath,e.next=10,d._trezorConnectClientApi.ethereumSignTypedData({path:f,data:o,metamask_v4_compat:!0,domain_separator_hash:c,message_hash:i});case 10:if(!(p=e.sent).success){e.next=15;break}return e.abrupt("return","".concat(p.payload.signature));case 15:throw new Error(p.payload.error);case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}}if(o&&"ledger"===o.type){if("webHID"===o.transportProtocol)return{signMessage:function(e){return Object(m.c)(l.ethers.utils.hexlify(e),r.address)},signTransaction:function(e){return Object(m.e)(e,n)},sendTransaction:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.a.find((function(e){return e.chainId===t.chainId}))){e.next=3;break}throw Error("no network found for chainId : "+t.chainId);case 3:return e.next=5,Object(g.a)(n.id);case 5:if(r=e.sent){e.next=8;break}throw Error("no provider found for network : "+n.id);case 8:return e.t0=l.ethers.utils,e.next=11,r.getTransactionCount(t.from);case 11:return e.t1=e.sent,t.nonce=e.t0.hexlify.call(e.t0,e.t1),e.next=15,Object(m.e)(t,t.chainId);case 15:return s=e.sent,e.abrupt("return",r.sendTransaction(s));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.b)();case 2:if(!(n=e.sent)||!n[0]){e.next=7;break}if(!t){e.next=6;break}return e.abrupt("return",!!n.find((function(e){return e.toLowerCase()===t.toLowerCase()})));case 6:return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_signTypedData:function(e,t,n){var a=j._TypedDataEncoder.hashDomain(e),s=j._TypedDataEncoder.hashStruct(j._TypedDataEncoder.getPrimaryType(t),t,n);return Object(m.d)(a,s,r.address)}};var v=new p.LedgerSubprovider({networkId:n,ledgerEthereumClientFactoryAsync:b.ledgerEthereumBrowserClientFactoryAsync,baseDerivationPath:o.info.baseDerivationPath});return{signMessage:function(e){return v.signPersonalMessageAsync(l.ethers.utils.hexlify(e),r.address)},signTransaction:function(e){return v.signTransactionAsync(Object(c.a)(Object(c.a)({},e),{},{from:r.address}))},sendTransaction:function(){var e=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw Error("Please use a chrome based browser to use Ledger");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getAccountsAsync(1);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return e.toLowerCase()})).includes(t.toLowerCase()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_signTypedData:function(e,t,n){throw Error("Please, use a chrome based browser to use 721 Typed signatures")}}}if(o&&"Lattice"===o.type)return{signMessage:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,c,i,u,l,d,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.commKey,r=o.deviceId,s=Object(h.c)(n),e.next=4,Object(h.a)(s,r);case 4:if(c=e.sent,i=c.isPaired,!(u=c.errConnect)){e.next=9;break}throw new Error(u.message||u);case 9:if(i){e.next=12;break}throw s.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 12:return e.next=14,Object(h.e)(s,t);case 14:if(l=e.sent,d=l.signedMsg,!(f=l.errSignMessage)){e.next=19;break}throw new Error(f);case 19:return e.abrupt("return",d);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signTransaction:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(s.a)(a.a.mark((function e(t){var r,s,c,i,u,l,d,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.commKey,s=o.deviceId,c=Object(h.c)(r),e.next=4,Object(h.a)(c,s);case 4:if(i=e.sent,u=i.isPaired,!(l=i.errConnect)){e.next=9;break}throw new Error(l.message||l);case 9:if(u){e.next=12;break}throw c.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 12:return e.next=14,Object(h.g)(c,t,n);case 14:if(d=e.sent,f=d.serializedSigned,!(p=d.errSignTxn)){e.next=19;break}throw new Error(p);case 19:return e.abrupt("return",f);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendTransaction:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(s.a)(a.a.mark((function e(t){var r,s,c,i,u,d,f,p,b,m,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.a.find((function(e){return e.chainId===t.chainId}))){e.next=3;break}throw Error("no network found for chainId : "+t.chainId);case 3:return e.next=5,Object(g.a)(r.id);case 5:if(s=e.sent){e.next=8;break}throw Error("no provider found for network : "+r.id);case 8:return e.t0=l.ethers.utils,e.next=11,s.getTransactionCount(t.from);case 11:return e.t1=e.sent,t.nonce=e.t0.hexlify.call(e.t0,e.t1),c=o.commKey,i=o.deviceId,u=Object(h.c)(c),e.next=17,Object(h.a)(u,i);case 17:if(d=e.sent,f=d.isPaired,!(p=d.errConnect)){e.next=22;break}throw new Error(p.message||p);case 22:if(f){e.next=25;break}throw u.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 25:return e.next=27,Object(h.g)(u,t,n);case 27:if(b=e.sent,m=b.serializedSigned,!(j=b.errSignTxn)){e.next=32;break}throw new Error(j);case 32:return e.abrupt("return",s.sendTransaction(m));case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isConnected:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,c,i,u,l,d,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,r=o.commKey,s=o.deviceId,c=Object(h.c)(r),e.next=5,Object(h.a)(c,s);case 5:if(i=e.sent,u=i.isPaired,!(l=i.errConnect)){e.next=10;break}throw new Error(l.message||l);case 10:if(u){e.next=13;break}throw c.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 13:return e.next=15,Object(h.b)(c);case 15:if(d=e.sent,f=d.res,!(p=d.errGetAddresses)){e.next=20;break}throw new Error("Lattice: ".concat(p),{error:!0});case 20:return n=f,e.abrupt("return",n.map((function(e){return e.toLowerCase()})).includes(t.toLowerCase()));case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_signTypedData:function(){var e=Object(s.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(function(){var e=Object(s.a)(a.a.mark((function e(t,n,r){var s,c,i,u,l,d,f,p,b,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=j._TypedDataEncoder.getPayload(t,n,r),c=o.commKey,i=o.deviceId,u=Object(h.c)(c),e.next=5,Object(h.a)(u,i);case 5:if(l=e.sent,d=l.isPaired,!(f=l.errConnect)){e.next=10;break}throw new Error(f.message||f);case 10:if(d){e.next=13;break}throw u.pair(""),new Error("The Lattice device is not paired! Please re-add your account!");case 13:return e.next=15,Object(h.f)(u,s);case 15:if(p=e.sent,b=p.signedMsg,!(m=p.errSignMessage)){e.next=20;break}throw new Error(m);case 20:return e.abrupt("return",b);case 21:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[t,n,r]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()};if(r.address){if(!window.ethereum)throw new Error("No web3 support detected in your browser: if you created this account through MetaMask, please install it.");var x=new l.ethers.providers.Web3Provider(window.ethereum,"any"),O=x.getSigner(r.address);return O.isConnected=function(){var e=Object(s.a)(a.a.mark((function e(t,n){var r,s,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.listAccounts();case 2:if(r=e.sent,s=!0,!r.length){e.next=14;break}if(t&&(s=!!r.find((function(e){return e.toLowerCase()===t.toLowerCase()}))),!n){e.next=12;break}return e.next=9,x.getNetwork();case 9:c=e.sent,i=c.chainId,s=s&&i===n;case 12:e.next=15;break;case 14:s=!1;case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O}throw r.one?new Error("getWallet not applicable for QuickAccounts: use primaryKeyBackup with the passphrase and /second-sig"):new Error("unknown signer type")}function w(e,t){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.apply(this,n).catch((function(e){throw new Error("Lattice: ".concat(e.message))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},620:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return O})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return N}));var r=n(7),a=n(2),s=n.n(a),c=n(11),i=n(690),o=n(691),u=n(616),l=n(232),d=n(606),f=null,p="44'/60'/0'/0";function b(){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.list();case 2:if(!(f=e.sent).length){e.next=11;break}if(!f[0].opened){e.next=8;break}return e.abrupt("return",new i.a(f[0]));case 8:return e.abrupt("return",i.a.open(f[0]));case 9:e.next=22;break;case 11:return e.prev=11,e.next=14,i.a.request();case 14:return e.abrupt("return",e.sent);case 17:if(e.prev=17,e.t0=e.catch(11),!e.t0.message.includes("reading 'open'")){e.next=21;break}throw new Error("ledger WebHID request denied");case 21:throw new Error("Could not request WebHID ledger: "+e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[11,17]])})))).apply(this,arguments)}function h(){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return t=e.sent,e.next=5,g(t);case 5:return n=e.sent,t.close(),e.abrupt("return",n.map((function(e){return e.address})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return(y=Object(c.a)(s.a.mark((function t(n){var r,a,c,i,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="m/".concat(p),t.next=3,v(n,r).then((function(e){return e})).catch((function(e){throw 25871===e.statusCode||27404===e.statusCode?Error("Please make sure your ledger is unlocked and running the Ethereum app. "+e.message):Error("Could not get address from ledger : "+e)}));case 3:return a=t.sent,(c=new d).publicKey=e.from(a.publicKey,"hex"),c.chainCode=e.from(a.chainCode,"hex"),i=A(c),o={hdKey:c,address:i,derivationPath:r,baseDerivationPath:p},t.abrupt("return",C(o,1));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(e,t){return x.apply(this,arguments)}function x(){return(x=Object(c.a)(s.a.mark((function e(t,n){var r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new o.a(t),c=new Promise((function(e,t){r=setTimeout((function(){return t(new Error("Device took too long to respond..."))}),1e4)})),e.abrupt("return",Promise.race([a.getAddress(n,!1,!0),c]).then((function(e){return clearTimeout(r),e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t){return w.apply(this,arguments)}function w(){return(w=Object(c.a)(s.a.mark((function e(t,n){var a,c,i,l,d,f,p,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return a=e.sent,c=t.from,delete(i=Object(r.a)(Object(r.a)({},t),{},{gasLimit:t.gasLimit||t.gas,chainId:n})).from,delete i.gas,l=Object(u.a)(i),e.next=10,g(a);case 10:if(d=e.sent,d[0].address.toLowerCase()!==c.toLowerCase()){e.next=30;break}return e.prev=13,e.next=16,new o.a(a).signTransaction(d[0].derivationPath,l.substr(2));case 16:p=e.sent,e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(13),new Error("Could not sign transaction "+e.t0);case 22:if(m=parseInt(p.v,16),Math.floor((m-35)/2)===n){e.next=26;break}throw new Error("Invalid returned V 0x"+p.v);case 26:delete i.v,f=Object(u.a)(i,{r:"0x"+p.r,s:"0x"+p.s,v:m}),e.next=31;break;case 30:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 31:return a.close(),e.abrupt("return",f);case 33:case"end":return e.stop()}}),e,null,[[13,19]])})))).apply(this,arguments)}function k(e,t){return T.apply(this,arguments)}function T(){return(T=Object(c.a)(s.a.mark((function e(t,n){var r,a,c,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return r=e.sent,e.next=5,g(r);case 5:if(a=e.sent,(c=a[0]).address.toLowerCase()!==n.toLowerCase()){e.next=20;break}return e.prev=8,e.next=11,new o.a(r).signPersonalMessage(c.derivationPath,t.substr(2));case 11:u=e.sent,i="0x"+u.r+u.s+u.v.toString(16),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(8),new Error("Signature denied "+e.t0.message);case 18:e.next=21;break;case 20:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 21:return r.close(),e.abrupt("return",i);case 23:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}function N(e,t,n){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(s.a.mark((function e(t,n,r){var a,c,i,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return a=e.sent,e.next=5,g(a);case 5:if(c=e.sent,(i=c[0]).address.toLowerCase()!==r.toLowerCase()){e.next=20;break}return e.prev=8,e.next=11,new o.a(a).signEIP712HashedMessage(i.derivationPath,t,n);case 11:l=e.sent,u="0x"+l.r+l.s+l.v.toString(16),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(8),new Error("Signature denied "+e.t0.message);case 18:e.next=21;break;case 20:throw new Error("Incorrect address. Are you using the correct account/ledger?");case 21:return a.close(),e.abrupt("return",u);case 23:case"end":return e.stop()}}),e,null,[[8,15]])})))).apply(this,arguments)}function C(e,t){for(var n=[],r=0;r<t;r++){var a="m/".concat(e.baseDerivationPath,"/").concat(r),s="m/".concat(r),c=e.hdKey.derive(s),i={address:A(c),hdKey:c,baseDerivationPath:e.baseDerivationPath,derivationPath:a};n.push(i)}return n}function A(e){var t=e.publicKey,n=l.publicToAddress(t,!0).toString("hex");return l.addHexPrefix(n).toLowerCase()}}).call(this,n(25).Buffer)},628:function(e,t,n){var r=n(358),a=n(2),s=n(185),c=n(52).utils,i=c.AbiCoder,o=c.hexlify,u=c.arrayify,l=c.keccak256,d=c.Interface,f=n(52),p=f.Contract,b=f.BigNumber,m=n(592),h=n(360),j=n(647),g=new d(h);function y(e){return this.identity=m.Address(e.identity),this.network=e.network,this.signer=e.signer,this.txns=e.txns,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.signature=e.signature,this.minFeeInUSDPerGas=e.minFeeInUSDPerGas,this.recoveryMode=e.recoveryMode,this.meta=e.meta,this.gasTankFee=e.gasTankFee,this}y.prototype.getNonce=function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t,this);case 2:return this.nonce=e.sent,e.abrupt("return",this.nonce);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),y.prototype.estimate=function(){var e=s(a.mark((function e(t){var n,s,c,i,o,u,l;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetch,s=t.relayerURL,c=t.replacing,i=t.getNextNonce,o=t.gasTank,u=Object.fromEntries(Object.entries({getNextNonce:i,gasTank:o}).filter((function(e){var t=r(e,2);t[0];return t[1]}))),e.next=4,P(n,"".concat(s,"/identity/").concat(this.identity,"/").concat(this.network,"/estimate?").concat(new URLSearchParams(u).toString()),{txns:this.txns,signer:this.signer,replacing:c,minFeeInUSDPerGas:this.minFeeInUSDPerGas});case 4:return l=e.sent,this.gasLimit=l.gasLimit,e.abrupt("return",l);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),y.prototype.sign=function(){var e=s(a.mark((function e(t,n){var r,s,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNaN(this.nonce)){e.next=2;break}throw new Error("nonce is not set");case 2:if(!isNaN(this.gasLimit)){e.next=4;break}throw new Error("gasLimit is not set");case 4:return r=w(this,n),s=u(l(r)),e.next=8,N(t,s);case 8:return c=e.sent,this.signature=c,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),y.prototype.submit=function(){var e=s(a.mark((function e(t){var n,r,s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetch,r=t.relayerURL,e.next=3,P(n,"".concat(r,"/identity/").concat(this.identity,"/").concat(this.network,"/submit"),{nonce:this.nonce,signer:this.signer,txns:this.txns,gasLimit:this.gasLimit,signature:this.signature,signatureTwo:this.signatureTwo,meta:this.meta,gasTankFee:this.gasTankFee});case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),y.prototype.cancel=function(){var e=s(a.mark((function e(t){var n,r,s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetch,r=t.relayerURL,e.next=3,P(n,"".concat(r,"/identity/").concat(this.identity,"/").concat(this.network,"/cancel"),{nonce:this.nonce,signer:this.signer});case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();var v=/gas required exceeds allowance|always failing transaction|execution reverted/;function x(){return(x=s(a.mark((function e(t,n,r,s,c){var o,u,l,d;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.address){e.next=2;break}return e.abrupt("return",N(t,s,!0));case 2:if(!r.quickAccManager){e.next=10;break}return e.next=5,N(t,s,!0);case 5:return o=e.sent,u=new i,l=u.encode(["uint","bytes","bytes"],[r.timelock,o,c]),d="".concat(l+u.encode(["address"],[r.quickAccManager]).slice(2),"02"),e.abrupt("return",d);case 10:throw new Error("invalid signer object");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=s(a.mark((function e(t,n,r,s,c,o,u){var l,d,f,p;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.address){e.next=2;break}return e.abrupt("return",C(t,s,c,o));case 2:if(!r.quickAccManager){e.next=10;break}return e.next=5,C(t,s,c,o);case 5:return l=e.sent,d=new i,f=d.encode(["uint","bytes","bytes"],[r.timelock,l,u]),p="".concat(f+d.encode(["address"],[r.quickAccManager]).slice(2),"02"),e.abrupt("return",p);case 10:throw new Error("invalid signer object");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){var n=new i,r=e.signer;if(r.address)return n.encode(["address","uint","uint","tuple(address, uint, bytes)[]"],[e.identity,k(e.network),e.nonce,e.txns]);if(r.quickAccManager){var a=l(n.encode(["tuple(uint, address, address)"],[[e.signer.timelock,e.signer.one,e.signer.two]]));return n.encode(["address","uint","address","bytes32","uint","tuple(address, uint, bytes)[]","bool"],[r.quickAccManager,k(e.network),e.identity,a,e.nonce,e.txns,!t])}throw new Error("invalid signer object")}function k(e){if("ethereum"===e)return 1;if("polygon"===e)return 137;if("binance-smart-chain"===e)return 56;if("bsc"===e)return 56;if("fantom"===e)return 250;if("avalanche"===e)return 43114;if("arbitrum"===e)return 42161;if("moonbeam"===e)return 1284;if("moonriver"===e)return 1285;if("gnosis"===e)return 100;if("kucoin"===e)return 321;if("andromeda"===e)return 1088;if("cronos"===e)return 25;if("aurora"===e)return 1313161554;if("rinkeby"===e)return 4;if("optimism"===e)return 10;throw new Error("unsupported network ".concat(e))}function T(e){var t=u(e);return t[64]<27&&(t[64]+=27),o(t)}function N(e,t){return S.apply(this,arguments)}function S(){return S=s(a.mark((function e(t,n){var r,s=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],e.t0="",e.t1=T,e.next=5,t.signMessage(n);case 5:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.abrupt("return",e.t0.concat.call(e.t0,e.t3).concat(r?"00":"01"));case 8:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function C(e,t,n,r){return A.apply(this,arguments)}function A(){return(A=s(a.mark((function e(t,n,r,s){var c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._signTypedData(n,r,s);case 2:return c=e.sent,e.abrupt("return","".concat(T(c),"00"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return M.apply(this,arguments)}function M(){return(M=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n.signer.quickAccManager){e.next=7;break}return e.next=4,new p(n.signer.quickAccManager,j,t).nonces(n.identity);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,new p(n.identity,h,t).nonce();case 9:e.t0=e.sent;case 10:return e.abrupt("return",e.t0.toNumber());case 13:if(e.prev=13,e.t1=e.catch(0),e.t2="CALL_EXCEPTION"===e.t1.code,!e.t2){e.next=21;break}return e.next=19,t.getCode(n.identity);case 19:e.t3=e.sent,e.t2="0x"===e.t3;case 21:if(!e.t2){e.next=23;break}return e.abrupt("return",0);case 23:throw e.t1;case 24:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function P(e,t,n){return I.apply(this,arguments)}function I(){return(I=s(a.mark((function e(t,n,r){var s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n,{headers:{"content-type":"application/json"},method:"POST",body:JSON.stringify(r)});case 2:return s=e.sent,e.abrupt("return",s.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}y.prototype.estimateNoRelayer=function(){var e=s(a.mark((function e(t){var n,r,s,c,i,o,u,l,d,f,p;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.provider,r=t.replacing,s={from:this.signer.quickAccManager||this.signer.address,to:this.identity,data:g.encodeFunctionData("executeBySender",[this.txns])},c=r?"latest":"pending",e.next=5,B(n,c,s);case 5:if(i=e.sent,o=i.error,u=i.gasLimit,!o||!o.message.startsWith("execution reverted: ")){e.next=11;break}return l=o.message.slice(20),e.abrupt("return",{success:!1,message:l});case 11:if(!o){e.next=18;break}if("UNPREDICTABLE_GAS_LIMIT"===o.code||o.message.match(v)){e.next=14;break}throw o;case 14:return e.next=16,D(n,s,c);case 16:return e.t0=e.sent,e.abrupt("return",{success:!1,message:e.t0});case 18:return this.gasLimit=u.toNumber(),e.next=21,n.getFeeData();case 21:return d=e.sent,f=d.gasPrice.toNumber(),p=f*u/1e18,e.abrupt("return",{success:!0,gasLimit:this.gasLimit,gasPrice:f,feeInNative:{slow:.9*p,medium:1*p,fast:1.15*p,ape:1.4*p}});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();var L="0x08c379a0";function D(e,t,n){return F.apply(this,arguments)}function F(){return(F=s(a.mark((function e(t,n,r){var s;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.call(n,r);case 3:return s=e.sent,e.abrupt("return",s.startsWith(L)?(new i).decode(["string"],"0x".concat(s.slice(10)))[0]:s);case 7:if(e.prev=7,e.t0=e.catch(0),"UNPREDICTABLE_GAS_LIMIT"!==e.t0.code||!e.t0.error){e.next=11;break}return e.abrupt("return",e.t0.error.message.slice(20));case 11:if("CALL_EXCEPTION"!==e.t0.code){e.next=13;break}return e.abrupt("return","no error string, possibly insufficient amount");case 13:if("INVALID_ARGUMENT"!==e.t0.code){e.next=15;break}return e.abrupt("return","unable to deserialize: ".concat(o(e.t0.value)));case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function B(e,t,n){return _.apply(this,arguments)}function _(){return(_=s(a.mark((function e(t,n,r){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.send("eth_estimateGas",[r,n]).then((function(e){return{gasLimit:b.from(e)}})).catch((function(e){return"SERVER_ERROR"===e.code?{error:e.error}:{error:e}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.exports={Bundle:y,signMessage:function(e,t,n,r,a){return x.apply(this,arguments)},signMessage712:function(e,t,n,r,a,s,c){return O.apply(this,arguments)},getSignable:w,signMsg:N,signMsg712:C}},640:function(e,t,n){var r=n(614),a=n(641),s=n(642),c=n(643),i=n(644),o=n(645),u=n(646),l=n(628);e.exports=r(r(r(r(r(r({},a),s),o),u),l),{},{MerkleTree:c,splitSig:i})},641:function(e,t,n){(function(t){var r=n(619),a=n(86).keccak256,s=n(592);function c(e){return this.leader=s.Address(e.leader),this.follower=s.Address(e.follower),this.guardian=s.Address(e.guardian),this.tokenAddr=s.Address(e.tokenAddr),this.nonce=s.Bytes32(e.nonce),Object.freeze(this),this}c.prototype.hash=function(){return t.from(a.arrayBuffer(r.rawEncode(["address","address","address","address","bytes32"],[this.leader,this.follower,this.guardian,this.tokenAddr,this.nonce])))},c.prototype.hashHex=function(){return"0x".concat(this.hash().toString("hex"))},c.prototype.toSolidityTuple=function(){return[this.leader,this.follower,this.guardian,this.tokenAddr,this.nonce]},c.prototype.hashToSign=function(e,t){return c.getSignableStateRoot(e,this.hashHex(),t)},c.prototype.hashToSignHex=function(e,t){return"0x".concat(this.hashToSign(e,t).toString("hex"))},c.prototype.getResumeSignableMessage=function(e){return t.from(a.arrayBuffer(r.solidityPack(["string","bytes32","uint256"],["resume",this.hashHex(),e])))},c.prototype.getResumeSignableMessageHex=function(e){return"0x".concat(this.getResumeSignableMessage(e).toString("hex"))},c.getSignableStateRoot=function(e,n,s){return t.from(a.arrayBuffer(r.rawEncode(["address","bytes32","bytes32"],[e,n,s])))},c.getBalanceLeaf=function(e,n){return t.from(a.arrayBuffer(r.rawEncode(["address","uint256"],[e,n])))},c.getSpenderBalanceLeaf=function(e,n){return t.from(a.arrayBuffer(r.rawEncode(["address","string","uint256"],[e,"spender",n])))},e.exports={Channel:c,ChannelState:{Challenged:"115792089237316195423570985008687907853269984665640564039457584007913129639935",Active:"0"}}}).call(this,n(25).Buffer)},642:function(e,t,n){var r=n(592);function a(e){return this.channel=e.channel,this.balanceTreeAmount=r.Uint256(e.balanceTreeAmount),this.stateRoot=r.Bytes32(e.stateRoot),this.sigLeader=r.Bytes32Array(e.sigLeader,3),this.sigFollower=r.Bytes32Array(e.sigFollower,3),this.proof=r.Bytes32Array(e.proof,-1),Object.freeze(this),this}a.prototype.toSolidityTuple=function(){return[this.channel.toSolidityTuple(),"0x".concat(this.balanceTreeAmount.toString(16)),this.stateRoot,this.sigLeader,this.sigFollower,this.proof]},e.exports={Withdraw:a}},643:function(e,t,n){var r=n(78),a=n(133),s=n(25).Buffer,c=n(86).keccak256;function i(e,t){if(!t)return e;if(!e)return t;var n=s.concat([e,t].sort(s.compare));return s.from(c.arrayBuffer(n))}function o(e){if(0===e.length)return[[s.from("")]];var t=[];for(t.push(e);t[t.length-1].length>1;)t.push(u(t[t.length-1]));return t}function u(e){return e.reduce((function(e,t,n,r){return n%2===0&&e.push(i(t,r[n+1])),e}),[])}var l=function(){"use strict";function e(t){if(r(this,e),!t.every((function(e){return 32===e.length&&s.isBuffer(e)})))throw new Error("elements must be 32 byte buffers");var n,a={elements:(n=t,n.filter((function(e,t){return n.findIndex((function(t){return t.equals(e)}))===t})))};Object.assign(this,a),this.elements.sort(s.compare);var c={layers:o(this.elements)};Object.assign(this,c)}return a(e,[{key:"getRoot",value:function(){if(!this.root){var e={root:this.layers[this.layers.length-1][0]};Object.assign(this,e)}return this.root}},{key:"verify",value:function(e,t){return this.getRoot().equals(e.reduce((function(e,t){return i(e,t)}),t))}},{key:"proof",value:function(e){var t=this.elements.findIndex((function(t){return t.equals(e)}));if(-1===t)throw new Error("element not found in merkle tree");return this.layers.reduce((function(e,n){var r=function(e,t){var n=e%2?e-1:e+1;return n<t.length?t[n]:null}(t,n);return r&&e.push(r),t=Math.floor(t/2),e}),[])}}]),e}();e.exports=l},644:function(e,t){e.exports=function(e){var t=e.startsWith("0x")?e.slice(2):e,n="0x".concat(t.substring(0,64)),r="0x".concat(t.substring(64,128)),a=parseInt(t.substring(128,130),16);return a<27&&(a+=27),["0x02".concat(a.toString(16),"000000000000000000000000000000000000000000000000000000000000"),n,r]}},645:function(e,t,n){(function(t){var r=n(619),a=n(86).keccak256,s=n(592);function c(e){return this.owner=s.Address(e.owner),this.shares=s.Uint256(e.shares),this.unlocksAt=s.Uint256(e.unlocksAt),Object.freeze(this),this}c.prototype.hash=function(){var e=r.rawEncode(["address","uint256","uint256"],[this.owner,this.shares,this.unlocksAt]);return t.from(a.arrayBuffer(e))},c.prototype.hashHex=function(){return"0x".concat(this.hash().toString("hex"))},e.exports={UnbondCommitment:c}}).call(this,n(25).Buffer)},646:function(e,t,n){var r=n(52).utils,a=r.keccak256,s=r.defaultAbiCoder,c=r.toUtf8Bytes,i=r.solidityPack,o=a(c("Permit(address owner,address spender,uint256 value,uint256 nonce,uint256 deadline)"));function u(e,t,n){return a(s.encode(["bytes32","bytes32","bytes32","uint256","address"],[a(c("EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)")),a(c(e)),a(c("1")),n,t]))}e.exports={getDomainSeparator:u,getApprovalDigest:function(e,t,n,r){var c=u(e.name,e.address,e.chainId);return a(i(["bytes1","bytes1","bytes32","bytes32"],["0x19","0x01",c,a(s.encode(["bytes32","address","address","uint256","uint256","uint256"],[o,t.owner,t.spender,t.value,n,r]))]))}}},647:function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"txnHash","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"accHash","type":"bytes32"},{"indexed":true,"internalType":"address","name":"signer","type":"address"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"}],"name":"LogCancelled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"txnHash","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"accHash","type":"bytes32"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"}],"name":"LogExecScheduled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"txnHash","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"accHash","type":"bytes32"},{"indexed":true,"internalType":"address","name":"signer","type":"address"},{"indexed":false,"internalType":"uint256","name":"nonce","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"},{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"indexed":false,"internalType":"struct Identity.Transaction[]","name":"txns","type":"tuple[]"}],"name":"LogScheduled","type":"event"},{"inputs":[],"name":"DOMAIN_SEPARATOR","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"contract Identity","name":"identity","type":"address"},{"components":[{"internalType":"uint256","name":"timelock","type":"uint256"},{"internalType":"address","name":"one","type":"address"},{"internalType":"address","name":"two","type":"address"}],"internalType":"struct QuickAccManager.QuickAccount","name":"acc","type":"tuple"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"internalType":"bytes","name":"sig","type":"bytes"},{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"internalType":"struct Identity.Transaction[]","name":"txns","type":"tuple[]"}],"name":"cancel","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract Identity","name":"identity","type":"address"},{"internalType":"bytes32","name":"accHash","type":"bytes32"},{"internalType":"uint256","name":"nonce","type":"uint256"},{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"internalType":"struct Identity.Transaction[]","name":"txns","type":"tuple[]"}],"name":"execScheduled","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"hash","type":"bytes32"},{"internalType":"bytes","name":"signature","type":"bytes"}],"name":"isValidSignature","outputs":[{"internalType":"bytes4","name":"","type":"bytes4"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"scheduled","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"contract Identity","name":"identity","type":"address"},{"components":[{"internalType":"uint256","name":"timelock","type":"uint256"},{"internalType":"address","name":"one","type":"address"},{"internalType":"address","name":"two","type":"address"}],"internalType":"struct QuickAccManager.QuickAccount","name":"acc","type":"tuple"},{"components":[{"internalType":"bool","name":"isBothSigned","type":"bool"},{"internalType":"bytes","name":"one","type":"bytes"},{"internalType":"bytes","name":"two","type":"bytes"}],"internalType":"struct QuickAccManager.DualSig","name":"sigs","type":"tuple"},{"components":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"internalType":"struct Identity.Transaction[]","name":"txns","type":"tuple[]"}],"name":"send","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract Identity","name":"identity","type":"address"},{"components":[{"internalType":"uint256","name":"timelock","type":"uint256"},{"internalType":"address","name":"one","type":"address"},{"internalType":"address","name":"two","type":"address"}],"internalType":"struct QuickAccManager.QuickAccount","name":"acc","type":"tuple"},{"components":[{"internalType":"bytes","name":"one","type":"bytes"},{"internalType":"bytes","name":"two","type":"bytes"}],"internalType":"struct QuickAccManager.DualSigAlwaysBoth","name":"sigs","type":"tuple"},{"components":[{"internalType":"address","name":"token","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"fee","type":"uint256"}],"internalType":"struct QuickAccManager.Transfer","name":"t","type":"tuple"}],"name":"sendTransfer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract Identity","name":"identity","type":"address"},{"components":[{"internalType":"uint256","name":"timelock","type":"uint256"},{"internalType":"address","name":"one","type":"address"},{"internalType":"address","name":"two","type":"address"}],"internalType":"struct QuickAccManager.QuickAccount","name":"acc","type":"tuple"},{"components":[{"internalType":"bytes","name":"one","type":"bytes"},{"internalType":"bytes","name":"two","type":"bytes"}],"internalType":"struct QuickAccManager.DualSigAlwaysBoth","name":"sigs","type":"tuple"},{"components":[{"internalType":"string","name":"description","type":"string"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"internalType":"struct QuickAccManager.Txn[]","name":"txns","type":"tuple[]"}],"name":"sendTxns","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},648:function(e,t,n){var r;!function(a){"use strict";var s,c=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,u="[BigNumber Error] ",l=u+"Number primitive has more than 15 significant digits: ",d=1e14,f=14,p=9007199254740991,b=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,h=1e9;function j(e){var t=0|e;return e>0||e===t?t:t-1}function g(e){for(var t,n,r=1,a=e.length,s=e[0]+"";r<a;){for(t=e[r++]+"",n=f-t.length;n--;t="0"+t);s+=t}for(a=s.length;48===s.charCodeAt(--a););return s.slice(0,a+1||1)}function y(e,t){var n,r,a=e.c,s=t.c,c=e.s,i=t.s,o=e.e,u=t.e;if(!c||!i)return null;if(n=a&&!a[0],r=s&&!s[0],n||r)return n?r?0:-i:c;if(c!=i)return c;if(n=c<0,r=o==u,!a||!s)return r?0:!a^n?1:-1;if(!r)return o>u^n?1:-1;for(i=(o=a.length)<(u=s.length)?o:u,c=0;c<i;c++)if(a[c]!=s[c])return a[c]>s[c]^n?1:-1;return o==u?0:o>u^n?1:-1}function v(e,t,n,r){if(e<t||e>n||e!==(e<0?i(e):o(e)))throw Error(u+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+e)}function x(e){return"[object Array]"==Object.prototype.toString.call(e)}function O(e){var t=e.c.length-1;return j(e.e/f)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function k(e,t,n){var r,a;if(t<0){for(a=n+".";++t;a+=n);e=a+e}else if(++t>(r=e.length)){for(a=n,t-=r;--t;a+=n);e+=a}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}s=function e(t){var n,r,a,s=B.prototype={constructor:B,toString:null,valueOf:null},T=new B(1),N=20,S=4,C=-7,A=21,E=-1e7,M=1e7,P=!1,I=1,L=0,D={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"\xa0",fractionGroupSize:0},F="0123456789abcdefghijklmnopqrstuvwxyz";function B(e,t){var n,s,i,u,d,b,m,h,j=this;if(!(j instanceof B))return new B(e,t);if(null==t){if(e instanceof B)return j.s=e.s,j.e=e.e,void(j.c=(e=e.c)?e.slice():e);if((b="number"==typeof e)&&0*e==0){if(j.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,d=e;d>=10;d/=10,u++);return j.e=u,void(j.c=[e])}h=e+""}else{if(!c.test(h=e+""))return a(j,h,b);j.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(u=h.indexOf("."))>-1&&(h=h.replace(".","")),(d=h.search(/e/i))>0?(u<0&&(u=d),u+=+h.slice(d+1),h=h.substring(0,d)):u<0&&(u=h.length)}else{if(v(t,2,F.length,"Base"),h=e+"",10==t)return H(j=new B(e instanceof B?e:h),N+j.e+1,S);if(b="number"==typeof e){if(0*e!=0)return a(j,h,b,t);if(j.s=1/e<0?(h=h.slice(1),-1):1,B.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(l+e);b=!1}else j.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(n=F.slice(0,t),u=d=0,m=h.length;d<m;d++)if(n.indexOf(s=h.charAt(d))<0){if("."==s){if(d>u){u=m;continue}}else if(!i&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){i=!0,d=-1,u=0;continue}return a(j,e+"",b,t)}(u=(h=r(h,t,10,j.s)).indexOf("."))>-1?h=h.replace(".",""):u=h.length}for(d=0;48===h.charCodeAt(d);d++);for(m=h.length;48===h.charCodeAt(--m););if(h=h.slice(d,++m)){if(m-=d,b&&B.DEBUG&&m>15&&(e>p||e!==o(e)))throw Error(l+j.s*e);if((u=u-d-1)>M)j.c=j.e=null;else if(u<E)j.c=[j.e=0];else{if(j.e=u,j.c=[],d=(u+1)%f,u<0&&(d+=f),d<m){for(d&&j.c.push(+h.slice(0,d)),m-=f;d<m;)j.c.push(+h.slice(d,d+=f));h=h.slice(d),d=f-h.length}else d-=m;for(;d--;h+="0");j.c.push(+h)}}else j.c=[j.e=0]}function _(e,t,n,r){var a,s,c,i,o;if(null==n?n=S:v(n,0,8),!e.c)return e.toString();if(a=e.c[0],c=e.e,null==t)o=g(e.c),o=1==r||2==r&&c<=C?w(o,c):k(o,c,"0");else if(s=(e=H(new B(e),t,n)).e,i=(o=g(e.c)).length,1==r||2==r&&(t<=s||s<=C)){for(;i<t;o+="0",i++);o=w(o,s)}else if(t-=c,o=k(o,s,"0"),s+1>i){if(--t>0)for(o+=".";t--;o+="0");}else if((t+=s-i)>0)for(s+1==i&&(o+=".");t--;o+="0");return e.s<0&&a?"-"+o:o}function R(e,t){var n,r,a=0;for(x(e[0])&&(e=e[0]),n=new B(e[0]);++a<e.length;){if(!(r=new B(e[a])).s){n=r;break}t.call(n,r)&&(n=r)}return n}function U(e,t,n){for(var r=1,a=t.length;!t[--a];t.pop());for(a=t[0];a>=10;a/=10,r++);return(n=r+n*f-1)>M?e.c=e.e=null:n<E?e.c=[e.e=0]:(e.e=n,e.c=t),e}function H(e,t,n,r){var a,s,c,u,l,p,m,h=e.c,j=b;if(h){e:{for(a=1,u=h[0];u>=10;u/=10,a++);if((s=t-a)<0)s+=f,c=t,m=(l=h[p=0])/j[a-c-1]%10|0;else if((p=i((s+1)/f))>=h.length){if(!r)break e;for(;h.length<=p;h.push(0));l=m=0,a=1,c=(s%=f)-f+1}else{for(l=u=h[p],a=1;u>=10;u/=10,a++);m=(c=(s%=f)-f+a)<0?0:l/j[a-c-1]%10|0}if(r=r||t<0||null!=h[p+1]||(c<0?l:l%j[a-c-1]),r=n<4?(m||r)&&(0==n||n==(e.s<0?3:2)):m>5||5==m&&(4==n||r||6==n&&(s>0?c>0?l/j[a-c]:0:h[p-1])%10&1||n==(e.s<0?8:7)),t<1||!h[0])return h.length=0,r?(t-=e.e+1,h[0]=j[(f-t%f)%f],e.e=-t||0):h[0]=e.e=0,e;if(0==s?(h.length=p,u=1,p--):(h.length=p+1,u=j[f-s],h[p]=c>0?o(l/j[a-c]%j[c])*u:0),r)for(;;){if(0==p){for(s=1,c=h[0];c>=10;c/=10,s++);for(c=h[0]+=u,u=1;c>=10;c/=10,u++);s!=u&&(e.e++,h[0]==d&&(h[0]=1));break}if(h[p]+=u,h[p]!=d)break;h[p--]=0,u=1}for(s=h.length;0===h[--s];h.pop());}e.e>M?e.c=e.e=null:e.e<E&&(e.c=[e.e=0])}return e}return B.clone=e,B.ROUND_UP=0,B.ROUND_DOWN=1,B.ROUND_CEIL=2,B.ROUND_FLOOR=3,B.ROUND_HALF_UP=4,B.ROUND_HALF_DOWN=5,B.ROUND_HALF_EVEN=6,B.ROUND_HALF_CEIL=7,B.ROUND_HALF_FLOOR=8,B.EUCLID=9,B.config=B.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(u+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(v(n=e[t],0,h,t),N=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(v(n=e[t],0,8,t),S=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&(x(n=e[t])?(v(n[0],-h,0,t),v(n[1],0,h,t),C=n[0],A=n[1]):(v(n,-h,h,t),C=-(A=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if(x(n=e[t]))v(n[0],-h,-1,t),v(n[1],1,h,t),E=n[0],M=n[1];else{if(v(n,-h,h,t),!n)throw Error(u+t+" cannot be zero: "+n);E=-(M=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(u+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw P=!n,Error(u+"crypto unavailable");P=n}else P=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(v(n=e[t],0,9,t),I=n),e.hasOwnProperty(t="POW_PRECISION")&&(v(n=e[t],0,h,t),L=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(u+t+" not an object: "+n);D=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.$|\.|(.).*\1/.test(n))throw Error(u+t+" invalid: "+n);F=n}}return{DECIMAL_PLACES:N,ROUNDING_MODE:S,EXPONENTIAL_AT:[C,A],RANGE:[E,M],CRYPTO:P,MODULO_MODE:I,POW_PRECISION:L,FORMAT:D,ALPHABET:F}},B.isBigNumber=function(e){return e instanceof B||e&&!0===e._isBigNumber||!1},B.maximum=B.max=function(){return R(arguments,s.lt)},B.minimum=B.min=function(){return R(arguments,s.gt)},B.random=function(){var e=9007199254740992,t=Math.random()*e&2097151?function(){return o(Math.random()*e)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var n,r,a,s,c,l=0,d=[],p=new B(T);if(null==e?e=N:v(e,0,h),s=i(e/f),P)if(crypto.getRandomValues){for(n=crypto.getRandomValues(new Uint32Array(s*=2));l<s;)(c=131072*n[l]+(n[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),n[l]=r[0],n[l+1]=r[1]):(d.push(c%1e14),l+=2);l=s/2}else{if(!crypto.randomBytes)throw P=!1,Error(u+"crypto unavailable");for(n=crypto.randomBytes(s*=7);l<s;)(c=281474976710656*(31&n[l])+1099511627776*n[l+1]+4294967296*n[l+2]+16777216*n[l+3]+(n[l+4]<<16)+(n[l+5]<<8)+n[l+6])>=9e15?crypto.randomBytes(7).copy(n,l):(d.push(c%1e14),l+=7);l=s/7}if(!P)for(;l<s;)(c=t())<9e15&&(d[l++]=c%1e14);for(s=d[--l],e%=f,s&&e&&(c=b[f-e],d[l]=o(s/c)*c);0===d[l];d.pop(),l--);if(l<0)d=[a=0];else{for(a=-1;0===d[0];d.splice(0,1),a-=f);for(l=1,c=d[0];c>=10;c/=10,l++);l<f&&(a-=f-l)}return p.e=a,p.c=d,p}}(),r=function(){var e="0123456789";function t(e,t,n,r){for(var a,s,c=[0],i=0,o=e.length;i<o;){for(s=c.length;s--;c[s]*=t);for(c[0]+=r.indexOf(e.charAt(i++)),a=0;a<c.length;a++)c[a]>n-1&&(null==c[a+1]&&(c[a+1]=0),c[a+1]+=c[a]/n|0,c[a]%=n)}return c.reverse()}return function(r,a,s,c,i){var o,u,l,d,f,p,b,m,h=r.indexOf("."),j=N,y=S;for(h>=0&&(d=L,L=0,r=r.replace(".",""),p=(m=new B(a)).pow(r.length-h),L=d,m.c=t(k(g(p.c),p.e,"0"),10,s,e),m.e=m.c.length),l=d=(b=t(r,a,s,i?(o=F,e):(o=e,F))).length;0==b[--d];b.pop());if(!b[0])return o.charAt(0);if(h<0?--l:(p.c=b,p.e=l,p.s=c,b=(p=n(p,m,j,y,s)).c,f=p.r,l=p.e),h=b[u=l+j+1],d=s/2,f=f||u<0||null!=b[u+1],f=y<4?(null!=h||f)&&(0==y||y==(p.s<0?3:2)):h>d||h==d&&(4==y||f||6==y&&1&b[u-1]||y==(p.s<0?8:7)),u<1||!b[0])r=f?k(o.charAt(1),-j,o.charAt(0)):o.charAt(0);else{if(b.length=u,f)for(--s;++b[--u]>s;)b[u]=0,u||(++l,b=[1].concat(b));for(d=b.length;!b[--d];);for(h=0,r="";h<=d;r+=o.charAt(b[h++]));r=k(r,l,o.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,a,s,c,i=0,o=e.length,u=t%m,l=t/m|0;for(e=e.slice();o--;)i=((a=u*(s=e[o]%m)+(r=l*s+(c=e[o]/m|0)*u)%m*m+i)/n|0)+(r/m|0)+l*c,e[o]=a%n;return i&&(e=[i].concat(e)),e}function t(e,t,n,r){var a,s;if(n!=r)s=n>r?1:-1;else for(a=s=0;a<n;a++)if(e[a]!=t[a]){s=e[a]>t[a]?1:-1;break}return s}function n(e,t,n,r){for(var a=0;n--;)e[n]-=a,a=e[n]<t[n]?1:0,e[n]=a*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,a,s,c,i){var u,l,p,b,m,h,g,y,v,x,O,w,k,T,N,S,C,A=r.s==a.s?1:-1,E=r.c,M=a.c;if(!E||!E[0]||!M||!M[0])return new B(r.s&&a.s&&(E?!M||E[0]!=M[0]:M)?E&&0==E[0]||!M?0*A:A/0:NaN);for(v=(y=new B(A)).c=[],A=s+(l=r.e-a.e)+1,i||(i=d,l=j(r.e/f)-j(a.e/f),A=A/f|0),p=0;M[p]==(E[p]||0);p++);if(M[p]>(E[p]||0)&&l--,A<0)v.push(1),b=!0;else{for(T=E.length,S=M.length,p=0,A+=2,(m=o(i/(M[0]+1)))>1&&(M=e(M,m,i),E=e(E,m,i),S=M.length,T=E.length),k=S,O=(x=E.slice(0,S)).length;O<S;x[O++]=0);C=M.slice(),C=[0].concat(C),N=M[0],M[1]>=i/2&&N++;do{if(m=0,(u=t(M,x,S,O))<0){if(w=x[0],S!=O&&(w=w*i+(x[1]||0)),(m=o(w/N))>1)for(m>=i&&(m=i-1),g=(h=e(M,m,i)).length,O=x.length;1==t(h,x,g,O);)m--,n(h,S<g?C:M,g,i),g=h.length,u=1;else 0==m&&(u=m=1),g=(h=M.slice()).length;if(g<O&&(h=[0].concat(h)),n(x,h,O,i),O=x.length,-1==u)for(;t(M,x,S,O)<1;)m++,n(x,S<O?C:M,O,i),O=x.length}else 0===u&&(m++,x=[0]);v[p++]=m,x[0]?x[O++]=E[k]||0:(x=[E[k]],O=1)}while((k++<T||null!=x[0])&&A--);b=null!=x[0],v[0]||v.splice(0,1)}if(i==d){for(p=1,A=v[0];A>=10;A/=10,p++);H(y,s+(y.e=p+l*f-1)+1,c,b)}else y.e=l,y.r=+b;return y}}(),a=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,n=/^\.([^.]+)$/,r=/^-?(Infinity|NaN)$/,a=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(s,c,i,o){var l,d=i?c:c.replace(a,"");if(r.test(d))s.s=isNaN(d)?null:d<0?-1:1,s.c=s.e=null;else{if(!i&&(d=d.replace(e,(function(e,t,n){return l="x"==(n=n.toLowerCase())?16:"b"==n?2:8,o&&o!=l?e:t})),o&&(l=o,d=d.replace(t,"$1").replace(n,"0.$1")),c!=d))return new B(d,l);if(B.DEBUG)throw Error(u+"Not a"+(o?" base "+o:"")+" number: "+c);s.c=s.e=s.s=null}}}(),s.absoluteValue=s.abs=function(){var e=new B(this);return e.s<0&&(e.s=1),e},s.comparedTo=function(e,t){return y(this,new B(e,t))},s.decimalPlaces=s.dp=function(e,t){var n,r,a,s=this;if(null!=e)return v(e,0,h),null==t?t=S:v(t,0,8),H(new B(s),e+s.e+1,t);if(!(n=s.c))return null;if(r=((a=n.length-1)-j(this.e/f))*f,a=n[a])for(;a%10==0;a/=10,r--);return r<0&&(r=0),r},s.dividedBy=s.div=function(e,t){return n(this,new B(e,t),N,S)},s.dividedToIntegerBy=s.idiv=function(e,t){return n(this,new B(e,t),0,1)},s.exponentiatedBy=s.pow=function(e,t){var n,r,a,s,c,l,d,p=this;if((e=new B(e)).c&&!e.isInteger())throw Error(u+"Exponent not an integer: "+e);if(null!=t&&(t=new B(t)),s=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return d=new B(Math.pow(+p.valueOf(),s?2-O(e):+e)),t?d.mod(t):d;if(c=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new B(NaN);(r=!c&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||s&&p.c[1]>=24e7:p.c[0]<8e13||s&&p.c[0]<=9999975e7)))return a=p.s<0&&O(e)?-0:0,p.e>-1&&(a=1/a),new B(c?1/a:a);L&&(a=i(L/f+2))}for(s?(n=new B(.5),l=O(e)):l=e%2,c&&(e.s=1),d=new B(T);;){if(l){if(!(d=d.times(p)).c)break;a?d.c.length>a&&(d.c.length=a):r&&(d=d.mod(t))}if(s){if(H(e=e.times(n),e.e+1,1),!e.c[0])break;s=e.e>14,l=O(e)}else{if(!(e=o(e/2)))break;l=e%2}p=p.times(p),a?p.c&&p.c.length>a&&(p.c.length=a):r&&(p=p.mod(t))}return r?d:(c&&(d=T.div(d)),t?d.mod(t):a?H(d,L,S,undefined):d)},s.integerValue=function(e){var t=new B(this);return null==e?e=S:v(e,0,8),H(t,t.e+1,e)},s.isEqualTo=s.eq=function(e,t){return 0===y(this,new B(e,t))},s.isFinite=function(){return!!this.c},s.isGreaterThan=s.gt=function(e,t){return y(this,new B(e,t))>0},s.isGreaterThanOrEqualTo=s.gte=function(e,t){return 1===(t=y(this,new B(e,t)))||0===t},s.isInteger=function(){return!!this.c&&j(this.e/f)>this.c.length-2},s.isLessThan=s.lt=function(e,t){return y(this,new B(e,t))<0},s.isLessThanOrEqualTo=s.lte=function(e,t){return-1===(t=y(this,new B(e,t)))||0===t},s.isNaN=function(){return!this.s},s.isNegative=function(){return this.s<0},s.isPositive=function(){return this.s>0},s.isZero=function(){return!!this.c&&0==this.c[0]},s.minus=function(e,t){var n,r,a,s,c=this,i=c.s;if(t=(e=new B(e,t)).s,!i||!t)return new B(NaN);if(i!=t)return e.s=-t,c.plus(e);var o=c.e/f,u=e.e/f,l=c.c,p=e.c;if(!o||!u){if(!l||!p)return l?(e.s=-t,e):new B(p?c:NaN);if(!l[0]||!p[0])return p[0]?(e.s=-t,e):new B(l[0]?c:3==S?-0:0)}if(o=j(o),u=j(u),l=l.slice(),i=o-u){for((s=i<0)?(i=-i,a=l):(u=o,a=p),a.reverse(),t=i;t--;a.push(0));a.reverse()}else for(r=(s=(i=l.length)<(t=p.length))?i:t,i=t=0;t<r;t++)if(l[t]!=p[t]){s=l[t]<p[t];break}if(s&&(a=l,l=p,p=a,e.s=-e.s),(t=(r=p.length)-(n=l.length))>0)for(;t--;l[n++]=0);for(t=d-1;r>i;){if(l[--r]<p[r]){for(n=r;n&&!l[--n];l[n]=t);--l[n],l[r]+=d}l[r]-=p[r]}for(;0==l[0];l.splice(0,1),--u);return l[0]?U(e,l,u):(e.s=3==S?-1:1,e.c=[e.e=0],e)},s.modulo=s.mod=function(e,t){var r,a,s=this;return e=new B(e,t),!s.c||!e.s||e.c&&!e.c[0]?new B(NaN):!e.c||s.c&&!s.c[0]?new B(s):(9==I?(a=e.s,e.s=1,r=n(s,e,0,3),e.s=a,r.s*=a):r=n(s,e,0,I),(e=s.minus(r.times(e))).c[0]||1!=I||(e.s=s.s),e)},s.multipliedBy=s.times=function(e,t){var n,r,a,s,c,i,o,u,l,p,b,h,g,y,v,x=this,O=x.c,w=(e=new B(e,t)).c;if(!O||!w||!O[0]||!w[0])return!x.s||!e.s||O&&!O[0]&&!w||w&&!w[0]&&!O?e.c=e.e=e.s=null:(e.s*=x.s,O&&w?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=j(x.e/f)+j(e.e/f),e.s*=x.s,(o=O.length)<(p=w.length)&&(g=O,O=w,w=g,a=o,o=p,p=a),a=o+p,g=[];a--;g.push(0));for(y=d,v=m,a=p;--a>=0;){for(n=0,b=w[a]%v,h=w[a]/v|0,s=a+(c=o);s>a;)n=((u=b*(u=O[--c]%v)+(i=h*u+(l=O[c]/v|0)*b)%v*v+g[s]+n)/y|0)+(i/v|0)+h*l,g[s--]=u%y;g[s]=n}return n?++r:g.splice(0,1),U(e,g,r)},s.negated=function(){var e=new B(this);return e.s=-e.s||null,e},s.plus=function(e,t){var n,r=this,a=r.s;if(t=(e=new B(e,t)).s,!a||!t)return new B(NaN);if(a!=t)return e.s=-t,r.minus(e);var s=r.e/f,c=e.e/f,i=r.c,o=e.c;if(!s||!c){if(!i||!o)return new B(a/0);if(!i[0]||!o[0])return o[0]?e:new B(i[0]?r:0*a)}if(s=j(s),c=j(c),i=i.slice(),a=s-c){for(a>0?(c=s,n=o):(a=-a,n=i),n.reverse();a--;n.push(0));n.reverse()}for((a=i.length)-(t=o.length)<0&&(n=o,o=i,i=n,t=a),a=0;t;)a=(i[--t]=i[t]+o[t]+a)/d|0,i[t]=d===i[t]?0:i[t]%d;return a&&(i=[a].concat(i),++c),U(e,i,c)},s.precision=s.sd=function(e,t){var n,r,a,s=this;if(null!=e&&e!==!!e)return v(e,1,h),null==t?t=S:v(t,0,8),H(new B(s),e,t);if(!(n=s.c))return null;if(r=(a=n.length-1)*f+1,a=n[a]){for(;a%10==0;a/=10,r--);for(a=n[0];a>=10;a/=10,r++);}return e&&s.e+1>r&&(r=s.e+1),r},s.shiftedBy=function(e){return v(e,-9007199254740991,p),this.times("1e"+e)},s.squareRoot=s.sqrt=function(){var e,t,r,a,s,c=this,i=c.c,o=c.s,u=c.e,l=N+4,d=new B("0.5");if(1!==o||!i||!i[0])return new B(!o||o<0&&(!i||i[0])?NaN:i?c:1/0);if(0==(o=Math.sqrt(+c))||o==1/0?(((t=g(i)).length+u)%2==0&&(t+="0"),o=Math.sqrt(t),u=j((u+1)/2)-(u<0||u%2),r=new B(t=o==1/0?"1e"+u:(t=o.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new B(o+""),r.c[0])for((o=(u=r.e)+l)<3&&(o=0);;)if(s=r,r=d.times(s.plus(n(c,s,l,1))),g(s.c).slice(0,o)===(t=g(r.c)).slice(0,o)){if(r.e<u&&--o,"9999"!=(t=t.slice(o-3,o+1))&&(a||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(H(r,r.e+N+2,1),e=!r.times(r).eq(c));break}if(!a&&(H(s,s.e+N+2,0),s.times(s).eq(c))){r=s;break}l+=4,o+=4,a=1}return H(r,r.e+N+1,S,e)},s.toExponential=function(e,t){return null!=e&&(v(e,0,h),e++),_(this,e,t,1)},s.toFixed=function(e,t){return null!=e&&(v(e,0,h),e=e+this.e+1),_(this,e,t)},s.toFormat=function(e,t){var n=this.toFixed(e,t);if(this.c){var r,a=n.split("."),s=+D.groupSize,c=+D.secondaryGroupSize,i=D.groupSeparator,o=a[0],u=a[1],l=this.s<0,d=l?o.slice(1):o,f=d.length;if(c&&(r=s,s=c,c=r,f-=r),s>0&&f>0){for(r=f%s||s,o=d.substr(0,r);r<f;r+=s)o+=i+d.substr(r,s);c>0&&(o+=i+d.slice(r)),l&&(o="-"+o)}n=u?o+D.decimalSeparator+((c=+D.fractionGroupSize)?u.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+D.fractionGroupSeparator):u):o}return n},s.toFraction=function(e){var t,r,a,s,c,i,o,l,d,p,m,h,j=this,y=j.c;if(null!=e&&(!(l=new B(e)).isInteger()&&(l.c||1!==l.s)||l.lt(T)))throw Error(u+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+e);if(!y)return j.toString();for(r=new B(T),p=a=new B(T),s=d=new B(T),h=g(y),i=r.e=h.length-j.e-1,r.c[0]=b[(o=i%f)<0?f+o:o],e=!e||l.comparedTo(r)>0?i>0?r:p:l,o=M,M=1/0,l=new B(h),d.c[0]=0;m=n(l,r,0,1),1!=(c=a.plus(m.times(s))).comparedTo(e);)a=s,s=c,p=d.plus(m.times(c=p)),d=c,r=l.minus(m.times(c=r)),l=c;return c=n(e.minus(a),s,0,1),d=d.plus(c.times(p)),a=a.plus(c.times(s)),d.s=p.s=j.s,t=n(p,s,i*=2,S).minus(j).abs().comparedTo(n(d,a,i,S).minus(j).abs())<1?[p.toString(),s.toString()]:[d.toString(),a.toString()],M=o,t},s.toNumber=function(){return+this},s.toPrecision=function(e,t){return null!=e&&v(e,1,h),_(this,e,t,2)},s.toString=function(e){var t,n=this,a=n.s,s=n.e;return null===s?a?(t="Infinity",a<0&&(t="-"+t)):t="NaN":(t=g(n.c),null==e?t=s<=C||s>=A?w(t,s):k(t,s,"0"):(v(e,2,F.length,"Base"),t=r(k(t,s,"0"),10,e,a,!0)),a<0&&n.c[0]&&(t="-"+t)),t},s.valueOf=s.toJSON=function(){var e,t=this,n=t.e;return null===n?t.toString():(e=g(t.c),e=n<=C||n>=A?w(e,n):k(e,n,"0"),t.s<0?"-"+e:e)},s._isBigNumber=!0,null!=t&&B.set(t),B}(),s.default=s.BigNumber=s,void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},664:function(e,t){},673:function(e,t){},674:function(e,t){},675:function(e,t){},676:function(e,t){},677:function(e,t){},679:function(e,t){},680:function(e,t){},681:function(e,t){},683:function(e,t){},685:function(e,t){},688:function(e,t){},692:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(114);function a(e,t){if(null==e)return{};var n,a,s=Object(r.a)(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}},695:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=["slow","medium","fast","ape"]},727:function(e,t,n){"use strict";var r=n(640),a=n(21),s=n(151),c=new a.Interface(n(360)),i=s.a.quickAccManager;t.a=function(e,t,n,s){var o=new a.AbiCoder,u=s.signer,l=u.timelock,d=u.one,f=u.two,p=Object(a.keccak256)(o.encode(["tuple(uint, address, address)"],[[l,d,f]]));return new r.Bundle({identity:e,network:t,signer:n,txns:[[e,"0x00",c.encodeFunctionData("setAddrPrivilege",[i,p])]],recoveryMode:s})}},791:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(30),s=r(n(3)),c=n(50);n(48),n(187);var i=r(n(55));function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){e.prototype=Object.create(t.prototype),l(e.prototype.constructor=e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],0<=t.indexOf(n)||(a[n]=e[n]);return a}var f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=c.createBrowserHistory(t.props),t}return u(t,e),t.prototype.render=function(){return s.createElement(a.Router,{history:this.history,children:this.props.children})},t}(s.Component),p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=c.createHashHistory(t.props),t}return u(t,e),t.prototype.render=function(){return s.createElement(a.Router,{history:this.history,children:this.props.children})},t}(s.Component),b=function(e,t){return"function"==typeof e?e(t):e},m=function(e,t){return"string"==typeof e?c.createLocation(e,null,null,t):e},h=function(e){return e},j=s.forwardRef;void 0===j&&(j=h);var g=j((function(e,t){var n=e.innerRef,r=e.navigate,a=e.onClick,c=d(e,["innerRef","navigate","onClick"]),i=c.target,u=o({},c,{onClick:function(t){try{a&&a(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||i&&"_self"!==i||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),r())}});return u.ref=h!==j&&t||n,s.createElement("a",u)})),y=j((function(e,t){var n=e.component,r=void 0===n?g:n,u=e.replace,l=e.to,f=e.innerRef,p=d(e,["component","replace","to","innerRef"]);return s.createElement(a.__RouterContext.Consumer,null,(function(e){e||i(!1);var n=e.history,a=m(b(l,e.location),e.location),d=a?n.createHref(a):"",g=o({},p,{href:d,navigate:function(){var t=b(l,e.location),r=c.createPath(e.location)===c.createPath(m(t));(u||r?n.replace:n.push)(t)}});return h!==j?g.ref=t||f:g.innerRef=f,s.createElement(r,g)}))})),v=function(e){return e},x=s.forwardRef;void 0===x&&(x=v);var O=x((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,c=e.activeClassName,u=void 0===c?"active":c,l=e.activeStyle,f=e.className,p=e.exact,h=e.isActive,j=e.location,g=e.sensitive,O=e.strict,w=e.style,k=e.to,T=e.innerRef,N=d(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return s.createElement(a.__RouterContext.Consumer,null,(function(e){e||i(!1);var n=j||e.location,c=m(b(k,n),n),d=c.pathname,S=d&&d.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),C=S?a.matchPath(n.pathname,{path:S,exact:p,sensitive:g,strict:O}):null,A=!!(h?h(C,n):C),E="function"==typeof f?f(A):f,M="function"==typeof w?w(A):w;A&&(E=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(E,u),M=o({},M,l));var P=o({"aria-current":A&&r||null,className:E,style:M,to:c},N);return v!==x?P.ref=t||T:P.innerRef=T,s.createElement(y,P)}))}));Object.defineProperty(t,"MemoryRouter",{enumerable:!0,get:function(){return a.MemoryRouter}}),Object.defineProperty(t,"Prompt",{enumerable:!0,get:function(){return a.Prompt}}),Object.defineProperty(t,"Redirect",{enumerable:!0,get:function(){return a.Redirect}}),Object.defineProperty(t,"Route",{enumerable:!0,get:function(){return a.Route}}),Object.defineProperty(t,"Router",{enumerable:!0,get:function(){return a.Router}}),Object.defineProperty(t,"StaticRouter",{enumerable:!0,get:function(){return a.StaticRouter}}),Object.defineProperty(t,"Switch",{enumerable:!0,get:function(){return a.Switch}}),Object.defineProperty(t,"generatePath",{enumerable:!0,get:function(){return a.generatePath}}),Object.defineProperty(t,"matchPath",{enumerable:!0,get:function(){return a.matchPath}}),Object.defineProperty(t,"useHistory",{enumerable:!0,get:function(){return a.useHistory}}),Object.defineProperty(t,"useLocation",{enumerable:!0,get:function(){return a.useLocation}}),Object.defineProperty(t,"useParams",{enumerable:!0,get:function(){return a.useParams}}),Object.defineProperty(t,"useRouteMatch",{enumerable:!0,get:function(){return a.useRouteMatch}}),Object.defineProperty(t,"withRouter",{enumerable:!0,get:function(){return a.withRouter}}),t.BrowserRouter=f,t.HashRouter=p,t.Link=y,t.NavLink=O},792:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r=n(0);function a(e){return Object(r.a)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{fillRule:"nonzero",d:"M16 13l6.964 4.062-2.973.85 2.125 3.681-1.732 1-2.125-3.68-2.223 2.15L16 13zm-2-7h2v2h5a1 1 0 0 1 1 1v4h-2v-3H10v10h4v2H9a1 1 0 0 1-1-1v-5H6v-2h2V9a1 1 0 0 1 1-1h5V6zM4 14v2H2v-2h2zm0-4v2H2v-2h2zm0-4v2H2V6h2zm0-4v2H2V2h2zm4 0v2H6V2h2zm4 0v2h-2V2h2zm4 0v2h-2V2h2z"}}]}]})(e)}function s(e){return Object(r.a)({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6.382 5.968A8.962 8.962 0 0 1 12 4c2.125 0 4.078.736 5.618 1.968l1.453-1.453 1.414 1.414-1.453 1.453a9 9 0 1 1-14.064 0L3.515 5.93l1.414-1.414 1.453 1.453zM12 20a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm1-8h3l-5 6.5V14H8l5-6.505V12zM8 1h8v2H8V1z"}}]}]})(e)}},793:function(e,t,n){"use strict";var r=n(2),a=n.n(r),s=n(11),c=n(230),i=n(186),o=n(727),u=n(4);t.a=function(e){var t=e.recoveryLock,n=e.showSendTxns,r=e.selectedAccount,l=e.selectedNetwork,d=t&&"requestedButNotInitiated"!==t.status,f=function(){var e=Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=2;break}return e.abrupt("return");case 2:t=Object(o.a)(r.id,l.id,r.signer.preRecovery,{signer:r.signer,primaryKeyBackup:r.primaryKeyBackup}),n(t,!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=t?t.status:"requestedButNotInitiated",b=function(e){return e>86400?"".concat(Math.ceil(e/86400)," days"):"".concat(Math.ceil(e/1440)," hours")},m=d?"ready"===p?"success":"warning":"warning action";return Object(u.jsxs)("div",{className:"notification-banner notification-hollow ".concat(m),onClick:function(){return f()},children:["ready"===p?Object(u.jsx)(i.b,{}):Object(u.jsx)(c.b,{}),"requestedButNotInitiated"===p?Object(u.jsxs)(u.Fragment,{children:["Password reset requested but not initiated for ",l.name,". Click here to initiate it."]}):"initiationTxnPending"===p?Object(u.jsxs)(u.Fragment,{children:["Initiation transaction is currently pending. Once mined, you will need to wait ",b(t.timelock)," for the reset to be done on ",l.name,"."]}):"waitingTimelock"===p?Object(u.jsxs)(u.Fragment,{children:["Password reset on ",l.name," is currently pending. ",b(t.remaining)," remaining."]}):"ready"===p?Object(u.jsxs)(u.Fragment,{children:["Password reset on ",l.name," is now complete! You can start signing transactions with your new password!"]}):"failed"===p?Object(u.jsx)(u.Fragment,{children:"Something went wrong while resetting your password. Please contact support at help.ambire.com"}):null]})}},816:function(e,t,n){"use strict";var r=n(8),a=(n(611),n(106)),s=n(85),c="0x0000000000000000000000000000000000000000";function i(e){var t=e.networkId,n=e.account;return n?Object(s.c)("".concat(a.h,"/protocols/tokens/balances?addresses[]=").concat(n,"&network=").concat(t,"&api_key=").concat(a.j,"&newBalances=true&available_on_coingecko=true")).then((function(e){var r=n.toLowerCase();if(!e[r])return[];if(!e[r].products[0])return[];var i=e[r].products[0].assets.map((function(e){return{address:e.tokens[0].address,symbol:e.tokens[0].symbol,decimals:e.tokens[0].decimals}})),o="".concat(a.h,"/protocols/tokens/balances?addresses[]=").concat(n,"&network=").concat(t,"&api_key=").concat(a.j,"&customTokens=").concat(JSON.stringify(i),"&available_on_coingecko=true");return Object(s.c)(o).then((function(e){var t,n;return(null===(t=e[r])||void 0===t||null===(n=t.products[0])||void 0===n?void 0:n.assets).map((function(e){return{name:e.tokens[0].symbol,icon:e.tokens[0].tokenImageUrl,address:e.tokens[0].address.toLowerCase(),native:e.tokens[0].address===c,decimals:e.tokens[0].decimals,availableBalance:e.tokens[0].balanceRaw,balanceUSD:e.tokens[0].balanceUSD,rate:e.tokens[0].balanceUSD/e.tokens[0].balanceRaw}}))})).catch((function(e){throw Error("Could not get customToken assets from velcro")}))})).catch((function(e){throw Error("Could not get assets from velcro")})):Promise.resolve([])}var o=n(37),u=n(79),l=n(3),d=n(2),f=n.n(d),p=n(11),b=n(7),m=n(17),h=n(648),j=n.n(h),g=n(21),y=[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}],v=[{name:"holder",type:"address"},{name:"spender",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"},{name:"allowed",type:"bool"}],x=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],O=[{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],w=[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],k=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"}],T={1:[{address:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",name:"USD Coin",version:"2",domainType:x,permitType:y},{address:"0x1f9840a85d5af5bf1d1762f925bdaddc4201f984",name:"Uniswap",domainType:w,permitType:y},{address:"0xde30da39c46104798bb5aa3fe8b9e0e1f348163f",name:"Gitcoin",domainType:w,permitType:y},{address:"0x6b175474e89094c44da98b954eedeac495271d0f",name:"Dai Stablecoin",version:"1",domainType:x,permitType:v},{address:"0x090185f2135308bad17527004364ebcc2d37e5f6",domainType:O,permitType:y},{address:"0x99d8a9c45b2eca8864373a26d1459e3dff1e17f3",domainType:O,permitType:y},{address:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9",name:"Aave Token",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"AdEx Loyalty",address:"0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c",version:"1",domainType:x,permitType:y},{name:"Aave Token",address:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9",version:"1",domainType:x,permitType:y},{name:"Ambire Wallet Staking Token",address:"0x47cd7e91c3cbaaf266369fe8518345fc4fc12935",version:"1",domainType:x,permitType:y},{name:"ConstitutionDAO",address:"0x7a58c0be72be218b41c608b7fe7c5bb630736c71",version:"1",domainType:x,permitType:y},{name:"Aragon Network Token",address:"0xa117000000f279d81a1d3cc75430faa017fa5a2e",version:"1",domainType:x,permitType:y},{name:"AdEx Staking Token",address:"0xb6456b57f03352be48bf101b46c1752a0813491a",version:"1",domainType:x,permitType:y},{name:"dYdX",address:"0x92d6c1e31e14520e676a687f0a93788b716beff5",version:"1",domainType:x,permitType:y},{name:"Ethereum Name Service",address:"0xc18360217d8f7ab5e7c516566761ea12ce7f9d72",version:"1",domainType:x,permitType:y},{name:"Olympus",address:"0x383518188c0c6d7730d91b2c03a03c837814a899",version:"1",domainType:x,permitType:y},{name:"1INCH Token",address:"0x111111111117dc0aa78b770fa6a738034120c302",version:"1",domainType:x,permitType:y},{name:"IceToken",address:"0xf16e81dce15b08f326220742020379b855b87df9",version:"1",domainType:x,permitType:y},{name:"Fei USD",address:"0x956f47f50a910163d8bf957cf5846d573e7f87ca",version:"1",domainType:x,permitType:y},{name:"LUSD Stablecoin",address:"0x5f98805a4e8be255a32880fdec7f6728c6568ba0",version:"1",domainType:x,permitType:y},{name:"Balancer",address:"0xba100000625a3754423978a60c9317c58a424e3d",version:"1",domainType:x,permitType:y},{name:"Aave interest bearing AAVE",address:"0xffc97d72e13e01096502cb8eb52dee56f74dad7b",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave AMM Market UniBATWETH",address:"0xa1b0edf4460cc4d8bfaa18ed871bff15e5b57eb4",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave AMM Market UniWBTCWETH",address:"0xc58f53a8adff2fb4eb16ed56635772075e2ee123",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave AMM Market UniUSDCWETH",address:"0x391e86e2c002c70dee155eaceb88f7a3c38f5976",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing WETH",address:"0x030ba81f1c18d280636f32af80b9aad02cf0854e",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing DAI",address:"0x028171bca77440897b824ca71d1c56cac55b68a3",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave AMM Market UniWBTCUSDC",address:"0x2365a4890ed8965e564b7e2d27c38ba67fec4c6f",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave AMM Market UniCRVWETH",address:"0x0ea20e7ffb006d4cfe84df2f72d8c7bd89247db0",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave AMM Market UniUNIWETH",address:"0x3d26dcd840fcc8e4b2193ace8a092e4a65832f9f",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing GUSD",address:"0xd37ee7e4f452c6638c96536e68090de8cbcdb583",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave AMM Market UniMKRWETH",address:"0x370adc71f67f581158dc56f539df5f399128ddf9",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing CRV",address:"0x8dae6cb04688c62d939ed9b68d32bc62e49970b1",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave AMM Market USDT",address:"0x17a79792fe6fe5c95dfe95fe3fcee3caf4fe4cb7",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave AMM Market UniSNXWETH",address:"0x38e491a71291cd43e8de63b7253e482622184894",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing YFI",address:"0x5165d24277cd063f5ac44efd447b27025e888f37",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing SNX",address:"0x35f6b052c598d933d69a4eec4d04c73a191fe6c2",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave AMM Market USDC",address:"0xd24946147829deaa935be2ad85a3291dbf109c80",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave AMM Market DAI",address:"0x79be75ffc64dd58e66787e4eae470c8a1fd08ba4",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing USDT",address:"0x3ed3b47dd13ec9a98b44e6204a523e766b225811",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing RAI",address:"0xc9bc48c72154ef3e5425641a3c747242112a46af",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing BAL",address:"0x272f97b7a56a387ae942350bbc7df5700f8a4576",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing BAT",address:"0x05ec93c0365baaeabf7aeffb0972ea7ecdd39cf1",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing USDC",address:"0xbcca60bb61934080951369a648fb03df4f96263c",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave AMM Market BptBALWETH",address:"0xd109b2a304587569c84308c55465cd9ff0317bfb",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing KNC",address:"0x39c6b3e42d6a679d7d776778fe880bc9487c2eda",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing MANA",address:"0xa685a61171bb30d4072b338c80cb7b2c865c873e",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing XSUSHI",address:"0xf256cc7847e919fac9b808cc216cac87ccf2f47a",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing TUSD",address:"0x101cc05f4a51c0319f570d5e146a8c625198e636",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"},{name:"Aave interest bearing ENJ",address:"0xac6df26a590f08dcc95d5a4705ae8abbc88509ef",version:"1",domainType:x,permitType:y,nonceFunction:"_nonces"}],137:[{name:"Governance OHM",address:"0xd8ca34fd379d9ca3c6ee3b3905678320f5b45195",version:"1",domainType:x,permitType:y},{name:"Frax",address:"0x45c32fa6df82ead1e2ef74d17b76547eddfaff89",version:"1",domainType:x,permitType:y},{name:"Aave Matic Market WBTC",address:"0x5c2ed810328349100a66b82b78a1791b101c9d61",version:"1",domainType:x,permitType:y},{name:"Aave Matic Market WETH",address:"0x28424507fefb6f7f8e9d3860f56504e4e5f5f390",version:"1",domainType:x,permitType:y},{name:"Aave Matic Market USDC",address:"0x1a13f4ca1d028320a707d99520abfefca3998b7f",version:"1",domainType:x,permitType:y},{name:"Aave Matic Market AAVE",address:"0x1d2a0e5ec8e5bbdca5cb219e649b565d8e5c3360",version:"1",domainType:x,permitType:y},{name:"Synapse",address:"0xf8f9efc0db77d8881500bb06ff5d6abc3070e695",version:"1",domainType:x,permitType:y},{name:"Aave Matic Market WMATIC",address:"0x8df3aad3a84da6b69a4da8aec3ea40d9091b2ac4",version:"1",domainType:x,permitType:y},{name:"Aave Matic Market USDT",address:"0x60d55f02a771d515e077c9c2403a1ef324885cec",version:"1",domainType:x,permitType:y},{name:"Klima DAO",address:"0x4e78011ce80ee02d2c3e649fb657e45898257815",version:"1",domainType:x,permitType:y},{name:"Quickswap",address:"0xb5c064f955d8e7f38fe0460c556a72987494ee17",domainType:w,permitType:y},{name:"Route",address:"0x16eccfdbb4ee1a85a33f3a9b21175cd7ae753db4",domainType:w,permitType:y},{address:"0x8f3cf7ad23cd3cadbd9735aff958023239c6a063",name:"(PoS) Dai Stablecoin",version:"1",salt:"0x0000000000000000000000000000000000000000000000000000000000000089",domainType:k,permitType:v,nonceFunction:"getNonce"},{address:"0x2791bca1f2de4661ed88a30c99a7a9449aa84174",name:"USD Coin (PoS)",version:"1",salt:"0x0000000000000000000000000000000000000000000000000000000000000089",domainType:k,permitType:y}],56:[{name:"1INCH Token",address:"0x111111111117dc0aa78b770fa6a738034120c302",version:"1",domainType:x,permitType:y},{name:"Frax",address:"0x90c97f71e18723b0cf0dfa30ee176ab653e89f40",version:"1",domainType:x,permitType:y},{name:"JADE",address:"0x7ad7242a99f21aa543f9650a56d141c57e4f6081",version:"1",domainType:x,permitType:y},{name:"Templar Token",address:"0x19e6bfc1a6e4b042fb20531244d47e252445df01",version:"1",domainType:x,permitType:y}]},N=new g.Interface(["function nonces(address owner) external view returns (uint256)","function _nonces(address owner) external view returns (uint256)","function getNonce(address owner) external view returns (uint256)","function name() external view returns (string)","function symbol() external view returns (string)","function decimals() external view returns (uint)","function balanceOf(address) external view returns (uint)","function permit(address owner, address spender, uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s)","function permit(address holder, address spender, uint256 nonce, uint256 expiry, bool allowed, uint8 v, bytes32 r, bytes32 s)","function transferFrom(address from, address to, uint256 amount) view returns (bool)","function transfer(address to, uint256 amount) view returns (bool)","function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint)"]),S=n(241),C=n(229),A=n(36),E=n(52),M=n(95),P=n(70),I=n(695),L=n(4),D=function(e){var t=e.signerAccount,n=e.identityAccount,a=e.network,o=e.setIsSelectionConfirmed,d=e.setStep,h=e.portfolio,g=e.relayerURL,y=e.setModalButtons,v=e.hideModal,x=e.setSelectedTokensWithAllowance,O=e.setGasSpeed,w=e.setStepperSteps,k=e.hidden,D=Object(l.useState)([]),F=Object(r.a)(D,2),B=F[0],_=F[1],R=Object(l.useState)([]),U=Object(r.a)(R,2),H=U[0],W=U[1],z=Object(l.useState)(!0),q=Object(r.a)(z,2),G=q[0],V=q[1],K=Object(l.useState)([]),Y=Object(r.a)(K,2),Q=Y[0],J=Y[1],$=Object(l.useState)(null),X=Object(r.a)($,2),Z=X[0],ee=X[1],te=Object(l.useState)([]),ne=Object(r.a)(te,2),re=ne[0],ae=ne[1],se=Object(l.useState)(null),ce=Object(r.a)(se,2),ie=ce[0],oe=ce[1],ue=Object(l.useState)("fast"),le=Object(r.a)(ue,2),de=le[0],fe=le[1],pe=Object(l.useState)([]),be=Object(r.a)(pe,2),me=be[0],he=be[1],je=Object(l.useState)(!1),ge=Object(r.a)(je,2),ye=ge[0],ve=ge[1],xe=Object(l.useState)(!1),Oe=Object(r.a)(xe,2),we=Oe[0],ke=Oe[1],Te=Object(l.useState)(""),Ne=Object(r.a)(Te,2),Se=Ne[0],Ce=Ne[1],Ae=Object(l.useState)(""),Ee=Object(r.a)(Ae,2),Me=Ee[0],Pe=Ee[1],Ie=Object(l.useRef)(),Le=function(e,t){var n;return!!(null===(n=T[e])||void 0===n?void 0:n.find((function(e){return e.address.toLowerCase()===t.toLowerCase()})))};Object(l.useEffect)((function(){ye&&Ie.current.focus()}),[ye]);var De=Object(l.useCallback)((function(e,t){var n=H.findIndex((function(t){return t.address===e}));if(-1!==n){var r=t(H[n]);W([].concat(Object(m.a)(H.slice(0,n)),[r],Object(m.a)(H.slice(n+1))))}}),[H]),Fe=Object(l.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;De(e,(function(n){var r=Object(b.a)(Object(b.a)({},n),{},{selected:!n.selected});if(t){var a,s=null===(a=H.find((function(t){return t.address===e})))||void 0===a?void 0:a.humanAmount;if(t>s){var c,i=null===(c=B.find((function(t){return t.address===e})))||void 0===c?void 0:c.decimals;r.amount=new j.a(t).multipliedBy(Math.pow(10,i)).toFixed(0),r.humanAmount=t}}return r}))}),[B,De,H]),Be=Object(l.useCallback)((function(){var e=Object(P.a)(a.id);if(E.ethers.utils.isAddress(Se)){if(B.find((function(e){return e.address.toLowerCase()===Se.toLowerCase()})))return Ce(""),void ve(!1);var s=new M.Contract(Se,N,e),c=s.symbol().catch((function(){return Pe("Could not get symbol of token "+Se)})),i=s.decimals().catch((function(){return Pe("Could not get decimals of token "+Se)})),o=s.allowance(t,n).catch((function(){return Pe("Could not get allowance for token "+Se)})),u=s.balanceOf(t).catch((function(){return Pe("Could not get balance for token "+Se)}));ke(!0),Pe(null),Promise.all([c,i,o,u]).then((function(e){var t=Object(r.a)(e,4),n=t[0],a=t[1],s=t[2],c=t[3];ke(!1),n&&a&&null!==s&&null!==c&&(Ce(""),ve(!1),_((function(e){return[].concat(Object(m.a)(e),[{address:Se,name:n,decimals:a.toNumber(),icon:null,rate:0,native:!1,availableBalance:c.toString(),balanceUSD:0}])})),W((function(e){return[].concat(Object(m.a)(e),[{address:Se,selectedAmount:0,amount:c.toString(),humanAmount:new j.a(c.toString()).div(Math.pow(10,a.toString())).toFixed(),selected:c.gt(0)}])})),he((function(e){return[].concat(Object(m.a)(e),[{address:Se,allowance:0,permittable:!1}])})))})).catch((function(e){console.log("err getting custom token data",e),ke(!1)}))}else Pe("invalid custom token address")}),[a,Se,t,n,Pe,B]),_e=function(e,t){return!!e.filter((function(e){return e.selected&&e.isEnoughToCoverFees[t].ifSelected||e.isEnoughToCoverFees[t].ifNotSelected})).length},Re=function(e,t){return e.filter((function(e){return e.isEnoughToCoverFees[t].ifSelected})).map((function(e){return Object(b.a)(Object(b.a)({},e),{},{minimumSelectionAmount:e.isEnoughToCoverFees[t].minimumSelectionAmount})}))},Ue=function(e){return I.a.filter((function(t){return!!e.filter((function(e){return e.selected&&e.isEnoughToCoverFees[t].ifSelected||e.isEnoughToCoverFees[t].ifNotSelected})).length}))},He=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.map((function(e){return Object(b.a)(Object(b.a)(Object(b.a)({},e),t.find((function(t){return t.address===e.address}))),n.find((function(t){return t.address===e.address})))}))},We=Object(l.useCallback)(Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=He(B,H,me).filter((function(e){return e.selected}))).length){e.next=3;break}return e.abrupt("return");case 3:x(t.map((function(e){return Object(b.a)({},e)}))),o(!0),t.find((function(e){return e.address===c}))?d(1):d(2),O(de);case 7:case"end":return e.stop()}}),e)}))),[B,H,me,x,o,d,O,de]);Object(l.useEffect)((function(){V(!0),_([]),i({networkId:a.id,account:t}).then((function(e){_(e.map((function(e){return Object(b.a)({},e)}))),W(e.map((function(e){return{address:e.address,selectedAmount:0,amount:e.availableBalance,humanAmount:new j.a(e.availableBalance).div(Math.pow(10,e.decimals)).toFixed(),selected:!1}}))),V(!1)})).catch((function(e){console.error(e)}))}),[t,V,_,a]),Object(l.useEffect)((function(){if(Z){var e=He(B,H,me),t=e.filter((function(e){return e.selected&&e.permittable&&new j.a(e.allowance).isLessThan(e.amount)})).length,n=e.filter((function(e){return e.selected&&!e.native&&e.permittable})).length,r=e.filter((function(e){return e.selected&&!e.permittable&&!e.native})).length,s=e.filter((function(e){return e.selected&&e.native})).length,i="arbitrum"===a.id?2e5:0,o=t+n>0?25e3+7e4*t+52e3*n:0,u=r*(77e3+i)+25e3*s,l=Z.gasFeeAssets.native/Math.pow(10,18),d={};I.a.forEach((function(e){var t=Z.gasPrice[e]+(Z.gasPrice.maxPriorityFeePerGas?1*Z.gasPrice.maxPriorityFeePerGas[e]:0),n=o*t,r=n*l,a=u*t,s=a*l;d[e]={speed:e,migrationTransactionsCost:n,migrationTransactionsCostUSD:r,signerTransactionsCost:a,signerTransactionsCostUSD:s,migrationTransactionsConsumption:o,signerTransactionsConsumption:u}})),oe({permitsCount:t,permittableTransfersCount:n,regularTransfersCount:r,nativeTransfersCount:s,gasFees:d});var f=[c].concat(Object(m.a)(Z.gasFeeAssets.feeTokens.map((function(e){return e.address})))),p=e.filter((function(e){return f.find((function(t){return t.toLowerCase()===e.address.toLowerCase()}))}));h.tokens.forEach((function(e){f.find((function(t){return t.toLowerCase()===e.address.toLowerCase()}))&&!p.find((function(t){return t.address.toLowerCase()===e.address.toLowerCase()}))&&p.push(Object(b.a)(Object(b.a)({},e),{},{fromPortfolio:!0}))}));var g=p.map((function(e){var t=0,n=0;if(e.fromPortfolio)t=e.balanceUSD;else{var r=null===h||void 0===h?void 0:h.tokens;if(r){var a=r.find((function(t){return t.address.toLowerCase()===e.address.toLowerCase()}));t=(null===a||void 0===a?void 0:a.balanceUSD)||0}else console.warn("no identity assets!");n=new j.a(e.amount).multipliedBy(e.rate).toNumber()}var s={},c=!e.fromPortfolio&&e.selected||!1;return I.a.forEach((function(r){s[r]={ifNotSelected:new j.a(t).isGreaterThan(d[r].migrationTransactionsCostUSD),ifSelected:new j.a(t+n).isGreaterThan(d[r].migrationTransactionsCostUSD),minimumSelectionAmount:e.rate>0?new j.a(d[r].migrationTransactionsCostUSD).minus(t).dividedBy(e.rate).dividedBy(Math.pow(10,e.decimals)).multipliedBy(1.0001).toNumber():0}})),{address:e.address,name:e.name,selected:c,identityBalanceUSD:t,selectedAmountUSD:n,isEnoughToCoverFees:s}}));ae(g)}}),[B,H,h,Z,de,me,a]),Object(l.useEffect)((function(){Object(s.c)("".concat(g,"/gasPrice/").concat(a.id)).then((function(e){ee(e.data)})).catch((function(e){console.log("fetch error",e)}))}),[g,a]),Object(l.useEffect)((function(){var e=B.map((function(e){var r=Object(P.a)(a.id),s=new M.Contract(e.address,N,r);return e.native?{address:e.address,allowance:0,permittable:!1}:s.allowance(t,n).then((function(t){var n=!1;return T[a.chainId]&&(n=T[a.chainId].find((function(t){return t.address.toLowerCase()===e.address.toLowerCase()}))||!1),{address:e.address,allowance:t.toString(),permittable:n}})).catch((function(e){console.log("err getting allowance",e)}))}));Promise.all(e).then((function(e){he(e)}))}),[n,a,B,t]),Object(l.useEffect)((function(){k||y(Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(u.e,{clear:!0,small:!0,icon:Object(L.jsx)(A.i,{}),onClick:v,children:"Close"}),H.filter((function(e){return e.selected})).length>0&&_e(re,de)?Object(L.jsxs)(u.e,{small:!0,icon:Object(L.jsx)(A.R,{}),className:"primary",onClick:function(){return We()},children:["Move ",H.filter((function(e){return e.selected})).length," assets"]}):Object(L.jsx)(u.e,{small:!0,icon:Object(L.jsx)(A.R,{}),className:"primary disabled",children:"Move assets"})]}))}),[H,re,de,y,v,We,k]);var ze=Object(l.useCallback)((function(e,t){return De(t.address,(function(n){if(""===e)return Object(b.a)(Object(b.a)({},n),{},{humanAmount:0,amount:0});if(e.endsWith(".")&&2===e.split(".").length||2===e.split(".").length&&e.endsWith("0"))return Object(b.a)(Object(b.a)({},n),{},{humanAmount:e});if(!isNaN(e)){var r=new j.a(e).toFixed(t.decimals);return 1===new j.a(r).multipliedBy(Math.pow(10,t.decimals)).comparedTo(t.availableBalance)&&(r=new j.a(t.availableBalance).dividedBy(Math.pow(10,t.decimals)).toFixed(t.decimals)),r=r.replace(/\.?0+$/g,""),Object(b.a)(Object(b.a)({},n),{},{humanAmount:r,amount:new j.a(r).multipliedBy(Math.pow(10,t.decimals)).toFixed(0)})}return n}))}),[De]);return Object(l.useEffect)((function(){var e=["Selection"],t=H.find((function(e){return e.address.toLowerCase()===c&&e.selected}));if(t&&e.push("Send ".concat(B.find((function(e){return e.address===t.address})).name)),H.find((function(e){return e.address.toLowerCase()!==c&&e.selected}))){var n=[];H.find((function(e){return e.selected&&Le(a.chainId,e.address)}))&&n.push("Permit"),H.find((function(e){return e.selected&&e.address.toLowerCase()!==c&&!Le(a.chainId,e.address)}))&&n.push("Send"),e.push(n.join(" and ")+" tokens"),H.find((function(e){return e.selected&&Le(a.chainId,e.address)}))&&e.push("Transfer tokens")}1===e.length&&e.push("Send tokens"),w(e)}),[B,H,w,a]),k?Object(L.jsx)(L.Fragment,{}):Object(L.jsx)("div",{children:G?Object(L.jsxs)("div",{className:"content-center",children:[Object(L.jsx)("h3",{className:"mb-6",children:"Loading assets..."}),Object(L.jsx)(S.a,{})]}):Object(L.jsx)("div",{children:0===B.length?Object(L.jsx)("div",{children:"No assets to migrate have been found"}):Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{className:"mb-4",children:"Please select the assets you would like to migrate from your signer wallet to your Ambire wallet"}),He(B,H).sort((function(e,t){return e.name<t.name?-1:1})).map((function(e,t){return Object(L.jsxs)("div",{className:"migration-asset-row",children:[Object(L.jsx)("div",{className:"migration-asset-select".concat(e.selected?" checked":""),onClick:function(){return!1},children:Object(L.jsx)(u.g,{id:"check-".concat(e.address),label:Object(L.jsxs)("span",{className:"migration-asset-select-label",children:[Object(L.jsx)("span",{className:"migration-asset-select-icon",children:Q.includes(e.icon)||!e.icon?Object(L.jsx)(C.d,{size:18}):Object(L.jsx)("img",{src:e.icon,draggable:"false",alt:"Token Icon",onError:function(t){J((function(t){return[].concat(Object(m.a)(t),[e.icon])}))}})}),Object(L.jsx)("span",{className:"migration-asset-select-name",children:e.name})]}),checked:e.selected,onChange:function(){return Fe(e.address)}})}),Object(L.jsxs)("div",{className:"migration-asset-usd",children:["$",(e.amount*e.rate).toFixed(2)]}),Object(L.jsx)("div",{className:"migration-asset-amount",children:Object(L.jsx)(u.w,{className:"migrate-amount-input",value:e.humanAmount,onChange:function(t){return ze(t,e)}})})]},t)})),Object(L.jsx)("div",{className:"custom-token-row mt-2",children:ye?Object(L.jsx)("div",{children:we?Object(L.jsxs)("div",{className:"custom-token-message-fetching",children:[Object(L.jsx)(u.m,{}),"Fetching custom token data..."]}):Object(L.jsxs)(L.Fragment,{children:[Me&&Object(L.jsx)("div",{className:"error",children:Me}),Object(L.jsx)("div",{children:Object(L.jsx)(u.w,{className:"custom-token-input",placeholder:"Enter custom token address",value:Se,onChange:function(e){Ce(e)},ref:Ie})}),Object(L.jsxs)("div",{className:"flex-row mt-2",children:[Object(L.jsx)(u.e,{small:!0,icon:Object(L.jsx)(A.e,{}),className:"buttonHollow danger align-right",onClick:function(){ve(!1),Ce(""),Pe(null)},children:"Cancel"}),Object(L.jsx)(u.e,{small:!0,icon:Object(L.jsx)(A.D,{}),className:"primary ms-4",onClick:function(){return Be()},children:"Add"})]})]})}):Object(L.jsx)(u.e,{small:!0,icon:Object(L.jsx)(A.D,{}),className:"clear align-right",onClick:function(){return ve(!0)},children:"Add custom token"})}),!_e(re,de)&&H.filter((function(e){return e.selected})).length>0&&Object(L.jsxs)("div",{className:"notification-hollow warning mt-3 mb-3",children:["Your Ambire Wallet will not have enough fees to pay for the migration transaction.",!!Re(re,de).length&&Object(L.jsxs)("div",{className:"mt-3",children:["You should remove ERC20 tokens from the selection or add one of the following gas tokens :",Object(L.jsx)("ul",{className:"notification-gas-tokens",children:Re(re,de).map((function(e,t){return Object(L.jsx)("li",{children:Object(L.jsxs)("span",{className:"gas-token-suggestion",onClick:function(){return Fe(e.address,e.minimumSelectionAmount)},children:[e.name,Object(L.jsxs)("span",{className:"gas-token-amount",children:[" (min ",e.minimumSelectionAmount.toFixed(6),")"]})]})},t)}))})]}),!!Ue(re).length&&Object(L.jsxs)("div",{children:[Re(re,de).length?"You can also":"Please"," select a slower gas speed (",Ue(re).join(", "),")."]})]}),ie&&Object(L.jsxs)("div",{className:"gas-estimation-block mt-4",children:[Object(L.jsx)("div",{className:"gas-estimation-block-title",children:"Estimated gas fee"}),Object(L.jsx)("ul",{className:"gas-estimation-selector",children:Object.values(ie.gasFees).map((function(e,t){return Object(L.jsx)("li",{className:e.speed===de?"selected":"",onClick:function(){return fe(e.speed)},children:e.speed},t)}))}),Object(L.jsx)("table",{className:"gas-estimation-details",children:Object(L.jsxs)("tbody",{children:[Object(L.jsxs)("tr",{children:[Object(L.jsxs)("td",{children:["Migration fee",(!!ie.permittableTransfersCount||!!ie.permitsCount)&&Object(L.jsxs)("span",{className:"migration-actions",children:["(",!!ie.permittableTransfersCount&&Object(L.jsxs)("span",{children:[ie.permittableTransfersCount," transfer",ie.permittableTransfersCount>1&&"s",!!ie.permitsCount&&", "]}),!!ie.permitsCount&&Object(L.jsxs)("span",{children:[ie.permitsCount," permit",ie.permitsCount>1&&"s"]}),")"]})]}),Object(L.jsxs)("td",{className:"gas-estimation-details-amount",children:["$",ie.gasFees[de].migrationTransactionsCostUSD.toFixed(2)]})]}),Object(L.jsxs)("tr",{children:[Object(L.jsxs)("td",{children:["Signer fee",(!!ie.nativeTransfersCount||!!ie.regularTransfersCount)&&Object(L.jsx)("span",{className:"migration-actions",children:Object(L.jsxs)("span",{children:[ie.nativeTransfersCount+ie.regularTransfersCount," transfers"]})})]}),Object(L.jsxs)("td",{className:"gas-estimation-details-amount",children:["$",ie.gasFees[de].signerTransactionsCostUSD.toFixed(2)]})]})]})})]})]})})})},F=n(615),B=n(186),_=n(240),R=function(e){var t=e.addRequest,n=e.identityAccount,a=e.signer,i=e.signerExtra,o=e.network,u=e.selectedTokensWithAllowance,d=e.setError,h=e.hideModal,g=e.setStep,y=e.setModalButtons,x=e.relayerURL,O=e.gasSpeed,w=e.hidden,S=Object(l.useState)([]),I=Object(r.a)(S,2),D=I[0],R=I[1],U=Object(l.useState)({}),H=Object(r.a)(U,2),W=H[0],z=H[1],q=Object(l.useState)({}),G=Object(r.a)(q,2),V=G[0],K=G[1],Y=Object(l.useState)(!1),Q=Object(r.a)(Y,2),J=Q[0],$=Q[1],X=Object(l.useState)(null),Z=Object(r.a)(X,2),ee=Z[0],te=Z[1],ne=Object(l.useState)([]),re=Object(r.a)(ne,2),ae=re[0],se=re[1],ce=Object(l.useState)(null),ie=Object(r.a)(ce,2),oe=ie[0],ue=ie[1],le=Object(l.useState)(null),de=Object(r.a)(le,2),fe=de[0],pe=de[1],be=Object(l.useState)(null),me=Object(r.a)(be,2),he=me[0],je=me[1],ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return e.filter((function(e){return e.address!==c})).map((function(e){var a=Object(b.a)(Object(b.a)({},e),{},{signing:null,signature:null,sent:!1,pending:!1,allowance:0});return t[e.address]&&(a.signing=t[e.address].signing,a.signature=t[e.address].signature),n[e.address]&&(a.sent=!0),r[e.address]&&(a.pending=!0),a}))},ye=Object(l.useCallback)(Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===he||void 0===he?void 0:he.isConnected(a.address,o.chainId).then((function(e){return ue(e),!!e||(d(Object(L.jsxs)(L.Fragment,{children:["Please make sure your signer wallet is unlocked, and connected with ",Object(L.jsx)("b",{children:a.address})," to the correct chain: ",Object(L.jsx)("b",{children:o.id})]})),!1)})).catch((function(e){return d("Could not check signer connection status: "+e.error),!1})));case 1:case"end":return e.stop()}}),e)}))),[o,d,a,he]),ve=Object(l.useCallback)((function(){var e=0;return ge(u,D,W,[]).forEach((function(t){(t.permittable&&t.signature||t.sent)&&e++})),e}),[u,D,W]),xe=Object(l.useCallback)(function(){var e=Object(p.a)(f.a.mark((function e(t){var r,s,c,i,l,p,m,h,j,g,y,x,O;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=T[o.chainId].find((function(e){return e.address.toLowerCase()===t.toLowerCase()})))){e.next=32;break}if(-1===(s=u.findIndex((function(e){return e.address===t})))){e.next=32;break}return c=u[s],i=Object(P.a)(o.id),l=new M.Contract(t,N,i),e.next=9,r.nonceFunction?l[r.nonceFunction](a.address):l.nonces(a.address);case 9:return p=e.sent.toString(),e.next=12,l.name();case 12:return m=e.sent,h=c.amount,j={owner:a.address,spender:n,value:h,nonce:p,deadline:"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"},r.permitType===v&&(j.allowed=!0,delete j.value,j.holder=j.owner,delete j.owner,j.expiry=j.deadline,delete j.deadline),g={chainId:o.chainId,verifyingContract:t},r.name&&(g.name=m),r.version&&(g.version=r.version),r.salt&&(g.salt=r.salt),r.domainType===k&&delete g.chainId,K((function(e){return e[t]=!0,Object(b.a)({},e)})),e.next=24,he._signTypedData(g,{Permit:r.permitType},j).catch((function(e){4001===(null===e||void 0===e?void 0:e.code)?(R((function(e){return e[t]=Object(b.a)(Object(b.a)({},e[t]),{},{signing:!1,signature:null}),Object(b.a)({},e)})),$(!0)):-32603===(null===e||void 0===e?void 0:e.code)?e.message.includes("Not supported on this device")?d("Your signer wallet does not support 712 signatures"):e.message.includes("must match the active chainId")?d("Please connect your signser wallet to the correct network: "+o.id):d(e.message):d(e.message),K((function(e){return e[t]=!1,Object(b.a)({},e)}))}));case 24:if(y=e.sent){e.next=27;break}return e.abrupt("return",!1);case 27:return x={r:y.slice(0,66),s:"0x"+y.slice(66,130),v:parseInt(y.slice(130,132),16)},O=r.permitType===v?N.encodeFunctionData("permit(address holder, address spender, uint256 nonce, uint256 expiry, bool allowed, uint8 v, bytes32 r, bytes32 s)",[j.holder,j.spender,p,j.expiry,j.allowed,x.v,x.r,x.s]):N.encodeFunctionData("permit(address owner, address spender, uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s)",[j.owner,j.spender,h,j.deadline,x.v,x.r,x.s]),R((function(e){return e[t]=Object(b.a)(Object(b.a)({},e[t]),{},{signing:!0,signature:O}),Object(b.a)({},e)})),K((function(e){return e[t]=!1,Object(b.a)({},e)})),e.abrupt("return",!0);case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,u,a,n,d,he]),Oe=Object(l.useCallback)(function(){var e=Object(p.a)(f.a.mark((function e(t){var r,s,c,i,l=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]&&l[1],e.next=3,ye();case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:if(s=u.find((function(e){return e.address===t}))){e.next=8;break}return e.abrupt("return");case 8:return c=N.encodeFunctionData("transfer",[n,new j.a(s.amount).toFixed(0)]),K((function(e){return e[t]=!0,Object(b.a)({},e)})),te(null),i=he.sendTransaction({from:a.address,to:t,data:c,gasLimit:8e4,gasPrice:fe,chainId:o.chainId}).then(function(){var e=Object(p.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R((function(e){return e[t]=Object(b.a)(Object(b.a)({},e[t]),{},{signing:!0}),Object(b.a)({},e)})),!r){e.next=7;break}return e.next=4,n.wait();case 4:z((function(e){return e[t]=!0,Object(b.a)({},e)})),K((function(e){return e[t]=!1,Object(b.a)({},e)})),R((function(e){return e[t]=Object(b.a)(Object(b.a)({},e[t]),{},{signing:!1}),Object(b.a)({},e)}));case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return K((function(e){return e[t]=!1,Object(b.a)({},e)})),e.message.includes("underpriced")?te("Transaction fee underpriced"):te(e.message),$(!0),(!D[t]||D[t]&&!1!==D[t].signing)&&R((function(e){return e[t]=Object(b.a)(Object(b.a)({},e[t]),{},{signing:!1}),Object(b.a)({},e)})),!1})),e.abrupt("return",!!i);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[he,n,D,u,fe,o,a,ye]),we=Object(l.useCallback)((function(){d(null),z([]),R([]),$(!1),g(0)}),[d,R,z,g]),ke=Object(l.useCallback)((function(){ge(u,D,W,V).forEach((function(e){if(e.permittable){e.allowance&&E.ethers.BigNumber.from(e.allowance).gte(e.amount)||t({id:"req-"+Math.random(),chainId:o.chainId,account:n,type:"eth_sendTransaction",txn:{to:e.address,value:"0x0",data:e.signature}});var r=N.encodeFunctionData("transferFrom",[a.address,n,e.amount]);t({id:"req-"+Math.random(),chainId:o.chainId,account:n,type:"eth_sendTransaction",txn:{to:e.address,value:"0x0",data:r}})}})),we(),h()}),[t,we,h,n,o,u,a,W,V,D]);return Object(l.useEffect)((function(){je(Object(F.a)({signer:a,signerExtra:i,chainId:o.chainId}))}),[o,a,i]),Object(l.useEffect)((function(){ye()}),[ye]),Object(l.useEffect)((function(){var e="".concat(x,"/gasPrice/").concat(o.id);Object(s.c)(e).then((function(e){var t=e.data.gasPrice[O];e.data.gasPrice.maxPriorityFeePerGas&&(t+=e.data.gasPrice.maxPriorityFeePerGas[O]),pe(t)})).catch((function(t){d(t.message+" "+e)}))}),[o,x,d,O]),Object(l.useEffect)((function(){if(oe&&Object.values(W).length&&fe){var e=ge(u,D,W,[]).map((function(e){return{address:e.address,signed:e.signing,permittable:e.permittable}})).find((function(e){return null===e.signed}));e&&(e.permittable?xe(e.address):setTimeout((function(){Oe(e.address,!0)}),150))}}),[u,xe,Oe,D,W,oe,fe]),Object(l.useEffect)((function(){if(u.length){var e={};u.forEach((function(t){e[t.address]=!1})),z(e)}}),[u,z]),Object(l.useEffect)((function(){J&&d("Every asset below needs to be sent or permitted to complete the migration"+(ee?" ("+ee+")":""))}),[J,d,ee]),Object(l.useEffect)((function(){ve()===u.length&&d(null)}),[ve,u,d]),Object(l.useEffect)((function(){w||y(Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(_.a,{className:"clear",icon:Object(L.jsx)(A.Q,{}),onClick:function(){return we()},children:"Back"}),u.find((function(e){return e.permittable}))?ve()===ge(u).length?Object(L.jsx)(_.a,{className:"primary",icon:Object(L.jsx)(A.R,{}),onClick:function(){return ke()},children:"Move tokens"}):Object(L.jsx)(_.a,{className:"primary disabled",icon:Object(L.jsx)(A.R,{}),children:"Move tokens"}):ve()===ge(u).length?Object(L.jsx)(_.a,{className:"primary",icon:Object(L.jsx)(A.R,{}),onClick:function(){return h()},children:"Close"}):Object(L.jsx)(_.a,{className:"primary disabled",icon:Object(L.jsx)(A.R,{}),children:"Complete"})]}))}),[we,ke,ve,u,y,w,h]),w?Object(L.jsx)(L.Fragment,{}):Object(L.jsxs)("div",{children:[ve()<ge(u).length?Object(L.jsx)("div",{className:"small-asset-notification mb-3 warning",children:"".concat(ge(u).length-ve()," actions left to complete the migration")}):Object(L.jsx)("div",{className:"small-asset-notification mb-3 success",children:u.find((function(e){return e.permittable}))?"Your tokens are ready to be migrated":"Your tokens were migrated. You can close this window"}),ge(u,D,W,V).map((function(e,t){return Object(L.jsxs)("div",{className:"migration-asset-row",children:[Object(L.jsx)("span",{className:"migration-asset-select-icon migration-asset-select-icon-permit",children:!e.icon||ae.includes(e.icon)?Object(L.jsx)(C.d,{size:18}):Object(L.jsx)("img",{src:e.icon,draggable:"false",alt:"Token Icon",onError:function(t){se((function(t){return[].concat(Object(m.a)(t),[e.icon])}))}})}),Object(L.jsx)("div",{className:"migration-asset-name",children:e.name}),Object(L.jsxs)("div",{className:"migration-asset-amount",children:[new j.a(e.amount).div(Math.pow(10,e.decimals)).toFixed()," ",Object(L.jsxs)("span",{className:"migration-asset-amount-usd",children:["($",(e.amount*e.rate).toFixed(2),")"]})]}),Object(L.jsx)("div",{className:"separator"}),Object(L.jsx)("div",{children:e.allowance&&E.ethers.BigNumber.from(e.allowance).gte(e.amount)||e.sent?Object(L.jsxs)("div",{className:"migration-permitted",onClick:function(){return Oe(e.address)},children:[Object(L.jsx)(B.b,{})," Sent"]}):Object(L.jsx)(L.Fragment,{children:e.permittable?Object(L.jsxs)(L.Fragment,{children:[!e.signature&&!e.pending&&Object(L.jsx)("button",{className:"buttonComponent button-small secondary",onClick:function(){return xe(e.address)},children:"Permit"}),!e.signature&&e.pending&&Object(L.jsxs)("div",{className:"migration-permitted warning",children:[Object(L.jsx)(B.d,{})," Permitting..."]}),e.signature&&Object(L.jsxs)("div",{className:"migration-permitted",children:[Object(L.jsx)(B.b,{})," Permitted"]})]}):Object(L.jsx)(L.Fragment,{children:e.pending||e.signing?Object(L.jsxs)("div",{className:"migration-permitted warning",children:[Object(L.jsx)(B.d,{})," Sending..."]}):Object(L.jsx)(_.a,{className:"button-small secondary",onClick:function(){return Oe(e.address)},children:"Send"})})})})]},t)}))]})},U=function(e){var t,n=e.identityAccount,a=e.signer,c=e.signerExtra,i=e.network,o=e.nativeTokenData,d=e.setSelectedTokensWithAllowance,b=e.selectedTokensWithAllowance,h=e.setError,g=e.setStep,y=e.hasERC20Tokens,v=e.hideModal,x=e.relayerURL,O=e.setModalButtons,w=e.setBeforeCloseModalHandler,k=e.gasSpeed,T=e.hidden,N=Object(l.useState)([]),S=Object(r.a)(N,2),E=S[0],M=S[1],P=Object(l.useState)(!1),I=Object(r.a)(P,2),D=I[0],B=I[1],_=Object(l.useState)(!1),R=Object(r.a)(_,2),U=R[0],H=R[1],W=Object(l.useState)("0"),z=Object(r.a)(W,2),q=z[0],G=z[1],V=Object(l.useState)(null),K=Object(r.a)(V,2),Y=K[0],Q=K[1],J=Object(l.useState)("0"),$=Object(r.a)(J,2),X=$[0],Z=$[1],ee=Object(l.useState)("0"),te=Object(r.a)(ee,2),ne=te[0],re=te[1],ae=Object(l.useState)(!1),se=Object(r.a)(ae,2),ce=se[0],ie=se[1],oe=Object(l.useState)(null),ue=Object(r.a)(oe,2),le=ue[0],de=ue[1];try{t=Object(F.a)({signer:a,signerExtra:c,chainId:i.chainId})}catch(ge){h("No Web3 wallet connected. Please connect a Web3 wallet and reload the page")}var fe=Object(l.useCallback)((function(){g(0),d([])}),[d,g]),pe=Object(l.useCallback)((function(){g(2)}),[g]),be=function(e){return e.filter((function(e){return e.selected&&!e.permittable&&!e.native})).length},me=Object(l.useCallback)(Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return h(null),H(!0),y||w(null),e.next=7,t.isConnected(a.address,i.chainId).catch((function(e){h("Could not check signer connection status: "+e.error)}));case 7:e.sent?t.sendTransaction({from:a.address,to:n,gasLimit:25e3+("arbitrum"===i.id?2e5:0),gasPrice:le,value:"0x"+new j.a(q).toString(16),chainId:i.chainId}).then(function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wait();case 2:return B(!0),H(!1),e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return B(!1),H(!1),e&&e.message.includes("must provide an Ethereum address")?h("Make sure your wallet is unlocked and connected with ".concat(a.address,".")):h("Native asset migration failed: "+e.message),!1})):(h(Object(L.jsxs)(L.Fragment,{children:["Please make sure your signer wallet is unlocked, and connected with ",Object(L.jsx)("b",{children:a.address})," to the correct chain: ",Object(L.jsx)("b",{children:i.id})]})),H(!1));case 9:case"end":return e.stop()}}),e)}))),[t,h,y,i,w,a,n,q,le]),he=Object(l.useCallback)((function(e){var t=new j.a(e).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals).replace(/\.?0+$/g,"");re(t),G(e),ie(!0)}),[o]);Object(l.useEffect)((function(){var e="".concat(x,"/gasPrice/").concat(i.id);Object(s.c)(e).then((function(e){var t=e.data.gasPrice[k];e.data.gasPrice.maxPriorityFeePerGas&&(t+=e.data.gasPrice.maxPriorityFeePerGas[k]);var n=25e3*t,r=be(b)*t*77e3;Z(new j.a((n+r).toFixed(0)).toFixed(0));var a=new j.a(o.availableBalance).minus(n+r);Q(a.gte(0)?a.toFixed(0):0),de(t)})).catch((function(t){h(t.message+" "+e)}))}),[Z,Q,o,i,x,h,k,b]);var je=Object(l.useCallback)((function(e){if(ie(!0),""===e)return re(0),void G(0);if(e.endsWith(".")&&2===e.split(".").length||2===e.split(".").length&&e.endsWith("0"))re(e);else if(!isNaN(e)){var t=new j.a(e).toFixed(o.decimals);1===new j.a(t).multipliedBy(Math.pow(10,o.decimals)).comparedTo(o.availableBalance)&&(t=new j.a(o.availableBalance).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals)),t=t.replace(/\.?0+$/g,""),re(t),G(new j.a(t).multipliedBy(Math.pow(10,o.decimals)).toFixed(0))}}),[o]);return Object(l.useEffect)((function(){var e=new j.a(o.amount).dividedBy(Math.pow(10,o.decimals)).toFixed(o.decimals).replace(/\.?0+$/g,"");re(e),G(o.amount)}),[o]),Object(l.useEffect)((function(){if(!T){O(function(){var e=[];return D?y?e.push(Object(L.jsx)(u.e,{icon:Object(L.jsx)(A.R,{}),className:"primary full",onClick:function(){return pe()},children:"Next"})):e.push(Object(L.jsx)(u.e,{icon:Object(L.jsx)(A.i,{}),className:"primary full",onClick:function(){return v()},children:"Close"})):t?(e.push(Object(L.jsx)(u.e,{icon:Object(L.jsx)(A.Q,{}),className:"clear",onClick:function(){return fe()},children:"Back"},"0")),U?e.push(Object(L.jsxs)(u.e,{icon:Object(L.jsx)(u.m,{}),className:"primary disabled",children:["Moving ",o.name,"..."]},"1")):e.push(Object(L.jsxs)(u.e,{icon:Object(L.jsx)(A.R,{}),className:"primary",onClick:function(){return me()},children:["Move ",o.name]},"1"))):e.push(Object(L.jsx)(u.e,{icon:Object(L.jsx)(A.i,{}),className:"clear full",onClick:function(){return v()},children:"Close"})),e}())}}),[D,y,O,v,U,fe,me,pe,t,o,T]),T?Object(L.jsx)(L.Fragment,{}):Object(L.jsx)("div",{children:t&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:"migration-native-title mb-4",children:[Object(L.jsx)("div",{className:"migration-native-asset-icon",children:E.includes(o.icon)?Object(L.jsx)(C.d,{size:64}):Object(L.jsx)("img",{src:o.icon,draggable:"false",alt:"Token Icon",onError:function(e){M((function(e){return[].concat(Object(m.a)(e),[o.icon])}))}})}),Object(L.jsxs)("div",{className:"migration-native-title-asset-name",children:["Migrate native asset ",Object(L.jsx)("b",{children:o.name})]})]}),D?Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)("div",{className:"small-asset-notification success",children:["Migration of your ",o.name," was successful"]})}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:"migration-native-row",children:[Object(L.jsx)("span",{className:"migration-native-row-key",children:"Current balance"}),Object(L.jsxs)("span",{className:"migration-native-selection",onClick:function(){return he(o.availableBalance)},children:[new j.a(o.availableBalance).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name]})]}),Object(L.jsxs)("div",{className:"migration-native-row",children:[Object(L.jsx)("span",{className:"migration-native-row-key",children:"Amount to migrate"}),ce||null!==Y&&q>Y?Object(L.jsx)(u.w,{className:"migrate-amount-input",value:ne,onChange:je}):Object(L.jsx)("div",{children:ne})]}),null!==Y&&q>Y&&Object(L.jsxs)("div",{className:"notification-hollow warning mt-4",children:[Object(L.jsxs)("div",{children:[be(b)?"Signer transactions cost":"Current Transaction cost",": ~",new j.a(X).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name,Object(L.jsxs)("span",{className:"migration-native-usd",children:[" ($",new j.a(X).multipliedBy(o.rate).toFixed(2),")"]})]}),Object(L.jsx)("div",{className:"mt-3 mb-3",children:Y>0?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("span",{children:"You should migrate up to "}),Object(L.jsxs)("span",{className:"migration-native-selection",onClick:function(){return he(Y)},children:[new j.a(Y).dividedBy(Math.pow(10,o.decimals)).toFixed(6)," ",o.name]}),Object(L.jsx)("span",{children:" because will you need funds to pay the transaction costs."})]}):Object(L.jsx)("span",{children:"You do not have enough funds to pay the transaction fee."})})]}),U&&y&&Object(L.jsx)("div",{className:"notification-hollow info mt-4",children:"Waiting for the transaction to be mined before continuing migration..."}),U&&!y&&Object(L.jsxs)("div",{className:"notification-hollow info mt-4",children:["The amount of ",o.name," will be updated in your wallet, once the transaction has been confirmed and mined. If you confirmed your transaction, you can already close this window"]})]})]})})},H=function(e){var t=e.addRequest,n=e.selectedAccount,a=e.accounts,s=e.network,c=e.hideModal,i=e.relayerURL,o=e.portfolio,d=e.setModalButtons,f=e.setModalSteps,p=e.setBeforeCloseModalHandler,b=Object(l.useState)([]),m=Object(r.a)(b,2),h=m[0],j=m[1],g=Object(l.useState)(null),y=Object(r.a)(g,2),v=y[0],x=y[1],O=Object(l.useState)(!1),w=Object(r.a)(O,2),k=w[0],N=w[1],S=Object(l.useState)(!1),C=Object(r.a)(S,2),E=C[0],M=C[1],P=Object(l.useState)(0),I=Object(r.a)(P,2),F=I[0],B=I[1],_=Object(l.useState)([]),H=Object(r.a)(_,2),W=H[0],z=H[1],q=Object(l.useState)(null),G=Object(r.a)(q,2),V=G[0],K=G[1],Y=Object(l.useState)(!1),Q=Object(r.a)(Y,2),J=Q[0],$=Q[1],X=Object(l.useState)(null),Z=Object(r.a)(X,2),ee=Z[0],te=Z[1],ne=a.find((function(e){return e.id===n}));return Object(l.useEffect)((function(){0===F&&(K(null),j([]),x(null),N(!1),te(null),p(null))}),[s,n,F,p]),Object(l.useEffect)((function(){E&&(M(!1),x(h.find((function(e){return e.native}))),N(!!h.find((function(e){return!e.native}))))}),[E,ne,h,s,n]),Object(l.useEffect)((function(){var e=F;F>0&&!v&&(e-=1),f({steps:W.map((function(e){return{name:e}})),stepIndex:e})}),[v,f,F,W]),Object(l.useEffect)((function(){var e=function(){$(!0),d([Object(L.jsx)(u.e,{icon:Object(L.jsx)(A.Q,{}),className:"clear",onClick:function(){return $(!1)},children:"Back"},"0"),Object(L.jsx)(u.e,{icon:Object(L.jsx)(A.i,{}),className:"danger",onClick:function(){return c()},children:"Close"},"1")])};F>0&&p((function(){return e}))}),[F,p,d,c,J]),Object(L.jsxs)("div",{children:[V&&Object(L.jsx)("div",{className:"mt-3 error",children:V}),Object(L.jsxs)("div",{id:"assets-migration",children:[J&&Object(L.jsx)("div",{className:"notification-hollow warning mt-4",children:"By closing this window, your progress will be lost. Are you sure you want to close this window?"}),0===F&&Object(L.jsx)(D,{hidden:J,signerAccount:ne.signer.address,identityAccount:n,network:s,PERMITTABLE_COINS:T,setIsSelectionConfirmed:M,setStep:B,portfolio:o,relayerURL:i,setModalButtons:d,hideModal:c,setError:K,setSelectedTokensWithAllowance:j,setStepperSteps:z,setGasSpeed:te}),1===F&&v&&Object(L.jsx)(U,{hidden:J,signer:ne.signer,identityAccount:n,network:s,addRequest:t,signerExtra:ne.signerExtra,setError:K,nativeTokenData:v,hideModal:c,setStep:B,relayerURL:i,hasERC20Tokens:k,setModalButtons:d,setSelectedTokensWithAllowance:j,selectedTokensWithAllowance:h,setBeforeCloseModalHandler:p,gasSpeed:ee}),2===F&&Object(L.jsx)(R,{hidden:J,signer:ne.signer,identityAccount:n,network:s,addRequest:t,PERMITTABLE_COINS:T,signerExtra:ne.signerExtra,setError:K,selectedTokensWithAllowance:h,hideModal:c,setStep:B,setModalButtons:d,gasSpeed:ee,relayerURL:i})]})]})},W=function(e){var t=e.addRequest,n=e.selectedAccount,a=e.selectedNetwork,s=e.accounts,c=e.relayerURL,i=e.portfolio,d=Object(o.f)(),f=d.hideModal,p=d.setBeforeCloseModalHandler,b=Object(l.useState)(null),m=Object(r.a)(b,2),h=m[0],j=m[1],g=Object(l.useState)({steps:[],stepIndex:0}),y=Object(r.a)(g,2),v=y[0],x=y[1];return Object(L.jsx)(u.n,{id:"asset-migration-modal",title:Object(L.jsxs)("div",{children:[Object(L.jsx)("span",{children:"Migrate Assets"}),Object(L.jsx)(u.v,{steps:v.steps,currentStep:v.stepIndex,noLabels:!1})]}),buttons:h,children:Object(L.jsx)(H,{addRequest:t,selectedAccount:n,network:a,accounts:s,hideModal:f,relayerURL:c,portfolio:i,setModalButtons:j,setModalSteps:x,setBeforeCloseModalHandler:p})})};t.a=function(e){var t,n,a=e.addRequest,s=e.selectedAccount,c=e.accounts,u=e.selectedNetwork,d=e.relayerURL,f=e.portfolio,p=e.closeable,b=void 0!==p&&p,m=e.linkMargin,h=void 0!==m&&m,j=e.useStorage,g=Object(l.useState)(!1),y=Object(r.a)(g,2),v=y[0],x=y[1],O=Object(l.useState)(!1),w=Object(r.a)(O,2),k=w[0],T=w[1],N=Object(o.f)().showModal,S=j({key:"migrationSeen",defaultValue:{}}),C=Object(r.a)(S,2),A=C[0],E=C[1],M=c.find((function(e){return e.id===s}));try{n=Object(F.a)({signer:M.signer,signerExtra:M.signerExtra,chainId:u.chainId})}catch(I){}var P=Object(l.useCallback)((function(){T(!0),E((function(e){return e[s+u.id]=!0,e}))}),[s,u,E]);Object(l.useEffect)((function(){var e=!1;x(!1);return function(t){var n=t.networkId,r=t.identityAccount,a=t.accounts.find((function(e){return e.id===r}));a.signer&&i({networkId:n,account:a.signer.address}).then((function(t){if(!e){var n=t.filter((function(e){return e.balanceUSD>.001}));x(!!n.length)}})).catch((function(e){console.error(e)}))}({identityAccount:s,networkId:u.id,accounts:c}),function(){return e=!0}}),[s,u,c]),Object(l.useEffect)((function(){T(b&&!!A[s+u.id])}),[b,s,u,A]);return(null===(t=n)||void 0===t?void 0:t.provider)||M.signerExtra&&["ledger","trezor","Lattice"].includes(M.signerExtra.type)?v&&!k&&Object(L.jsxs)("div",{className:"migration-banner",children:[Object(L.jsxs)("div",{className:"migration-banner-message",children:[Object(L.jsx)("div",{children:"We detected that your signer account has tokens that can be transferred to your Ambire account. We recommend doing this in order to maximize your $WALLET rewards."}),Object(L.jsx)("span",{className:"link"+(h?" link-margin":""),onClick:function(){N(Object(L.jsx)(W,{addRequest:a,selectedNetwork:u,selectedAccount:s,accounts:c,relayerURL:d,portfolio:f}))},children:"Click here to migrate those tokens"})]}),b&&Object(L.jsx)("div",{className:"migration-banner-close",children:Object(L.jsx)(B.g,{onClick:function(){return P()}})})]}):Object(L.jsx)(L.Fragment,{})}}}]);
//# sourceMappingURL=10.1c262dd4.chunk.js.map