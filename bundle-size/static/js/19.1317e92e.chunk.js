(this["webpackJsonpambire-wallet"]=this["webpackJsonpambire-wallet"]||[]).push([[19],{1530:function(e,t,s){},1531:function(e,t,s){},1532:function(e,t,s){},1609:function(e,t,s){"use strict";s.r(t);var n=s(2),a=s.n(n),r=s(11),c=s(8),o=(s(1530),s(152)),i=s(230),u=s(36),d=s(30),l=s(3),b=s(52),m=s(21),p=s(44),f=s(79),j=s(694),v=s(238),h=s(92),O=(s(1531),s(310)),y=s(7),g=(s(1532),s(37)),x=s(239),w=s(4),A=function(e){var t=e.title,s=e.inputs,n=e.selectedNetwork,o=e.onClose,i=Object(g.f)().hideModal,d=Object(l.useState)(!0),b=Object(c.a)(d,2),m=b[0],p=b[1],j=Object(l.useState)(""),h=Object(c.a)(j,2),O=h[0],A=h[1],k=Object(l.useState)(""),N=Object(c.a)(k,2),S=N[0],_=N[1],C=Object(l.useRef)(null),T=Object(l.useMemo)((function(){return s.map((function(e){return Object(y.a)(Object(y.a)({},e),{},{ref:Object(l.createRef)()})}))}),[s]),M=function(){var e=Object(r.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)(t,null,n.unstoppableDomainsChain);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){C.current&&clearTimeout(C.current);var e=function(){var e=Object(r.a)(a.a.mark((function e(){var t,s,n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=T.find((function(e){return"address"===e.inputType})),s=t&&t.ref&&t.ref.current.value){e.next=4;break}return e.abrupt("return");case 4:if(n=null,r=null,!t){e.next=15;break}return e.next=9,M(s);case 9:return n=e.sent,e.next=12,Object(x.b)(s);case 12:r=e.sent,C.current=null,n?A(n):r&&_(r);case 15:c=T.map((function(e){var t=e.ref,s=e.validate,a="address"===e.inputType,c=a&&n?n:a&&r?r:t.current.value;return s?s(c):!!c})).every((function(e){return!0===e})),p(!c);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();C.current=setTimeout(Object(r.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e().catch(console.error));case 1:case"end":return t.stop()}}),t)}))),500)},E=Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(f.e,{clear:!0,small:!0,icon:Object(w.jsx)(u.i,{}),onClick:i,children:"Cancel"}),Object(w.jsx)(f.e,{small:!0,icon:Object(w.jsx)(u.g,{}),disabled:m,onClick:function(){var e=T.map((function(e){return e.ref.current.value}));O?e.push({type:"ud"}):S?e.push({type:"ens"}):e.push({type:"pub"}),o&&o(e),i()},children:"Confirm"})]});return Object(w.jsx)(f.n,{id:"input-modal",title:t,buttons:E,children:T.map((function(e){var t=e.id,s=e.label,n=e.placeholder,a=e.ref,r=e.type;return Object(w.jsxs)("div",{children:[Object(w.jsx)(f.w,{label:s,placeholder:n,onInput:L,ref:a}),"address"===r&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(f.y,{label:O?"Valid Unstoppable domains\u24c7 domain":"You can use Unstoppable domains\u24c7",children:Object(w.jsx)("span",{id:"udomains-logo",className:O?"ud-logo-active ":""})}),Object(w.jsx)(f.y,{label:S?"Valid Ethereum Name Services\u24c7 domain":"You can use Ethereum Name Service\u24c7",children:Object(w.jsx)("div",{id:"ens-logo",className:S?"ens-logo-active ":""})})]})]},t+s)}))})},k=function(e){var t=e.addresses,s=e.addAddress,n=e.removeAddress,a=e.onSelectAddress,r=e.selectedNetwork,o=Object(g.f)().showModal,i=[{inputType:"name",label:"Name",placeholder:"Address title"},{inputType:"address",label:"Address / Unstoppable domains\u24c7 / ENS\u24c7",placeholder:"Address / Unstoppable Domains / ENS",validate:function(e){return Object(h.b)(e)}}],d=Object(w.jsx)(A,{title:"Add New Address",selectedNetwork:r,inputs:i,onClose:function(e){var t=Object(c.a)(e,3),n=t[0],a=t[1],r=t[2];return s(n,a,r)}});return Object(w.jsxs)("div",{id:"addresses",className:"panel",children:[Object(w.jsx)("div",{className:"title",children:"Address Book"}),Object(w.jsx)("div",{className:"content",children:Object(w.jsx)(O.a,{noAccounts:!0,addresses:t,removeAddress:n,onSelectAddress:a})}),Object(w.jsx)("div",{className:"separator"}),Object(w.jsx)(f.e,{icon:Object(w.jsx)(u.C,{}),onClick:function(){return o(d)},children:"Add Address"})]})},N=s(60),S=s(595),_=s(604),C=s(151),T=new m.Interface(s(605)),M=["Binance","Huobi","KuCoin","Gate.io","FTX"];t.default=Object(d.withRouter)((function(e){var t,s=e.history,n=e.portfolio,m=e.selectedAcc,O=e.selectedNetwork,y=e.addRequest,g=e.addressBook,A=g.addresses,L=g.addAddress,E=g.removeAddress,F=g.isKnownAddress,I=Object(d.useParams)().tokenAddressOrSymbol,U=Object(p.a)().addToast,R=Object(d.useLocation)().state,D=Object(l.useState)(R||null),B=Object(c.a)(D,1)[0],P=Object(h.b)(I)?I:(null===(t=n.tokens.find((function(e){return e.symbol===I})))||void 0===t?void 0:t.address)||null,Y=Object(l.useState)(P),J=Object(c.a)(Y,2),V=J[0],z=J[1],K=Object(l.useState)(0),X=Object(c.a)(K,2),G=X[0],H=X[1],q=Object(l.useState)(""),W=Object(c.a)(q,2),$=W[0],Q=W[1],Z=Object(l.useState)(B?C.a.feeCollector:""),ee=Object(c.a)(Z,2),te=ee[0],se=ee[1],ne=Object(l.useState)(""),ae=Object(c.a)(ne,2),re=ae[0],ce=ae[1],oe=Object(l.useState)(""),ie=Object(c.a)(oe,2),ue=ie[0],de=ie[1],le=Object(l.useState)(!0),be=Object(c.a)(le,2),me=be[0],pe=be[1],fe=Object(l.useState)(!1),je=Object(c.a)(fe,2),ve=je[0],he=je[1],Oe=Object(l.useState)(!1),ye=Object(c.a)(Oe,2),ge=ye[0],xe=ye[1],we=Object(l.useState)(""),Ae=Object(c.a)(we,2),ke=Ae[0],Ne=Ae[1],Se=Object(l.useState)({success:{amount:!1,address:!1},messages:{amount:"",address:""}}),_e=Object(c.a)(Se,2),Ce=_e[0],Te=_e[1],Me=Object(l.useState)(""),Le=Object(c.a)(Me,2),Ee=Le[0],Fe=Le[1],Ie=Object(l.useRef)(null),Ue=((null===B||void 0===B?void 0:B.feeAssetsPerNetwork)?n.tokens.filter((function(e){return null===B||void 0===B?void 0:B.feeAssetsPerNetwork.some((function(t){return t.address.toLowerCase()===e.address.toLowerCase()}))})):n.tokens).map((function(e){var t=e.label,s=e.symbol,n=e.address,a=e.img,r=e.tokenImageUrl,c=e.network;return{label:t||s,value:n,icon:a||r,fallbackIcon:Object(S.a)(c,n)}})),Re=n.tokens.find((function(e){return e.address===V})),De=Object(l.useMemo)((function(){if(!Re)return{maxAmount:"0",maxAmountFormatted:"0.00"};var e=Re.balanceRaw,t=Re.decimals,s=Re.balance;return{maxAmount:b.ethers.utils.formatUnits(e,t),maxAmountFormatted:Object(_.a)(s,!0,t)}}),[Re]),Be=De.maxAmount,Pe=De.maxAmountFormatted,Ye=Object(l.useMemo)((function(){return!B&&0===Number(P)&&N.a.map((function(e){return e.id})).filter((function(e){return"ethereum"!==e})).includes(O.id)}),[B,P,O.id]),Je=function(e){if(e){var t=Re.decimals,s=b.ethers.utils.parseUnits(e,t).toHexString();Q(s)}H(e)};Object(l.useEffect)((function(){if(Fe(""),null===B||void 0===B?void 0:B.feeAssetsPerNetwork){var e=B.feeAssetsPerNetwork.find((function(e){var t,s;return(null===e||void 0===e||null===(t=e.address)||void 0===t?void 0:t.toLowerCase())===(null===Re||void 0===Re||null===(s=Re.address)||void 0===s?void 0:s.toLowerCase())}));if(null===e||void 0===e?void 0:e.baseToken){var t=B.feeAssetsPerNetwork.find((function(t){return t.address.toLowerCase()===e.baseToken.toLowerCase()}));Fe("Token ".concat(e.symbol.toUpperCase()," will be converted to ").concat(t.symbol.toUpperCase()," without additional fees."))}}}),[null===B||void 0===B?void 0:B.feeAssetsPerNetwork,Re]),Object(l.useEffect)((function(){H(0),Q(""),xe(!1)}),[V,O.id]),Object(l.useEffect)((function(){Re&&s.replace({pathname:"/wallet/transfer/".concat(0!==Number(V)?V:Re.symbol)})}),[V,s,Re]),Object(l.useEffect)((function(){var e=Object(j.d)(G,Re);if(te.startsWith("0x")&&-1===te.indexOf(".")){""!==re&&ce(""),""!==ue&&de("");var t=Object(j.c)(te,m,ve,F);Te({success:{amount:e.success,address:t.success},messages:{amount:e.message?e.message:"",address:t.message?t.message:""}}),pe(!t.success||!e.success||Ye&&!ge)}else{Ie.current&&clearTimeout(Ie.current);var s=function(){var t=Object(r.a)(a.a.mark((function t(){var s,n,r,c,o,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(v.a)(te,Re?Re.symbol:null,O.unstoppableDomainsChain);case 2:return s=t.sent,n=Object(x.a)(Re?Re.symbol:null),t.next=6,Object(x.b)(te,n);case 6:r=t.sent,Ie.current=null,c=!!s,i="",i=(o=!!r)?r:c?s:te,u=Object(j.c)(i,m,ve,F,c,o),ce(s),de(r),Te({success:{amount:e.success,address:u.success},messages:{amount:e.message?e.message:"",address:u.message?u.message:""}}),pe(!u.success||!e.success||Ye&&!ge);case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Ie.current=setTimeout(Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s().catch(console.error));case 1:case"end":return e.stop()}}),e)}))),300)}return function(){return clearTimeout(Ie.current)}}),[te,G,m,Re,ve,Ye,ge,F,U,O,L,re,me,ue]);var Ve=Object(w.jsxs)("div",{className:"amount-label",children:["Available Amount: ",Object(w.jsxs)("span",{children:[Pe," ",null===Re||void 0===Re?void 0:Re.symbol]})]});return Object(w.jsxs)("div",{id:"transfer",style:{justifyContent:B?"center":""},children:[Object(w.jsxs)("div",{className:"panel",children:[Object(w.jsx)("div",{className:"title",children:"Send"}),n.isCurrNetworkBalanceLoading?Object(w.jsx)(f.m,{}):Ue.length?Object(w.jsxs)("div",{className:"form",children:[Object(w.jsx)(f.t,{searchable:!0,defaultValue:V,items:Ue.sort((function(e,t){return e.label.toLowerCase()>t.label.toLowerCase()?1:-1})),onChange:function(e){var t=e.value;return z(t)}}),Ee?Object(w.jsxs)("p",{className:"gas-tank-convert-msg",children:[Object(w.jsx)(u.db,{})," ",Ee]}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)(f.p,{label:Ve,value:G,precision:null===Re||void 0===Re?void 0:Re.decimals,onInput:Je,button:"MAX",onButtonClick:function(){return Je(Be)}}),Ce.messages.amount&&Object(w.jsxs)("div",{className:"validation-error",children:[Object(w.jsx)(o.p,{size:12}),"\xa0",Ce.messages.amount]}),B?Object(w.jsxs)("p",{className:"gas-tank-msg",children:[Object(w.jsx)(u.db,{})," ",null===B||void 0===B?void 0:B.gasTankMsg]}):Object(w.jsxs)("div",{id:"recipient-field",children:[Object(w.jsx)(f.w,{placeholder:"Recipient",info:"Please double-check the recipient address, blockchain transactions are not reversible.",value:te,onInput:se}),Object(w.jsx)(f.y,{label:ue?"Valid Ethereum Name Services\u24c7 domain":"You can use Ethereum Name Service\u24c7",children:Object(w.jsx)("div",{id:"ens-logo",className:ue?"ens-logo-active ":""})}),Object(w.jsx)(f.y,{label:re?"Valid Unstoppable domains\u24c7 domain":"You can use Unstoppable domains\u24c7",children:Object(w.jsx)("div",{id:"udomains-logo",className:re?"ud-logo-active ":""})}),Object(w.jsx)(f.a,{addresses:A.filter((function(e){return e.address!==m})),addAddress:L,removeAddress:E,newAddress:ke,onClose:function(){return Ne(null)},onSelectAddress:function(e){return se(e)},selectedNetwork:O})]}),Ce.messages.address&&Object(w.jsxs)("div",{className:"validation-error",children:[Object(w.jsx)(o.p,{size:12}),"\xa0",Ce.messages.address]}),Object(w.jsx)("div",{className:"separator"}),Object(w.jsx)(f.b,{address:te,onAddNewAddress:function(){return Ne(te)},onChange:function(e){return he(e)},isKnownAddress:F,uDAddress:re,ensAddress:ue}),Ye?Object(w.jsx)(f.g,{id:"binance-address-warning",label:Object(w.jsxs)("span",{id:"binance-address-warning-label",children:["I confirm this address is not a ",M.join(" / ")," address: ",Object(w.jsx)("br",{}),"These platforms do not support $",null===Re||void 0===Re?void 0:Re.symbol," deposits from smart wallets",Object(w.jsx)("a",{href:"https://help.ambire.com/hc/en-us/articles/4415473743506-Statement-on-MATIC-BNB-deposits-to-Binance",target:"_blank",rel:"noreferrer",children:Object(w.jsx)(u.u,{size:20})})]}),checked:ge,onChange:function(e){var t=e.target;return xe(t.checked)}}):null,Object(w.jsx)(f.e,{icon:Object(w.jsx)(i.i,{}),disabled:me,onClick:function(){var e=re||(ue||te);if($)try{var t={to:Re.address,value:"0",data:T.encodeFunctionData("transfer",[e,$])};0===Number(Re.address)&&(t.to=e,t.value=$,t.data="0x");var s={id:"transfer_".concat(Date.now()),type:"eth_sendTransaction",chainId:O.chainId,account:m,txn:t,meta:null};re?s.meta={addressLabel:{addressLabel:te,address:re}}:ue&&(s.meta={addressLabel:{addressLabel:te,address:ue}}),y(s),H(0)}catch(n){console.error(n),U("Error: ".concat(n.message||n),{error:!0})}},children:"Send"})]}):Object(w.jsx)(f.o,{})]}),!B&&Object(w.jsx)(k,{selectedAsset:Re,selectedNetwork:O,addresses:A,addAddress:L,removeAddress:E,onSelectAddress:function(e){return se(e)}})]})}))},595:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n={"0xb468a1e5596cfbcdf561f21a10490d99b4bb7b68":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5a/Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg/220px-Jeff_Sessions_with_Elmo_and_Rosita_%28cropped%29.jpg","0x88800092ff476844f74dc2fc427974bbee2794ae":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/ambire_logo_white_bg_250x250.png","0x47cd7e91c3cbaaf266369fe8518345fc4fc12935":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png","0xb6456b57f03352be48bf101b46c1752a0813491a":"https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/vaporwave-adex-2.png","0xd9a4cb9dc9296e111c66dfacab8be034ee2e1c2c":"https://raw.githubusercontent.com/AmbireTech/adex-brand/master/logos/ADX-loyalty%40256x256.png","0xec3b10ce9cabab5dbf49f946a623e294963fbb4e":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/xwallet_250x250.png","0xe9415e904143e42007865e6864f7f632bd054a08":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/logos/Ambire_logo_250x250.png","0xade00c28244d5ce17d72e40330b1c318cd12b7c3":"https://raw.githubusercontent.com/AmbireTech/ambire-brand/main/official-logos/Ambire-AdEx/Ambire_AdEx_Symbol_color_white_bg.png"},a="https://storage.googleapis.com/zapper-fi-assets/tokens";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=t.toLowerCase(),r=e.toLowerCase();return n[s]||"".concat(a,"/").concat(r,"/").concat(s,".png")}},604:function(e,t,s){"use strict";function n(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18;if(isNaN(e)||isNaN(parseFloat(e))||"number"!==typeof e&&"string"!==typeof e)return e;try{var n=Math.min(2,s||0);return("number"===typeof e?e:parseFloat(e)).toLocaleString(void 0,{useGrouping:t,maximumFractionDigits:Math.max(n,s),minimumFractionDigits:n})}catch(a){return console.error(a),e}}s.d(t,"a",(function(){return n}))},605:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},694:function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return u}));var n=s(21),a=s(92),r=s(151),c=function(e){return e&&e.length?e&&Object(a.b)(e)?{success:!0}:{success:!1,message:"Invalid address."}:{success:!1,message:""}},o=function(e,t){var s=c(e);return s.success?e&&t&&e===t?{success:!1,message:"The entered address should be different than the your own account address."}:{success:!0}:s},i=function(e,t,s,n,o,i){var u=c(e);return u.success?e&&e===r.a.feeCollector?{success:!0}:e&&t&&e===t?{success:!1,message:"The entered address should be different than the your own account address."}:e&&Object(a.a)(e)?{success:!1,message:"You are trying to send tokens to a smart contract. Doing so would burn them."}:!e||n(e)||s||o||i?!e||n(e)||s||!o&&!i?{success:!0}:{success:!1,message:"You're trying to send to an ".concat(o?"Unstoppable domain":"Ethereum Name Service",". If you really trust to the person who gave you, confirm using the checkbox below.")}:{success:!1,message:"You're trying to send to an unknown address. If you're really sure, confirm using the checkbox below."}:u},u=function(e,t){if(!e||!e.length)return{success:!1,message:""};if(!(e&&e>0))return{success:!1,message:"The amount must be greater than 0."};try{if(e&&t&&t.decimals){var s=e.slice(0,e.indexOf(".")+t.decimals+1),a=Object(n.parseUnits)(s,t.decimals);if(a&&t.balanceRaw&&a.gt(t.balanceRaw))return{success:!1,message:"The amount is greater than the asset's balance: ".concat(null===t||void 0===t?void 0:t.balance," ").concat(null===t||void 0===t?void 0:t.symbol,".")}}}catch(r){console.error(r)}return{success:!0}},d=function(e,t,s,n,a,r,c,o,u){var d,l=i(e,t,s,n,o,u);return l.success?a&&t&&(null===(d=a.owner)||void 0===d?void 0:d.address.toLowerCase())!==t.toLowerCase()?{success:!1,message:"The NFT you're trying to send is not owned by you!"}:r&&c&&r.id!==c?{success:!1,message:"The selected network is not the correct one."}:{success:!0}:l}}}]);
//# sourceMappingURL=19.1317e92e.chunk.js.map